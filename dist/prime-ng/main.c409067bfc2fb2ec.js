"use strict";(self.webpackChunkPrimeNG=self.webpackChunkPrimeNG||[]).push([[179],{440:(Sn,Ct,Q)=>{Q.d(Ct,{nm:()=>po});var g=Q(5813);Q(4650),Q(5867);var Be=Q(5861),we=Q(9681),nt=Q(4859),Xe=Q(2090),xe=Q(1877);const ee=new Map,pt={activated:!1,tokenObservers:[]},Ue={initialized:!1,enabled:!1};function st(mt){return ee.get(mt)||pt}function Et(mt,ut){ee.set(mt,ut)}function yt(){return Ue}class di{constructor(ut,Tt,Pt,Yt,tn){if(this.operation=ut,this.retryPolicy=Tt,this.getWaitDuration=Pt,this.lowerBound=Yt,this.upperBound=tn,this.pending=null,this.nextErrorWaitInterval=Yt,Yt>tn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ut){var Tt=this;return(0,Be.Z)(function*(){Tt.stop();try{Tt.pending=new Xe.BH,yield function Un(mt){return new Promise(ut=>{setTimeout(ut,mt)})}(Tt.getNextRun(ut)),Tt.pending.resolve(),yield Tt.pending.promise,Tt.pending=new Xe.BH,yield Tt.operation(),Tt.pending.resolve(),yield Tt.pending.promise,Tt.process(!0).catch(()=>{})}catch(Pt){Tt.retryPolicy(Pt)?Tt.process(!1).catch(()=>{}):Tt.stop()}})()}getNextRun(ut){if(ut)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Tt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Tt}}}const Ut=new Xe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vt(mt){if(!st(mt).activated)throw Ut.create("use-before-activation",{appName:mt.name})}function Wi(mt,ut){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,Be.Z)(function*({url:mt,body:ut},Tt){var Pt,Yt;const tn={"Content-Type":"application/json"},si=Tt.getImmediate({optional:!0});if(si){const _i=yield si.getHeartbeatsHeader();_i&&(tn["X-Firebase-Client"]=_i)}const li={method:"POST",body:JSON.stringify(ut),headers:tn};let ar,go;try{ar=yield fetch(mt,li)}catch(_i){throw Ut.create("fetch-network-error",{originalErrorMessage:null===(Pt=_i)||void 0===Pt?void 0:Pt.message})}if(200!==ar.status)throw Ut.create("fetch-status-error",{httpStatus:ar.status});try{go=yield ar.json()}catch(_i){throw Ut.create("fetch-parse-error",{originalErrorMessage:null===(Yt=_i)||void 0===Yt?void 0:Yt.message})}const Ks=go.ttl.match(/^([\d.]+)(s)$/);if(!Ks||!Ks[2]||isNaN(Number(Ks[1])))throw Ut.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${go.ttl}`});const ds=1e3*Number(Ks[1]),Cr=Date.now();return{token:go.token,expireTimeMillis:Cr+ds,issuedAtTimeMillis:Cr}})).apply(this,arguments)}function oi(mt,ut){const{projectId:Tt,appId:Pt,apiKey:Yt}=mt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Tt}/apps/${Pt}:exchangeDebugToken?key=${Yt}`,body:{debug_token:ut}}}const yi="firebase-app-check-store";let Ni=null;function Hi(){return Ni||(Ni=new Promise((mt,ut)=>{var Tt;try{const Pt=indexedDB.open("firebase-app-check-database",1);Pt.onsuccess=Yt=>{mt(Yt.target.result)},Pt.onerror=Yt=>{var tn;ut(Ut.create("storage-open",{originalErrorMessage:null===(tn=Yt.target.error)||void 0===tn?void 0:tn.message}))},Pt.onupgradeneeded=Yt=>{0===Yt.oldVersion&&Yt.target.result.createObjectStore(yi,{keyPath:"compositeKey"})}}catch(Pt){ut(Ut.create("storage-open",{originalErrorMessage:null===(Tt=Pt)||void 0===Tt?void 0:Tt.message}))}}),Ni)}function Ji(){return(Ji=(0,Be.Z)(function*(mt,ut){const Pt=(yield Hi()).transaction(yi,"readwrite"),tn=Pt.objectStore(yi).put({compositeKey:mt,value:ut});return new Promise((si,li)=>{tn.onsuccess=ar=>{si()},Pt.onerror=ar=>{var go;li(Ut.create("storage-set",{originalErrorMessage:null===(go=ar.target.error)||void 0===go?void 0:go.message}))}})})).apply(this,arguments)}const Ar=new xe.Yd("@firebase/app-check");function ri(mt,ut){return(0,Xe.hl)()?function Jr(mt,ut){return function br(mt,ut){return Ji.apply(this,arguments)}(function fi(mt){return`${mt.options.appId}-${mt.name}`}(mt),ut)}(mt,ut).catch(Tt=>{Ar.warn(`Failed to write token to IndexedDB. Error: ${Tt}`)}):Promise.resolve()}function vs(){return yt().enabled}function qn(){return ct.apply(this,arguments)}function ct(){return(ct=(0,Be.Z)(function*(){const mt=yt();if(mt.enabled&&mt.token)return mt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ze={error:"UNKNOWN_ERROR"};function it(mt){return Xe.US.encodeString(JSON.stringify(mt),!1)}function Ye(mt){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,Be.Z)(function*(mt,ut=!1){const Tt=mt.app;vt(Tt);const Pt=st(Tt);let tn,Yt=Pt.token;if(!Yt){const ar=yield Pt.cachedTokenPromise;ar&&_t(ar)&&(Yt=ar)}if(!ut&&Yt&&_t(Yt))return{token:Yt.token};let li,si=!1;if(vs()){Pt.exchangeTokenPromise||(Pt.exchangeTokenPromise=Wi(oi(Tt,yield qn()),mt.heartbeatServiceProvider).then(go=>(Pt.exchangeTokenPromise=void 0,go)),si=!0);const ar=yield Pt.exchangeTokenPromise;return yield ri(Tt,ar),Et(Tt,Object.assign(Object.assign({},Pt),{token:ar})),{token:ar.token}}try{Pt.exchangeTokenPromise||(Pt.exchangeTokenPromise=Pt.provider.getToken().then(ar=>(Pt.exchangeTokenPromise=void 0,ar)),si=!0),Yt=yield Pt.exchangeTokenPromise}catch(ar){"appCheck/throttled"===ar.code?Ar.warn(ar.message):Ar.error(ar),tn=ar}return Yt?(li={token:Yt.token},Et(Tt,Object.assign(Object.assign({},Pt),{token:Yt})),yield ri(Tt,Yt)):li=We(tn),si&&Hr(Tt,li),li})).apply(this,arguments)}function Rn(mt,ut){const Tt=st(mt),Pt=Tt.tokenObservers.filter(Yt=>Yt.next!==ut);0===Pt.length&&Tt.tokenRefresher&&Tt.tokenRefresher.isRunning()&&Tt.tokenRefresher.stop(),Et(mt,Object.assign(Object.assign({},Tt),{tokenObservers:Pt}))}function zi(mt){const{app:ut}=mt,Tt=st(ut);let Pt=Tt.tokenRefresher;Pt||(Pt=function Xi(mt){const{app:ut}=mt;return new di((0,Be.Z)(function*(){let Pt;if(Pt=st(ut).token?yield Ye(mt,!0):yield Ye(mt),Pt.error)throw Pt.error}),()=>!0,()=>{const Tt=st(ut);if(Tt.token){let Pt=Tt.token.issuedAtTimeMillis+.5*(Tt.token.expireTimeMillis-Tt.token.issuedAtTimeMillis)+3e5;return Pt=Math.min(Pt,Tt.token.expireTimeMillis-3e5),Math.max(0,Pt-Date.now())}return 0},3e4,96e4)}(mt),Et(ut,Object.assign(Object.assign({},Tt),{tokenRefresher:Pt}))),!Pt.isRunning()&&Tt.isTokenAutoRefreshEnabled&&Pt.start()}function Hr(mt,ut){const Tt=st(mt).tokenObservers;for(const Pt of Tt)try{"EXTERNAL"===Pt.type&&null!=ut.error?Pt.error(ut.error):Pt.next(ut)}catch{}}function _t(mt){return mt.expireTimeMillis-Date.now()>0}function We(mt){return{token:it(ze),error:mt}}class tt{constructor(ut,Tt){this.app=ut,this.heartbeatServiceProvider=Tt}_delete(){const{tokenObservers:ut}=st(this.app);for(const Tt of ut)Rn(this.app,Tt.next);return Promise.resolve()}}const Gs="app-check-internal";!function xs(){(0,we._registerComponent)(new nt.wA("app-check",mt=>function zt(mt,ut){return new tt(mt,ut)}(mt.getProvider("app").getImmediate(),mt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((mt,ut,Tt)=>{mt.getProvider(Gs).initialize()})),(0,we._registerComponent)(new nt.wA(Gs,mt=>function _n(mt){return{getToken:ut=>Ye(mt,ut),addTokenListener:ut=>function mn(mt,ut,Tt,Pt){const{app:Yt}=mt,tn=st(Yt),si={next:Tt,error:Pt,type:ut};if(Et(Yt,Object.assign(Object.assign({},tn),{tokenObservers:[...tn.tokenObservers,si]})),tn.token&&_t(tn.token)){const li=tn.token;Promise.resolve().then(()=>{Tt({token:li.token}),zi(mt)}).catch(()=>{})}tn.cachedTokenPromise.then(()=>zi(mt))}(mt,"INTERNAL",ut),removeTokenListener:ut=>Rn(mt.app,ut)}}(mt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,we.registerVersion)("@firebase/app-check","0.5.12")}();class po{constructor(){return(0,g.vb)("app-check")}}typeof window<"u"&&window},1205:(Sn,Ct,Q)=>{Q.d(Ct,{zQ:()=>Qt,ww:()=>rn,rT:()=>Ue,f7:()=>Et,L6:()=>ee,_Q:()=>pt,lh:()=>st,Qv:()=>xe,nw:()=>yt});var g=Q(4650),i=Q(7579),se=Q(9646),ge=Q(9751),Ke=Q(8996),Ee=Q(6451),Oe=Q(5363),Me=Q(3900),rt=Q(4004),Re=Q(6063);class Se extends i.x{constructor(kn=1/0,Pn=1/0,Gt=Re.l){super(),this._bufferSize=kn,this._windowTime=Pn,this._timestampProvider=Gt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Pn===1/0,this._bufferSize=Math.max(1,kn),this._windowTime=Math.max(1,Pn)}next(kn){const{isStopped:Pn,_buffer:Gt,_infiniteTimeWindow:di,_timestampProvider:Un,_windowTime:xt}=this;Pn||(Gt.push(kn),!di&&Gt.push(Un.now()+xt)),this._trimBuffer(),super.next(kn)}_subscribe(kn){this._throwIfClosed(),this._trimBuffer();const Pn=this._innerSubscribe(kn),{_infiniteTimeWindow:Gt,_buffer:di}=this,Un=di.slice();for(let xt=0;xt<Un.length&&!kn.closed;xt+=Gt?1:2)kn.next(Un[xt]);return this._checkFinalizedStatuses(kn),Pn}_trimBuffer(){const{_bufferSize:kn,_timestampProvider:Pn,_buffer:Gt,_infiniteTimeWindow:di}=this,Un=(di?1:2)*kn;if(kn<1/0&&Un<Gt.length&&Gt.splice(0,Gt.length-Un),!di){const xt=Pn.now();let Ut=0;for(let He=1;He<Gt.length&&Gt[He]<=xt;He+=2)Ut=He;Ut&&Gt.splice(0,Ut+1)}}}var Ge=Q(3099);function kt(gn,kn,Pn){let Gt,di=!1;return gn&&"object"==typeof gn?({bufferSize:Gt=1/0,windowTime:kn=1/0,refCount:di=!1,scheduler:Pn}=gn):Gt=gn??1/0,(0,Ge.B)({connector:()=>new Se(Gt,kn,Pn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:di})}var dt=Q(590),wt=Q(576);function Wt(gn,kn){return(0,wt.m)(kn)?(0,Me.w)(()=>gn,kn):(0,Me.w)(()=>gn)}var Dt=Q(9468),bt=Q(9300),ot=Q(5813),qt=Q(2011),Be=Q(6895),we=Q(440),nt=Q(127);const xe=new g.OlP("angularfire2.auth.use-emulator"),ee=new g.OlP("angularfire2.auth.settings"),pt=new g.OlP("angularfire2.auth.tenant-id"),Ue=new g.OlP("angularfire2.auth.langugage-code"),st=new g.OlP("angularfire2.auth.use-device-language"),Et=new g.OlP("angularfire.auth.persistence"),yt=(gn,kn,Pn,Gt,di,Un,xt,Ut)=>(0,qt.cc)(`${gn.name}.auth`,"AngularFireAuth",gn.name,()=>{const He=kn.runOutsideAngular(()=>gn.auth());if(Pn&&He.useEmulator(...Pn),Gt&&(He.tenantId=Gt),He.languageCode=di,Un&&He.useDeviceLanguage(),xt)for(const[vt,un]of Object.entries(xt))He.settings[vt]=un;return Ut&&He.setPersistence(Ut),He},[Pn,Gt,di,Un,xt,Ut]);let Qt=(()=>{class gn{constructor(Pn,Gt,di,Un,xt,Ut,He,vt,un,Hn,Wi,Ci){const Ei=new i.x,Zi=(0,se.of)(void 0).pipe((0,Oe.Q)(xt.outsideAngular),(0,Me.w)(()=>Un.runOutsideAngular(()=>Promise.resolve().then(Q.bind(Q,5881)))),(0,rt.U)(()=>(0,qt.on)(Pn,Un,Gt)),(0,rt.U)(oi=>yt(oi,Un,Ut,vt,un,Hn,He,Wi)),kt({bufferSize:1,refCount:!1}));if((0,Be.PM)(di))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,se.of)(null);else{Zi.pipe((0,dt.P)()).subscribe();const Ki=Zi.pipe((0,Me.w)(Jt=>Jt.getRedirectResult().then(Ni=>Ni,()=>null)),ot.iC,kt({bufferSize:1,refCount:!1})),Ui=Zi.pipe((0,Me.w)(Jt=>new ge.y(Ni=>({unsubscribe:Un.runOutsideAngular(()=>Jt.onAuthStateChanged(Hi=>Ni.next(Hi),Hi=>Ni.error(Hi),()=>Ni.complete()))})))),yi=Zi.pipe((0,Me.w)(Jt=>new ge.y(Ni=>({unsubscribe:Un.runOutsideAngular(()=>Jt.onIdTokenChanged(Hi=>Ni.next(Hi),Hi=>Ni.error(Hi),()=>Ni.complete()))}))));this.authState=Ki.pipe(Wt(Ui),(0,Dt.R)(xt.outsideAngular),(0,Oe.Q)(xt.insideAngular)),this.user=Ki.pipe(Wt(yi),(0,Dt.R)(xt.outsideAngular),(0,Oe.Q)(xt.insideAngular)),this.idToken=this.user.pipe((0,Me.w)(Jt=>Jt?(0,Ke.D)(Jt.getIdToken()):(0,se.of)(null))),this.idTokenResult=this.user.pipe((0,Me.w)(Jt=>Jt?(0,Ke.D)(Jt.getIdTokenResult()):(0,se.of)(null))),this.credential=(0,Ee.T)(Ki,Ei,this.authState.pipe((0,bt.h)(Jt=>!Jt))).pipe((0,rt.U)(Jt=>Jt?.user?Jt:null),(0,Dt.R)(xt.outsideAngular),(0,Oe.Q)(xt.insideAngular))}return(0,qt.pX)(this,Zi,Un,{spy:{apply:(oi,Ki,Ui)=>{(oi.startsWith("signIn")||oi.startsWith("createUser"))&&Ui.then(yi=>Ei.next(yi))}}})}}return gn.\u0275fac=function(Pn){return new(Pn||gn)(g.LFG(qt.Dh),g.LFG(qt.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(ot.HU),g.LFG(xe,8),g.LFG(ee,8),g.LFG(pt,8),g.LFG(Ue,8),g.LFG(st,8),g.LFG(Et,8),g.LFG(we.nm,8))},gn.\u0275prov=g.Yz7({token:gn,factory:gn.\u0275fac,providedIn:"any"}),gn})(),rn=(()=>{class gn{constructor(){nt.Z.registerVersion("angularfire",ot.q4.full,"auth-compat")}}return gn.\u0275fac=function(Pn){return new(Pn||gn)},gn.\u0275mod=g.oAB({type:gn}),gn.\u0275inj=g.cJS({providers:[Qt]}),gn})()},7471:(Sn,Ct,Q)=>{Q.d(Ct,{KQ:()=>Hc,JS:()=>md});var g=Q(4650),i=Q(4986),se=Q(9751),ge=Q(9646),Ke=Q(6451),Ee=Q(4004),Oe=Q(3099),Me=Q(3900),rt=Q(5026),Re=Q(1884),Se=Q(4482),Ge=Q(5403),kt=Q(8421),dt=Q(4671),wt=Q(5032),Wt=Q(7669),ot=Q(5813),qt=Q(2011),we=(Q(5881),Q(3942)),nt=Q(4859),Xe=Q(5861),xe=Q(9681),ee=Q(2090),pt=Q(1877);const Ue="@firebase/database";let Et="";function yt(p){Et=p}class Qt{constructor(d){this.domStorage_=d,this.prefix_="firebase:"}set(d,h){null==h?this.domStorage_.removeItem(this.prefixedName_(d)):this.domStorage_.setItem(this.prefixedName_(d),(0,ee.Pz)(h))}get(d){const h=this.domStorage_.getItem(this.prefixedName_(d));return null==h?null:(0,ee.cI)(h)}remove(d){this.domStorage_.removeItem(this.prefixedName_(d))}prefixedName_(d){return this.prefix_+d}toString(){return this.domStorage_.toString()}}class rn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(d,h){null==h?delete this.cache_[d]:this.cache_[d]=h}get(d){return(0,ee.r3)(this.cache_,d)?this.cache_[d]:null}remove(d){delete this.cache_[d]}}const gn=function(p){try{if(typeof window<"u"&&typeof window[p]<"u"){const d=window[p];return d.setItem("firebase:sentinel","cache"),d.removeItem("firebase:sentinel"),new Qt(d)}}catch{}return new rn},kn=gn("localStorage"),Pn=gn("sessionStorage"),Gt=new pt.Yd("@firebase/database"),di=function(){let p=1;return function(){return p++}}(),Un=function(p){const d=(0,ee.dS)(p),h=new ee.gQ;h.update(d);const w=h.digest();return ee.US.encodeByteArray(w)},xt=function(...p){let d="";for(let h=0;h<p.length;h++){const w=p[h];Array.isArray(w)||w&&"object"==typeof w&&"number"==typeof w.length?d+=xt.apply(null,w):d+="object"==typeof w?(0,ee.Pz)(w):w,d+=" "}return d};let Ut=null,He=!0;const vt=function(p,d){(0,ee.hu)(!d||!0===p||!1===p,"Can't turn on custom loggers persistently."),!0===p?(Gt.logLevel=pt.in.VERBOSE,Ut=Gt.log.bind(Gt),d&&Pn.set("logging_enabled",!0)):"function"==typeof p?Ut=p:(Ut=null,Pn.remove("logging_enabled"))},un=function(...p){if(!0===He&&(He=!1,null===Ut&&!0===Pn.get("logging_enabled")&&vt(!0)),Ut){const d=xt.apply(null,p);Ut(d)}},Hn=function(p){return function(...d){un(p,...d)}},Wi=function(...p){const d="FIREBASE INTERNAL ERROR: "+xt(...p);Gt.error(d)},Ci=function(...p){const d=`FIREBASE FATAL ERROR: ${xt(...p)}`;throw Gt.error(d),new Error(d)},Ei=function(...p){const d="FIREBASE WARNING: "+xt(...p);Gt.warn(d)},oi=function(p){return"number"==typeof p&&(p!=p||p===Number.POSITIVE_INFINITY||p===Number.NEGATIVE_INFINITY)},Ui="[MIN_NAME]",yi="[MAX_NAME]",Jt=function(p,d){if(p===d)return 0;if(p===Ui||d===yi)return-1;if(d===Ui||p===yi)return 1;{const h=Mn(p),w=Mn(d);return null!==h?null!==w?h-w==0?p.length-d.length:h-w:-1:null!==w?1:p<d?-1:1}},Ni=function(p,d){return p===d?0:p<d?-1:1},Hi=function(p,d){if(d&&p in d)return d[p];throw new Error("Missing required key ("+p+") in object: "+(0,ee.Pz)(d))},Qi=function(p){if("object"!=typeof p||null===p)return(0,ee.Pz)(p);const d=[];for(const w in p)d.push(w);d.sort();let h="{";for(let w=0;w<d.length;w++)0!==w&&(h+=","),h+=(0,ee.Pz)(d[w]),h+=":",h+=Qi(p[d[w]]);return h+="}",h},Jr=function(p,d){const h=p.length;if(h<=d)return[p];const w=[];for(let O=0;O<h;O+=d)w.push(p.substring(O,O+d>h?h:O+d));return w};function sr(p,d){for(const h in p)p.hasOwnProperty(h)&&d(h,p[h])}const xr=function(p){(0,ee.hu)(!oi(p),"Invalid JSON number");const w=1023;let O,j,re,ye,ke;0===p?(j=0,re=0,O=1/p==-1/0?1:0):(O=p<0,(p=Math.abs(p))>=Math.pow(2,1-w)?(ye=Math.min(Math.floor(Math.log(p)/Math.LN2),w),j=ye+w,re=Math.round(p*Math.pow(2,52-ye)-Math.pow(2,52))):(j=0,re=Math.round(p/Math.pow(2,-1074))));const Qe=[];for(ke=52;ke;ke-=1)Qe.push(re%2?1:0),re=Math.floor(re/2);for(ke=11;ke;ke-=1)Qe.push(j%2?1:0),j=Math.floor(j/2);Qe.push(O?1:0),Qe.reverse();const $t=Qe.join("");let Kt="";for(ke=0;ke<64;ke+=8){let an=parseInt($t.substr(ke,8),2).toString(16);1===an.length&&(an="0"+an),Kt+=an}return Kt.toLowerCase()},Gn=new RegExp("^-?(0*)\\d{1,10}$"),fi=-2147483648,Ar=2147483647,Mn=function(p){if(Gn.test(p)){const d=Number(p);if(d>=fi&&d<=Ar)return d}return null},ji=function(p){try{p()}catch(d){setTimeout(()=>{throw Ei("Exception was thrown by user callback.",d.stack||""),d},Math.floor(0))}},or=function(p,d){const h=setTimeout(p,d);return"object"==typeof h&&h.unref&&h.unref(),h};class ai{constructor(d,h){this.appName_=d,this.appCheckProvider=h,this.appCheck=h?.getImmediate({optional:!0}),this.appCheck||h?.get().then(w=>this.appCheck=w)}getToken(d){return this.appCheck?this.appCheck.getToken(d):new Promise((h,w)=>{setTimeout(()=>{this.appCheck?this.getToken(d).then(h,w):h(null)},0)})}addTokenChangeListener(d){var h;null===(h=this.appCheckProvider)||void 0===h||h.get().then(w=>w.addTokenListener(d))}notifyForInvalidToken(){Ei(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class vs{constructor(d,h,w){this.appName_=d,this.firebaseOptions_=h,this.authProvider_=w,this.auth_=null,this.auth_=w.getImmediate({optional:!0}),this.auth_||w.onInit(O=>this.auth_=O)}getToken(d){return this.auth_?this.auth_.getToken(d).catch(h=>h&&"auth/token-not-initialized"===h.code?(un("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(h)):new Promise((h,w)=>{setTimeout(()=>{this.auth_?this.getToken(d).then(h,w):h(null)},0)})}addTokenChangeListener(d){this.auth_?this.auth_.addAuthTokenListener(d):this.authProvider_.get().then(h=>h.addAuthTokenListener(d))}removeTokenChangeListener(d){this.authProvider_.get().then(h=>h.removeAuthTokenListener(d))}notifyForInvalidToken(){let d='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';d+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ei(d)}}let qn=(()=>{class p{constructor(h){this.accessToken=h}getToken(h){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(h){h(this.accessToken)}removeTokenChangeListener(h){}notifyForInvalidToken(){}}return p.OWNER="owner",p})();const Zt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xi="websocket",Hr="long_polling";class _t{constructor(d,h,w,O,j=!1,re="",ye=!1){this.secure=h,this.namespace=w,this.webSocketOnly=O,this.nodeAdmin=j,this.persistenceKey=re,this.includeNamespaceInQueryParams=ye,this._host=d.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=kn.get("host:"+d)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(d){d!==this.internalHost&&(this.internalHost=d,this.isCacheableHost()&&kn.set("host:"+this._host,this.internalHost))}toString(){let d=this.toURLString();return this.persistenceKey&&(d+="<"+this.persistenceKey+">"),d}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function tt(p,d,h){let w;if((0,ee.hu)("string"==typeof d,"typeof type must == string"),(0,ee.hu)("object"==typeof h,"typeof params must == object"),d===Xi)w=(p.secure?"wss://":"ws://")+p.internalHost+"/.ws?";else{if(d!==Hr)throw new Error("Unknown connection type: "+d);w=(p.secure?"https://":"http://")+p.internalHost+"/.lp?"}(function We(p){return p.host!==p.internalHost||p.isCustomHost()||p.includeNamespaceInQueryParams})(p)&&(h.ns=p.namespace);const O=[];return sr(h,(j,re)=>{O.push(j+"="+re)}),w+O.join("&")}class zt{constructor(){this.counters_={}}incrementCounter(d,h=1){(0,ee.r3)(this.counters_,d)||(this.counters_[d]=0),this.counters_[d]+=h}get(){return(0,ee.p$)(this.counters_)}}const _n={},$n={};function Yn(p){const d=p.toString();return _n[d]||(_n[d]=new zt),_n[d]}class Ve{constructor(d){this.onMessage_=d,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(d,h){this.closeAfterResponse=d,this.onClose=h,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(d,h){for(this.pendingResponses[d]=h;this.pendingResponses[this.currentResponseNum];){const w=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let O=0;O<w.length;++O)w[O]&&ji(()=>{this.onMessage_(w[O])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Gi{constructor(d,h,w,O,j,re,ye){this.connId=d,this.repoInfo=h,this.applicationId=w,this.appCheckToken=O,this.authToken=j,this.transportSessionId=re,this.lastSessionId=ye,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hn(d),this.stats_=Yn(h),this.urlFn=ke=>(this.appCheckToken&&(ke.ac=this.appCheckToken),tt(h,Hr,ke))}open(d,h){this.curSegmentNum=0,this.onDisconnect_=h,this.myPacketOrderer=new Ve(d),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(p){if((0,ee.Yr)()||"complete"===document.readyState)p();else{let d=!1;const h=function(){document.body?d||(d=!0,p()):setTimeout(h,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",h,!1),window.addEventListener("load",h,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&h()}),window.attachEvent("onload",h))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fo((...j)=>{const[re,ye,ke,Qe,$t]=j;if(this.incrementIncomingBytes_(j),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===re)this.id=ye,this.password=ke;else{if("close"!==re)throw new Error("Unrecognized command received: "+re);ye?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ye,()=>{this.onClosed_()})):this.onClosed_()}},(...j)=>{const[re,ye]=j;this.incrementIncomingBytes_(j),this.myPacketOrderer.handleResponse(re,ye)},()=>{this.onClosed_()},this.urlFn);const w={start:"t"};w.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(w.cb=this.scriptTagHolder.uniqueCallbackIdentifier),w.v="5",this.transportSessionId&&(w.s=this.transportSessionId),this.lastSessionId&&(w.ls=this.lastSessionId),this.applicationId&&(w.p=this.applicationId),this.appCheckToken&&(w.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Zt.test(location.hostname)&&(w.r="f");const O=this.urlFn(w);this.log_("Connecting via long-poll to "+O),this.scriptTagHolder.addTag(O,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gi.forceAllow_=!0}static forceDisallow(){Gi.forceDisallow_=!0}static isAvailable(){return!((0,ee.Yr)()||!Gi.forceAllow_&&(Gi.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(d){const h=(0,ee.Pz)(d);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);const w=(0,ee.h$)(h),O=Jr(w,1840);for(let j=0;j<O.length;j++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,O.length,O[j]),this.curSegmentNum++}addDisconnectPingFrame(d,h){if((0,ee.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const w={dframe:"t"};w.id=d,w.pw=h,this.myDisconnFrame.src=this.urlFn(w),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(d){const h=(0,ee.Pz)(d).length;this.bytesReceived+=h,this.stats_.incrementCounter("bytes_received",h)}}class fo{constructor(d,h,w,O){if(this.onDisconnect=w,this.urlFn=O,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ee.Yr)())this.commandCB=d,this.onMessageCB=h;else{this.uniqueCallbackIdentifier=di(),window["pLPCommand"+this.uniqueCallbackIdentifier]=d,window["pRTLPCB"+this.uniqueCallbackIdentifier]=h,this.myIFrame=fo.createIFrame_();let j="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(j='<script>document.domain="'+document.domain+'";<\/script>');const re="<html><body>"+j+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(re),this.myIFrame.doc.close()}catch(ye){un("frame writing exception"),ye.stack&&un(ye.stack),un(ye)}}}static createIFrame_(){const d=document.createElement("iframe");if(d.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(d);try{d.contentWindow.document||un("No IE domain setting required")}catch{const w=document.domain;d.src="javascript:void((function(){document.open();document.domain='"+w+"';document.close();})())"}return d.contentDocument?d.doc=d.contentDocument:d.contentWindow?d.doc=d.contentWindow.document:d.document&&(d.doc=d.document),d}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const d=this.onDisconnect;d&&(this.onDisconnect=null,d())}startLongPoll(d,h){for(this.myID=d,this.myPW=h,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const d={};d.id=this.myID,d.pw=this.myPW,d.ser=this.currentSerial;let h=this.urlFn(d),w="",O=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+w.length<=1870;){const re=this.pendingSegs.shift();w=w+"&seg"+O+"="+re.seg+"&ts"+O+"="+re.ts+"&d"+O+"="+re.d,O++}return h+=w,this.addLongPollTag_(h,this.currentSerial),!0}return!1}enqueueSegment(d,h,w){this.pendingSegs.push({seg:d,ts:h,d:w}),this.alive&&this.newRequest_()}addLongPollTag_(d,h){this.outstandingRequests.add(h);const w=()=>{this.outstandingRequests.delete(h),this.newRequest_()},O=setTimeout(w,Math.floor(25e3));this.addTag(d,()=>{clearTimeout(O),w()})}addTag(d,h){(0,ee.Yr)()?this.doNodeLongPoll(d,h):setTimeout(()=>{try{if(!this.sendNewPolls)return;const w=this.myIFrame.doc.createElement("script");w.type="text/javascript",w.async=!0,w.src=d,w.onload=w.onreadystatechange=function(){const O=w.readyState;(!O||"loaded"===O||"complete"===O)&&(w.onload=w.onreadystatechange=null,w.parentNode&&w.parentNode.removeChild(w),h())},w.onerror=()=>{un("Long-poll script failed to load: "+d),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(w)}catch{}},Math.floor(1))}}let Gs=null;typeof MozWebSocket<"u"?Gs=MozWebSocket:typeof WebSocket<"u"&&(Gs=WebSocket);let xs=(()=>{class p{constructor(h,w,O,j,re,ye,ke){this.connId=h,this.applicationId=O,this.appCheckToken=j,this.authToken=re,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hn(this.connId),this.stats_=Yn(w),this.connURL=p.connectionURL_(w,ye,ke,j,O),this.nodeAdmin=w.nodeAdmin}static connectionURL_(h,w,O,j,re){const ye={v:"5"};return!(0,ee.Yr)()&&typeof location<"u"&&location.hostname&&Zt.test(location.hostname)&&(ye.r="f"),w&&(ye.s=w),O&&(ye.ls=O),j&&(ye.ac=j),re&&(ye.p=re),tt(h,Xi,ye)}open(h,w){this.onDisconnect=w,this.onMessage=h,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,kn.set("previous_websocket_failure",!0);try{let O;if((0,ee.Yr)()){O={headers:{"User-Agent":`Firebase/5/${Et}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(O.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(O.headers["X-Firebase-AppCheck"]=this.appCheckToken);const re=process.env,ye=0===this.connURL.indexOf("wss://")?re.HTTPS_PROXY||re.https_proxy:re.HTTP_PROXY||re.http_proxy;ye&&(O.proxy={origin:ye})}this.mySock=new Gs(this.connURL,[],O)}catch(O){this.log_("Error instantiating WebSocket.");const j=O.message||O.data;return j&&this.log_(j),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=O=>{this.handleIncomingFrame(O)},this.mySock.onerror=O=>{this.log_("WebSocket error.  Closing connection.");const j=O.message||O.data;j&&this.log_(j),this.onClosed_()}}start(){}static forceDisallow(){p.forceDisallow_=!0}static isAvailable(){let h=!1;if(typeof navigator<"u"&&navigator.userAgent){const O=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);O&&O.length>1&&parseFloat(O[1])<4.4&&(h=!0)}return!h&&null!==Gs&&!p.forceDisallow_}static previouslyFailed(){return kn.isInMemoryStorage||!0===kn.get("previous_websocket_failure")}markConnectionHealthy(){kn.remove("previous_websocket_failure")}appendFrame_(h){if(this.frames.push(h),this.frames.length===this.totalFrames){const w=this.frames.join("");this.frames=null;const O=(0,ee.cI)(w);this.onMessage(O)}}handleNewFrameCount_(h){this.totalFrames=h,this.frames=[]}extractFrameCount_(h){if((0,ee.hu)(null===this.frames,"We already have a frame buffer"),h.length<=6){const w=Number(h);if(!isNaN(w))return this.handleNewFrameCount_(w),null}return this.handleNewFrameCount_(1),h}handleIncomingFrame(h){if(null===this.mySock)return;const w=h.data;if(this.bytesReceived+=w.length,this.stats_.incrementCounter("bytes_received",w.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(w);else{const O=this.extractFrameCount_(w);null!==O&&this.appendFrame_(O)}}send(h){this.resetKeepAlive();const w=(0,ee.Pz)(h);this.bytesSent+=w.length,this.stats_.incrementCounter("bytes_sent",w.length);const O=Jr(w,16384);O.length>1&&this.sendString_(String(O.length));for(let j=0;j<O.length;j++)this.sendString_(O[j])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(h){try{this.mySock.send(h)}catch(w){this.log_("Exception thrown from WebSocket.send():",w.message||w.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return p.responsesRequiredToBeHealthy=2,p.healthyTimeout=3e4,p})(),$s=(()=>{class p{constructor(h){this.initTransports_(h)}static get ALL_TRANSPORTS(){return[Gi,xs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(h){const w=xs&&xs.isAvailable();let O=w&&!xs.previouslyFailed();if(h.webSocketOnly&&(w||Ei("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),O=!0),O)this.transports_=[xs];else{const j=this.transports_=[];for(const re of p.ALL_TRANSPORTS)re&&re.isAvailable()&&j.push(re);p.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return p.globalTransportInitialized_=!1,p})();class va{constructor(d,h,w,O,j,re,ye,ke,Qe,$t){this.id=d,this.repoInfo_=h,this.applicationId_=w,this.appCheckToken_=O,this.authToken_=j,this.onMessage_=re,this.onReady_=ye,this.onDisconnect_=ke,this.onKill_=Qe,this.lastSessionId=$t,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hn("c:"+this.id+":"),this.transportManager_=new $s(h),this.log_("Connection created"),this.start_()}start_(){const d=this.transportManager_.initialTransport();this.conn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const h=this.connReceiver_(this.conn_),w=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(h,w)},Math.floor(0));const O=d.healthyTimeout||0;O>0&&(this.healthyTimeout_=or(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(O)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(d){return h=>{d===this.conn_?this.onConnectionLost_(h):d===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(d){return h=>{2!==this.state_&&(d===this.rx_?this.onPrimaryMessageReceived_(h):d===this.secondaryConn_?this.onSecondaryMessageReceived_(h):this.log_("message on old connection"))}}sendRequest(d){this.sendData_({t:"d",d})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(d){if("t"in d){const h=d.t;"a"===h?this.upgradeIfSecondaryHealthy_():"r"===h?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===h&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(d){const h=Hi("t",d),w=Hi("d",d);if("c"===h)this.onSecondaryControl_(w);else{if("d"!==h)throw new Error("Unknown protocol layer: "+h);this.pendingDataMessages.push(w)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(d){const h=Hi("t",d),w=Hi("d",d);"c"===h?this.onControl_(w):"d"===h&&this.onDataMessage_(w)}onDataMessage_(d){this.onPrimaryResponse_(),this.onMessage_(d)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(d){const h=Hi("t",d);if("d"in d){const w=d.d;if("h"===h)this.onHandshake_(w);else if("n"===h){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let O=0;O<this.pendingDataMessages.length;++O)this.onDataMessage_(this.pendingDataMessages[O]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===h?this.onConnectionShutdown_(w):"r"===h?this.onReset_(w):"e"===h?Wi("Server Error: "+w):"o"===h?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Wi("Unknown control packet command: "+h)}}onHandshake_(d){const h=d.ts,w=d.v,O=d.h;this.sessionId=d.s,this.repoInfo_.host=O,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,h),"5"!==w&&Ei("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const d=this.transportManager_.upgradeTransport();d&&this.startUpgrade_(d)}startUpgrade_(d){this.secondaryConn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const h=this.connReceiver_(this.secondaryConn_),w=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(h,w),or(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(d){this.log_("Reset packet received.  New host: "+d),this.repoInfo_.host=d,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(d,h){this.log_("Realtime connection established."),this.conn_=d,this.state_=1,this.onReady_&&(this.onReady_(h,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):or(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const d=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===d||this.rx_===d)&&this.close()}onConnectionLost_(d){this.conn_=null,d||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(kn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(d){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(d),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(d){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(d)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mo{put(d,h,w,O){}merge(d,h,w,O){}refreshAuthToken(d){}refreshAppCheckToken(d){}onDisconnectPut(d,h,w){}onDisconnectMerge(d,h,w){}onDisconnectCancel(d,h){}reportStats(d){}}class io{constructor(d){this.allowedEvents_=d,this.listeners_={},(0,ee.hu)(Array.isArray(d)&&d.length>0,"Requires a non-empty array")}trigger(d,...h){if(Array.isArray(this.listeners_[d])){const w=[...this.listeners_[d]];for(let O=0;O<w.length;O++)w[O].callback.apply(w[O].context,h)}}on(d,h,w){this.validateEventType_(d),this.listeners_[d]=this.listeners_[d]||[],this.listeners_[d].push({callback:h,context:w});const O=this.getInitialEvent(d);O&&h.apply(w,O)}off(d,h,w){this.validateEventType_(d);const O=this.listeners_[d]||[];for(let j=0;j<O.length;j++)if(O[j].callback===h&&(!w||w===O[j].context))return void O.splice(j,1)}validateEventType_(d){(0,ee.hu)(this.allowedEvents_.find(h=>h===d),"Unknown event: "+d)}}class mt extends io{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ee.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new mt}getInitialEvent(d){return(0,ee.hu)("online"===d,"Unknown event type: "+d),[this.online_]}currentlyOnline(){return this.online_}}class Pt{constructor(d,h){if(void 0===h){this.pieces_=d.split("/");let w=0;for(let O=0;O<this.pieces_.length;O++)this.pieces_[O].length>0&&(this.pieces_[w]=this.pieces_[O],w++);this.pieces_.length=w,this.pieceNum_=0}else this.pieces_=d,this.pieceNum_=h}toString(){let d="";for(let h=this.pieceNum_;h<this.pieces_.length;h++)""!==this.pieces_[h]&&(d+="/"+this.pieces_[h]);return d||"/"}}function Yt(){return new Pt("")}function tn(p){return p.pieceNum_>=p.pieces_.length?null:p.pieces_[p.pieceNum_]}function si(p){return p.pieces_.length-p.pieceNum_}function li(p){let d=p.pieceNum_;return d<p.pieces_.length&&d++,new Pt(p.pieces_,d)}function ar(p){return p.pieceNum_<p.pieces_.length?p.pieces_[p.pieces_.length-1]:null}function Ks(p,d=0){return p.pieces_.slice(p.pieceNum_+d)}function ds(p){if(p.pieceNum_>=p.pieces_.length)return null;const d=[];for(let h=p.pieceNum_;h<p.pieces_.length-1;h++)d.push(p.pieces_[h]);return new Pt(d,0)}function Cr(p,d){const h=[];for(let w=p.pieceNum_;w<p.pieces_.length;w++)h.push(p.pieces_[w]);if(d instanceof Pt)for(let w=d.pieceNum_;w<d.pieces_.length;w++)h.push(d.pieces_[w]);else{const w=d.split("/");for(let O=0;O<w.length;O++)w[O].length>0&&h.push(w[O])}return new Pt(h,0)}function _i(p){return p.pieceNum_>=p.pieces_.length}function jr(p,d){const h=tn(p),w=tn(d);if(null===h)return d;if(h===w)return jr(li(p),li(d));throw new Error("INTERNAL ERROR: innerPath ("+d+") is not within outerPath ("+p+")")}function ko(p,d){const h=Ks(p,0),w=Ks(d,0);for(let O=0;O<h.length&&O<w.length;O++){const j=Jt(h[O],w[O]);if(0!==j)return j}return h.length===w.length?0:h.length<w.length?-1:1}function Oo(p,d){if(si(p)!==si(d))return!1;for(let h=p.pieceNum_,w=d.pieceNum_;h<=p.pieces_.length;h++,w++)if(p.pieces_[h]!==d.pieces_[w])return!1;return!0}function Er(p,d){let h=p.pieceNum_,w=d.pieceNum_;if(si(p)>si(d))return!1;for(;h<p.pieces_.length;){if(p.pieces_[h]!==d.pieces_[w])return!1;++h,++w}return!0}class ro{constructor(d,h){this.errorPrefix_=h,this.parts_=Ks(d,0),this.byteLength_=Math.max(1,this.parts_.length);for(let w=0;w<this.parts_.length;w++)this.byteLength_+=(0,ee.ug)(this.parts_[w]);Xo(this)}}function Xo(p){if(p.byteLength_>768)throw new Error(p.errorPrefix_+"has a key path longer than 768 bytes ("+p.byteLength_+").");if(p.parts_.length>32)throw new Error(p.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+es(p))}function es(p){return 0===p.parts_.length?"":"in property '"+p.parts_.join(".")+"'"}class ea extends io{constructor(){let d,h;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(h="visibilitychange",d="hidden"):typeof document.mozHidden<"u"?(h="mozvisibilitychange",d="mozHidden"):typeof document.msHidden<"u"?(h="msvisibilitychange",d="msHidden"):typeof document.webkitHidden<"u"&&(h="webkitvisibilitychange",d="webkitHidden")),this.visible_=!0,h&&document.addEventListener(h,()=>{const w=!document[d];w!==this.visible_&&(this.visible_=w,this.trigger("visible",w))},!1)}static getInstance(){return new ea}getInitialEvent(d){return(0,ee.hu)("visible"===d,"Unknown event type: "+d),[this.visible_]}}const yo=1e3;let Pr,hs=(()=>{class p extends mo{constructor(h,w,O,j,re,ye,ke,Qe){if(super(),this.repoInfo_=h,this.applicationId_=w,this.onDataUpdate_=O,this.onConnectStatus_=j,this.onServerInfoUpdate_=re,this.authTokenProvider_=ye,this.appCheckTokenProvider_=ke,this.authOverride_=Qe,this.id=p.nextPersistentConnectionId_++,this.log_=Hn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yo,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Qe&&!(0,ee.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ea.getInstance().on("visible",this.onVisible_,this),-1===h.host.indexOf("fblocal")&&mt.getInstance().on("online",this.onOnline_,this)}sendRequest(h,w,O){const j=++this.requestNumber_,re={r:j,a:h,b:w};this.log_((0,ee.Pz)(re)),(0,ee.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(re),O&&(this.requestCBHash_[j]=O)}get(h){this.initConnection_();const w=new ee.BH,O={p:h._path.toString(),q:h._queryObject};return this.outstandingGets_.push({action:"g",request:O,onComplete:ye=>{const ke=ye.d;"ok"===ye.s?w.resolve(ke):w.reject(ke)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),w.promise}listen(h,w,O,j){this.initConnection_();const re=h._queryIdentifier,ye=h._path.toString();this.log_("Listen called for "+ye+" "+re),this.listens.has(ye)||this.listens.set(ye,new Map),(0,ee.hu)(h._queryParams.isDefault()||!h._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ee.hu)(!this.listens.get(ye).has(re),"listen() called twice for same path/queryId.");const ke={onComplete:j,hashFn:w,query:h,tag:O};this.listens.get(ye).set(re,ke),this.connected_&&this.sendListen_(ke)}sendGet_(h){const w=this.outstandingGets_[h];this.sendRequest("g",w.request,O=>{delete this.outstandingGets_[h],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),w.onComplete&&w.onComplete(O)})}sendListen_(h){const w=h.query,O=w._path.toString(),j=w._queryIdentifier;this.log_("Listen on "+O+" for "+j);const re={p:O};h.tag&&(re.q=w._queryObject,re.t=h.tag),re.h=h.hashFn(),this.sendRequest("q",re,ke=>{const Qe=ke.d,$t=ke.s;p.warnOnListenWarnings_(Qe,w),(this.listens.get(O)&&this.listens.get(O).get(j))===h&&(this.log_("listen response",ke),"ok"!==$t&&this.removeListen_(O,j),h.onComplete&&h.onComplete($t,Qe))})}static warnOnListenWarnings_(h,w){if(h&&"object"==typeof h&&(0,ee.r3)(h,"w")){const O=(0,ee.DV)(h,"w");if(Array.isArray(O)&&~O.indexOf("no_index")){const j='".indexOn": "'+w._queryParams.getIndex().toString()+'"',re=w._path.toString();Ei(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${j} at ${re} to your security rules for better performance.`)}}}refreshAuthToken(h){this.authToken_=h,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(h)}reduceReconnectDelayIfAdminCredential_(h){(h&&40===h.length||(0,ee.GJ)(h))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(h){this.appCheckToken_=h,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const h=this.authToken_,w=(0,ee.w9)(h)?"auth":"gauth",O={cred:h};null===this.authOverride_?O.noauth=!0:"object"==typeof this.authOverride_&&(O.authvar=this.authOverride_),this.sendRequest(w,O,j=>{const re=j.s,ye=j.d||"error";this.authToken_===h&&("ok"===re?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(re,ye))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},h=>{const w=h.s,O=h.d||"error";"ok"===w?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(w,O)})}unlisten(h,w){const O=h._path.toString(),j=h._queryIdentifier;this.log_("Unlisten called for "+O+" "+j),(0,ee.hu)(h._queryParams.isDefault()||!h._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(O,j)&&this.connected_&&this.sendUnlisten_(O,j,h._queryObject,w)}sendUnlisten_(h,w,O,j){this.log_("Unlisten on "+h+" for "+w);const re={p:h};j&&(re.q=O,re.t=j),this.sendRequest("n",re)}onDisconnectPut(h,w,O){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",h,w,O):this.onDisconnectRequestQueue_.push({pathString:h,action:"o",data:w,onComplete:O})}onDisconnectMerge(h,w,O){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",h,w,O):this.onDisconnectRequestQueue_.push({pathString:h,action:"om",data:w,onComplete:O})}onDisconnectCancel(h,w){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",h,null,w):this.onDisconnectRequestQueue_.push({pathString:h,action:"oc",data:null,onComplete:w})}sendOnDisconnect_(h,w,O,j){const re={p:w,d:O};this.log_("onDisconnect "+h,re),this.sendRequest(h,re,ye=>{j&&setTimeout(()=>{j(ye.s,ye.d)},Math.floor(0))})}put(h,w,O,j){this.putInternal("p",h,w,O,j)}merge(h,w,O,j){this.putInternal("m",h,w,O,j)}putInternal(h,w,O,j,re){this.initConnection_();const ye={p:w,d:O};void 0!==re&&(ye.h=re),this.outstandingPuts_.push({action:h,request:ye,onComplete:j}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+w)}sendPut_(h){const w=this.outstandingPuts_[h].action,O=this.outstandingPuts_[h].request,j=this.outstandingPuts_[h].onComplete;this.outstandingPuts_[h].queued=this.connected_,this.sendRequest(w,O,re=>{this.log_(w+" response",re),delete this.outstandingPuts_[h],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),j&&j(re.s,re.d)})}reportStats(h){if(this.connected_){const w={c:h};this.log_("reportStats",w),this.sendRequest("s",w,O=>{"ok"!==O.s&&this.log_("reportStats","Error sending stats: "+O.d)})}}onDataMessage_(h){if("r"in h){this.log_("from server: "+(0,ee.Pz)(h));const w=h.r,O=this.requestCBHash_[w];O&&(delete this.requestCBHash_[w],O(h.b))}else{if("error"in h)throw"A server-side error has occurred: "+h.error;"a"in h&&this.onDataPush_(h.a,h.b)}}onDataPush_(h,w){this.log_("handleServerMessage",h,w),"d"===h?this.onDataUpdate_(w.p,w.d,!1,w.t):"m"===h?this.onDataUpdate_(w.p,w.d,!0,w.t):"c"===h?this.onListenRevoked_(w.p,w.q):"ac"===h?this.onAuthRevoked_(w.s,w.d):"apc"===h?this.onAppCheckRevoked_(w.s,w.d):"sd"===h?this.onSecurityDebugPacket_(w):Wi("Unrecognized action received from server: "+(0,ee.Pz)(h)+"\nAre you using the latest client?")}onReady_(h,w){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(h),this.lastSessionId=w,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(h){(0,ee.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(h))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(h){h&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yo,this.realtime_||this.scheduleConnect_(0)),this.visible_=h}onOnline_(h){h?(this.log_("Browser went online."),this.reconnectDelay_=yo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=yo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const h=(new Date).getTime()-this.lastConnectionAttemptTime_;let w=Math.max(0,this.reconnectDelay_-h);w=Math.random()*w,this.log_("Trying to reconnect in "+w+"ms"),this.scheduleConnect_(w),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var h=this;return(0,Xe.Z)(function*(){if(h.shouldReconnect_()){h.log_("Making a connection attempt"),h.lastConnectionAttemptTime_=(new Date).getTime(),h.lastConnectionEstablishedTime_=null;const w=h.onDataMessage_.bind(h),O=h.onReady_.bind(h),j=h.onRealtimeDisconnect_.bind(h),re=h.id+":"+p.nextConnectionId_++,ye=h.lastSessionId;let ke=!1,Qe=null;const $t=function(){Qe?Qe.close():(ke=!0,j())};h.realtime_={close:$t,sendRequest:function(ti){(0,ee.hu)(Qe,"sendRequest call when we're not connected not allowed."),Qe.sendRequest(ti)}};const an=h.forceTokenRefresh_;h.forceTokenRefresh_=!1;try{const[ti,Ii]=yield Promise.all([h.authTokenProvider_.getToken(an),h.appCheckTokenProvider_.getToken(an)]);ke?un("getToken() completed but was canceled"):(un("getToken() completed. Creating connection."),h.authToken_=ti&&ti.accessToken,h.appCheckToken_=Ii&&Ii.token,Qe=new va(re,h.repoInfo_,h.applicationId_,h.appCheckToken_,h.authToken_,w,O,j,ss=>{Ei(ss+" ("+h.repoInfo_.toString()+")"),h.interrupt("server_kill")},ye))}catch(ti){h.log_("Failed to get token: "+ti),ke||(h.repoInfo_.nodeAdmin&&Ei(ti),$t())}}})()}interrupt(h){un("Interrupting connection for reason: "+h),this.interruptReasons_[h]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(h){un("Resuming connection for reason: "+h),delete this.interruptReasons_[h],(0,ee.xb)(this.interruptReasons_)&&(this.reconnectDelay_=yo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(h){const w=h-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:w})}cancelSentTransactions_(){for(let h=0;h<this.outstandingPuts_.length;h++){const w=this.outstandingPuts_[h];w&&"h"in w.request&&w.queued&&(w.onComplete&&w.onComplete("disconnect"),delete this.outstandingPuts_[h],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(h,w){let O;O=w?w.map(re=>Qi(re)).join("$"):"default";const j=this.removeListen_(h,O);j&&j.onComplete&&j.onComplete("permission_denied")}removeListen_(h,w){const O=new Pt(h).toString();let j;if(this.listens.has(O)){const re=this.listens.get(O);j=re.get(w),re.delete(w),0===re.size&&this.listens.delete(O)}else j=void 0;return j}onAuthRevoked_(h,w){un("Auth token revoked: "+h+"/"+w),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===h||"permission_denied"===h)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(h,w){un("App check token revoked: "+h+"/"+w),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===h||"permission_denied"===h)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(h){this.securityDebugCallback_?this.securityDebugCallback_(h):"msg"in h&&console.log("FIREBASE: "+h.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const h of this.listens.values())for(const w of h.values())this.sendListen_(w);for(let h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){const h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(let h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)}sendConnectStats_(){const h={};let w="js";(0,ee.Yr)()&&(w=this.repoInfo_.nodeAdmin?"admin_node":"node"),h["sdk."+w+"."+Et.replace(/\./g,"-")]=1,(0,ee.uI)()?h["framework.cordova"]=1:(0,ee.b$)()&&(h["framework.reactnative"]=1),this.reportStats(h)}shouldReconnect_(){const h=mt.getInstance().currentlyOnline();return(0,ee.xb)(this.interruptReasons_)&&h}}return p.nextPersistentConnectionId_=0,p.nextConnectionId_=0,p})();class Ai{constructor(d,h){this.name=d,this.node=h}static Wrap(d,h){return new Ai(d,h)}}class To{getCompare(){return this.compare.bind(this)}indexedValueChanged(d,h){const w=new Ai(Ui,d),O=new Ai(Ui,h);return 0!==this.compare(w,O)}minPost(){return Ai.MIN}}class Bo extends To{static get __EMPTY_NODE(){return Pr}static set __EMPTY_NODE(d){Pr=d}compare(d,h){return Jt(d.name,h.name)}isDefinedOn(d){throw(0,ee.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(d,h){return!1}minPost(){return Ai.MIN}maxPost(){return new Ai(yi,Pr)}makePost(d,h){return(0,ee.hu)("string"==typeof d,"KeyIndex indexValue must always be a string."),new Ai(d,Pr)}toString(){return".key"}}const bo=new Bo;class Io{constructor(d,h,w,O,j=null){this.isReverse_=O,this.resultGenerator_=j,this.nodeStack_=[];let re=1;for(;!d.isEmpty();)if(re=h?w(d.key,h):1,O&&(re*=-1),re<0)d=this.isReverse_?d.left:d.right;else{if(0===re){this.nodeStack_.push(d);break}this.nodeStack_.push(d),d=this.isReverse_?d.right:d.left}}getNext(){if(0===this.nodeStack_.length)return null;let h,d=this.nodeStack_.pop();if(h=this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value},this.isReverse_)for(d=d.left;!d.isEmpty();)this.nodeStack_.push(d),d=d.right;else for(d=d.right;!d.isEmpty();)this.nodeStack_.push(d),d=d.left;return h}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const d=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value}}}let xa,lr=(()=>{class p{constructor(h,w,O,j,re){this.key=h,this.value=w,this.color=O??p.RED,this.left=j??fs.EMPTY_NODE,this.right=re??fs.EMPTY_NODE}copy(h,w,O,j,re){return new p(h??this.key,w??this.value,O??this.color,j??this.left,re??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(h){return this.left.inorderTraversal(h)||!!h(this.key,this.value)||this.right.inorderTraversal(h)}reverseTraversal(h){return this.right.reverseTraversal(h)||h(this.key,this.value)||this.left.reverseTraversal(h)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(h,w,O){let j=this;const re=O(h,j.key);return j=re<0?j.copy(null,null,null,j.left.insert(h,w,O),null):0===re?j.copy(null,w,null,null,null):j.copy(null,null,null,null,j.right.insert(h,w,O)),j.fixUp_()}removeMin_(){if(this.left.isEmpty())return fs.EMPTY_NODE;let h=this;return!h.left.isRed_()&&!h.left.left.isRed_()&&(h=h.moveRedLeft_()),h=h.copy(null,null,null,h.left.removeMin_(),null),h.fixUp_()}remove(h,w){let O,j;if(O=this,w(h,O.key)<0)!O.left.isEmpty()&&!O.left.isRed_()&&!O.left.left.isRed_()&&(O=O.moveRedLeft_()),O=O.copy(null,null,null,O.left.remove(h,w),null);else{if(O.left.isRed_()&&(O=O.rotateRight_()),!O.right.isEmpty()&&!O.right.isRed_()&&!O.right.left.isRed_()&&(O=O.moveRedRight_()),0===w(h,O.key)){if(O.right.isEmpty())return fs.EMPTY_NODE;j=O.right.min_(),O=O.copy(j.key,j.value,null,null,O.right.removeMin_())}O=O.copy(null,null,null,null,O.right.remove(h,w))}return O.fixUp_()}isRed_(){return this.color}fixUp_(){let h=this;return h.right.isRed_()&&!h.left.isRed_()&&(h=h.rotateLeft_()),h.left.isRed_()&&h.left.left.isRed_()&&(h=h.rotateRight_()),h.left.isRed_()&&h.right.isRed_()&&(h=h.colorFlip_()),h}moveRedLeft_(){let h=this.colorFlip_();return h.right.left.isRed_()&&(h=h.copy(null,null,null,null,h.right.rotateRight_()),h=h.rotateLeft_(),h=h.colorFlip_()),h}moveRedRight_(){let h=this.colorFlip_();return h.left.left.isRed_()&&(h=h.rotateRight_(),h=h.colorFlip_()),h}rotateLeft_(){const h=this.copy(null,null,p.RED,null,this.right.left);return this.right.copy(null,null,this.color,h,null)}rotateRight_(){const h=this.copy(null,null,p.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,h)}colorFlip_(){const h=this.left.copy(null,null,!this.left.color,null,null),w=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,h,w)}checkMaxDepth_(){const h=this.check_();return Math.pow(2,h)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const h=this.left.check_();if(h!==this.right.check_())throw new Error("Black depths differ");return h+(this.isRed_()?0:1)}}return p.RED=!0,p.BLACK=!1,p})();class fs{constructor(d,h=fs.EMPTY_NODE){this.comparator_=d,this.root_=h}insert(d,h){return new fs(this.comparator_,this.root_.insert(d,h,this.comparator_).copy(null,null,lr.BLACK,null,null))}remove(d){return new fs(this.comparator_,this.root_.remove(d,this.comparator_).copy(null,null,lr.BLACK,null,null))}get(d){let h,w=this.root_;for(;!w.isEmpty();){if(h=this.comparator_(d,w.key),0===h)return w.value;h<0?w=w.left:h>0&&(w=w.right)}return null}getPredecessorKey(d){let h,w=this.root_,O=null;for(;!w.isEmpty();){if(h=this.comparator_(d,w.key),0===h){if(w.left.isEmpty())return O?O.key:null;for(w=w.left;!w.right.isEmpty();)w=w.right;return w.key}h<0?w=w.left:h>0&&(O=w,w=w.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(d){return this.root_.inorderTraversal(d)}reverseTraversal(d){return this.root_.reverseTraversal(d)}getIterator(d){return new Io(this.root_,null,this.comparator_,!1,d)}getIteratorFrom(d,h){return new Io(this.root_,d,this.comparator_,!1,h)}getReverseIteratorFrom(d,h){return new Io(this.root_,d,this.comparator_,!0,h)}getReverseIterator(d){return new Io(this.root_,null,this.comparator_,!0,d)}}function Ws(p,d){return Jt(p.name,d.name)}function Yi(p,d){return Jt(p,d)}fs.EMPTY_NODE=new class So{copy(d,h,w,O,j){return this}insert(d,h,w){return new lr(d,h,null)}remove(d,h){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(d){return!1}reverseTraversal(d){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const la=function(p){return"number"==typeof p?"number:"+xr(p):"string:"+p},qr=function(p){if(p.isLeafNode()){const d=p.val();(0,ee.hu)("string"==typeof d||"number"==typeof d||"object"==typeof d&&(0,ee.r3)(d,".sv"),"Priority must be a string or number.")}else(0,ee.hu)(p===xa||p.isEmpty(),"priority of unexpected type.");(0,ee.hu)(p===xa||p.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ba,Ti,ol,cr=(()=>{class p{constructor(h,w=p.__childrenNodeConstructor.EMPTY_NODE){this.value_=h,this.priorityNode_=w,this.lazyHash_=null,(0,ee.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qr(this.priorityNode_)}static set __childrenNodeConstructor(h){ba=h}static get __childrenNodeConstructor(){return ba}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(h){return new p(this.value_,h)}getImmediateChild(h){return".priority"===h?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE}getChild(h){return _i(h)?this:".priority"===tn(h)?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(h,w){return null}updateImmediateChild(h,w){return".priority"===h?this.updatePriority(w):w.isEmpty()&&".priority"!==h?this:p.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(h,w).updatePriority(this.priorityNode_)}updateChild(h,w){const O=tn(h);return null===O?w:w.isEmpty()&&".priority"!==O?this:((0,ee.hu)(".priority"!==O||1===si(h),".priority must be the last token in a path"),this.updateImmediateChild(O,p.__childrenNodeConstructor.EMPTY_NODE.updateChild(li(h),w)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(h,w){return!1}val(h){return h&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let h="";this.priorityNode_.isEmpty()||(h+="priority:"+la(this.priorityNode_.val())+":");const w=typeof this.value_;h+=w+":",h+="number"===w?xr(this.value_):this.value_,this.lazyHash_=Un(h)}return this.lazyHash_}getValue(){return this.value_}compareTo(h){return h===p.__childrenNodeConstructor.EMPTY_NODE?1:h instanceof p.__childrenNodeConstructor?-1:((0,ee.hu)(h.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(h))}compareToLeafNode_(h){const w=typeof h.value_,O=typeof this.value_,j=p.VALUE_TYPE_ORDER.indexOf(w),re=p.VALUE_TYPE_ORDER.indexOf(O);return(0,ee.hu)(j>=0,"Unknown leaf type: "+w),(0,ee.hu)(re>=0,"Unknown leaf type: "+O),j===re?"object"===O?0:this.value_<h.value_?-1:this.value_===h.value_?0:1:re-j}withIndex(){return this}isIndexed(){return!0}equals(h){if(h===this)return!0;if(h.isLeafNode()){const w=h;return this.value_===w.value_&&this.priorityNode_.equals(w.priorityNode_)}return!1}}return p.VALUE_TYPE_ORDER=["object","boolean","number","string"],p})();const Tr=new class Yl extends To{compare(d,h){const w=d.node.getPriority(),O=h.node.getPriority(),j=w.compareTo(O);return 0===j?Jt(d.name,h.name):j}isDefinedOn(d){return!d.getPriority().isEmpty()}indexedValueChanged(d,h){return!d.getPriority().equals(h.getPriority())}minPost(){return Ai.MIN}maxPost(){return new Ai(yi,new cr("[PRIORITY-POST]",ol))}makePost(d,h){const w=Ti(d);return new Ai(h,new cr("[PRIORITY-POST]",w))}toString(){return".priority"}},No=Math.log(2);class Fo{constructor(d){this.count=parseInt(Math.log(d+1)/No,10),this.current_=this.count-1;const O=(j=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=d+1&O}nextBitIsOne(){const d=!(this.bits_&1<<this.current_);return this.current_--,d}}const Zs=function(p,d,h,w){p.sort(d);const O=function(ke,Qe){const $t=Qe-ke;let Kt,an;if(0===$t)return null;if(1===$t)return Kt=p[ke],an=h?h(Kt):Kt,new lr(an,Kt.node,lr.BLACK,null,null);{const ti=parseInt($t/2,10)+ke,Ii=O(ke,ti),ss=O(ti+1,Qe);return Kt=p[ti],an=h?h(Kt):Kt,new lr(an,Kt.node,lr.BLACK,Ii,ss)}},ye=function(ke){let Qe=null,$t=null,Kt=p.length;const an=function(Ii,ss){const ml=Kt-Ii,oc=Kt;Kt-=Ii;const lu=O(ml+1,oc),cu=p[ml],jf=h?h(cu):cu;ti(new lr(jf,cu.node,ss,null,lu))},ti=function(Ii){Qe?(Qe.left=Ii,Qe=Ii):($t=Ii,Qe=Ii)};for(let Ii=0;Ii<ke.count;++Ii){const ss=ke.nextBitIsOne(),ml=Math.pow(2,ke.count-(Ii+1));ss?an(ml,lr.BLACK):(an(ml,lr.BLACK),an(ml,lr.RED))}return $t}(new Fo(p.length));return new fs(w||d,ye)};let Xt;const ni={};class so{constructor(d,h){this.indexes_=d,this.indexSet_=h}static get Default(){return(0,ee.hu)(ni&&Tr,"ChildrenNode.ts has not been loaded"),Xt=Xt||new so({".priority":ni},{".priority":Tr}),Xt}get(d){const h=(0,ee.DV)(this.indexes_,d);if(!h)throw new Error("No index defined for "+d);return h instanceof fs?h:null}hasIndex(d){return(0,ee.r3)(this.indexSet_,d.toString())}addIndex(d,h){(0,ee.hu)(d!==bo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const w=[];let O=!1;const j=h.getIterator(Ai.Wrap);let ye,re=j.getNext();for(;re;)O=O||d.isDefinedOn(re.node),w.push(re),re=j.getNext();ye=O?Zs(w,d.getCompare()):ni;const ke=d.toString(),Qe=Object.assign({},this.indexSet_);Qe[ke]=d;const $t=Object.assign({},this.indexes_);return $t[ke]=ye,new so($t,Qe)}addToIndexes(d,h){const w=(0,ee.UI)(this.indexes_,(O,j)=>{const re=(0,ee.DV)(this.indexSet_,j);if((0,ee.hu)(re,"Missing index implementation for "+j),O===ni){if(re.isDefinedOn(d.node)){const ye=[],ke=h.getIterator(Ai.Wrap);let Qe=ke.getNext();for(;Qe;)Qe.name!==d.name&&ye.push(Qe),Qe=ke.getNext();return ye.push(d),Zs(ye,re.getCompare())}return ni}{const ye=h.get(d.name);let ke=O;return ye&&(ke=ke.remove(new Ai(d.name,ye))),ke.insert(d,d.node)}});return new so(w,this.indexSet_)}removeFromIndexes(d,h){const w=(0,ee.UI)(this.indexes_,O=>{if(O===ni)return O;{const j=h.get(d.name);return j?O.remove(new Ai(d.name,j)):O}});return new so(w,this.indexSet_)}}let bs,Wn=(()=>{class p{constructor(h,w,O){this.children_=h,this.priorityNode_=w,this.indexMap_=O,this.lazyHash_=null,this.priorityNode_&&qr(this.priorityNode_),this.children_.isEmpty()&&(0,ee.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return bs||(bs=new p(new fs(Yi),null,so.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||bs}updatePriority(h){return this.children_.isEmpty()?this:new p(this.children_,h,this.indexMap_)}getImmediateChild(h){if(".priority"===h)return this.getPriority();{const w=this.children_.get(h);return null===w?bs:w}}getChild(h){const w=tn(h);return null===w?this:this.getImmediateChild(w).getChild(li(h))}hasChild(h){return null!==this.children_.get(h)}updateImmediateChild(h,w){if((0,ee.hu)(w,"We should always be passing snapshot nodes"),".priority"===h)return this.updatePriority(w);{const O=new Ai(h,w);let j,re;w.isEmpty()?(j=this.children_.remove(h),re=this.indexMap_.removeFromIndexes(O,this.children_)):(j=this.children_.insert(h,w),re=this.indexMap_.addToIndexes(O,this.children_));const ye=j.isEmpty()?bs:this.priorityNode_;return new p(j,ye,re)}}updateChild(h,w){const O=tn(h);if(null===O)return w;{(0,ee.hu)(".priority"!==tn(h)||1===si(h),".priority must be the last token in a path");const j=this.getImmediateChild(O).updateChild(li(h),w);return this.updateImmediateChild(O,j)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(h){if(this.isEmpty())return null;const w={};let O=0,j=0,re=!0;if(this.forEachChild(Tr,(ye,ke)=>{w[ye]=ke.val(h),O++,re&&p.INTEGER_REGEXP_.test(ye)?j=Math.max(j,Number(ye)):re=!1}),!h&&re&&j<2*O){const ye=[];for(const ke in w)ye[ke]=w[ke];return ye}return h&&!this.getPriority().isEmpty()&&(w[".priority"]=this.getPriority().val()),w}hash(){if(null===this.lazyHash_){let h="";this.getPriority().isEmpty()||(h+="priority:"+la(this.getPriority().val())+":"),this.forEachChild(Tr,(w,O)=>{const j=O.hash();""!==j&&(h+=":"+w+":"+j)}),this.lazyHash_=""===h?"":Un(h)}return this.lazyHash_}getPredecessorChildName(h,w,O){const j=this.resolveIndex_(O);if(j){const re=j.getPredecessorKey(new Ai(h,w));return re?re.name:null}return this.children_.getPredecessorKey(h)}getFirstChildName(h){const w=this.resolveIndex_(h);if(w){const O=w.minKey();return O&&O.name}return this.children_.minKey()}getFirstChild(h){const w=this.getFirstChildName(h);return w?new Ai(w,this.children_.get(w)):null}getLastChildName(h){const w=this.resolveIndex_(h);if(w){const O=w.maxKey();return O&&O.name}return this.children_.maxKey()}getLastChild(h){const w=this.getLastChildName(h);return w?new Ai(w,this.children_.get(w)):null}forEachChild(h,w){const O=this.resolveIndex_(h);return O?O.inorderTraversal(j=>w(j.name,j.node)):this.children_.inorderTraversal(w)}getIterator(h){return this.getIteratorFrom(h.minPost(),h)}getIteratorFrom(h,w){const O=this.resolveIndex_(w);if(O)return O.getIteratorFrom(h,j=>j);{const j=this.children_.getIteratorFrom(h.name,Ai.Wrap);let re=j.peek();for(;null!=re&&w.compare(re,h)<0;)j.getNext(),re=j.peek();return j}}getReverseIterator(h){return this.getReverseIteratorFrom(h.maxPost(),h)}getReverseIteratorFrom(h,w){const O=this.resolveIndex_(w);if(O)return O.getReverseIteratorFrom(h,j=>j);{const j=this.children_.getReverseIteratorFrom(h.name,Ai.Wrap);let re=j.peek();for(;null!=re&&w.compare(re,h)>0;)j.getNext(),re=j.peek();return j}}compareTo(h){return this.isEmpty()?h.isEmpty()?0:-1:h.isLeafNode()||h.isEmpty()?1:h===X?-1:0}withIndex(h){if(h===bo||this.indexMap_.hasIndex(h))return this;{const w=this.indexMap_.addIndex(h,this.children_);return new p(this.children_,this.priorityNode_,w)}}isIndexed(h){return h===bo||this.indexMap_.hasIndex(h)}equals(h){if(h===this)return!0;if(h.isLeafNode())return!1;{const w=h;if(this.getPriority().equals(w.getPriority())){if(this.children_.count()===w.children_.count()){const O=this.getIterator(Tr),j=w.getIterator(Tr);let re=O.getNext(),ye=j.getNext();for(;re&&ye;){if(re.name!==ye.name||!re.node.equals(ye.node))return!1;re=O.getNext(),ye=j.getNext()}return null===re&&null===ye}return!1}return!1}}resolveIndex_(h){return h===bo?null:this.indexMap_.get(h.toString())}}return p.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,p})();const X=new class ie extends Wn{constructor(){super(new fs(Yi),Wn.EMPTY_NODE,so.Default)}compareTo(d){return d===this?0:1}equals(d){return d===this}getPriority(){return this}getImmediateChild(d){return Wn.EMPTY_NODE}isEmpty(){return!1}};function pe(p,d=null){if(null===p)return Wn.EMPTY_NODE;if("object"==typeof p&&".priority"in p&&(d=p[".priority"]),(0,ee.hu)(null===d||"string"==typeof d||"number"==typeof d||"object"==typeof d&&".sv"in d,"Invalid priority type found: "+typeof d),"object"==typeof p&&".value"in p&&null!==p[".value"]&&(p=p[".value"]),"object"!=typeof p||".sv"in p)return new cr(p,pe(d));if(p instanceof Array){let h=Wn.EMPTY_NODE;return sr(p,(w,O)=>{if((0,ee.r3)(p,w)&&"."!==w.substring(0,1)){const j=pe(O);(j.isLeafNode()||!j.isEmpty())&&(h=h.updateImmediateChild(w,j))}}),h.updatePriority(pe(d))}{const h=[];let w=!1;if(sr(p,(re,ye)=>{if("."!==re.substring(0,1)){const ke=pe(ye);ke.isEmpty()||(w=w||!ke.getPriority().isEmpty(),h.push(new Ai(re,ke)))}}),0===h.length)return Wn.EMPTY_NODE;const j=Zs(h,Ws,re=>re.name,Yi);if(w){const re=Zs(h,Tr.getCompare());return new Wn(j,pe(d),new so({".priority":re},{".priority":Tr}))}return new Wn(j,pe(d),so.Default)}}Object.defineProperties(Ai,{MIN:{value:new Ai(Ui,Wn.EMPTY_NODE)},MAX:{value:new Ai(yi,X)}}),Bo.__EMPTY_NODE=Wn.EMPTY_NODE,cr.__childrenNodeConstructor=Wn,function mr(p){xa=p}(X),function Uo(p){ol=p}(X),function lc(p){Ti=p}(pe);class Lt extends To{constructor(d){super(),this.indexPath_=d,(0,ee.hu)(!_i(d)&&".priority"!==tn(d),"Can't create PathIndex with empty path or .priority key")}extractChild(d){return d.getChild(this.indexPath_)}isDefinedOn(d){return!d.getChild(this.indexPath_).isEmpty()}compare(d,h){const w=this.extractChild(d.node),O=this.extractChild(h.node),j=w.compareTo(O);return 0===j?Jt(d.name,h.name):j}makePost(d,h){const w=pe(d),O=Wn.EMPTY_NODE.updateChild(this.indexPath_,w);return new Ai(h,O)}maxPost(){const d=Wn.EMPTY_NODE.updateChild(this.indexPath_,X);return new Ai(yi,d)}toString(){return Ks(this.indexPath_,0).join("/")}}const zr=new class Ln extends To{compare(d,h){const w=d.node.compareTo(h.node);return 0===w?Jt(d.name,h.name):w}isDefinedOn(d){return!0}indexedValueChanged(d,h){return!d.equals(h)}minPost(){return Ai.MIN}maxPost(){return Ai.MAX}makePost(d,h){const w=pe(d);return new Ai(h,w)}toString(){return".value"}},oo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Aa=function(){let p=0;const d=[];return function(h){const w=h===p;let O;p=h;const j=new Array(8);for(O=7;O>=0;O--)j[O]=oo.charAt(h%64),h=Math.floor(h/64);(0,ee.hu)(0===h,"Cannot push at time == 0");let re=j.join("");if(w){for(O=11;O>=0&&63===d[O];O--)d[O]=0;d[O]++}else for(O=0;O<12;O++)d[O]=Math.floor(64*Math.random());for(O=0;O<12;O++)re+=oo.charAt(d[O]);return(0,ee.hu)(20===re.length,"nextPushId: Length should be 20."),re}}(),xl=function(p){if(p===""+Ar)return"-";const d=Mn(p);if(null!=d)return""+(d+1);const h=new Array(p.length);for(let re=0;re<h.length;re++)h[re]=p.charAt(re);if(h.length<786)return h.push("-"),h.join("");let w=h.length-1;for(;w>=0&&"z"===h[w];)w--;if(-1===w)return yi;const j=oo.charAt(oo.indexOf(h[w])+1);return h[w]=j,h.slice(0,w+1).join("")},ta=function(p){if(p===""+fi)return Ui;const d=Mn(p);if(null!=d)return""+(d-1);const h=new Array(p.length);for(let w=0;w<h.length;w++)h[w]=p.charAt(w);return"-"===h[h.length-1]?1===h.length?""+Ar:(delete h[h.length-1],h.join("")):(h[h.length-1]=oo.charAt(oo.indexOf(h[h.length-1])-1),h.join("")+"z".repeat(786-h.length))};function al(p){return{type:"value",snapshotNode:p}}function wa(p,d){return{type:"child_added",snapshotNode:d,childName:p}}function Ga(p,d){return{type:"child_removed",snapshotNode:d,childName:p}}function $a(p,d,h){return{type:"child_changed",snapshotNode:d,childName:p,oldSnap:h}}class Ma{constructor(d){this.index_=d}updateChild(d,h,w,O,j,re){(0,ee.hu)(d.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ye=d.getImmediateChild(h);return ye.getChild(O).equals(w.getChild(O))&&ye.isEmpty()===w.isEmpty()||(null!=re&&(w.isEmpty()?d.hasChild(h)?re.trackChildChange(Ga(h,ye)):(0,ee.hu)(d.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ye.isEmpty()?re.trackChildChange(wa(h,w)):re.trackChildChange($a(h,w,ye))),d.isLeafNode()&&w.isEmpty())?d:d.updateImmediateChild(h,w).withIndex(this.index_)}updateFullNode(d,h,w){return null!=w&&(d.isLeafNode()||d.forEachChild(Tr,(O,j)=>{h.hasChild(O)||w.trackChildChange(Ga(O,j))}),h.isLeafNode()||h.forEachChild(Tr,(O,j)=>{if(d.hasChild(O)){const re=d.getImmediateChild(O);re.equals(j)||w.trackChildChange($a(O,j,re))}else w.trackChildChange(wa(O,j))})),h.withIndex(this.index_)}updatePriority(d,h){return d.isEmpty()?Wn.EMPTY_NODE:d.updatePriority(h)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class na{constructor(d){this.indexedFilter_=new Ma(d.getIndex()),this.index_=d.getIndex(),this.startPost_=na.getStartPost_(d),this.endPost_=na.getEndPost_(d)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(d){return this.index_.compare(this.getStartPost(),d)<=0&&this.index_.compare(d,this.getEndPost())<=0}updateChild(d,h,w,O,j,re){return this.matches(new Ai(h,w))||(w=Wn.EMPTY_NODE),this.indexedFilter_.updateChild(d,h,w,O,j,re)}updateFullNode(d,h,w){h.isLeafNode()&&(h=Wn.EMPTY_NODE);let O=h.withIndex(this.index_);O=O.updatePriority(Wn.EMPTY_NODE);const j=this;return h.forEachChild(Tr,(re,ye)=>{j.matches(new Ai(re,ye))||(O=O.updateImmediateChild(re,Wn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(d,O,w)}updatePriority(d,h){return d}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(d){if(d.hasStart()){const h=d.getIndexStartName();return d.getIndex().makePost(d.getIndexStartValue(),h)}return d.getIndex().minPost()}static getEndPost_(d){if(d.hasEnd()){const h=d.getIndexEndName();return d.getIndex().makePost(d.getIndexEndValue(),h)}return d.getIndex().maxPost()}}class ms{constructor(d){this.rangedFilter_=new na(d),this.index_=d.getIndex(),this.limit_=d.getLimit(),this.reverse_=!d.isViewFromLeft()}updateChild(d,h,w,O,j,re){return this.rangedFilter_.matches(new Ai(h,w))||(w=Wn.EMPTY_NODE),d.getImmediateChild(h).equals(w)?d:d.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(d,h,w,O,j,re):this.fullLimitUpdateChild_(d,h,w,j,re)}updateFullNode(d,h,w){let O;if(h.isLeafNode()||h.isEmpty())O=Wn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<h.numChildren()&&h.isIndexed(this.index_)){let j;O=Wn.EMPTY_NODE.withIndex(this.index_),j=this.reverse_?h.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):h.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let re=0;for(;j.hasNext()&&re<this.limit_;){const ye=j.getNext();let ke;if(ke=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ye)<=0:this.index_.compare(ye,this.rangedFilter_.getEndPost())<=0,!ke)break;O=O.updateImmediateChild(ye.name,ye.node),re++}}else{let j,re,ye,ke;if(O=h.withIndex(this.index_),O=O.updatePriority(Wn.EMPTY_NODE),this.reverse_){ke=O.getReverseIterator(this.index_),j=this.rangedFilter_.getEndPost(),re=this.rangedFilter_.getStartPost();const Kt=this.index_.getCompare();ye=(an,ti)=>Kt(ti,an)}else ke=O.getIterator(this.index_),j=this.rangedFilter_.getStartPost(),re=this.rangedFilter_.getEndPost(),ye=this.index_.getCompare();let Qe=0,$t=!1;for(;ke.hasNext();){const Kt=ke.getNext();!$t&&ye(j,Kt)<=0&&($t=!0),$t&&Qe<this.limit_&&ye(Kt,re)<=0?Qe++:O=O.updateImmediateChild(Kt.name,Wn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(d,O,w)}updatePriority(d,h){return d}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(d,h,w,O,j){let re;if(this.reverse_){const Kt=this.index_.getCompare();re=(an,ti)=>Kt(ti,an)}else re=this.index_.getCompare();const ye=d;(0,ee.hu)(ye.numChildren()===this.limit_,"");const ke=new Ai(h,w),Qe=this.reverse_?ye.getFirstChild(this.index_):ye.getLastChild(this.index_),$t=this.rangedFilter_.matches(ke);if(ye.hasChild(h)){const Kt=ye.getImmediateChild(h);let an=O.getChildAfterChild(this.index_,Qe,this.reverse_);for(;null!=an&&(an.name===h||ye.hasChild(an.name));)an=O.getChildAfterChild(this.index_,an,this.reverse_);const ti=null==an?1:re(an,ke);if($t&&!w.isEmpty()&&ti>=0)return j?.trackChildChange($a(h,w,Kt)),ye.updateImmediateChild(h,w);{j?.trackChildChange(Ga(h,Kt));const ss=ye.updateImmediateChild(h,Wn.EMPTY_NODE);return null!=an&&this.rangedFilter_.matches(an)?(j?.trackChildChange(wa(an.name,an.node)),ss.updateImmediateChild(an.name,an.node)):ss}}return w.isEmpty()?d:$t&&re(Qe,ke)>=0?(null!=j&&(j.trackChildChange(Ga(Qe.name,Qe.node)),j.trackChildChange(wa(h,w))),ye.updateImmediateChild(h,w).updateImmediateChild(Qe.name,Wn.EMPTY_NODE)):d}}class ca{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ee.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ee.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ui}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ee.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ee.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ee.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tr}copy(){const d=new ca;return d.limitSet_=this.limitSet_,d.limit_=this.limit_,d.startSet_=this.startSet_,d.indexStartValue_=this.indexStartValue_,d.startNameSet_=this.startNameSet_,d.indexStartName_=this.indexStartName_,d.endSet_=this.endSet_,d.indexEndValue_=this.indexEndValue_,d.endNameSet_=this.endNameSet_,d.indexEndName_=this.indexEndName_,d.index_=this.index_,d.viewFrom_=this.viewFrom_,d}}function ll(p,d,h){const w=p.copy();return w.startSet_=!0,void 0===d&&(d=null),w.indexStartValue_=d,null!=h?(w.startNameSet_=!0,w.indexStartName_=h):(w.startNameSet_=!1,w.indexStartName_=""),w}function z(p,d,h){const w=p.copy();return w.endSet_=!0,void 0===d&&(d=null),w.indexEndValue_=d,void 0!==h?(w.endNameSet_=!0,w.indexEndName_=h):(w.endNameSet_=!1,w.indexEndName_=""),w}function Y(p,d){const h=p.copy();return h.index_=d,h}function _e(p){const d={};if(p.isDefault())return d;let h;return p.index_===Tr?h="$priority":p.index_===zr?h="$value":p.index_===bo?h="$key":((0,ee.hu)(p.index_ instanceof Lt,"Unrecognized index type!"),h=p.index_.toString()),d.orderBy=(0,ee.Pz)(h),p.startSet_&&(d.startAt=(0,ee.Pz)(p.indexStartValue_),p.startNameSet_&&(d.startAt+=","+(0,ee.Pz)(p.indexStartName_))),p.endSet_&&(d.endAt=(0,ee.Pz)(p.indexEndValue_),p.endNameSet_&&(d.endAt+=","+(0,ee.Pz)(p.indexEndName_))),p.limitSet_&&(p.isViewFromLeft()?d.limitToFirst=p.limit_:d.limitToLast=p.limit_),d}function $e(p){const d={};if(p.startSet_&&(d.sp=p.indexStartValue_,p.startNameSet_&&(d.sn=p.indexStartName_)),p.endSet_&&(d.ep=p.indexEndValue_,p.endNameSet_&&(d.en=p.indexEndName_)),p.limitSet_){d.l=p.limit_;let h=p.viewFrom_;""===h&&(h=p.isViewFromLeft()?"l":"r"),d.vf=h}return p.index_!==Tr&&(d.i=p.index_.toString()),d}class Rt extends mo{constructor(d,h,w,O){super(),this.repoInfo_=d,this.onDataUpdate_=h,this.authTokenProvider_=w,this.appCheckTokenProvider_=O,this.log_=Hn("p:rest:"),this.listens_={}}reportStats(d){throw new Error("Method not implemented.")}static getListenId_(d,h){return void 0!==h?"tag$"+h:((0,ee.hu)(d._queryParams.isDefault(),"should have a tag if it's not a default query."),d._path.toString())}listen(d,h,w,O){const j=d._path.toString();this.log_("Listen called for "+j+" "+d._queryIdentifier);const re=Rt.getListenId_(d,w),ye={};this.listens_[re]=ye;const ke=_e(d._queryParams);this.restRequest_(j+".json",ke,(Qe,$t)=>{let Kt=$t;if(404===Qe&&(Kt=null,Qe=null),null===Qe&&this.onDataUpdate_(j,Kt,!1,w),(0,ee.DV)(this.listens_,re)===ye){let an;an=Qe?401===Qe?"permission_denied":"rest_error:"+Qe:"ok",O(an,null)}})}unlisten(d,h){const w=Rt.getListenId_(d,h);delete this.listens_[w]}get(d){const h=_e(d._queryParams),w=d._path.toString(),O=new ee.BH;return this.restRequest_(w+".json",h,(j,re)=>{let ye=re;404===j&&(ye=null,j=null),null===j?(this.onDataUpdate_(w,ye,!1,null),O.resolve(ye)):O.reject(new Error(ye))}),O.promise}refreshAuthToken(d){}restRequest_(d,h={},w){return h.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([O,j])=>{O&&O.accessToken&&(h.auth=O.accessToken),j&&j.token&&(h.ac=j.token);const re=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+d+"?ns="+this.repoInfo_.namespace+(0,ee.xO)(h);this.log_("Sending REST request for "+re);const ye=new XMLHttpRequest;ye.onreadystatechange=()=>{if(w&&4===ye.readyState){this.log_("REST Response for "+re+" received. status:",ye.status,"response:",ye.responseText);let ke=null;if(ye.status>=200&&ye.status<300){try{ke=(0,ee.cI)(ye.responseText)}catch{Ei("Failed to parse JSON response for "+re+": "+ye.responseText)}w(null,ke)}else 401!==ye.status&&404!==ye.status&&Ei("Got unsuccessful REST response for "+re+" Status: "+ye.status),w(ye.status);w=null}},ye.open("GET",re,!0),ye.send()})}}class jt{constructor(){this.rootNode_=Wn.EMPTY_NODE}getNode(d){return this.rootNode_.getChild(d)}updateSnapshot(d,h){this.rootNode_=this.rootNode_.updateChild(d,h)}}function Nn(){return{value:null,children:new Map}}function $i(p,d,h){if(_i(d))p.value=h,p.children.clear();else if(null!==p.value)p.value=p.value.updateChild(d,h);else{const w=tn(d);p.children.has(w)||p.children.set(w,Nn()),$i(p.children.get(w),d=li(d),h)}}function Ir(p,d){if(_i(d))return p.value=null,p.children.clear(),!0;if(null!==p.value){if(p.value.isLeafNode())return!1;{const h=p.value;return p.value=null,h.forEachChild(Tr,(w,O)=>{$i(p,new Pt(w),O)}),Ir(p,d)}}if(p.children.size>0){const h=tn(d);return d=li(d),p.children.has(h)&&Ir(p.children.get(h),d)&&p.children.delete(h),0===p.children.size}return!0}function nr(p,d,h){null!==p.value?h(d,p.value):function Li(p,d){p.children.forEach((h,w)=>{d(w,h)})}(p,(w,O)=>{nr(O,new Pt(d.toString()+"/"+w),h)})}class qs{constructor(d){this.collection_=d,this.last_=null}get(){const d=this.collection_.get(),h=Object.assign({},d);return this.last_&&sr(this.last_,(w,O)=>{h[w]=h[w]-O}),this.last_=d,h}}class Ra{constructor(d,h){this.server_=h,this.statsToReport_={},this.statsListener_=new qs(d);const w=1e4+2e4*Math.random();or(this.reportStats_.bind(this),Math.floor(w))}reportStats_(){const d=this.statsListener_.get(),h={};let w=!1;sr(d,(O,j)=>{j>0&&(0,ee.r3)(this.statsToReport_,O)&&(h[O]=j,w=!0)}),w&&this.server_.reportStats(h),or(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var kr=(()=>{return(p=kr||(kr={}))[p.OVERWRITE=0]="OVERWRITE",p[p.MERGE=1]="MERGE",p[p.ACK_USER_WRITE=2]="ACK_USER_WRITE",p[p.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",kr;var p})();function ao(p){return{fromUser:!1,fromServer:!0,queryId:p,tagged:!0}}class ua{constructor(d,h,w){this.path=d,this.affectedTree=h,this.revert=w,this.type=kr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(d){if(_i(this.path)){if(null!=this.affectedTree.value)return(0,ee.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const h=this.affectedTree.subtree(new Pt(d));return new ua(Yt(),h,this.revert)}}return(0,ee.hu)(tn(this.path)===d,"operationForChild called for unrelated child."),new ua(li(this.path),this.affectedTree,this.revert)}}class Oa{constructor(d,h){this.source=d,this.path=h,this.type=kr.LISTEN_COMPLETE}operationForChild(d){return _i(this.path)?new Oa(this.source,Yt()):new Oa(this.source,li(this.path))}}class Gr{constructor(d,h,w){this.source=d,this.path=h,this.snap=w,this.type=kr.OVERWRITE}operationForChild(d){return _i(this.path)?new Gr(this.source,Yt(),this.snap.getImmediateChild(d)):new Gr(this.source,li(this.path),this.snap)}}class Ka{constructor(d,h,w){this.source=d,this.path=h,this.children=w,this.type=kr.MERGE}operationForChild(d){if(_i(this.path)){const h=this.children.subtree(new Pt(d));return h.isEmpty()?null:h.value?new Gr(this.source,Yt(),h.value):new Ka(this.source,Yt(),h)}return(0,ee.hu)(tn(this.path)===d,"Can't get a merge for a child not on the path of the operation"),new Ka(this.source,li(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Wa{constructor(d,h,w){this.node_=d,this.fullyInitialized_=h,this.filtered_=w}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(d){if(_i(d))return this.isFullyInitialized()&&!this.filtered_;const h=tn(d);return this.isCompleteForChild(h)}isCompleteForChild(d){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(d)}getNode(){return this.node_}}class da{constructor(d){this.query_=d,this.index_=this.query_._queryParams.getIndex()}}function Za(p,d,h,w,O,j){const re=w.filter(ye=>ye.type===h);re.sort((ye,ke)=>function ia(p,d,h){if(null==d.childName||null==h.childName)throw(0,ee.g5)("Should only compare child_ events.");const w=new Ai(d.childName,d.snapshotNode),O=new Ai(h.childName,h.snapshotNode);return p.index_.compare(w,O)}(p,ye,ke)),re.forEach(ye=>{const ke=function qa(p,d,h){return"value"===d.type||"child_removed"===d.type||(d.prevName=h.getPredecessorChildName(d.childName,d.snapshotNode,p.index_)),d}(p,ye,j);O.forEach(Qe=>{Qe.respondsTo(ye.type)&&d.push(Qe.createEvent(ke,p.query_))})})}function vl(p,d){return{eventCache:p,serverCache:d}}function Ys(p,d,h,w){return vl(new Wa(d,h,w),p.serverCache)}function Ql(p,d,h,w){return vl(p.eventCache,new Wa(d,h,w))}function Jl(p){return p.eventCache.isFullyInitialized()?p.eventCache.getNode():null}function Nr(p){return p.serverCache.isFullyInitialized()?p.serverCache.getNode():null}let Cs;class $r{constructor(d,h=(()=>(Cs||(Cs=new fs(Ni)),Cs))()){this.value=d,this.children=h}static fromObject(d){let h=new $r(null);return sr(d,(w,O)=>{h=h.set(new Pt(w),O)}),h}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(d,h){if(null!=this.value&&h(this.value))return{path:Yt(),value:this.value};if(_i(d))return null;{const w=tn(d),O=this.children.get(w);if(null!==O){const j=O.findRootMostMatchingPathAndValue(li(d),h);return null!=j?{path:Cr(new Pt(w),j.path),value:j.value}:null}return null}}findRootMostValueAndPath(d){return this.findRootMostMatchingPathAndValue(d,()=>!0)}subtree(d){if(_i(d))return this;{const h=tn(d),w=this.children.get(h);return null!==w?w.subtree(li(d)):new $r(null)}}set(d,h){if(_i(d))return new $r(h,this.children);{const w=tn(d),j=(this.children.get(w)||new $r(null)).set(li(d),h),re=this.children.insert(w,j);return new $r(this.value,re)}}remove(d){if(_i(d))return this.children.isEmpty()?new $r(null):new $r(null,this.children);{const h=tn(d),w=this.children.get(h);if(w){const O=w.remove(li(d));let j;return j=O.isEmpty()?this.children.remove(h):this.children.insert(h,O),null===this.value&&j.isEmpty()?new $r(null):new $r(this.value,j)}return this}}get(d){if(_i(d))return this.value;{const h=tn(d),w=this.children.get(h);return w?w.get(li(d)):null}}setTree(d,h){if(_i(d))return h;{const w=tn(d),j=(this.children.get(w)||new $r(null)).setTree(li(d),h);let re;return re=j.isEmpty()?this.children.remove(w):this.children.insert(w,j),new $r(this.value,re)}}fold(d){return this.fold_(Yt(),d)}fold_(d,h){const w={};return this.children.inorderTraversal((O,j)=>{w[O]=j.fold_(Cr(d,O),h)}),h(d,this.value,w)}findOnPath(d,h){return this.findOnPath_(d,Yt(),h)}findOnPath_(d,h,w){const O=!!this.value&&w(h,this.value);if(O)return O;if(_i(d))return null;{const j=tn(d),re=this.children.get(j);return re?re.findOnPath_(li(d),Cr(h,j),w):null}}foreachOnPath(d,h){return this.foreachOnPath_(d,Yt(),h)}foreachOnPath_(d,h,w){if(_i(d))return this;{this.value&&w(h,this.value);const O=tn(d),j=this.children.get(O);return j?j.foreachOnPath_(li(d),Cr(h,O),w):new $r(null)}}foreach(d){this.foreach_(Yt(),d)}foreach_(d,h){this.children.inorderTraversal((w,O)=>{O.foreach_(Cr(d,w),h)}),this.value&&h(d,this.value)}foreachChild(d){this.children.inorderTraversal((h,w)=>{w.value&&d(h,w.value)})}}class ra{constructor(d){this.writeTree_=d}static empty(){return new ra(new $r(null))}}function Rl(p,d,h){if(_i(d))return new ra(new $r(h));{const w=p.writeTree_.findRootMostValueAndPath(d);if(null!=w){const O=w.path;let j=w.value;const re=jr(O,d);return j=j.updateChild(re,h),new ra(p.writeTree_.set(O,j))}{const O=new $r(h),j=p.writeTree_.setTree(d,O);return new ra(j)}}}function cc(p,d,h){let w=p;return sr(h,(O,j)=>{w=Rl(w,Cr(d,O),j)}),w}function Fs(p,d){if(_i(d))return ra.empty();{const h=p.writeTree_.setTree(d,new $r(null));return new ra(h)}}function bl(p,d){return null!=Qs(p,d)}function Qs(p,d){const h=p.writeTree_.findRootMostValueAndPath(d);return null!=h?p.writeTree_.get(h.path).getChild(jr(h.path,d)):null}function jl(p){const d=[],h=p.writeTree_.value;return null!=h?h.isLeafNode()||h.forEachChild(Tr,(w,O)=>{d.push(new Ai(w,O))}):p.writeTree_.children.inorderTraversal((w,O)=>{null!=O.value&&d.push(new Ai(w,O.value))}),d}function ur(p,d){if(_i(d))return p;{const h=Qs(p,d);return new ra(null!=h?new $r(h):p.writeTree_.subtree(d))}}function wl(p){return p.writeTree_.isEmpty()}function Ho(p,d){return ha(Yt(),p.writeTree_,d)}function ha(p,d,h){if(null!=d.value)return h.updateChild(p,d.value);{let w=null;return d.children.inorderTraversal((O,j)=>{".priority"===O?((0,ee.hu)(null!==j.value,"Priority writes must always be leaf nodes"),w=j.value):h=ha(Cr(p,O),j,h)}),!h.getChild(p).isEmpty()&&null!==w&&(h=h.updateChild(Cr(p,".priority"),w)),h}}function cl(p,d){return Mi(d,p)}function Vn(p,d){if(p.snap)return Er(p.path,d);for(const h in p.children)if(p.children.hasOwnProperty(h)&&Er(Cr(p.path,h),d))return!0;return!1}function lo(p){return p.visible}function Dn(p,d,h){let w=ra.empty();for(let O=0;O<p.length;++O){const j=p[O];if(d(j)){const re=j.path;let ye;if(j.snap)Er(h,re)?(ye=jr(h,re),w=Rl(w,ye,j.snap)):Er(re,h)&&(ye=jr(re,h),w=Rl(w,Yt(),j.snap.getChild(ye)));else{if(!j.children)throw(0,ee.g5)("WriteRecord should have .snap or .children");if(Er(h,re))ye=jr(h,re),w=cc(w,ye,j.children);else if(Er(re,h))if(ye=jr(re,h),_i(ye))w=cc(w,Yt(),j.children);else{const ke=(0,ee.DV)(j.children,tn(ye));if(ke){const Qe=ke.getChild(li(ye));w=Rl(w,Yt(),Qe)}}}}}return w}function Ht(p,d,h,w,O){if(w||O){const j=ur(p.visibleWrites,d);return!O&&wl(j)?h:O||null!=h||bl(j,Yt())?Ho(Dn(p.allWrites,function(Qe){return(Qe.visible||O)&&(!w||!~w.indexOf(Qe.writeId))&&(Er(Qe.path,d)||Er(d,Qe.path))},d),h||Wn.EMPTY_NODE):null}{const j=Qs(p.visibleWrites,d);if(null!=j)return j;{const re=ur(p.visibleWrites,d);return wl(re)?h:null!=h||bl(re,Yt())?Ho(re,h||Wn.EMPTY_NODE):null}}}function ec(p,d,h,w){return Ht(p.writeTree,p.treePath,d,h,w)}function dl(p,d){return function sn(p,d,h){let w=Wn.EMPTY_NODE;const O=Qs(p.visibleWrites,d);if(O)return O.isLeafNode()||O.forEachChild(Tr,(j,re)=>{w=w.updateImmediateChild(j,re)}),w;if(h){const j=ur(p.visibleWrites,d);return h.forEachChild(Tr,(re,ye)=>{const ke=Ho(ur(j,new Pt(re)),ye);w=w.updateImmediateChild(re,ke)}),jl(j).forEach(re=>{w=w.updateImmediateChild(re.name,re.node)}),w}return jl(ur(p.visibleWrites,d)).forEach(re=>{w=w.updateImmediateChild(re.name,re.node)}),w}(p.writeTree,p.treePath,d)}function fa(p,d,h,w){return function Ls(p,d,h,w,O){(0,ee.hu)(w||O,"Either existingEventSnap or existingServerSnap must exist");const j=Cr(d,h);if(bl(p.visibleWrites,j))return null;{const re=ur(p.visibleWrites,j);return wl(re)?O.getChild(h):Ho(re,O.getChild(h))}}(p.writeTree,p.treePath,d,h,w)}function Ms(p,d){return function Tc(p,d){return Qs(p.visibleWrites,d)}(p.writeTree,Cr(p.treePath,d))}function Qa(p,d,h){return function kl(p,d,h,w){const O=Cr(d,h),j=Qs(p.visibleWrites,O);return null!=j?j:w.isCompleteForChild(h)?Ho(ur(p.visibleWrites,O),w.getNode().getImmediateChild(h)):null}(p.writeTree,p.treePath,d,h)}function jo(p,d){return Mi(Cr(p.treePath,d),p.writeTree)}function Mi(p,d){return{treePath:p,writeTree:d}}class Lo{constructor(){this.changeMap=new Map}trackChildChange(d){const h=d.type,w=d.childName;(0,ee.hu)("child_added"===h||"child_changed"===h||"child_removed"===h,"Only child changes supported for tracking"),(0,ee.hu)(".priority"!==w,"Only non-priority child changes can be tracked.");const O=this.changeMap.get(w);if(O){const j=O.type;if("child_added"===h&&"child_removed"===j)this.changeMap.set(w,$a(w,d.snapshotNode,O.snapshotNode));else if("child_removed"===h&&"child_added"===j)this.changeMap.delete(w);else if("child_removed"===h&&"child_changed"===j)this.changeMap.set(w,Ga(w,O.oldSnap));else if("child_changed"===h&&"child_added"===j)this.changeMap.set(w,wa(w,d.snapshotNode));else{if("child_changed"!==h||"child_changed"!==j)throw(0,ee.g5)("Illegal combination of changes: "+d+" occurred after "+O);this.changeMap.set(w,$a(w,d.snapshotNode,O.oldSnap))}}else this.changeMap.set(w,d)}getChanges(){return Array.from(this.changeMap.values())}}const Qr=new class pa{getCompleteChild(d){return null}getChildAfterChild(d,h,w){return null}};class An{constructor(d,h,w=null){this.writes_=d,this.viewCache_=h,this.optCompleteServerCache_=w}getCompleteChild(d){const h=this.viewCache_.eventCache;if(h.isCompleteForChild(d))return h.getNode().getImmediateChild(d);{const w=null!=this.optCompleteServerCache_?new Wa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qa(this.writes_,d,w)}}getChildAfterChild(d,h,w){const O=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Nr(this.viewCache_),j=function Pa(p,d,h,w,O,j){return function Ic(p,d,h,w,O,j,re){let ye;const ke=ur(p.visibleWrites,d),Qe=Qs(ke,Yt());if(null!=Qe)ye=Qe;else{if(null==h)return[];ye=Ho(ke,h)}if(ye=ye.withIndex(re),ye.isEmpty()||ye.isLeafNode())return[];{const $t=[],Kt=re.getCompare(),an=j?ye.getReverseIteratorFrom(w,re):ye.getIteratorFrom(w,re);let ti=an.getNext();for(;ti&&$t.length<O;)0!==Kt(ti,w)&&$t.push(ti),ti=an.getNext();return $t}}(p.writeTree,p.treePath,d,h,w,O,j)}(this.writes_,O,h,1,w,d);return 0===j.length?null:j[0]}}function bn(p,d,h,w,O,j){const re=d.eventCache;if(null!=Ms(w,h))return d;{let ye,ke;if(_i(h))if((0,ee.hu)(d.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),d.serverCache.isFiltered()){const Qe=Nr(d),Kt=dl(w,Qe instanceof Wn?Qe:Wn.EMPTY_NODE);ye=p.filter.updateFullNode(d.eventCache.getNode(),Kt,j)}else{const Qe=ec(w,Nr(d));ye=p.filter.updateFullNode(d.eventCache.getNode(),Qe,j)}else{const Qe=tn(h);if(".priority"===Qe){(0,ee.hu)(1===si(h),"Can't have a priority with additional path components");const $t=re.getNode();ke=d.serverCache.getNode();const Kt=fa(w,h,$t,ke);ye=null!=Kt?p.filter.updatePriority($t,Kt):re.getNode()}else{const $t=li(h);let Kt;if(re.isCompleteForChild(Qe)){ke=d.serverCache.getNode();const an=fa(w,h,re.getNode(),ke);Kt=null!=an?re.getNode().getImmediateChild(Qe).updateChild($t,an):re.getNode().getImmediateChild(Qe)}else Kt=Qa(w,Qe,d.serverCache);ye=null!=Kt?p.filter.updateChild(re.getNode(),Qe,Kt,$t,O,j):re.getNode()}}return Ys(d,ye,re.isFullyInitialized()||_i(h),p.filter.filtersNodes())}}function Cl(p,d,h,w,O,j,re,ye){const ke=d.serverCache;let Qe;const $t=re?p.filter:p.filter.getIndexedFilter();if(_i(h))Qe=$t.updateFullNode(ke.getNode(),w,null);else if($t.filtersNodes()&&!ke.isFiltered()){const ti=ke.getNode().updateChild(h,w);Qe=$t.updateFullNode(ke.getNode(),ti,null)}else{const ti=tn(h);if(!ke.isCompleteForPath(h)&&si(h)>1)return d;const Ii=li(h),ml=ke.getNode().getImmediateChild(ti).updateChild(Ii,w);Qe=".priority"===ti?$t.updatePriority(ke.getNode(),ml):$t.updateChild(ke.getNode(),ti,ml,Ii,Qr,null)}const Kt=Ql(d,Qe,ke.isFullyInitialized()||_i(h),$t.filtersNodes());return bn(p,Kt,h,O,new An(O,Kt,j),ye)}function zo(p,d,h,w,O,j,re){const ye=d.eventCache;let ke,Qe;const $t=new An(O,d,j);if(_i(h))Qe=p.filter.updateFullNode(d.eventCache.getNode(),w,re),ke=Ys(d,Qe,!0,p.filter.filtersNodes());else{const Kt=tn(h);if(".priority"===Kt)Qe=p.filter.updatePriority(d.eventCache.getNode(),w),ke=Ys(d,Qe,ye.isFullyInitialized(),ye.isFiltered());else{const an=li(h),ti=ye.getNode().getImmediateChild(Kt);let Ii;if(_i(an))Ii=w;else{const ss=$t.getCompleteChild(Kt);Ii=null!=ss?".priority"===ar(an)&&ss.getChild(ds(an)).isEmpty()?ss:ss.updateChild(an,w):Wn.EMPTY_NODE}ke=ti.equals(Ii)?d:Ys(d,p.filter.updateChild(ye.getNode(),Kt,Ii,an,$t,re),ye.isFullyInitialized(),p.filter.filtersNodes())}}return ke}function Na(p,d){return p.eventCache.isCompleteForChild(d)}function uc(p,d,h){return h.foreach((w,O)=>{d=d.updateChild(w,O)}),d}function Vs(p,d,h,w,O,j,re,ye){if(d.serverCache.getNode().isEmpty()&&!d.serverCache.isFullyInitialized())return d;let Qe,ke=d;Qe=_i(h)?w:new $r(null).setTree(h,w);const $t=d.serverCache.getNode();return Qe.children.inorderTraversal((Kt,an)=>{if($t.hasChild(Kt)){const Ii=uc(0,d.serverCache.getNode().getImmediateChild(Kt),an);ke=Cl(p,ke,new Pt(Kt),Ii,O,j,re,ye)}}),Qe.children.inorderTraversal((Kt,an)=>{const ti=!d.serverCache.isCompleteForChild(Kt)&&null===an.value;if(!$t.hasChild(Kt)&&!ti){const ss=uc(0,d.serverCache.getNode().getImmediateChild(Kt),an);ke=Cl(p,ke,new Pt(Kt),ss,O,j,re,ye)}}),ke}class Lr{constructor(d,h){this.query_=d,this.eventRegistrations_=[];const w=this.query_._queryParams,O=new Ma(w.getIndex()),j=function _l(p){return p.loadsAllData()?new Ma(p.getIndex()):p.hasLimit()?new ms(p):new na(p)}(w);this.processor_=function tc(p){return{filter:p}}(j);const re=h.serverCache,ye=h.eventCache,ke=O.updateFullNode(Wn.EMPTY_NODE,re.getNode(),null),Qe=j.updateFullNode(Wn.EMPTY_NODE,ye.getNode(),null),$t=new Wa(ke,re.isFullyInitialized(),O.filtersNodes()),Kt=new Wa(Qe,ye.isFullyInitialized(),j.filtersNodes());this.viewCache_=vl(Kt,$t),this.eventGenerator_=new da(this.query_)}get query(){return this.query_}}function Gl(p,d){const h=Nr(p.viewCache_);return h&&(p.query._queryParams.loadsAllData()||!_i(d)&&!h.getImmediateChild(tn(d)).isEmpty())?h.getChild(d):null}function xo(p){return 0===p.eventRegistrations_.length}function D(p,d,h){const w=[];if(h){(0,ee.hu)(null==d,"A cancel should cancel all event registrations.");const O=p.query._path;p.eventRegistrations_.forEach(j=>{const re=j.createCancelEvent(h,O);re&&w.push(re)})}if(d){let O=[];for(let j=0;j<p.eventRegistrations_.length;++j){const re=p.eventRegistrations_[j];if(re.matches(d)){if(d.hasAnyCallback()){O=O.concat(p.eventRegistrations_.slice(j+1));break}}else O.push(re)}p.eventRegistrations_=O}else p.eventRegistrations_=[];return w}function N(p,d,h,w){d.type===kr.MERGE&&null!==d.source.queryId&&((0,ee.hu)(Nr(p.viewCache_),"We should always have a full cache before handling merges"),(0,ee.hu)(Jl(p.viewCache_),"Missing event cache, even though we have a server cache"));const O=p.viewCache_,j=function Xc(p,d,h,w,O){const j=new Lo;let re,ye;if(h.type===kr.OVERWRITE){const Qe=h;Qe.source.fromUser?re=zo(p,d,Qe.path,Qe.snap,w,O,j):((0,ee.hu)(Qe.source.fromServer,"Unknown source."),ye=Qe.source.tagged||d.serverCache.isFiltered()&&!_i(Qe.path),re=Cl(p,d,Qe.path,Qe.snap,w,O,ye,j))}else if(h.type===kr.MERGE){const Qe=h;Qe.source.fromUser?re=function Gc(p,d,h,w,O,j,re){let ye=d;return w.foreach((ke,Qe)=>{const $t=Cr(h,ke);Na(d,tn($t))&&(ye=zo(p,ye,$t,Qe,O,j,re))}),w.foreach((ke,Qe)=>{const $t=Cr(h,ke);Na(d,tn($t))||(ye=zo(p,ye,$t,Qe,O,j,re))}),ye}(p,d,Qe.path,Qe.children,w,O,j):((0,ee.hu)(Qe.source.fromServer,"Unknown source."),ye=Qe.source.tagged||d.serverCache.isFiltered(),re=Vs(p,d,Qe.path,Qe.children,w,O,ye,j))}else if(h.type===kr.ACK_USER_WRITE){const Qe=h;re=Qe.revert?function Ol(p,d,h,w,O,j){let re;if(null!=Ms(w,h))return d;{const ye=new An(w,d,O),ke=d.eventCache.getNode();let Qe;if(_i(h)||".priority"===tn(h)){let $t;if(d.serverCache.isFullyInitialized())$t=ec(w,Nr(d));else{const Kt=d.serverCache.getNode();(0,ee.hu)(Kt instanceof Wn,"serverChildren would be complete if leaf node"),$t=dl(w,Kt)}Qe=p.filter.updateFullNode(ke,$t,j)}else{const $t=tn(h);let Kt=Qa(w,$t,d.serverCache);null==Kt&&d.serverCache.isCompleteForChild($t)&&(Kt=ke.getImmediateChild($t)),Qe=null!=Kt?p.filter.updateChild(ke,$t,Kt,li(h),ye,j):d.eventCache.getNode().hasChild($t)?p.filter.updateChild(ke,$t,Wn.EMPTY_NODE,li(h),ye,j):ke,Qe.isEmpty()&&d.serverCache.isFullyInitialized()&&(re=ec(w,Nr(d)),re.isLeafNode()&&(Qe=p.filter.updateFullNode(Qe,re,j)))}return re=d.serverCache.isFullyInitialized()||null!=Ms(w,Yt()),Ys(d,Qe,re,p.filter.filtersNodes())}}(p,d,Qe.path,w,O,j):function hl(p,d,h,w,O,j,re){if(null!=Ms(O,h))return d;const ye=d.serverCache.isFiltered(),ke=d.serverCache;if(null!=w.value){if(_i(h)&&ke.isFullyInitialized()||ke.isCompleteForPath(h))return Cl(p,d,h,ke.getNode().getChild(h),O,j,ye,re);if(_i(h)){let Qe=new $r(null);return ke.getNode().forEachChild(bo,($t,Kt)=>{Qe=Qe.set(new Pt($t),Kt)}),Vs(p,d,h,Qe,O,j,ye,re)}return d}{let Qe=new $r(null);return w.foreach(($t,Kt)=>{const an=Cr(h,$t);ke.isCompleteForPath(an)&&(Qe=Qe.set($t,ke.getNode().getChild(an)))}),Vs(p,d,h,Qe,O,j,ye,re)}}(p,d,Qe.path,Qe.affectedTree,w,O,j)}else{if(h.type!==kr.LISTEN_COMPLETE)throw(0,ee.g5)("Unknown operation type: "+h.type);re=function zl(p,d,h,w,O){const j=d.serverCache;return bn(p,Ql(d,j.getNode(),j.isFullyInitialized()||_i(h),j.isFiltered()),h,w,Qr,O)}(p,d,h.path,w,j)}const ke=j.getChanges();return function Rs(p,d,h){const w=d.eventCache;if(w.isFullyInitialized()){const O=w.getNode().isLeafNode()||w.getNode().isEmpty(),j=Jl(p);(h.length>0||!p.eventCache.isFullyInitialized()||O&&!w.getNode().equals(j)||!w.getNode().getPriority().equals(j.getPriority()))&&h.push(al(Jl(d)))}}(d,re,ke),{viewCache:re,changes:ke}}(p.processor_,O,d,h,w);return function gr(p,d){(0,ee.hu)(d.eventCache.getNode().isIndexed(p.filter.getIndex()),"Event snap not indexed"),(0,ee.hu)(d.serverCache.getNode().isIndexed(p.filter.getIndex()),"Server snap not indexed")}(p.processor_,j.viewCache),(0,ee.hu)(j.viewCache.serverCache.isFullyInitialized()||!O.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),p.viewCache_=j.viewCache,H(p,j.changes,j.viewCache.eventCache.getNode(),null)}function H(p,d,h,w){return function Ec(p,d,h,w){const O=[],j=[];return d.forEach(re=>{"child_changed"===re.type&&p.index_.indexedValueChanged(re.oldSnap,re.snapshotNode)&&j.push(function Ca(p,d){return{type:"child_moved",snapshotNode:d,childName:p}}(re.childName,re.snapshotNode))}),Za(p,O,"child_removed",d,w,h),Za(p,O,"child_added",d,w,h),Za(p,O,"child_moved",j,w,h),Za(p,O,"child_changed",d,w,h),Za(p,O,"value",d,w,h),O}(p.eventGenerator_,d,h,w?[w]:p.eventRegistrations_)}let te,qi;class me{constructor(){this.views=new Map}}function Tn(p,d,h,w){const O=d.source.queryId;if(null!==O){const j=p.views.get(O);return(0,ee.hu)(null!=j,"SyncTree gave us an op for an invalid query."),N(j,d,h,w)}{let j=[];for(const re of p.views.values())j=j.concat(N(re,d,h,w));return j}}function Vi(p,d,h,w,O){const re=p.views.get(d._queryIdentifier);if(!re){let ye=ec(h,O?w:null),ke=!1;ye?ke=!0:w instanceof Wn?(ye=dl(h,w),ke=!1):(ye=Wn.EMPTY_NODE,ke=!1);const Qe=vl(new Wa(ye,ke,!1),new Wa(w,O,!1));return new Lr(d,Qe)}return re}function os(p){const d=[];for(const h of p.views.values())h.query._queryParams.loadsAllData()||d.push(h);return d}function Vr(p,d){let h=null;for(const w of p.views.values())h=h||Gl(w,d);return h}function Xa(p,d){return d._queryParams.loadsAllData()?Br(p):p.views.get(d._queryIdentifier)}function Mr(p,d){return null!=Xa(p,d)}function Go(p){return null!=Br(p)}function Br(p){for(const d of p.views.values())if(d.query._queryParams.loadsAllData())return d;return null}let $o=1;class $l{constructor(d){this.listenProvider_=d,this.syncPointTree_=new $r(null),this.pendingWriteTree_=function Xl(){return{visibleWrites:ra.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function co(p,d,h,w,O){return function pn(p,d,h,w,O){(0,ee.hu)(w>p.lastWriteId,"Stacking an older write on top of newer ones"),void 0===O&&(O=!0),p.allWrites.push({path:d,snap:h,writeId:w,visible:O}),O&&(p.visibleWrites=Rl(p.visibleWrites,d,h)),p.lastWriteId=w}(p.pendingWriteTree_,d,h,w,O),O?At(p,new Gr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,h)):[]}function ma(p,d,h=!1){const w=function sa(p,d){for(let h=0;h<p.allWrites.length;h++){const w=p.allWrites[h];if(w.writeId===d)return w}return null}(p.pendingWriteTree_,d);if(function ul(p,d){const h=p.allWrites.findIndex(ye=>ye.writeId===d);(0,ee.hu)(h>=0,"removeWrite called with nonexistent writeId.");const w=p.allWrites[h];p.allWrites.splice(h,1);let O=w.visible,j=!1,re=p.allWrites.length-1;for(;O&&re>=0;){const ye=p.allWrites[re];ye.visible&&(re>=h&&Vn(ye,w.path)?O=!1:Er(w.path,ye.path)&&(j=!0)),re--}return!!O&&(j?(function Fn(p){p.visibleWrites=Dn(p.allWrites,lo,Yt()),p.lastWriteId=p.allWrites.length>0?p.allWrites[p.allWrites.length-1].writeId:-1}(p),!0):(w.snap?p.visibleWrites=Fs(p.visibleWrites,w.path):sr(w.children,ke=>{p.visibleWrites=Fs(p.visibleWrites,Cr(w.path,ke))}),!0))}(p.pendingWriteTree_,d)){let j=new $r(null);return null!=w.snap?j=j.set(Yt(),!0):sr(w.children,re=>{j=j.set(new Pt(re),!0)}),At(p,new ua(w.path,j,h))}return[]}function ts(p,d,h){return At(p,new Gr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,h))}function Pl(p,d,h,w,O=!1){const j=d._path,re=p.syncPointTree_.get(j);let ye=[];if(re&&("default"===d._queryIdentifier||Mr(re,d))){const ke=function Bi(p,d,h,w){const O=d._queryIdentifier,j=[];let re=[];const ye=Go(p);if("default"===O)for(const[ke,Qe]of p.views.entries())re=re.concat(D(Qe,h,w)),xo(Qe)&&(p.views.delete(ke),Qe.query._queryParams.loadsAllData()||j.push(Qe.query));else{const ke=p.views.get(O);ke&&(re=re.concat(D(ke,h,w)),xo(ke)&&(p.views.delete(O),ke.query._queryParams.loadsAllData()||j.push(ke.query)))}return ye&&!Go(p)&&j.push(new(function Ze(){return(0,ee.hu)(te,"Reference.ts has not been loaded"),te}())(d._repo,d._path)),{removed:j,events:re}}(re,d,h,w);(function Bt(p){return 0===p.views.size})(re)&&(p.syncPointTree_=p.syncPointTree_.remove(j));const Qe=ke.removed;if(ye=ke.events,!O){const $t=-1!==Qe.findIndex(an=>an._queryParams.loadsAllData()),Kt=p.syncPointTree_.findOnPath(j,(an,ti)=>Go(ti));if($t&&!Kt){const an=p.syncPointTree_.subtree(j);if(!an.isEmpty()){const ti=function Xs(p){return p.fold((d,h,w)=>{if(h&&Go(h))return[Br(h)];{let O=[];return h&&(O=os(h)),sr(w,(j,re)=>{O=O.concat(re)}),O}})}(an);for(let Ii=0;Ii<ti.length;++Ii){const ss=ti[Ii],ml=ss.query,oc=Xn(p,ss);p.listenProvider_.startListening(Ea(ml),ci(p,ml),oc.hashFn,oc.onComplete)}}}!Kt&&Qe.length>0&&!w&&($t?p.listenProvider_.stopListening(Ea(d),null):Qe.forEach(an=>{const ti=p.queryToTagMap.get(ki(an));p.listenProvider_.stopListening(Ea(an),ti)}))}!function El(p,d){for(let h=0;h<d.length;++h){const w=d[h];if(!w._queryParams.loadsAllData()){const O=ki(w),j=p.queryToTagMap.get(O);p.queryToTagMap.delete(O),p.tagToQueryMap.delete(j)}}}(p,Qe)}return ye}function q(p,d,h,w){const O=Zn(p,w);if(null!=O){const j=as(O),re=j.path,ye=j.queryId,ke=jr(re,d);return Js(p,re,new Gr(ao(ye),ke,h))}return[]}function he(p,d,h,w=!1){const O=d._path;let j=null,re=!1;p.syncPointTree_.foreachOnPath(O,(an,ti)=>{const Ii=jr(an,O);j=j||Vr(ti,Ii),re=re||Go(ti)});let ke,ye=p.syncPointTree_.get(O);ye?(re=re||Go(ye),j=j||Vr(ye,Yt())):(ye=new me,p.syncPointTree_=p.syncPointTree_.set(O,ye)),null!=j?ke=!0:(ke=!1,j=Wn.EMPTY_NODE,p.syncPointTree_.subtree(O).foreachChild((ti,Ii)=>{const ss=Vr(Ii,Yt());ss&&(j=j.updateImmediateChild(ti,ss))}));const Qe=Mr(ye,d);if(!Qe&&!d._queryParams.loadsAllData()){const an=ki(d);(0,ee.hu)(!p.queryToTagMap.has(an),"View does not exist, but we have a tag");const ti=function el(){return $o++}();p.queryToTagMap.set(an,ti),p.tagToQueryMap.set(ti,an)}let Kt=function jn(p,d,h,w,O,j){const re=Vi(p,d,w,O,j);return p.views.has(d._queryIdentifier)||p.views.set(d._queryIdentifier,re),function fl(p,d){p.eventRegistrations_.push(d)}(re,h),function R(p,d){const h=p.viewCache_.eventCache,w=[];return h.getNode().isLeafNode()||h.getNode().forEachChild(Tr,(j,re)=>{w.push(wa(j,re))}),h.isFullyInitialized()&&w.push(al(h.getNode())),H(p,w,h.getNode(),d)}(re,h)}(ye,d,h,cl(p.pendingWriteTree_,O),j,ke);if(!Qe&&!re&&!w){const an=Xa(ye,d);Kt=Kt.concat(function La(p,d,h){const w=d._path,O=ci(p,d),j=Xn(p,h),re=p.listenProvider_.startListening(Ea(d),O,j.hashFn,j.onComplete),ye=p.syncPointTree_.subtree(w);if(O)(0,ee.hu)(!Go(ye.value),"If we're adding a query, it shouldn't be shadowed");else{const ke=ye.fold((Qe,$t,Kt)=>{if(!_i(Qe)&&$t&&Go($t))return[Br($t).query];{let an=[];return $t&&(an=an.concat(os($t).map(ti=>ti.query))),sr(Kt,(ti,Ii)=>{an=an.concat(Ii)}),an}});for(let Qe=0;Qe<ke.length;++Qe){const $t=ke[Qe];p.listenProvider_.stopListening(Ea($t),ci(p,$t))}}return re}(p,d,an))}return Kt}function je(p,d,h){const O=p.pendingWriteTree_,j=p.syncPointTree_.findOnPath(d,(re,ye)=>{const Qe=Vr(ye,jr(re,d));if(Qe)return Qe});return Ht(O,d,j,h,!0)}function At(p,d){return cn(d,p.syncPointTree_,null,cl(p.pendingWriteTree_,Yt()))}function cn(p,d,h,w){if(_i(p.path))return yn(p,d,h,w);{const O=d.get(Yt());null==h&&null!=O&&(h=Vr(O,Yt()));let j=[];const re=tn(p.path),ye=p.operationForChild(re),ke=d.children.get(re);if(ke&&ye){const Qe=h?h.getImmediateChild(re):null,$t=jo(w,re);j=j.concat(cn(ye,ke,Qe,$t))}return O&&(j=j.concat(Tn(O,p,w,h))),j}}function yn(p,d,h,w){const O=d.get(Yt());null==h&&null!=O&&(h=Vr(O,Yt()));let j=[];return d.children.inorderTraversal((re,ye)=>{const ke=h?h.getImmediateChild(re):null,Qe=jo(w,re),$t=p.operationForChild(re);$t&&(j=j.concat(yn($t,ye,ke,Qe)))}),O&&(j=j.concat(Tn(O,p,w,h))),j}function Xn(p,d){const h=d.query,w=ci(p,h);return{hashFn:()=>(function wo(p){return p.viewCache_.serverCache.getNode()}(d)||Wn.EMPTY_NODE).hash(),onComplete:O=>{if("ok"===O)return w?function uo(p,d,h){const w=Zn(p,h);if(w){const O=as(w),j=O.path,re=O.queryId,ye=jr(j,d);return Js(p,j,new Oa(ao(re),ye))}return[]}(p,h._path,w):function Sc(p,d){return At(p,new Oa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d))}(p,h._path);{const j=function Kn(p,d){let h="Unknown Error";"too_big"===p?h="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===p?h="Client doesn't have permission to access the desired data.":"unavailable"===p&&(h="The service is unavailable");const w=new Error(p+" at "+d._path.toString()+": "+h);return w.code=p.toUpperCase(),w}(O,h);return Pl(p,h,null,j)}}}}function ci(p,d){const h=ki(d);return p.queryToTagMap.get(h)}function ki(p){return p._path.toString()+"$"+p._queryIdentifier}function Zn(p,d){return p.tagToQueryMap.get(d)}function as(p){const d=p.indexOf("$");return(0,ee.hu)(-1!==d&&d<p.length-1,"Bad queryKey."),{queryId:p.substr(d+1),path:new Pt(p.substr(0,d))}}function Js(p,d,h){const w=p.syncPointTree_.get(d);return(0,ee.hu)(w,"Missing sync point for query tag that we're tracking"),Tn(w,h,cl(p.pendingWriteTree_,d),null)}function Ea(p){return p._queryParams.loadsAllData()&&!p._queryParams.isDefault()?new(function dc(){return(0,ee.hu)(qi,"Reference.ts has not been loaded"),qi}())(p._repo,p._path):p}class Tl{constructor(d){this.node_=d}getImmediateChild(d){const h=this.node_.getImmediateChild(d);return new Tl(h)}node(){return this.node_}}class tl{constructor(d,h){this.syncTree_=d,this.path_=h}getImmediateChild(d){const h=Cr(this.path_,d);return new tl(this.syncTree_,h)}node(){return je(this.syncTree_,this.path_)}}const Pc=function(p,d,h){return p&&"object"==typeof p?((0,ee.hu)(".sv"in p,"Unexpected leaf node or priority contents"),"string"==typeof p[".sv"]?cd(p[".sv"],d,h):"object"==typeof p[".sv"]?du(p[".sv"],d):void(0,ee.hu)(!1,"Unexpected server value: "+JSON.stringify(p,null,2))):p},cd=function(p,d,h){if("timestamp"===p)return h.timestamp;(0,ee.hu)(!1,"Unexpected server value: "+p)},du=function(p,d,h){p.hasOwnProperty("increment")||(0,ee.hu)(!1,"Unexpected server value: "+JSON.stringify(p,null,2));const w=p.increment;"number"!=typeof w&&(0,ee.hu)(!1,"Unexpected increment value: "+w);const O=d.node();if((0,ee.hu)(null!==O&&typeof O<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!O.isLeafNode())return w;const re=O.getValue();return"number"!=typeof re?w:re+w},$c=function(p,d,h,w){return Il(d,new tl(h,p),w)},Ko=function(p,d,h){return Il(p,new Tl(d),h)};function Il(p,d,h){const w=p.getPriority().val(),O=Pc(w,d.getImmediateChild(".priority"),h);let j;if(p.isLeafNode()){const re=p,ye=Pc(re.getValue(),d,h);return ye!==re.getValue()||O!==re.getPriority().val()?new cr(ye,pe(O)):p}{const re=p;return j=re,O!==re.getPriority().val()&&(j=j.updatePriority(new cr(O))),re.forEachChild(Tr,(ye,ke)=>{const Qe=Il(ke,d.getImmediateChild(ye),h);Qe!==ke&&(j=j.updateImmediateChild(ye,Qe))}),j}}class _s{constructor(d="",h=null,w={children:{},childCount:0}){this.name=d,this.parent=h,this.node=w}}function Kc(p,d){let h=d instanceof Pt?d:new Pt(d),w=p,O=tn(h);for(;null!==O;){const j=(0,ee.DV)(w.node.children,O)||{children:{},childCount:0};w=new _s(O,w,j),h=li(h),O=tn(h)}return w}function fe(p){return p.node.value}function $(p,d){p.node.value=d,Qn(p)}function K(p){return p.node.childCount>0}function Je(p,d){sr(p.node.children,(h,w)=>{d(new _s(h,p,w))})}function Ot(p,d,h,w){h&&!w&&d(p),Je(p,O=>{Ot(O,d,!0,w)}),h&&w&&d(p)}function bi(p){return new Pt(null===p.parent?p.name:bi(p.parent)+"/"+p.name)}function Qn(p){null!==p.parent&&function Es(p,d,h){const w=function ve(p){return void 0===fe(p)&&!K(p)}(h),O=(0,ee.r3)(p.node.children,d);w&&O?(delete p.node.children[d],p.node.childCount--,Qn(p)):!w&&!O&&(p.node.children[d]=h.node,p.node.childCount++,Qn(p))}(p.parent,p.name,p)}const oa=/[\[\].#$\/\u0000-\u001F\u007F]/,ic=/[\[\].#$\u0000-\u001F\u007F]/,Ta=10485760,Va=function(p){return"string"==typeof p&&0!==p.length&&!oa.test(p)},Nl=function(p){return"string"==typeof p&&0!==p.length&&!ic.test(p)},fc=function(p){return null===p||"string"==typeof p||"number"==typeof p&&!oi(p)||p&&"object"==typeof p&&(0,ee.r3)(p,".sv")},Co=function(p,d,h,w){w&&void 0===d||aa((0,ee.gK)(p,"value"),d,h)},aa=function(p,d,h){const w=h instanceof Pt?new ro(h,p):h;if(void 0===d)throw new Error(p+"contains undefined "+es(w));if("function"==typeof d)throw new Error(p+"contains a function "+es(w)+" with contents = "+d.toString());if(oi(d))throw new Error(p+"contains "+d.toString()+" "+es(w));if("string"==typeof d&&d.length>Ta/3&&(0,ee.ug)(d)>Ta)throw new Error(p+"contains a string greater than "+Ta+" utf8 bytes "+es(w)+" ('"+d.substring(0,50)+"...')");if(d&&"object"==typeof d){let O=!1,j=!1;if(sr(d,(re,ye)=>{if(".value"===re)O=!0;else if(".priority"!==re&&".sv"!==re&&(j=!0,!Va(re)))throw new Error(p+" contains an invalid key ("+re+") "+es(w)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function _o(p,d){p.parts_.length>0&&(p.byteLength_+=1),p.parts_.push(d),p.byteLength_+=(0,ee.ug)(d),Xo(p)})(w,re),aa(p,ye,w),function sl(p){const d=p.parts_.pop();p.byteLength_-=(0,ee.ug)(d),p.parts_.length>0&&(p.byteLength_-=1)}(w)}),O&&j)throw new Error(p+' contains ".value" child '+es(w)+" in addition to actual children.")}},hu=function(p,d,h,w){if(w&&void 0===d)return;const O=(0,ee.gK)(p,"values");if(!d||"object"!=typeof d||Array.isArray(d))throw new Error(O+" must be an object containing the children to replace.");const j=[];sr(d,(re,ye)=>{const ke=new Pt(re);if(aa(O,ye,Cr(h,ke)),".priority"===ar(ke)&&!fc(ye))throw new Error(O+"contains an invalid value for '"+ke.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");j.push(ke)}),function(p,d){let h,w;for(h=0;h<d.length;h++){w=d[h];const j=Ks(w);for(let re=0;re<j.length;re++)if((".priority"!==j[re]||re!==j.length-1)&&!Va(j[re]))throw new Error(p+"contains an invalid key ("+j[re]+") in path "+w.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}d.sort(ko);let O=null;for(h=0;h<d.length;h++){if(w=d[h],null!==O&&Er(O,w))throw new Error(p+"contains a path "+O.toString()+" that is ancestor of another path "+w.toString());O=w}}(O,j)},tu=function(p,d,h){if(!h||void 0!==d){if(oi(d))throw new Error((0,ee.gK)(p,"priority")+"is "+d.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fc(d))throw new Error((0,ee.gK)(p,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ll=function(p,d,h,w){if(!(w&&void 0===h||Va(h)))throw new Error((0,ee.gK)(p,d)+'was an invalid key = "'+h+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Dc=function(p,d,h,w){if(!(w&&void 0===h||Nl(h)))throw new Error((0,ee.gK)(p,d)+'was an invalid path = "'+h+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ga=function(p,d){if(".info"===tn(d))throw new Error(p+" failed = Can't modify data under /.info/")},fu=function(p,d){const h=d.path.toString();if("string"!=typeof d.repoInfo.host||0===d.repoInfo.host.length||!Va(d.repoInfo.namespace)&&"localhost"!==d.repoInfo.host.split(":")[0]||0!==h.length&&!function(p){return p&&(p=p.replace(/^\/*\.info(\/|$)/,"/")),Nl(p)}(h))throw new Error((0,ee.gK)(p,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Wu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wc(p,d){let h=null;for(let w=0;w<d.length;w++){const O=d[w],j=O.getPath();null!==h&&!Oo(j,h.path)&&(p.eventLists_.push(h),h=null),null===h&&(h={events:[],path:j}),h.events.push(O)}h&&p.eventLists_.push(h)}function xc(p,d,h){Wc(p,h),F(p,w=>Oo(w,d))}function Bs(p,d,h){Wc(p,h),F(p,w=>Er(w,d)||Er(d,w))}function F(p,d){p.recursionDepth_++;let h=!0;for(let w=0;w<p.eventLists_.length;w++){const O=p.eventLists_[w];O&&(d(O.path)?(E(p.eventLists_[w]),p.eventLists_[w]=null):h=!1)}h&&(p.eventLists_=[]),p.recursionDepth_--}function E(p){for(let d=0;d<p.events.length;d++){const h=p.events[d];if(null!==h){p.events[d]=null;const w=h.getEventRunner();Ut&&un("event: "+h.toString()),ji(w)}}}const I="repo_interrupt";class de{constructor(d,h,w,O){this.repoInfo_=d,this.forceRestClient_=h,this.authTokenProvider_=w,this.appCheckProvider_=O,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Nn(),this.transactionQueueTree_=new _s,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function St(p){const h=p.infoData_.getNode(new Pt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+h}function on(p){return function(p){return(p=p||{}).timestamp=p.timestamp||(new Date).getTime(),p}({timestamp:St(p)})}function On(p,d,h,w,O){p.dataUpdateCount++;const j=new Pt(d);h=p.interceptServerDataCallback_?p.interceptServerDataCallback_(d,h):h;let re=[];if(O)if(w){const ke=(0,ee.UI)(h,Qe=>pe(Qe));re=function ne(p,d,h,w){const O=Zn(p,w);if(O){const j=as(O),re=j.path,ye=j.queryId,ke=jr(re,d),Qe=$r.fromObject(h);return Js(p,re,new Ka(ao(ye),ke,Qe))}return[]}(p.serverSyncTree_,j,ke,O)}else{const ke=pe(h);re=q(p.serverSyncTree_,j,ke,O)}else if(w){const ke=(0,ee.UI)(h,Qe=>pe(Qe));re=function Fa(p,d,h){const w=$r.fromObject(h);return At(p,new Ka({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,w))}(p.serverSyncTree_,j,ke)}else{const ke=pe(h);re=ts(p.serverSyncTree_,j,ke)}let ye=j;re.length>0&&(ye=Us(p,j)),Bs(p.eventQueue_,ye,re)}function pi(p,d){Ts(p,"connected",d),!1===d&&function pc(p){Fc(p,"onDisconnectEvents");const d=on(p),h=Nn();nr(p.onDisconnect_,Yt(),(O,j)=>{const re=$c(O,j,p.serverSyncTree_,d);$i(h,O,re)});let w=[];nr(h,Yt(),(O,j)=>{w=w.concat(ts(p.serverSyncTree_,O,j));const re=ce(p,O);Us(p,re)}),p.onDisconnect_=Nn(),Bs(p.eventQueue_,Yt(),w)}(p)}function Ts(p,d,h){const w=new Pt("/.info/"+d),O=pe(h);p.infoData_.updateSnapshot(w,O);const j=ts(p.infoSyncTree_,w,O);Bs(p.eventQueue_,w,j)}function Bl(p){return p.nextWriteId_++}function vc(p,d,h,w,O){Fc(p,"set",{path:d.toString(),value:h,priority:w});const j=on(p),re=pe(h,w),ye=je(p.serverSyncTree_,d),ke=Ko(re,ye,j),Qe=Bl(p),$t=co(p.serverSyncTree_,d,ke,Qe,!0);Wc(p.eventQueue_,$t),p.server_.put(d.toString(),re.val(!0),(an,ti)=>{const Ii="ok"===an;Ii||Ei("set at "+d+" failed: "+an);const ss=ma(p.serverSyncTree_,Qe,!Ii);Bs(p.eventQueue_,d,ss),cs(0,O,an,ti)});const Kt=ce(p,d);Us(p,Kt),Bs(p.eventQueue_,Kt,[])}function nu(p,d,h){p.server_.onDisconnectCancel(d.toString(),(w,O)=>{"ok"===w&&Ir(p.onDisconnect_,d),cs(0,h,w,O)})}function rc(p,d,h,w){const O=pe(h);p.server_.onDisconnectPut(d.toString(),O.val(!0),(j,re)=>{"ok"===j&&$i(p.onDisconnect_,d,O),cs(0,w,j,re)})}function ru(p,d,h){let w;w=".info"===tn(d._path)?Pl(p.infoSyncTree_,d,h):Pl(p.serverSyncTree_,d,h),xc(p.eventQueue_,d._path,w)}function qc(p){p.persistentConnection_&&p.persistentConnection_.interrupt(I)}function Fc(p,...d){let h="";p.persistentConnection_&&(h=p.persistentConnection_.id+":"),un(h,...d)}function cs(p,d,h,w){d&&ji(()=>{if("ok"===h)d(null);else{const O=(h||"error").toUpperCase();let j=O;w&&(j+=": "+w);const re=new Error(j);re.code=O,d(re)}})}function su(p,d,h){return je(p.serverSyncTree_,d,h)||Wn.EMPTY_NODE}function ou(p,d=p.transactionQueueTree_){if(d||J(p,d),fe(d)){const h=T(p,d);(0,ee.hu)(h.length>0,"Sending zero length transaction queue"),h.every(O=>0===O.status)&&function Dd(p,d,h){const w=h.map(Qe=>Qe.currentWriteId),O=su(p,d,w);let j=O;const re=O.hash();for(let Qe=0;Qe<h.length;Qe++){const $t=h[Qe];(0,ee.hu)(0===$t.status,"tryToSendTransactionQueue_: items in queue should all be run."),$t.status=1,$t.retryCount++;const Kt=jr(d,$t.path);j=j.updateChild(Kt,$t.currentOutputSnapshotRaw)}const ye=j.val(!0),ke=d;p.server_.put(ke.toString(),ye,Qe=>{Fc(p,"transaction put response",{path:ke.toString(),status:Qe});let $t=[];if("ok"===Qe){const Kt=[];for(let an=0;an<h.length;an++)h[an].status=2,$t=$t.concat(ma(p.serverSyncTree_,h[an].currentWriteId)),h[an].onComplete&&Kt.push(()=>h[an].onComplete(null,!0,h[an].currentOutputSnapshotResolved)),h[an].unwatcher();J(p,Kc(p.transactionQueueTree_,d)),ou(p,p.transactionQueueTree_),Bs(p.eventQueue_,d,$t);for(let an=0;an<Kt.length;an++)ji(Kt[an])}else{if("datastale"===Qe)for(let Kt=0;Kt<h.length;Kt++)h[Kt].status=3===h[Kt].status?4:0;else{Ei("transaction at "+ke.toString()+" failed: "+Qe);for(let Kt=0;Kt<h.length;Kt++)h[Kt].status=4,h[Kt].abortReason=Qe}Us(p,d)}},re)}(p,bi(d),h)}else K(d)&&Je(d,h=>{ou(p,h)})}function Us(p,d){const h=_(p,d),w=bi(h);return function k(p,d,h){if(0===d.length)return;const w=[];let O=[];const re=d.filter(ye=>0===ye.status).map(ye=>ye.currentWriteId);for(let ye=0;ye<d.length;ye++){const ke=d[ye],Qe=jr(h,ke.path);let Kt,$t=!1;if((0,ee.hu)(null!==Qe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ke.status)$t=!0,Kt=ke.abortReason,O=O.concat(ma(p.serverSyncTree_,ke.currentWriteId,!0));else if(0===ke.status)if(ke.retryCount>=25)$t=!0,Kt="maxretry",O=O.concat(ma(p.serverSyncTree_,ke.currentWriteId,!0));else{const an=su(p,ke.path,re);ke.currentInputSnapshot=an;const ti=d[ye].update(an.val());if(void 0!==ti){aa("transaction failed: Data returned ",ti,ke.path);let Ii=pe(ti);"object"==typeof ti&&null!=ti&&(0,ee.r3)(ti,".priority")||(Ii=Ii.updatePriority(an.getPriority()));const ml=ke.currentWriteId,oc=on(p),lu=Ko(Ii,an,oc);ke.currentOutputSnapshotRaw=Ii,ke.currentOutputSnapshotResolved=lu,ke.currentWriteId=Bl(p),re.splice(re.indexOf(ml),1),O=O.concat(co(p.serverSyncTree_,ke.path,lu,ke.currentWriteId,ke.applyLocally)),O=O.concat(ma(p.serverSyncTree_,ml,!0))}else $t=!0,Kt="nodata",O=O.concat(ma(p.serverSyncTree_,ke.currentWriteId,!0))}Bs(p.eventQueue_,h,O),O=[],$t&&(d[ye].status=2,setTimeout(d[ye].unwatcher,Math.floor(0)),d[ye].onComplete&&w.push("nodata"===Kt?()=>d[ye].onComplete(null,!1,d[ye].currentInputSnapshot):()=>d[ye].onComplete(new Error(Kt),!1,null)))}J(p,p.transactionQueueTree_);for(let ye=0;ye<w.length;ye++)ji(w[ye]);ou(p,p.transactionQueueTree_)}(p,T(p,h),w),w}function _(p,d){let h,w=p.transactionQueueTree_;for(h=tn(d);null!==h&&void 0===fe(w);)w=Kc(w,h),h=tn(d=li(d));return w}function T(p,d){const h=[];return P(p,d,h),h.sort((w,O)=>w.order-O.order),h}function P(p,d,h){const w=fe(d);if(w)for(let O=0;O<w.length;O++)h.push(w[O]);Je(d,O=>{P(p,O,h)})}function J(p,d){const h=fe(d);if(h){let w=0;for(let O=0;O<h.length;O++)2!==h[O].status&&(h[w]=h[O],w++);h.length=w,$(d,h.length>0?h:void 0)}Je(d,w=>{J(p,w)})}function ce(p,d){const h=bi(_(p,d)),w=Kc(p.transactionQueueTree_,d);return function vn(p,d,h){let w=h?p:p.parent;for(;null!==w;){if(d(w))return!0;w=w.parent}}(w,O=>{Ie(p,O)}),Ie(p,w),Ot(w,O=>{Ie(p,O)}),h}function Ie(p,d){const h=fe(d);if(h){const w=[];let O=[],j=-1;for(let re=0;re<h.length;re++)3===h[re].status||(1===h[re].status?((0,ee.hu)(j===re-1,"All SENT items should be at beginning of queue."),j=re,h[re].status=3,h[re].abortReason="set"):((0,ee.hu)(0===h[re].status,"Unexpected transaction status in abort"),h[re].unwatcher(),O=O.concat(ma(p.serverSyncTree_,h[re].currentWriteId,!0)),h[re].onComplete&&w.push(h[re].onComplete.bind(null,new Error("set"),!1,null))));-1===j?$(d,void 0):h.length=j+1,Bs(p.eventQueue_,bi(d),O);for(let re=0;re<w.length;re++)ji(w[re])}}const Ft=function(p,d){const h=nn(p),w=h.namespace;return"firebase.com"===h.domain&&Ci(h.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!w||"undefined"===w)&&"localhost"!==h.domain&&Ci("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),h.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ei("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new _t(h.host,h.secure,w,"ws"===h.scheme||"wss"===h.scheme,d,"",w!==h.subdomain),path:new Pt(h.pathString)}},nn=function(p){let d="",h="",w="",O="",j="",re=!0,ye="https",ke=443;if("string"==typeof p){let Qe=p.indexOf("//");Qe>=0&&(ye=p.substring(0,Qe-1),p=p.substring(Qe+2));let $t=p.indexOf("/");-1===$t&&($t=p.length);let Kt=p.indexOf("?");-1===Kt&&(Kt=p.length),d=p.substring(0,Math.min($t,Kt)),$t<Kt&&(O=function Le(p){let d="";const h=p.split("/");for(let w=0;w<h.length;w++)if(h[w].length>0){let O=h[w];try{O=decodeURIComponent(O.replace(/\+/g," "))}catch{}d+="/"+O}return d}(p.substring($t,Kt)));const an=function lt(p){const d={};"?"===p.charAt(0)&&(p=p.substring(1));for(const h of p.split("&")){if(0===h.length)continue;const w=h.split("=");2===w.length?d[decodeURIComponent(w[0])]=decodeURIComponent(w[1]):Ei(`Invalid query segment '${h}' in query '${p}'`)}return d}(p.substring(Math.min(p.length,Kt)));Qe=d.indexOf(":"),Qe>=0?(re="https"===ye||"wss"===ye,ke=parseInt(d.substring(Qe+1),10)):Qe=d.length;const ti=d.slice(0,Qe);if("localhost"===ti.toLowerCase())h="localhost";else if(ti.split(".").length<=2)h=ti;else{const Ii=d.indexOf(".");w=d.substring(0,Ii).toLowerCase(),h=d.substring(Ii+1),j=w}"ns"in an&&(j=an.ns)}return{host:d,port:ke,domain:h,subdomain:w,secure:re,scheme:ye,pathString:O,namespace:j}};class en{constructor(d,h,w,O){this.eventType=d,this.eventRegistration=h,this.snapshot=w,this.prevName=O}getPath(){const d=this.snapshot.ref;return"value"===this.eventType?d._path:d.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ee.Pz)(this.snapshot.exportVal())}}class hi{constructor(d,h,w){this.eventRegistration=d,this.error=h,this.path=w}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class mi{constructor(d,h){this.snapshotCallback=d,this.cancelCallback=h}onValue(d,h){this.snapshotCallback.call(null,d,h)}onCancel(d){return(0,ee.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,d)}get hasCancelCallback(){return!!this.cancelCallback}matches(d){return this.snapshotCallback===d.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===d.snapshotCallback.userCallback&&this.snapshotCallback.context===d.snapshotCallback.context}}class Bn{constructor(d,h){this._repo=d,this._path=h}cancel(){const d=new ee.BH;return nu(this._repo,this._path,d.wrapCallback(()=>{})),d.promise}remove(){ga("OnDisconnect.remove",this._path);const d=new ee.BH;return rc(this._repo,this._path,null,d.wrapCallback(()=>{})),d.promise}set(d){ga("OnDisconnect.set",this._path),Co("OnDisconnect.set",d,this._path,!1);const h=new ee.BH;return rc(this._repo,this._path,d,h.wrapCallback(()=>{})),h.promise}setWithPriority(d,h){ga("OnDisconnect.setWithPriority",this._path),Co("OnDisconnect.setWithPriority",d,this._path,!1),tu("OnDisconnect.setWithPriority",h,!1);const w=new ee.BH;return function Eu(p,d,h,w,O){const j=pe(h,w);p.server_.onDisconnectPut(d.toString(),j.val(!0),(re,ye)=>{"ok"===re&&$i(p.onDisconnect_,d,j),cs(0,O,re,ye)})}(this._repo,this._path,d,h,w.wrapCallback(()=>{})),w.promise}update(d){ga("OnDisconnect.update",this._path),hu("OnDisconnect.update",d,this._path,!1);const h=new ee.BH;return function iu(p,d,h,w){if((0,ee.xb)(h))return un("onDisconnect().update() called with empty data.  Don't do anything."),void cs(0,w,"ok",void 0);p.server_.onDisconnectMerge(d.toString(),h,(O,j)=>{"ok"===O&&sr(h,(re,ye)=>{const ke=pe(ye);$i(p.onDisconnect_,Cr(d,re),ke)}),cs(0,w,O,j)})}(this._repo,this._path,d,h.wrapCallback(()=>{})),h.promise}}class ei{constructor(d,h,w,O){this._repo=d,this._path=h,this._queryParams=w,this._orderByCalled=O}get key(){return _i(this._path)?null:ar(this._path)}get ref(){return new dr(this._repo,this._path)}get _queryIdentifier(){const d=$e(this._queryParams),h=Qi(d);return"{}"===h?"default":h}get _queryObject(){return $e(this._queryParams)}isEqual(d){if(!((d=(0,ee.m9)(d))instanceof ei))return!1;const h=this._repo===d._repo,w=Oo(this._path,d._path);return h&&w&&this._queryIdentifier===d._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function go(p){let d="";for(let h=p.pieceNum_;h<p.pieces_.length;h++)""!==p.pieces_[h]&&(d+="/"+encodeURIComponent(String(p.pieces_[h])));return d||"/"}(this._path)}}function ui(p,d){if(!0===p._orderByCalled)throw new Error(d+": You can't combine multiple orderBy calls.")}function pr(p){let d=null,h=null;if(p.hasStart()&&(d=p.getIndexStartValue()),p.hasEnd()&&(h=p.getIndexEndValue()),p.getIndex()===bo){const w="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",O="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(p.hasStart()){if(p.getIndexStartName()!==Ui)throw new Error(w);if("string"!=typeof d)throw new Error(O)}if(p.hasEnd()){if(p.getIndexEndName()!==yi)throw new Error(w);if("string"!=typeof h)throw new Error(O)}}else if(p.getIndex()===Tr){if(null!=d&&!fc(d)||null!=h&&!fc(h))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ee.hu)(p.getIndex()instanceof Lt||p.getIndex()===zr,"unknown index type."),null!=d&&"object"==typeof d||null!=h&&"object"==typeof h)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ns(p){if(p.hasStart()&&p.hasEnd()&&p.hasLimit()&&!p.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class dr extends ei{constructor(d,h){super(d,h,new ca,!1)}get parent(){const d=ds(this._path);return null===d?null:new dr(this._repo,d)}get root(){let d=this;for(;null!==d.parent;)d=d.parent;return d}}class tr{constructor(d,h,w){this._node=d,this.ref=h,this._index=w}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(d){const h=new Pt(d),w=Ao(this.ref,d);return new tr(this._node.getChild(h),w,Tr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(d){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(w,O)=>d(new tr(O,Ao(this.ref,w),Tr)))}hasChild(d){const h=new Pt(d);return!this._node.getChild(h).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Kl(p,d){return(p=(0,ee.m9)(p))._checkNotDeleted("ref"),void 0!==d?Ao(p._root,d):p._root}function Wo(p,d){(p=(0,ee.m9)(p))._checkNotDeleted("refFromURL");const h=Ft(d,p._repo.repoInfo_.nodeAdmin);fu("refFromURL",h);const w=h.repoInfo;return!p._repo.repoInfo_.isCustomHost()&&w.host!==p._repo.repoInfo_.host&&Ci("refFromURL: Host name does not match the current database: (found "+w.host+" but expected "+p._repo.repoInfo_.host+")"),Kl(p,h.path.toString())}function Ao(p,d){return null===tn((p=(0,ee.m9)(p))._path)?(h=d,h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),Dc("child","path",h,!1)):Dc("child","path",d,!1),new dr(p._repo,Cr(p._path,d));var h}function Qc(p,d){p=(0,ee.m9)(p),ga("set",p._path),Co("set",d,p._path,!1);const h=new ee.BH;return vc(p._repo,p._path,d,null,h.wrapCallback(()=>{})),h.promise}function mu(p,d){hu("update",d,p._path,!1);const h=new ee.BH;return function Zc(p,d,h,w){Fc(p,"update",{path:d.toString(),value:h});let O=!0;const j=on(p),re={};if(sr(h,(ye,ke)=>{O=!1,re[ye]=$c(Cr(d,ye),pe(ke),p.serverSyncTree_,j)}),O)un("update() called with empty data.  Don't do anything."),cs(0,w,"ok",void 0);else{const ye=Bl(p),ke=function yc(p,d,h,w){!function Fr(p,d,h,w){(0,ee.hu)(w>p.lastWriteId,"Stacking an older merge on top of newer ones"),p.allWrites.push({path:d,children:h,writeId:w,visible:!0}),p.visibleWrites=cc(p.visibleWrites,d,h),p.lastWriteId=w}(p.pendingWriteTree_,d,h,w);const O=$r.fromObject(h);return At(p,new Ka({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,O))}(p.serverSyncTree_,d,re,ye);Wc(p.eventQueue_,ke),p.server_.merge(d.toString(),h,(Qe,$t)=>{const Kt="ok"===Qe;Kt||Ei("update at "+d+" failed: "+Qe);const an=ma(p.serverSyncTree_,ye,!Kt),ti=an.length>0?Us(p,d):d;Bs(p.eventQueue_,ti,an),cs(0,w,Qe,$t)}),sr(h,Qe=>{const $t=ce(p,Cr(d,Qe));Us(p,$t)}),Bs(p.eventQueue_,d,[])}}(p._repo,p._path,d,h.wrapCallback(()=>{})),h.promise}function Iu(p){p=(0,ee.m9)(p);const d=new mi(()=>{}),h=new Jn(d);return function Nc(p,d,h){const w=function gt(p,d){const h=d._path;let w=null;p.syncPointTree_.foreachOnPath(h,(Qe,$t)=>{const Kt=jr(Qe,h);w=w||Vr($t,Kt)});let O=p.syncPointTree_.get(h);O?w=w||Vr(O,Yt()):(O=new me,p.syncPointTree_=p.syncPointTree_.set(h,O));const j=null!=w,re=j?new Wa(w,!0,!1):null;return function Ja(p){return Jl(p.viewCache_)}(Vi(O,d,cl(p.pendingWriteTree_,d._path),j?re.getNode():Wn.EMPTY_NODE,j))}(p.serverSyncTree_,d);return null!=w?Promise.resolve(w):p.server_.get(d).then(O=>{const j=pe(O).withIndex(d._queryParams.getIndex());let re;if(he(p.serverSyncTree_,d,h,!0),d._queryParams.loadsAllData())re=ts(p.serverSyncTree_,d._path,j);else{const ye=ci(p.serverSyncTree_,d);re=q(p.serverSyncTree_,d._path,j,ye)}return Bs(p.eventQueue_,d._path,re),Pl(p.serverSyncTree_,d,h,null,!0),j},O=>(Fc(p,"get for query "+(0,ee.Pz)(d)+" failed: "+O),Promise.reject(new Error(O))))}(p._repo,p,h).then(w=>new tr(w,new dr(p._repo,p._path),p._queryParams.getIndex()))}class Jn{constructor(d){this.callbackContext=d}respondsTo(d){return"value"===d}createEvent(d,h){const w=h._queryParams.getIndex();return new en("value",this,new tr(d.snapshotNode,new dr(h._repo,h._path),w))}getEventRunner(d){return"cancel"===d.getEventType()?()=>this.callbackContext.onCancel(d.error):()=>this.callbackContext.onValue(d.snapshot,null)}createCancelEvent(d,h){return this.callbackContext.hasCancelCallback?new hi(this,d,h):null}matches(d){return d instanceof Jn&&(!d.callbackContext||!this.callbackContext||d.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Oi{constructor(d,h){this.eventType=d,this.callbackContext=h}respondsTo(d){let h="children_added"===d?"child_added":d;return h="children_removed"===h?"child_removed":h,this.eventType===h}createCancelEvent(d,h){return this.callbackContext.hasCancelCallback?new hi(this,d,h):null}createEvent(d,h){(0,ee.hu)(null!=d.childName,"Child events should have a childName.");const w=Ao(new dr(h._repo,h._path),d.childName),O=h._queryParams.getIndex();return new en(d.type,this,new tr(d.snapshotNode,w,O),d.prevName)}getEventRunner(d){return"cancel"===d.getEventType()?()=>this.callbackContext.onCancel(d.error):()=>this.callbackContext.onValue(d.snapshot,d.prevName)}matches(d){return d instanceof Oi&&this.eventType===d.eventType&&(!this.callbackContext||!d.callbackContext||this.callbackContext.matches(d.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Fi(p,d,h,w,O){let j;if("object"==typeof w&&(j=void 0,O=w),"function"==typeof w&&(j=w),O&&O.onlyOnce){const ke=h,Qe=($t,Kt)=>{ru(p._repo,p,ye),ke($t,Kt)};Qe.userCallback=h.userCallback,Qe.context=h.context,h=Qe}const re=new mi(h,j||void 0),ye="value"===d?new Jn(re):new Oi(d,re);return function Tu(p,d,h){let w;w=".info"===tn(d._path)?he(p.infoSyncTree_,d,h):he(p.serverSyncTree_,d,h),xc(p.eventQueue_,d._path,w)}(p._repo,p,ye),()=>ru(p._repo,p,ye)}function is(p,d,h,w){return Fi(p,"value",d,h,w)}function Ba(p,d,h,w){return Fi(p,"child_added",d,h,w)}function wc(p,d,h,w){return Fi(p,"child_changed",d,h,w)}function Ua(p,d,h,w){return Fi(p,"child_moved",d,h,w)}function Lc(p,d,h,w){return Fi(p,"child_removed",d,h,w)}function eo(p,d,h){let w=null;const O=h?new mi(h):null;"value"===d?w=new Jn(O):d&&(w=new Oi(d,O)),ru(p._repo,p,w)}class pl{}class ud extends pl{constructor(d,h){super(),this._value=d,this._key=h}_apply(d){Co("endAt",this._value,d._path,!0);const h=z(d._queryParams,this._value,this._key);if(ns(h),pr(h),d._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ei(d._repo,d._path,h,d._orderByCalled)}}class Mc extends pl{constructor(d,h){super(),this._value=d,this._key=h}_apply(d){Co("endBefore",this._value,d._path,!1);const h=function le(p,d,h){let w,O;return p.index_===bo?("string"==typeof d&&(d=ta(d)),O=z(p,d,h)):(w=null==h?Ui:ta(h),O=z(p,d,w)),O.endBeforeSet_=!0,O}(d._queryParams,this._value,this._key);if(ns(h),pr(h),d._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ei(d._repo,d._path,h,d._orderByCalled)}}class Vc extends pl{constructor(d,h){super(),this._value=d,this._key=h}_apply(d){Co("startAt",this._value,d._path,!0);const h=ll(d._queryParams,this._value,this._key);if(ns(h),pr(h),d._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ei(d._repo,d._path,h,d._orderByCalled)}}class lh extends pl{constructor(d,h){super(),this._value=d,this._key=h}_apply(d){Co("startAfter",this._value,d._path,!1);const h=function Ml(p,d,h){let w;if(p.index_===bo)"string"==typeof d&&(d=xl(d)),w=ll(p,d,h);else{let O;O=null==h?yi:xl(h),w=ll(p,d,O)}return w.startAfterSet_=!0,w}(d._queryParams,this._value,this._key);if(ns(h),pr(h),d._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ei(d._repo,d._path,h,d._orderByCalled)}}class au extends pl{constructor(d){super(),this._limit=d}_apply(d){if(d._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ei(d._repo,d._path,function Al(p,d){const h=p.copy();return h.limitSet_=!0,h.limit_=d,h.viewFrom_="l",h}(d._queryParams,this._limit),d._orderByCalled)}}class Su extends pl{constructor(d){super(),this._limit=d}_apply(d){if(d._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ei(d._repo,d._path,function Cc(p,d){const h=p.copy();return h.limitSet_=!0,h.limit_=d,h.viewFrom_="r",h}(d._queryParams,this._limit),d._orderByCalled)}}class jh extends pl{constructor(d){super(),this._path=d}_apply(d){ui(d,"orderByChild");const h=new Pt(this._path);if(_i(h))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const w=new Lt(h),O=Y(d._queryParams,w);return pr(O),new ei(d._repo,d._path,O,!0)}}class Vu extends pl{_apply(d){ui(d,"orderByKey");const h=Y(d._queryParams,bo);return pr(h),new ei(d._repo,d._path,h,!0)}}class zh extends pl{_apply(d){ui(d,"orderByPriority");const h=Y(d._queryParams,Tr);return pr(h),new ei(d._repo,d._path,h,!0)}}class Ad extends pl{_apply(d){ui(d,"orderByValue");const h=Y(d._queryParams,zr);return pr(h),new ei(d._repo,d._path,h,!0)}}class Md extends pl{constructor(d,h){super(),this._value=d,this._key=h}_apply(d){if(Co("equalTo",this._value,d._path,!1),d._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(d._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ud(this._value,this._key)._apply(new Vc(this._value,this._key)._apply(d))}}function Bc(p,...d){let h=(0,ee.m9)(p);for(const w of d)h=w._apply(h);return h}(function Pe(p){(0,ee.hu)(!te,"__referenceConstructor has already been defined"),te=p})(dr),function nc(p){(0,ee.hu)(!qi,"__referenceConstructor has already been defined"),qi=p}(dr);const Du={};function Gh(p,d,h,w,O){let j=w||p.options.databaseURL;void 0===j&&(p.options.projectId||Ci("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),un("Using default host for project ",p.options.projectId),j=`${p.options.projectId}-default-rtdb.firebaseio.com`);let ke,Qe,re=Ft(j,O),ye=re.repoInfo;typeof process<"u"&&process.env&&(Qe=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Qe?(ke=!0,j=`http://${Qe}?ns=${ye.namespace}`,re=Ft(j,O),ye=re.repoInfo):ke=!re.repoInfo.secure;const $t=O&&ke?new qn(qn.OWNER):new vs(p.name,p.options,d);fu("Invalid Firebase Database URL",re),_i(re.path)||Ci("Database URL must point to the root of a Firebase Database (not including a child path).");const Kt=function Kh(p,d,h,w){let O=Du[d.name];O||(O={},Du[d.name]=O);let j=O[p.toURLString()];return j&&Ci("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),j=new de(p,false,h,w),O[p.toURLString()]=j,j}(ye,p,$t,new ai(p.name,h));return new Bf(Kt,p)}class Bf{constructor(d,h){this._repoInternal=d,this.app=h,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ae(p,d,h){if(p.stats_=Yn(p.repoInfo_),p.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)p.server_=new Rt(p.repoInfo_,(w,O,j,re)=>{On(p,w,O,j,re)},p.authTokenProvider_,p.appCheckProvider_),setTimeout(()=>pi(p,!0),0);else{if(typeof h<"u"&&null!==h){if("object"!=typeof h)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ee.Pz)(h)}catch(w){throw new Error("Invalid authOverride provided: "+w)}}p.persistentConnection_=new hs(p.repoInfo_,d,(w,O,j,re)=>{On(p,w,O,j,re)},w=>{pi(p,w)},w=>{!function _r(p,d){sr(d,(h,w)=>{Ts(p,h,w)})}(p,w)},p.authTokenProvider_,p.appCheckProvider_,h),p.server_=p.persistentConnection_}p.authTokenProvider_.addTokenChangeListener(w=>{p.server_.refreshAuthToken(w)}),p.appCheckProvider_.addTokenChangeListener(w=>{p.server_.refreshAppCheckToken(w.token)}),p.statsReporter_=function Ne(p,d){const h=p.toString();return $n[h]||($n[h]=d()),$n[h]}(p.repoInfo_,()=>new Ra(p.stats_,p.server_)),p.infoData_=new jt,p.infoSyncTree_=new $l({startListening:(w,O,j,re)=>{let ye=[];const ke=p.infoData_.getNode(w._path);return ke.isEmpty()||(ye=ts(p.infoSyncTree_,w._path,ke),setTimeout(()=>{re("ok")},0)),ye},stopListening:()=>{}}),Ts(p,"connected",!1),p.serverSyncTree_=new $l({startListening:(w,O,j,re)=>(p.server_.listen(w,j,O,(ye,ke)=>{const Qe=re(ye,ke);Bs(p.eventQueue_,w._path,Qe)}),[]),stopListening:(w,O)=>{p.server_.unlisten(w,O)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new dr(this._repo,Yt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function $h(p,d){const h=Du[d];(!h||h[p.key]!==p)&&Ci(`Database ${d}(${p.repoInfo_}) has already been deleted.`),qc(p),delete h[p.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(d){null===this._rootInternal&&Ci("Cannot call "+d+" on a deleted database.")}}function Od(){$s.IS_TRANSPORT_INITIALIZED&&Ei("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Uc(){Od(),Gi.forceDisallow()}function hd(){Od(),xs.forceDisallow(),Gi.forceAllow()}function Wh(p,d){vt(p,d)}const qu={".sv":"timestamp"};class Yh{constructor(d,h){this.committed=d,this.snapshot=h}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}hs.prototype.simpleListen=function(p,d){this.sendRequest("q",{p},d)},hs.prototype.echo=function(p,d){this.sendRequest("echo",{d:p},d)},function Fd(p){yt(xe.SDK_VERSION),(0,xe._registerComponent)(new nt.wA("database",(d,{instanceIdentifier:h})=>Gh(d.getProvider("app").getImmediate(),d.getProvider("auth-internal"),d.getProvider("app-check-internal"),h),"PUBLIC").setMultipleInstances(!0)),(0,xe.registerVersion)(Ue,"0.13.5",p),(0,xe.registerVersion)(Ue,"0.13.5","esm2017")}();const Ld=new pt.Yd("@firebase/database-compat"),mh=function(p){Ld.warn("FIREBASE WARNING: "+p)};class Vd{constructor(d){this._delegate=d}cancel(d){(0,ee.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ee.Wj)("OnDisconnect.cancel","onComplete",d,!0);const h=this._delegate.cancel();return d&&h.then(()=>d(null),w=>d(w)),h}remove(d){(0,ee.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ee.Wj)("OnDisconnect.remove","onComplete",d,!0);const h=this._delegate.remove();return d&&h.then(()=>d(null),w=>d(w)),h}set(d,h){(0,ee.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ee.Wj)("OnDisconnect.set","onComplete",h,!0);const w=this._delegate.set(d);return h&&w.then(()=>h(null),O=>h(O)),w}setWithPriority(d,h,w){(0,ee.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ee.Wj)("OnDisconnect.setWithPriority","onComplete",w,!0);const O=this._delegate.setWithPriority(d,h);return w&&O.then(()=>w(null),j=>w(j)),O}update(d,h){if((0,ee.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(d)){const O={};for(let j=0;j<d.length;++j)O[""+j]=d[j];d=O,mh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ee.Wj)("OnDisconnect.update","onComplete",h,!0);const w=this._delegate.update(d);return h&&w.then(()=>h(null),O=>h(O)),w}}class _h{constructor(d,h){this.committed=d,this.snapshot=h}toJSON(){return(0,ee.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class gu{constructor(d,h){this._database=d,this._delegate=h}val(){return(0,ee.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ee.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ee.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ee.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(d){return(0,ee.Dv)("DataSnapshot.child",0,1,arguments.length),d=String(d),Dc("DataSnapshot.child","path",d,!1),new gu(this._database,this._delegate.child(d))}hasChild(d){return(0,ee.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Dc("DataSnapshot.hasChild","path",d,!1),this._delegate.hasChild(d)}getPriority(){return(0,ee.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(d){return(0,ee.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ee.Wj)("DataSnapshot.forEach","action",d,!1),this._delegate.forEach(h=>d(new gu(this._database,h)))}hasChildren(){return(0,ee.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ee.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ee.Dv)("DataSnapshot.ref",0,0,arguments.length),new ks(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Is{constructor(d,h){this.database=d,this._delegate=h}on(d,h,w,O){var j;(0,ee.Dv)("Query.on",2,4,arguments.length),(0,ee.Wj)("Query.on","callback",h,!1);const re=Is.getCancelAndContextArgs_("Query.on",w,O),ye=(Qe,$t)=>{h.call(re.context,new gu(this.database,Qe),$t)};ye.userCallback=h,ye.context=re.context;const ke=null===(j=re.cancel)||void 0===j?void 0:j.bind(re.context);switch(d){case"value":return is(this._delegate,ye,ke),h;case"child_added":return Ba(this._delegate,ye,ke),h;case"child_removed":return Lc(this._delegate,ye,ke),h;case"child_changed":return wc(this._delegate,ye,ke),h;case"child_moved":return Ua(this._delegate,ye,ke),h;default:throw new Error((0,ee.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(d,h,w){if((0,ee.Dv)("Query.off",0,3,arguments.length),function(p,d,h){if(void 0!==d)switch(d){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ee.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,d),(0,ee.Wj)("Query.off","callback",h,!0),(0,ee.lb)("Query.off","context",w,!0),h){const O=()=>{};O.userCallback=h,O.context=w,eo(this._delegate,d,O)}else eo(this._delegate,d)}get(){return Iu(this._delegate).then(d=>new gu(this.database,d))}once(d,h,w,O){(0,ee.Dv)("Query.once",1,4,arguments.length),(0,ee.Wj)("Query.once","callback",h,!0);const j=Is.getCancelAndContextArgs_("Query.once",w,O),re=new ee.BH,ye=(Qe,$t)=>{const Kt=new gu(this.database,Qe);h&&h.call(j.context,Kt,$t),re.resolve(Kt)};ye.userCallback=h,ye.context=j.context;const ke=Qe=>{j.cancel&&j.cancel.call(j.context,Qe),re.reject(Qe)};switch(d){case"value":is(this._delegate,ye,ke,{onlyOnce:!0});break;case"child_added":Ba(this._delegate,ye,ke,{onlyOnce:!0});break;case"child_removed":Lc(this._delegate,ye,ke,{onlyOnce:!0});break;case"child_changed":wc(this._delegate,ye,ke,{onlyOnce:!0});break;case"child_moved":Ua(this._delegate,ye,ke,{onlyOnce:!0});break;default:throw new Error((0,ee.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return re.promise}limitToFirst(d){return(0,ee.Dv)("Query.limitToFirst",1,1,arguments.length),new Is(this.database,Bc(this._delegate,function uh(p){if("number"!=typeof p||Math.floor(p)!==p||p<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new au(p)}(d)))}limitToLast(d){return(0,ee.Dv)("Query.limitToLast",1,1,arguments.length),new Is(this.database,Bc(this._delegate,function Lu(p){if("number"!=typeof p||Math.floor(p)!==p||p<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Su(p)}(d)))}orderByChild(d){return(0,ee.Dv)("Query.orderByChild",1,1,arguments.length),new Is(this.database,Bc(this._delegate,function Vf(p){if("$key"===p)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===p)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===p)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Dc("orderByChild","path",p,!1),new jh(p)}(d)))}orderByKey(){return(0,ee.Dv)("Query.orderByKey",0,0,arguments.length),new Is(this.database,Bc(this._delegate,function xd(){return new Vu}()))}orderByPriority(){return(0,ee.Dv)("Query.orderByPriority",0,0,arguments.length),new Is(this.database,Bc(this._delegate,function dh(){return new zh}()))}orderByValue(){return(0,ee.Dv)("Query.orderByValue",0,0,arguments.length),new Is(this.database,Bc(this._delegate,function dd(){return new Ad}()))}startAt(d=null,h){return(0,ee.Dv)("Query.startAt",0,2,arguments.length),new Is(this.database,Bc(this._delegate,function sc(p=null,d){return Ll("startAt","key",d,!0),new Vc(p,d)}(d,h)))}startAfter(d=null,h){return(0,ee.Dv)("Query.startAfter",0,2,arguments.length),new Is(this.database,Bc(this._delegate,function ch(p,d){return Ll("startAfter","key",d,!0),new lh(p,d)}(d,h)))}endAt(d=null,h){return(0,ee.Dv)("Query.endAt",0,2,arguments.length),new Is(this.database,Bc(this._delegate,function rs(p,d){return Ll("endAt","key",d,!0),new ud(p,d)}(d,h)))}endBefore(d=null,h){return(0,ee.Dv)("Query.endBefore",0,2,arguments.length),new Is(this.database,Bc(this._delegate,function nl(p,d){return Ll("endBefore","key",d,!0),new Mc(p,d)}(d,h)))}equalTo(d,h){return(0,ee.Dv)("Query.equalTo",1,2,arguments.length),new Is(this.database,Bc(this._delegate,function hh(p,d){return Ll("equalTo","key",d,!0),new Md(p,d)}(d,h)))}toString(){return(0,ee.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ee.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(d){if((0,ee.Dv)("Query.isEqual",1,1,arguments.length),!(d instanceof Is))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(d._delegate)}static getCancelAndContextArgs_(d,h,w){const O={cancel:void 0,context:void 0};if(h&&w)O.cancel=h,(0,ee.Wj)(d,"cancel",O.cancel,!0),O.context=w,(0,ee.lb)(d,"context",O.context,!0);else if(h)if("object"==typeof h&&null!==h)O.context=h;else{if("function"!=typeof h)throw new Error((0,ee.gK)(d,"cancelOrContext")+" must either be a cancel callback or a context object.");O.cancel=h}return O}get ref(){return new ks(this.database,new dr(this._delegate._repo,this._delegate._path))}}class ks extends Is{constructor(d,h){super(d,new ei(h._repo,h._path,new ca,!1)),this.database=d,this._delegate=h}getKey(){return(0,ee.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(d){return(0,ee.Dv)("Reference.child",1,1,arguments.length),"number"==typeof d&&(d=String(d)),new ks(this.database,Ao(this._delegate,d))}getParent(){(0,ee.Dv)("Reference.parent",0,0,arguments.length);const d=this._delegate.parent;return d?new ks(this.database,d):null}getRoot(){return(0,ee.Dv)("Reference.root",0,0,arguments.length),new ks(this.database,this._delegate.root)}set(d,h){(0,ee.Dv)("Reference.set",1,2,arguments.length),(0,ee.Wj)("Reference.set","onComplete",h,!0);const w=Qc(this._delegate,d);return h&&w.then(()=>h(null),O=>h(O)),w}update(d,h){if((0,ee.Dv)("Reference.update",1,2,arguments.length),Array.isArray(d)){const O={};for(let j=0;j<d.length;++j)O[""+j]=d[j];d=O,mh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ga("Reference.update",this._delegate._path),(0,ee.Wj)("Reference.update","onComplete",h,!0);const w=mu(this._delegate,d);return h&&w.then(()=>h(null),O=>h(O)),w}setWithPriority(d,h,w){(0,ee.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ee.Wj)("Reference.setWithPriority","onComplete",w,!0);const O=function Ac(p,d,h){if(ga("setWithPriority",p._path),Co("setWithPriority",d,p._path,!1),tu("setWithPriority",h,!1),".length"===p.key||".keys"===p.key)throw"setWithPriority failed: "+p.key+" is a read-only object.";const w=new ee.BH;return vc(p._repo,p._path,d,h,w.wrapCallback(()=>{})),w.promise}(this._delegate,d,h);return w&&O.then(()=>w(null),j=>w(j)),O}remove(d){(0,ee.Dv)("Reference.remove",0,1,arguments.length),(0,ee.Wj)("Reference.remove","onComplete",d,!0);const h=function Yc(p){return ga("remove",p._path),Qc(p,null)}(this._delegate);return d&&h.then(()=>d(null),w=>d(w)),h}transaction(d,h,w){(0,ee.Dv)("Reference.transaction",1,3,arguments.length),(0,ee.Wj)("Reference.transaction","transactionUpdate",d,!1),(0,ee.Wj)("Reference.transaction","onComplete",h,!0),function(p,d,h,w){if(void 0!==h&&"boolean"!=typeof h)throw new Error((0,ee.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,w);const O=function ph(p,d,h){var w;if(p=(0,ee.m9)(p),ga("Reference.transaction",p._path),".length"===p.key||".keys"===p.key)throw"Reference.transaction failed: "+p.key+" is a read-only object.";const O=null===(w=h?.applyLocally)||void 0===w||w,j=new ee.BH,ye=is(p,()=>{});return function pu(p,d,h,w,O,j){Fc(p,"transaction on "+d);const re={path:d,update:h,onComplete:w,status:null,order:di(),applyLocally:j,retryCount:0,unwatcher:O,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ye=su(p,d,void 0);re.currentInputSnapshot=ye;const ke=re.update(ye.val());if(void 0===ke)re.unwatcher(),re.currentOutputSnapshotRaw=null,re.currentOutputSnapshotResolved=null,re.onComplete&&re.onComplete(null,!1,re.currentInputSnapshot);else{aa("transaction failed: Data returned ",ke,re.path),re.status=0;const Qe=Kc(p.transactionQueueTree_,d),$t=fe(Qe)||[];let Kt;$t.push(re),$(Qe,$t),"object"==typeof ke&&null!==ke&&(0,ee.r3)(ke,".priority")?(Kt=(0,ee.DV)(ke,".priority"),(0,ee.hu)(fc(Kt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Kt=(je(p.serverSyncTree_,d)||Wn.EMPTY_NODE).getPriority().val();const an=on(p),ti=pe(ke,Kt),Ii=Ko(ti,ye,an);re.currentOutputSnapshotRaw=ti,re.currentOutputSnapshotResolved=Ii,re.currentWriteId=Bl(p);const ss=co(p.serverSyncTree_,d,Ii,re.currentWriteId,re.applyLocally);Bs(p.eventQueue_,d,ss),ou(p,p.transactionQueueTree_)}}(p._repo,p._path,d,(ke,Qe,$t)=>{let Kt=null;ke?j.reject(ke):(Kt=new tr($t,new dr(p._repo,p._path),Tr),j.resolve(new Yh(Qe,Kt)))},ye,O),j.promise}(this._delegate,d,{applyLocally:w}).then(j=>new _h(j.committed,new gu(this.database,j.snapshot)));return h&&O.then(j=>h(null,j.committed,j.snapshot),j=>h(j,!1,null)),O}setPriority(d,h){(0,ee.Dv)("Reference.setPriority",1,2,arguments.length),(0,ee.Wj)("Reference.setPriority","onComplete",h,!0);const w=function bc(p,d){p=(0,ee.m9)(p),ga("setPriority",p._path),tu("setPriority",d,!1);const h=new ee.BH;return vc(p._repo,Cr(p._path,".priority"),d,null,h.wrapCallback(()=>{})),h.promise}(this._delegate,d);return h&&w.then(()=>h(null),O=>h(O)),w}push(d,h){(0,ee.Dv)("Reference.push",0,2,arguments.length),(0,ee.Wj)("Reference.push","onComplete",h,!0);const w=function Di(p,d){p=(0,ee.m9)(p),ga("push",p._path),Co("push",d,p._path,!0);const h=St(p._repo),w=Aa(h),O=Ao(p,w),j=Ao(p,w);let re;return re=null!=d?Qc(j,d).then(()=>j):Promise.resolve(j),O.then=re.then.bind(re),O.catch=re.then.bind(re,void 0),O}(this._delegate,d),O=w.then(re=>new ks(this.database,re));h&&O.then(()=>h(null),re=>h(re));const j=new ks(this.database,w);return j.then=O.then.bind(O),j.catch=O.catch.bind(O,void 0),j}onDisconnect(){return ga("Reference.onDisconnect",this._delegate._path),new Vd(new Bn(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class _u{constructor(d,h){this._delegate=d,this.app=h,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Uc,forceLongPolling:hd}}useEmulator(d,h,w={}){!function Pd(p,d,h,w={}){(p=(0,ee.m9)(p))._checkNotDeleted("useEmulator"),p._instanceStarted&&Ci("Cannot call useEmulator() after instance has already been initialized.");const O=p._repoInternal;let j;if(O.repoInfo_.nodeAdmin)w.mockUserToken&&Ci('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),j=new qn(qn.OWNER);else if(w.mockUserToken){const re="string"==typeof w.mockUserToken?w.mockUserToken:(0,ee.Sg)(w.mockUserToken,p.app.options.projectId);j=new qn(re)}!function kd(p,d,h,w){p.repoInfo_=new _t(`${d}:${h}`,!1,p.repoInfo_.namespace,p.repoInfo_.webSocketOnly,p.repoInfo_.nodeAdmin,p.repoInfo_.persistenceKey,p.repoInfo_.includeNamespaceInQueryParams),w&&(p.authTokenProvider_=w)}(O,d,h,j)}(this._delegate,d,h,w)}ref(d){if((0,ee.Dv)("database.ref",0,1,arguments.length),d instanceof ks){const h=Wo(this._delegate,d.toString());return new ks(this,h)}{const h=Kl(this._delegate,d);return new ks(this,h)}}refFromURL(d){(0,ee.Dv)("database.refFromURL",1,1,arguments.length);const w=Wo(this._delegate,d);return new ks(this,w)}goOffline(){return(0,ee.Dv)("database.goOffline",0,0,arguments.length),function fh(p){(p=(0,ee.m9)(p))._checkNotDeleted("goOffline"),qc(p._repo)}(this._delegate)}goOnline(){return(0,ee.Dv)("database.goOnline",0,0,arguments.length),function Nd(p){(p=(0,ee.m9)(p))._checkNotDeleted("goOnline"),function Zu(p){p.persistentConnection_&&p.persistentConnection_.resume(I)}(p._repo)}(this._delegate)}}_u.ServerValue={TIMESTAMP:function Zh(){return qu}(),increment:p=>function qh(p){return{".sv":{increment:p}}}(p)};var Sl=Object.freeze({__proto__:null,initStandalone:function Yu({app:p,url:d,version:h,customAuthImpl:w,namespace:O,nodeAdmin:j=!1}){yt(h);const re=new nt.zt("auth-internal",new nt.H0("database-standalone"));return re.setComponent(new nt.wA("auth-internal",()=>w,"PRIVATE")),{instance:new _u(Gh(p,re,void 0,d,j),p),namespace:O}}});const Rc=_u.ServerValue;!function pd(p){p.INTERNAL.registerComponent(new nt.wA("database-compat",(d,{instanceIdentifier:h})=>{const w=d.getProvider("app-compat").getImmediate(),O=d.getProvider("database").getImmediate({identifier:h});return new _u(O,w)},"PUBLIC").setServiceProps({Reference:ks,Query:Is,Database:_u,DataSnapshot:gu,enableLogging:Wh,INTERNAL:Sl,ServerValue:Rc}).setMultipleInstances(!0)),p.registerVersion("@firebase/database-compat","0.2.5")}(we.Z);var yu=Q(1205),yh=Q(440),Qu=Q(127);function y(p){return null==p}function V(p){return"function"==typeof p.set}function s(p,d){return V(d)?d:p.ref(d)}function u(p,d){if(function xu(p){return"string"==typeof p}(p))return d.stringCase();if(V(p))return d.firebaseCase();if(function vu(p){return"function"==typeof p.exportVal}(p))return d.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof p)}function b(p,d,h="on",w=i.z){return new se.y(O=>{let j=null;return j=p[h](d,(re,ye)=>{w.schedule(()=>{O.next({snapshot:re,prevKey:ye})}),"once"===h&&w.schedule(()=>O.complete())},re=>{w.schedule(()=>O.error(re))}),"on"===h?{unsubscribe(){null!=j&&p.off(d,j)}}:{unsubscribe(){}}}).pipe((0,Ee.U)(O=>{const{snapshot:j,prevKey:re}=O;let ye=null;return j.exists()&&(ye=j.key),{type:d,payload:j,prevKey:re,key:ye}}),(0,Oe.B)())}function Ce(p,d){const h=p.length;for(let w=0;w<h;w++)if(p[w].payload.key===d)return w;return-1}function Mt(p,d){const{payload:h,prevKey:w,key:O}=d,j=Ce(p,O),re=function et(p,d){if(y(d))return 0;{const h=Ce(p,d);return-1===h?p.length:h+1}}(p,w);switch(d.type){case"value":if(d.payload&&d.payload.exists()){let ye=null;d.payload.forEach(ke=>{const Qe={payload:ke,type:"value",prevKey:ye,key:ke.key};return ye=ke.key,p=[...p,Qe],!1})}return p;case"child_added":if(j>-1){const ye=p[j-1];(ye&&ye.key||null)!==w&&(p=p.filter(ke=>ke.payload.key!==h.key)).splice(re,0,d)}else{if(null==w)return[d,...p];(p=p.slice()).splice(re,0,d)}return p;case"child_removed":return p.filter(ye=>ye.payload.key!==h.key);case"child_changed":return p.map(ye=>ye.payload.key===O?d:ye);case"child_moved":if(j>-1){const ye=p.splice(j,1)[0];return(p=p.slice()).splice(re,0,ye),p}return p;default:return p}}function fn(p){return(y(p)||0===p.length)&&(p=["child_added","child_removed","child_changed","child_moved"]),p}function wn(p,d,h){return function x(p,d,h){return b(p,"value","once",h).pipe((0,Me.w)(w=>{const O=[(0,ge.of)(w)];return d.forEach(j=>O.push(b(p,j,"on",h))),(0,Ke.T)(...O).pipe((0,rt.R)(Mt,[]))}),(0,Re.x)())}(p,d=fn(d),h)}function wi(p,d,h){const w=(d=fn(d)).map(O=>b(p,O,"on",h));return(0,Ke.T)(...w)}function Dr(p,d){return function(w,O){return u(w,{stringCase:()=>p.child(w)[d](O),firebaseCase:()=>w[d](O),snapshotCase:()=>w.ref[d](O)})}}function yr(p){return function(h){return h?u(h,{stringCase:()=>p.child(h).remove(),firebaseCase:()=>h.remove(),snapshotCase:()=>h.ref.remove()}):p.remove()}}function qo(p,d){return function(){return b(p,"value","on",d)}}const Ia=new g.OlP("angularfire2.realtimeDatabaseURL"),Ul=new g.OlP("angularfire2.database.use-emulator");let Hc=(()=>{class p{constructor(h,w,O,j,re,ye,ke,Qe,$t,Kt,an,ti,Ii,ss,ml){this.schedulers=ye;const oc=ke,lu=(0,qt.on)(h,re,w);Qe&&(0,yu.nw)(lu,re,$t,an,ti,Ii,Kt,ss),this.database=(0,qt.cc)(`${lu.name}.database.${O}`,"AngularFireDatabase",lu.name,()=>{const cu=re.runOutsideAngular(()=>lu.database(O||void 0));return oc&&cu.useEmulator(...oc),cu},[oc])}list(h,w){const O=this.schedulers.ngZone.runOutsideAngular(()=>s(this.database,h));let j=O;return w&&(j=w(O)),function Zo(p,d){const h=d.schedulers.outsideAngular,w=d.schedulers.ngZone.run(()=>p.ref);return{query:p,update:Dr(w,"update"),set:Dr(w,"set"),push:O=>w.push(O),remove:yr(w),snapshotChanges:O=>wn(p,O,h).pipe(ot.iC),stateChanges:O=>wi(p,O,h).pipe(ot.iC),auditTrail:O=>function hr(p,d,h){return function ys(p,d,h){return function Pi(p,d){return b(p,"value","on",d).pipe((0,Ee.U)(h=>{let w;return h.payload.forEach(O=>(w=O.key,!1)),{data:h,lastKeyToLoad:w}}))}(p,h).pipe(function Dt(...p){const d=(0,Wt.jO)(p);return(0,Se.e)((h,w)=>{const O=p.length,j=new Array(O);let re=p.map(()=>!1),ye=!1;for(let ke=0;ke<O;ke++)(0,kt.Xf)(p[ke]).subscribe((0,Ge.x)(w,Qe=>{j[ke]=Qe,!ye&&!re[ke]&&(re[ke]=!0,(ye=re.every(dt.y))&&(re=null))},wt.Z));h.subscribe((0,Ge.x)(w,ke=>{if(ye){const Qe=[ke,...j];w.next(d?d(...Qe):Qe)}}))})}(d),(0,Ee.U)(([O,j])=>{const re=O.lastKeyToLoad,ye=j.map(ke=>ke.key);return{actions:j,lastKeyToLoad:re,loadedKeys:ye}}),function bt(p){return(0,Se.e)((d,h)=>{let w=!1,O=0;d.subscribe((0,Ge.x)(h,j=>(w||(w=!p(j,O++)))&&h.next(j)))})}(O=>-1===O.loadedKeys.indexOf(O.lastKeyToLoad)),(0,Ee.U)(O=>O.actions))}(p,wi(p,d).pipe((0,rt.R)((O,j)=>[...O,j],[])),h)}(p,O,h).pipe(ot.iC),valueChanges:(O,j)=>wn(p,O,h).pipe((0,Ee.U)(ye=>ye.map(ke=>j&&j.idField?Object.assign(Object.assign({},ke.payload.val()),{[j.idField]:ke.key}):ke.payload.val())),ot.iC)}}(j,this)}object(h){return function Mo(p,d){return{query:p,snapshotChanges:()=>qo(p,d.schedulers.outsideAngular)().pipe(ot.iC),update:h=>p.ref.update(h),set:h=>p.ref.set(h),remove:()=>p.ref.remove(),valueChanges:()=>qo(p,d.schedulers.outsideAngular)().pipe(ot.iC,(0,Ee.U)(w=>w.payload.exists()?w.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>s(this.database,h)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return p.\u0275fac=function(h){return new(h||p)(g.LFG(qt.Dh),g.LFG(qt.xv,8),g.LFG(Ia,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(ot.HU),g.LFG(Ul,8),g.LFG(yu.zQ,8),g.LFG(yu.Qv,8),g.LFG(yu.L6,8),g.LFG(yu._Q,8),g.LFG(yu.rT,8),g.LFG(yu.lh,8),g.LFG(yu.f7,8),g.LFG(yh.nm,8))},p.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"any"}),p})(),md=(()=>{class p{constructor(){Qu.Z.registerVersion("angularfire",ot.q4.full,"rtdb-compat")}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275mod=g.oAB({type:p}),p.\u0275inj=g.cJS({providers:[Hc]}),p})()},7407:(Sn,Ct,Q)=>{Q.d(Ct,{ST:()=>Pf,yb:()=>Dl});var g=Q(4650),i=Q(4986),se=Q(9751),ge=Q(8996),Ke=Q(9646),Ee=Q(5813),Oe=Q(8675),Me=Q(4482),rt=Q(5403);function Re(){return(0,Me.e)((o,e)=>{let t,l=!1;o.subscribe((0,rt.x)(e,f=>{const v=t;t=f,l&&e.next([v,f]),l=!0}))})}var ee,Se=Q(4004),Ge=Q(5026),kt=Q(1884),dt=Q(9300),wt=Q(2011),Wt=Q(6895),bt=(Q(5881),Q(3942)),ot=Q(5861),qt=Q(9681),Be=Q(4859),we=Q(1877),nt=Q(2090),Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xe={},pt=pt||{},Ue=Xe||self;function st(){}function Et(o){var e=typeof o;return"array"==(e="object"!=e?e:o?Array.isArray(o)?"array":e:"null")||"object"==e&&"number"==typeof o.length}function yt(o){var e=typeof o;return"object"==e&&null!=o||"function"==e}var rn="closure_uid_"+(1e9*Math.random()>>>0),gn=0;function kn(o,e,t){return o.call.apply(o.bind,arguments)}function Pn(o,e,t){if(!o)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var f=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(f,l),o.apply(e,f)}}return function(){return o.apply(e,arguments)}}function Gt(o,e,t){return(Gt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kn:Pn).apply(null,arguments)}function di(o,e){var t=Array.prototype.slice.call(arguments,1);return function(){var l=t.slice();return l.push.apply(l,arguments),o.apply(this,l)}}function Un(o,e){function t(){}t.prototype=e.prototype,o.Z=e.prototype,o.prototype=new t,o.prototype.constructor=o,o.Vb=function(l,f,v){for(var S=Array(arguments.length-2),B=2;B<arguments.length;B++)S[B-2]=arguments[B];return e.prototype[f].apply(l,S)}}function xt(){this.s=this.s,this.o=this.o}var He={};xt.prototype.s=!1,xt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var o=function Qt(o){return Object.prototype.hasOwnProperty.call(o,rn)&&o[rn]||(o[rn]=++gn)}(this);delete He[o]}},xt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vt=Array.prototype.indexOf?function(o,e){return Array.prototype.indexOf.call(o,e,void 0)}:function(o,e){if("string"==typeof o)return"string"!=typeof e||1!=e.length?-1:o.indexOf(e,0);for(let t=0;t<o.length;t++)if(t in o&&o[t]===e)return t;return-1},un=Array.prototype.forEach?function(o,e,t){Array.prototype.forEach.call(o,e,t)}:function(o,e,t){const l=o.length,f="string"==typeof o?o.split(""):o;for(let v=0;v<l;v++)v in f&&e.call(t,f[v],v,o)};function Wi(o){return Array.prototype.concat.apply([],arguments)}function Ci(o){const e=o.length;if(0<e){const t=Array(e);for(let l=0;l<e;l++)t[l]=o[l];return t}return[]}function Ei(o){return/^[\s\xa0]*$/.test(o)}var Ui,Zi=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function oi(o,e){return-1!=o.indexOf(e)}function Ki(o,e){return o<e?-1:o>e?1:0}e:{var yi=Ue.navigator;if(yi){var Jt=yi.userAgent;if(Jt){Ui=Jt;break e}}Ui=""}function Ni(o,e,t){for(const l in o)e.call(t,o[l],l,o)}function Hi(o){const e={};for(const t in o)e[t]=o[t];return e}var Qi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jr(o,e){let t,l;for(let f=1;f<arguments.length;f++){for(t in l=arguments[f],l)o[t]=l[t];for(let v=0;v<Qi.length;v++)t=Qi[v],Object.prototype.hasOwnProperty.call(l,t)&&(o[t]=l[t])}}function sr(o){return sr[" "](o),o}sr[" "]=st;var ji,o,br=oi(Ui,"Opera"),Ji=oi(Ui,"Trident")||oi(Ui,"MSIE"),Kn=oi(Ui,"Edge"),Gn=Kn||Ji,fi=oi(Ui,"Gecko")&&!(oi(Ui.toLowerCase(),"webkit")&&!oi(Ui,"Edge"))&&!(oi(Ui,"Trident")||oi(Ui,"MSIE"))&&!oi(Ui,"Edge"),Ar=oi(Ui.toLowerCase(),"webkit")&&!oi(Ui,"Edge");function Mn(){var o=Ue.document;return o?o.documentMode:void 0}e:{var ri="",or=(o=Ui,fi?/rv:([^\);]+)(\)|;)/.exec(o):Kn?/Edge\/([\d\.]+)/.exec(o):Ji?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):Ar?/WebKit\/(\S+)/.exec(o):br?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(or&&(ri=or?or[1]:""),Ji){var ai=Mn();if(null!=ai&&ai>parseFloat(ri)){ji=String(ai);break e}}ji=ri}var vs={};var ze=Ue.document&&Ji&&(Mn()||parseInt(ji,10))||void 0,it=function(){if(!Ue.addEventListener||!Object.defineProperty)return!1;var o=!1,e=Object.defineProperty({},"passive",{get:function(){o=!0}});try{Ue.addEventListener("test",st,e),Ue.removeEventListener("test",st,e)}catch{}return o}();function Ye(o,e){this.type=o,this.g=this.target=e,this.defaultPrevented=!1}function Zt(o,e){if(Ye.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var t=this.type=o.type,l=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=e,e=o.relatedTarget){if(fi){e:{try{sr(e.nodeName);var f=!0;break e}catch{}f=!1}f||(e=null)}}else"mouseover"==t?e=o.fromElement:"mouseout"==t&&(e=o.toElement);this.relatedTarget=e,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:mn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Zt.Z.h.call(this)}}Ye.prototype.h=function(){this.defaultPrevented=!0},Un(Zt,Ye);var mn={2:"touch",3:"pen",4:"mouse"};Zt.prototype.h=function(){Zt.Z.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Rn="closure_listenable_"+(1e6*Math.random()|0),zi=0;function Xi(o,e,t,l,f){this.listener=o,this.proxy=null,this.src=e,this.type=t,this.capture=!!l,this.ia=f,this.key=++zi,this.ca=this.fa=!1}function Hr(o){o.ca=!0,o.listener=null,o.proxy=null,o.src=null,o.ia=null}function _t(o){this.src=o,this.g={},this.h=0}function We(o,e){var t=e.type;if(t in o.g){var v,l=o.g[t],f=vt(l,e);(v=0<=f)&&Array.prototype.splice.call(l,f,1),v&&(Hr(e),0==o.g[t].length&&(delete o.g[t],o.h--))}}function tt(o,e,t,l){for(var f=0;f<o.length;++f){var v=o[f];if(!v.ca&&v.listener==e&&v.capture==!!t&&v.ia==l)return f}return-1}_t.prototype.add=function(o,e,t,l,f){var v=o.toString();(o=this.g[v])||(o=this.g[v]=[],this.h++);var S=tt(o,e,l,f);return-1<S?(e=o[S],t||(e.fa=!1)):((e=new Xi(e,this.src,v,!!l,f)).fa=t,o.push(e)),e};var zt="closure_lm_"+(1e6*Math.random()|0),_n={};function $n(o,e,t,l,f){if(l&&l.once)return Ve(o,e,t,l,f);if(Array.isArray(e)){for(var v=0;v<e.length;v++)$n(o,e[v],t,l,f);return null}return t=fr(t),o&&o[Rn]?o.N(e,t,yt(l)?!!l.capture:!!l,f):Yn(o,e,t,!1,l,f)}function Yn(o,e,t,l,f,v){if(!e)throw Error("Invalid event type");var S=yt(f)?!!f.capture:!!f,B=vi(o);if(B||(o[zt]=B=new _t(o)),(t=B.add(e,t,l,S,v)).proxy)return t;if(l=function Ne(){var e=En;return function o(t){return e.call(o.src,o.listener,t)}}(),t.proxy=l,l.src=o,l.listener=t,o.addEventListener)it||(f=S),void 0===f&&(f=!1),o.addEventListener(e.toString(),l,f);else if(o.attachEvent)o.attachEvent(It(e.toString()),l);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(l)}return t}function Ve(o,e,t,l,f){if(Array.isArray(e)){for(var v=0;v<e.length;v++)Ve(o,e[v],t,l,f);return null}return t=fr(t),o&&o[Rn]?o.O(e,t,yt(l)?!!l.capture:!!l,f):Yn(o,e,t,!0,l,f)}function De(o,e,t,l,f){if(Array.isArray(e))for(var v=0;v<e.length;v++)De(o,e[v],t,l,f);else l=yt(l)?!!l.capture:!!l,t=fr(t),o&&o[Rn]?(o=o.i,(e=String(e).toString())in o.g&&-1<(t=tt(v=o.g[e],t,l,f))&&(Hr(v[t]),Array.prototype.splice.call(v,t,1),0==v.length&&(delete o.g[e],o.h--))):o&&(o=vi(o))&&(e=o.g[e.toString()],o=-1,e&&(o=tt(e,t,l,f)),(t=-1<o?e[o]:null)&&ht(t))}function ht(o){if("number"!=typeof o&&o&&!o.ca){var e=o.src;if(e&&e[Rn])We(e.i,o);else{var t=o.type,l=o.proxy;e.removeEventListener?e.removeEventListener(t,l,o.capture):e.detachEvent?e.detachEvent(It(t),l):e.addListener&&e.removeListener&&e.removeListener(l),(t=vi(e))?(We(t,o),0==t.h&&(t.src=null,e[zt]=null)):Hr(o)}}}function It(o){return o in _n?_n[o]:_n[o]="on"+o}function En(o,e){if(o.ca)o=!0;else{e=new Zt(e,this);var t=o.listener,l=o.ia||o.src;o.fa&&ht(o),o=t.call(l,e)}return o}function vi(o){return(o=o[zt])instanceof _t?o:null}var Si="__closure_events_fn_"+(1e9*Math.random()>>>0);function fr(o){return"function"==typeof o?o:(o[Si]||(o[Si]=function(e){return o.handleEvent(e)}),o[Si])}function wr(){xt.call(this),this.i=new _t(this),this.P=this,this.I=null}function In(o,e){var t,l=o.I;if(l)for(t=[];l;l=l.I)t.push(l);if(o=o.P,l=e.type||e,"string"==typeof e)e=new Ye(e,o);else if(e instanceof Ye)e.target=e.target||o;else{var f=e;Jr(e=new Ye(l,o),f)}if(f=!0,t)for(var v=t.length-1;0<=v;v--){var S=e.g=t[v];f=zs(S,l,!0,e)&&f}if(f=zs(S=e.g=o,l,!0,e)&&f,f=zs(S,l,!1,e)&&f,t)for(v=0;v<t.length;v++)f=zs(S=e.g=t[v],l,!1,e)&&f}function zs(o,e,t,l){if(!(e=o.i.g[String(e)]))return!0;e=e.concat();for(var f=!0,v=0;v<e.length;++v){var S=e[v];if(S&&!S.ca&&S.capture==t){var B=S.listener,oe=S.ia||S.src;S.fa&&We(o.i,S),f=!1!==B.call(oe,l)&&f}}return f&&!l.defaultPrevented}Un(wr,xt),wr.prototype[Rn]=!0,wr.prototype.removeEventListener=function(o,e,t,l){De(this,o,e,t,l)},wr.prototype.M=function(){if(wr.Z.M.call(this),this.i){var e,o=this.i;for(e in o.g){for(var t=o.g[e],l=0;l<t.length;l++)Hr(t[l]);delete o.g[e],o.h--}}this.I=null},wr.prototype.N=function(o,e,t,l){return this.i.add(String(o),e,!1,t,l)},wr.prototype.O=function(o,e,t,l){return this.i.add(String(o),e,!0,t,l)};var Ss=Ue.JSON.stringify;function ya(){var o=ja;let e=null;return o.g&&(e=o.g,o.g=o.g.next,o.g||(o.h=null),e.next=null),e}var Gi,Kr=new class{constructor(o,e){this.i=o,this.j=e,this.h=0,this.g=null}get(){let o;return 0<this.h?(this.h--,o=this.g,this.g=o.next,o.next=null):o=this.i(),o}}(()=>new ls,o=>o.reset());class ls{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ds(o){Ue.setTimeout(()=>{throw o},0)}function no(o,e){Gi||function fo(){var o=Ue.Promise.resolve(void 0);Gi=function(){o.then(Gs)}}(),er||(Gi(),er=!0),ja.add(o,e)}var er=!1,ja=new class ho{constructor(){this.h=this.g=null}add(e,t){const l=Kr.get();l.set(e,t),this.h?this.h.next=l:this.g=l,this.h=l}};function Gs(){for(var o;o=ya();){try{o.h.call(o.g)}catch(t){Ds(t)}var e=Kr;e.j(o),100>e.h&&(e.h++,o.next=e.g,e.g=o)}er=!1}function xs(o,e){wr.call(this),this.h=o||1,this.g=e||Ue,this.j=Gt(this.kb,this),this.l=Date.now()}function $s(o){o.da=!1,o.S&&(o.g.clearTimeout(o.S),o.S=null)}function Ps(o,e,t){if("function"==typeof o)t&&(o=Gt(o,t));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=Gt(o.handleEvent,o)}return 2147483647<Number(e)?-1:Ue.setTimeout(o,e||0)}function po(o){o.g=Ps(()=>{o.g=null,o.i&&(o.i=!1,po(o))},o.j);const e=o.h;o.h=null,o.m.apply(null,e)}Un(xs,wr),(ee=xs.prototype).da=!1,ee.S=null,ee.kb=function(){if(this.da){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-o):(this.S&&(this.g.clearTimeout(this.S),this.S=null),In(this,"tick"),this.da&&($s(this),this.start()))}},ee.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ee.M=function(){xs.Z.M.call(this),$s(this),delete this.g};class Ns extends xt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:po(this)}M(){super.M(),this.g&&(Ue.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(o){xt.call(this),this.h=o,this.g={}}Un(Rr,xt);var Qo=[];function Xr(o,e,t,l){Array.isArray(t)||(t&&(Qo[0]=t.toString()),t=Qo);for(var f=0;f<t.length;f++){var v=$n(e,t[f],l||o.handleEvent,!1,o.h||o);if(!v)break;o.g[v.key]=v}}function Wr(o){Ni(o.g,function(e,t){this.g.hasOwnProperty(t)&&ht(e)},o),o.g={}}function gi(){this.g=!0}function us(o,e,t,l){o.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Hl(o,e){if(!o.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(o=0;o<t.length;o++)if(Array.isArray(t[o])){var l=t[o];if(!(2>l.length)){var f=l[1];if(Array.isArray(f)&&!(1>f.length)){var v=f[0];if("noop"!=v&&"stop"!=v&&"close"!=v)for(var S=1;S<f.length;S++)f[S]=""}}}return Ss(t)}catch{return e}}(o,t)+(l?" "+l:"")})}Rr.prototype.M=function(){Rr.Z.M.call(this),Wr(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gi.prototype.Aa=function(){this.g=!1},gi.prototype.info=function(){};var Eo={},va=null;function mo(){return va=va||new wr}function io(o){Ye.call(this,Eo.Ma,o)}function mt(o){const e=mo();In(e,new io(e,o))}function ut(o,e){Ye.call(this,Eo.STAT_EVENT,o),this.stat=e}function Tt(o){const e=mo();In(e,new ut(e,o))}function Pt(o,e){Ye.call(this,Eo.Na,o),this.size=e}function Yt(o,e){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return Ue.setTimeout(function(){o()},e)}Eo.Ma="serverreachability",Un(io,Ye),Eo.STAT_EVENT="statevent",Un(ut,Ye),Eo.Na="timingevent",Un(Pt,Ye);var tn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},si={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function li(){}function go(){}li.prototype.h=null;var _i,Ks={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ds(){Ye.call(this,"d")}function Cr(){Ye.call(this,"c")}function jr(){}function ko(o,e,t,l){this.l=o,this.j=e,this.m=t,this.X=l||1,this.V=new Rr(this),this.P=Er,this.W=new xs(o=Gn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Oo}function Oo(){this.i=null,this.g="",this.h=!1}Un(ds,Ye),Un(Cr,Ye),Un(jr,li),jr.prototype.g=function(){return new XMLHttpRequest},jr.prototype.i=function(){return{}},_i=new jr;var Er=45e3,ro={},_o={};function sl(o,e,t){o.K=1,o.v=la(So(e)),o.s=t,o.U=!0,Xo(o,null)}function Xo(o,e){o.F=Date.now(),za(o),o.A=So(o.v);var t=o.A,l=o.X;Array.isArray(l)||(l=[String(l)]),so(t.h,"t",l),o.C=0,t=o.l.H,o.h=new Oo,o.g=qa(o.l,t?e:null,!o.s),0<o.O&&(o.L=new Ns(Gt(o.Ia,o,o.g),o.O)),Xr(o.V,o.g,"readystatechange",o.gb),e=o.H?Hi(o.H):{},o.s?(o.u||(o.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.s,e)):(o.u="GET",o.g.ea(o.A,o.u,null,e)),mt(1),function Da(o,e,t,l,f,v){o.info(function(){if(o.g)if(v)for(var S="",B=v.split("&"),oe=0;oe<B.length;oe++){var ue=B[oe].split("=");if(1<ue.length){var Te=ue[0];ue=ue[1];var at=Te.split("_");S=2<=at.length&&"type"==at[1]?S+(Te+"=")+ue+"&":S+(Te+"=redacted&")}}else S=null;else S=v;return"XMLHTTP REQ ("+l+") [attempt "+f+"]: "+e+"\n"+t+"\n"+S})}(o.j,o.u,o.A,o.m,o.X,o.s)}function es(o){return!!o.g&&"GET"==o.u&&2!=o.K&&o.l.Ba}function ea(o,e,t){let f,l=!0;for(;!o.I&&o.C<t.length;){if(f=yo(o,t),f==_o){4==e&&(o.o=4,Tt(14),l=!1),us(o.j,o.m,null,"[Incomplete Response]");break}if(f==ro){o.o=4,Tt(15),us(o.j,o.m,t,"[Invalid Chunk]"),l=!1;break}us(o.j,o.m,f,null),Zr(o,f)}es(o)&&f!=_o&&f!=ro&&(o.h.g="",o.C=0),4!=e||0!=t.length||o.h.h||(o.o=1,Tt(16),l=!1),o.i=o.i&&l,l?0<t.length&&!o.aa&&(o.aa=!0,(e=o.l).g==o&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ua(e),e.L=!0,Tt(11))):(us(o.j,o.m,t,"[Invalid Chunked Response]"),Po(o),Or(o))}function yo(o,e){var t=o.C,l=e.indexOf("\n",t);return-1==l?_o:(t=Number(e.substring(t,l)),isNaN(t)?ro:(l+=1)+t>e.length?_o:(e=e.substr(l,t),o.C=l+t,e))}function za(o){o.Y=Date.now()+o.P,As(o,o.P)}function As(o,e){if(null!=o.B)throw Error("WatchDog timer not null");o.B=Yt(Gt(o.eb,o),e)}function vo(o){o.B&&(Ue.clearTimeout(o.B),o.B=null)}function Or(o){0==o.l.G||o.I||Ka(o.l,o)}function Po(o){vo(o);var e=o.L;e&&"function"==typeof e.na&&e.na(),o.L=null,$s(o.W),Wr(o.V),o.g&&(e=o.g,o.g=null,e.abort(),e.na())}function Zr(o,e){try{var t=o.l;if(0!=t.G&&(t.g==o||Ln(t.i,o)))if(t.I=o.N,!o.J&&Ln(t.i,o)&&3==t.G){try{var l=t.Ca.g.parse(e)}catch{l=null}if(Array.isArray(l)&&3==l.length){var f=l;if(0==f[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<o.F))break e;Gr(t),Li(t)}ao(t),Tt(18)}}else t.ta=f[1],0<t.ta-t.U&&37500>f[2]&&t.N&&0==t.A&&!t.v&&(t.v=Yt(Gt(t.ab,t),6e3));if(1>=Lt(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else da(t,11)}else if((o.J||t.g==o)&&Gr(t),!Ei(e))for(f=t.Ca.g.parse(e),e=0;e<f.length;e++){let ue=f[e];if(t.U=ue[0],ue=ue[1],2==t.G)if("c"==ue[0]){t.J=ue[1],t.la=ue[2];const Te=ue[3];null!=Te&&(t.ma=Te,t.h.info("VER="+t.ma));const at=ue[4];null!=at&&(t.za=at,t.h.info("SVER="+t.za));const Vt=ue[5];null!=Vt&&"number"==typeof Vt&&0<Vt&&(t.K=l=1.5*Vt,t.h.info("backChannelRequestTimeoutMs_="+l)),l=t;const ln=o.g;if(ln){const dn=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dn){var v=l.i;!v.g&&(oi(dn,"spdy")||oi(dn,"quic")||oi(dn,"h2"))&&(v.j=v.l,v.g=new Set,v.h&&(zr(v,v.h),v.h=null))}if(l.D){const zn=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;zn&&(l.sa=zn,mr(l.F,l.D,zn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-o.F,t.h.info("Handshake RTT: "+t.O+"ms"));var S=o;if((l=t).oa=Za(l,l.H?l.la:null,l.W),S.J){oo(l.i,S);var B=S,oe=l.K;oe&&B.setTimeout(oe),B.B&&(vo(B),za(B)),l.g=S}else Do(l);0<t.l.length&&gs(t)}else"stop"!=ue[0]&&"close"!=ue[0]||da(t,7);else 3==t.G&&("stop"==ue[0]||"close"==ue[0]?"stop"==ue[0]?da(t,7):nr(t):"noop"!=ue[0]&&t.j&&t.j.wa(ue),t.A=0)}mt(4)}catch{}}function Ai(o,e){if(o.forEach&&"function"==typeof o.forEach)o.forEach(e,void 0);else if(Et(o)||"string"==typeof o)un(o,e,void 0);else{if(o.T&&"function"==typeof o.T)var t=o.T();else if(o.R&&"function"==typeof o.R)t=void 0;else if(Et(o)||"string"==typeof o){t=[];for(var l=o.length,f=0;f<l;f++)t.push(f)}else for(f in t=[],l=0,o)t[l++]=f;l=function hs(o){if(o.R&&"function"==typeof o.R)return o.R();if("string"==typeof o)return o.split("");if(Et(o)){for(var e=[],t=o.length,l=0;l<t;l++)e.push(o[l]);return e}for(l in e=[],t=0,o)e[t++]=o[l];return e}(o),f=l.length;for(var v=0;v<f;v++)e.call(void 0,l[v],t&&t[v],o)}}function To(o,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var l=0;l<t;l+=2)this.set(arguments[l],arguments[l+1])}else if(o)if(o instanceof To)for(t=o.T(),l=0;l<t.length;l++)this.set(t[l],o.get(t[l]));else for(l in o)this.set(l,o[l])}function Pr(o){if(o.i!=o.g.length){for(var e=0,t=0;e<o.g.length;){var l=o.g[e];Bo(o.h,l)&&(o.g[t++]=l),e++}o.g.length=t}if(o.i!=o.g.length){var f={};for(t=e=0;e<o.g.length;)Bo(f,l=o.g[e])||(o.g[t++]=l,f[l]=1),e++;o.g.length=t}}function Bo(o,e){return Object.prototype.hasOwnProperty.call(o,e)}(ee=ko.prototype).setTimeout=function(o){this.P=o},ee.gb=function(o){o=o.target;const e=this.L;e&&3==$e(o)?e.l():this.Ia(o)},ee.Ia=function(o){try{if(o==this.g)e:{const Te=$e(this.g);var e=this.g.Da();const at=this.g.ba();if(!(3>Te)&&(3!=Te||Gn||this.g&&(this.h.h||this.g.ga()||Rt(this.g)))){this.I||4!=Te||7==e||mt(8==e||0>=at?3:2),vo(this);var t=this.g.ba();this.N=t;t:if(es(this)){var l=Rt(this.g);o="";var f=l.length,v=4==$e(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Po(this),Or(this);var S="";break t}this.h.i=new Ue.TextDecoder}for(e=0;e<f;e++)this.h.h=!0,o+=this.h.i.decode(l[e],{stream:v&&e==f-1});l.splice(0,f),this.h.g+=o,this.C=0,S=this.h.g}else S=this.g.ga();if(this.i=200==t,function Jo(o,e,t,l,f,v,S){o.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+f+"]: "+e+"\n"+t+"\n"+v+" "+S})}(this.j,this.u,this.A,this.m,this.X,Te,t),this.i){if(this.$&&!this.J){t:{if(this.g){var B,oe=this.g;if((B=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ei(B)){var ue=B;break t}}ue=null}if(!(t=ue)){this.i=!1,this.o=3,Tt(12),Po(this),Or(this);break e}us(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Zr(this,t)}this.U?(ea(this,Te,S),Gn&&this.i&&3==Te&&(Xr(this.V,this.W,"tick",this.fb),this.W.start())):(us(this.j,this.m,S,null),Zr(this,S)),4==Te&&Po(this),this.i&&!this.I&&(4==Te?Ka(this.l,this):(this.i=!1,za(this)))}else 400==t&&0<S.indexOf("Unknown SID")?(this.o=3,Tt(12)):(this.o=0,Tt(13)),Po(this),Or(this)}}}catch{}},ee.fb=function(){if(this.g){var o=$e(this.g),e=this.g.ga();this.C<e.length&&(vo(this),ea(this,o,e),this.i&&4!=o&&za(this))}},ee.cancel=function(){this.I=!0,Po(this)},ee.eb=function(){this.B=null;const o=Date.now();0<=o-this.Y?(function rl(o,e){o.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(mt(3),Tt(17)),Po(this),this.o=2,Or(this)):As(this,this.Y-o)},(ee=To.prototype).R=function(){Pr(this);for(var o=[],e=0;e<this.g.length;e++)o.push(this.h[this.g[e]]);return o},ee.T=function(){return Pr(this),this.g.concat()},ee.get=function(o,e){return Bo(this.h,o)?this.h[o]:e},ee.set=function(o,e){Bo(this.h,o)||(this.i++,this.g.push(o)),this.h[o]=e},ee.forEach=function(o,e){for(var t=this.T(),l=0;l<t.length;l++){var f=t[l],v=this.get(f);o.call(e,v,f,this)}};var bo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lr(o,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,o instanceof lr){this.g=void 0!==e?e:o.g,fs(this,o.j),this.s=o.s,Ws(this,o.i),Yi(this,o.m),this.l=o.l,e=o.h;var t=new Fo;t.i=e.i,e.g&&(t.g=new To(e.g),t.h=e.h),xa(this,t),this.o=o.o}else o&&(t=String(o).match(bo))?(this.g=!!e,fs(this,t[1]||"",!0),this.s=cr(t[2]||""),Ws(this,t[3]||"",!0),Yi(this,t[4]),this.l=cr(t[5]||"",!0),xa(this,t[6]||"",!0),this.o=cr(t[7]||"")):(this.g=!!e,this.h=new Fo(null,this.g))}function So(o){return new lr(o)}function fs(o,e,t){o.j=t?cr(e,!0):e,o.j&&(o.j=o.j.replace(/:$/,""))}function Ws(o,e,t){o.i=t?cr(e,!0):e}function Yi(o,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);o.m=e}else o.m=null}function xa(o,e,t){e instanceof Fo?(o.h=e,function Wn(o,e){e&&!o.j&&(Zs(o),o.i=null,o.g.forEach(function(t,l){var f=l.toLowerCase();l!=f&&(Xt(this,l),so(this,f,t))},o)),o.j=e}(o.h,o.g)):(t||(e=Ti(e,Tr)),o.h=new Fo(e,o.g))}function mr(o,e,t){o.h.set(e,t)}function la(o){return mr(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function cr(o,e){return o?e?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ti(o,e,t){return"string"==typeof o?(o=encodeURI(o).replace(e,ol),t&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function ol(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}lr.prototype.toString=function(){var o=[],e=this.j;e&&o.push(Ti(e,lc,!0),":");var t=this.i;return(t||"file"==e)&&(o.push("//"),(e=this.s)&&o.push(Ti(e,lc,!0),"@"),o.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&o.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&o.push("/"),o.push(Ti(t,"/"==t.charAt(0)?Yl:Uo,!0))),(t=this.h.toString())&&o.push("?",t),(t=this.o)&&o.push("#",Ti(t,No)),o.join("")};var lc=/[#\/\?@]/g,Uo=/[#\?:]/g,Yl=/[#\?]/g,Tr=/[#\?@]/g,No=/#/g;function Fo(o,e){this.h=this.g=null,this.i=o||null,this.j=!!e}function Zs(o){o.g||(o.g=new To,o.h=0,o.i&&function Io(o,e){if(o){o=o.split("&");for(var t=0;t<o.length;t++){var l=o[t].indexOf("="),f=null;if(0<=l){var v=o[t].substring(0,l);f=o[t].substring(l+1)}else v=o[t];e(v,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}(o.i,function(e,t){o.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Xt(o,e){Zs(o),e=bs(o,e),Bo(o.g.h,e)&&(o.i=null,o.h-=o.g.get(e).length,Bo((o=o.g).h,e)&&(delete o.h[e],o.i--,o.g.length>2*o.i&&Pr(o)))}function ni(o,e){return Zs(o),e=bs(o,e),Bo(o.g.h,e)}function so(o,e,t){Xt(o,e),0<t.length&&(o.i=null,o.g.set(bs(o,e),Ci(t)),o.h+=t.length)}function bs(o,e){return e=String(e),o.j&&(e=e.toLowerCase()),e}function X(o){this.l=o||W,o=Ue.PerformanceNavigationTiming?0<(o=Ue.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(Ue.g&&Ue.g.Ea&&Ue.g.Ea()&&Ue.g.Ea().Zb),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ee=Fo.prototype).add=function(o,e){Zs(this),this.i=null,o=bs(this,o);var t=this.g.get(o);return t||this.g.set(o,t=[]),t.push(e),this.h+=1,this},ee.forEach=function(o,e){Zs(this),this.g.forEach(function(t,l){un(t,function(f){o.call(e,f,l,this)},this)},this)},ee.T=function(){Zs(this);for(var o=this.g.R(),e=this.g.T(),t=[],l=0;l<e.length;l++)for(var f=o[l],v=0;v<f.length;v++)t.push(e[l]);return t},ee.R=function(o){Zs(this);var e=[];if("string"==typeof o)ni(this,o)&&(e=Wi(e,this.g.get(bs(this,o))));else{o=this.g.R();for(var t=0;t<o.length;t++)e=Wi(e,o[t])}return e},ee.set=function(o,e){return Zs(this),this.i=null,ni(this,o=bs(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[e]),this.h+=1,this},ee.get=function(o,e){return o&&0<(o=this.R(o)).length?String(o[0]):e},ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var o=[],e=this.g.T(),t=0;t<e.length;t++){var l=e[t],f=encodeURIComponent(String(l));l=this.R(l);for(var v=0;v<l.length;v++){var S=f;""!==l[v]&&(S+="="+encodeURIComponent(String(l[v]))),o.push(S)}}return this.i=o.join("&")};var W=10;function pe(o){return!!o.h||!!o.g&&o.g.size>=o.j}function Lt(o){return o.h?1:o.g?o.g.size:0}function Ln(o,e){return o.h?o.h==e:!!o.g&&o.g.has(e)}function zr(o,e){o.g?o.g.add(e):o.h=e}function oo(o,e){o.h&&o.h==e?o.h=null:o.g&&o.g.has(e)&&o.g.delete(e)}function ps(o){if(null!=o.h)return o.i.concat(o.h.D);if(null!=o.g&&0!==o.g.size){let e=o.i;for(const t of o.g.values())e=e.concat(t.D);return e}return Ci(o.i)}function Yr(){}function ws(){this.g=new Yr}function Aa(o,e,t){const l=t||"";try{Ai(o,function(f,v){let S=f;yt(f)&&(S=Ss(f)),e.push(l+v+"="+encodeURIComponent(S))})}catch(f){throw e.push(l+"type="+encodeURIComponent("_badmap")),f}}function ta(o,e,t,l,f){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,f(l)}catch{}}function al(o){this.l=o.$b||null,this.j=o.ib||!1}function wa(o,e){wr.call(this),this.D=o,this.u=e,this.m=void 0,this.readyState=Ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}X.prototype.cancel=function(){if(this.i=ps(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const o of this.g.values())o.cancel();this.g.clear()}},Yr.prototype.stringify=function(o){return Ue.JSON.stringify(o,void 0)},Yr.prototype.parse=function(o){return Ue.JSON.parse(o,void 0)},Un(al,li),al.prototype.g=function(){return new wa(this.l,this.j)},al.prototype.i=function(o){return function(){return o}}({}),Un(wa,wr);var Ga=0;function $a(o){o.j.read().then(o.Sa.bind(o)).catch(o.ha.bind(o))}function Ca(o){o.readyState=4,o.l=null,o.j=null,o.A=null,Ma(o)}function Ma(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(ee=wa.prototype).open=function(o,e){if(this.readyState!=Ga)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=e,this.readyState=1,Ma(this)},ee.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(e.body=o),(this.D||Ue).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ca(this)),this.readyState=Ga},ee.Va=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ma(this)),this.g&&(this.readyState=3,Ma(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ue.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$a(this)}else o.text().then(this.Ua.bind(this),this.ha.bind(this))},ee.Sa=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var e=o.value?o.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!o.done}))&&(this.response=this.responseText+=e)}o.done?Ca(this):Ma(this),3==this.readyState&&$a(this)}},ee.Ua=function(o){this.g&&(this.response=this.responseText=o,Ca(this))},ee.Ta=function(o){this.g&&(this.response=o,Ca(this))},ee.ha=function(){this.g&&Ca(this)},ee.setRequestHeader=function(o,e){this.v.append(o,e)},ee.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},ee.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],e=this.h.entries();for(var t=e.next();!t.done;)o.push((t=t.value)[0]+": "+t[1]),t=e.next();return o.join("\r\n")},Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var na=Ue.JSON.parse;function ms(o){wr.call(this),this.headers=new To,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ca,this.K=this.L=!1}Un(ms,wr);var ca="",_l=/^https?$/i,Al=["POST","PUT"];function ll(o){return"content-type"==o.toLowerCase()}function Ml(o,e){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=e,o.m=5,z(o),Y(o)}function z(o){o.D||(o.D=!0,In(o,"complete"),In(o,"error"))}function le(o){if(o.h&&typeof pt<"u"&&(!o.C[1]||4!=$e(o)||2!=o.ba()))if(o.v&&4==$e(o))Ps(o.Fa,0,o);else if(In(o,"readystatechange"),4==$e(o)){o.h=!1;try{const B=o.ba();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var l;if(l=0===B){var f=String(o.H).match(bo)[1]||null;if(!f&&Ue.self&&Ue.self.location){var v=Ue.self.location.protocol;f=v.substr(0,v.length-1)}l=!_l.test(f?f.toLowerCase():"")}t=l}if(t)In(o,"complete"),In(o,"success");else{o.m=6;try{var S=2<$e(o)?o.g.statusText:""}catch{S=""}o.j=S+" ["+o.ba()+"]",z(o)}}finally{Y(o)}}}function Y(o,e){if(o.g){_e(o);const t=o.g,l=o.C[0]?st:null;o.g=null,o.C=null,e||In(o,"ready");try{t.onreadystatechange=l}catch{}}}function _e(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(Ue.clearTimeout(o.A),o.A=null)}function $e(o){return o.g?o.g.readyState:0}function Rt(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case ca:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Nn(o,e,t){e:{for(l in t){var l=!1;break e}l=!0}l||(t=function jt(o){let e="";return Ni(o,function(t,l){e+=l,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof o?null!=t&&encodeURIComponent(String(t)):mr(o,e,t))}function $i(o,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[o]||e}function Ir(o){this.za=0,this.l=[],this.h=new gi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$i("failFast",!1,o),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$i("baseRetryDelayMs",5e3,o),this.$a=$i("retryDelaySeedMs",1e4,o),this.Ya=$i("forwardChannelMaxRetries",2,o),this.ra=$i("forwardChannelRequestTimeoutMs",2e4,o),this.qa=o&&o.xmlHttpFactory||void 0,this.Ba=o&&o.Yb||!1,this.K=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.J="",this.i=new X(o&&o.concurrentRequestLimit),this.Ca=new ws,this.ja=o&&o.fastHandshake||!1,this.Ra=o&&o.Wb||!1,o&&o.Aa&&this.h.Aa(),o&&o.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&o&&o.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!o||!1!==o.Xb}function nr(o){if(qs(o),3==o.G){var e=o.V++,t=So(o.F);mr(t,"SID",o.J),mr(t,"RID",e),mr(t,"TYPE","terminate"),kr(o,t),(e=new ko(o,o.h,e,void 0)).K=2,e.v=la(So(t)),t=!1,Ue.navigator&&Ue.navigator.sendBeacon&&(t=Ue.navigator.sendBeacon(e.v.toString(),"")),!t&&Ue.Image&&((new Image).src=e.v,t=!0),t||(e.g=qa(e.l,null),e.g.ea(e.v)),e.F=Date.now(),za(e)}Ec(o)}function Li(o){o.g&&(ua(o),o.g.cancel(),o.g=null)}function qs(o){Li(o),o.u&&(Ue.clearTimeout(o.u),o.u=null),Gr(o),o.i.cancel(),o.m&&("number"==typeof o.m&&Ue.clearTimeout(o.m),o.m=null)}function Sr(o,e){o.l.push(new class{constructor(o,e){this.h=o,this.g=e}}(o.Za++,e)),3==o.G&&gs(o)}function gs(o){pe(o.i)||o.m||(o.m=!0,no(o.Ha,o),o.C=0)}function Ra(o,e){var t;t=e?e.m:o.V++;const l=So(o.F);mr(l,"SID",o.J),mr(l,"RID",t),mr(l,"AID",o.U),kr(o,l),o.o&&o.s&&Nn(l,o.o,o.s),t=new ko(o,o.h,t,o.C+1),null===o.o&&(t.H=o.s),e&&(o.l=e.D.concat(o.l)),e=ka(o,t,1e3),t.setTimeout(Math.round(.5*o.ra)+Math.round(.5*o.ra*Math.random())),zr(o.i,t),sl(t,l,e)}function kr(o,e){o.j&&Ai({},function(t,l){mr(e,l,t)})}function ka(o,e,t){t=Math.min(o.l.length,t);var l=o.j?Gt(o.j.Oa,o.j,o):null;e:{var f=o.l;let v=-1;for(;;){const S=["count="+t];-1==v?0<t?(v=f[0].h,S.push("ofs="+v)):v=0:S.push("ofs="+v);let B=!0;for(let oe=0;oe<t;oe++){let ue=f[oe].h;const Te=f[oe].g;if(ue-=v,0>ue)v=Math.max(0,f[oe].h-100),B=!1;else try{Aa(Te,S,"req"+ue+"_")}catch{l&&l(Te)}}if(B){l=S.join("&");break e}}}return o=o.l.splice(0,t),e.D=o,l}function Do(o){o.g||o.u||(o.Y=1,no(o.Ga,o),o.A=0)}function ao(o){return!(o.g||o.u||3<=o.A||(o.Y++,o.u=Yt(Gt(o.Ga,o),Wa(o,o.A)),o.A++,0))}function ua(o){null!=o.B&&(Ue.clearTimeout(o.B),o.B=null)}function Oa(o){o.g=new ko(o,o.h,"rpc",o.Y),null===o.o&&(o.g.H=o.s),o.g.O=0;var e=So(o.oa);mr(e,"RID","rpc"),mr(e,"SID",o.J),mr(e,"CI",o.N?"0":"1"),mr(e,"AID",o.U),kr(o,e),mr(e,"TYPE","xmlhttp"),o.o&&o.s&&Nn(e,o.o,o.s),o.K&&o.g.setTimeout(o.K);var t=o.g;o=o.la,t.K=1,t.v=la(So(e)),t.s=null,t.U=!0,Xo(t,o)}function Gr(o){null!=o.v&&(Ue.clearTimeout(o.v),o.v=null)}function Ka(o,e){var t=null;if(o.g==e){Gr(o),ua(o),o.g=null;var l=2}else{if(!Ln(o.i,e))return;t=e.D,oo(o.i,e),l=1}if(o.I=e.N,0!=o.G)if(e.i)if(1==l){t=e.s?e.s.length:0,e=Date.now()-e.F;var f=o.C;In(l=mo(),new Pt(l,t,e,f)),gs(o)}else Do(o);else if(3==(f=e.o)||0==f&&0<o.I||!(1==l&&function yl(o,e){return!(Lt(o.i)>=o.i.j-(o.m?1:0)||(o.m?(o.l=e.D.concat(o.l),0):1==o.G||2==o.G||o.C>=(o.Xa?0:o.Ya)||(o.m=Yt(Gt(o.Ha,o,e),Wa(o,o.C)),o.C++,0)))}(o,e)||2==l&&ao(o)))switch(t&&0<t.length&&(e=o.i,e.i=e.i.concat(t)),f){case 1:da(o,5);break;case 4:da(o,10);break;case 3:da(o,6);break;default:da(o,2)}}function Wa(o,e){let t=o.Pa+Math.floor(Math.random()*o.$a);return o.j||(t*=2),t*e}function da(o,e){if(o.h.info("Error code "+e),2==e){var t=null;o.j&&(t=null);var l=Gt(o.jb,o);t||(t=new lr("//www.google.com/images/cleardot.gif"),Ue.location&&"http"==Ue.location.protocol||fs(t,"https"),la(t)),function xl(o,e){const t=new gi;if(Ue.Image){const l=new Image;l.onload=di(ta,t,l,"TestLoadImage: loaded",!0,e),l.onerror=di(ta,t,l,"TestLoadImage: error",!1,e),l.onabort=di(ta,t,l,"TestLoadImage: abort",!1,e),l.ontimeout=di(ta,t,l,"TestLoadImage: timeout",!1,e),Ue.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=o}else e(!1)}(t.toString(),l)}else Tt(2);o.G=0,o.j&&o.j.va(e),Ec(o),qs(o)}function Ec(o){o.G=0,o.I=-1,o.j&&((0!=ps(o.i).length||0!=o.l.length)&&(o.i.i.length=0,Ci(o.l),o.l.length=0),o.j.ua())}function Za(o,e,t){let l=function qr(o){return o instanceof lr?So(o):new lr(o,void 0)}(t);if(""!=l.i)e&&Ws(l,e+"."+l.i),Yi(l,l.m);else{const f=Ue.location;l=function ba(o,e,t,l){var f=new lr(null,void 0);return o&&fs(f,o),e&&Ws(f,e),t&&Yi(f,t),l&&(f.l=l),f}(f.protocol,e?e+"."+f.hostname:f.hostname,+f.port,t)}return o.aa&&Ni(o.aa,function(f,v){mr(l,v,f)}),t=o.sa,(e=o.D)&&t&&mr(l,e,t),mr(l,"VER",o.ma),kr(o,l),l}function qa(o,e,t){if(e&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ms(t&&o.Ba&&!o.qa?new al({ib:!0}):o.qa)).L=o.H,e}function ia(){}function vl(){if(Ji&&!(10<=Number(ze)))throw Error("Environmental error: no available transport.")}function Ys(o,e){wr.call(this),this.g=new Ir(e),this.l=o,this.h=e&&e.messageUrlParams||null,o=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(o?o["X-WebChannel-Content-Type"]=e.messageContentType:o={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(o?o["X-WebChannel-Client-Profile"]=e.ya:o={"X-WebChannel-Client-Profile":e.ya}),this.g.P=o,(o=e&&e.httpHeadersOverwriteParam)&&!Ei(o)&&(this.g.o=o),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ei(e)&&(this.g.D=e,null!==(o=this.h)&&e in o&&e in(o=this.h)&&delete o[e]),this.j=new Nr(this)}function Ql(o){ds.call(this);var e=o.__sm__;if(e){e:{for(const t in e){o=t;break e}o=void 0}(this.i=o)&&(o=this.i,e=null!==e&&o in e?e[o]:void 0),this.data=e}else this.data=o}function Jl(){Cr.call(this),this.status=1}function Nr(o){this.g=o}(ee=ms.prototype).ea=function(o,e,t,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);e=e?e.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_i.g(),this.C=function ar(o){return o.h||(o.h=o.i())}(this.u?this.u:_i),this.g.onreadystatechange=Gt(this.Fa,this);try{this.F=!0,this.g.open(e,String(o),!0),this.F=!1}catch(v){return void Ml(this,v)}o=t||"";const f=new To(this.headers);l&&Ai(l,function(v,S){f.set(S,v)}),l=function Hn(o){e:{var e=ll;const t=o.length,l="string"==typeof o?o.split(""):o;for(let f=0;f<t;f++)if(f in l&&e.call(void 0,l[f],f,o)){e=f;break e}e=-1}return 0>e?null:"string"==typeof o?o.charAt(e):o[e]}(f.T()),t=Ue.FormData&&o instanceof Ue.FormData,!(0<=vt(Al,e))||l||t||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),f.forEach(function(v,S){this.g.setRequestHeader(S,v)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_e(this),0<this.B&&((this.K=function Cc(o){return Ji&&function qn(){return function xr(o){var e=vs;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=o(9)}(function(){let o=0;const e=Zi(String(ji)).split("."),t=Zi("9").split("."),l=Math.max(e.length,t.length);for(let S=0;0==o&&S<l;S++){var f=e[S]||"",v=t[S]||"";do{if(f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],0==f[0].length&&0==v[0].length)break;o=Ki(0==f[1].length?0:parseInt(f[1],10),0==v[1].length?0:parseInt(v[1],10))||Ki(0==f[2].length,0==v[2].length)||Ki(f[2],v[2]),f=f[3],v=v[3]}while(0==o)}return 0<=o})}()&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gt(this.pa,this)):this.A=Ps(this.pa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(v){Ml(this,v)}},ee.pa=function(){typeof pt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,In(this,"timeout"),this.abort(8))},ee.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,In(this,"complete"),In(this,"abort"),Y(this))},ee.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Y(this,!0)),ms.Z.M.call(this)},ee.Fa=function(){this.s||(this.F||this.v||this.l?le(this):this.cb())},ee.cb=function(){le(this)},ee.ba=function(){try{return 2<$e(this)?this.g.status:-1}catch{return-1}},ee.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ee.Qa=function(o){if(this.g){var e=this.g.responseText;return o&&0==e.indexOf(o)&&(e=e.substring(o.length)),na(e)}},ee.Da=function(){return this.m},ee.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ee=Ir.prototype).ma=8,ee.G=1,ee.hb=function(o){try{this.h.info("Origin Trials invoked: "+o)}catch{}},ee.Ha=function(o){if(this.m)if(this.m=null,1==this.G){if(!o){this.V=Math.floor(1e5*Math.random()),o=this.V++;const f=new ko(this,this.h,o,void 0);let v=this.s;if(this.P&&(v?(v=Hi(v),Jr(v,this.P)):v=this.P),null===this.o&&(f.H=v),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var l=this.l[t];if(void 0===(l="__data__"in l.g&&"string"==typeof(l=l.g.__data__)?l.length:void 0))break;if(4096<(e+=l)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ka(this,f,e),mr(t=So(this.F),"RID",o),mr(t,"CVER",22),this.D&&mr(t,"X-HTTP-Session-Id",this.D),kr(this,t),this.o&&v&&Nn(t,this.o,v),zr(this.i,f),this.Ra&&mr(t,"TYPE","init"),this.ja?(mr(t,"$req",e),mr(t,"SID","null"),f.$=!0,sl(f,t,null)):sl(f,t,e),this.G=2}}else 3==this.G&&(o?Ra(this,o):0==this.l.length||pe(this.i)||Ra(this))},ee.Ga=function(){if(this.u=null,Oa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var o=2*this.O;this.h.info("BP detection timer enabled: "+o),this.B=Yt(Gt(this.bb,this),o)}},ee.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Tt(10),Li(this),Oa(this))},ee.ab=function(){null!=this.v&&(this.v=null,Li(this),ao(this),Tt(19))},ee.jb=function(o){o?(this.h.info("Successfully pinged google.com"),Tt(2)):(this.h.info("Failed to ping google.com"),Tt(1))},(ee=ia.prototype).xa=function(){},ee.wa=function(){},ee.va=function(){},ee.ua=function(){},ee.Oa=function(){},vl.prototype.g=function(o,e){return new Ys(o,e)},Un(Ys,wr),Ys.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var o=this.g,e=this.l,t=this.h||void 0;o.Wa&&(o.h.info("Origin Trials enabled."),no(Gt(o.hb,o,e))),Tt(0),o.W=e,o.aa=t||{},o.N=o.X,o.F=Za(o,null,o.W),gs(o)},Ys.prototype.close=function(){nr(this.g)},Ys.prototype.u=function(o){if("string"==typeof o){var e={};e.__data__=o,Sr(this.g,e)}else this.v?((e={}).__data__=Ss(o),Sr(this.g,e)):Sr(this.g,o)},Ys.prototype.M=function(){this.g.j=null,delete this.j,nr(this.g),delete this.g,Ys.Z.M.call(this)},Un(Ql,ds),Un(Jl,Cr),Un(Nr,ia),Nr.prototype.xa=function(){In(this.g,"a")},Nr.prototype.wa=function(o){In(this.g,new Ql(o))},Nr.prototype.va=function(o){In(this.g,new Jl(o))},Nr.prototype.ua=function(){In(this.g,"b")},vl.prototype.createWebChannel=vl.prototype.g,Ys.prototype.send=Ys.prototype.u,Ys.prototype.open=Ys.prototype.m,Ys.prototype.close=Ys.prototype.close,tn.NO_ERROR=0,tn.TIMEOUT=8,tn.HTTP_ERROR=6,si.COMPLETE="complete",go.EventType=Ks,Ks.OPEN="a",Ks.CLOSE="b",Ks.ERROR="c",Ks.MESSAGE="d",wr.prototype.listen=wr.prototype.N,ms.prototype.listenOnce=ms.prototype.O,ms.prototype.getLastError=ms.prototype.La,ms.prototype.getLastErrorCode=ms.prototype.Da,ms.prototype.getStatus=ms.prototype.ba,ms.prototype.getResponseJson=ms.prototype.Qa,ms.prototype.getResponseText=ms.prototype.ga,ms.prototype.send=ms.prototype.ea;var Cs=xe.createWebChannelTransport=function(){return new vl},Ya=xe.getStatEventTarget=function(){return mo()},$r=xe.ErrorCode=tn,ra=xe.EventType=si,Rl=xe.Event=Eo,cc=xe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Fs=xe.FetchXmlHttpFactory=al,bl=xe.WebChannel=go,Qs=xe.XhrIo=ms;const jl="@firebase/firestore";class ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");let wl="9.9.2";const Ho=new we.Yd("@firebase/firestore");function ha(){return Ho.logLevel}function pn(o,...e){if(Ho.logLevel<=we.in.DEBUG){const t=e.map(ul);Ho.debug(`Firestore (${wl}): ${o}`,...t)}}function Fr(o,...e){if(Ho.logLevel<=we.in.ERROR){const t=e.map(ul);Ho.error(`Firestore (${wl}): ${o}`,...t)}}function sa(o,...e){if(Ho.logLevel<=we.in.WARN){const t=e.map(ul);Ho.warn(`Firestore (${wl}): ${o}`,...t)}}function ul(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch{return o}}function Vn(o="Unexpected state"){const e=`FIRESTORE (${wl}) INTERNAL ASSERTION FAILED: `+o;throw Fr(e),new Error(e)}function Fn(o,e){o||Vn()}function Dn(o,e){return o}const Ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class sn extends nt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ls{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class kl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ur.UNAUTHENTICATED))}shutdown(){}}class Ic{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xl{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var l=this;let f=this.i;const v=ue=>this.i!==f?(f=this.i,t(ue)):Promise.resolve();let S=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),S.resolve(),S=new Ls,e.enqueueRetryable(()=>v(this.currentUser))};const B=()=>{const ue=S;e.enqueueRetryable((0,ot.Z)(function*(){yield ue.promise,yield v(l.currentUser)}))},oe=ue=>{pn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ue,this.auth.addAuthTokenListener(this.o),B()};this.t.onInit(ue=>oe(ue)),setTimeout(()=>{if(!this.auth){const ue=this.t.getImmediate({optional:!0});ue?oe(ue):(pn("FirebaseAuthCredentialsProvider","Auth not yet detected"),S.resolve(),S=new Ls)}},0),B()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(l=>this.i!==e?(pn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):l?(Fn("string"==typeof l.accessToken),new kl(l.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Fn(null===e||"string"==typeof e),new ur(e)}}class ec{constructor(e,t,l){this.type="FirstParty",this.user=ur.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const f=e.auth.getAuthHeaderValueForFirstParty([]);f&&this.headers.set("Authorization",f),l&&this.headers.set("X-Goog-Iam-Authorization-Token",l)}}class dl{constructor(e,t,l){this.h=e,this.l=t,this.m=l}getToken(){return Promise.resolve(new ec(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ms{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const l=v=>{null!=v.error&&pn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${v.error.message}`);const S=v.token!==this.p;return this.p=v.token,pn("FirebaseAppCheckTokenProvider",`Received ${S?"new":"existing"} token.`),S?t(v.token):Promise.resolve()};this.o=v=>{e.enqueueRetryable(()=>l(v))};const f=v=>{pn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=v,this.appCheck.addTokenListener(this.o)};this.g.onInit(v=>f(v)),setTimeout(()=>{if(!this.appCheck){const v=this.g.getImmediate({optional:!0});v?f(v):pn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fn("string"==typeof t.token),this.p=t.token,new fa(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qa(o){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(o);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let l=0;l<o;l++)t[l]=Math.floor(256*Math.random());return t}class jo{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let l="";for(;l.length<20;){const f=Qa(40);for(let v=0;v<f.length;++v)l.length<20&&f[v]<t&&(l+=e.charAt(f[v]%e.length))}return l}}function Mi(o,e){return o<e?-1:o>e?1:0}function Lo(o,e,t){return o.length===e.length&&o.every((l,f)=>t(l,e[f]))}function pa(o){return o+"\0"}class Qr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new sn(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new sn(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new sn(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new sn(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),l=Math.floor(1e6*(e-1e3*t));return new Qr(t,l)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mi(this.nanoseconds,e.nanoseconds):Mi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class An{constructor(e){this.timestamp=e}static fromTimestamp(e){return new An(e)}static min(){return new An(new Qr(0,0))}static max(){return new An(new Qr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tc{constructor(e,t,l){void 0===t?t=0:t>e.length&&Vn(),void 0===l?l=e.length-t:l>e.length-t&&Vn(),this.segments=e,this.offset=t,this.len=l}get length(){return this.len}isEqual(e){return 0===tc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tc?e.forEach(l=>{t.push(l)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,l=this.limit();t<l;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const l=Math.min(e.length,t.length);for(let f=0;f<l;f++){const v=e.get(f),S=t.get(f);if(v<S)return-1;if(v>S)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gr extends tc{construct(e,t,l){return new gr(e,t,l)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const l of e){if(l.indexOf("//")>=0)throw new sn(Ht.INVALID_ARGUMENT,`Invalid segment (${l}). Paths must not contain // in them.`);t.push(...l.split("/").filter(f=>f.length>0))}return new gr(t)}static emptyPath(){return new gr([])}}const Xc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rs extends tc{construct(e,t,l){return new Rs(e,t,l)}static isValidIdentifier(e){return Xc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rs(["__name__"])}static fromServerFormat(e){const t=[];let l="",f=0;const v=()=>{if(0===l.length)throw new sn(Ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(l),l=""};let S=!1;for(;f<e.length;){const B=e[f];if("\\"===B){if(f+1===e.length)throw new sn(Ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const oe=e[f+1];if("\\"!==oe&&"."!==oe&&"`"!==oe)throw new sn(Ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);l+=oe,f+=2}else"`"===B?(S=!S,f++):"."!==B||S?(l+=B,f++):(v(),f++)}if(v(),S)throw new sn(Ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rs(t)}static emptyPath(){return new Rs([])}}class bn{constructor(e){this.path=e}static fromPath(e){return new bn(gr.fromString(e))}static fromName(e){return new bn(gr.fromString(e).popFirst(5))}static empty(){return new bn(gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bn(new gr(e.slice()))}}class Cl{constructor(e,t,l,f){this.indexId=e,this.collectionGroup=t,this.fields=l,this.indexState=f}}function zo(o){return o.fields.find(e=>2===e.kind)}function Na(o){return o.fields.filter(e=>2!==e.kind)}Cl.UNKNOWN_ID=-1;class uc{constructor(e,t){this.fieldPath=e,this.kind=t}}class hl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hl(0,Lr.min())}}function zl(o,e){const t=o.toTimestamp().seconds,l=o.toTimestamp().nanoseconds+1,f=An.fromTimestamp(1e9===l?new Qr(t+1,0):new Qr(t,l));return new Lr(f,bn.empty(),e)}function Ol(o){return new Lr(o.readTime,o.key,-1)}class Lr{constructor(e,t,l){this.readTime=e,this.documentKey=t,this.largestBatchId=l}static min(){return new Lr(An.min(),bn.empty(),-1)}static max(){return new Lr(An.max(),bn.empty(),-1)}}function wo(o,e){let t=o.readTime.compareTo(e.readTime);return 0!==t?t:(t=bn.comparator(o.documentKey,e.documentKey),0!==t?t:Mi(o.largestBatchId,e.largestBatchId))}const Ja="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xo(o){return fl.apply(this,arguments)}function fl(){return fl=(0,ot.Z)(function*(o){if(o.code!==Ht.FAILED_PRECONDITION||o.message!==Ja)throw o;pn("LocalStore","Unexpectedly lost primary lease")}),fl.apply(this,arguments)}class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new D((l,f)=>{this.nextCallback=v=>{this.wrapSuccess(e,v).next(l,f)},this.catchCallback=v=>{this.wrapFailure(t,v).next(l,f)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof D?t:D.resolve(t)}catch(t){return D.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):D.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):D.reject(t)}static resolve(e){return new D((t,l)=>{t(e)})}static reject(e){return new D((t,l)=>{l(e)})}static waitFor(e){return new D((t,l)=>{let f=0,v=0,S=!1;e.forEach(B=>{++f,B.next(()=>{++v,S&&v===f&&t()},oe=>l(oe))}),S=!0,v===f&&t()})}static or(e){let t=D.resolve(!1);for(const l of e)t=t.next(f=>f?D.resolve(f):l());return t}static forEach(e,t){const l=[];return e.forEach((f,v)=>{l.push(t.call(this,f,v))}),this.waitFor(l)}static mapArray(e,t){return new D((l,f)=>{const v=e.length,S=new Array(v);let B=0;for(let oe=0;oe<v;oe++){const ue=oe;t(e[ue]).next(Te=>{S[ue]=Te,++B,B===v&&l(S)},Te=>f(Te))}})}static doWhile(e,t){return new D((l,f)=>{const v=()=>{!0===e()?t().next(()=>{v()},f):l()};v()})}}class N{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Ls,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new te(e,t.error)):this.T.resolve()},this.transaction.onerror=l=>{const f=Tn(l.target.error);this.T.reject(new te(e,f))}}static open(e,t,l,f){try{return new N(t,e.transaction(f,l))}catch(v){throw new te(t,v)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(pn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Pe(t)}}class R{constructor(e,t,l){this.name=e,this.version=t,this.P=l,12.2===R.v((0,nt.z$)())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pn("SimpleDb","Removing database:",e),Ze(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,nt.hl)())return!1;if(R.S())return!0;const e=(0,nt.z$)(),t=R.v(e),l=0<t&&t<10,f=R.D(e),v=0<f&&f<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||l||v)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(l)}static D(e){const t=e.match(/Android ([\d.]+)/i),l=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(l)}k(e){var t=this;return(0,ot.Z)(function*(){return t.db||(pn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((l,f)=>{const v=indexedDB.open(t.name,t.version);v.onsuccess=S=>{l(S.target.result)},v.onblocked=()=>{f(new te(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},v.onerror=S=>{const B=S.target.error;f("VersionError"===B.name?new sn(Ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===B.name?new sn(Ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+B):new te(e,B))},v.onupgradeneeded=S=>{pn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',S.oldVersion),t.P.M(S.target.result,v.transaction,S.oldVersion,t.version).next(()=>{pn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=l=>t.O(l)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,l,f){var v=this;return(0,ot.Z)(function*(){const S="readonly"===t;let B=0;for(;;){++B;try{v.db=yield v.k(e);const oe=N.open(v.db,e,S?"readonly":"readwrite",l),ue=f(oe).next(Te=>(oe.R(),Te)).catch(Te=>(oe.abort(Te),D.reject(Te))).toPromise();return ue.catch(()=>{}),yield oe.A,ue}catch(oe){const ue=oe,Te="FirebaseError"!==ue.name&&B<3;if(pn("SimpleDb","Transaction failed with error:",ue.message,"Retrying:",Te),v.close(),!Te)return Promise.reject(ue)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class H{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Ze(this.$.delete())}}class te extends sn{constructor(e,t){super(Ht.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function me(o){return"IndexedDbTransactionError"===o.name}class Pe{constructor(e){this.store=e}put(e,t){let l;return void 0!==t?(pn("SimpleDb","PUT",this.store.name,e,t),l=this.store.put(t,e)):(pn("SimpleDb","PUT",this.store.name,"<auto-key>",e),l=this.store.put(e)),Ze(l)}add(e){return pn("SimpleDb","ADD",this.store.name,e,e),Ze(this.store.add(e))}get(e){return Ze(this.store.get(e)).next(t=>(void 0===t&&(t=null),pn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return pn("SimpleDb","DELETE",this.store.name,e),Ze(this.store.delete(e))}count(){return pn("SimpleDb","COUNT",this.store.name),Ze(this.store.count())}K(e,t){const l=this.options(e,t);if(l.index||"function"!=typeof this.store.getAll){const f=this.cursor(l),v=[];return this.G(f,(S,B)=>{v.push(B)}).next(()=>v)}{const f=this.store.getAll(l.range);return new D((v,S)=>{f.onerror=B=>{S(B.target.error)},f.onsuccess=B=>{v(B.target.result)}})}}j(e,t){const l=this.store.getAll(e,null===t?void 0:t);return new D((f,v)=>{l.onerror=S=>{v(S.target.error)},l.onsuccess=S=>{f(S.target.result)}})}W(e,t){pn("SimpleDb","DELETE ALL",this.store.name);const l=this.options(e,t);l.H=!1;const f=this.cursor(l);return this.G(f,(v,S,B)=>B.delete())}J(e,t){let l;t?l=e:(l={},t=e);const f=this.cursor(l);return this.G(f,t)}Y(e){const t=this.cursor({});return new D((l,f)=>{t.onerror=v=>{const S=Tn(v.target.error);f(S)},t.onsuccess=v=>{const S=v.target.result;S?e(S.primaryKey,S.value).next(B=>{B?S.continue():l()}):l()}})}G(e,t){const l=[];return new D((f,v)=>{e.onerror=S=>{v(S.target.error)},e.onsuccess=S=>{const B=S.target.result;if(!B)return void f();const oe=new H(B),ue=t(B.primaryKey,B.value,oe);if(ue instanceof D){const Te=ue.catch(at=>(oe.done(),D.reject(at)));l.push(Te)}oe.isDone?f():null===oe.U?B.continue():B.continue(oe.U)}}).next(()=>D.waitFor(l))}options(e,t){let l;return void 0!==e&&("string"==typeof e?l=e:t=e),{index:l,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const l=this.store.index(e.index);return e.H?l.openKeyCursor(e.range,t):l.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ze(o){return new D((e,t)=>{o.onsuccess=l=>{e(l.target.result)},o.onerror=l=>{const f=Tn(l.target.error);t(f)}})}let Bt=!1;function Tn(o){const e=R.v((0,nt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(t)>=0){const l=new sn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bt||(Bt=!0,setTimeout(()=>{throw l},0)),l}}return o}class Vi{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;pn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ot.Z)(function*(){t.task=null;try{pn("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(l){me(l)?pn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",l):yield xo(l)}yield t.Z(1)}))}}class jn{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ot.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",l=>t.et(l,e))})()}et(e,t){const l=new Set;let f=t,v=!0;return D.doWhile(()=>!0===v&&f>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(S=>{if(null!==S&&!l.has(S))return pn("IndexBackiller",`Processing collection: ${S}`),this.nt(e,S,f).next(B=>{f-=B,l.add(S)});v=!1})).next(()=>t-f)}nt(e,t,l){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(f=>this.localStore.localDocuments.getNextDocuments(e,t,f,l).next(v=>{const S=v.changes;return this.localStore.indexManager.updateIndexEntries(e,S).next(()=>this.st(f,v)).next(B=>(pn("IndexBackiller",`Updating offset: ${B}`),this.localStore.indexManager.updateCollectionGroup(e,t,B))).next(()=>S.size)}))}st(e,t){let l=e;return t.changes.forEach((f,v)=>{const S=Ol(v);wo(S,l)>0&&(l=S)}),new Lr(l.readTime,l.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Bi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=l=>this.it(l),this.rt=l=>t.writeSequenceNumber(l))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function os(o){let e=0;for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&e++;return e}function Vr(o,e){for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&e(t,o[t])}function Xa(o){for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e))return!1;return!0}Bi.ot=-1;class Mr{constructor(e,t){this.comparator=e,this.root=t||Br.EMPTY}insert(e,t){return new Mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new Mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const l=this.comparator(e,t.key);if(0===l)return t.value;l<0?t=t.left:l>0&&(t=t.right)}return null}indexOf(e){let t=0,l=this.root;for(;!l.isEmpty();){const f=this.comparator(e,l.key);if(0===f)return t+l.left.size;f<0?l=l.left:(t+=l.left.size+1,l=l.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,l)=>(e(t,l),!1))}toString(){const e=[];return this.inorderTraversal((t,l)=>(e.push(`${t}:${l}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Go(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Go(this.root,e,this.comparator,!1)}getReverseIterator(){return new Go(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Go(this.root,e,this.comparator,!0)}}class Go{constructor(e,t,l,f){this.isReverse=f,this.nodeStack=[];let v=1;for(;!e.isEmpty();)if(v=t?l(e.key,t):1,t&&f&&(v*=-1),v<0)e=this.isReverse?e.left:e.right;else{if(0===v){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,t,l,f,v){this.key=e,this.value=t,this.color=l??Br.RED,this.left=f??Br.EMPTY,this.right=v??Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,l,f,v){return new Br(e??this.key,t??this.value,l??this.color,f??this.left,v??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,l){let f=this;const v=l(e,f.key);return f=v<0?f.copy(null,null,null,f.left.insert(e,t,l),null):0===v?f.copy(null,t,null,null,null):f.copy(null,null,null,null,f.right.insert(e,t,l)),f.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let l,f=this;if(t(e,f.key)<0)f.left.isEmpty()||f.left.isRed()||f.left.left.isRed()||(f=f.moveRedLeft()),f=f.copy(null,null,null,f.left.remove(e,t),null);else{if(f.left.isRed()&&(f=f.rotateRight()),f.right.isEmpty()||f.right.isRed()||f.right.left.isRed()||(f=f.moveRedRight()),0===t(e,f.key)){if(f.right.isEmpty())return Br.EMPTY;l=f.right.min(),f=f.copy(l.key,l.value,null,null,f.right.removeMin())}f=f.copy(null,null,null,null,f.right.remove(e,t))}return f.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Vn();const e=this.left.check();if(e!==this.right.check())throw Vn();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1,Br.EMPTY=new class{constructor(){this.size=0}get key(){throw Vn()}get value(){throw Vn()}get color(){throw Vn()}get left(){throw Vn()}get right(){throw Vn()}copy(o,e,t,l,f){return this}insert(o,e,t){return new Br(o,e)}remove(o,e){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qi{constructor(e){this.comparator=e,this.data=new Mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,l)=>(e(t),!1))}forEachInRange(e,t){const l=this.data.getIteratorFrom(e[0]);for(;l.hasNext();){const f=l.getNext();if(this.comparator(f.key,e[1])>=0)return;t(f.key)}}forEachWhile(e,t){let l;for(l=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();l.hasNext();)if(!e(l.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nc(this.data.getIterator())}getIteratorFrom(e){return new nc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(l=>{t=t.add(l)}),t}isEqual(e){if(!(e instanceof qi)||this.size!==e.size)return!1;const t=this.data.getIterator(),l=e.data.getIterator();for(;t.hasNext();){const f=t.getNext().key,v=l.getNext().key;if(0!==this.comparator(f,v))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qi(this.comparator);return t.data=e,t}}class nc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dc(o){return o.hasNext()?o.getNext():void 0}class $o{constructor(e){this.fields=e,e.sort(Rs.comparator)}static empty(){return new $o([])}unionWith(e){let t=new qi(Rs.comparator);for(const l of this.fields)t=t.add(l);for(const l of e)t=t.add(l);return new $o(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,(t,l)=>t.isEqual(l))}}class co{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new co(t)}static fromUint8Array(e){const t=function(l){let f="";for(let v=0;v<l.length;++v)f+=String.fromCharCode(l[v]);return f}(e);return new co(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let l=0;l<e.length;l++)t[l]=e.charCodeAt(l);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}co.EMPTY_BYTE_STRING=new co("");const yc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ma(o){if(Fn(!!o),"string"==typeof o){let e=0;const t=yc.exec(o);if(Fn(!!t),t[1]){let f=t[1];f=(f+"000000000").substr(0,9),e=Number(f)}const l=new Date(o);return{seconds:Math.floor(l.getTime()/1e3),nanos:e}}return{seconds:ts(o.seconds),nanos:ts(o.nanos)}}function ts(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function Fa(o){return"string"==typeof o?co.fromBase64String(o):co.fromUint8Array(o)}function Sc(o){var e,t;return"server_timestamp"===(null===(t=((null===(e=o?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function uo(o){const e=o.mapValue.fields.__previous_value__;return Sc(e)?uo(e):e}function Pl(o){const e=ma(o.mapValue.fields.__local_write_time__.timestampValue);return new Qr(e.seconds,e.nanos)}class q{constructor(e,t,l,f,v,S,B,oe){this.databaseId=e,this.appId=t,this.persistenceKey=l,this.host=f,this.ssl=v,this.forceLongPolling=S,this.autoDetectLongPolling=B,this.useFetchStreams=oe}}class ne{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ne("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ne&&e.projectId===this.projectId&&e.database===this.database}}function he(o){return null==o}function je(o){return 0===o&&1/o==-1/0}function gt(o){return"number"==typeof o&&Number.isInteger(o)&&!je(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}const At={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cn={nullValue:"NULL_VALUE"};function yn(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?Sc(o)?4:hc(o)?9007199254740991:10:Vn()}function Xn(o,e){if(o===e)return!0;const t=yn(o);if(t!==yn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return o.booleanValue===e.booleanValue;case 4:return Pl(o).isEqual(Pl(e));case 3:return function(l,f){if("string"==typeof l.timestampValue&&"string"==typeof f.timestampValue&&l.timestampValue.length===f.timestampValue.length)return l.timestampValue===f.timestampValue;const v=ma(l.timestampValue),S=ma(f.timestampValue);return v.seconds===S.seconds&&v.nanos===S.nanos}(o,e);case 5:return o.stringValue===e.stringValue;case 6:return f=e,Fa(o.bytesValue).isEqual(Fa(f.bytesValue));case 7:return o.referenceValue===e.referenceValue;case 8:return function(l,f){return ts(l.geoPointValue.latitude)===ts(f.geoPointValue.latitude)&&ts(l.geoPointValue.longitude)===ts(f.geoPointValue.longitude)}(o,e);case 2:return function(l,f){if("integerValue"in l&&"integerValue"in f)return ts(l.integerValue)===ts(f.integerValue);if("doubleValue"in l&&"doubleValue"in f){const v=ts(l.doubleValue),S=ts(f.doubleValue);return v===S?je(v)===je(S):isNaN(v)&&isNaN(S)}return!1}(o,e);case 9:return Lo(o.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:return function(l,f){const v=l.mapValue.fields||{},S=f.mapValue.fields||{};if(os(v)!==os(S))return!1;for(const B in v)if(v.hasOwnProperty(B)&&(void 0===S[B]||!Xn(v[B],S[B])))return!1;return!0}(o,e);default:return Vn()}var f}function ci(o,e){return void 0!==(o.values||[]).find(t=>Xn(t,e))}function ki(o,e){if(o===e)return 0;const t=yn(o),l=yn(e);if(t!==l)return Mi(t,l);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mi(o.booleanValue,e.booleanValue);case 2:return function(f,v){const S=ts(f.integerValue||f.doubleValue),B=ts(v.integerValue||v.doubleValue);return S<B?-1:S>B?1:S===B?0:isNaN(S)?isNaN(B)?0:-1:1}(o,e);case 3:return Zn(o.timestampValue,e.timestampValue);case 4:return Zn(Pl(o),Pl(e));case 5:return Mi(o.stringValue,e.stringValue);case 6:return function(f,v){const S=Fa(f),B=Fa(v);return S.compareTo(B)}(o.bytesValue,e.bytesValue);case 7:return function(f,v){const S=f.split("/"),B=v.split("/");for(let oe=0;oe<S.length&&oe<B.length;oe++){const ue=Mi(S[oe],B[oe]);if(0!==ue)return ue}return Mi(S.length,B.length)}(o.referenceValue,e.referenceValue);case 8:return function(f,v){const S=Mi(ts(f.latitude),ts(v.latitude));return 0!==S?S:Mi(ts(f.longitude),ts(v.longitude))}(o.geoPointValue,e.geoPointValue);case 9:return function(f,v){const S=f.values||[],B=v.values||[];for(let oe=0;oe<S.length&&oe<B.length;++oe){const ue=ki(S[oe],B[oe]);if(ue)return ue}return Mi(S.length,B.length)}(o.arrayValue,e.arrayValue);case 10:return function(f,v){if(f===At.mapValue&&v===At.mapValue)return 0;if(f===At.mapValue)return 1;if(v===At.mapValue)return-1;const S=f.fields||{},B=Object.keys(S),oe=v.fields||{},ue=Object.keys(oe);B.sort(),ue.sort();for(let Te=0;Te<B.length&&Te<ue.length;++Te){const at=Mi(B[Te],ue[Te]);if(0!==at)return at;const Vt=ki(S[B[Te]],oe[ue[Te]]);if(0!==Vt)return Vt}return Mi(B.length,ue.length)}(o.mapValue,e.mapValue);default:throw Vn()}}function Zn(o,e){if("string"==typeof o&&"string"==typeof e&&o.length===e.length)return Mi(o,e);const t=ma(o),l=ma(e),f=Mi(t.seconds,l.seconds);return 0!==f?f:Mi(t.nanos,l.nanos)}function as(o){return Js(o)}function Js(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?function(l){const f=ma(l);return`time(${f.seconds},${f.nanos})`}(o.timestampValue):"stringValue"in o?o.stringValue:"bytesValue"in o?Fa(o.bytesValue).toBase64():"referenceValue"in o?bn.fromName(o.referenceValue).toString():"geoPointValue"in o?`geo(${(e=o.geoPointValue).latitude},${e.longitude})`:"arrayValue"in o?function(l){let f="[",v=!0;for(const S of l.values||[])v?v=!1:f+=",",f+=Js(S);return f+"]"}(o.arrayValue):"mapValue"in o?function(l){const f=Object.keys(l.fields||{}).sort();let v="{",S=!0;for(const B of f)S?S=!1:v+=",",v+=`${B}:${Js(l.fields[B])}`;return v+"}"}(o.mapValue):Vn();var e}function Xs(o,e){return{referenceValue:`projects/${o.projectId}/databases/${o.database}/documents/${e.path.canonicalString()}`}}function Ea(o){return!!o&&"integerValue"in o}function El(o){return!!o&&"arrayValue"in o}function el(o){return!!o&&"nullValue"in o}function La(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function Tl(o){return!!o&&"mapValue"in o}function tl(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){const e={mapValue:{fields:{}}};return Vr(o.mapValue.fields,(t,l)=>e.mapValue.fields[t]=tl(l)),e}if(o.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(o.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tl(o.arrayValue.values[t]);return e}return Object.assign({},o)}function hc(o){return"__max__"===(((o.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pc(o){return"nullValue"in o?cn:"booleanValue"in o?{booleanValue:!1}:"integerValue"in o||"doubleValue"in o?{doubleValue:NaN}:"timestampValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in o?{stringValue:""}:"bytesValue"in o?{bytesValue:""}:"referenceValue"in o?Xs(ne.empty(),bn.empty()):"geoPointValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in o?{arrayValue:{}}:"mapValue"in o?{mapValue:{}}:Vn()}function cd(o){return"nullValue"in o?{booleanValue:!1}:"booleanValue"in o?{doubleValue:NaN}:"integerValue"in o||"doubleValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in o?{stringValue:""}:"stringValue"in o?{bytesValue:""}:"bytesValue"in o?Xs(ne.empty(),bn.empty()):"referenceValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in o?{arrayValue:{}}:"arrayValue"in o?{mapValue:{}}:"mapValue"in o?At:Vn()}function du(o,e){const t=ki(o.value,e.value);return 0!==t?t:o.inclusive&&!e.inclusive?-1:!o.inclusive&&e.inclusive?1:0}function $c(o,e){const t=ki(o.value,e.value);return 0!==t?t:o.inclusive&&!e.inclusive?1:!o.inclusive&&e.inclusive?-1:0}class Ko{constructor(e){this.value=e}static empty(){return new Ko({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let l=0;l<e.length-1;++l)if(t=(t.mapValue.fields||{})[e.get(l)],!Tl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(t)}setAll(e){let t=Rs.emptyPath(),l={},f=[];e.forEach((S,B)=>{if(!t.isImmediateParentOf(B)){const oe=this.getFieldsMap(t);this.applyChanges(oe,l,f),l={},f=[],t=B.popLast()}S?l[B.lastSegment()]=tl(S):f.push(B.lastSegment())});const v=this.getFieldsMap(t);this.applyChanges(v,l,f)}delete(e){const t=this.field(e.popLast());Tl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let l=0;l<e.length;++l){let f=t.mapValue.fields[e.get(l)];Tl(f)&&f.mapValue.fields||(f={mapValue:{fields:{}}},t.mapValue.fields[e.get(l)]=f),t=f}return t.mapValue.fields}applyChanges(e,t,l){Vr(t,(f,v)=>e[f]=v);for(const f of l)delete e[f]}clone(){return new Ko(tl(this.value))}}function Il(o){const e=[];return Vr(o.fields,(t,l)=>{const f=new Rs([t]);if(Tl(l)){const v=Il(l.mapValue).fields;if(0===v.length)e.push(f);else for(const S of v)e.push(f.child(S))}else e.push(f)}),new $o(e)}class _s{constructor(e,t,l,f,v,S){this.key=e,this.documentType=t,this.version=l,this.readTime=f,this.data=v,this.documentState=S}static newInvalidDocument(e){return new _s(e,0,An.min(),An.min(),Ko.empty(),0)}static newFoundDocument(e,t,l){return new _s(e,1,t,An.min(),l,0)}static newNoDocument(e,t){return new _s(e,2,t,An.min(),Ko.empty(),0)}static newUnknownDocument(e,t){return new _s(e,3,t,An.min(),Ko.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ko.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ko.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=An.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _s&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _s(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kc{constructor(e,t=null,l=[],f=[],v=null,S=null,B=null){this.path=e,this.collectionGroup=t,this.orderBy=l,this.filters=f,this.limit=v,this.startAt=S,this.endAt=B,this.ut=null}}function fe(o,e=null,t=[],l=[],f=null,v=null,S=null){return new Kc(o,e,t,l,f,v,S)}function $(o){const e=Dn(o);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(l=>{return(f=l).field.canonicalString()+f.op.toString()+as(f.value);var f}).join(","),t+="|ob:",t+=e.orderBy.map(l=>{return(f=l).field.canonicalString()+f.dir;var f}).join(","),he(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(l=>as(l)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(l=>as(l)).join(",")),e.ut=t}return e.ut}function ve(o,e){if(o.limit!==e.limit||o.orderBy.length!==e.orderBy.length)return!1;for(let f=0;f<o.orderBy.length;f++)if(!eu(o.orderBy[f],e.orderBy[f]))return!1;if(o.filters.length!==e.filters.length)return!1;for(let f=0;f<o.filters.length;f++)if((t=o.filters[f]).op!==(l=e.filters[f]).op||!t.field.isEqual(l.field)||!Xn(t.value,l.value))return!1;var t,l;return o.collectionGroup===e.collectionGroup&&!!o.path.isEqual(e.path)&&!!tu(o.startAt,e.startAt)&&tu(o.endAt,e.endAt)}function Je(o){return bn.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}function Ot(o,e){return o.filters.filter(t=>t instanceof Qn&&t.field.isEqual(e))}function vn(o,e,t){let l=cn,f=!0;for(const v of Ot(o,e)){let S=cn,B=!0;switch(v.op){case"<":case"<=":S=Pc(v.value);break;case"==":case"in":case">=":S=v.value;break;case">":S=v.value,B=!1;break;case"!=":case"not-in":S=cn}du({value:l,inclusive:f},{value:S,inclusive:B})<0&&(l=S,f=B)}if(null!==t)for(let v=0;v<o.orderBy.length;++v)if(o.orderBy[v].field.isEqual(e)){const S=t.position[v];du({value:l,inclusive:f},{value:S,inclusive:t.inclusive})<0&&(l=S,f=t.inclusive);break}return{value:l,inclusive:f}}function bi(o,e,t){let l=At,f=!0;for(const v of Ot(o,e)){let S=At,B=!0;switch(v.op){case">=":case">":S=cd(v.value),B=!1;break;case"==":case"in":case"<=":S=v.value;break;case"<":S=v.value,B=!1;break;case"!=":case"not-in":S=At}$c({value:l,inclusive:f},{value:S,inclusive:B})>0&&(l=S,f=B)}if(null!==t)for(let v=0;v<o.orderBy.length;++v)if(o.orderBy[v].field.isEqual(e)){const S=t.position[v];$c({value:l,inclusive:f},{value:S,inclusive:t.inclusive})>0&&(l=S,f=t.inclusive);break}return{value:l,inclusive:f}}class Qn extends class{}{constructor(e,t,l){super(),this.field=e,this.op=t,this.value=l}static create(e,t,l){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,l):new Es(e,t,l):"array-contains"===t?new Va(e,l):"in"===t?new Nl(e,l):"not-in"===t?new Fl(e,l):"array-contains-any"===t?new fc(e,l):new Qn(e,t,l)}static ct(e,t,l){return"in"===t?new oa(e,l):new ic(e,l)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(ki(t,this.value)):null!==t&&yn(this.value)===yn(t)&&this.at(ki(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vn()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Es extends Qn{constructor(e,t,l){super(e,t,l),this.key=bn.fromName(l.referenceValue)}matches(e){const t=bn.comparator(e.key,this.key);return this.at(t)}}class oa extends Qn{constructor(e,t){super(e,"in",t),this.keys=Ta(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ic extends Qn{constructor(e,t){super(e,"not-in",t),this.keys=Ta(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ta(o,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(l=>bn.fromName(l.referenceValue))}class Va extends Qn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return El(t)&&ci(t.arrayValue,this.value)}}class Nl extends Qn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ci(this.value.arrayValue,t)}}class Fl extends Qn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ci(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ci(this.value.arrayValue,t)}}class fc extends Qn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!El(t)||!t.arrayValue.values)&&t.arrayValue.values.some(l=>ci(this.value.arrayValue,l))}}class Co{constructor(e,t){this.position=e,this.inclusive=t}}class aa{constructor(e,t="asc"){this.field=e,this.dir=t}}function eu(o,e){return o.dir===e.dir&&o.field.isEqual(e.field)}function hu(o,e,t){let l=0;for(let f=0;f<o.position.length;f++){const v=e[f],S=o.position[f];if(l=v.field.isKeyField()?bn.comparator(bn.fromName(S.referenceValue),t.key):ki(S,t.data.field(v.field)),"desc"===v.dir&&(l*=-1),0!==l)break}return l}function tu(o,e){if(null===o)return null===e;if(null===e||o.inclusive!==e.inclusive||o.position.length!==e.position.length)return!1;for(let t=0;t<o.position.length;t++)if(!Xn(o.position[t],e.position[t]))return!1;return!0}class Ll{constructor(e,t=null,l=[],f=[],v=null,S="F",B=null,oe=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=l,this.filters=f,this.limit=v,this.limitType=S,this.startAt=B,this.endAt=oe,this.lt=null,this.ft=null}}function Dc(o,e,t,l,f,v,S,B){return new Ll(o,e,t,l,f,v,S,B)}function Vl(o){return new Ll(o)}function ga(o){return 0===o.filters.length&&null===o.limit&&null==o.startAt&&null==o.endAt&&(0===o.explicitOrderBy.length||1===o.explicitOrderBy.length&&o.explicitOrderBy[0].field.isKeyField())}function fu(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function Wu(o){for(const e of o.filters)if(e.ht())return e.field;return null}function Wc(o){return null!==o.collectionGroup}function xc(o){const e=Dn(o);if(null===e.lt){e.lt=[];const t=Wu(e),l=fu(e);if(null!==t&&null===l)t.isKeyField()||e.lt.push(new aa(t)),e.lt.push(new aa(Rs.keyField(),"asc"));else{let f=!1;for(const v of e.explicitOrderBy)e.lt.push(v),v.field.isKeyField()&&(f=!0);if(!f){const v=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new aa(Rs.keyField(),v))}}}return e.lt}function Bs(o){const e=Dn(o);if(!e.ft)if("F"===e.limitType)e.ft=fe(e.path,e.collectionGroup,xc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const v of xc(e))t.push(new aa(v.field,"desc"===v.dir?"asc":"desc"));const l=e.endAt?new Co(e.endAt.position,e.endAt.inclusive):null,f=e.startAt?new Co(e.startAt.position,e.startAt.inclusive):null;e.ft=fe(e.path,e.collectionGroup,t,e.filters,e.limit,l,f)}return e.ft}function F(o,e,t){return new Ll(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),e,t,o.startAt,o.endAt)}function E(o,e){return ve(Bs(o),Bs(e))&&o.limitType===e.limitType}function I(o){return`${$(Bs(o))}|lt:${o.limitType}`}function U(o){return`Query(target=${function K(o){let e=o.path.canonicalString();return null!==o.collectionGroup&&(e+=" collectionGroup="+o.collectionGroup),o.filters.length>0&&(e+=`, filters: [${o.filters.map(t=>{return`${(l=t).field.canonicalString()} ${l.op} ${as(l.value)}`;var l}).join(", ")}]`),he(o.limit)||(e+=", limit: "+o.limit),o.orderBy.length>0&&(e+=`, orderBy: [${o.orderBy.map(t=>{return`${(l=t).field.canonicalString()} (${l.dir})`;var l}).join(", ")}]`),o.startAt&&(e+=", startAt: ",e+=o.startAt.inclusive?"b:":"a:",e+=o.startAt.position.map(t=>as(t)).join(",")),o.endAt&&(e+=", endAt: ",e+=o.endAt.inclusive?"a:":"b:",e+=o.endAt.position.map(t=>as(t)).join(",")),`Target(${e})`}(Bs(o))}; limitType=${o.limitType})`}function de(o,e){return e.isFoundDocument()&&function(t,l){const f=l.key.path;return null!==t.collectionGroup?l.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(f):bn.isDocumentKey(t.path)?t.path.isEqual(f):t.path.isImmediateParentOf(f)}(o,e)&&function(t,l){for(const f of t.explicitOrderBy)if(!f.field.isKeyField()&&null===l.data.field(f.field))return!1;return!0}(o,e)&&function(t,l){for(const f of t.filters)if(!f.matches(l))return!1;return!0}(o,e)&&(l=e,!((t=o).startAt&&!function(f,v,S){const B=hu(f,v,S);return f.inclusive?B<=0:B<0}(t.startAt,xc(t),l)||t.endAt&&!function(f,v,S){const B=hu(f,v,S);return f.inclusive?B>=0:B>0}(t.endAt,xc(t),l)));var t,l}function Ae(o){return o.collectionGroup||(o.path.length%2==1?o.path.lastSegment():o.path.get(o.path.length-2))}function St(o){return(e,t)=>{let l=!1;for(const f of xc(o)){const v=on(f,e,t);if(0!==v)return v;l=l||f.field.isKeyField()}return 0}}function on(o,e,t){const l=o.field.isKeyField()?bn.comparator(e.key,t.key):function(f,v,S){const B=v.data.field(f),oe=S.data.field(f);return null!==B&&null!==oe?ki(B,oe):Vn()}(o.field,e,t);switch(o.dir){case"asc":return l;case"desc":return-1*l;default:return Vn()}}function On(o,e){if(o.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:je(e)?"-0":e}}function pi(o){return{integerValue:""+o}}function _r(o,e){return gt(e)?pi(e):On(o,e)}class Ts{constructor(){this._=void 0}}function Bl(o,e,t){return o instanceof Zc?function(l,f){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return f&&(v.fields.__previous_value__=f),{mapValue:v}}(t,e):o instanceof pc?nu(o,e):o instanceof rc?Eu(o,e):function(l,f){const v=vc(l,f),S=Tu(v)+Tu(l._t);return Ea(v)&&Ea(l._t)?pi(S):On(l.wt,S)}(o,e)}function Nc(o,e,t){return o instanceof pc?nu(o,e):o instanceof rc?Eu(o,e):t}function vc(o,e){return o instanceof iu?Ea(t=e)||(l=t)&&"doubleValue"in l?e:{integerValue:0}:null;var l,t}class Zc extends Ts{}class pc extends Ts{constructor(e){super(),this.elements=e}}function nu(o,e){const t=ru(e);for(const l of o.elements)t.some(f=>Xn(f,l))||t.push(l);return{arrayValue:{values:t}}}class rc extends Ts{constructor(e){super(),this.elements=e}}function Eu(o,e){let t=ru(e);for(const l of o.elements)t=t.filter(f=>!Xn(f,l));return{arrayValue:{values:t}}}class iu extends Ts{constructor(e,t){super(),this.wt=e,this._t=t}}function Tu(o){return ts(o.integerValue||o.doubleValue)}function ru(o){return El(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}class qc{constructor(e,t){this.field=e,this.transform=t}}class Fc{constructor(e,t){this.version=e,this.transformResults=t}}class cs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cs}static exists(e){return new cs(void 0,e)}static updateTime(e){return new cs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pu(o,e){return void 0!==o.updateTime?e.isFoundDocument()&&e.version.isEqual(o.updateTime):void 0===o.exists||o.exists===e.isFoundDocument()}class su{}function ou(o,e){if(!o.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return o.isNoDocument()?new Le(o.key,cs.none()):new T(o.key,o.data,cs.none());{const t=o.data,l=Ko.empty();let f=new qi(Rs.comparator);for(let v of e.fields)if(!f.has(v)){let S=t.field(v);null===S&&v.length>1&&(v=v.popLast(),S=t.field(v)),null===S?l.delete(v):l.set(v,S),f=f.add(v)}return new P(o.key,l,new $o(f.toArray()),cs.none())}}function Dd(o,e,t){o instanceof T?function(l,f,v){const S=l.value.clone(),B=ce(l.fieldTransforms,f,v.transformResults);S.setAll(B),f.convertToFoundDocument(v.version,S).setHasCommittedMutations()}(o,e,t):o instanceof P?function(l,f,v){if(!pu(l.precondition,f))return void f.convertToUnknownDocument(v.version);const S=ce(l.fieldTransforms,f,v.transformResults),B=f.data;B.setAll(J(l)),B.setAll(S),f.convertToFoundDocument(v.version,B).setHasCommittedMutations()}(o,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Us(o,e,t,l){return o instanceof T?function(f,v,S,B){if(!pu(f.precondition,v))return S;const oe=f.value.clone(),ue=Ie(f.fieldTransforms,B,v);return oe.setAll(ue),v.convertToFoundDocument(v.version,oe).setHasLocalMutations(),null}(o,e,t,l):o instanceof P?function(f,v,S,B){if(!pu(f.precondition,v))return S;const oe=Ie(f.fieldTransforms,B,v),ue=v.data;return ue.setAll(J(f)),ue.setAll(oe),v.convertToFoundDocument(v.version,ue).setHasLocalMutations(),null===S?null:S.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(Te=>Te.field))}(o,e,t,l):(S=t,pu(o.precondition,v=e)?(v.convertToNoDocument(v.version).setHasLocalMutations(),null):S);var v,S}function k(o,e){let t=null;for(const l of o.fieldTransforms){const f=e.data.field(l.field),v=vc(l.transform,f||null);null!=v&&(null===t&&(t=Ko.empty()),t.set(l.field,v))}return t||null}function _(o,e){return o.type===e.type&&!!o.key.isEqual(e.key)&&!!o.precondition.isEqual(e.precondition)&&(l=e.fieldTransforms,!!(void 0===(t=o.fieldTransforms)&&void 0===l||t&&l&&Lo(t,l,(f,v)=>function Zu(o,e){return o.field.isEqual(e.field)&&(l=e.transform,(t=o.transform)instanceof pc&&l instanceof pc||t instanceof rc&&l instanceof rc?Lo(t.elements,l.elements,Xn):t instanceof iu&&l instanceof iu?Xn(t._t,l._t):t instanceof Zc&&l instanceof Zc);var t,l}(f,v))))&&(0===o.type?o.value.isEqual(e.value):1!==o.type||o.data.isEqual(e.data)&&o.fieldMask.isEqual(e.fieldMask));var t,l}class T extends su{constructor(e,t,l,f=[]){super(),this.key=e,this.value=t,this.precondition=l,this.fieldTransforms=f,this.type=0}getFieldMask(){return null}}class P extends su{constructor(e,t,l,f,v=[]){super(),this.key=e,this.data=t,this.fieldMask=l,this.precondition=f,this.fieldTransforms=v,this.type=1}getFieldMask(){return this.fieldMask}}function J(o){const e=new Map;return o.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const l=o.data.field(t);e.set(t,l)}}),e}function ce(o,e,t){const l=new Map;Fn(o.length===t.length);for(let f=0;f<t.length;f++){const v=o[f],S=v.transform,B=e.data.field(v.field);l.set(v.field,Nc(S,B,t[f]))}return l}function Ie(o,e,t){const l=new Map;for(const f of o){const v=f.transform,S=t.data.field(f.field);l.set(f.field,Bl(v,S,e))}return l}class Le extends su{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lt extends su{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ft{constructor(e){this.count=e}}var nn,en;function hi(o){switch(o){default:return Vn();case Ht.CANCELLED:case Ht.UNKNOWN:case Ht.DEADLINE_EXCEEDED:case Ht.RESOURCE_EXHAUSTED:case Ht.INTERNAL:case Ht.UNAVAILABLE:case Ht.UNAUTHENTICATED:return!1;case Ht.INVALID_ARGUMENT:case Ht.NOT_FOUND:case Ht.ALREADY_EXISTS:case Ht.PERMISSION_DENIED:case Ht.FAILED_PRECONDITION:case Ht.ABORTED:case Ht.OUT_OF_RANGE:case Ht.UNIMPLEMENTED:case Ht.DATA_LOSS:return!0}}function mi(o){if(void 0===o)return Fr("GRPC error has no .code"),Ht.UNKNOWN;switch(o){case nn.OK:return Ht.OK;case nn.CANCELLED:return Ht.CANCELLED;case nn.UNKNOWN:return Ht.UNKNOWN;case nn.DEADLINE_EXCEEDED:return Ht.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return Ht.RESOURCE_EXHAUSTED;case nn.INTERNAL:return Ht.INTERNAL;case nn.UNAVAILABLE:return Ht.UNAVAILABLE;case nn.UNAUTHENTICATED:return Ht.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return Ht.INVALID_ARGUMENT;case nn.NOT_FOUND:return Ht.NOT_FOUND;case nn.ALREADY_EXISTS:return Ht.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return Ht.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return Ht.FAILED_PRECONDITION;case nn.ABORTED:return Ht.ABORTED;case nn.OUT_OF_RANGE:return Ht.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return Ht.UNIMPLEMENTED;case nn.DATA_LOSS:return Ht.DATA_LOSS;default:return Vn()}}(en=nn||(nn={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class Bn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),l=this.inner[t];if(void 0!==l)for(const[f,v]of l)if(this.equalsFn(f,e))return v}has(e){return void 0!==this.get(e)}set(e,t){const l=this.mapKeyFn(e),f=this.inner[l];if(void 0===f)return this.inner[l]=[[e,t]],void this.innerSize++;for(let v=0;v<f.length;v++)if(this.equalsFn(f[v][0],e))return void(f[v]=[e,t]);f.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),l=this.inner[t];if(void 0===l)return!1;for(let f=0;f<l.length;f++)if(this.equalsFn(l[f][0],e))return 1===l.length?delete this.inner[t]:l.splice(f,1),this.innerSize--,!0;return!1}forEach(e){Vr(this.inner,(t,l)=>{for(const[f,v]of l)e(f,v)})}isEmpty(){return Xa(this.inner)}size(){return this.innerSize}}const ei=new Mr(bn.comparator);function ui(){return ei}const pr=new Mr(bn.comparator);function ns(...o){let e=pr;for(const t of o)e=e.insert(t.key,t);return e}function dr(o){let e=pr;return o.forEach((t,l)=>e=e.insert(t,l.overlayedDocument)),e}function tr(){return Wo()}function Kl(){return Wo()}function Wo(){return new Bn(o=>o.toString(),(o,e)=>o.isEqual(e))}const Ao=new Mr(bn.comparator),Wl=new qi(bn.comparator);function Di(...o){let e=Wl;for(const t of o)e=e.add(t);return e}const Yc=new qi(Mi);function Qc(){return Yc}class bc{constructor(e,t,l,f,v){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=l,this.documentUpdates=f,this.resolvedLimboDocuments=v}static createSynthesizedRemoteEventForCurrentChange(e,t){const l=new Map;return l.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,t)),new bc(An.min(),l,Qc(),ui(),Di())}}class Ac{constructor(e,t,l,f,v){this.resumeToken=e,this.current=t,this.addedDocuments=l,this.modifiedDocuments=f,this.removedDocuments=v}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ac(co.EMPTY_BYTE_STRING,t,Di(),Di(),Di())}}class mu{constructor(e,t,l,f){this.gt=e,this.removedTargetIds=t,this.key=l,this.yt=f}}class Iu{constructor(e,t){this.targetId=e,this.It=t}}class Jn{constructor(e,t,l=co.EMPTY_BYTE_STRING,f=null){this.state=e,this.targetIds=t,this.resumeToken=l,this.cause=f}}class Oi{constructor(){this.Tt=0,this.Et=Ba(),this.At=co.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Di(),t=Di(),l=Di();return this.Et.forEach((f,v)=>{switch(v){case 0:e=e.add(f);break;case 2:t=t.add(f);break;case 1:l=l.add(f);break;default:Vn()}}),new Ac(this.At,this.Rt,e,t,l)}Dt(){this.bt=!1,this.Et=Ba()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class Fi{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=ui(),this.Bt=is(),this.Lt=new qi(Mi)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const l=this.Qt(t);switch(e.state){case 0:this.jt(t)&&l.Vt(e.resumeToken);break;case 1:l.kt(),l.Pt||l.Dt(),l.Vt(e.resumeToken);break;case 2:l.kt(),l.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(l.Mt(),l.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),l.Vt(e.resumeToken));break;default:Vn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((l,f)=>{this.jt(f)&&t(f)})}zt(e){const t=e.targetId,l=e.It.count,f=this.Ht(t);if(f){const v=f.target;if(Je(v))if(0===l){const S=new bn(v.path);this.Kt(t,S,_s.newNoDocument(S,An.min()))}else Fn(1===l);else this.Jt(t)!==l&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((v,S)=>{const B=this.Ht(S);if(B){if(v.current&&Je(B.target)){const oe=new bn(B.target.path);null!==this.$t.get(oe)||this.Xt(S,oe)||this.Kt(S,oe,_s.newNoDocument(oe,e))}v.vt&&(t.set(S,v.St()),v.Dt())}});let l=Di();this.Bt.forEach((v,S)=>{let B=!0;S.forEachWhile(oe=>{const ue=this.Ht(oe);return!ue||2===ue.purpose||(B=!1,!1)}),B&&(l=l.add(v))}),this.$t.forEach((v,S)=>S.setReadTime(e));const f=new bc(e,t,this.Lt,this.$t,l);return this.$t=ui(),this.Bt=is(),this.Lt=new qi(Mi),f}qt(e,t){if(!this.jt(e))return;const l=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,l),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,l){if(!this.jt(e))return;const f=this.Qt(e);this.Xt(e,t)?f.Ct(t,1):f.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),l&&(this.$t=this.$t.insert(t,l))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Oi,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new qi(Mi),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||pn("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new Oi),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function is(){return new Mr(bn.comparator)}function Ba(){return new Mr(bn.comparator)}const wc={asc:"ASCENDING",desc:"DESCENDING"},Ua={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Lc{constructor(e,t){this.databaseId=e,this.dt=t}}function eo(o,e){return o.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pl(o,e){return o.dt?e.toBase64():e.toUint8Array()}function ud(o,e){return eo(o,e.toTimestamp())}function rs(o){return Fn(!!o),An.fromTimestamp(function(e){const t=ma(e);return new Qr(t.seconds,t.nanos)}(o))}function Mc(o,e){return(t=o,new gr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function nl(o){const e=gr.fromString(o);return Fn(Kh(e)),e}function Vc(o,e){return Mc(o.databaseId,e.path)}function sc(o,e){const t=nl(e);if(t.get(1)!==o.databaseId.projectId)throw new sn(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+o.databaseId.projectId);if(t.get(3)!==o.databaseId.database)throw new sn(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+o.databaseId.database);return new bn(uh(t))}function lh(o,e){return Mc(o.databaseId,e)}function ch(o){const e=nl(o);return 4===e.length?gr.emptyPath():uh(e)}function au(o){return new gr(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function uh(o){return Fn(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function Su(o,e,t){return{name:Vc(o,e),fields:t.value.mapValue.fields}}function Lu(o,e,t){const l=sc(o,e.name),f=rs(e.updateTime),v=new Ko({mapValue:{fields:e.fields}}),S=_s.newFoundDocument(l,f,v);return t&&S.setHasCommittedMutations(),t?S.setHasCommittedMutations():S}function Vu(o,e){let t;if(e instanceof T)t={update:Su(o,e.key,e.value)};else if(e instanceof Le)t={delete:Vc(o,e.key)};else if(e instanceof P)t={update:Su(o,e.key,e.data),updateMask:$h(e.fieldMask)};else{if(!(e instanceof lt))return Vn();t={verify:Vc(o,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(l=>function(f,v){const S=v.transform;if(S instanceof Zc)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof pc)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof rc)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof iu)return{fieldPath:v.field.canonicalString(),increment:S._t};throw Vn()}(0,l))),e.precondition.isNone||(t.currentDocument=void 0!==(f=e.precondition).updateTime?{updateTime:ud(o,f.updateTime)}:void 0!==f.exists?{exists:f.exists}:Vn()),t;var f}function xd(o,e){const t=e.currentDocument?void 0!==(f=e.currentDocument).updateTime?cs.updateTime(rs(f.updateTime)):void 0!==f.exists?cs.exists(f.exists):cs.none():cs.none(),l=e.updateTransforms?e.updateTransforms.map(f=>function(v,S){let B=null;"setToServerValue"in S?(Fn("REQUEST_TIME"===S.setToServerValue),B=new Zc):"appendMissingElements"in S?B=new pc(S.appendMissingElements.values||[]):"removeAllFromArray"in S?B=new rc(S.removeAllFromArray.values||[]):"increment"in S?B=new iu(v,S.increment):Vn();const oe=Rs.fromServerFormat(S.fieldPath);return new qc(oe,B)}(o,f)):[];var f;if(e.update){const f=sc(o,e.update.name),v=new Ko({mapValue:{fields:e.update.fields}});if(e.updateMask){const S=new $o((e.updateMask.fieldPaths||[]).map(ue=>Rs.fromServerFormat(ue)));return new P(f,v,S,t,l)}return new T(f,v,t,l)}if(e.delete){const f=sc(o,e.delete);return new Le(f,t)}if(e.verify){const f=sc(o,e.verify);return new lt(f,t)}return Vn()}function dh(o,e){return{documents:[lh(o,e.path)]}}function Ad(o,e){const t={structuredQuery:{}},l=e.path;null!==e.collectionGroup?(t.parent=lh(o,l),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=lh(o,l.popLast()),t.structuredQuery.from=[{collectionId:l.lastSegment()}]);const f=function(oe){if(0===oe.length)return;const ue=oe.map(Te=>function(at){if("=="===at.op){if(La(at.value))return{unaryFilter:{field:Du(at.field),op:"IS_NAN"}};if(el(at.value))return{unaryFilter:{field:Du(at.field),op:"IS_NULL"}}}else if("!="===at.op){if(La(at.value))return{unaryFilter:{field:Du(at.field),op:"IS_NOT_NAN"}};if(el(at.value))return{unaryFilter:{field:Du(at.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Du(at.field),op:Rd(at.op),value:at.value}}}(Te));return 1===ue.length?ue[0]:{compositeFilter:{op:"AND",filters:ue}}}(e.filters);f&&(t.structuredQuery.where=f);const v=function(oe){if(0!==oe.length)return oe.map(ue=>{return{field:Du((Te=ue).field),direction:Bc(Te.dir)};var Te})}(e.orderBy);v&&(t.structuredQuery.orderBy=v);const S=(ue=e.limit,o.dt||he(ue)?ue:{value:ue});var ue,B,oe;return null!==S&&(t.structuredQuery.limit=S),e.startAt&&(t.structuredQuery.startAt={before:(B=e.startAt).inclusive,values:B.position}),e.endAt&&(t.structuredQuery.endAt={before:!(oe=e.endAt).inclusive,values:oe.position}),t}function dd(o){let e=ch(o.parent);const t=o.structuredQuery,l=t.from?t.from.length:0;let f=null;if(l>0){Fn(1===l);const Te=t.from[0];Te.allDescendants?f=Te.collectionId:e=e.child(Te.collectionId)}let v=[];t.where&&(v=hh(t.where));let S=[];t.orderBy&&(S=t.orderBy.map(Te=>{return new aa(Bu((at=Te).field),function(Vt){switch(Vt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(at.direction));var at}));let B=null;t.limit&&(B=function(Te){let at;return at="object"==typeof Te?Te.value:Te,he(at)?null:at}(t.limit));let oe=null;var Te;t.startAt&&(oe=new Co((Te=t.startAt).values||[],!!Te.before));let ue=null;return t.endAt&&(ue=function(Te){return new Co(Te.values||[],!Te.before)}(t.endAt)),Dc(e,f,S,v,B,"F",oe,ue)}function hh(o){return o?void 0!==o.unaryFilter?[Gh(o)]:void 0!==o.fieldFilter?[kd(o)]:void 0!==o.compositeFilter?o.compositeFilter.filters.map(e=>hh(e)).reduce((e,t)=>e.concat(t)):Vn():[]}function Bc(o){return wc[o]}function Rd(o){return Ua[o]}function Du(o){return{fieldPath:o.canonicalString()}}function Bu(o){return Rs.fromServerFormat(o.fieldPath)}function kd(o){return Qn.create(Bu(o.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vn()}}(o.fieldFilter.op),o.fieldFilter.value)}function Gh(o){switch(o.unaryFilter.op){case"IS_NAN":const e=Bu(o.unaryFilter.field);return Qn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Bu(o.unaryFilter.field);return Qn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Bu(o.unaryFilter.field);return Qn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Bu(o.unaryFilter.field);return Qn.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Vn()}}function $h(o){const e=[];return o.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Kh(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}function mc(o){let e="";for(let t=0;t<o.length;t++)e.length>0&&(e=Od(e)),e=Bf(o.get(t),e);return Od(e)}function Bf(o,e){let t=e;const l=o.length;for(let f=0;f<l;f++){const v=o.charAt(f);switch(v){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=v}}return t}function Od(o){return o+"\x01\x01"}function Uc(o){const e=o.length;if(Fn(e>=2),2===e)return Fn("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),gr.emptyPath();const t=e-2,l=[];let f="";for(let v=0;v<e;){const S=o.indexOf("\x01",v);switch((S<0||S>t)&&Vn(),o.charAt(S+1)){case"\x01":const B=o.substring(v,S);let oe;0===f.length?oe=B:(f+=B,oe=f,f=""),l.push(oe);break;case"\x10":f+=o.substring(v,S),f+="\0";break;case"\x11":f+=o.substring(v,S+1);break;default:Vn()}v=S+2}return new gr(l)}const hd=["userId","batchId"];function fd(o,e){return[o,mc(e)]}function Pd(o,e,t){return[o,mc(e),t]}const fh={},Nd=["prefixPath","collectionGroup","readTime","documentId"],Wh=["prefixPath","collectionGroup","documentId"],Fd=["collectionGroup","readTime","prefixPath","documentId"],qu=["canonicalId","targetId"],Zh=["targetId","path"],qh=["path","targetId"],Yh=["collectionId","parent"],ph=["indexId","uid"],Uf=["uid","sequenceNumber"],Hf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qh=["indexId","uid","orderedDocumentKey"],Jh=["userId","collectionPath","documentId"],Ld=["userId","collectionPath","largestBatchId"],mh=["userId","collectionGroup","largestBatchId"],gh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xh=[...gh,"documentOverlays"],Vd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_h=Vd,gu=[..._h,"indexConfiguration","indexState","indexEntries"];class Is extends Gl{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function ks(o,e){const t=Dn(o);return R.N(t.ee,e)}class _u{constructor(e,t,l,f){this.batchId=e,this.localWriteTime=t,this.baseMutations=l,this.mutations=f}applyToRemoteDocument(e,t){const l=t.mutationResults;for(let f=0;f<this.mutations.length;f++){const v=this.mutations[f];v.key.isEqual(e.key)&&Dd(v,e,l[f])}}applyToLocalView(e,t){for(const l of this.baseMutations)l.key.isEqual(e.key)&&(t=Us(l,e,t,this.localWriteTime));for(const l of this.mutations)l.key.isEqual(e.key)&&(t=Us(l,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const l=Kl();return this.mutations.forEach(f=>{const v=e.get(f.key),S=v.overlayedDocument;let B=this.applyToLocalView(S,v.mutatedFields);B=t.has(f.key)?null:B;const oe=ou(S,B);null!==oe&&l.set(f.key,oe),S.isValidDocument()||S.convertToNoDocument(An.min())}),l}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Di())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,(t,l)=>_(t,l))&&Lo(this.baseMutations,e.baseMutations,(t,l)=>_(t,l))}}class Yu{constructor(e,t,l,f){this.batch=e,this.commitVersion=t,this.mutationResults=l,this.docVersions=f}static from(e,t,l){Fn(e.mutations.length===l.length);let f=Ao;const v=e.mutations;for(let S=0;S<v.length;S++)f=f.insert(v[S].key,l[S].version);return new Yu(e,t,l,f)}}class Sl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rc{constructor(e,t,l,f,v=An.min(),S=An.min(),B=co.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=l,this.sequenceNumber=f,this.snapshotVersion=v,this.lastLimboFreeSnapshotVersion=S,this.resumeToken=B}withSequenceNumber(e){return new Rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class pd{constructor(e){this.ne=e}}function yh(o,e){const t=e.key,l={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Qu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())l.document={name:Vc(f=o.ne,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:eo(f,v.version.toTimestamp())};else if(e.isNoDocument())l.noDocument={path:t.path.toArray(),readTime:xu(e.version)};else{if(!e.isUnknownDocument())return Vn();l.unknownDocument={path:t.path.toArray(),version:xu(e.version)}}var f,v;return l}function Qu(o){const e=o.toTimestamp();return[e.seconds,e.nanoseconds]}function xu(o){const e=o.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vu(o){const e=new Qr(o.seconds,o.nanoseconds);return An.fromTimestamp(e)}function y(o,e){const t=(e.baseMutations||[]).map(v=>xd(o.ne,v));for(let v=0;v<e.mutations.length-1;++v){const S=e.mutations[v];v+1<e.mutations.length&&void 0!==e.mutations[v+1].transform&&(S.updateTransforms=e.mutations[v+1].transform.fieldTransforms,e.mutations.splice(v+1,1),++v)}const l=e.mutations.map(v=>xd(o.ne,v)),f=Qr.fromMillis(e.localWriteTimeMs);return new _u(e.batchId,f,t,l)}function V(o){const e=vu(o.readTime),t=void 0!==o.lastLimboFreeSnapshotVersion?vu(o.lastLimboFreeSnapshotVersion):An.min();let l;var f;return void 0!==o.query.documents?(Fn(1===(f=o.query).documents.length),l=Bs(Vl(ch(f.documents[0])))):l=Bs(dd(o.query)),new Rc(l,o.targetId,0,o.lastListenSequenceNumber,e,t,co.fromBase64String(o.resumeToken))}function s(o,e){const t=xu(e.snapshotVersion),l=xu(e.lastLimboFreeSnapshotVersion);let f;f=Je(e.target)?dh(o.ne,e.target):Ad(o.ne,e.target);const v=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$(e.target),readTime:t,resumeToken:v,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:l,query:f}}function u(o){const e=dd({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?F(e,e.limit,"L"):e}function b(o,e){return new Sl(e.largestBatchId,xd(o.ne,e.overlayMutation))}function x(o,e){const t=e.path.lastSegment();return[o,mc(e.path.popLast()),t]}function Ce(o,e,t,l){return{indexId:o,uid:e.uid||"",sequenceNumber:t,readTime:xu(l.readTime),documentKey:mc(l.documentKey.path),largestBatchId:l.largestBatchId}}class et{getBundleMetadata(e,t){return Mt(e).get(t).next(l=>{if(l)return{id:(f=l).bundleId,createTime:vu(f.createTime),version:f.version};var f})}saveBundleMetadata(e,t){return Mt(e).put({bundleId:(l=t).id,createTime:xu(rs(l.createTime)),version:l.version});var l}getNamedQuery(e,t){return fn(e).get(t).next(l=>{if(l)return{name:(f=l).name,query:u(f.bundledQuery),readTime:vu(f.readTime)};var f})}saveNamedQuery(e,t){return fn(e).put({name:(l=t).name,readTime:xu(rs(l.readTime)),bundledQuery:l.bundledQuery});var l}}function Mt(o){return ks(o,"bundles")}function fn(o){return ks(o,"namedQueries")}class wn{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new wn(e,t.uid||"")}getOverlay(e,t){return wi(e).get(x(this.userId,t)).next(l=>l?b(this.wt,l):null)}getOverlays(e,t){const l=tr();return D.forEach(t,f=>this.getOverlay(e,f).next(v=>{null!==v&&l.set(f,v)})).next(()=>l)}saveOverlays(e,t,l){const f=[];return l.forEach((v,S)=>{const B=new Sl(t,S);f.push(this.ie(e,B))}),D.waitFor(f)}removeOverlaysForBatchId(e,t,l){const f=new Set;t.forEach(S=>f.add(mc(S.getCollectionPath())));const v=[];return f.forEach(S=>{const B=IDBKeyRange.bound([this.userId,S,l],[this.userId,S,l+1],!1,!0);v.push(wi(e).W("collectionPathOverlayIndex",B))}),D.waitFor(v)}getOverlaysForCollection(e,t,l){const f=tr(),v=mc(t),S=IDBKeyRange.bound([this.userId,v,l],[this.userId,v,Number.POSITIVE_INFINITY],!0);return wi(e).K("collectionPathOverlayIndex",S).next(B=>{for(const oe of B){const ue=b(this.wt,oe);f.set(ue.getKey(),ue)}return f})}getOverlaysForCollectionGroup(e,t,l,f){const v=tr();let S;const B=IDBKeyRange.bound([this.userId,t,l],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wi(e).J({index:"collectionGroupOverlayIndex",range:B},(oe,ue,Te)=>{const at=b(this.wt,ue);v.size()<f||at.largestBatchId===S?(v.set(at.getKey(),at),S=at.largestBatchId):Te.done()}).next(()=>v)}ie(e,t){return wi(e).put(function(l,f,v){const[S,B,oe]=x(f,v.mutation.key);return{userId:f,collectionPath:B,documentId:oe,collectionGroup:v.mutation.key.getCollectionGroup(),largestBatchId:v.largestBatchId,overlayMutation:Vu(l.ne,v.mutation)}}(this.wt,this.userId,t))}}function wi(o){return ks(o,"documentOverlays")}class hr{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(ts(e.integerValue));else if("doubleValue"in e){const l=ts(e.doubleValue);isNaN(l)?this.ce(t,13):(this.ce(t,15),je(l)?t.ae(0):t.ae(l))}else if("timestampValue"in e){const l=e.timestampValue;this.ce(t,20),"string"==typeof l?t.he(l):(t.he(`${l.seconds||""}`),t.ae(l.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Fa(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const l=e.geoPointValue;this.ce(t,45),t.ae(l.latitude||0),t.ae(l.longitude||0)}else"mapValue"in e?hc(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Vn()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const l=e.fields||{};this.ce(t,55);for(const f of Object.keys(l))this.le(f,t),this.oe(l[f],t)}me(e,t){const l=e.values||[];this.ce(t,50);for(const f of l)this.oe(f,t)}_e(e,t){this.ce(t,37),bn.fromName(e).path.forEach(l=>{this.ce(t,60),this.ge(l,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function Pi(o){if(0===o)return 8;let e=0;return o>>4==0&&(e+=4,o<<=4),o>>6==0&&(e+=2,o<<=2),o>>7==0&&(e+=1),e}function ys(o){const e=64-function(t){let l=0;for(let f=0;f<8;++f){const v=Pi(255&t[f]);if(l+=v,8!==v)break}return l}(o);return Math.ceil(e/8)}hr.ye=new hr;class Dr{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let l=t.next();for(;!l.done;)this.Ie(l.value),l=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let l=t.next();for(;!l.done;)this.Ae(l.value),l=t.next();this.Re()}be(e){for(const t of e){const l=t.charCodeAt(0);if(l<128)this.Ie(l);else if(l<2048)this.Ie(960|l>>>6),this.Ie(128|63&l);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|l>>>12),this.Ie(128|63&l>>>6),this.Ie(128|63&l);else{const f=t.codePointAt(0);this.Ie(240|f>>>18),this.Ie(128|63&f>>>12),this.Ie(128|63&f>>>6),this.Ie(128|63&f)}}this.Te()}Pe(e){for(const t of e){const l=t.charCodeAt(0);if(l<128)this.Ae(l);else if(l<2048)this.Ae(960|l>>>6),this.Ae(128|63&l);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|l>>>12),this.Ae(128|63&l>>>6),this.Ae(128|63&l);else{const f=t.codePointAt(0);this.Ae(240|f>>>18),this.Ae(128|63&f>>>12),this.Ae(128|63&f>>>6),this.Ae(128|63&f)}}this.Re()}ve(e){const t=this.Ve(e),l=ys(t);this.Se(1+l),this.buffer[this.position++]=255&l;for(let f=t.length-l;f<t.length;++f)this.buffer[this.position++]=255&t[f]}De(e){const t=this.Ve(e),l=ys(t);this.Se(1+l),this.buffer[this.position++]=~(255&l);for(let f=t.length-l;f<t.length;++f)this.buffer[this.position++]=~(255&t[f])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(f){const v=new DataView(new ArrayBuffer(8));return v.setFloat64(0,f,!1),new Uint8Array(v.buffer)}(e),l=0!=(128&t[0]);t[0]^=l?255:128;for(let f=1;f<t.length;++f)t[f]^=l?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let l=2*this.buffer.length;l<t&&(l=t);const f=new Uint8Array(l);f.set(this.buffer),this.buffer=f}}class yr{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class Zo{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class qo{constructor(){this.Oe=new Dr,this.Fe=new yr(this.Oe),this.$e=new Zo(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class Mo{constructor(e,t,l,f){this.indexId=e,this.documentKey=t,this.arrayValue=l,this.directionalValue=f}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,l=new Uint8Array(t);return l.set(this.directionalValue,0),t!==e?l.set([0],this.directionalValue.length):++l[l.length-1],new Mo(this.indexId,this.documentKey,this.arrayValue,l)}}function Ia(o,e){let t=o.indexId-e.indexId;return 0!==t?t:(t=Ul(o.arrayValue,e.arrayValue),0!==t?t:(t=Ul(o.directionalValue,e.directionalValue),0!==t?t:bn.comparator(o.documentKey,e.documentKey)))}function Ul(o,e){for(let t=0;t<o.length&&t<e.length;++t){const l=o[t]-e[t];if(0!==l)return l}return o.length-e.length}class Hc{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const l=t;l.ht()?this.Ke=l:this.qe.push(l)}}Ge(e){const t=zo(e);if(void 0!==t&&!this.Qe(t))return!1;const l=Na(e);let f=0,v=0;for(;f<l.length&&this.Qe(l[f]);++f);if(f===l.length)return!0;if(void 0!==this.Ke){const S=l[f];if(!this.je(this.Ke,S)||!this.We(this.Ue[v++],S))return!1;++f}for(;f<l.length;++f){const S=l[f];if(v>=this.Ue.length||!this.We(this.Ue[v++],S))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class md{constructor(){this.ze=new p}addToCollectionParentIndex(e,t){return this.ze.add(t),D.resolve()}getCollectionParents(e,t){return D.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return D.resolve()}deleteFieldIndex(e,t){return D.resolve()}getDocumentsMatchingTarget(e,t){return D.resolve(null)}getIndexType(e,t){return D.resolve(0)}getFieldIndexes(e,t){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,t){return D.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,t){return D.resolve(Lr.min())}updateCollectionGroup(e,t,l){return D.resolve()}updateIndexEntries(e,t){return D.resolve()}}class p{constructor(){this.index={}}add(e){const t=e.lastSegment(),l=e.popLast(),f=this.index[t]||new qi(gr.comparator),v=!f.has(l);return this.index[t]=f.add(l),v}has(e){const t=e.lastSegment(),l=e.popLast(),f=this.index[t];return f&&f.has(l)}getEntries(e){return(this.index[e]||new qi(gr.comparator)).toArray()}}const d=new Uint8Array(0);class h{constructor(e,t){this.user=e,this.databaseId=t,this.He=new p,this.Je=new Bn(l=>$(l),(l,f)=>ve(l,f)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const l=t.lastSegment(),f=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const v={collectionId:l,parent:mc(f)};return w(e).put(v)}return D.resolve()}getCollectionParents(e,t){const l=[],f=IDBKeyRange.bound([t,""],[pa(t),""],!1,!0);return w(e).K(f).next(v=>{for(const S of v){if(S.collectionId!==t)break;l.push(Uc(S.parent))}return l})}addFieldIndex(e,t){const l=j(e),f={indexId:(S=t).indexId,collectionGroup:S.collectionGroup,fields:S.fields.map(B=>[B.fieldPath.canonicalString(),B.kind])};var S;delete f.indexId;const v=l.add(f);if(t.indexState){const S=re(e);return v.next(B=>{S.put(Ce(B,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return v.next()}deleteFieldIndex(e,t){const l=j(e),f=re(e),v=O(e);return l.delete(t.indexId).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>v.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const l=O(e);let f=!0;const v=new Map;return D.forEach(this.Ye(t),S=>this.Xe(e,S).next(B=>{f&&(f=!!B),v.set(S,B)})).next(()=>{if(f){let S=Di();const B=[];return D.forEach(v,(oe,ue)=>{var Te;pn("IndexedDbIndexManager",`Using index ${Te=oe,`id=${Te.indexId}|cg=${Te.collectionGroup}|f=${Te.fields.map(Ro=>`${Ro.fieldPath}:${Ro.kind}`).join(",")}`} to execute ${$(t)}`);const at=function(Ro,_a){const Os=zo(_a);if(void 0===Os)return null;for(const Vo of Ot(Ro,Os.fieldPath))switch(Vo.op){case"array-contains-any":return Vo.value.arrayValue.values||[];case"array-contains":return[Vo.value]}return null}(ue,oe),Vt=function(Ro,_a){const Os=new Map;for(const Vo of Na(_a))for(const ac of Ot(Ro,Vo.fieldPath))switch(ac.op){case"==":case"in":Os.set(Vo.fieldPath.canonicalString(),ac.value);break;case"not-in":case"!=":return Os.set(Vo.fieldPath.canonicalString(),ac.value),Array.from(Os.values())}return null}(ue,oe),ln=function(Ro,_a){const Os=[];let Vo=!0;for(const ac of Na(_a)){const Nf=0===ac.kind?vn(Ro,ac.fieldPath,Ro.startAt):bi(Ro,ac.fieldPath,Ro.startAt);Os.push(Nf.value),Vo&&(Vo=Nf.inclusive)}return new Co(Os,Vo)}(ue,oe),dn=function(Ro,_a){const Os=[];let Vo=!0;for(const ac of Na(_a)){const Nf=0===ac.kind?bi(Ro,ac.fieldPath,Ro.endAt):vn(Ro,ac.fieldPath,Ro.endAt);Os.push(Nf.value),Vo&&(Vo=Nf.inclusive)}return new Co(Os,Vo)}(ue,oe),zn=this.Ze(oe,ue,ln),Ri=this.Ze(oe,ue,dn),js=this.tn(oe,ue,Vt),Yo=this.en(oe.indexId,at,zn,ln.inclusive,Ri,dn.inclusive,js);return D.forEach(Yo,Ro=>l.j(Ro,t.limit).next(_a=>{_a.forEach(Os=>{const Vo=bn.fromSegments(Os.documentKey);S.has(Vo)||(S=S.add(Vo),B.push(Vo))})}))}).next(()=>B)}return D.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,l,f,v,S,B){const oe=(null!=t?t.length:1)*Math.max(l.length,v.length),ue=oe/(null!=t?t.length:1),Te=[];for(let at=0;at<oe;++at){const Vt=t?this.nn(t[at/ue]):d,ln=this.sn(e,Vt,l[at%ue],f),dn=this.rn(e,Vt,v[at%ue],S),zn=B.map(Ri=>this.sn(e,Vt,Ri,!0));Te.push(...this.createRange(ln,dn,zn))}return Te}sn(e,t,l,f){const v=new Mo(e,bn.empty(),t,l);return f?v:v.Le()}rn(e,t,l,f){const v=new Mo(e,bn.empty(),t,l);return f?v.Le():v}Xe(e,t){const l=new Hc(t),f=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,f).next(v=>{let S=null;for(const B of v)l.Ge(B)&&(!S||B.fields.length>S.fields.length)&&(S=B);return S})}getIndexType(e,t){let l=2;return D.forEach(this.Ye(t),f=>this.Xe(e,f).next(v=>{v?0!==l&&v.fields.length<function(S){let B=new qi(Rs.comparator),oe=!1;for(const ue of S.filters){const Te=ue;Te.field.isKeyField()||("array-contains"===Te.op||"array-contains-any"===Te.op?oe=!0:B=B.add(Te.field))}for(const ue of S.orderBy)ue.field.isKeyField()||(B=B.add(ue.field));return B.size+(oe?1:0)}(f)&&(l=1):l=0})).next(()=>l)}on(e,t){const l=new qo;for(const f of Na(e)){const v=t.data.field(f.fieldPath);if(null==v)return null;const S=l.Be(f.kind);hr.ye.re(v,S)}return l.Me()}nn(e){const t=new qo;return hr.ye.re(e,t.Be(0)),t.Me()}un(e,t){const l=new qo;return hr.ye.re(Xs(this.databaseId,t),l.Be(function(f){const v=Na(f);return 0===v.length?0:v[v.length-1].kind}(e))),l.Me()}tn(e,t,l){if(null===l)return[];let f=[];f.push(new qo);let v=0;for(const S of Na(e)){const B=l[v++];for(const oe of f)if(this.cn(t,S.fieldPath)&&El(B))f=this.an(f,S,B);else{const ue=oe.Be(S.kind);hr.ye.re(B,ue)}}return this.hn(f)}Ze(e,t,l){return this.tn(e,t,l.position)}hn(e){const t=[];for(let l=0;l<e.length;++l)t[l]=e[l].Me();return t}an(e,t,l){const f=[...e],v=[];for(const S of l.arrayValue.values||[])for(const B of f){const oe=new qo;oe.seed(B.Me()),hr.ye.re(S,oe.Be(t.kind)),v.push(oe)}return v}cn(e,t){return!!e.filters.find(l=>l instanceof Qn&&l.field.isEqual(t)&&("in"===l.op||"not-in"===l.op))}getFieldIndexes(e,t){const l=j(e),f=re(e);return(t?l.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):l.K()).next(v=>{const S=[];return D.forEach(v,B=>f.get([B.indexId,this.uid]).next(oe=>{S.push(function(ue,Te){const at=Te?new hl(Te.sequenceNumber,new Lr(vu(Te.readTime),new bn(Uc(Te.documentKey)),Te.largestBatchId)):hl.empty(),Vt=ue.fields.map(([ln,dn])=>new uc(Rs.fromServerFormat(ln),dn));return new Cl(ue.indexId,ue.collectionGroup,Vt,at)}(B,oe))})).next(()=>S)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((l,f)=>{const v=l.indexState.sequenceNumber-f.indexState.sequenceNumber;return 0!==v?v:Mi(l.collectionGroup,f.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,l){const f=j(e),v=re(e);return this.ln(e).next(S=>f.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(B=>D.forEach(B,oe=>v.put(Ce(oe.indexId,this.user,S,l)))))}updateIndexEntries(e,t){const l=new Map;return D.forEach(t,(f,v)=>{const S=l.get(f.collectionGroup);return(S?D.resolve(S):this.getFieldIndexes(e,f.collectionGroup)).next(B=>(l.set(f.collectionGroup,B),D.forEach(B,oe=>this.fn(e,f,oe).next(ue=>{const Te=this.dn(v,oe);return ue.isEqual(Te)?D.resolve():this._n(e,v,oe,ue,Te)}))))})}wn(e,t,l,f){return O(e).put({indexId:f.indexId,uid:this.uid,arrayValue:f.arrayValue,directionalValue:f.directionalValue,orderedDocumentKey:this.un(l,t.key),documentKey:t.key.path.toArray()})}mn(e,t,l,f){return O(e).delete([f.indexId,this.uid,f.arrayValue,f.directionalValue,this.un(l,t.key),t.key.path.toArray()])}fn(e,t,l){const f=O(e);let v=new qi(Ia);return f.J({index:"documentKeyIndex",range:IDBKeyRange.only([l.indexId,this.uid,this.un(l,t)])},(S,B)=>{v=v.add(new Mo(l.indexId,t,B.arrayValue,B.directionalValue))}).next(()=>v)}dn(e,t){let l=new qi(Ia);const f=this.on(t,e);if(null==f)return l;const v=zo(t);if(null!=v){const S=e.data.field(v.fieldPath);if(El(S))for(const B of S.arrayValue.values||[])l=l.add(new Mo(t.indexId,e.key,this.nn(B),f))}else l=l.add(new Mo(t.indexId,e.key,d,f));return l}_n(e,t,l,f,v){pn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const S=[];return function(B,oe,ue,Te,at){const Vt=B.getIterator(),ln=oe.getIterator();let dn=dc(Vt),zn=dc(ln);for(;dn||zn;){let Ri=!1,js=!1;if(dn&&zn){const Yo=ue(dn,zn);Yo<0?js=!0:Yo>0&&(Ri=!0)}else null!=dn?js=!0:Ri=!0;Ri?(Te(zn),zn=dc(ln)):js?(at(dn),dn=dc(Vt)):(dn=dc(Vt),zn=dc(ln))}}(f,v,Ia,B=>{S.push(this.wn(e,t,l,B))},B=>{S.push(this.mn(e,t,l,B))}),D.waitFor(S)}ln(e){let t=1;return re(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(l,f,v)=>{v.done(),t=f.sequenceNumber+1}).next(()=>t)}createRange(e,t,l){l=l.sort((S,B)=>Ia(S,B)).filter((S,B,oe)=>!B||0!==Ia(S,oe[B-1]));const f=[];f.push(e);for(const S of l){const B=Ia(S,e),oe=Ia(S,t);if(0===B)f[0]=e.Le();else if(B>0&&oe<0)f.push(S),f.push(S.Le());else if(oe>0)break}f.push(t);const v=[];for(let S=0;S<f.length;S+=2)v.push(IDBKeyRange.bound([f[S].indexId,this.uid,f[S].arrayValue,f[S].directionalValue,d,[]],[f[S+1].indexId,this.uid,f[S+1].arrayValue,f[S+1].directionalValue,d,[]]));return v}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ye)}getMinOffset(e,t){return D.mapArray(this.Ye(t),l=>this.Xe(e,l).next(f=>f||Vn())).next(ye)}}function w(o){return ks(o,"collectionParents")}function O(o){return ks(o,"indexEntries")}function j(o){return ks(o,"indexConfiguration")}function re(o){return ks(o,"indexState")}function ye(o){Fn(0!==o.length);let e=o[0].indexState.offset,t=e.largestBatchId;for(let l=1;l<o.length;l++){const f=o[l].indexState.offset;wo(f,e)<0&&(e=f),t<f.largestBatchId&&(t=f.largestBatchId)}return new Lr(e.readTime,e.documentKey,t)}const ke={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qe{constructor(e,t,l){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=l}static withCacheSize(e){return new Qe(e,Qe.DEFAULT_COLLECTION_PERCENTILE,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $t(o,e,t){const l=o.store("mutations"),f=o.store("documentMutations"),v=[],S=IDBKeyRange.only(t.batchId);let B=0;const oe=l.J({range:S},(Te,at,Vt)=>(B++,Vt.delete()));v.push(oe.next(()=>{Fn(1===B)}));const ue=[];for(const Te of t.mutations){const at=Pd(e,Te.key.path,t.batchId);v.push(f.delete(at)),ue.push(Te.key)}return D.waitFor(v).next(()=>ue)}function Kt(o){if(!o)return 0;let e;if(o.document)e=o.document;else if(o.unknownDocument)e=o.unknownDocument;else{if(!o.noDocument)throw Vn();e=o.noDocument}return JSON.stringify(e).length}Qe.DEFAULT_COLLECTION_PERCENTILE=10,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qe.DEFAULT=new Qe(41943040,Qe.DEFAULT_COLLECTION_PERCENTILE,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qe.DISABLED=new Qe(-1,0,0);class an{constructor(e,t,l,f){this.userId=e,this.wt=t,this.indexManager=l,this.referenceDelegate=f,this.gn={}}static se(e,t,l,f){Fn(""!==e.uid);const v=e.isAuthenticated()?e.uid:"";return new an(v,t,l,f)}checkEmpty(e){let t=!0;const l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).J({index:"userMutationsIndex",range:l},(f,v,S)=>{t=!1,S.done()}).next(()=>t)}addMutationBatch(e,t,l,f){const v=ss(e),S=Ii(e);return S.add({}).next(B=>{Fn("number"==typeof B);const oe=new _u(B,t,l,f),ue=function(Vt,ln,dn){const zn=dn.baseMutations.map(js=>Vu(Vt.ne,js)),Ri=dn.mutations.map(js=>Vu(Vt.ne,js));return{userId:ln,batchId:dn.batchId,localWriteTimeMs:dn.localWriteTime.toMillis(),baseMutations:zn,mutations:Ri}}(this.wt,this.userId,oe),Te=[];let at=new qi((Vt,ln)=>Mi(Vt.canonicalString(),ln.canonicalString()));for(const Vt of f){const ln=Pd(this.userId,Vt.key.path,B);at=at.add(Vt.key.path.popLast()),Te.push(S.put(ue)),Te.push(v.put(ln,fh))}return at.forEach(Vt=>{Te.push(this.indexManager.addToCollectionParentIndex(e,Vt))}),e.addOnCommittedListener(()=>{this.gn[B]=oe.keys()}),D.waitFor(Te).next(()=>oe)})}lookupMutationBatch(e,t){return Ii(e).get(t).next(l=>l?(Fn(l.userId===this.userId),y(this.wt,l)):null)}yn(e,t){return this.gn[t]?D.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(l=>{if(l){const f=l.keys();return this.gn[t]=f,f}return null})}getNextMutationBatchAfterBatchId(e,t){const l=t+1,f=IDBKeyRange.lowerBound([this.userId,l]);let v=null;return Ii(e).J({index:"userMutationsIndex",range:f},(S,B,oe)=>{B.userId===this.userId&&(Fn(B.batchId>=l),v=y(this.wt,B)),oe.done()}).next(()=>v)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let l=-1;return Ii(e).J({index:"userMutationsIndex",range:t,reverse:!0},(f,v,S)=>{l=v.batchId,S.done()}).next(()=>l)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).K("userMutationsIndex",t).next(l=>l.map(f=>y(this.wt,f)))}getAllMutationBatchesAffectingDocumentKey(e,t){const l=fd(this.userId,t.path),f=IDBKeyRange.lowerBound(l),v=[];return ss(e).J({range:f},(S,B,oe)=>{const[ue,Te,at]=S,Vt=Uc(Te);if(ue===this.userId&&t.path.isEqual(Vt))return Ii(e).get(at).next(ln=>{if(!ln)throw Vn();Fn(ln.userId===this.userId),v.push(y(this.wt,ln))});oe.done()}).next(()=>v)}getAllMutationBatchesAffectingDocumentKeys(e,t){let l=new qi(Mi);const f=[];return t.forEach(v=>{const S=fd(this.userId,v.path),B=IDBKeyRange.lowerBound(S),oe=ss(e).J({range:B},(ue,Te,at)=>{const[Vt,ln,dn]=ue,zn=Uc(ln);Vt===this.userId&&v.path.isEqual(zn)?l=l.add(dn):at.done()});f.push(oe)}),D.waitFor(f).next(()=>this.pn(e,l))}getAllMutationBatchesAffectingQuery(e,t){const l=t.path,f=l.length+1,v=fd(this.userId,l),S=IDBKeyRange.lowerBound(v);let B=new qi(Mi);return ss(e).J({range:S},(oe,ue,Te)=>{const[at,Vt,ln]=oe,dn=Uc(Vt);at===this.userId&&l.isPrefixOf(dn)?dn.length===f&&(B=B.add(ln)):Te.done()}).next(()=>this.pn(e,B))}pn(e,t){const l=[],f=[];return t.forEach(v=>{f.push(Ii(e).get(v).next(S=>{if(null===S)throw Vn();Fn(S.userId===this.userId),l.push(y(this.wt,S))}))}),D.waitFor(f).next(()=>l)}removeMutationBatch(e,t){return $t(e.ee,this.userId,t).next(l=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),D.forEach(l,f=>this.referenceDelegate.markPotentiallyOrphaned(e,f))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return D.resolve();const l=IDBKeyRange.lowerBound([this.userId]),f=[];return ss(e).J({range:l},(v,S,B)=>{if(v[0]===this.userId){const oe=Uc(v[1]);f.push(oe)}else B.done()}).next(()=>{Fn(0===f.length)})})}containsKey(e,t){return ti(e,this.userId,t)}Tn(e){return ml(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ti(o,e,t){const l=fd(e,t.path),f=l[1],v=IDBKeyRange.lowerBound(l);let S=!1;return ss(o).J({range:v,H:!0},(B,oe,ue)=>{const[Te,at,Vt]=B;Te===e&&at===f&&(S=!0),ue.done()}).next(()=>S)}function Ii(o){return ks(o,"mutations")}function ss(o){return ks(o,"documentMutations")}function ml(o){return ks(o,"mutationQueues")}class oc{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new oc(0)}static Rn(){return new oc(-1)}}class lu{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const l=new oc(t.highestTargetId);return t.highestTargetId=l.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>An.fromTimestamp(new Qr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,l){return this.bn(e).next(f=>(f.highestListenSequenceNumber=t,l&&(f.lastRemoteSnapshotVersion=l.toTimestamp()),t>f.highestListenSequenceNumber&&(f.highestListenSequenceNumber=t),this.Pn(e,f)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(l=>(l.targetCount+=1,this.Vn(t,l),this.Pn(e,l))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cu(e).delete(t.targetId)).next(()=>this.bn(e)).next(l=>(Fn(l.targetCount>0),l.targetCount-=1,this.Pn(e,l)))}removeTargets(e,t,l){let f=0;const v=[];return cu(e).J((S,B)=>{const oe=V(B);oe.sequenceNumber<=t&&null===l.get(oe.targetId)&&(f++,v.push(this.removeTargetData(e,oe)))}).next(()=>D.waitFor(v)).next(()=>f)}forEachTarget(e,t){return cu(e).J((l,f)=>{const v=V(f);t(v)})}bn(e){return jf(e).get("targetGlobalKey").next(t=>(Fn(null!==t),t))}Pn(e,t){return jf(e).put("targetGlobalKey",t)}vn(e,t){return cu(e).put(s(this.wt,t))}Vn(e,t){let l=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,l=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,l=!0),l}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const l=$(t),f=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]);let v=null;return cu(e).J({range:f,index:"queryTargetsIndex"},(S,B,oe)=>{const ue=V(B);ve(t,ue.target)&&(v=ue,oe.done())}).next(()=>v)}addMatchingKeys(e,t,l){const f=[],v=Ju(e);return t.forEach(S=>{const B=mc(S.path);f.push(v.put({targetId:l,path:B})),f.push(this.referenceDelegate.addReference(e,l,S))}),D.waitFor(f)}removeMatchingKeys(e,t,l){const f=Ju(e);return D.forEach(t,v=>{const S=mc(v.path);return D.waitFor([f.delete([l,S]),this.referenceDelegate.removeReference(e,l,v)])})}removeMatchingKeysForTargetId(e,t){const l=Ju(e),f=IDBKeyRange.bound([t],[t+1],!1,!0);return l.delete(f)}getMatchingKeysForTargetId(e,t){const l=IDBKeyRange.bound([t],[t+1],!1,!0),f=Ju(e);let v=Di();return f.J({range:l,H:!0},(S,B,oe)=>{const ue=Uc(S[1]),Te=new bn(ue);v=v.add(Te)}).next(()=>v)}containsKey(e,t){const l=mc(t.path),f=IDBKeyRange.bound([l],[pa(l)],!1,!0);let v=0;return Ju(e).J({index:"documentTargetsIndex",H:!0,range:f},([S,B],oe,ue)=>{0!==S&&(v++,ue.done())}).next(()=>v>0)}te(e,t){return cu(e).get(t).next(l=>l?V(l):null)}}function cu(o){return ks(o,"targets")}function jf(o){return ks(o,"targetGlobal")}function Ju(o){return ks(o,"targetDocuments")}function $p([o,e],[t,l]){const f=Mi(o,t);return 0===f?Mi(e,l):f}class Bd{constructor(e){this.Sn=e,this.buffer=new qi($p),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const l=this.buffer.last();$p(t,l)<0&&(this.buffer=this.buffer.delete(l).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lg{constructor(e,t,l){this.garbageCollector=e,this.asyncQueue=t,this.localStore=l,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;pn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ot.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(l){me(l)?pn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield xo(l)}yield t.kn(3e5)}))}}class cg{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(l=>Math.floor(t/100*l))}nthSequenceNumber(e,t){if(0===t)return D.resolve(Bi.ot);const l=new Bd(t);return this.Mn.forEachTarget(e,f=>l.xn(f.sequenceNumber)).next(()=>this.Mn.Fn(e,f=>l.xn(f))).next(()=>l.maxValue)}removeTargets(e,t,l){return this.Mn.removeTargets(e,t,l)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(pn("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(ke)):this.getCacheSize(e).next(l=>l<this.params.cacheSizeCollectionThreshold?(pn("LruGarbageCollector",`Garbage collection skipped; Cache size ${l} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ke):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let l,f,v,S,B,oe,ue;const Te=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(at=>(at>this.params.maximumSequenceNumbersToCollect?(pn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${at}`),f=this.params.maximumSequenceNumbersToCollect):f=at,S=Date.now(),this.nthSequenceNumber(e,f))).next(at=>(l=at,B=Date.now(),this.removeTargets(e,l,t))).next(at=>(v=at,oe=Date.now(),this.removeOrphanedDocuments(e,l))).next(at=>(ue=Date.now(),ha()<=we.in.DEBUG&&pn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${S-Te}ms\n\tDetermined least recently used ${f} in `+(B-S)+`ms\n\tRemoved ${v} targets in `+(oe-B)+`ms\n\tRemoved ${at} documents in `+(ue-oe)+`ms\nTotal Duration: ${ue-Te}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:f,targetsRemoved:v,documentsRemoved:at})))}}class cy{constructor(e,t){this.db=e,this.garbageCollector=new cg(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(l=>t.next(f=>l+f))}Bn(e){let t=0;return this.Fn(e,l=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(l,f)=>t(f))}addReference(e,t,l){return Kp(e,l)}removeReference(e,t,l){return Kp(e,l)}removeTargets(e,t,l){return this.db.getTargetCache().removeTargets(e,t,l)}markPotentiallyOrphaned(e,t){return Kp(e,t)}Un(e,t){return function(l,f){let v=!1;return ml(l).Y(S=>ti(l,S,f).next(B=>(B&&(v=!0),D.resolve(!B)))).next(()=>v)}(e,t)}removeOrphanedDocuments(e,t){const l=this.db.getRemoteDocumentCache().newChangeBuffer(),f=[];let v=0;return this.Ln(e,(S,B)=>{if(B<=t){const oe=this.Un(e,S).next(ue=>{if(!ue)return v++,l.getEntry(e,S).next(()=>(l.removeEntry(S,An.min()),Ju(e).delete([0,mc(S.path)])))});f.push(oe)}}).next(()=>D.waitFor(f)).next(()=>l.apply(e)).next(()=>v)}removeTarget(e,t){const l=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,l)}updateLimboDocument(e,t){return Kp(e,t)}Ln(e,t){const l=Ju(e);let f,v=Bi.ot;return l.J({index:"documentTargetsIndex"},([S,B],{path:oe,sequenceNumber:ue})=>{0===S?(v!==Bi.ot&&t(new bn(Uc(f)),v),v=ue,f=oe):v=Bi.ot}).next(()=>{v!==Bi.ot&&t(new bn(Uc(f)),v)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kp(o,e){return Ju(o).put((l=o.currentSequenceNumber,{targetId:0,path:mc(e.path),sequenceNumber:l}));var l}class ef{constructor(){this.changes=new Bn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_s.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const l=this.changes.get(t);return void 0!==l?D.resolve(l):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uy{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,l){return Xu(e).put(l)}removeEntry(e,t,l){return Xu(e).delete(function(f,v){const S=f.path.toArray();return[S.slice(0,S.length-2),S[S.length-2],Qu(v),S[S.length-1]]}(t,l))}updateMetadata(e,t){return this.getMetadata(e).next(l=>(l.byteSize+=t,this.qn(e,l)))}getEntry(e,t){let l=_s.newInvalidDocument(t);return Xu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vh(t))},(f,v)=>{l=this.Kn(t,v)}).next(()=>l)}Gn(e,t){let l={size:0,document:_s.newInvalidDocument(t)};return Xu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vh(t))},(f,v)=>{l={document:this.Kn(t,v),size:Kt(v)}}).next(()=>l)}getEntries(e,t){let l=ui();return this.Qn(e,t,(f,v)=>{const S=this.Kn(f,v);l=l.insert(f,S)}).next(()=>l)}jn(e,t){let l=ui(),f=new Mr(bn.comparator);return this.Qn(e,t,(v,S)=>{const B=this.Kn(v,S);l=l.insert(v,B),f=f.insert(v,Kt(S))}).next(()=>({documents:l,Wn:f}))}Qn(e,t,l){if(t.isEmpty())return D.resolve();let f=new qi(nf);t.forEach(oe=>f=f.add(oe));const v=IDBKeyRange.bound(vh(f.first()),vh(f.last())),S=f.getIterator();let B=S.getNext();return Xu(e).J({index:"documentKeyIndex",range:v},(oe,ue,Te)=>{const at=bn.fromSegments([...ue.prefixPath,ue.collectionGroup,ue.documentId]);for(;B&&nf(B,at)<0;)l(B,null),B=S.getNext();B&&B.isEqual(at)&&(l(B,ue),B=S.hasNext()?S.getNext():null),B?Te.q(vh(B)):Te.done()}).next(()=>{for(;B;)l(B,null),B=S.hasNext()?S.getNext():null})}getAllFromCollection(e,t,l){const f=[t.popLast().toArray(),t.lastSegment(),Qu(l.readTime),l.documentKey.path.isEmpty()?"":l.documentKey.path.lastSegment()],v=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xu(e).K(IDBKeyRange.bound(f,v,!0)).next(S=>{let B=ui();for(const oe of S){const ue=this.Kn(bn.fromSegments(oe.prefixPath.concat(oe.collectionGroup,oe.documentId)),oe);B=B.insert(ue.key,ue)}return B})}getAllFromCollectionGroup(e,t,l,f){let v=ui();const S=tf(t,l),B=tf(t,Lr.max());return Xu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(S,B,!0)},(oe,ue,Te)=>{const at=this.Kn(bn.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);v=v.insert(at.key,at),v.size===f&&Te.done()}).next(()=>v)}newChangeBuffer(e){return new ug(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Zp(e).get("remoteDocumentGlobalKey").next(t=>(Fn(!!t),t))}qn(e,t){return Zp(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const l=function yu(o,e){let t;if(e.document)t=Lu(o.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const l=bn.fromSegments(e.noDocument.path),f=vu(e.noDocument.readTime);t=_s.newNoDocument(l,f),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Vn();{const l=bn.fromSegments(e.unknownDocument.path),f=vu(e.unknownDocument.version);t=_s.newUnknownDocument(l,f)}}return e.readTime&&t.setReadTime(function(l){const f=new Qr(l[0],l[1]);return An.fromTimestamp(f)}(e.readTime)),t}(this.wt,t);if(!l.isNoDocument()||!l.version.isEqual(An.min()))return l}return _s.newInvalidDocument(e)}}function Wp(o){return new uy(o)}class ug extends ef{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Bn(l=>l.toString(),(l,f)=>l.isEqual(f))}applyChanges(e){const t=[];let l=0,f=new qi((v,S)=>Mi(v.canonicalString(),S.canonicalString()));return this.changes.forEach((v,S)=>{const B=this.Hn.get(v);if(t.push(this.zn.removeEntry(e,v,B.readTime)),S.isValidDocument()){const oe=yh(this.zn.wt,S);f=f.add(v.path.popLast()),l+=Kt(oe)-B.size,t.push(this.zn.addEntry(e,v,oe))}else if(l-=B.size,this.trackRemovals){const oe=yh(this.zn.wt,S.convertToNoDocument(An.min()));t.push(this.zn.addEntry(e,v,oe))}}),f.forEach(v=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,v))}),t.push(this.zn.updateMetadata(e,l)),D.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(l=>(this.Hn.set(t,{size:l.size,readTime:l.document.readTime}),l.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:l,Wn:f})=>(f.forEach((v,S)=>{this.Hn.set(v,{size:S,readTime:l.get(v).readTime})}),l))}}function Zp(o){return ks(o,"remoteDocumentGlobal")}function Xu(o){return ks(o,"remoteDocumentsV14")}function vh(o){const e=o.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tf(o,e){const t=e.documentKey.path.toArray();return[o,Qu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nf(o,e){const t=o.path.toArray(),l=e.path.toArray();let f=0;for(let v=0;v<t.length-2&&v<l.length-2;++v)if(f=Mi(t[v],l[v]),f)return f;return f=Mi(t.length,l.length),f||(f=Mi(t[t.length-2],l[l.length-2]),f||Mi(t[t.length-1],l[l.length-1]))}class dg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zf{constructor(e,t,l,f){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=l,this.indexManager=f}getDocument(e,t){let l=null;return this.documentOverlayCache.getOverlay(e,t).next(f=>(l=f,this.getBaseDocument(e,t,l))).next(f=>(null!==l&&Us(l.mutation,f,$o.empty(),Qr.now()),f))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(l=>this.getLocalViewOfDocuments(e,l,Di()).next(()=>l))}getLocalViewOfDocuments(e,t,l=Di()){const f=tr();return this.populateOverlays(e,f,t).next(()=>this.computeViews(e,t,f,l).next(v=>{let S=ns();return v.forEach((B,oe)=>{S=S.insert(B,oe.overlayedDocument)}),S}))}getOverlayedDocuments(e,t){const l=tr();return this.populateOverlays(e,l,t).next(()=>this.computeViews(e,t,l,Di()))}populateOverlays(e,t,l){const f=[];return l.forEach(v=>{t.has(v)||f.push(v)}),this.documentOverlayCache.getOverlays(e,f).next(v=>{v.forEach((S,B)=>{t.set(S,B)})})}computeViews(e,t,l,f){let v=ui();const S=Wo(),B=Wo();return t.forEach((oe,ue)=>{const Te=l.get(ue.key);f.has(ue.key)&&(void 0===Te||Te.mutation instanceof P)?v=v.insert(ue.key,ue):void 0!==Te&&(S.set(ue.key,Te.mutation.getFieldMask()),Us(Te.mutation,ue,Te.mutation.getFieldMask(),Qr.now()))}),this.recalculateAndSaveOverlays(e,v).next(oe=>(oe.forEach((ue,Te)=>S.set(ue,Te)),t.forEach((ue,Te)=>{var at;return B.set(ue,new dg(Te,null!==(at=S.get(ue))&&void 0!==at?at:null))}),B))}recalculateAndSaveOverlays(e,t){const l=Wo();let f=new Mr((S,B)=>S-B),v=Di();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(S=>{for(const B of S)B.keys().forEach(oe=>{const ue=t.get(oe);if(null===ue)return;let Te=l.get(oe)||$o.empty();Te=B.applyToLocalView(ue,Te),l.set(oe,Te);const at=(f.get(B.batchId)||Di()).add(oe);f=f.insert(B.batchId,at)})}).next(()=>{const S=[],B=f.getReverseIterator();for(;B.hasNext();){const oe=B.getNext(),ue=oe.key,Te=oe.value,at=Kl();Te.forEach(Vt=>{if(!v.has(Vt)){const ln=ou(t.get(Vt),l.get(Vt));null!==ln&&at.set(Vt,ln),v=v.add(Vt)}}),S.push(this.documentOverlayCache.saveOverlays(e,ue,at))}return D.waitFor(S)}).next(()=>l)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(l=>this.recalculateAndSaveOverlays(e,l))}getDocumentsMatchingQuery(e,t,l){return bn.isDocumentKey((f=t).path)&&null===f.collectionGroup&&0===f.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Wc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,l):this.getDocumentsMatchingCollectionQuery(e,t,l);var f}getNextDocuments(e,t,l,f){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,l,f).next(v=>{const S=f-v.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,l.largestBatchId,f-v.size):D.resolve(tr());let B=-1,oe=v;return S.next(ue=>D.forEach(ue,(Te,at)=>(B<at.largestBatchId&&(B=at.largestBatchId),v.get(Te)?D.resolve():this.getBaseDocument(e,Te,at).next(Vt=>{oe=oe.insert(Te,Vt)}))).next(()=>this.populateOverlays(e,ue,v)).next(()=>this.computeViews(e,oe,ue,Di())).next(Te=>({batchId:B,changes:dr(Te)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new bn(t)).next(l=>{let f=ns();return l.isFoundDocument()&&(f=f.insert(l.key,l)),f})}getDocumentsMatchingCollectionGroupQuery(e,t,l){const f=t.collectionGroup;let v=ns();return this.indexManager.getCollectionParents(e,f).next(S=>D.forEach(S,B=>{const oe=(ue=t,Te=B.child(f),new Ll(Te,null,ue.explicitOrderBy.slice(),ue.filters.slice(),ue.limit,ue.limitType,ue.startAt,ue.endAt));var ue,Te;return this.getDocumentsMatchingCollectionQuery(e,oe,l).next(ue=>{ue.forEach((Te,at)=>{v=v.insert(Te,at)})})}).next(()=>v))}getDocumentsMatchingCollectionQuery(e,t,l){let f;return this.remoteDocumentCache.getAllFromCollection(e,t.path,l).next(v=>(f=v,this.documentOverlayCache.getOverlaysForCollection(e,t.path,l.largestBatchId))).next(v=>{v.forEach((B,oe)=>{const ue=oe.getKey();null===f.get(ue)&&(f=f.insert(ue,_s.newInvalidDocument(ue)))});let S=ns();return f.forEach((B,oe)=>{const ue=v.get(B);void 0!==ue&&Us(ue.mutation,oe,$o.empty(),Qr.now()),de(t,oe)&&(S=S.insert(B,oe))}),S})}getBaseDocument(e,t,l){return null===l||1===l.mutation.type?this.remoteDocumentCache.getEntry(e,t):D.resolve(_s.newInvalidDocument(t))}}class hg{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return D.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var l;return this.Jn.set(t.id,{id:(l=t).id,version:l.version,createTime:rs(l.createTime)}),D.resolve()}getNamedQuery(e,t){return D.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(l=t).name,query:u(l.bundledQuery),readTime:rs(l.readTime)}),D.resolve();var l}}class qp{constructor(){this.overlays=new Mr(bn.comparator),this.Xn=new Map}getOverlay(e,t){return D.resolve(this.overlays.get(t))}getOverlays(e,t){const l=tr();return D.forEach(t,f=>this.getOverlay(e,f).next(v=>{null!==v&&l.set(f,v)})).next(()=>l)}saveOverlays(e,t,l){return l.forEach((f,v)=>{this.ie(e,t,v)}),D.resolve()}removeOverlaysForBatchId(e,t,l){const f=this.Xn.get(l);return void 0!==f&&(f.forEach(v=>this.overlays=this.overlays.remove(v)),this.Xn.delete(l)),D.resolve()}getOverlaysForCollection(e,t,l){const f=tr(),v=t.length+1,S=new bn(t.child("")),B=this.overlays.getIteratorFrom(S);for(;B.hasNext();){const oe=B.getNext().value,ue=oe.getKey();if(!t.isPrefixOf(ue.path))break;ue.path.length===v&&oe.largestBatchId>l&&f.set(oe.getKey(),oe)}return D.resolve(f)}getOverlaysForCollectionGroup(e,t,l,f){let v=new Mr((ue,Te)=>ue-Te);const S=this.overlays.getIterator();for(;S.hasNext();){const ue=S.getNext().value;if(ue.getKey().getCollectionGroup()===t&&ue.largestBatchId>l){let Te=v.get(ue.largestBatchId);null===Te&&(Te=tr(),v=v.insert(ue.largestBatchId,Te)),Te.set(ue.getKey(),ue)}}const B=tr(),oe=v.getIterator();for(;oe.hasNext()&&(oe.getNext().value.forEach((ue,Te)=>B.set(ue,Te)),!(B.size()>=f)););return D.resolve(B)}ie(e,t,l){const f=this.overlays.get(l.key);if(null!==f){const S=this.Xn.get(f.largestBatchId).delete(l.key);this.Xn.set(f.largestBatchId,S)}this.overlays=this.overlays.insert(l.key,new Sl(t,l));let v=this.Xn.get(t);void 0===v&&(v=Di(),this.Xn.set(t,v)),this.Xn.set(t,v.add(l.key))}}class Ud{constructor(){this.Zn=new qi(gc.ts),this.es=new qi(gc.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const l=new gc(e,t);this.Zn=this.Zn.add(l),this.es=this.es.add(l)}ss(e,t){e.forEach(l=>this.addReference(l,t))}removeReference(e,t){this.rs(new gc(e,t))}os(e,t){e.forEach(l=>this.removeReference(l,t))}us(e){const t=new bn(new gr([])),l=new gc(t,e),f=new gc(t,e+1),v=[];return this.es.forEachInRange([l,f],S=>{this.rs(S),v.push(S.key)}),v}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new bn(new gr([])),l=new gc(t,e),f=new gc(t,e+1);let v=Di();return this.es.forEachInRange([l,f],S=>{v=v.add(S.key)}),v}containsKey(e){const t=new gc(e,0),l=this.Zn.firstAfterOrEqual(t);return null!==l&&e.isEqual(l.key)}}class gc{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return bn.comparator(e.key,t.key)||Mi(e.ls,t.ls)}static ns(e,t){return Mi(e.ls,t.ls)||bn.comparator(e.key,t.key)}}class fg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new qi(gc.ts)}checkEmpty(e){return D.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,l,f){const v=this.fs;this.fs++;const S=new _u(v,t,l,f);this.mutationQueue.push(S);for(const B of f)this.ds=this.ds.add(new gc(B.key,v)),this.indexManager.addToCollectionParentIndex(e,B.key.path.popLast());return D.resolve(S)}lookupMutationBatch(e,t){return D.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const f=this.ws(t+1),v=f<0?0:f;return D.resolve(this.mutationQueue.length>v?this.mutationQueue[v]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const l=new gc(t,0),f=new gc(t,Number.POSITIVE_INFINITY),v=[];return this.ds.forEachInRange([l,f],S=>{const B=this._s(S.ls);v.push(B)}),D.resolve(v)}getAllMutationBatchesAffectingDocumentKeys(e,t){let l=new qi(Mi);return t.forEach(f=>{const v=new gc(f,0),S=new gc(f,Number.POSITIVE_INFINITY);this.ds.forEachInRange([v,S],B=>{l=l.add(B.ls)})}),D.resolve(this.gs(l))}getAllMutationBatchesAffectingQuery(e,t){const l=t.path,f=l.length+1;let v=l;bn.isDocumentKey(v)||(v=v.child(""));const S=new gc(new bn(v),0);let B=new qi(Mi);return this.ds.forEachWhile(oe=>{const ue=oe.key.path;return!!l.isPrefixOf(ue)&&(ue.length===f&&(B=B.add(oe.ls)),!0)},S),D.resolve(this.gs(B))}gs(e){const t=[];return e.forEach(l=>{const f=this._s(l);null!==f&&t.push(f)}),t}removeMutationBatch(e,t){Fn(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let l=this.ds;return D.forEach(t.mutations,f=>{const v=new gc(f.key,t.batchId);return l=l.delete(v),this.referenceDelegate.markPotentiallyOrphaned(e,f.key)}).next(()=>{this.ds=l})}In(e){}containsKey(e,t){const l=new gc(t,0),f=this.ds.firstAfterOrEqual(l);return D.resolve(t.isEqual(f&&f.key))}performConsistencyCheck(e){return D.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class dy{constructor(e){this.ps=e,this.docs=new Mr(bn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const l=t.key,f=this.docs.get(l),v=f?f.size:0,S=this.ps(t);return this.docs=this.docs.insert(l,{document:t.mutableCopy(),size:S}),this.size+=S-v,this.indexManager.addToCollectionParentIndex(e,l.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const l=this.docs.get(t);return D.resolve(l?l.document.mutableCopy():_s.newInvalidDocument(t))}getEntries(e,t){let l=ui();return t.forEach(f=>{const v=this.docs.get(f);l=l.insert(f,v?v.document.mutableCopy():_s.newInvalidDocument(f))}),D.resolve(l)}getAllFromCollection(e,t,l){let f=ui();const v=new bn(t.child("")),S=this.docs.getIteratorFrom(v);for(;S.hasNext();){const{key:B,value:{document:oe}}=S.getNext();if(!t.isPrefixOf(B.path))break;B.path.length>t.length+1||wo(Ol(oe),l)<=0||(f=f.insert(oe.key,oe.mutableCopy()))}return D.resolve(f)}getAllFromCollectionGroup(e,t,l,f){Vn()}Is(e,t){return D.forEach(this.docs,l=>t(l))}newChangeBuffer(e){return new hy(this)}getSize(e){return D.resolve(this.size)}}class hy extends ef{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((l,f)=>{f.isValidDocument()?t.push(this.zn.addEntry(e,f)):this.zn.removeEntry(l)}),D.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class pg{constructor(e){this.persistence=e,this.Ts=new Bn(t=>$(t),ve),this.lastRemoteSnapshotVersion=An.min(),this.highestTargetId=0,this.Es=0,this.As=new Ud,this.targetCount=0,this.Rs=oc.An()}forEachTarget(e,t){return this.Ts.forEach((l,f)=>t(f)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,t,l){return l&&(this.lastRemoteSnapshotVersion=l),t>this.Es&&(this.Es=t),D.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new oc(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,D.resolve()}updateTargetData(e,t){return this.vn(t),D.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,t,l){let f=0;const v=[];return this.Ts.forEach((S,B)=>{B.sequenceNumber<=t&&null===l.get(B.targetId)&&(this.Ts.delete(S),v.push(this.removeMatchingKeysForTargetId(e,B.targetId)),f++)}),D.waitFor(v).next(()=>f)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,t){const l=this.Ts.get(t)||null;return D.resolve(l)}addMatchingKeys(e,t,l){return this.As.ss(t,l),D.resolve()}removeMatchingKeys(e,t,l){this.As.os(t,l);const f=this.persistence.referenceDelegate,v=[];return f&&t.forEach(S=>{v.push(f.markPotentiallyOrphaned(e,S))}),D.waitFor(v)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),D.resolve()}getMatchingKeysForTargetId(e,t){const l=this.As.hs(t);return D.resolve(l)}containsKey(e,t){return D.resolve(this.As.containsKey(t))}}class Gf{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Bi(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new pg(this),this.indexManager=new md,this.remoteDocumentCache=new dy(l=>this.referenceDelegate.Ss(l)),this.wt=new pd(t),this.Ds=new hg(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let l=this.bs[e.toKey()];return l||(l=new fg(t,this.referenceDelegate),this.bs[e.toKey()]=l),l}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,l){pn("MemoryPersistence","Starting transaction:",e);const f=new mg(this.Ps.next());return this.referenceDelegate.Cs(),l(f).next(v=>this.referenceDelegate.xs(f).next(()=>v)).toPromise().then(v=>(f.raiseOnCommittedEvent(),v))}Ns(e,t){return D.or(Object.values(this.bs).map(l=>()=>l.containsKey(e,t)))}}class mg extends Gl{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.ks=new Ud,this.Ms=null}static Os(e){return new Yp(e)}get Fs(){if(this.Ms)return this.Ms;throw Vn()}addReference(e,t,l){return this.ks.addReference(l,t),this.Fs.delete(l.toString()),D.resolve()}removeReference(e,t,l){return this.ks.removeReference(l,t),this.Fs.add(l.toString()),D.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),D.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(f=>this.Fs.add(f.toString()));const l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(e,t.targetId).next(f=>{f.forEach(v=>this.Fs.add(v.toString()))}).next(()=>l.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Fs,l=>{const f=bn.fromPath(l);return this.$s(e,f).next(v=>{v||t.removeEntry(f,An.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(l=>{l?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return D.or([()=>D.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class gg{constructor(e){this.wt=e}M(e,t,l,f){const v=new N("createOrUpgrade",t);var B;l<1&&f>=1&&(e.createObjectStore("owner"),(B=e).createObjectStore("mutationQueues",{keyPath:"userId"}),B.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hd,{unique:!0}),B.createObjectStore("documentMutations"),_g(e),function(B){B.createObjectStore("remoteDocuments")}(e));let S=D.resolve();return l<3&&f>=3&&(0!==l&&(function(B){B.deleteObjectStore("targetDocuments"),B.deleteObjectStore("targets"),B.deleteObjectStore("targetGlobal")}(e),_g(e)),S=S.next(()=>function(B){const oe=B.store("targetGlobal"),ue={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:An.min().toTimestamp(),targetCount:0};return oe.put("targetGlobalKey",ue)}(v))),l<4&&f>=4&&(0!==l&&(S=S.next(()=>function(B,oe){return oe.store("mutations").K().next(ue=>{B.deleteObjectStore("mutations"),B.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hd,{unique:!0});const Te=oe.store("mutations"),at=ue.map(Vt=>Te.put(Vt));return D.waitFor(at)})}(e,v))),S=S.next(()=>{!function(B){B.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),l<5&&f>=5&&(S=S.next(()=>this.Bs(v))),l<6&&f>=6&&(S=S.next(()=>(function(B){B.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(v)))),l<7&&f>=7&&(S=S.next(()=>this.Us(v))),l<8&&f>=8&&(S=S.next(()=>this.qs(e,v))),l<9&&f>=9&&(S=S.next(()=>{!function(B){B.objectStoreNames.contains("remoteDocumentChanges")&&B.deleteObjectStore("remoteDocumentChanges")}(e)})),l<10&&f>=10&&(S=S.next(()=>this.Ks(v))),l<11&&f>=11&&(S=S.next(()=>{(function(B){B.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(B){B.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),l<12&&f>=12&&(S=S.next(()=>{!function(B){const oe=B.createObjectStore("documentOverlays",{keyPath:Jh});oe.createIndex("collectionPathOverlayIndex",Ld,{unique:!1}),oe.createIndex("collectionGroupOverlayIndex",mh,{unique:!1})}(e)})),l<13&&f>=13&&(S=S.next(()=>function(B){const oe=B.createObjectStore("remoteDocumentsV14",{keyPath:Nd});oe.createIndex("documentKeyIndex",Wh),oe.createIndex("collectionGroupIndex",Fd)}(e)).next(()=>this.Gs(e,v)).next(()=>e.deleteObjectStore("remoteDocuments"))),l<14&&f>=14&&(S=S.next(()=>this.Qs(e,v))),l<15&&f>=15&&(S=S.next(()=>function(B){B.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),B.createObjectStore("indexState",{keyPath:ph}).createIndex("sequenceNumberIndex",Uf,{unique:!1}),B.createObjectStore("indexEntries",{keyPath:Hf}).createIndex("documentKeyIndex",Qh,{unique:!1})}(e))),S}Ls(e){let t=0;return e.store("remoteDocuments").J((l,f)=>{t+=Kt(f)}).next(()=>{const l={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",l)})}Bs(e){const t=e.store("mutationQueues"),l=e.store("mutations");return t.K().next(f=>D.forEach(f,v=>{const S=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return l.K("userMutationsIndex",S).next(B=>D.forEach(B,oe=>{Fn(oe.userId===v.userId);const ue=y(this.wt,oe);return $t(e,v.userId,ue).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),l=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(f=>{const v=[];return l.J((S,B)=>{const oe=new gr(S),ue=[0,mc(oe)];v.push(t.get(ue).next(Te=>Te?D.resolve():t.put({targetId:0,path:mc(oe),sequenceNumber:f.highestListenSequenceNumber})))}).next(()=>D.waitFor(v))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:Yh});const l=t.store("collectionParents"),f=new p,v=S=>{if(f.add(S)){const B=S.lastSegment(),oe=S.popLast();return l.put({collectionId:B,parent:mc(oe)})}};return t.store("remoteDocuments").J({H:!0},(S,B)=>{const oe=new gr(S);return v(oe.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([S,B,oe],ue)=>{const Te=Uc(B);return v(Te.popLast())}))}Ks(e){const t=e.store("targets");return t.J((l,f)=>{const v=V(f),S=s(this.wt,v);return t.put(S)})}Gs(e,t){const l=t.store("remoteDocuments"),f=[];return l.J((v,S)=>{const B=t.store("remoteDocumentsV14"),oe=(ue=S,ue.document?new bn(gr.fromString(ue.document.name).popFirst(5)):ue.noDocument?bn.fromSegments(ue.noDocument.path):ue.unknownDocument?bn.fromSegments(ue.unknownDocument.path):Vn()).path.toArray();var ue;const Te={prefixPath:oe.slice(0,oe.length-2),collectionGroup:oe[oe.length-2],documentId:oe[oe.length-1],readTime:S.readTime||[0,0],unknownDocument:S.unknownDocument,noDocument:S.noDocument,document:S.document,hasCommittedMutations:!!S.hasCommittedMutations};f.push(B.put(Te))}).next(()=>D.waitFor(f))}Qs(e,t){const l=t.store("mutations"),f=Wp(this.wt),v=new Gf(Yp.Os,this.wt.ne);return l.K().next(S=>{const B=new Map;return S.forEach(oe=>{var ue;let Te=null!==(ue=B.get(oe.userId))&&void 0!==ue?ue:Di();y(this.wt,oe).keys().forEach(at=>Te=Te.add(at)),B.set(oe.userId,Te)}),D.forEach(B,(oe,ue)=>{const Te=new ur(ue),at=wn.se(this.wt,Te),Vt=v.getIndexManager(Te),ln=an.se(Te,this.wt,Vt,v.referenceDelegate);return new zf(f,ln,at,Vt).recalculateAndSaveOverlaysForDocumentKeys(new Is(t,Bi.ot),oe).next()})})}}function _g(o){o.createObjectStore("targetDocuments",{keyPath:Zh}).createIndex("documentTargetsIndex",qh,{unique:!0}),o.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qu,{unique:!0}),o.createObjectStore("targetGlobal")}const $f="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qp{constructor(e,t,l,f,v,S,B,oe,ue,Te,at=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=l,this.js=v,this.window=S,this.document=B,this.Ws=ue,this.zs=Te,this.Hs=at,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=Vt=>Promise.resolve(),!Qp.V())throw new sn(Ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cy(this,f),this.ei=t+"main",this.wt=new pd(oe),this.ni=new R(this.ei,this.Hs,new gg(this.wt)),this.Vs=new lu(this.referenceDelegate,this.wt),this.remoteDocumentCache=Wp(this.wt),this.Ds=new et,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===Te&&Fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new sn(Ht.FAILED_PRECONDITION,$f);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Bi(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var l=(0,ot.Z)(function*(f){if(t.started)return e(f)});return function(f){return l.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ot.Z)(function*(l){null===l.newVersion&&(yield e())});return function(l){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ot.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(me(e))return pn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return rf(e).get("owner").next(t=>D.resolve(this.di(t)))}_i(e){return Jc(e).delete(this.clientId)}wi(){var e=this;return(0,ot.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",l=>{const f=ks(l,"clientMetadata");return f.K().next(v=>{const S=e.gi(v,18e5),B=v.filter(oe=>-1===S.indexOf(oe));return D.forEach(B,oe=>f.delete(oe.clientId)).next(()=>B)})}).catch(()=>[]);if(e.si)for(const l of t)e.si.removeItem(e.yi(l.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?D.resolve(!0):rf(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new sn(Ht.FAILED_PRECONDITION,$f);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jc(e).K().next(l=>void 0===this.gi(l,5e3).find(f=>{if(this.clientId!==f.clientId){const S=!this.inForeground&&f.inForeground,B=this.networkEnabled===f.networkEnabled;if(!this.networkEnabled&&f.networkEnabled||S&&B)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&pn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ot.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const l=new Is(t,Bi.ot);return e.li(l).next(()=>e._i(l))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(l=>this.mi(l.updateTimeMs,t)&&!this.pi(l.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Jc(e).K().next(t=>this.gi(t,18e5).map(l=>l.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return an.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new h(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return wn.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,l){pn("IndexedDbPersistence","Starting transaction:",e);const f="readonly"===t?"readonly":"readwrite",v=15===(S=this.Hs)?gu:14===S?_h:13===S?Vd:12===S?Xh:11===S?gh:void Vn();var S;let B;return this.ni.runTransaction(e,f,v,oe=>(B=new Is(oe,this.Ps?this.Ps.next():Bi.ot),"readwrite-primary"===t?this.ai(B).next(ue=>!!ue||this.hi(B)).next(ue=>{if(!ue)throw Fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new sn(Ht.FAILED_PRECONDITION,Ja);return l(B)}).next(ue=>this.fi(B).next(()=>ue)):this.bi(B).next(()=>l(B)))).then(oe=>(B.raiseOnCommittedEvent(),oe))}bi(e){return rf(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new sn(Ht.FAILED_PRECONDITION,$f)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rf(e).put("owner",t)}static V(){return R.V()}li(e){const t=rf(e);return t.get("owner").next(l=>this.di(l)?(pn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):D.resolve())}mi(e,t){const l=Date.now();return!(e<l-t||e>l&&(Fr(`Detected an update time that is in the future: ${e} > ${l}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,nt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const l=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return pn("IndexedDbPersistence",`Client '${e}' ${l?"is":"is not"} zombied in LocalStorage`),l}catch(l){return Fr("IndexedDbPersistence","Failed to get zombied client id.",l),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Fr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rf(o){return ks(o,"owner")}function Jc(o){return ks(o,"clientMetadata")}function Jp(o,e){let t=o.projectId;return o.isDefaultDatabase||(t+="."+o.database),"firestore/"+e+"/"+t+"/"}class Kf{constructor(e,t,l,f){this.targetId=e,this.fromCache=t,this.Pi=l,this.vi=f}static Vi(e,t){let l=Di(),f=Di();for(const v of t.docChanges)switch(v.type){case 0:l=l.add(v.doc.key);break;case 1:f=f.add(v.doc.key)}return new Kf(e,t.fromCache,l,f)}}class yg{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,l,f){return this.Ci(e,t).next(v=>v||this.xi(e,t,f,l)).next(v=>v||this.Ni(e,t))}Ci(e,t){if(ga(t))return D.resolve(null);let l=Bs(t);return this.indexManager.getIndexType(e,l).next(f=>0===f?null:(null!==t.limit&&1===f&&(t=F(t,null,"F"),l=Bs(t)),this.indexManager.getDocumentsMatchingTarget(e,l).next(v=>{const S=Di(...v);return this.Di.getDocuments(e,S).next(B=>this.indexManager.getMinOffset(e,l).next(oe=>{const ue=this.ki(t,B);return this.Mi(t,ue,S,oe.readTime)?this.Ci(e,F(t,null,"F")):this.Oi(e,ue,t,oe)}))})))}xi(e,t,l,f){return ga(t)||f.isEqual(An.min())?this.Ni(e,t):this.Di.getDocuments(e,l).next(v=>{const S=this.ki(t,v);return this.Mi(t,S,l,f)?this.Ni(e,t):(ha()<=we.in.DEBUG&&pn("QueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),U(t)),this.Oi(e,S,t,zl(f,-1)))})}ki(e,t){let l=new qi(St(e));return t.forEach((f,v)=>{de(e,v)&&(l=l.add(v))}),l}Mi(e,t,l,f){if(null===e.limit)return!1;if(l.size!==t.size)return!0;const v="F"===e.limitType?t.last():t.first();return!!v&&(v.hasPendingWrites||v.version.compareTo(f)>0)}Ni(e,t){return ha()<=we.in.DEBUG&&pn("QueryEngine","Using full collection scan to execute query:",U(t)),this.Di.getDocumentsMatchingQuery(e,t,Lr.min())}Oi(e,t,l,f){return this.Di.getDocumentsMatchingQuery(e,l,f).next(v=>(t.forEach(S=>{v=v.insert(S.key,S)}),v))}}class fy{constructor(e,t,l,f){this.persistence=e,this.Fi=t,this.wt=f,this.$i=new Mr(Mi),this.Bi=new Bn(v=>$(v),ve),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(l)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zf(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function vg(o,e,t,l){return new fy(o,e,t,l)}function bg(o,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,ot.Z)(function*(o,e){const t=Dn(o);return yield t.persistence.runTransaction("Handle user change","readonly",l=>{let f;return t.mutationQueue.getAllMutationBatches(l).next(v=>(f=v,t.qi(e),t.mutationQueue.getAllMutationBatches(l))).next(v=>{const S=[],B=[];let oe=Di();for(const ue of f){S.push(ue.batchId);for(const Te of ue.mutations)oe=oe.add(Te.key)}for(const ue of v){B.push(ue.batchId);for(const Te of ue.mutations)oe=oe.add(Te.key)}return t.localDocuments.getDocuments(l,oe).next(ue=>({Ki:ue,removedBatchIds:S,addedBatchIds:B}))})})}),Wf.apply(this,arguments)}function py(o,e){const t=Dn(o);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",l=>{const f=e.batch.keys(),v=t.Ui.newChangeBuffer({trackRemovals:!0});return function(S,B,oe,ue){const Te=oe.batch,at=Te.keys();let Vt=D.resolve();return at.forEach(ln=>{Vt=Vt.next(()=>ue.getEntry(B,ln)).next(dn=>{const zn=oe.docVersions.get(ln);Fn(null!==zn),dn.version.compareTo(zn)<0&&(Te.applyToRemoteDocument(dn,oe),dn.isValidDocument()&&(dn.setReadTime(oe.commitVersion),ue.addEntry(dn)))})}),Vt.next(()=>S.mutationQueue.removeMutationBatch(B,Te))}(t,l,e,v).next(()=>v.apply(l)).next(()=>t.mutationQueue.performConsistencyCheck(l)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(l,f,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,function(S){let B=Di();for(let oe=0;oe<S.mutationResults.length;++oe)S.mutationResults[oe].transformResults.length>0&&(B=B.add(S.batch.mutations[oe].key));return B}(e))).next(()=>t.localDocuments.getDocuments(l,f))})}function wg(o){const e=Dn(o);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function my(o,e){const t=Dn(o),l=e.snapshotVersion;let f=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",v=>{const S=t.Ui.newChangeBuffer({trackRemovals:!0});f=t.$i;const B=[];e.targetChanges.forEach((Te,at)=>{const Vt=f.get(at);if(!Vt)return;B.push(t.Vs.removeMatchingKeys(v,Te.removedDocuments,at).next(()=>t.Vs.addMatchingKeys(v,Te.addedDocuments,at)));let ln=Vt.withSequenceNumber(v.currentSequenceNumber);var dn,zn,Ri;e.targetMismatches.has(at)?ln=ln.withResumeToken(co.EMPTY_BYTE_STRING,An.min()).withLastLimboFreeSnapshotVersion(An.min()):Te.resumeToken.approximateByteSize()>0&&(ln=ln.withResumeToken(Te.resumeToken,l)),f=f.insert(at,ln),zn=ln,Ri=Te,(0===(dn=Vt).resumeToken.approximateByteSize()||zn.snapshotVersion.toMicroseconds()-dn.snapshotVersion.toMicroseconds()>=3e8||Ri.addedDocuments.size+Ri.modifiedDocuments.size+Ri.removedDocuments.size>0)&&B.push(t.Vs.updateTargetData(v,ln))});let oe=ui(),ue=Di();if(e.documentUpdates.forEach(Te=>{e.resolvedLimboDocuments.has(Te)&&B.push(t.persistence.referenceDelegate.updateLimboDocument(v,Te))}),B.push(Ur(v,S,e.documentUpdates).next(Te=>{oe=Te.Gi,ue=Te.Qi})),!l.isEqual(An.min())){const Te=t.Vs.getLastRemoteSnapshotVersion(v).next(at=>t.Vs.setTargetsMetadata(v,v.currentSequenceNumber,l));B.push(Te)}return D.waitFor(B).next(()=>S.apply(v)).next(()=>t.localDocuments.getLocalViewOfDocuments(v,oe,ue)).next(()=>oe)}).then(v=>(t.$i=f,v))}function Ur(o,e,t){let l=Di(),f=Di();return t.forEach(v=>l=l.add(v)),e.getEntries(o,l).next(v=>{let S=ui();return t.forEach((B,oe)=>{const ue=v.get(B);oe.isFoundDocument()!==ue.isFoundDocument()&&(f=f.add(B)),oe.isNoDocument()&&oe.version.isEqual(An.min())?(e.removeEntry(B,oe.readTime),S=S.insert(B,oe)):!ue.isValidDocument()||oe.version.compareTo(ue.version)>0||0===oe.version.compareTo(ue.version)&&ue.hasPendingWrites?(e.addEntry(oe),S=S.insert(B,oe)):pn("LocalStore","Ignoring outdated watch update for ",B,". Current version:",ue.version," Watch version:",oe.version)}),{Gi:S,Qi:f}})}function Cg(o,e){const t=Dn(o);return t.persistence.runTransaction("Get next mutation batch","readonly",l=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(l,e)))}function Hd(o,e){const t=Dn(o);return t.persistence.runTransaction("Allocate target","readwrite",l=>{let f;return t.Vs.getTargetData(l,e).next(v=>v?(f=v,D.resolve(f)):t.Vs.allocateTargetId(l).next(S=>(f=new Rc(e,S,0,l.currentSequenceNumber),t.Vs.addTargetData(l,f).next(()=>f))))}).then(l=>{const f=t.$i.get(l.targetId);return(null===f||l.snapshotVersion.compareTo(f.snapshotVersion)>0)&&(t.$i=t.$i.insert(l.targetId,l),t.Bi.set(e,l.targetId)),l})}function jd(o,e,t){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,ot.Z)(function*(o,e,t){const l=Dn(o),f=l.$i.get(e),v=t?"readwrite":"readwrite-primary";try{t||(yield l.persistence.runTransaction("Release target",v,S=>l.persistence.referenceDelegate.removeTarget(S,f)))}catch(S){if(!me(S))throw S;pn("LocalStore",`Failed to update sequence numbers for target ${e}: ${S}`)}l.$i=l.$i.remove(e),l.Bi.delete(f.target)}),Xp.apply(this,arguments)}function Zf(o,e,t){const l=Dn(o);let f=An.min(),v=Di();return l.persistence.runTransaction("Execute query","readonly",S=>function(B,oe,ue){const Te=Dn(B),at=Te.Bi.get(ue);return void 0!==at?D.resolve(Te.$i.get(at)):Te.Vs.getTargetData(oe,ue)}(l,S,Bs(e)).next(B=>{if(B)return f=B.lastLimboFreeSnapshotVersion,l.Vs.getMatchingKeysForTargetId(S,B.targetId).next(oe=>{v=oe})}).next(()=>l.Fi.getDocumentsMatchingQuery(S,e,t?f:An.min(),t?v:Di())).next(B=>(tm(l,Ae(e),B),{documents:B,ji:v})))}function em(o,e){const t=Dn(o),l=Dn(t.Vs),f=t.$i.get(e);return f?Promise.resolve(f.target):t.persistence.runTransaction("Get target data","readonly",v=>l.te(v,e).next(S=>S?S.target:null))}function Eg(o,e){const t=Dn(o),l=t.Li.get(e)||An.min();return t.persistence.runTransaction("Get new document changes","readonly",f=>t.Ui.getAllFromCollectionGroup(f,e,zl(l,-1),Number.MAX_SAFE_INTEGER)).then(f=>(tm(t,e,f),f))}function tm(o,e,t){let l=An.min();t.forEach((f,v)=>{v.readTime.compareTo(l)>0&&(l=v.readTime)}),o.Li.set(e,l)}function nm(){return nm=(0,ot.Z)(function*(o,e,t,l){const f=Dn(o);let v=Di(),S=ui();for(const ue of t){const Te=e.Wi(ue.metadata.name);ue.document&&(v=v.add(Te));const at=e.zi(ue);at.setReadTime(e.Hi(ue.metadata.readTime)),S=S.insert(Te,at)}const B=f.Ui.newChangeBuffer({trackRemovals:!0}),oe=yield Hd(f,(ue=l,Bs(Vl(gr.fromString(`__bundle__/docs/${ue}`)))));var ue;return f.persistence.runTransaction("Apply bundle documents","readwrite",ue=>Ur(ue,B,S).next(Te=>(B.apply(ue),Te)).next(Te=>f.Vs.removeMatchingKeysForTargetId(ue,oe.targetId).next(()=>f.Vs.addMatchingKeys(ue,v,oe.targetId)).next(()=>f.localDocuments.getLocalViewOfDocuments(ue,Te.Gi,Te.Qi)).next(()=>Te.Gi)))}),nm.apply(this,arguments)}function sb(o,e){return qf.apply(this,arguments)}function qf(){return qf=(0,ot.Z)(function*(o,e,t=Di()){const l=yield Hd(o,Bs(u(e.bundledQuery))),f=Dn(o);return f.persistence.runTransaction("Save named query","readwrite",v=>{const S=rs(e.readTime);if(l.snapshotVersion.compareTo(S)>=0)return f.Ds.saveNamedQuery(v,e);const B=l.withResumeToken(co.EMPTY_BYTE_STRING,S);return f.$i=f.$i.insert(B.targetId,B),f.Vs.updateTargetData(v,B).next(()=>f.Vs.removeMatchingKeysForTargetId(v,l.targetId)).next(()=>f.Vs.addMatchingKeys(v,t,l.targetId)).next(()=>f.Ds.saveNamedQuery(v,e))})}),qf.apply(this,arguments)}function im(o,e){return`firestore_clients_${o}_${e}`}function gd(o,e,t){let l=`firestore_mutations_${o}_${t}`;return e.isAuthenticated()&&(l+=`_${e.uid}`),l}function rm(o,e){return`firestore_targets_${o}_${e}`}class bh{constructor(e,t,l,f){this.user=e,this.batchId=t,this.state=l,this.error=f}static Ji(e,t,l){const f=JSON.parse(l);let v,S="object"==typeof f&&-1!==["pending","acknowledged","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error);return S&&f.error&&(S="string"==typeof f.error.message&&"string"==typeof f.error.code,S&&(v=new sn(f.error.code,f.error.message))),S?new bh(e,t,f.state,v):(Fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${l}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zd{constructor(e,t,l){this.targetId=e,this.state=t,this.error=l}static Ji(e,t){const l=JSON.parse(t);let f,v="object"==typeof l&&-1!==["not-current","current","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return v&&l.error&&(v="string"==typeof l.error.message&&"string"==typeof l.error.code,v&&(f=new sn(l.error.code,l.error.message))),v?new zd(e,l.state,f):(Fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const l=JSON.parse(t);let f="object"==typeof l&&l.activeTargetIds instanceof Array,v=Qc();for(let S=0;f&&S<l.activeTargetIds.length;++S)f=gt(l.activeTargetIds[S]),v=v.add(l.activeTargetIds[S]);return f?new Yf(e,v):(Fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Tg{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Tg(t.clientId,t.onlineState):(Fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ig{constructor(){this.activeTargetIds=Qc()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sg{constructor(e,t,l,f,v){this.window=e,this.js=t,this.persistenceKey=l,this.tr=f,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Mr(Mi),this.started=!1,this.ir=[];const S=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=v,this.rr=im(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Ig),this.cr=new RegExp(`^firestore_clients_${S}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${S}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${S}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(B){return`firestore_bundle_loaded_v2_${B}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ot.Z)(function*(){const t=yield e.syncEngine.Ri();for(const f of t){if(f===e.tr)continue;const v=e.getItem(im(e.persistenceKey,f));if(v){const S=Yf.Ji(f,v);S&&(e.sr=e.sr.insert(S.clientId,S))}}e._r();const l=e.storage.getItem(e.lr);if(l){const f=e.wr(l);f&&e.mr(f)}for(const f of e.ir)e.nr(f);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((l,f)=>{f.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,l){this.yr(e,t,l),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(rm(this.persistenceKey,e));if(l){const f=zd.Ji(e,l);f&&(t=f.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rm(this.persistenceKey,e))}updateQueryState(e,t,l){this.Tr(e,t,l)}handleUserChange(e,t,l){t.forEach(f=>{this.pr(f)}),this.currentUser=e,l.forEach(f=>{this.addPendingMutation(f)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return pn("SharedClientState","READ",e,t),t}setItem(e,t){pn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){pn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const l=e;if(l.storageArea===this.storage){if(pn("SharedClientState","EVENT",l.key,l.newValue),l.key===this.rr)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ot.Z)(function*(){if(t.started){if(null!==l.key)if(t.cr.test(l.key)){if(null==l.newValue){const f=t.Rr(l.key);return t.br(f,null)}{const f=t.Pr(l.key,l.newValue);if(f)return t.br(f.clientId,f)}}else if(t.ar.test(l.key)){if(null!==l.newValue){const f=t.vr(l.key,l.newValue);if(f)return t.Vr(f)}}else if(t.hr.test(l.key)){if(null!==l.newValue){const f=t.Sr(l.key,l.newValue);if(f)return t.Dr(f)}}else if(l.key===t.lr){if(null!==l.newValue){const f=t.wr(l.newValue);if(f)return t.mr(f)}}else if(l.key===t.ur){const f=function(v){let S=Bi.ot;if(null!=v)try{const B=JSON.parse(v);Fn("number"==typeof B),S=B}catch(B){Fr("SharedClientState","Failed to read sequence number from WebStorage",B)}return S}(l.newValue);f!==Bi.ot&&t.sequenceNumberHandler(f)}else if(l.key===t.dr){const f=t.Cr(l.newValue);yield Promise.all(f.map(v=>t.syncEngine.Nr(v)))}}else t.ir.push(l)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,l){const f=new bh(this.currentUser,e,t,l),v=gd(this.persistenceKey,this.currentUser,e);this.setItem(v,f.Yi())}pr(e){const t=gd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,l){const f=rm(this.persistenceKey,e),v=new zd(e,t,l);this.setItem(f,v.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const l=this.Rr(e);return Yf.Ji(l,t)}vr(e,t){const l=this.ar.exec(e),f=Number(l[1]);return bh.Ji(new ur(void 0!==l[2]?l[2]:null),f,t)}Sr(e,t){const l=this.hr.exec(e),f=Number(l[1]);return zd.Ji(f,t)}wr(e){return Tg.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ot.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);pn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const l=t?this.sr.insert(e,t):this.sr.remove(e),f=this.gr(this.sr),v=this.gr(l),S=[],B=[];return v.forEach(oe=>{f.has(oe)||S.push(oe)}),f.forEach(oe=>{v.has(oe)||B.push(oe)}),this.syncEngine.Or(S,B).then(()=>{this.sr=l})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Qc();return e.forEach((l,f)=>{t=t.unionWith(f.activeTargetIds)}),t}}class Dg{constructor(){this.Fr=new Ig,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,l){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,l){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Ig,Promise.resolve()}handleUserChange(e,t,l){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xg{Br(e){}shutdown(){}}class _y{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){pn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){pn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class wh{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class vy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,l,f,v){const S=this.oo(e,t);pn("RestConnection","Sending: ",S,l);const B={};return this.uo(B,f,v),this.co(e,S,B,l).then(oe=>(pn("RestConnection","Received: ",oe),oe),oe=>{throw sa("RestConnection",`${e} failed with error: `,oe,"url: ",S,"request:",l),oe})}ao(e,t,l,f,v,S){return this.ro(e,t,l,f,v)}uo(e,t,l){e["X-Goog-Api-Client"]="gl-js/ fire/"+wl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((f,v)=>e[v]=f),l&&l.headers.forEach((f,v)=>e[v]=f)}oo(e,t){return`${this.so}/v1/${t}:${yy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,l,f){return new Promise((v,S)=>{const B=new Qs;B.listenOnce(ra.COMPLETE,()=>{try{switch(B.getLastErrorCode()){case $r.NO_ERROR:const ue=B.getResponseJson();pn("Connection","XHR received:",JSON.stringify(ue)),v(ue);break;case $r.TIMEOUT:pn("Connection",'RPC "'+e+'" timed out'),S(new sn(Ht.DEADLINE_EXCEEDED,"Request time out"));break;case $r.HTTP_ERROR:const Te=B.getStatus();if(pn("Connection",'RPC "'+e+'" failed with status:',Te,"response text:",B.getResponseText()),Te>0){const at=B.getResponseJson().error;if(at&&at.status&&at.message){const Vt=function(ln){const dn=ln.toLowerCase().replace(/_/g,"-");return Object.values(Ht).indexOf(dn)>=0?dn:Ht.UNKNOWN}(at.status);S(new sn(Vt,at.message))}else S(new sn(Ht.UNKNOWN,"Server responded with status "+B.getStatus()))}else S(new sn(Ht.UNAVAILABLE,"Connection failed."));break;default:Vn()}}finally{pn("Connection",'RPC "'+e+'" completed.')}});const oe=JSON.stringify(f);B.send(t,"POST",oe,l,15)})}ho(e,t,l){const f=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=Cs(),S=Ya(),B={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(B.xmlHttpFactory=new Fs({})),this.uo(B.initMessageHeaders,t,l),(0,nt.uI)()||(0,nt.b$)()||(0,nt.d)()||(0,nt.w1)()||(0,nt.Mn)()||(0,nt.ru)()||(B.httpHeadersOverwriteParam="$httpHeaders");const oe=f.join("");pn("Connection","Creating WebChannel: "+oe,B);const ue=v.createWebChannel(oe,B);let Te=!1,at=!1;const Vt=new wh({jr:dn=>{at?pn("Connection","Not sending because WebChannel is closed:",dn):(Te||(pn("Connection","Opening WebChannel transport."),ue.open(),Te=!0),pn("Connection","WebChannel sending:",dn),ue.send(dn))},Wr:()=>ue.close()}),ln=(dn,zn,Ri)=>{dn.listen(zn,js=>{try{Ri(js)}catch(Yo){setTimeout(()=>{throw Yo},0)}})};return ln(ue,bl.EventType.OPEN,()=>{at||pn("Connection","WebChannel transport opened.")}),ln(ue,bl.EventType.CLOSE,()=>{at||(at=!0,pn("Connection","WebChannel transport closed"),Vt.eo())}),ln(ue,bl.EventType.ERROR,dn=>{at||(at=!0,sa("Connection","WebChannel transport errored:",dn),Vt.eo(new sn(Ht.UNAVAILABLE,"The operation could not be completed")))}),ln(ue,bl.EventType.MESSAGE,dn=>{var zn;if(!at){const Ri=dn.data[0];Fn(!!Ri);const js=Ri,Yo=js.error||(null===(zn=js[0])||void 0===zn?void 0:zn.error);if(Yo){pn("Connection","WebChannel received error:",Yo);const Ro=Yo.status;let _a=function(Vo){const ac=nn[Vo];if(void 0!==ac)return mi(ac)}(Ro),Os=Yo.message;void 0===_a&&(_a=Ht.INTERNAL,Os="Unknown error status: "+Ro+" with message "+Yo.message),at=!0,Vt.eo(new sn(_a,Os)),ue.close()}else pn("Connection","WebChannel received:",Ri),Vt.no(Ri)}}),ln(S,Rl.STAT_EVENT,dn=>{dn.stat===cc.PROXY?pn("Connection","Detected buffering proxy"):dn.stat===cc.NOPROXY&&pn("Connection","Detected no buffering proxy")}),setTimeout(()=>{Vt.Zr()},0),Vt}}function sm(){return typeof window<"u"?window:null}function Gd(){return typeof document<"u"?document:null}function sf(o){return new Lc(o,!0)}class Qf{constructor(e,t,l=1e3,f=1.5,v=6e4){this.js=e,this.timerId=t,this.lo=l,this.fo=f,this._o=v,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),l=Math.max(0,Date.now()-this.yo),f=Math.max(0,t-l);f>0&&pn("ExponentialBackoff",`Backing off for ${f} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${l} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,f,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Ag{constructor(e,t,l,f,v,S,B,oe){this.js=e,this.Ao=l,this.Ro=f,this.bo=v,this.authCredentialsProvider=S,this.appCheckCredentialsProvider=B,this.listener=oe,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Qf(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ot.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ot.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var l=this;return(0,ot.Z)(function*(){l.Fo(),l.$o(),l.So.cancel(),l.Po++,4!==e?l.So.reset():t&&t.code===Ht.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),l.So.po()):t&&t.code===Ht.UNAUTHENTICATED&&3!==l.state&&(l.authCredentialsProvider.invalidateToken(),l.appCheckCredentialsProvider.invalidateToken()),null!==l.stream&&(l.Bo(),l.stream.close(),l.stream=null),l.state=e,yield l.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([l,f])=>{this.Po===t&&this.Uo(l,f)},l=>{e(()=>{const f=new sn(Ht.UNKNOWN,"Fetching auth token failed: "+l.message);return this.qo(f)})})}Uo(e,t){const l=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{l(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(f=>{l(()=>this.qo(f))}),this.stream.onMessage(f=>{l(()=>this.onMessage(f))})}xo(){var e=this;this.state=5,this.So.Io((0,ot.Z)(function*(){e.state=0,e.start()}))}qo(e){return pn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(pn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class by extends Ag{constructor(e,t,l,f,v,S){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,l,f,S),this.wt=v}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Vf(o,e){let t;if("targetChange"in e){const l="NO_CHANGE"===(oe=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===oe?1:"REMOVE"===oe?2:"CURRENT"===oe?3:"RESET"===oe?4:Vn(),f=e.targetChange.targetIds||[],v=function(oe,ue){return oe.dt?(Fn(void 0===ue||"string"==typeof ue),co.fromBase64String(ue||"")):(Fn(void 0===ue||ue instanceof Uint8Array),co.fromUint8Array(ue||new Uint8Array))}(o,e.targetChange.resumeToken),S=e.targetChange.cause,B=S&&function(oe){const ue=void 0===oe.code?Ht.UNKNOWN:mi(oe.code);return new sn(ue,oe.message||"")}(S);t=new Jn(l,f,v,B||null)}else if("documentChange"in e){const l=e.documentChange,f=sc(o,l.document.name),v=rs(l.document.updateTime),S=new Ko({mapValue:{fields:l.document.fields}}),B=_s.newFoundDocument(f,v,S);t=new mu(l.targetIds||[],l.removedTargetIds||[],B.key,B)}else if("documentDelete"in e){const l=e.documentDelete,f=sc(o,l.document),v=l.readTime?rs(l.readTime):An.min(),S=_s.newNoDocument(f,v);t=new mu([],l.removedTargetIds||[],S.key,S)}else if("documentRemove"in e){const l=e.documentRemove,f=sc(o,l.document);t=new mu([],l.removedTargetIds||[],f,null)}else{if(!("filter"in e))return Vn();{const l=e.filter,v=new Ft(l.count||0);t=new Iu(l.targetId,v)}}var oe;return t}(this.wt,e),l=function(f){if(!("targetChange"in f))return An.min();const v=f.targetChange;return v.targetIds&&v.targetIds.length?An.min():v.readTime?rs(v.readTime):An.min()}(e);return this.listener.Go(t,l)}Qo(e){const t={};t.database=au(this.wt),t.addTarget=function(f,v){let S;const B=v.target;return S=Je(B)?{documents:dh(f,B)}:{query:Ad(f,B)},S.targetId=v.targetId,v.resumeToken.approximateByteSize()>0?S.resumeToken=pl(f,v.resumeToken):v.snapshotVersion.compareTo(An.min())>0&&(S.readTime=eo(f,v.snapshotVersion.toTimestamp())),S}(this.wt,e);const l=function Md(o,e){const t=function(l,f){switch(f){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Vn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);l&&(t.labels=l),this.Oo(t)}jo(e){const t={};t.database=au(this.wt),t.removeTarget=e,this.Oo(t)}}class wy extends Ag{constructor(e,t,l,f,v,S){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,l,f,S),this.wt=v,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Fn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function zh(o,e){return o&&o.length>0?(Fn(void 0!==e),o.map(t=>function(l,f){let v=rs(l.updateTime?l.updateTime:f);return v.isEqual(An.min())&&(v=rs(f)),new Fc(v,l.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),l=rs(e.commitTime);return this.listener.Jo(l,t)}return Fn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=au(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(l=>Vu(this.wt,l))};this.Oo(t)}}class Cy extends class{}{constructor(e,t,l,f){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=l,this.wt=f,this.Zo=!1}tu(){if(this.Zo)throw new sn(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,l){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,v])=>this.bo.ro(e,t,l,f,v)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new sn(Ht.UNKNOWN,f.toString())})}ao(e,t,l,f){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([v,S])=>this.bo.ao(e,t,l,v,S,f)).catch(v=>{throw"FirebaseError"===v.name?(v.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),v):new sn(Ht.UNKNOWN,v.toString())})}terminate(){this.Zo=!0}}class Ey{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Fr(t),this.su=!1):pn("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Mg{constructor(e,t,l,f,v){var S=this;this.localStore=e,this.datastore=t,this.asyncQueue=l,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=v,this.du.Br(B=>{l.enqueueAndForget((0,ot.Z)(function*(){var oe;ed(S)&&(pn("RemoteStore","Restarting streams for network reachability change."),yield(oe=(0,ot.Z)(function*(ue){const Te=Dn(ue);Te.lu.add(4),yield $d(Te),Te._u.set("Unknown"),Te.lu.delete(4),yield af(Te)}),function(ue){return oe.apply(this,arguments)})(S))}))}),this._u=new Ey(l,f)}}function af(o){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,ot.Z)(function*(o){if(ed(o))for(const e of o.fu)yield e(!0)}),Jf.apply(this,arguments)}function $d(o){return lf.apply(this,arguments)}function lf(){return lf=(0,ot.Z)(function*(o){for(const e of o.fu)yield e(!1)}),lf.apply(this,arguments)}function om(o,e){const t=Dn(o);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Xf(t)?_d(t):Ch(t).Co()&&am(t,e))}function Kd(o,e){const t=Dn(o),l=Ch(t);t.hu.delete(e),l.Co()&&Ty(t,e),0===t.hu.size&&(l.Co()?l.ko():ed(t)&&t._u.set("Unknown"))}function am(o,e){o.wu.Nt(e.targetId),Ch(o).Qo(e)}function Ty(o,e){o.wu.Nt(e),Ch(o).jo(e)}function _d(o){o.wu=new Fi({getRemoteKeysForTarget:e=>o.remoteSyncer.getRemoteKeysForTarget(e),te:e=>o.hu.get(e)||null}),Ch(o).start(),o._u.iu()}function Xf(o){return ed(o)&&!Ch(o).Do()&&o.hu.size>0}function ed(o){return 0===Dn(o).lu.size}function cf(o){o.wu=void 0}function Au(o){return ep.apply(this,arguments)}function ep(){return ep=(0,ot.Z)(function*(o){o.hu.forEach((e,t)=>{am(o,e)})}),ep.apply(this,arguments)}function Iy(o,e){return uf.apply(this,arguments)}function uf(){return uf=(0,ot.Z)(function*(o,e){cf(o),Xf(o)?(o._u.uu(e),_d(o)):o._u.set("Unknown")}),uf.apply(this,arguments)}function td(o,e,t){return df.apply(this,arguments)}function df(){return df=(0,ot.Z)(function*(o,e,t){if(o._u.set("Online"),e instanceof Jn&&2===e.state&&e.cause)try{yield(l=(0,ot.Z)(function*(f,v){const S=v.cause;for(const B of v.targetIds)f.hu.has(B)&&(yield f.remoteSyncer.rejectListen(B,S),f.hu.delete(B),f.wu.removeTarget(B))}),function(f,v){return l.apply(this,arguments)})(o,e)}catch(l){pn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),l),yield hf(o,l)}else if(e instanceof mu?o.wu.Ut(e):e instanceof Iu?o.wu.zt(e):o.wu.Gt(e),!t.isEqual(An.min()))try{const l=yield wg(o.localStore);t.compareTo(l)>=0&&(yield function(f,v){const S=f.wu.Yt(v);return S.targetChanges.forEach((B,oe)=>{if(B.resumeToken.approximateByteSize()>0){const ue=f.hu.get(oe);ue&&f.hu.set(oe,ue.withResumeToken(B.resumeToken,v))}}),S.targetMismatches.forEach(B=>{const oe=f.hu.get(B);if(!oe)return;f.hu.set(B,oe.withResumeToken(co.EMPTY_BYTE_STRING,oe.snapshotVersion)),Ty(f,B);const ue=new Rc(oe.target,B,1,oe.sequenceNumber);am(f,ue)}),f.remoteSyncer.applyRemoteEvent(S)}(o,t))}catch(l){pn("RemoteStore","Failed to raise snapshot:",l),yield hf(o,l)}var l}),df.apply(this,arguments)}function hf(o,e,t){return ff.apply(this,arguments)}function ff(){return ff=(0,ot.Z)(function*(o,e,t){if(!me(e))throw e;o.lu.add(1),yield $d(o),o._u.set("Offline"),t||(t=()=>wg(o.localStore)),o.asyncQueue.enqueueRetryable((0,ot.Z)(function*(){pn("RemoteStore","Retrying IndexedDB access"),yield t(),o.lu.delete(1),yield af(o)}))}),ff.apply(this,arguments)}function Sy(o,e){return e().catch(t=>hf(o,t,e))}function Wd(o){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,ot.Z)(function*(o){const e=Dn(o),t=Uu(e);let l=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;tp(e);)try{const f=yield Cg(e.localStore,l);if(null===f){0===e.au.length&&t.ko();break}l=f.batchId,np(e,f)}catch(f){yield hf(e,f)}ip(e)&&rp(e)}),Rg.apply(this,arguments)}function tp(o){return ed(o)&&o.au.length<10}function np(o,e){o.au.push(e);const t=Uu(o);t.Co()&&t.zo&&t.Ho(e.mutations)}function ip(o){return ed(o)&&!Uu(o).Do()&&o.au.length>0}function rp(o){Uu(o).start()}function lm(o){return kg.apply(this,arguments)}function kg(){return kg=(0,ot.Z)(function*(o){Uu(o).Xo()}),kg.apply(this,arguments)}function Dy(o){return cm.apply(this,arguments)}function cm(){return cm=(0,ot.Z)(function*(o){const e=Uu(o);for(const t of o.au)e.Ho(t.mutations)}),cm.apply(this,arguments)}function xy(o,e,t){return um.apply(this,arguments)}function um(){return um=(0,ot.Z)(function*(o,e,t){const l=o.au.shift(),f=Yu.from(l,e,t);yield Sy(o,()=>o.remoteSyncer.applySuccessfulWrite(f)),yield Wd(o)}),um.apply(this,arguments)}function Og(o,e){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,ot.Z)(function*(o,e){var t;e&&Uu(o).zo&&(yield(t=(0,ot.Z)(function*(l,f){if(hi(v=f.code)&&v!==Ht.ABORTED){const S=l.au.shift();Uu(l).No(),yield Sy(l,()=>l.remoteSyncer.rejectFailedWrite(S.batchId,f)),yield Wd(l)}var v}),function(l,f){return t.apply(this,arguments)})(o,e)),ip(o)&&rp(o)}),Pg.apply(this,arguments)}function Ng(o,e){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,ot.Z)(function*(o,e){const t=Dn(o);t.asyncQueue.verifyOperationInProgress(),pn("RemoteStore","RemoteStore received new credentials");const l=ed(t);t.lu.add(3),yield $d(t),l&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield af(t)}),Fg.apply(this,arguments)}function sp(o,e){return op.apply(this,arguments)}function op(){return op=(0,ot.Z)(function*(o,e){const t=Dn(o);e?(t.lu.delete(2),yield af(t)):e||(t.lu.add(2),yield $d(t),t._u.set("Unknown"))}),op.apply(this,arguments)}function Ch(o){return o.mu||(o.mu=function(e,t,l){const f=Dn(e);return f.tu(),new by(t,f.bo,f.authCredentials,f.appCheckCredentials,f.wt,l)}(o.datastore,o.asyncQueue,{zr:Au.bind(null,o),Jr:Iy.bind(null,o),Go:td.bind(null,o)}),o.fu.push(function(){var e=(0,ot.Z)(function*(t){t?(o.mu.No(),Xf(o)?_d(o):o._u.set("Unknown")):(yield o.mu.stop(),cf(o))});return function(t){return e.apply(this,arguments)}}())),o.mu}function Uu(o){return o.gu||(o.gu=function(e,t,l){const f=Dn(e);return f.tu(),new wy(t,f.bo,f.authCredentials,f.appCheckCredentials,f.wt,l)}(o.datastore,o.asyncQueue,{zr:lm.bind(null,o),Jr:Og.bind(null,o),Yo:Dy.bind(null,o),Jo:xy.bind(null,o)}),o.fu.push(function(){var e=(0,ot.Z)(function*(t){t?(o.gu.No(),yield Wd(o)):(yield o.gu.stop(),o.au.length>0&&(pn("RemoteStore",`Stopping write stream with ${o.au.length} pending writes`),o.au=[]))});return function(t){return e.apply(this,arguments)}}())),o.gu}class Lg{constructor(e,t,l,f,v){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=l,this.op=f,this.removalCallback=v,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(S=>{})}static createAndSchedule(e,t,l,f,v){const S=Date.now()+l,B=new Lg(e,t,S,f,v);return B.start(l),B}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new sn(Ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pf(o,e){if(Fr("AsyncQueue",`${e}: ${o}`),me(o))return new sn(Ht.UNAVAILABLE,`${e}: ${o}`);throw o}class mf{constructor(e){this.comparator=e?(t,l)=>e(t,l)||bn.comparator(t.key,l.key):(t,l)=>bn.comparator(t.key,l.key),this.keyedMap=ns(),this.sortedSet=new Mr(this.comparator)}static emptySet(e){return new mf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,l)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),l=e.sortedSet.getIterator();for(;t.hasNext();){const f=t.getNext().key,v=l.getNext().key;if(!f.isEqual(v))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const l=new mf;return l.comparator=this.comparator,l.keyedMap=e,l.sortedSet=t,l}}class Ay{constructor(){this.yu=new Mr(bn.comparator)}track(e){const t=e.doc.key,l=this.yu.get(t);l?0!==e.type&&3===l.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==l.type?this.yu=this.yu.insert(t,{type:l.type,doc:e.doc}):2===e.type&&2===l.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===l.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===l.type?this.yu=this.yu.remove(t):1===e.type&&2===l.type?this.yu=this.yu.insert(t,{type:1,doc:l.doc}):0===e.type&&1===l.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Vn():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,l)=>{e.push(l)}),e}}class gf{constructor(e,t,l,f,v,S,B,oe){this.query=e,this.docs=t,this.oldDocs=l,this.docChanges=f,this.mutatedKeys=v,this.fromCache=S,this.syncStateChanged=B,this.excludesMetadataChanges=oe}static fromInitialDocuments(e,t,l,f){const v=[];return t.forEach(S=>{v.push({type:0,doc:S})}),new gf(e,t,mf.emptySet(t),v,l,f,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&E(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,l=e.docChanges;if(t.length!==l.length)return!1;for(let f=0;f<t.length;f++)if(t[f].type!==l[f].type||!t[f].doc.isEqual(l[f].doc))return!1;return!0}}class ob{constructor(){this.Iu=void 0,this.listeners=[]}}class ab{constructor(){this.queries=new Bn(e=>I(e),E),this.onlineState="Unknown",this.Tu=new Set}}function Vg(o,e){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,ot.Z)(function*(o,e){const t=Dn(o),l=e.query;let f=!1,v=t.queries.get(l);if(v||(f=!0,v=new ob),f)try{v.Iu=yield t.onListen(l)}catch(S){const B=pf(S,`Initialization of query '${U(e.query)}' failed`);return void e.onError(B)}t.queries.set(l,v),v.listeners.push(e),e.Eu(t.onlineState),v.Iu&&e.Au(v.Iu)&&ap(t)}),Bg.apply(this,arguments)}function Ug(o,e){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,ot.Z)(function*(o,e){const t=Dn(o),l=e.query;let f=!1;const v=t.queries.get(l);if(v){const S=v.listeners.indexOf(e);S>=0&&(v.listeners.splice(S,1),f=0===v.listeners.length)}if(f)return t.queries.delete(l),t.onUnlisten(l)}),Hu.apply(this,arguments)}function dm(o,e){const t=Dn(o);let l=!1;for(const f of e){const S=t.queries.get(f.query);if(S){for(const B of S.listeners)B.Au(f)&&(l=!0);S.Iu=f}}l&&ap(t)}function My(o,e,t){const l=Dn(o),f=l.queries.get(e);if(f)for(const v of f.listeners)v.onError(t);l.queries.delete(e)}function ap(o){o.Tu.forEach(e=>{e.next()})}class _f{constructor(e,t,l){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=l||{}}Au(e){if(!this.options.includeMetadataChanges){const l=[];for(const f of e.docChanges)3!==f.type&&l.push(f);e=new gf(e.query,e.docs,e.oldDocs,l,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=gf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Hg{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class lp{constructor(e){this.wt=e}Wi(e){return sc(this.wt,e)}zi(e){return e.metadata.exists?Lu(this.wt,e.document,!1):_s.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return rs(e)}}class Ry{constructor(e,t,l){this.xu=e,this.localStore=t,this.wt=l,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nd(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const l=gr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(l.get(l.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,l=new lp(this.wt);for(const f of e)if(f.metadata.queries){const v=l.Wi(f.metadata.name);for(const S of f.metadata.queries){const B=(t.get(S)||Di()).add(v);t.set(S,B)}}return t}complete(){var e=this;return(0,ot.Z)(function*(){const t=yield function gy(o,e,t,l){return nm.apply(this,arguments)}(e.localStore,new lp(e.wt),e.documents,e.xu.id),l=e.ku(e.documents);for(const f of e.queries)yield sb(e.localStore,f,l.get(f.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function nd(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}class hm{constructor(e){this.key=e}}class jg{constructor(e){this.key=e}}class zg{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Di(),this.mutatedKeys=Di(),this.Lu=St(e),this.Uu=new mf(this.Lu)}get qu(){return this.Fu}Ku(e,t){const l=t?t.Gu:new Ay,f=t?t.Uu:this.Uu;let v=t?t.mutatedKeys:this.mutatedKeys,S=f,B=!1;const oe="F"===this.query.limitType&&f.size===this.query.limit?f.last():null,ue="L"===this.query.limitType&&f.size===this.query.limit?f.first():null;if(e.inorderTraversal((Te,at)=>{const Vt=f.get(Te),ln=de(this.query,at)?at:null,dn=!!Vt&&this.mutatedKeys.has(Vt.key),zn=!!ln&&(ln.hasLocalMutations||this.mutatedKeys.has(ln.key)&&ln.hasCommittedMutations);let Ri=!1;Vt&&ln?Vt.data.isEqual(ln.data)?dn!==zn&&(l.track({type:3,doc:ln}),Ri=!0):this.Qu(Vt,ln)||(l.track({type:2,doc:ln}),Ri=!0,(oe&&this.Lu(ln,oe)>0||ue&&this.Lu(ln,ue)<0)&&(B=!0)):!Vt&&ln?(l.track({type:0,doc:ln}),Ri=!0):Vt&&!ln&&(l.track({type:1,doc:Vt}),Ri=!0,(oe||ue)&&(B=!0)),Ri&&(ln?(S=S.add(ln),v=zn?v.add(Te):v.delete(Te)):(S=S.delete(Te),v=v.delete(Te)))}),null!==this.query.limit)for(;S.size>this.query.limit;){const Te="F"===this.query.limitType?S.last():S.first();S=S.delete(Te.key),v=v.delete(Te.key),l.track({type:1,doc:Te})}return{Uu:S,Gu:l,Mi:B,mutatedKeys:v}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,l){const f=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const v=e.Gu.pu();v.sort((ue,Te)=>function(at,Vt){const ln=dn=>{switch(dn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vn()}};return ln(at)-ln(Vt)}(ue.type,Te.type)||this.Lu(ue.doc,Te.doc)),this.ju(l);const S=t?this.Wu():[],B=0===this.Bu.size&&this.current?1:0,oe=B!==this.$u;return this.$u=B,0!==v.length||oe?{snapshot:new gf(this.query,e.Uu,f,v,e.mutatedKeys,0===B,oe,!1),zu:S}:{zu:S}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Ay,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Di(),this.Uu.forEach(l=>{this.Hu(l.key)&&(this.Bu=this.Bu.add(l.key))});const t=[];return e.forEach(l=>{this.Bu.has(l)||t.push(new jg(l))}),this.Bu.forEach(l=>{e.has(l)||t.push(new hm(l))}),t}Ju(e){this.Fu=e.ji,this.Bu=Di();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return gf.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Gg{constructor(e,t,l){this.query=e,this.targetId=t,this.view=l}}class ky{constructor(e){this.key=e,this.Xu=!1}}class Oy{constructor(e,t,l,f,v,S){this.localStore=e,this.remoteStore=t,this.eventManager=l,this.sharedClientState=f,this.currentUser=v,this.maxConcurrentLimboResolutions=S,this.Zu={},this.tc=new Bn(B=>I(B),E),this.ec=new Map,this.nc=new Set,this.sc=new Mr(bn.comparator),this.ic=new Map,this.rc=new Ud,this.oc={},this.uc=new Map,this.cc=oc.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function cp(o,e){return yd.apply(this,arguments)}function yd(){return yd=(0,ot.Z)(function*(o,e){const t=Em(o);let l,f;const v=t.tc.get(e);if(v)l=v.targetId,t.sharedClientState.addLocalQueryTarget(l),f=v.view.Yu();else{const S=yield Hd(t.localStore,Bs(e));t.isPrimaryClient&&om(t.remoteStore,S);const B=t.sharedClientState.addLocalQueryTarget(S.targetId);l=S.targetId,f=yield yf(t,e,l,"current"===B)}return f}),yd.apply(this,arguments)}function yf(o,e,t,l){return vd.apply(this,arguments)}function vd(){return vd=(0,ot.Z)(function*(o,e,t,l){o.hc=(Te,at,Vt)=>{return(ln=(0,ot.Z)(function*(dn,zn,Ri,js){let Yo=zn.view.Ku(Ri);Yo.Mi&&(Yo=yield Zf(dn.localStore,zn.query,!1).then(({documents:Os})=>zn.view.Ku(Os,Yo)));const Ro=js&&js.targetChanges.get(zn.targetId),_a=zn.view.applyChanges(Yo,dn.isPrimaryClient,Ro);return gm(dn,zn.targetId,_a.zu),_a.snapshot}),function(dn,zn,Ri,js){return ln.apply(this,arguments)})(o,Te,at,Vt);var ln};const f=yield Zf(o.localStore,e,!0),v=new zg(e,f.ji),S=v.Ku(f.documents),B=Ac.createSynthesizedTargetChangeForCurrentChange(t,l&&"Offline"!==o.onlineState),oe=v.applyChanges(S,o.isPrimaryClient,B);gm(o,t,oe.zu);const ue=new Gg(e,t,v);return o.tc.set(e,ue),o.ec.has(t)?o.ec.get(t).push(e):o.ec.set(t,[e]),oe.snapshot}),vd.apply(this,arguments)}function up(o,e){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,ot.Z)(function*(o,e){const t=Dn(o),l=t.tc.get(e),f=t.ec.get(l.targetId);if(f.length>1)return t.ec.set(l.targetId,f.filter(v=>!E(v,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(l.targetId),t.sharedClientState.isActiveQueryTarget(l.targetId)||(yield jd(t.localStore,l.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(l.targetId),Kd(t.remoteStore,l.targetId),_c(t,l.targetId)}).catch(xo))):(_c(t,l.targetId),yield jd(t.localStore,l.targetId,!0))}),Zd.apply(this,arguments)}function dp(){return dp=(0,ot.Z)(function*(o,e,t){const l=Cf(o);try{const f=yield function(v,S){const B=Dn(v),oe=Qr.now(),ue=S.reduce((Vt,ln)=>Vt.add(ln.key),Di());let Te,at;return B.persistence.runTransaction("Locally write mutations","readwrite",Vt=>{let ln=ui(),dn=Di();return B.Ui.getEntries(Vt,ue).next(zn=>{ln=zn,ln.forEach((Ri,js)=>{js.isValidDocument()||(dn=dn.add(Ri))})}).next(()=>B.localDocuments.getOverlayedDocuments(Vt,ln)).next(zn=>{Te=zn;const Ri=[];for(const js of S){const Yo=k(js,Te.get(js.key).overlayedDocument);null!=Yo&&Ri.push(new P(js.key,Yo,Il(Yo.value.mapValue),cs.exists(!0)))}return B.mutationQueue.addMutationBatch(Vt,oe,Ri,S)}).next(zn=>{at=zn;const Ri=zn.applyToLocalDocumentSet(Te,dn);return B.documentOverlayCache.saveOverlays(Vt,zn.batchId,Ri)})}).then(()=>({batchId:at.batchId,changes:dr(Te)}))}(l.localStore,e);l.sharedClientState.addPendingMutation(f.batchId),function(v,S,B){let oe=v.oc[v.currentUser.toKey()];oe||(oe=new Mr(Mi)),oe=oe.insert(S,B),v.oc[v.currentUser.toKey()]=oe}(l,f.batchId,t),yield Mu(l,f.changes),yield Wd(l.remoteStore)}catch(f){const v=pf(f,"Failed to persist write");t.reject(v)}}),dp.apply(this,arguments)}function fm(o,e){return vf.apply(this,arguments)}function vf(){return vf=(0,ot.Z)(function*(o,e){const t=Dn(o);try{const l=yield my(t.localStore,e);e.targetChanges.forEach((f,v)=>{const S=t.ic.get(v);S&&(Fn(f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size<=1),f.addedDocuments.size>0?S.Xu=!0:f.modifiedDocuments.size>0?Fn(S.Xu):f.removedDocuments.size>0&&(Fn(S.Xu),S.Xu=!1))}),yield Mu(t,l,e)}catch(l){yield xo(l)}}),vf.apply(this,arguments)}function hp(o,e,t){const l=Dn(o);if(l.isPrimaryClient&&0===t||!l.isPrimaryClient&&1===t){const f=[];l.tc.forEach((v,S)=>{const B=S.view.Eu(e);B.snapshot&&f.push(B.snapshot)}),function(v,S){const B=Dn(v);B.onlineState=S;let oe=!1;B.queries.forEach((ue,Te)=>{for(const at of Te.listeners)at.Eu(S)&&(oe=!0)}),oe&&ap(B)}(l.eventManager,e),f.length&&l.Zu.Go(f),l.onlineState=e,l.isPrimaryClient&&l.sharedClientState.setOnlineState(e)}}function $g(o,e,t){return bf.apply(this,arguments)}function bf(){return bf=(0,ot.Z)(function*(o,e,t){const l=Dn(o);l.sharedClientState.updateQueryState(e,"rejected",t);const f=l.ic.get(e),v=f&&f.key;if(v){let S=new Mr(bn.comparator);S=S.insert(v,_s.newNoDocument(v,An.min()));const B=Di().add(v),oe=new bc(An.min(),new Map,new qi(Mi),S,B);yield fm(l,oe),l.sc=l.sc.remove(v),l.ic.delete(e),_m(l)}else yield jd(l.localStore,e,!1).then(()=>_c(l,e,t)).catch(xo)}),bf.apply(this,arguments)}function Ny(o,e){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,ot.Z)(function*(o,e){const t=Dn(o),l=e.batch.batchId;try{const f=yield py(t.localStore,e);pm(t,l,null),mp(t,l),t.sharedClientState.updateMutationState(l,"acknowledged"),yield Mu(t,f)}catch(f){yield xo(f)}}),Kg.apply(this,arguments)}function Fy(o,e,t){return fp.apply(this,arguments)}function fp(){return fp=(0,ot.Z)(function*(o,e,t){const l=Dn(o);try{const f=yield function(v,S){const B=Dn(v);return B.persistence.runTransaction("Reject batch","readwrite-primary",oe=>{let ue;return B.mutationQueue.lookupMutationBatch(oe,S).next(Te=>(Fn(null!==Te),ue=Te.keys(),B.mutationQueue.removeMutationBatch(oe,Te))).next(()=>B.mutationQueue.performConsistencyCheck(oe)).next(()=>B.documentOverlayCache.removeOverlaysForBatchId(oe,ue,S)).next(()=>B.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(oe,ue)).next(()=>B.localDocuments.getDocuments(oe,ue))})}(l.localStore,e);pm(l,e,t),mp(l,e),l.sharedClientState.updateMutationState(e,"rejected",t),yield Mu(l,f)}catch(f){yield xo(f)}}),fp.apply(this,arguments)}function pp(){return pp=(0,ot.Z)(function*(o,e){const t=Dn(o);ed(t.remoteStore)||pn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const l=yield function(v){const S=Dn(v);return S.persistence.runTransaction("Get highest unacknowledged batch id","readonly",B=>S.mutationQueue.getHighestUnacknowledgedBatchId(B))}(t.localStore);if(-1===l)return void e.resolve();const f=t.uc.get(l)||[];f.push(e),t.uc.set(l,f)}catch(l){const f=pf(l,"Initialization of waitForPendingWrites() operation failed");e.reject(f)}}),pp.apply(this,arguments)}function mp(o,e){(o.uc.get(e)||[]).forEach(t=>{t.resolve()}),o.uc.delete(e)}function pm(o,e,t){const l=Dn(o);let f=l.oc[l.currentUser.toKey()];if(f){const v=f.get(e);v&&(t?v.reject(t):v.resolve(),f=f.remove(e)),l.oc[l.currentUser.toKey()]=f}}function _c(o,e,t=null){o.sharedClientState.removeLocalQueryTarget(e);for(const l of o.ec.get(e))o.tc.delete(l),t&&o.Zu.lc(l,t);o.ec.delete(e),o.isPrimaryClient&&o.rc.us(e).forEach(l=>{o.rc.containsKey(l)||mm(o,l)})}function mm(o,e){o.nc.delete(e.path.canonicalString());const t=o.sc.get(e);null!==t&&(Kd(o.remoteStore,t),o.sc=o.sc.remove(e),o.ic.delete(t),_m(o))}function gm(o,e,t){for(const l of t)l instanceof hm?(o.rc.addReference(l.key,e),lb(o,l)):l instanceof jg?(pn("SyncEngine","Document no longer in limbo: "+l.key),o.rc.removeReference(l.key,e),o.rc.containsKey(l.key)||mm(o,l.key)):Vn()}function lb(o,e){const t=e.key,l=t.path.canonicalString();o.sc.get(t)||o.nc.has(l)||(pn("SyncEngine","New document in limbo: "+t),o.nc.add(l),_m(o))}function _m(o){for(;o.nc.size>0&&o.sc.size<o.maxConcurrentLimboResolutions;){const e=o.nc.values().next().value;o.nc.delete(e);const t=new bn(gr.fromString(e)),l=o.cc.next();o.ic.set(l,new ky(t)),o.sc=o.sc.insert(t,l),om(o.remoteStore,new Rc(Bs(Vl(t.path)),l,2,Bi.ot))}}function Mu(o,e,t){return gp.apply(this,arguments)}function gp(){return gp=(0,ot.Z)(function*(o,e,t){const l=Dn(o),f=[],v=[],S=[];var B;l.tc.isEmpty()||(l.tc.forEach((B,oe)=>{S.push(l.hc(oe,e,t).then(ue=>{if(ue){l.isPrimaryClient&&l.sharedClientState.updateQueryState(oe.targetId,ue.fromCache?"not-current":"current"),f.push(ue);const Te=Kf.Vi(oe.targetId,ue);v.push(Te)}}))}),yield Promise.all(S),l.Zu.Go(f),yield(B=(0,ot.Z)(function*(oe,ue){const Te=Dn(oe);try{yield Te.persistence.runTransaction("notifyLocalViewChanges","readwrite",at=>D.forEach(ue,Vt=>D.forEach(Vt.Pi,ln=>Te.persistence.referenceDelegate.addReference(at,Vt.targetId,ln)).next(()=>D.forEach(Vt.vi,ln=>Te.persistence.referenceDelegate.removeReference(at,Vt.targetId,ln)))))}catch(at){if(!me(at))throw at;pn("LocalStore","Failed to update sequence numbers: "+at)}for(const at of ue){const Vt=at.targetId;if(!at.fromCache){const ln=Te.$i.get(Vt),zn=ln.withLastLimboFreeSnapshotVersion(ln.snapshotVersion);Te.$i=Te.$i.insert(Vt,zn)}}}),function(oe,ue){return B.apply(this,arguments)})(l.localStore,v))}),gp.apply(this,arguments)}function Vy(o,e){return ym.apply(this,arguments)}function ym(){return ym=(0,ot.Z)(function*(o,e){const t=Dn(o);if(!t.currentUser.isEqual(e)){pn("SyncEngine","User change. New user:",e.toKey());const l=yield bg(t.localStore,e);t.currentUser=e,(f=t).uc.forEach(S=>{S.forEach(B=>{B.reject(new sn(Ht.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),f.uc.clear(),t.sharedClientState.handleUserChange(e,l.removedBatchIds,l.addedBatchIds),yield Mu(t,l.Ki)}var f}),ym.apply(this,arguments)}function By(o,e){const t=Dn(o),l=t.ic.get(e);if(l&&l.Xu)return Di().add(l.key);{let f=Di();const v=t.ec.get(e);if(!v)return f;for(const S of v){const B=t.tc.get(S);f=f.unionWith(B.view.qu)}return f}}function Wg(o,e){return vm.apply(this,arguments)}function vm(){return vm=(0,ot.Z)(function*(o,e){const t=Dn(o),l=yield Zf(t.localStore,e.query,!0),f=e.view.Ju(l);return t.isPrimaryClient&&gm(t,e.targetId,f.zu),f}),vm.apply(this,arguments)}function Zg(o,e){return bm.apply(this,arguments)}function bm(){return bm=(0,ot.Z)(function*(o,e){const t=Dn(o);return Eg(t.localStore,e).then(l=>Mu(t,l))}),bm.apply(this,arguments)}function Uy(o,e,t,l){return _p.apply(this,arguments)}function _p(){return _p=(0,ot.Z)(function*(o,e,t,l){const f=Dn(o),v=yield function(S,B){const oe=Dn(S),ue=Dn(oe.mutationQueue);return oe.persistence.runTransaction("Lookup mutation documents","readonly",Te=>ue.yn(Te,B).next(at=>at?oe.localDocuments.getDocuments(Te,at):D.resolve(null)))}(f.localStore,e);var B;null!==v?("pending"===t?yield Wd(f.remoteStore):"acknowledged"===t||"rejected"===t?(pm(f,e,l||null),mp(f,e),B=e,Dn(Dn(f.localStore).mutationQueue).In(B)):Vn(),yield Mu(f,v)):pn("SyncEngine","Cannot apply mutation batch with id: "+e)}),_p.apply(this,arguments)}function wm(){return wm=(0,ot.Z)(function*(o,e){const t=Dn(o);if(Em(t),Cf(t),!0===e&&!0!==t.ac){const l=t.sharedClientState.getAllActiveQueryTargets(),f=yield Ru(t,l.toArray());t.ac=!0,yield sp(t.remoteStore,!0);for(const v of f)om(t.remoteStore,v)}else if(!1===e&&!1!==t.ac){const l=[];let f=Promise.resolve();t.ec.forEach((v,S)=>{t.sharedClientState.isLocalQueryTarget(S)?l.push(S):f=f.then(()=>(_c(t,S),jd(t.localStore,S,!0))),Kd(t.remoteStore,S)}),yield f,yield Ru(t,l),function(v){const S=Dn(v);S.ic.forEach((B,oe)=>{Kd(S.remoteStore,oe)}),S.rc.cs(),S.ic=new Map,S.sc=new Mr(bn.comparator)}(t),t.ac=!1,yield sp(t.remoteStore,!1)}}),wm.apply(this,arguments)}function Ru(o,e,t){return wf.apply(this,arguments)}function wf(){return wf=(0,ot.Z)(function*(o,e,t){const l=Dn(o),f=[],v=[];for(const S of e){let B;const oe=l.ec.get(S);if(oe&&0!==oe.length){B=yield Hd(l.localStore,Bs(oe[0]));for(const ue of oe){const Te=l.tc.get(ue),at=yield Wg(l,Te);at.snapshot&&v.push(at.snapshot)}}else{const ue=yield em(l.localStore,S);B=yield Hd(l.localStore,ue),yield yf(l,Yg(ue),S,!1)}f.push(B)}return l.Zu.Go(v),f}),wf.apply(this,arguments)}function Yg(o){return Dc(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function Hy(o){const e=Dn(o);return Dn(Dn(e.localStore).persistence).Ri()}function cb(o,e,t,l){return yp.apply(this,arguments)}function yp(){return yp=(0,ot.Z)(function*(o,e,t,l){const f=Dn(o);if(f.ac)return void pn("SyncEngine","Ignoring unexpected query state notification.");const v=f.ec.get(e);if(v&&v.length>0)switch(t){case"current":case"not-current":{const S=yield Eg(f.localStore,Ae(v[0])),B=bc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Mu(f,S,B);break}case"rejected":yield jd(f.localStore,e,!0),_c(f,e,l);break;default:Vn()}}),yp.apply(this,arguments)}function jy(o,e,t){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,ot.Z)(function*(o,e,t){const l=Em(o);if(l.ac){for(const f of e){if(l.ec.has(f)){pn("SyncEngine","Adding an already active target "+f);continue}const v=yield em(l.localStore,f),S=yield Hd(l.localStore,v);yield yf(l,Yg(v),S.targetId,!1),om(l.remoteStore,S)}for(const f of t)l.ec.has(f)&&(yield jd(l.localStore,f,!1).then(()=>{Kd(l.remoteStore,f),_c(l,f)}).catch(xo))}}),Cm.apply(this,arguments)}function Em(o){const e=Dn(o);return e.remoteStore.remoteSyncer.applyRemoteEvent=fm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=By.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$g.bind(null,e),e.Zu.Go=dm.bind(null,e.eventManager),e.Zu.lc=My.bind(null,e.eventManager),e}function Cf(o){const e=Dn(o);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ny.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fy.bind(null,e),e}class Qg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ot.Z)(function*(){t.wt=sf(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return vg(this.persistence,new yg,e.initialUser,this.wt)}_c(e){return new Gf(Yp.Os,this.wt)}dc(e){return new Dg}terminate(){var e=this;return(0,ot.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ef extends Qg{constructor(e,t,l){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=l,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,l=this;return(0,ot.Z)(function*(){yield t().call(l,e),yield l.yc.initialize(l,e),yield Cf(l.yc.syncEngine),yield Wd(l.yc.remoteStore),yield l.persistence.ci(()=>(l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(),l.indexBackfillerScheduler&&!l.indexBackfillerScheduler.started&&l.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return vg(this.persistence,new yg,e.initialUser,this.wt)}mc(e,t){return new lg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const l=new jn(t,this.persistence);return new Vi(e.asyncQueue,l)}_c(e){const t=Jp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),l=void 0!==this.cacheSizeBytes?Qe.withCacheSize(this.cacheSizeBytes):Qe.DEFAULT;return new Qp(this.synchronizeTabs,t,e.clientId,l,e.asyncQueue,sm(),Gd(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Dg}}class Tm extends Ef{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,l=this;return(0,ot.Z)(function*(){yield t().call(l,e);const f=l.yc.syncEngine;l.sharedClientState instanceof Sg&&(l.sharedClientState.syncEngine={kr:Uy.bind(null,f),Mr:cb.bind(null,f),Or:jy.bind(null,f),Ri:Hy.bind(null,f),Nr:Zg.bind(null,f)},yield l.sharedClientState.start()),yield l.persistence.ci(function(){var v=(0,ot.Z)(function*(S){yield function qg(o,e){return wm.apply(this,arguments)}(l.yc.syncEngine,S),l.gcScheduler&&(S&&!l.gcScheduler.started?l.gcScheduler.start():S||l.gcScheduler.stop()),l.indexBackfillerScheduler&&(S&&!l.indexBackfillerScheduler.started?l.indexBackfillerScheduler.start():S||l.indexBackfillerScheduler.stop())});return function(S){return v.apply(this,arguments)}}())})()}dc(e){const t=sm();if(!Sg.V(t))throw new sn(Ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const l=Jp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sg(t,e.asyncQueue,l,e.clientId,e.initialUser)}}class Im{initialize(e,t){var l=this;return(0,ot.Z)(function*(){l.localStore||(l.localStore=e.localStore,l.sharedClientState=e.sharedClientState,l.datastore=l.createDatastore(t),l.remoteStore=l.createRemoteStore(t),l.eventManager=l.createEventManager(t),l.syncEngine=l.createSyncEngine(t,!e.synchronizeTabs),l.sharedClientState.onlineStateHandler=f=>hp(l.syncEngine,f,1),l.remoteStore.remoteSyncer.handleCredentialChange=Vy.bind(null,l.syncEngine),yield sp(l.remoteStore,l.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ab}createDatastore(e){const t=sf(e.databaseInfo.databaseId),l=new vy(e.databaseInfo);return new Cy(e.authCredentials,e.appCheckCredentials,l,t)}createRemoteStore(e){return t=this.localStore,l=this.datastore,f=e.asyncQueue,v=B=>hp(this.syncEngine,B,0),S=_y.V()?new _y:new xg,new Mg(t,l,f,v,S);var t,l,f,v,S}createSyncEngine(e,t){return function(l,f,v,S,B,oe,ue){const Te=new Oy(l,f,v,S,B,oe);return ue&&(Te.ac=!0),Te}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ot.Z)(function*(t){const l=Dn(t);pn("RemoteStore","RemoteStore shutting down."),l.lu.add(5),yield $d(l),l.du.shutdown(),l._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vp(o,e=10240){let t=0;return{read:()=>(0,ot.Z)(function*(){if(t<o.byteLength){const l={value:o.slice(t,t+e),done:!1};return t+=e,l}return{done:!0}})(),cancel:()=>(0,ot.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Tf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ub{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Ls,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(l=>{l&&l.Cu()?this.metadata.resolve(l.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(l?.payload)}`))},l=>this.metadata.reject(l))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ot.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ot.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ot.Z)(function*(){const t=yield e.bc();if(null===t)return null;const l=e.Ac.decode(t),f=Number(l);isNaN(f)&&e.Pc(`length string (${l}) is not valid number`);const v=yield e.vc(f);return new Hg(JSON.parse(v),t.length+f)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ot.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const l=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),l})()}vc(e){var t=this;return(0,ot.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const l=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),l})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ot.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const l=new Uint8Array(e.buffer.length+t.value.length);l.set(e.buffer),l.set(t.value,e.buffer.length),e.buffer=l}return t.done})()}}class db{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ot.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new sn(Ht.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const l=yield(f=(0,ot.Z)(function*(v,S){const B=Dn(v),oe=au(B.wt)+"/documents",ue={documents:S.map(ln=>Vc(B.wt,ln))},Te=yield B.ao("BatchGetDocuments",oe,ue,S.length),at=new Map;Te.forEach(ln=>{const dn=function jh(o,e){return"found"in e?function(t,l){Fn(!!l.found);const f=sc(t,l.found.name),v=rs(l.found.updateTime),S=new Ko({mapValue:{fields:l.found.fields}});return _s.newFoundDocument(f,v,S)}(o,e):"missing"in e?function(t,l){Fn(!!l.missing),Fn(!!l.readTime);const f=sc(t,l.missing),v=rs(l.readTime);return _s.newNoDocument(f,v)}(o,e):Vn()}(B.wt,ln);at.set(dn.key.toString(),dn)});const Vt=[];return S.forEach(ln=>{const dn=at.get(ln.toString());Fn(!!dn),Vt.push(dn)}),Vt}),function(v,S){return f.apply(this,arguments)})(t.datastore,e);var f;return l.forEach(f=>t.recordVersion(f)),l})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(e.toString())}delete(e){this.write(new Le(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ot.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var l;e.mutations.forEach(l=>{t.delete(l.key.toString())}),t.forEach((l,f)=>{const v=bn.fromPath(f);e.mutations.push(new lt(v,e.precondition(v)))}),yield(l=(0,ot.Z)(function*(f,v){const S=Dn(f),B=au(S.wt)+"/documents",oe={writes:v.map(ue=>Vu(S.wt,ue))};yield S.ro("Commit",B,oe)}),function(f,v){return l.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Vn();t=An.min()}const l=this.readVersions.get(e.key.toString());if(l){if(!t.isEqual(l))throw new sn(Ht.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?cs.updateTime(t):cs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(An.min()))throw new sn(Ht.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cs.updateTime(t)}return cs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Sm{constructor(e,t,l,f,v){this.asyncQueue=e,this.datastore=t,this.options=l,this.updateFunction=f,this.deferred=v,this.Dc=l.maxAttempts,this.So=new Qf(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ot.Z)(function*(){const t=new db(e.datastore),l=e.xc(t);l&&l.then(f=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(f)}).catch(v=>{e.Nc(v)}))}).catch(f=>{e.Nc(f)})}))}xc(e){try{const t=this.updateFunction(e);return!he(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!hi(t)}return!1}}class hb{constructor(e,t,l,f){var v=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=l,this.databaseInfo=f,this.user=ur.UNAUTHENTICATED,this.clientId=jo.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(l,function(){var S=(0,ot.Z)(function*(B){pn("FirestoreClient","Received user=",B.uid),yield v.authCredentialListener(B),v.user=B});return function(B){return S.apply(this,arguments)}}()),this.appCheckCredentials.start(l,S=>(pn("FirestoreClient","Received new app check token=",S),this.appCheckCredentialListener(S,this.user)))}getConfiguration(){var e=this;return(0,ot.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new sn(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ot.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(l){const f=pf(l,"Failed to shutdown persistence");t.reject(f)}})),t.promise}}function Dm(o,e){return bp.apply(this,arguments)}function bp(){return bp=(0,ot.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress(),pn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield o.getConfiguration();yield e.initialize(t);let l=t.initialUser;o.setCredentialChangeListener(function(){var f=(0,ot.Z)(function*(v){l.isEqual(v)||(yield bg(e.localStore,v),l=v)});return function(v){return f.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>o.terminate()),o.offlineComponents=e}),bp.apply(this,arguments)}function xm(o,e){return wp.apply(this,arguments)}function wp(){return wp=(0,ot.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress();const t=yield If(o);pn("FirestoreClient","Initializing OnlineComponentProvider");const l=yield o.getConfiguration();yield e.initialize(t,l),o.setCredentialChangeListener(f=>Ng(e.remoteStore,f)),o.setAppCheckTokenChangeListener((f,v)=>Ng(e.remoteStore,v)),o.onlineComponents=e}),wp.apply(this,arguments)}function If(o){return ku.apply(this,arguments)}function ku(){return ku=(0,ot.Z)(function*(o){return o.offlineComponents||(pn("FirestoreClient","Using default OfflineComponentProvider"),yield Dm(o,new Qg)),o.offlineComponents}),ku.apply(this,arguments)}function qd(o){return Eh.apply(this,arguments)}function Eh(){return Eh=(0,ot.Z)(function*(o){return o.onlineComponents||(pn("FirestoreClient","Using default OnlineComponentProvider"),yield xm(o,new Im)),o.onlineComponents}),Eh.apply(this,arguments)}function Th(o){return If(o).then(e=>e.persistence)}function Cp(o){return If(o).then(e=>e.localStore)}function Ep(o){return qd(o).then(e=>e.remoteStore)}function Tp(o){return qd(o).then(e=>e.syncEngine)}function Ih(o){return Am.apply(this,arguments)}function Am(){return Am=(0,ot.Z)(function*(o){const e=yield qd(o),t=e.eventManager;return t.onListen=cp.bind(null,e.syncEngine),t.onUnlisten=up.bind(null,e.syncEngine),t}),Am.apply(this,arguments)}function Jg(o,e,t={}){const l=new Ls;return o.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return function(f,v,S,B,oe){const ue=new Tf({next:at=>{v.enqueueAndForget(()=>Ug(f,Te));const Vt=at.docs.has(S);!Vt&&at.fromCache?oe.reject(new sn(Ht.UNAVAILABLE,"Failed to get document because the client is offline.")):Vt&&at.fromCache&&B&&"server"===B.source?oe.reject(new sn(Ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):oe.resolve(at)},error:at=>oe.reject(at)}),Te=new _f(Vl(S.path),ue,{includeMetadataChanges:!0,Du:!0});return Vg(f,Te)}(yield Ih(o),o.asyncQueue,e,t,l)})),l.promise}function Xg(o,e,t={}){const l=new Ls;return o.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return function(f,v,S,B,oe){const ue=new Tf({next:at=>{v.enqueueAndForget(()=>Ug(f,Te)),at.fromCache&&"server"===B.source?oe.reject(new sn(Ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):oe.resolve(at)},error:at=>oe.reject(at)}),Te=new _f(S,ue,{includeMetadataChanges:!0,Du:!0});return Vg(f,Te)}(yield Ih(o),o.asyncQueue,e,t,l)})),l.promise}const Ip=new Map;function Mm(o,e,t){if(!t)throw new sn(Ht.INVALID_ARGUMENT,`Function ${o}() cannot be called with an empty ${e}.`)}function Sp(o,e,t,l){if(!0===e&&!0===l)throw new sn(Ht.INVALID_ARGUMENT,`${o} and ${t} cannot be used together.`)}function t_(o){if(!bn.isDocumentKey(o))throw new sn(Ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${o} has ${o.length}.`)}function n_(o){if(bn.isDocumentKey(o))throw new sn(Ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${o} has ${o.length}.`)}function Dp(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=`${o.substring(0,20)}...`),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";{const e=(t=o).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof o?"a function":Vn()}function Hs(o,e){if("_delegate"in o&&(o=o._delegate),!(o instanceof e)){if(e.name===o.constructor.name)throw new sn(Ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dp(o);throw new sn(Ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return o}function i_(o,e){if(e<=0)throw new sn(Ht.INVALID_ARGUMENT,`Function ${o}() requires a positive number, but it was: ${e}.`)}class r_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new sn(Ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new sn(Ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Sp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bd{constructor(e,t,l){this._authCredentials=t,this._appCheckCredentials=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r_({}),this._settingsFrozen=!1,e instanceof ne?this._databaseId=e:(this._app=e,this._databaseId=function(f){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new sn(Ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ne(f.options.projectId)}(e))}get app(){if(!this._app)throw new sn(Ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new sn(Ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Tc;switch(t.type){case"gapi":const l=t.client;return Fn(!("object"!=typeof l||null===l||!l.auth||!l.auth.getAuthHeaderValueForFirstParty)),new dl(l,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new sn(Ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ip.get(e);t&&(pn("ComponentProvider","Removing Datastore"),Ip.delete(e),t.terminate())}(this),Promise.resolve()}}class il{constructor(e,t,l){this.converter=t,this._key=l,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new il(this.firestore,e,this._key)}}class Zl{constructor(e,t,l){this.converter=t,this._query=l,this.type="query",this.firestore=e}withConverter(e){return new Zl(this.firestore,e,this._query)}}class ju extends Zl{constructor(e,t,l){super(e,t,Vl(l)),this._path=l,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new il(this.firestore,null,new bn(e))}withConverter(e){return new ju(this.firestore,e,this._path)}}function s_(o,e,...t){if(o=(0,nt.m9)(o),Mm("collection","path",e),o instanceof bd){const l=gr.fromString(e,...t);return n_(l),new ju(o,null,l)}{if(!(o instanceof il||o instanceof ju))throw new sn(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=o._path.child(gr.fromString(e,...t));return n_(l),new ju(o.firestore,null,l)}}function xp(o,e,...t){if(o=(0,nt.m9)(o),1===arguments.length&&(e=jo.I()),Mm("doc","path",e),o instanceof bd){const l=gr.fromString(e,...t);return t_(l),new il(o,null,new bn(l))}{if(!(o instanceof il||o instanceof ju))throw new sn(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=o._path.child(gr.fromString(e,...t));return t_(l),new il(o.firestore,o instanceof ju?o.converter:null,new bn(l))}}function Ou(o,e){return o=(0,nt.m9)(o),e=(0,nt.m9)(e),(o instanceof il||o instanceof ju)&&(e instanceof il||e instanceof ju)&&o.firestore===e.firestore&&o.path===e.path&&o.converter===e.converter}function Sh(o,e){return o=(0,nt.m9)(o),e=(0,nt.m9)(e),o instanceof Zl&&e instanceof Zl&&o.firestore===e.firestore&&E(o._query,e._query)&&o.converter===e.converter}class kc{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Qf(this,"async_queue_retry"),this.Kc=()=>{const t=Gd();t&&pn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Gd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Gd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Ls;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,ot.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!me(t))throw t;pn("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(l=>{throw this.Bc=l,this.Lc=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(v){let S=v.message||"";return v.stack&&(S=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),S}(l)),l}).then(l=>(this.Lc=!1,l))));return this.Mc=t,t}enqueueAfterDelay(e,t,l){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const f=Lg.createAndSchedule(this,e,t,l,v=>this.Wc(v));return this.$c.push(f),f}Gc(){this.Bc&&Vn()}verifyOperationInProgress(){}zc(){var e=this;return(0,ot.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,l)=>t.targetTimeMs-l.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function id(o){return function(e,t){if("object"!=typeof e||null===e)return!1;const l=e;for(const f of["next","error","complete"])if(f in l&&"function"==typeof l[f])return!0;return!1}(o)}class Ap{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ls,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,l){this._progressObserver={next:e,error:t,complete:l}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Sa extends bd{constructor(e,t,l){super(e,t,l),this.type="firestore",this._queue=new kc,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Qd(this),this._firestoreClient.terminate()}}function Ha(o){return o._firestoreClient||Qd(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function Qd(o){var e;const t=o._freezeSettings(),l=(v=(null===(e=o._app)||void 0===e?void 0:e.options.appId)||"",new q(o._databaseId,v,o._persistenceKey,(B=t).host,B.ssl,B.experimentalForceLongPolling,B.experimentalAutoDetectLongPolling,B.useFetchStreams));var v,B;o._firestoreClient=new hb(o._authCredentials,o._appCheckCredentials,o._queue,l)}function Jd(o,e,t){const l=new Ls;return o.asyncQueue.enqueue((0,ot.Z)(function*(){try{yield Dm(o,t),yield xm(o,e),l.resolve()}catch(f){const v=f;if(!("FirebaseError"===(S=v).name?S.code===Ht.FAILED_PRECONDITION||S.code===Ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&S instanceof DOMException)||22===S.code||20===S.code||11===S.code))throw v;sa("Error enabling offline persistence. Falling back to persistence disabled: "+v),l.reject(v)}var S})).then(()=>l.promise)}function km(o){if(o._initialized||o._terminated)throw new sn(Ht.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new sn(Ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(co.fromBase64String(e))}catch(t){throw new sn(Ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pu(co.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xd{constructor(e){this._methodName=e}}class Mp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new sn(Ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new sn(Ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mi(this._lat,e._lat)||Mi(this._long,e._long)}}const u_=/^__.*__$/;class Yy{constructor(e,t,l){this.data=e,this.fieldMask=t,this.fieldTransforms=l}toMutation(e,t){return null!==this.fieldMask?new P(e,this.data,this.fieldMask,t,this.fieldTransforms):new T(e,this.data,t,this.fieldTransforms)}}class Om{constructor(e,t,l){this.data=e,this.fieldMask=t,this.fieldTransforms=l}toMutation(e,t){return new P(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rp(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vn()}}class Rh{constructor(e,t,l,f,v,S){this.settings=e,this.databaseId=t,this.wt=l,this.ignoreUndefinedProperties=f,void 0===v&&this.Xc(),this.fieldTransforms=v||[],this.fieldMask=S||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Rh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const l=null===(t=this.path)||void 0===t?void 0:t.child(e),f=this.ta({path:l,na:!1});return f.sa(e),f}ia(e){var t;const l=null===(t=this.path)||void 0===t?void 0:t.child(e),f=this.ta({path:l,na:!1});return f.Xc(),f}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Fp(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Rp(this.Zc)&&u_.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Qy{constructor(e,t,l){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=l||sf(e)}aa(e,t,l,f=!1){return new Rh({Zc:e,methodName:t,ca:l,path:Rs.emptyPath(),na:!1,ua:f},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Gu(o){const e=o._freezeSettings(),t=sf(o._databaseId);return new Qy(o._databaseId,!!e.ignoreUndefinedProperties,t)}function eh(o,e,t,l,f,v={}){const S=o.aa(v.merge||v.mergeFields?2:0,e,t,f);Pp("Data must be an object, but it was:",S,l);const B=Fm(l,S);let oe,ue;if(v.merge)oe=new $o(S.fieldMask),ue=S.fieldTransforms;else if(v.mergeFields){const Te=[];for(const at of v.mergeFields){const Vt=Np(e,at,t);if(!S.contains(Vt))throw new sn(Ht.INVALID_ARGUMENT,`Field '${Vt}' is specified in your field mask but missing from your input data.`);Lm(Te,Vt)||Te.push(Vt)}oe=new $o(Te),ue=S.fieldTransforms.filter(at=>oe.covers(at.field))}else oe=null,ue=S.fieldTransforms;return new Yy(new Ko(B),oe,ue)}class th extends Xd{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}function d_(o,e,t){return new Rh({Zc:3,ca:e.settings.ca,methodName:o._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class kh extends Xd{_toFieldTransform(e){return new qc(e.path,new Zc)}isEqual(e){return e instanceof kh}}class kp extends Xd{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=d_(this,e,!0),l=this.ha.map(v=>rd(v,t)),f=new pc(l);return new qc(e.path,f)}isEqual(e){return this===e}}class Pm extends Xd{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=d_(this,e,!0),l=this.ha.map(v=>rd(v,t)),f=new rc(l);return new qc(e.path,f)}isEqual(e){return this===e}}class h_ extends Xd{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new iu(e.wt,_r(e.wt,this.la));return new qc(e.path,t)}isEqual(e){return this===e}}function Af(o,e,t,l){const f=o.aa(1,e,t);Pp("Data must be an object, but it was:",f,l);const v=[],S=Ko.empty();Vr(l,(oe,ue)=>{const Te=Mf(e,oe,t);ue=(0,nt.m9)(ue);const at=f.ia(Te);if(ue instanceof th)v.push(Te);else{const Vt=rd(ue,at);null!=Vt&&(v.push(Te),S.set(Te,Vt))}});const B=new $o(v);return new Om(S,B,f.fieldTransforms)}function Op(o,e,t,l,f,v){const S=o.aa(1,e,t),B=[Np(e,l,t)],oe=[f];if(v.length%2!=0)throw new sn(Ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Vt=0;Vt<v.length;Vt+=2)B.push(Np(e,v[Vt])),oe.push(v[Vt+1]);const ue=[],Te=Ko.empty();for(let Vt=B.length-1;Vt>=0;--Vt)if(!Lm(ue,B[Vt])){const ln=B[Vt];let dn=oe[Vt];dn=(0,nt.m9)(dn);const zn=S.ia(ln);if(dn instanceof th)ue.push(ln);else{const Ri=rd(dn,zn);null!=Ri&&(ue.push(ln),Te.set(ln,Ri))}}const at=new $o(ue);return new Om(Te,at,S.fieldTransforms)}function Nm(o,e,t,l=!1){return rd(t,o.aa(l?4:3,e))}function rd(o,e){if(f_(o=(0,nt.m9)(o)))return Pp("Unsupported field value:",e,o),Fm(o,e);if(o instanceof Xd)return function(t,l){if(!Rp(l.Zc))throw l.oa(`${t._methodName}() can only be used with update() and set()`);if(!l.path)throw l.oa(`${t._methodName}() is not currently supported inside arrays`);const f=t._toFieldTransform(l);f&&l.fieldTransforms.push(f)}(o,e),null;if(void 0===o&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),o instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,l){const f=[];let v=0;for(const S of t){let B=rd(S,l.ra(v));null==B&&(B={nullValue:"NULL_VALUE"}),f.push(B),v++}return{arrayValue:{values:f}}}(o,e)}return function(t,l){if(null===(t=(0,nt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _r(l.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const f=Qr.fromDate(t);return{timestampValue:eo(l.wt,f)}}if(t instanceof Qr){const f=new Qr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:eo(l.wt,f)}}if(t instanceof Mp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pu)return{bytesValue:pl(l.wt,t._byteString)};if(t instanceof il){const f=l.databaseId,v=t.firestore._databaseId;if(!v.isEqual(f))throw l.oa(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:Mc(t.firestore._databaseId||l.databaseId,t._key.path)}}throw l.oa(`Unsupported field value: ${Dp(t)}`)}(o,e)}function Fm(o,e){const t={};return Xa(o)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vr(o,(l,f)=>{const v=rd(f,e.ea(l));null!=v&&(t[l]=v)}),{mapValue:{fields:t}}}function f_(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof Qr||o instanceof Mp||o instanceof Pu||o instanceof il||o instanceof Xd)}function Pp(o,e,t){if(!f_(t)||"object"!=typeof(l=t)||null===l||Object.getPrototypeOf(l)!==Object.prototype&&null!==Object.getPrototypeOf(l)){const l=Dp(t);throw e.oa("an object"===l?o+" a custom object":o+" "+l)}var l}function Np(o,e,t){if((e=(0,nt.m9)(e))instanceof zu)return e._internalPath;if("string"==typeof e)return Mf(o,e);throw Fp("Field path arguments must be of type string or ",o,!1,void 0,t)}const p_=new RegExp("[~\\*/\\[\\]]");function Mf(o,e,t){if(e.search(p_)>=0)throw Fp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,o,!1,void 0,t);try{return new zu(...e.split("."))._internalPath}catch{throw Fp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,o,!1,void 0,t)}}function Fp(o,e,t,l,f){const v=l&&!l.isEmpty(),S=void 0!==f;let B=`Function ${e}() called with invalid data`;t&&(B+=" (via `toFirestore()`)"),B+=". ";let oe="";return(v||S)&&(oe+=" (found",v&&(oe+=` in field ${l}`),S&&(oe+=` in document ${f}`),oe+=")"),new sn(Ht.INVALID_ARGUMENT,B+o+oe)}function Lm(o,e){return o.some(t=>t.isEqual(e))}class Oh{constructor(e,t,l,f,v){this._firestore=e,this._userDataWriter=t,this._key=l,this._document=f,this._converter=v}get id(){return this._key.path.lastSegment()}get ref(){return new il(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Vm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Vm extends Oh{data(){return super.data()}}function nh(o,e){return"string"==typeof e?Mf(o,e):e instanceof zu?e._internalPath:e._delegate._internalPath}class wd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $u extends Oh{constructor(e,t,l,f,v,S){super(e,t,l,f,S),this._firestore=e,this._firestoreImpl=e,this.metadata=v}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const l=this._document.data.field(nh("DocumentSnapshot.get",e));if(null!==l)return this._userDataWriter.convertValue(l,t.serverTimestamps)}}}class Ph extends $u{data(e={}){return super.data(e)}}class sd{constructor(e,t,l,f){this._firestore=e,this._userDataWriter=t,this._snapshot=f,this.metadata=new wd(f.hasPendingWrites,f.fromCache),this.query=l}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(l=>{e.call(t,new Ph(this._firestore,this._userDataWriter,l.key,l,new wd(this._snapshot.mutatedKeys.has(l.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new sn(Ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(l,f){if(l._snapshot.oldDocs.isEmpty()){let v=0;return l._snapshot.docChanges.map(S=>({type:"added",doc:new Ph(l._firestore,l._userDataWriter,S.doc.key,S.doc,new wd(l._snapshot.mutatedKeys.has(S.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:v++}))}{let v=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(S=>f||3!==S.type).map(S=>{const B=new Ph(l._firestore,l._userDataWriter,S.doc.key,S.doc,new wd(l._snapshot.mutatedKeys.has(S.doc.key),l._snapshot.fromCache),l.query.converter);let oe=-1,ue=-1;return 0!==S.type&&(oe=v.indexOf(S.doc.key),v=v.delete(S.doc.key)),1!==S.type&&(v=v.add(S.doc),ue=v.indexOf(S.doc.key)),{type:m_(S.type),doc:B,oldIndex:oe,newIndex:ue}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function m_(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vn()}}function Bm(o,e){return o instanceof $u&&e instanceof $u?o._firestore===e._firestore&&o._key.isEqual(e._key)&&(null===o._document?null===e._document:o._document.isEqual(e._document))&&o._converter===e._converter:o instanceof sd&&e instanceof sd&&o._firestore===e._firestore&&Sh(o.query,e.query)&&o.metadata.isEqual(e.metadata)&&o._snapshot.isEqual(e._snapshot)}function Um(o){if("L"===o.limitType&&0===o.explicitOrderBy.length)throw new sn(Ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nh{}function ih(o,...e){for(const t of e)o=t._apply(o);return o}class Jy extends Nh{constructor(e,t,l){super(),this.fa=e,this.da=t,this._a=l,this.type="where"}_apply(e){const t=Gu(e.firestore),l=function(f,v,S,B,oe,ue,Te){let at;if(oe.isKeyField()){if("array-contains"===ue||"array-contains-any"===ue)throw new sn(Ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ue}' queries on documentId().`);if("in"===ue||"not-in"===ue){jm(Te,ue);const ln=[];for(const dn of Te)ln.push(C_(B,f,dn));at={arrayValue:{values:ln}}}else at=C_(B,f,Te)}else"in"!==ue&&"not-in"!==ue&&"array-contains-any"!==ue||jm(Te,ue),at=Nm(S,"where",Te,"in"===ue||"not-in"===ue);const Vt=Qn.create(oe,ue,at);return function(ln,dn){if(dn.ht()){const Ri=Wu(ln);if(null!==Ri&&!Ri.isEqual(dn.field))throw new sn(Ht.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ri.toString()}' and '${dn.field.toString()}'`);const js=fu(ln);null!==js&&E_(0,dn.field,js)}const zn=function(Ri,js){for(const Yo of Ri.filters)if(js.indexOf(Yo.op)>=0)return Yo.op;return null}(ln,function(Ri){switch(Ri){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(dn.op));if(null!==zn)throw new sn(Ht.INVALID_ARGUMENT,zn===dn.op?`Invalid query. You cannot use more than one '${dn.op.toString()}' filter.`:`Invalid query. You cannot use '${dn.op.toString()}' filters with '${zn.toString()}' filters.`)}(f,Vt),Vt}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Zl(e.firestore,e.converter,function(f,v){const S=f.filters.concat([v]);return new Ll(f.path,f.collectionGroup,f.explicitOrderBy.slice(),S,f.limit,f.limitType,f.startAt,f.endAt)}(e._query,l))}}class g_ extends Nh{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(l,f,v){if(null!==l.startAt)throw new sn(Ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==l.endAt)throw new sn(Ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const S=new aa(f,v);return function(B,oe){if(null===fu(B)){const ue=Wu(B);null!==ue&&E_(0,ue,oe.field)}}(l,S),S}(e._query,this.fa,this.wa);return new Zl(e.firestore,e.converter,function(l,f){const v=l.explicitOrderBy.concat([f]);return new Ll(l.path,l.collectionGroup,v,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(e._query,t))}}class ql extends Nh{constructor(e,t,l){super(),this.type=e,this.ma=t,this.ga=l}_apply(e){return new Zl(e.firestore,e.converter,F(e._query,this.ma,this.ga))}}class y_ extends Nh{constructor(e,t,l){super(),this.type=e,this.ya=t,this.pa=l}_apply(e){const t=w_(e,this.type,this.ya,this.pa);return new Zl(e.firestore,e.converter,(f=t,new Ll((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,f,l.endAt)));var l,f}}class Hm extends Nh{constructor(e,t,l){super(),this.type=e,this.ya=t,this.pa=l}_apply(e){const t=w_(e,this.type,this.ya,this.pa);return new Zl(e.firestore,e.converter,(f=t,new Ll((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,f)));var l,f}}function w_(o,e,t,l){if(t[0]=(0,nt.m9)(t[0]),t[0]instanceof Oh)return function(f,v,S,B,oe){if(!B)throw new sn(Ht.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${S}().`);const ue=[];for(const Te of xc(f))if(Te.field.isKeyField())ue.push(Xs(v,B.key));else{const at=B.data.field(Te.field);if(Sc(at))throw new sn(Ht.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Te.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===at){const Vt=Te.field.canonicalString();throw new sn(Ht.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Vt}' (used as the orderBy) does not exist.`)}ue.push(at)}return new Co(ue,oe)}(o._query,o.firestore._databaseId,e,t[0]._document,l);{const f=Gu(o.firestore);return function(v,S,B,oe,ue,Te){const at=v.explicitOrderBy;if(ue.length>at.length)throw new sn(Ht.INVALID_ARGUMENT,`Too many arguments provided to ${oe}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Vt=[];for(let ln=0;ln<ue.length;ln++){const dn=ue[ln];if(at[ln].field.isKeyField()){if("string"!=typeof dn)throw new sn(Ht.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${oe}(), but got a ${typeof dn}`);if(!Wc(v)&&-1!==dn.indexOf("/"))throw new sn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${oe}() must be a plain document ID, but '${dn}' contains a slash.`);const zn=v.path.child(gr.fromString(dn));if(!bn.isDocumentKey(zn))throw new sn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${oe}() must result in a valid document path, but '${zn}' is not because it contains an odd number of segments.`);const Ri=new bn(zn);Vt.push(Xs(S,Ri))}else{const zn=Nm(B,oe,dn);Vt.push(zn)}}return new Co(Vt,Te)}(o._query,o.firestore._databaseId,f,e,t,l)}}function C_(o,e,t){if("string"==typeof(t=(0,nt.m9)(t))){if(""===t)throw new sn(Ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wc(e)&&-1!==t.indexOf("/"))throw new sn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const l=e.path.child(gr.fromString(t));if(!bn.isDocumentKey(l))throw new sn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${l}' is not because it has an odd number of segments (${l.length}).`);return Xs(o,new bn(l))}if(t instanceof il)return Xs(o,t._key);throw new sn(Ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dp(t)}.`)}function jm(o,e){if(!Array.isArray(o)||0===o.length)throw new sn(Ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(o.length>10)throw new sn(Ht.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function E_(o,e,t){if(!t.isEqual(e))throw new sn(Ht.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const T_={maxAttempts:5};class I_{convertValue(e,t="none"){switch(yn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ts(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Vn()}}convertObject(e,t){const l={};return Vr(e.fields,(f,v)=>{l[f]=this.convertValue(v,t)}),l}convertGeoPoint(e){return new Mp(ts(e.latitude),ts(e.longitude))}convertArray(e,t){return(e.values||[]).map(l=>this.convertValue(l,t))}convertServerTimestamp(e,t){switch(t){case"previous":const l=uo(e);return null==l?null:this.convertValue(l,t);case"estimate":return this.convertTimestamp(Pl(e));default:return null}}convertTimestamp(e){const t=ma(e);return new Qr(t.seconds,t.nanos)}convertDocumentKey(e,t){const l=gr.fromString(e);Fn(Kh(l));const f=new ne(l.get(1),l.get(3)),v=new bn(l.popFirst(5));return f.isEqual(t)||Fr(`Document ${v} contains a document reference within a different database (${f.projectId}/${f.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),v}}function Lh(o,e,t){let l;return l=o?t&&(t.merge||t.mergeFields)?o.toFirestore(e,t):o.toFirestore(e):e,l}class zm extends I_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new il(this.firestore,null,t)}}class wu{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gu(e)}set(e,t,l){this._verifyNotCommitted();const f=Cd(e,this._firestore),v=Lh(f.converter,t,l),S=eh(this._dataReader,"WriteBatch.set",f._key,v,null!==f.converter,l);return this._mutations.push(S.toMutation(f._key,cs.none())),this}update(e,t,l,...f){this._verifyNotCommitted();const v=Cd(e,this._firestore);let S;return S="string"==typeof(t=(0,nt.m9)(t))||t instanceof zu?Op(this._dataReader,"WriteBatch.update",v._key,t,l,f):Af(this._dataReader,"WriteBatch.update",v._key,t),this._mutations.push(S.toMutation(v._key,cs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cd(e,this._firestore);return this._mutations=this._mutations.concat(new Le(t._key,cs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new sn(Ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cd(o,e){if((o=(0,nt.m9)(o)).firestore!==e)throw new sn(Ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}class Oc extends I_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new il(this.firestore,null,t)}}function A_(o,e,t){o=Hs(o,il);const l=Hs(o.firestore,Sa),f=Lh(o.converter,e,t);return rh(l,[eh(Gu(l),"setDoc",o._key,f,null!==o.converter,t).toMutation(o._key,cs.none())])}function M_(o,e,t,...l){o=Hs(o,il);const f=Hs(o.firestore,Sa),v=Gu(f);let S;return S="string"==typeof(e=(0,nt.m9)(e))||e instanceof zu?Op(v,"updateDoc",o._key,e,t,l):Af(v,"updateDoc",o._key,e),rh(f,[S.toMutation(o._key,cs.exists(!0))])}function Vh(o,...e){var t,l,f;o=(0,nt.m9)(o);let v={includeMetadataChanges:!1},S=0;"object"!=typeof e[S]||id(e[S])||(v=e[S],S++);const B={includeMetadataChanges:v.includeMetadataChanges};if(id(e[S])){const at=e[S];e[S]=null===(t=at.next)||void 0===t?void 0:t.bind(at),e[S+1]=null===(l=at.error)||void 0===l?void 0:l.bind(at),e[S+2]=null===(f=at.complete)||void 0===f?void 0:f.bind(at)}let oe,ue,Te;if(o instanceof il)ue=Hs(o.firestore,Sa),Te=Vl(o._key.path),oe={next:at=>{e[S]&&e[S]($m(ue,o,at))},error:e[S+1],complete:e[S+2]};else{const at=Hs(o,Zl);ue=Hs(at.firestore,Sa),Te=at._query;const Vt=new Oc(ue);oe={next:ln=>{e[S]&&e[S](new sd(ue,Vt,at,ln))},error:e[S+1],complete:e[S+2]},Um(o._query)}return function(at,Vt,ln,dn){const zn=new Tf(dn),Ri=new _f(Vt,zn,ln);return at.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return Vg(yield Ih(at),Ri)})),()=>{zn.Tc(),at.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return Ug(yield Ih(at),Ri)}))}}(Ha(ue),Te,B,oe)}function rh(o,e){return function(t,l){const f=new Ls;return t.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return function Py(o,e,t){return dp.apply(this,arguments)}(yield Tp(t),l,f)})),f.promise}(Ha(o),e)}function $m(o,e,t){const l=t.docs.get(e._key),f=new Oc(o);return new $u(o,f,e._key,l,new wd(t.hasPendingWrites,t.fromCache),e.converter)}class R_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gu(e)}get(e){const t=Cd(e,this._firestore),l=new zm(this._firestore);return this._transaction.lookup([t._key]).then(f=>{if(!f||1!==f.length)return Vn();const v=f[0];if(v.isFoundDocument())return new Oh(this._firestore,l,v.key,v,t.converter);if(v.isNoDocument())return new Oh(this._firestore,l,t._key,null,t.converter);throw Vn()})}set(e,t,l){const f=Cd(e,this._firestore),v=Lh(f.converter,t,l),S=eh(this._dataReader,"Transaction.set",f._key,v,null!==f.converter,l);return this._transaction.set(f._key,S),this}update(e,t,l,...f){const v=Cd(e,this._firestore);let S;return S="string"==typeof(t=(0,nt.m9)(t))||t instanceof zu?Op(this._dataReader,"Transaction.update",v._key,t,l,f):Af(this._dataReader,"Transaction.update",v._key,t),this._transaction.update(v._key,S),this}delete(e){const t=Cd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cd(e,this._firestore),l=new Oc(this._firestore);return super.get(e).then(f=>new $u(this._firestore,l,t._key,f._document,new wd(!1,!1),t.converter))}}function Vp(o,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new sn("invalid-argument",`Invalid options passed to function ${o}(): You cannot specify both "merge" and "mergeFields".`);return e}function qm(){if(typeof Uint8Array>"u")throw new sn("unimplemented","Uint8Arrays are not available in this environment.")}function Ym(){if(!function $l(){return typeof atob<"u"}())throw new sn("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(o,e=!0){wl=qt.SDK_VERSION,(0,qt._registerComponent)(new Be.wA("firestore",(t,{options:l})=>{const f=t.getProvider("app").getImmediate(),v=new Sa(f,new Xl(t.getProvider("auth-internal")),new Ms(t.getProvider("app-check-internal")));return l=Object.assign({useFetchStreams:e},l),v._setSettings(l),v},"PUBLIC")),(0,qt.registerVersion)(jl,"3.4.14",o),(0,qt.registerVersion)(jl,"3.4.14","esm2017")}();class Bh{constructor(e){this._delegate=e}static fromBase64String(e){return Ym(),new Bh(Pu.fromBase64String(e))}static fromUint8Array(e){return qm(),new Bh(Pu.fromUint8Array(e))}toBase64(){return Ym(),this._delegate.toBase64()}toUint8Array(){return qm(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Qm(o){return function av(o,e){if("object"!=typeof o||null===o)return!1;const t=o;for(const l of e)if(l in t&&"function"==typeof t[l])return!0;return!1}(o,["next","error","complete"])}class lv{enableIndexedDbPersistence(e,t){return function Dh(o,e){km(o=Hs(o,Sa));const t=Ha(o),l=o._freezeSettings(),f=new Im;return Jd(t,f,new Ef(f,l.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function xh(o){km(o=Hs(o,Sa));const e=Ha(o),t=o._freezeSettings(),l=new Im;return Jd(e,l,new Tm(l,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ah(o){if(o._initialized&&!o._terminated)throw new sn(Ht.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ls;return o._queue.enqueueAndForgetEvenWhileRestricted((0,ot.Z)(function*(){try{yield(t=(0,ot.Z)(function*(l){if(!R.V())return Promise.resolve();const f=l+"main";yield R.delete(f)}),function(l){return t.apply(this,arguments)})(Jp(o._databaseId,o._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class V_{constructor(e,t,l){this._delegate=t,this._persistenceProvider=l,this.INTERNAL={delete:()=>this.terminate()},e instanceof ne||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,l={}){!function Yd(o,e,t,l={}){var f;const v=(o=Hs(o,bd))._getSettings();if("firestore.googleapis.com"!==v.host&&v.host!==e&&sa("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},v),{host:`${e}:${t}`,ssl:!1})),l.mockUserToken){let S,B;if("string"==typeof l.mockUserToken)S=l.mockUserToken,B=ur.MOCK_USER;else{S=(0,nt.Sg)(l.mockUserToken,null===(f=o._app)||void 0===f?void 0:f.options.projectId);const oe=l.mockUserToken.sub||l.mockUserToken.user_id;if(!oe)throw new sn(Ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");B=new ur(oe)}o._authCredentials=new Ic(new kl(S,B))}}(this._delegate,e,t,l)}enableNetwork(){return function o_(o){return function Sf(o){return o.asyncQueue.enqueue((0,ot.Z)(function*(){const e=yield Th(o),t=yield Ep(o);return e.setNetworkEnabled(!0),function(l){const f=Dn(l);return f.lu.delete(0),af(f)}(t)}))}(Ha(o=Hs(o,Sa)))}(this._delegate)}disableNetwork(){return function a_(o){return function Gy(o){return o.asyncQueue.enqueue((0,ot.Z)(function*(){const e=yield Th(o),t=yield Ep(o);return e.setNetworkEnabled(!1),(l=(0,ot.Z)(function*(f){const v=Dn(f);v.lu.add(0),yield $d(v),v._u.set("Offline")}),function(f){return l.apply(this,arguments)})(t);var l}))}(Ha(o=Hs(o,Sa)))}(this._delegate)}enablePersistence(e){let t=!1,l=!1;return e&&(t=!!e.synchronizeTabs,l=!!e.experimentalForceOwningTab,Sp("synchronizeTabs",t,"experimentalForceOwningTab",l)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,l)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Mh(o){return function(e){const t=new Ls;return e.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return function Ly(o,e){return pp.apply(this,arguments)}(yield Tp(e),t)})),t.promise}(Ha(o=Hs(o,Sa)))}(this._delegate)}onSnapshotsInSync(e){return function sv(o,e){return function $y(o,e){const t=new Tf(e);return o.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return l=yield Ih(o),f=t,Dn(l).Tu.add(f),void f.next();var l,f})),()=>{t.Tc(),o.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return l=yield Ih(o),f=t,void Dn(l).Tu.delete(f);var l,f}))}}(Ha(o=Hs(o,Sa)),id(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new sn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oh(this,s_(this._delegate,e))}catch(t){throw jc(t,"collection()","Firestore.collection()")}}doc(e){try{return new Cu(this,xp(this._delegate,e))}catch(t){throw jc(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zc(this,function Rm(o,e){if(o=Hs(o,bd),Mm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new sn(Ht.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zl(o,null,(t=e,new Ll(gr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw jc(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function k_(o,e,t){o=Hs(o,Sa);const l=Object.assign(Object.assign({},T_),t);return function(f){if(f.maxAttempts<1)throw new sn(Ht.INVALID_ARGUMENT,"Max attempts must be at least 1")}(l),function Ky(o,e,t){const l=new Ls;return o.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){const f=yield(v=o,qd(v).then(S=>S.datastore));var v;new Sm(o.asyncQueue,f,t,e,l).run()})),l.promise}(Ha(o),f=>e(new R_(o,f)),l)}(this._delegate,t=>e(new B_(this,t)))}batch(){return Ha(this._delegate),new U_(new wu(this._delegate,e=>rh(this._delegate,e)))}loadBundle(e){return function l_(o,e){const t=Ha(o=Hs(o,Sa)),l=new Ap;return function Wy(o,e,t,l){const f=function(v,S){let B;return B="string"==typeof v?(new TextEncoder).encode(v):v,oe=function(oe,ue){if(oe instanceof Uint8Array)return vp(oe,void 0);if(oe instanceof ArrayBuffer)return vp(new Uint8Array(oe),void 0);if(oe instanceof ReadableStream)return oe.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(B),new ub(oe,S);var oe}(t,sf(e));o.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){!function zy(o,e,t){const l=Dn(o);var f;(f=(0,ot.Z)(function*(v,S,B){try{const oe=yield S.getMetadata();if(yield function(Vt,ln){const dn=Dn(Vt),zn=rs(ln.createTime);return dn.persistence.runTransaction("hasNewerBundle","readonly",Ri=>dn.Ds.getBundleMetadata(Ri,ln.id)).then(Ri=>!!Ri&&Ri.createTime.compareTo(zn)>=0)}(v.localStore,oe))return yield S.close(),B._completeWith({taskState:"Success",documentsLoaded:(Vt=oe).totalDocuments,bytesLoaded:Vt.totalBytes,totalDocuments:Vt.totalDocuments,totalBytes:Vt.totalBytes}),Promise.resolve(new Set);B._updateProgress(nd(oe));const ue=new Ry(oe,v.localStore,S.wt);let Te=yield S.fc();for(;Te;){const Vt=yield ue.Nu(Te);Vt&&B._updateProgress(Vt),Te=yield S.fc()}const at=yield ue.complete();return yield Mu(v,at.Ou,void 0),yield function(Vt,ln){const dn=Dn(Vt);return dn.persistence.runTransaction("Save bundle","readwrite",zn=>dn.Ds.saveBundleMetadata(zn,ln))}(v.localStore,oe),B._completeWith(at.progress),Promise.resolve(at.Mu)}catch(oe){return sa("SyncEngine",`Loading bundle failed with ${oe}`),B._failWith(oe),Promise.resolve(new Set)}var Vt}),function(v,S,B){return f.apply(this,arguments)})(l,e,t).then(f=>{l.sharedClientState.notifyBundleLoaded(f)})}(yield Tp(o),f,l)}))}(t,o._databaseId,e,l),l}(this._delegate,e)}namedQuery(e){return function c_(o,e){return function e_(o,e){return o.asyncQueue.enqueue((0,ot.Z)(function*(){return function(t,l){const f=Dn(t);return f.persistence.runTransaction("Get named query","readonly",v=>f.Ds.getNamedQuery(v,l))}(yield Cp(o),e)}))}(Ha(o=Hs(o,Sa)),e).then(t=>t?new Zl(o,null,t.query):null)}(this._delegate,e).then(t=>t?new zc(this,t):null)}}class Bp extends I_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bh(new Pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Cu.forKey(t,this.firestore,null)}}class B_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bp(e)}get(e){const t=Ed(e);return this._delegate.get(t).then(l=>new Rf(this._firestore,new $u(this._firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,t.converter)))}set(e,t,l){const f=Ed(e);return l?(Vp("Transaction.set",l),this._delegate.set(f,t,l)):this._delegate.set(f,t),this}update(e,t,l,...f){const v=Ed(e);return 2===arguments.length?this._delegate.update(v,t):this._delegate.update(v,t,l,...f),this}delete(e){const t=Ed(e);return this._delegate.delete(t),this}}class U_{constructor(e){this._delegate=e}set(e,t,l){const f=Ed(e);return l?(Vp("WriteBatch.set",l),this._delegate.set(f,t,l)):this._delegate.set(f,t),this}update(e,t,l,...f){const v=Ed(e);return 2===arguments.length?this._delegate.update(v,t):this._delegate.update(v,t,l,...f),this}delete(e){const t=Ed(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sh{constructor(e,t,l){this._firestore=e,this._userDataWriter=t,this._delegate=l}fromFirestore(e,t){const l=new Ph(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kf(this._firestore,l),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const l=sh.INSTANCES;let f=l.get(e);f||(f=new WeakMap,l.set(e,f));let v=f.get(t);return v||(v=new sh(e,new Bp(e),t),f.set(t,v)),v}}sh.INSTANCES=new WeakMap;class Cu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bp(e)}static forPath(e,t,l){if(e.length%2!=0)throw new sn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Cu(t,new il(t._delegate,l,new bn(e)))}static forKey(e,t,l){return new Cu(t,new il(t._delegate,l,e))}get id(){return this._delegate.id}get parent(){return new oh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oh(this.firestore,s_(this._delegate,e))}catch(t){throw jc(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nt.m9)(e))instanceof il&&Ou(this._delegate,e)}set(e,t){t=Vp("DocumentReference.set",t);try{return t?A_(this._delegate,e,t):A_(this._delegate,e)}catch(l){throw jc(l,"setDoc()","DocumentReference.set()")}}update(e,t,...l){try{return 1===arguments.length?M_(this._delegate,e):M_(this._delegate,e,t,...l)}catch(f){throw jc(f,"updateDoc()","DocumentReference.update()")}}delete(){return function rv(o){return rh(Hs(o.firestore,Sa),[new Le(o._key,cs.none())])}(this._delegate)}onSnapshot(...e){const t=H_(e),l=j_(e,f=>new Rf(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,f._key,f._document,f.metadata,this._delegate.converter)));return Vh(this._delegate,t,l)}get(e){let t;return t="cache"===e?.source?function Nu(o){o=Hs(o,il);const e=Hs(o.firestore,Sa),t=Ha(e),l=new Oc(e);return function fb(o,e){const t=new Ls;return o.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return(l=(0,ot.Z)(function*(f,v,S){try{const B=yield function(oe,ue){const Te=Dn(oe);return Te.persistence.runTransaction("read document","readonly",at=>Te.localDocuments.getDocument(at,ue))}(f,v);B.isFoundDocument()?S.resolve(B):B.isNoDocument()?S.resolve(null):S.reject(new sn(Ht.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(B){const oe=pf(B,`Failed to get document '${v} from cache`);S.reject(oe)}}),function(f,v,S){return l.apply(this,arguments)})(yield Cp(o),e,t);var l})),t.promise}(t,o._key).then(f=>new $u(e,l,o._key,f,new wd(null!==f&&f.hasLocalMutations,!0),o.converter))}(this._delegate):"server"===e?.source?function Fu(o){o=Hs(o,il);const e=Hs(o.firestore,Sa);return Jg(Ha(e),o._key,{source:"server"}).then(t=>$m(e,o,t))}(this._delegate):function S_(o){o=Hs(o,il);const e=Hs(o.firestore,Sa);return Jg(Ha(e),o._key).then(t=>$m(e,o,t))}(this._delegate),t.then(l=>new Rf(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)))}withConverter(e){return new Cu(this.firestore,this._delegate.withConverter(e?sh.getInstance(this.firestore,e):null))}}function jc(o,e,t){return o.message=o.message.replace(e,t),o}function H_(o){for(const e of o)if("object"==typeof e&&!Qm(e))return e;return{}}function j_(o,e){var t,l;let f;return f=Qm(o[0])?o[0]:Qm(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]},{next:v=>{f.next&&f.next(e(v))},error:null===(t=f.error)||void 0===t?void 0:t.bind(f),complete:null===(l=f.complete)||void 0===l?void 0:l.bind(f)}}class Rf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Cu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Bm(this._delegate,e._delegate)}}class kf extends Rf{data(e){const t=this._delegate.data(e);return function lo(o,e){o||Vn()}(void 0!==t),t}}class zc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bp(e)}where(e,t,l){try{return new zc(this.firestore,ih(this._delegate,function Xy(o,e,t){const l=e,f=nh("where",o);return new Jy(f,l,t)}(e,t,l)))}catch(f){throw jc(f,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zc(this.firestore,ih(this._delegate,function ev(o,e="asc"){const t=e,l=nh("orderBy",o);return new g_(l,t)}(e,t)))}catch(l){throw jc(l,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zc(this.firestore,ih(this._delegate,function __(o){return i_("limit",o),new ql("limit",o,"F")}(e)))}catch(t){throw jc(t,"limit()","Query.limit()")}}limitToLast(e){try{return new zc(this.firestore,ih(this._delegate,function tv(o){return i_("limitToLast",o),new ql("limitToLast",o,"L")}(e)))}catch(t){throw jc(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zc(this.firestore,ih(this._delegate,function v_(...o){return new y_("startAt",o,!0)}(...e)))}catch(t){throw jc(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zc(this.firestore,ih(this._delegate,function nv(...o){return new y_("startAfter",o,!1)}(...e)))}catch(t){throw jc(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zc(this.firestore,ih(this._delegate,function b_(...o){return new Hm("endBefore",o,!1)}(...e)))}catch(t){throw jc(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zc(this.firestore,ih(this._delegate,function Fh(...o){return new Hm("endAt",o,!0)}(...e)))}catch(t){throw jc(t,"endAt()","Query.endAt()")}}isEqual(e){return Sh(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function x_(o){o=Hs(o,Zl);const e=Hs(o.firestore,Sa),t=Ha(e),l=new Oc(e);return function pb(o,e){const t=new Ls;return o.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return(l=(0,ot.Z)(function*(f,v,S){try{const B=yield Zf(f,v,!0),oe=new zg(v,B.ji),ue=oe.Ku(B.documents),Te=oe.applyChanges(ue,!1);S.resolve(Te.snapshot)}catch(B){const oe=pf(B,`Failed to execute query '${v} against cache`);S.reject(oe)}}),function(f,v,S){return l.apply(this,arguments)})(yield Cp(o),e,t);var l})),t.promise}(t,o._query).then(f=>new sd(e,l,o,f))}(this._delegate):"server"===e?.source?function iv(o){o=Hs(o,Zl);const e=Hs(o.firestore,Sa),t=Ha(e),l=new Oc(e);return Xg(t,o._query,{source:"server"}).then(f=>new sd(e,l,o,f))}(this._delegate):function D_(o){o=Hs(o,Zl);const e=Hs(o.firestore,Sa),t=Ha(e),l=new Oc(e);return Um(o._query),Xg(t,o._query).then(f=>new sd(e,l,o,f))}(this._delegate),t.then(l=>new Jm(this.firestore,new sd(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)))}onSnapshot(...e){const t=H_(e),l=j_(e,f=>new Jm(this.firestore,new sd(this.firestore._delegate,this._userDataWriter,this._delegate,f._snapshot)));return Vh(this._delegate,t,l)}withConverter(e){return new zc(this.firestore,this._delegate.withConverter(e?sh.getInstance(this.firestore,e):null))}}class uv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new kf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Jm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zc(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new kf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uv(this._firestore,t))}forEach(e,t){this._delegate.forEach(l=>{e.call(t,new kf(this._firestore,l))})}isEqual(e){return Bm(this._delegate,e._delegate)}}class oh extends zc{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Cu(this.firestore,e):null}doc(e){try{return new Cu(this.firestore,void 0===e?xp(this._delegate):xp(this._delegate,e))}catch(t){throw jc(t,"doc()","CollectionReference.doc()")}}add(e){return function Gm(o,e){const t=Hs(o.firestore,Sa),l=xp(o),f=Lh(o.converter,e);return rh(t,[eh(Gu(o.firestore),"addDoc",l._key,f,null!==o.converter,{}).toMutation(l._key,cs.exists(!1))]).then(()=>l)}(this._delegate,e).then(t=>new Cu(this.firestore,t))}isEqual(e){return Ou(this._delegate,e._delegate)}withConverter(e){return new oh(this.firestore,this._delegate.withConverter(e?sh.getInstance(this.firestore,e):null))}}function Ed(o){return Hs(o,il)}class Up{constructor(...e){this._delegate=new zu(...e)}static documentId(){return new Up(Rs.keyField().canonicalString())}isEqual(e){return(e=(0,nt.m9)(e))instanceof zu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Td{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ov(){return new kh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Td(e)}static delete(){const e=function Lp(){return new th("deleteField")}();return e._methodName="FieldValue.delete",new Td(e)}static arrayUnion(...e){const t=function O_(...o){return new kp("arrayUnion",o)}(...e);return t._methodName="FieldValue.arrayUnion",new Td(t)}static arrayRemove(...e){const t=function P_(...o){return new Pm("arrayRemove",o)}(...e);return t._methodName="FieldValue.arrayRemove",new Td(t)}static increment(e){const t=function Km(o){return new h_("increment",o)}(e);return t._methodName="FieldValue.increment",new Td(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const z_={Firestore:V_,GeoPoint:Mp,Timestamp:Qr,Blob:Bh,Transaction:B_,WriteBatch:U_,DocumentReference:Cu,DocumentSnapshot:Rf,Query:zc,QueryDocumentSnapshot:kf,QuerySnapshot:Jm,CollectionReference:oh,FieldPath:Up,FieldValue:Td,setLogLevel:function cv(o){!function cl(o){Ho.setLogLevel(o)}(o)},CACHE_SIZE_UNLIMITED:-1};!function $_(o){(function G_(o,e){o.INTERNAL.registerComponent(new Be.wA("firestore-compat",t=>{const l=t.getProvider("app-compat").getImmediate(),f=t.getProvider("firestore").getImmediate();return e(l,f)},"PUBLIC").setServiceProps(Object.assign({},z_)))})(o,(e,t)=>new V_(e,t,new lv)),o.registerVersion("@firebase/firestore-compat","0.1.23")}(bt.Z);var od=Q(1205),K_=Q(440),W_=Q(127);function Id(o,e){return function Xm(o,e=i.z){return new se.y(t=>{let l;return null!=e?e.schedule(()=>{l=o.onSnapshot({includeMetadataChanges:!0},t)}):l=o.onSnapshot({includeMetadataChanges:!0},t),()=>{l?.()}})}(o,e)}function eg(o,e){return Id(o,e).pipe((0,Se.U)(t=>({payload:t,type:"query"})))}function ad(o,e){return eg(o,e).pipe((0,Oe.O)(void 0),Re(),(0,Se.U)(([t,l])=>{const f=l.payload.docChanges(),v=f.map(S=>({type:S.type,payload:S}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(l.payload.metadata)&&l.payload.docs.forEach((S,B)=>{const oe=f.find(Te=>Te.doc.ref.isEqual(S.ref)),ue=t?.payload.docs.find(Te=>Te.ref.isEqual(S.ref));oe&&JSON.stringify(oe.doc.metadata)===JSON.stringify(S.metadata)||!oe&&ue&&JSON.stringify(ue.metadata)===JSON.stringify(S.metadata)||v.push({type:"modified",payload:{oldIndex:B,newIndex:B,type:"modified",doc:S}})}),v}))}function hv(o,e,t){return ad(o,t).pipe((0,Ge.R)((l,f)=>function tg(o,e,t){return e.forEach(l=>{t.indexOf(l.type)>-1&&(o=function q_(o,e){switch(e.type){case"added":if(!o[e.newIndex]||!o[e.newIndex].doc.ref.isEqual(e.doc.ref))return Z_(o,e.newIndex,0,e);break;case"modified":if(null==o[e.oldIndex]||o[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=o.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Z_(o,e.newIndex,1,e)}break;case"removed":if(o[e.oldIndex]&&o[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Z_(o,e.oldIndex,1)}return o}(o,l))}),o}(l,f.map(v=>v.payload),e),[]),(0,kt.x)(),(0,Se.U)(l=>l.map(f=>({type:f.type,payload:f}))))}function Z_(o,e,t,...l){const f=o.slice();return f.splice(e,t,...l),f}function ng(o){return(!o||0===o.length)&&(o=["added","removed","modified"]),o}class fv{constructor(e,t,l){this.ref=e,this.query=t,this.afs=l}stateChanges(e){let t=ad(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Se.U)(l=>l.filter(f=>e.indexOf(f.type)>-1)))),t.pipe((0,Oe.O)(void 0),Re(),(0,dt.h)(([l,f])=>f.length>0||!l),(0,Se.U)(([l,f])=>f),Ee.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ge.R)((t,l)=>[...t,...l],[]))}snapshotChanges(e){const t=ng(e);return hv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}valueChanges(e={}){return eg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Se.U)(t=>t.payload.docs.map(l=>e.idField?Object.assign(Object.assign({},l.data()),{[e.idField]:l.id}):l.data())),Ee.iC)}get(e){return(0,ge.D)(this.query.get(e)).pipe(Ee.iC)}add(e){return this.ref.add(e)}doc(e){return new ir(this.ref.doc(e),this.afs)}}class ir{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const l=this.ref.collection(e),{ref:f,query:v}=Of(l,t);return new fv(f,v,this.afs)}snapshotChanges(){return function dv(o,e){return Id(o,e).pipe((0,Oe.O)(void 0),Re(),(0,Se.U)(([t,l])=>l.exists?t?.exists?{payload:l,type:"modified"}:{payload:l,type:"added"}:{payload:l,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Se.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ge.D)(this.ref.get(e)).pipe(Ee.iC)}}class pv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ad(this.query,this.afs.schedulers.outsideAngular).pipe((0,Se.U)(t=>t.filter(l=>e.indexOf(l.type)>-1)),(0,dt.h)(t=>t.length>0),Ee.iC):ad(this.query,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ge.R)((t,l)=>[...t,...l],[]))}snapshotChanges(e){const t=ng(e);return hv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}valueChanges(e={}){return eg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Se.U)(l=>l.payload.docs.map(f=>e.idField?Object.assign({[e.idField]:f.id},f.data()):f.data())),Ee.iC)}get(e){return(0,ge.D)(this.query.get(e)).pipe(Ee.iC)}}const Y_=new g.OlP("angularfire2.enableFirestorePersistence"),Q_=new g.OlP("angularfire2.firestore.persistenceSettings"),Uh=new g.OlP("angularfire2.firestore.settings"),mv=new g.OlP("angularfire2.firestore.use-emulator");function Of(o,e=(t=>t)){return{query:e(o),ref:o}}let Pf=(()=>{class o{constructor(t,l,f,v,S,B,oe,ue,Te,at,Vt,ln,dn,zn,Ri,js,Yo){this.schedulers=oe;const Ro=(0,wt.on)(t,B,l),_a=Te;at&&(0,od.nw)(Ro,B,Vt,dn,zn,Ri,ln,js),[this.firestore,this.persistenceEnabled$]=(0,wt.cc)(`${Ro.name}.firestore`,"AngularFirestore",Ro.name,()=>{const Os=B.runOutsideAngular(()=>Ro.firestore());if(v&&Os.settings(v),_a&&Os.useEmulator(..._a),f&&!(0,Wt.PM)(S)){const Vo=()=>{try{return(0,ge.D)(Os.enablePersistence(ue||void 0).then(()=>!0,()=>!1))}catch(ac){return typeof console<"u"&&console.warn(ac),(0,Ke.of)(!1)}};return[Os,B.runOutsideAngular(Vo)]}return[Os,(0,Ke.of)(!1)]},[v,_a,f])}collection(t,l){let f;f="string"==typeof t?this.firestore.collection(t):t;const{ref:v,query:S}=Of(f,l),B=this.schedulers.ngZone.run(()=>v);return new fv(B,S,this)}collectionGroup(t,l){const f=l||(S=>S),v=this.firestore.collectionGroup(t);return new pv(f(v),this)}doc(t){let l;l="string"==typeof t?this.firestore.doc(t):t;const f=this.schedulers.ngZone.run(()=>l);return new ir(f,this)}createId(){return this.firestore.collection("_").doc().id}}return o.\u0275fac=function(t){return new(t||o)(g.LFG(wt.Dh),g.LFG(wt.xv,8),g.LFG(Y_,8),g.LFG(Uh,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ee.HU),g.LFG(Q_,8),g.LFG(mv,8),g.LFG(od.zQ,8),g.LFG(od.Qv,8),g.LFG(od.L6,8),g.LFG(od._Q,8),g.LFG(od.rT,8),g.LFG(od.lh,8),g.LFG(od.f7,8),g.LFG(K_.nm,8))},o.\u0275prov=g.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})(),Dl=(()=>{class o{constructor(){W_.Z.registerVersion("angularfire",Ee.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:o,providers:[{provide:Y_,useValue:!0},{provide:Q_,useValue:t}]}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=g.oAB({type:o}),o.\u0275inj=g.cJS({providers:[Pf]}),o})()},2011:(Sn,Ct,Q)=>{Q.d(Ct,{Dh:()=>Me,GT:()=>Ee,cc:()=>dt,hO:()=>kt,on:()=>Re,pX:()=>Ke,xv:()=>rt});var g=Q(4650),i=Q(127),se=Q(5813);Sn=Q.hmd(Sn);const ge=["ngOnDestroy"],Ke=(bt,ot,qt,Be={})=>new Proxy(bt,{get:(we,nt)=>qt.runOutsideAngular(()=>{var Xe;if(bt[nt])return!(null===(Xe=Be?.spy)||void 0===Xe)&&Xe.get&&Be.spy.get(nt,bt[nt]),bt[nt];if(ge.indexOf(nt)>-1)return()=>{};const xe=ot.toPromise().then(ee=>{const pt=ee&&ee[nt];return"function"==typeof pt?pt.bind(ee):pt&&pt.then?pt.then(Ue=>qt.run(()=>Ue)):qt.run(()=>pt)});return new Proxy(()=>{},{get:(ee,pt)=>xe[pt],apply:(ee,pt,Ue)=>xe.then(st=>{var Et;const yt=st&&st(...Ue);return!(null===(Et=Be?.spy)||void 0===Et)&&Et.apply&&Be.spy.apply(nt,Ue,yt),yt})})})}),Ee=(bt,ot)=>{ot.forEach(qt=>{Object.getOwnPropertyNames(qt.prototype||qt).forEach(Be=>{Object.defineProperty(bt.prototype,Be,Object.getOwnPropertyDescriptor(qt.prototype||qt,Be))})})};class Oe{constructor(ot){return ot}}const Me=new g.OlP("angularfire2.app.options"),rt=new g.OlP("angularfire2.app.name");function Re(bt,ot,qt){const we="object"==typeof qt&&qt||{};we.name=we.name||"string"==typeof qt&&qt||"[DEFAULT]";const Xe=i.Z.apps.filter(xe=>xe&&xe.name===we.name)[0]||ot.runOutsideAngular(()=>i.Z.initializeApp(bt,we));try{JSON.stringify(bt)!==JSON.stringify(Xe.options)&&Se("error",`${Xe.name} Firebase App already initialized with different options${Sn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Oe(Xe)}const Se=(bt,...ot)=>{(0,g.X6Q)()&&typeof console<"u"&&console[bt](...ot)},Ge={provide:Oe,useFactory:Re,deps:[Me,g.R0b,[new g.FiY,rt]]};let kt=(()=>{class bt{constructor(qt){i.Z.registerVersion("angularfire",se.q4.full,"core"),i.Z.registerVersion("angularfire",se.q4.full,"app-compat"),i.Z.registerVersion("angular",g.q4F.full,qt.toString())}static initializeApp(qt,Be){return{ngModule:bt,providers:[{provide:Me,useValue:qt},{provide:rt,useValue:Be}]}}}return bt.\u0275fac=function(qt){return new(qt||bt)(g.LFG(g.Lbi))},bt.\u0275mod=g.oAB({type:bt}),bt.\u0275inj=g.cJS({providers:[Ge]}),bt})();function dt(bt,ot,qt,Be,we){const[,nt,Xe]=globalThis.\u0275AngularfireInstanceCache.find(xe=>xe[0]===bt)||[];if(nt)return function wt(bt,ot){try{return bt.toString()===ot.toString()}catch{return bt===ot}}(we,Xe)||(Dt("error",`${ot} was already initialized on the ${qt} Firebase App with different settings.${Wt?" You may need to reload as Firebase is not HMR aware.":""}`),Dt("warn",{is:we,was:Xe})),nt;{const xe=Be();return globalThis.\u0275AngularfireInstanceCache.push([bt,xe,we]),xe}}const Wt=!!Sn.hot,Dt=(bt,...ot)=>{(0,g.X6Q)()&&typeof console<"u"&&console[bt](...ot)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Sn,Ct,Q)=>{Q.d(Ct,{q4:()=>Pe,iC:()=>Fa,fc:()=>ma,HU:()=>$o,vb:()=>Br,JM:()=>Go});var g=Q(4650),i=Q(5867),se=Q(5861),ge=Q(9681),Ke=Q(2090),Ee=Q(4859),Oe=Q(1877),Me=Q(8766);const rt="@firebase/installations",Re="0.5.12",Ge=`w:${Re}`,kt="FIS_v2",ot=new Ke.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function qt(q){return q instanceof Ke.ZR&&q.code.includes("request-failed")}function Be({projectId:q}){return`https://firebaseinstallations.googleapis.com/v1/projects/${q}/installations`}function we(q){return{token:q.token,requestStatus:2,expiresIn:st(q.expiresIn),creationTime:Date.now()}}function nt(q,ne){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,se.Z)(function*(q,ne){const je=(yield ne.json()).error;return ot.create("request-failed",{requestName:q,serverCode:je.code,serverMessage:je.message,serverStatus:je.status})})).apply(this,arguments)}function xe({apiKey:q}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":q})}function ee(q,{refreshToken:ne}){const he=xe(q);return he.append("Authorization",function Et(q){return`${kt} ${q}`}(ne)),he}function pt(q){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,se.Z)(function*(q){const ne=yield q();return ne.status>=500&&ne.status<600?q():ne})).apply(this,arguments)}function st(q){return Number(q.replace("s","000"))}function yt(q,ne){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,se.Z)(function*({appConfig:q,heartbeatServiceProvider:ne},{fid:he}){const je=Be(q),gt=xe(q),At=ne.getImmediate({optional:!0});if(At){const ci=yield At.getHeartbeatsHeader();ci&&gt.append("x-firebase-client",ci)}const yn={method:"POST",headers:gt,body:JSON.stringify({fid:he,authVersion:kt,appId:q.appId,sdkVersion:Ge})},Xn=yield pt(()=>fetch(je,yn));if(Xn.ok){const ci=yield Xn.json();return{fid:ci.fid||he,registrationStatus:2,refreshToken:ci.refreshToken,authToken:we(ci.authToken)}}throw yield nt("Create Installation",Xn)})).apply(this,arguments)}function rn(q){return new Promise(ne=>{setTimeout(ne,q)})}const kn=/^[cdef][\w-]{21}$/;function Gt(){try{const q=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(q),q[0]=112+q[0]%16;const he=function di(q){return function gn(q){return btoa(String.fromCharCode(...q)).replace(/\+/g,"-").replace(/\//g,"_")}(q).substr(0,22)}(q);return kn.test(he)?he:""}catch{return""}}function Un(q){return`${q.appName}!${q.appId}`}const xt=new Map;function Ut(q,ne){const he=Un(q);un(he,ne),function Hn(q,ne){const he=function Ci(){return!Wi&&"BroadcastChannel"in self&&(Wi=new BroadcastChannel("[Firebase] FID Change"),Wi.onmessage=q=>{un(q.data.key,q.data.fid)}),Wi}();he&&he.postMessage({key:q,fid:ne}),function Ei(){0===xt.size&&Wi&&(Wi.close(),Wi=null)}()}(he,ne)}function un(q,ne){const he=xt.get(q);if(he)for(const je of he)je(ne)}let Wi=null;const Ki="firebase-installations-store";let Ui=null;function yi(){return Ui||(Ui=(0,Me.X3)("firebase-installations-database",1,{upgrade:(q,ne)=>{0===ne&&q.createObjectStore(Ki)}})),Ui}function Jt(q,ne){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,se.Z)(function*(q,ne){const he=Un(q),gt=(yield yi()).transaction(Ki,"readwrite"),At=gt.objectStore(Ki),cn=yield At.get(he);return yield At.put(ne,he),yield gt.done,(!cn||cn.fid!==ne.fid)&&Ut(q,ne.fid),ne})).apply(this,arguments)}function Hi(q){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,se.Z)(function*(q){const ne=Un(q),je=(yield yi()).transaction(Ki,"readwrite");yield je.objectStore(Ki).delete(ne),yield je.done})).apply(this,arguments)}function Jr(q,ne){return sr.apply(this,arguments)}function sr(){return(sr=(0,se.Z)(function*(q,ne){const he=Un(q),gt=(yield yi()).transaction(Ki,"readwrite"),At=gt.objectStore(Ki),cn=yield At.get(he),yn=ne(cn);return void 0===yn?yield At.delete(he):yield At.put(yn,he),yield gt.done,yn&&(!cn||cn.fid!==yn.fid)&&Ut(q,yn.fid),yn})).apply(this,arguments)}function xr(q){return br.apply(this,arguments)}function br(){return(br=(0,se.Z)(function*(q){let ne;const he=yield Jr(q.appConfig,je=>{const gt=Ji(je),At=Kn(q,gt);return ne=At.registrationPromise,At.installationEntry});return""===he.fid?{installationEntry:yield ne}:{installationEntry:he,registrationPromise:ne}})).apply(this,arguments)}function Ji(q){return ri(q||{fid:Gt(),registrationStatus:0})}function Kn(q,ne){if(0===ne.registrationStatus){if(!navigator.onLine)return{installationEntry:ne,registrationPromise:Promise.reject(ot.create("app-offline"))};const he={fid:ne.fid,registrationStatus:1,registrationTime:Date.now()},je=function Gn(q,ne){return fi.apply(this,arguments)}(q,he);return{installationEntry:he,registrationPromise:je}}return 1===ne.registrationStatus?{installationEntry:ne,registrationPromise:Ar(q)}:{installationEntry:ne}}function fi(){return(fi=(0,se.Z)(function*(q,ne){try{const he=yield yt(q,ne);return Jt(q.appConfig,he)}catch(he){throw qt(he)&&409===he.customData.serverCode?yield Hi(q.appConfig):yield Jt(q.appConfig,{fid:ne.fid,registrationStatus:0}),he}})).apply(this,arguments)}function Ar(q){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,se.Z)(function*(q){let ne=yield ji(q.appConfig);for(;1===ne.registrationStatus;)yield rn(100),ne=yield ji(q.appConfig);if(0===ne.registrationStatus){const{installationEntry:he,registrationPromise:je}=yield xr(q);return je||he}return ne})).apply(this,arguments)}function ji(q){return Jr(q,ne=>{if(!ne)throw ot.create("installation-not-found");return ri(ne)})}function ri(q){return function or(q){return 1===q.registrationStatus&&q.registrationTime+1e4<Date.now()}(q)?{fid:q.fid,registrationStatus:0}:q}function ai(q,ne){return vs.apply(this,arguments)}function vs(){return(vs=(0,se.Z)(function*({appConfig:q,heartbeatServiceProvider:ne},he){const je=qn(q,he),gt=ee(q,he),At=ne.getImmediate({optional:!0});if(At){const ci=yield At.getHeartbeatsHeader();ci&&gt.append("x-firebase-client",ci)}const yn={method:"POST",headers:gt,body:JSON.stringify({installation:{sdkVersion:Ge,appId:q.appId}})},Xn=yield pt(()=>fetch(je,yn));if(Xn.ok)return we(yield Xn.json());throw yield nt("Generate Auth Token",Xn)})).apply(this,arguments)}function qn(q,{fid:ne}){return`${Be(q)}/${ne}/authTokens:generate`}function ct(q){return qe.apply(this,arguments)}function qe(){return(qe=(0,se.Z)(function*(q,ne=!1){let he;const je=yield Jr(q.appConfig,At=>{if(!Rn(At))throw ot.create("not-registered");const cn=At.authToken;if(!ne&&zi(cn))return At;if(1===cn.requestStatus)return he=ze(q,ne),At;{if(!navigator.onLine)throw ot.create("app-offline");const yn=Hr(At);return he=Zt(q,yn),yn}});return he?yield he:je.authToken})).apply(this,arguments)}function ze(q,ne){return it.apply(this,arguments)}function it(){return(it=(0,se.Z)(function*(q,ne){let he=yield Ye(q.appConfig);for(;1===he.authToken.requestStatus;)yield rn(100),he=yield Ye(q.appConfig);const je=he.authToken;return 0===je.requestStatus?ct(q,ne):je})).apply(this,arguments)}function Ye(q){return Jr(q,ne=>{if(!Rn(ne))throw ot.create("not-registered");return function _t(q){return 1===q.requestStatus&&q.requestTime+1e4<Date.now()}(ne.authToken)?Object.assign(Object.assign({},ne),{authToken:{requestStatus:0}}):ne})}function Zt(q,ne){return mn.apply(this,arguments)}function mn(){return(mn=(0,se.Z)(function*(q,ne){try{const he=yield ai(q,ne),je=Object.assign(Object.assign({},ne),{authToken:he});return yield Jt(q.appConfig,je),he}catch(he){if(!qt(he)||401!==he.customData.serverCode&&404!==he.customData.serverCode){const je=Object.assign(Object.assign({},ne),{authToken:{requestStatus:0}});yield Jt(q.appConfig,je)}else yield Hi(q.appConfig);throw he}})).apply(this,arguments)}function Rn(q){return void 0!==q&&2===q.registrationStatus}function zi(q){return 2===q.requestStatus&&!function Xi(q){const ne=Date.now();return ne<q.creationTime||q.creationTime+q.expiresIn<ne+36e5}(q)}function Hr(q){const ne={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},q),{authToken:ne})}function tt(){return(tt=(0,se.Z)(function*(q){const ne=q,{installationEntry:he,registrationPromise:je}=yield xr(ne);return je?je.catch(console.error):ct(ne).catch(console.error),he.fid})).apply(this,arguments)}function _n(){return(_n=(0,se.Z)(function*(q,ne=!1){const he=q;return yield $n(he),(yield ct(he,ne)).token})).apply(this,arguments)}function $n(q){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,se.Z)(function*(q){const{registrationPromise:ne}=yield xr(q);ne&&(yield ne)})).apply(this,arguments)}function fr(q){return ot.create("missing-app-config-values",{valueName:q})}const wr="installations",zs=q=>{const ne=q.getProvider("app").getImmediate(),he=function Si(q){if(!q||!q.options)throw fr("App Configuration");if(!q.name)throw fr("App Name");const ne=["projectId","apiKey","appId"];for(const he of ne)if(!q.options[he])throw fr(he);return{appName:q.name,projectId:q.options.projectId,apiKey:q.options.apiKey,appId:q.options.appId}}(ne);return{app:ne,appConfig:he,heartbeatServiceProvider:(0,ge._getProvider)(ne,"heartbeat"),_delete:()=>Promise.resolve()}},Ss=q=>{const ne=q.getProvider("app").getImmediate(),he=(0,ge._getProvider)(ne,wr).getImmediate();return{getId:()=>function We(q){return tt.apply(this,arguments)}(he),getToken:gt=>function zt(q){return _n.apply(this,arguments)}(he,gt)}};(function ya(){(0,ge._registerComponent)(new Ee.wA(wr,zs,"PUBLIC")),(0,ge._registerComponent)(new Ee.wA("installations-internal",Ss,"PRIVATE"))})(),(0,ge.registerVersion)(rt,Re),(0,ge.registerVersion)(rt,Re,"esm2017");const ho="@firebase/remote-config",Gi=new Ke.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Eo{constructor(ne,he,je,gt){this.client=ne,this.storage=he,this.storageCache=je,this.logger=gt}isCachedDataFresh(ne,he){if(!he)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const je=Date.now()-he,gt=je<=ne;return this.logger.debug(`Config fetch cache check. Cache age millis: ${je}. Cache max age millis (minimumFetchIntervalMillis setting): ${ne}. Is cache hit: ${gt}.`),gt}fetch(ne){var he=this;return(0,se.Z)(function*(){const[je,gt]=yield Promise.all([he.storage.getLastSuccessfulFetchTimestampMillis(),he.storage.getLastSuccessfulFetchResponse()]);if(gt&&he.isCachedDataFresh(ne.cacheMaxAgeMillis,je))return gt;ne.eTag=gt&&gt.eTag;const At=yield he.client.fetch(ne),cn=[he.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===At.status&&cn.push(he.storage.setLastSuccessfulFetchResponse(At)),yield Promise.all(cn),At})()}}function va(q=navigator){return q.languages&&q.languages[0]||q.language}class mo{constructor(ne,he,je,gt,At,cn){this.firebaseInstallations=ne,this.sdkVersion=he,this.namespace=je,this.projectId=gt,this.apiKey=At,this.appId=cn}fetch(ne){var he=this;return(0,se.Z)(function*(){var je,gt,At;const[cn,yn]=yield Promise.all([he.firebaseInstallations.getId(),he.firebaseInstallations.getToken()]),ci=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${he.projectId}/namespaces/${he.namespace}:fetch?key=${he.apiKey}`,ki={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":ne.eTag||"*"},Zn={sdk_version:he.sdkVersion,app_instance_id:cn,app_instance_id_token:yn,app_id:he.appId,language_code:va()},as={method:"POST",headers:ki,body:JSON.stringify(Zn)},Js=fetch(ci,as),Xs=new Promise((tl,hc)=>{ne.signal.addEventListener(()=>{const Pc=new Error("The operation was aborted.");Pc.name="AbortError",hc(Pc)})});let Ea;try{yield Promise.race([Js,Xs]),Ea=yield Js}catch(tl){let hc="fetch-client-network";throw"AbortError"===(null===(je=tl)||void 0===je?void 0:je.name)&&(hc="fetch-timeout"),Gi.create(hc,{originalErrorMessage:null===(gt=tl)||void 0===gt?void 0:gt.message})}let El=Ea.status;const el=Ea.headers.get("ETag")||void 0;let La,Tl;if(200===Ea.status){let tl;try{tl=yield Ea.json()}catch(hc){throw Gi.create("fetch-client-parse",{originalErrorMessage:null===(At=hc)||void 0===At?void 0:At.message})}La=tl.entries,Tl=tl.state}if("INSTANCE_STATE_UNSPECIFIED"===Tl?El=500:"NO_CHANGE"===Tl?El=304:("NO_TEMPLATE"===Tl||"EMPTY_CONFIG"===Tl)&&(La={}),304!==El&&200!==El)throw Gi.create("fetch-status",{httpStatus:El});return{status:El,eTag:el,config:La}})()}}class ut{constructor(ne,he){this.client=ne,this.storage=he}fetch(ne){var he=this;return(0,se.Z)(function*(){const je=(yield he.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return he.attemptFetch(ne,je)})()}attemptFetch(ne,{throttleEndTimeMillis:he,backoffCount:je}){var gt=this;return(0,se.Z)(function*(){yield function io(q,ne){return new Promise((he,je)=>{const gt=Math.max(ne-Date.now(),0),At=setTimeout(he,gt);q.addEventListener(()=>{clearTimeout(At),je(Gi.create("fetch-throttle",{throttleEndTimeMillis:ne}))})})}(ne.signal,he);try{const At=yield gt.client.fetch(ne);return yield gt.storage.deleteThrottleMetadata(),At}catch(At){if(!function mt(q){if(!(q instanceof Ke.ZR&&q.customData))return!1;const ne=Number(q.customData.httpStatus);return 429===ne||500===ne||503===ne||504===ne}(At))throw At;const cn={throttleEndTimeMillis:Date.now()+(0,Ke.$s)(je),backoffCount:je+1};return yield gt.storage.setThrottleMetadata(cn),gt.attemptFetch(ne,cn)}})()}}class Yt{constructor(ne,he,je,gt,At){this.app=ne,this._client=he,this._storageCache=je,this._storage=gt,this._logger=At,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function tn(q,ne){var he;const je=q.target.error||void 0;return Gi.create(ne,{originalErrorMessage:je&&(null===(he=je)||void 0===he?void 0:he.message)})}const si="app_namespace_store";class Ks{constructor(ne,he,je,gt=function go(){return new Promise((q,ne)=>{var he;try{const je=indexedDB.open("firebase_remote_config",1);je.onerror=gt=>{ne(tn(gt,"storage-open"))},je.onsuccess=gt=>{q(gt.target.result)},je.onupgradeneeded=gt=>{0===gt.oldVersion&&gt.target.result.createObjectStore(si,{keyPath:"compositeKey"})}}catch(je){ne(Gi.create("storage-open",{originalErrorMessage:null===(he=je)||void 0===he?void 0:he.message}))}})}()){this.appId=ne,this.appName=he,this.namespace=je,this.openDbPromise=gt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(ne){return this.set("last_fetch_status",ne)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(ne){return this.set("last_successful_fetch_timestamp_millis",ne)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(ne){return this.set("last_successful_fetch_response",ne)}getActiveConfig(){return this.get("active_config")}setActiveConfig(ne){return this.set("active_config",ne)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(ne){return this.set("active_config_etag",ne)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(ne){return this.set("throttle_metadata",ne)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(ne){var he=this;return(0,se.Z)(function*(){const je=yield he.openDbPromise;return new Promise((gt,At)=>{var cn;const Xn=je.transaction([si],"readonly").objectStore(si),ci=he.createCompositeKey(ne);try{const ki=Xn.get(ci);ki.onerror=Zn=>{At(tn(Zn,"storage-get"))},ki.onsuccess=Zn=>{const as=Zn.target.result;gt(as?as.value:void 0)}}catch(ki){At(Gi.create("storage-get",{originalErrorMessage:null===(cn=ki)||void 0===cn?void 0:cn.message}))}})})()}set(ne,he){var je=this;return(0,se.Z)(function*(){const gt=yield je.openDbPromise;return new Promise((At,cn)=>{var yn;const ci=gt.transaction([si],"readwrite").objectStore(si),ki=je.createCompositeKey(ne);try{const Zn=ci.put({compositeKey:ki,value:he});Zn.onerror=as=>{cn(tn(as,"storage-set"))},Zn.onsuccess=()=>{At()}}catch(Zn){cn(Gi.create("storage-set",{originalErrorMessage:null===(yn=Zn)||void 0===yn?void 0:yn.message}))}})})()}delete(ne){var he=this;return(0,se.Z)(function*(){const je=yield he.openDbPromise;return new Promise((gt,At)=>{var cn;const Xn=je.transaction([si],"readwrite").objectStore(si),ci=he.createCompositeKey(ne);try{const ki=Xn.delete(ci);ki.onerror=Zn=>{At(tn(Zn,"storage-delete"))},ki.onsuccess=()=>{gt()}}catch(ki){At(Gi.create("storage-delete",{originalErrorMessage:null===(cn=ki)||void 0===cn?void 0:cn.message}))}})})()}createCompositeKey(ne){return[this.appId,this.appName,this.namespace,ne].join()}}class ds{constructor(ne){this.storage=ne}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var ne=this;return(0,se.Z)(function*(){const he=ne.storage.getLastFetchStatus(),je=ne.storage.getLastSuccessfulFetchTimestampMillis(),gt=ne.storage.getActiveConfig(),At=yield he;At&&(ne.lastFetchStatus=At);const cn=yield je;cn&&(ne.lastSuccessfulFetchTimestampMillis=cn);const yn=yield gt;yn&&(ne.activeConfig=yn)})()}setLastFetchStatus(ne){return this.lastFetchStatus=ne,this.storage.setLastFetchStatus(ne)}setLastSuccessfulFetchTimestampMillis(ne){return this.lastSuccessfulFetchTimestampMillis=ne,this.storage.setLastSuccessfulFetchTimestampMillis(ne)}setActiveConfig(ne){return this.activeConfig=ne,this.storage.setActiveConfig(ne)}}function ko(){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,se.Z)(function*(){if(!(0,Ke.hl)())return!1;try{return yield(0,Ke.eu)()}catch{return!1}})).apply(this,arguments)}!function Cr(){(0,ge._registerComponent)(new Ee.wA("remote-config",function q(ne,{instanceIdentifier:he}){const je=ne.getProvider("app").getImmediate(),gt=ne.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Gi.create("registration-window");if(!(0,Ke.hl)())throw Gi.create("indexed-db-unavailable");const{projectId:At,apiKey:cn,appId:yn}=je.options;if(!At)throw Gi.create("registration-project-id");if(!cn)throw Gi.create("registration-api-key");if(!yn)throw Gi.create("registration-app-id");const Xn=new Ks(yn,je.name,he=he||"firebase"),ci=new ds(Xn),ki=new Oe.Yd(ho);ki.logLevel=Oe.in.ERROR;const Zn=new mo(gt,ge.SDK_VERSION,he,At,cn,yn),as=new ut(Zn,Xn),Js=new Eo(as,Xn,ci,ki),Xs=new Yt(je,Js,ci,Xn,ki);return function Rr(q){const ne=(0,Ke.m9)(q);ne._initializePromise||(ne._initializePromise=ne._storageCache.loadFromStorage().then(()=>{ne._isInitializationComplete=!0}))}(Xs),Xs},"PUBLIC").setMultipleInstances(!0)),(0,ge.registerVersion)(ho,"0.3.11"),(0,ge.registerVersion)(ho,"0.3.11","esm2017")}();const Er="/firebase-messaging-sw.js",ro="/firebase-cloud-messaging-push-scope",_o="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xo="google.c.a.c_id",es="google.c.a.c_l",ea="google.c.a.ts",yo="google.c.a.e";var As=(()=>{return(q=As||(As={})).PUSH_RECEIVED="push-received",q.NOTIFICATION_CLICKED="notification-clicked",As;var q})();function vo(q){const ne=new Uint8Array(q);return btoa(String.fromCharCode(...ne)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Or(q){const he=(q+"=".repeat((4-q.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),je=atob(he),gt=new Uint8Array(je.length);for(let At=0;At<je.length;++At)gt[At]=je.charCodeAt(At);return gt}const Po="fcm_token_details_db",hs="fcm_token_object_Store";function Ai(q){return To.apply(this,arguments)}function To(){return To=(0,se.Z)(function*(q){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(At=>At.name).includes(Po))return null;let ne=null;return(yield(0,Me.X3)(Po,5,{upgrade:(je=(0,se.Z)(function*(gt,At,cn,yn){var Xn;if(At<2||!gt.objectStoreNames.contains(hs))return;const ci=yn.objectStore(hs),ki=yield ci.index("fcmSenderId").get(q);if(yield ci.clear(),ki)if(2===At){const Zn=ki;if(!Zn.auth||!Zn.p256dh||!Zn.endpoint)return;ne={token:Zn.fcmToken,createTime:null!==(Xn=Zn.createTime)&&void 0!==Xn?Xn:Date.now(),subscriptionOptions:{auth:Zn.auth,p256dh:Zn.p256dh,endpoint:Zn.endpoint,swScope:Zn.swScope,vapidKey:"string"==typeof Zn.vapidKey?Zn.vapidKey:vo(Zn.vapidKey)}}}else if(3===At){const Zn=ki;ne={token:Zn.fcmToken,createTime:Zn.createTime,subscriptionOptions:{auth:vo(Zn.auth),p256dh:vo(Zn.p256dh),endpoint:Zn.endpoint,swScope:Zn.swScope,vapidKey:vo(Zn.vapidKey)}}}else if(4===At){const Zn=ki;ne={token:Zn.fcmToken,createTime:Zn.createTime,subscriptionOptions:{auth:vo(Zn.auth),p256dh:vo(Zn.p256dh),endpoint:Zn.endpoint,swScope:Zn.swScope,vapidKey:vo(Zn.vapidKey)}}}}),function(At,cn,yn,Xn){return je.apply(this,arguments)})})).close(),yield(0,Me.Lj)(Po),yield(0,Me.Lj)("fcm_vapid_details_db"),yield(0,Me.Lj)("undefined"),Pr(ne)?ne:null;var je}),To.apply(this,arguments)}function Pr(q){if(!q||!q.subscriptionOptions)return!1;const{subscriptionOptions:ne}=q;return"number"==typeof q.createTime&&q.createTime>0&&"string"==typeof q.token&&q.token.length>0&&"string"==typeof ne.auth&&ne.auth.length>0&&"string"==typeof ne.p256dh&&ne.p256dh.length>0&&"string"==typeof ne.endpoint&&ne.endpoint.length>0&&"string"==typeof ne.swScope&&ne.swScope.length>0&&"string"==typeof ne.vapidKey&&ne.vapidKey.length>0}const Io="firebase-messaging-store";let lr=null;function So(){return lr||(lr=(0,Me.X3)("firebase-messaging-database",1,{upgrade:(q,ne)=>{0===ne&&q.createObjectStore(Io)}})),lr}function fs(q){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,se.Z)(function*(q){const ne=qr(q),je=yield(yield So()).transaction(Io).objectStore(Io).get(ne);if(je)return je;{const gt=yield Ai(q.appConfig.senderId);if(gt)return yield Yi(q,gt),gt}})).apply(this,arguments)}function Yi(q,ne){return xa.apply(this,arguments)}function xa(){return(xa=(0,se.Z)(function*(q,ne){const he=qr(q),gt=(yield So()).transaction(Io,"readwrite");return yield gt.objectStore(Io).put(ne,he),yield gt.done,ne})).apply(this,arguments)}function mr(q){return la.apply(this,arguments)}function la(){return(la=(0,se.Z)(function*(q){const ne=qr(q),je=(yield So()).transaction(Io,"readwrite");yield je.objectStore(Io).delete(ne),yield je.done})).apply(this,arguments)}function qr({appConfig:q}){return q.appId}const cr=new Ke.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ti(q,ne){return ol.apply(this,arguments)}function ol(){return(ol=(0,se.Z)(function*(q,ne){var he;const je=yield Fo(q),gt=Xt(ne),At={method:"POST",headers:je,body:JSON.stringify(gt)};let cn;try{cn=yield(yield fetch(No(q.appConfig),At)).json()}catch(yn){throw cr.create("token-subscribe-failed",{errorInfo:null===(he=yn)||void 0===he?void 0:he.toString()})}if(cn.error)throw cr.create("token-subscribe-failed",{errorInfo:cn.error.message});if(!cn.token)throw cr.create("token-subscribe-no-token");return cn.token})).apply(this,arguments)}function lc(q,ne){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,se.Z)(function*(q,ne){var he;const je=yield Fo(q),gt=Xt(ne.subscriptionOptions),At={method:"PATCH",headers:je,body:JSON.stringify(gt)};let cn;try{cn=yield(yield fetch(`${No(q.appConfig)}/${ne.token}`,At)).json()}catch(yn){throw cr.create("token-update-failed",{errorInfo:null===(he=yn)||void 0===he?void 0:he.toString()})}if(cn.error)throw cr.create("token-update-failed",{errorInfo:cn.error.message});if(!cn.token)throw cr.create("token-update-no-token");return cn.token})).apply(this,arguments)}function Yl(q,ne){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,se.Z)(function*(q,ne){var he;const gt={method:"DELETE",headers:yield Fo(q)};try{const cn=yield(yield fetch(`${No(q.appConfig)}/${ne}`,gt)).json();if(cn.error)throw cr.create("token-unsubscribe-failed",{errorInfo:cn.error.message})}catch(At){throw cr.create("token-unsubscribe-failed",{errorInfo:null===(he=At)||void 0===he?void 0:he.toString()})}})).apply(this,arguments)}function No({projectId:q}){return`https://fcmregistrations.googleapis.com/v1/projects/${q}/registrations`}function Fo(q){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,se.Z)(function*({appConfig:q,installations:ne}){const he=yield ne.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":q.apiKey,"x-goog-firebase-installations-auth":`FIS ${he}`})})).apply(this,arguments)}function Xt({p256dh:q,auth:ne,endpoint:he,vapidKey:je}){const gt={web:{endpoint:he,auth:ne,p256dh:q}};return je!==_o&&(gt.web.applicationPubKey=je),gt}const ni=6048e5;function so(q){return bs.apply(this,arguments)}function bs(){return(bs=(0,se.Z)(function*(q){const ne=yield Ln(q.swRegistration,q.vapidKey),he={vapidKey:q.vapidKey,swScope:q.swRegistration.scope,endpoint:ne.endpoint,auth:vo(ne.getKey("auth")),p256dh:vo(ne.getKey("p256dh"))},je=yield fs(q.firebaseDependencies);if(je){if(oo(je.subscriptionOptions,he))return Date.now()>=je.createTime+ni?X(q,{token:je.token,createTime:Date.now(),subscriptionOptions:he}):je.token;try{yield Yl(q.firebaseDependencies,je.token)}catch(gt){console.warn(gt)}return pe(q.firebaseDependencies,he)}return pe(q.firebaseDependencies,he)})).apply(this,arguments)}function Wn(q){return ie.apply(this,arguments)}function ie(){return(ie=(0,se.Z)(function*(q){const ne=yield fs(q.firebaseDependencies);ne&&(yield Yl(q.firebaseDependencies,ne.token),yield mr(q.firebaseDependencies));const he=yield q.swRegistration.pushManager.getSubscription();return!he||he.unsubscribe()})).apply(this,arguments)}function X(q,ne){return W.apply(this,arguments)}function W(){return(W=(0,se.Z)(function*(q,ne){try{const he=yield lc(q.firebaseDependencies,ne),je=Object.assign(Object.assign({},ne),{token:he,createTime:Date.now()});return yield Yi(q.firebaseDependencies,je),he}catch(he){throw yield Wn(q),he}})).apply(this,arguments)}function pe(q,ne){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,se.Z)(function*(q,ne){const je={token:yield Ti(q,ne),createTime:Date.now(),subscriptionOptions:ne};return yield Yi(q,je),je.token})).apply(this,arguments)}function Ln(q,ne){return zr.apply(this,arguments)}function zr(){return(zr=(0,se.Z)(function*(q,ne){return(yield q.pushManager.getSubscription())||q.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Or(ne)})})).apply(this,arguments)}function oo(q,ne){return ne.vapidKey===q.vapidKey&&ne.endpoint===q.endpoint&&ne.auth===q.auth&&ne.p256dh===q.p256dh}function ps(q){const ne={from:q.from,collapseKey:q.collapse_key,messageId:q.fcmMessageId};return function Yr(q,ne){if(!ne.notification)return;q.notification={};const he=ne.notification.title;he&&(q.notification.title=he);const je=ne.notification.body;je&&(q.notification.body=je);const gt=ne.notification.image;gt&&(q.notification.image=gt)}(ne,q),function ws(q,ne){!ne.data||(q.data=ne.data)}(ne,q),function Aa(q,ne){var he,je,gt,At,cn;if(!(ne.fcmOptions||null!==(he=ne.notification)&&void 0!==he&&he.click_action))return;q.fcmOptions={};const yn=null!==(gt=null===(je=ne.fcmOptions)||void 0===je?void 0:je.link)&&void 0!==gt?gt:null===(At=ne.notification)||void 0===At?void 0:At.click_action;yn&&(q.fcmOptions.link=yn);const Xn=null===(cn=ne.fcmOptions)||void 0===cn?void 0:cn.analytics_label;Xn&&(q.fcmOptions.analyticsLabel=Xn)}(ne,q),ne}function xl(q){return"object"==typeof q&&!!q&&Xo in q}function ta(q,ne){const he=[];for(let je=0;je<q.length;je++)he.push(q.charAt(je)),je<ne.length&&he.push(ne.charAt(je));return he.join("")}function wa(q){return cr.create("missing-app-config-values",{valueName:q})}ta("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ta("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ga{constructor(ne,he,je){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const gt=function al(q){if(!q||!q.options)throw wa("App Configuration Object");if(!q.name)throw wa("App Name");const ne=["projectId","apiKey","appId","messagingSenderId"],{options:he}=q;for(const je of ne)if(!he[je])throw wa(je);return{appName:q.name,projectId:he.projectId,apiKey:he.apiKey,appId:he.appId,senderId:he.messagingSenderId}}(ne);this.firebaseDependencies={app:ne,appConfig:gt,installations:he,analyticsProvider:je}}_delete(){return Promise.resolve()}}function $a(q){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,se.Z)(function*(q){var ne;try{q.swRegistration=yield navigator.serviceWorker.register(Er,{scope:ro}),q.swRegistration.update().catch(()=>{})}catch(he){throw cr.create("failed-service-worker-registration",{browserErrorMessage:null===(ne=he)||void 0===ne?void 0:ne.message})}})).apply(this,arguments)}function Ma(q,ne){return na.apply(this,arguments)}function na(){return(na=(0,se.Z)(function*(q,ne){if(!ne&&!q.swRegistration&&(yield $a(q)),ne||!q.swRegistration){if(!(ne instanceof ServiceWorkerRegistration))throw cr.create("invalid-sw-registration");q.swRegistration=ne}})).apply(this,arguments)}function ms(q,ne){return ca.apply(this,arguments)}function ca(){return(ca=(0,se.Z)(function*(q,ne){ne?q.vapidKey=ne:q.vapidKey||(q.vapidKey=_o)})).apply(this,arguments)}function Al(){return(Al=(0,se.Z)(function*(q,ne){if(!navigator)throw cr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw cr.create("permission-blocked");return yield ms(q,ne?.vapidKey),yield Ma(q,ne?.serviceWorkerRegistration),so(q)})).apply(this,arguments)}function Cc(q,ne,he){return ll.apply(this,arguments)}function ll(){return(ll=(0,se.Z)(function*(q,ne,he){const je=Ml(ne);(yield q.firebaseDependencies.analyticsProvider.get()).logEvent(je,{message_id:he[Xo],message_name:he[es],message_time:he[ea],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ml(q){switch(q){case As.NOTIFICATION_CLICKED:return"notification_open";case As.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function le(){return(le=(0,se.Z)(function*(q,ne){const he=ne.data;if(!he.isFirebaseMessaging)return;q.onMessageHandler&&he.messageType===As.PUSH_RECEIVED&&("function"==typeof q.onMessageHandler?q.onMessageHandler(ps(he)):q.onMessageHandler.next(ps(he)));const je=he.data;xl(je)&&"1"===je[yo]&&(yield Cc(q,he.messageType,je))})).apply(this,arguments)}const Y="@firebase/messaging",$e=q=>{const ne=new Ga(q.getProvider("app").getImmediate(),q.getProvider("installations-internal").getImmediate(),q.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",he=>function z(q,ne){return le.apply(this,arguments)}(ne,he)),ne},Rt=q=>{const ne=q.getProvider("messaging").getImmediate();return{getToken:je=>function _l(q,ne){return Al.apply(this,arguments)}(ne,je)}};function Nn(){return $i.apply(this,arguments)}function $i(){return($i=(0,se.Z)(function*(){try{yield(0,Ke.eu)()}catch{return!1}return typeof window<"u"&&(0,Ke.hl)()&&(0,Ke.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function jt(){(0,ge._registerComponent)(new Ee.wA("messaging",$e,"PUBLIC")),(0,ge._registerComponent)(new Ee.wA("messaging-internal",Rt,"PRIVATE")),(0,ge.registerVersion)(Y,"0.9.16"),(0,ge.registerVersion)(Y,"0.9.16","esm2017")}();const kr="analytics",ka="firebase_id",ua="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Oa="https://www.googletagmanager.com/gtag/js",Gr=new Oe.Yd("@firebase/analytics");function Ka(q){return Promise.all(q.map(ne=>ne.catch(he=>he)))}function Wa(q,ne){const he=document.createElement("script");he.src=`${Oa}?l=${q}&id=${ne}`,he.async=!0,document.head.appendChild(he)}function Ec(q,ne,he,je,gt,At){return Za.apply(this,arguments)}function Za(){return(Za=(0,se.Z)(function*(q,ne,he,je,gt,At){const cn=je[gt];try{if(cn)yield ne[cn];else{const Xn=(yield Ka(he)).find(ci=>ci.measurementId===gt);Xn&&(yield ne[Xn.appId])}}catch(yn){Gr.error(yn)}q("config",gt,At)})).apply(this,arguments)}function qa(q,ne,he,je,gt){return ia.apply(this,arguments)}function ia(){return(ia=(0,se.Z)(function*(q,ne,he,je,gt){try{let At=[];if(gt&&gt.send_to){let cn=gt.send_to;Array.isArray(cn)||(cn=[cn]);const yn=yield Ka(he);for(const Xn of cn){const ci=yn.find(Zn=>Zn.measurementId===Xn),ki=ci&&ne[ci.appId];if(!ki){At=[];break}At.push(ki)}}0===At.length&&(At=Object.values(ne)),yield Promise.all(At),q("event",je,gt||{})}catch(At){Gr.error(At)}})).apply(this,arguments)}function Ql(){const q=window.document.getElementsByTagName("script");for(const ne of Object.values(q))if(ne.src&&ne.src.includes(Oa))return ne;return null}const Nr=new Ke.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ra=new class $r{constructor(ne={},he=1e3){this.throttleMetadata=ne,this.intervalMillis=he}getThrottleMetadata(ne){return this.throttleMetadata[ne]}setThrottleMetadata(ne,he){this.throttleMetadata[ne]=he}deleteThrottleMetadata(ne){delete this.throttleMetadata[ne]}};function Rl(q){return new Headers({Accept:"application/json","x-goog-api-key":q})}function cc(q){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,se.Z)(function*(q){var ne;const{appId:he,apiKey:je}=q,gt={method:"GET",headers:Rl(je)},At=ua.replace("{app-id}",he),cn=yield fetch(At,gt);if(200!==cn.status&&304!==cn.status){let yn="";try{const Xn=yield cn.json();null!==(ne=Xn.error)&&void 0!==ne&&ne.message&&(yn=Xn.error.message)}catch{}throw Nr.create("config-fetch-failed",{httpStatus:cn.status,responseMessage:yn})}return cn.json()})).apply(this,arguments)}function bl(q){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,se.Z)(function*(q,ne=ra,he){const{appId:je,apiKey:gt,measurementId:At}=q.options;if(!je)throw Nr.create("no-app-id");if(!gt){if(At)return{measurementId:At,appId:je};throw Nr.create("no-api-key")}const cn=ne.getThrottleMetadata(je)||{backoffCount:0,throttleEndTimeMillis:Date.now()},yn=new ha;return setTimeout((0,se.Z)(function*(){yn.abort()}),void 0!==he?he:6e4),jl({appId:je,apiKey:gt,measurementId:At},cn,yn,ne)})).apply(this,arguments)}function jl(q,ne,he){return ur.apply(this,arguments)}function ur(){return(ur=(0,se.Z)(function*(q,{throttleEndTimeMillis:ne,backoffCount:he},je,gt=ra){var At,cn;const{appId:yn,measurementId:Xn}=q;try{yield wl(je,ne)}catch(ci){if(Xn)return Gr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xn} provided in the "measurementId" field in the local Firebase config. [${null===(At=ci)||void 0===At?void 0:At.message}]`),{appId:yn,measurementId:Xn};throw ci}try{const ci=yield cc(q);return gt.deleteThrottleMetadata(yn),ci}catch(ci){const ki=ci;if(!Ho(ki)){if(gt.deleteThrottleMetadata(yn),Xn)return Gr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xn} provided in the "measurementId" field in the local Firebase config. [${ki?.message}]`),{appId:yn,measurementId:Xn};throw ci}const Zn=503===Number(null===(cn=ki?.customData)||void 0===cn?void 0:cn.httpStatus)?(0,Ke.$s)(he,gt.intervalMillis,30):(0,Ke.$s)(he,gt.intervalMillis),as={throttleEndTimeMillis:Date.now()+Zn,backoffCount:he+1};return gt.setThrottleMetadata(yn,as),Gr.debug(`Calling attemptFetch again in ${Zn} millis`),jl(q,as,je,gt)}})).apply(this,arguments)}function wl(q,ne){return new Promise((he,je)=>{const gt=Math.max(ne-Date.now(),0),At=setTimeout(he,gt);q.addEventListener(()=>{clearTimeout(At),je(Nr.create("fetch-throttle",{throttleEndTimeMillis:ne}))})})}function Ho(q){if(!(q instanceof Ke.ZR&&q.customData))return!1;const ne=Number(q.customData.httpStatus);return 429===ne||500===ne||503===ne||504===ne}class ha{constructor(){this.listeners=[]}addEventListener(ne){this.listeners.push(ne)}abort(){this.listeners.forEach(ne=>ne())}}let cl,Ls;function Fr(){return(Fr=(0,se.Z)(function*(q,ne,he,je,gt){if(gt&&gt.global)q("event",he,je);else{const At=yield ne;q("event",he,Object.assign(Object.assign({},je),{send_to:At}))}})).apply(this,arguments)}function kl(q){Ls=q}function Tc(q){cl=q}function Ic(){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,se.Z)(function*(){var q;if(!(0,Ke.hl)())return Gr.warn(Nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ke.eu)()}catch(ne){return Gr.warn(Nr.create("indexeddb-unavailable",{errorInfo:null===(q=ne)||void 0===q?void 0:q.toString()}).message),!1}return!0})).apply(this,arguments)}function dl(){return(dl=(0,se.Z)(function*(q,ne,he,je,gt,At,cn){var yn;const Xn=bl(q);Xn.then(Js=>{he[Js.measurementId]=Js.appId,q.options.measurementId&&Js.measurementId!==q.options.measurementId&&Gr.warn(`The measurement ID in the local Firebase config (${q.options.measurementId}) does not match the measurement ID fetched from the server (${Js.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Js=>Gr.error(Js)),ne.push(Xn);const ci=Ic().then(Js=>{if(Js)return je.getId()}),[ki,Zn]=yield Promise.all([Xn,ci]);Ql()||Wa(At,ki.measurementId),Ls&&(gt("consent","default",Ls),kl(void 0)),gt("js",new Date);const as=null!==(yn=cn?.config)&&void 0!==yn?yn:{};return as.origin="firebase",as.update=!0,null!=Zn&&(as[ka]=Zn),gt("config",ki.measurementId,as),cl&&(gt("set",cl),Tc(void 0)),ki.measurementId})).apply(this,arguments)}class fa{constructor(ne){this.app=ne}_delete(){return delete Ms[this.app.options.appId],Promise.resolve()}}let Ms={},Pa=[];const Qa={};let Lo,pa,jo="dataLayer",Qr=!1;function gr(q,ne,he){!function tc(){const q=[];if((0,Ke.ru)()&&q.push("This is a browser extension environment."),(0,Ke.zI)()||q.push("Cookies are not available."),q.length>0){const ne=q.map((je,gt)=>`(${gt+1}) ${je}`).join(" "),he=Nr.create("invalid-analytics-context",{errorInfo:ne});Gr.warn(he.message)}}();const je=q.options.appId;if(!je)throw Nr.create("no-app-id");if(!q.options.apiKey){if(!q.options.measurementId)throw Nr.create("no-api-key");Gr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${q.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ms[je])throw Nr.create("already-exists",{id:je});if(!Qr){!function da(q){let ne=[];Array.isArray(window[q])?ne=window[q]:window[q]=ne}(jo);const{wrappedGtag:At,gtagCore:cn}=function Ys(q,ne,he,je,gt){let At=function(...cn){window[je].push(arguments)};return window[gt]&&"function"==typeof window[gt]&&(At=window[gt]),window[gt]=function vl(q,ne,he,je){function At(){return(At=(0,se.Z)(function*(cn,yn,Xn){try{"event"===cn?yield qa(q,ne,he,yn,Xn):"config"===cn?yield Ec(q,ne,he,je,yn,Xn):"consent"===cn?q("consent","update",Xn):q("set",yn)}catch(ci){Gr.error(ci)}})).apply(this,arguments)}return function gt(cn,yn,Xn){return At.apply(this,arguments)}}(At,q,ne,he),{gtagCore:At,wrappedGtag:window[gt]}}(Ms,Pa,Qa,jo,"gtag");pa=At,Lo=cn,Qr=!0}return Ms[je]=function ec(q,ne,he,je,gt,At,cn){return dl.apply(this,arguments)}(q,Pa,Qa,ne,Lo,jo,he),new fa(q)}function bn(){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,se.Z)(function*(){if((0,Ke.ru)()||!(0,Ke.zI)()||!(0,Ke.hl)())return!1;try{return yield(0,Ke.eu)()}catch{return!1}})).apply(this,arguments)}const Ol="@firebase/analytics";!function wo(){(0,ge._registerComponent)(new Ee.wA(kr,(ne,{options:he})=>gr(ne.getProvider("app").getImmediate(),ne.getProvider("installations-internal").getImmediate(),he),"PUBLIC")),(0,ge._registerComponent)(new Ee.wA("analytics-internal",function q(ne){try{const he=ne.getProvider(kr).getImmediate();return{logEvent:(je,gt,At)=>function hl(q,ne,he,je){q=(0,Ke.m9)(q),function pn(q,ne,he,je,gt){return Fr.apply(this,arguments)}(pa,Ms[q.app.options.appId],ne,he,je).catch(gt=>Gr.error(gt))}(he,je,gt,At)}}catch(he){throw Nr.create("interop-component-reg-failed",{reason:he})}},"PRIVATE")),(0,ge.registerVersion)(Ol,"0.8.0"),(0,ge.registerVersion)(Ol,"0.8.0","esm2017")}();var Ja=Q(4408),xo=Q(7565);const D=new class fl extends xo.v{}(class Gl extends Ja.o{constructor(ne,he){super(ne,he),this.scheduler=ne,this.work=he}schedule(ne,he=0){return he>0?super.schedule(ne,he):(this.delay=he,this.state=ne,this.scheduler.flush(this),this)}execute(ne,he){return he>0||this.closed?super.execute(ne,he):this._execute(ne,he)}requestAsyncId(ne,he,je=0){return null!=je&&je>0||null==je&&this.delay>0?super.requestAsyncId(ne,he,je):ne.flush(this)}});var R=Q(4986),H=Q(8505),te=Q(5363),me=Q(9468);const Pe=new g.GfV("7.4.1"),Ze="__angularfire_symbol__analyticsIsSupportedValue",Bt="__angularfire_symbol__analyticsIsSupported",Tn="__angularfire_symbol__remoteConfigIsSupportedValue",Vi="__angularfire_symbol__remoteConfigIsSupported",jn="__angularfire_symbol__messagingIsSupportedValue",Bi="__angularfire_symbol__messagingIsSupported";function Go(q,ne,he){if(ne){if(1===ne.length)return ne[0];const At=ne.filter(cn=>cn.app===he);if(1===At.length)return At[0]}return he.container.getProvider(q).getImmediate({optional:!0})}globalThis[Bt]||(globalThis[Bt]=bn().then(q=>globalThis[Ze]=q).catch(()=>globalThis[Ze]=!1)),globalThis[Bi]||(globalThis[Bi]=Nn().then(q=>globalThis[jn]=q).catch(()=>globalThis[jn]=!1)),globalThis[Vi]||(globalThis[Vi]=ko().then(q=>globalThis[Tn]=q).catch(()=>globalThis[Tn]=!1));const Br=(q,ne)=>{const he=ne?[ne]:(0,i.C6)(),je=[];return he.forEach(gt=>{gt.container.getProvider(q).instances.forEach(cn=>{je.includes(cn)||je.push(cn)})}),je};function qi(){}class nc{constructor(ne,he=D){this.zone=ne,this.delegate=he}now(){return this.delegate.now()}schedule(ne,he,je){const gt=this.zone;return this.delegate.schedule(function(cn){gt.runGuarded(()=>{ne.apply(this,[cn])})},he,je)}}class dc{constructor(ne){this.zone=ne,this.task=null}call(ne,he){const je=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qi,{},qi,qi)),he.pipe((0,H.b)({next:je,complete:je,error:je})).subscribe(ne).add(je)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $o=(()=>{class q{constructor(he){this.ngZone=he,this.outsideAngular=he.runOutsideAngular(()=>new nc(Zone.current)),this.insideAngular=he.run(()=>new nc(Zone.current,R.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return q.\u0275fac=function(he){return new(he||q)(g.LFG(g.R0b))},q.\u0275prov=g.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})();function $l(){const q=globalThis.\u0275AngularFireScheduler;if(!q)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return q}function ma(q){return q.pipe((0,te.Q)($l().outsideAngular))}function Fa(q){return $l(),function Sc(q){return function(he){return(he=he.lift(new dc(q.ngZone))).pipe((0,me.R)(q.outsideAngular),(0,te.Q)(q.insideAngular))}}($l())(q)}},6457:(Sn,Ct,Q)=>{Q.d(Ct,{$:()=>No,A:()=>Se,B:()=>dt,G:()=>Ss,H:()=>Ds,J:()=>ut,L:()=>zi,M:()=>Oo,N:()=>sl,P:()=>R,Q:()=>Xo,R:()=>uc,T:()=>es,U:()=>_o,V:()=>As,W:()=>vo,X:()=>Ai,Y:()=>ba,Z:()=>Ti,_:()=>lc,a:()=>Ya,a0:()=>so,a1:()=>Wn,a2:()=>X,a3:()=>pe,a4:()=>Ln,a5:()=>oo,a6:()=>Yr,a7:()=>ws,a8:()=>xl,a9:()=>ta,aA:()=>Js,aB:()=>Xn,aC:()=>ma,aD:()=>yc,aE:()=>In,aI:()=>Rl,aL:()=>yo,aa:()=>$a,ab:()=>Ma,ac:()=>ms,af:()=>Cc,ag:()=>Ml,ah:()=>z,ak:()=>Io,al:()=>nr,an:()=>Oa,ao:()=>Za,ap:()=>De,aq:()=>pt,ar:()=>Ve,as:()=>$n,at:()=>qt,au:()=>Co,av:()=>el,aw:()=>Be,ax:()=>xe,ay:()=>st,az:()=>Xi,b:()=>Nr,c:()=>jn,d:()=>Xa,e:()=>os,f:()=>Sc,g:()=>je,h:()=>q,i:()=>Xl,j:()=>cn,k:()=>tu,l:()=>Lr,m:()=>Vl,o:()=>Me,r:()=>Ja,s:()=>zl,u:()=>D});var g=Q(5861),i=Q(2090),se=Q(9681),ge=Q(655),Ke=Q(1877),Ee=Q(4859);const Me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Se={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const dt=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},wt=function kt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Wt=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bt=new Ke.Yd("@firebase/auth");function ot(F,...E){bt.logLevel<=Ke.in.ERROR&&bt.error(`Auth (${se.SDK_VERSION}): ${F}`,...E)}function qt(F,...E){throw Xe(F,...E)}function Be(F,...E){return Xe(F,...E)}function we(F,E,I){const U=Object.assign(Object.assign({},wt()),{[E]:I});return new i.LL("auth","Firebase",U).create(E,{appName:F.name})}function nt(F,E,I){if(!(E instanceof I))throw I.name!==E.constructor.name&&qt(F,"argument-error"),we(F,"argument-error",`Type of ${E.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(F,...E){if("string"!=typeof F){const I=E[0],U=[...E.slice(1)];return U[0]&&(U[0].appName=F.name),F._errorFactory.create(I,...U)}return Wt.create(F,...E)}function xe(F,E,...I){if(!F)throw Xe(E,...I)}function ee(F){const E="INTERNAL ASSERTION FAILED: "+F;throw ot(E),new Error(E)}function pt(F,E){F||ee(E)}const Ue=new Map;function st(F){pt(F instanceof Function,"Expected a class definition");let E=Ue.get(F);return E?(pt(E instanceof F,"Instance stored in cache mismatched with class"),E):(E=new F,Ue.set(F,E),E)}function Qt(){var F;return typeof self<"u"&&(null===(F=self.location)||void 0===F?void 0:F.href)||""}function rn(){return"http:"===gn()||"https:"===gn()}function gn(){var F;return typeof self<"u"&&(null===(F=self.location)||void 0===F?void 0:F.protocol)||null}class Gt{constructor(E,I){this.shortDelay=E,this.longDelay=I,pt(I>E,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return function kn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(rn()||(0,i.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function di(F,E){pt(F.emulator,"Emulator should always be set here");const{url:I}=F.emulator;return E?`${I}${E.startsWith("/")?E.slice(1):E}`:I}class Un{static initialize(E,I,U){this.fetchImpl=E,I&&(this.headersImpl=I),U&&(this.responseImpl=U)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ut=new Gt(3e4,6e4);function He(F,E){return F.tenantId&&!E.tenantId?Object.assign(Object.assign({},E),{tenantId:F.tenantId}):E}function vt(F,E,I,U){return un.apply(this,arguments)}function un(){return(un=(0,g.Z)(function*(F,E,I,U,de={}){return Hn(F,de,(0,g.Z)(function*(){let Ae={},St={};U&&("GET"===E?St=U:Ae={body:JSON.stringify(U)});const on=(0,i.xO)(Object.assign({key:F.config.apiKey},St)).slice(1),On=yield F._getAdditionalHeaders();return On["Content-Type"]="application/json",F.languageCode&&(On["X-Firebase-Locale"]=F.languageCode),Un.fetch()(Zi(F,F.config.apiHost,I,on),Object.assign({method:E,headers:On,referrerPolicy:"no-referrer"},Ae))}))})).apply(this,arguments)}function Hn(F,E,I){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(F,E,I){F._canInitEmulator=!1;const U=Object.assign(Object.assign({},xt),E);try{const de=new oi(F),Ae=yield Promise.race([I(),de.promise]);de.clearNetworkTimeout();const St=yield Ae.json();if("needConfirmation"in St)throw Ki(F,"account-exists-with-different-credential",St);if(Ae.ok&&!("errorMessage"in St))return St;{const on=Ae.ok?St.errorMessage:St.error.message,[On,pi]=on.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===On)throw Ki(F,"credential-already-in-use",St);if("EMAIL_EXISTS"===On)throw Ki(F,"email-already-in-use",St);if("USER_DISABLED"===On)throw Ki(F,"user-disabled",St);const _r=U[On]||On.toLowerCase().replace(/[_\s]+/g,"-");if(pi)throw we(F,_r,pi);qt(F,_r)}}catch(de){if(de instanceof i.ZR)throw de;qt(F,"network-request-failed")}})).apply(this,arguments)}function Ci(F,E,I,U){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,g.Z)(function*(F,E,I,U,de={}){const Ae=yield vt(F,E,I,U,de);return"mfaPendingCredential"in Ae&&qt(F,"multi-factor-auth-required",{_serverResponse:Ae}),Ae})).apply(this,arguments)}function Zi(F,E,I,U){const de=`${E}${I}?${U}`;return F.config.emulator?di(F.config,de):`${F.config.apiScheme}://${de}`}class oi{constructor(E){this.auth=E,this.timer=null,this.promise=new Promise((I,U)=>{this.timer=setTimeout(()=>U(Be(this.auth,"network-request-failed")),Ut.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ki(F,E,I){const U={appName:F.name};I.email&&(U.email=I.email),I.phoneNumber&&(U.phoneNumber=I.phoneNumber);const de=Be(F,E,U);return de.customData._tokenResponse=I,de}function yi(){return(yi=(0,g.Z)(function*(F,E){return vt(F,"POST","/v1/accounts:delete",E)})).apply(this,arguments)}function Jt(F,E){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,g.Z)(function*(F,E){return vt(F,"POST","/v1/accounts:update",E)})).apply(this,arguments)}function Hi(F,E){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,g.Z)(function*(F,E){return vt(F,"POST","/v1/accounts:lookup",E)})).apply(this,arguments)}function Jr(F){if(F)try{const E=new Date(Number(F));if(!isNaN(E.getTime()))return E.toUTCString()}catch{}}function br(){return(br=(0,g.Z)(function*(F,E=!1){const I=(0,i.m9)(F),U=yield I.getIdToken(E),de=Kn(U);xe(de&&de.exp&&de.auth_time&&de.iat,I.auth,"internal-error");const Ae="object"==typeof de.firebase?de.firebase:void 0,St=Ae?.sign_in_provider;return{claims:de,token:U,authTime:Jr(Ji(de.auth_time)),issuedAtTime:Jr(Ji(de.iat)),expirationTime:Jr(Ji(de.exp)),signInProvider:St||null,signInSecondFactor:Ae?.sign_in_second_factor||null}})).apply(this,arguments)}function Ji(F){return 1e3*Number(F)}function Kn(F){var E;const[I,U,de]=F.split(".");if(void 0===I||void 0===U||void 0===de)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const Ae=(0,i.tV)(U);return Ae?JSON.parse(Ae):(ot("Failed to decode base64 JWT payload"),null)}catch(Ae){return ot("Caught error parsing JWT payload as JSON",null===(E=Ae)||void 0===E?void 0:E.toString()),null}}function fi(F,E){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(F,E,I=!1){if(I)return E;try{return yield E}catch(U){throw U instanceof i.ZR&&Mn(U)&&F.auth.currentUser===F&&(yield F.auth.signOut()),U}})).apply(this,arguments)}function Mn({code:F}){return"auth/user-disabled"===F||"auth/user-token-expired"===F}class ji{constructor(E){this.user=E,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(E){var I;if(E){const U=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),U}{this.errorBackoff=3e4;const de=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,de)}}schedule(E=!1){var I=this;if(!this.isRunning)return;const U=this.getInterval(E);this.timerId=setTimeout((0,g.Z)(function*(){yield I.iteration()}),U)}iteration(){var E=this;return(0,g.Z)(function*(){var I;try{yield E.user.getIdToken(!0)}catch(U){return void("auth/network-request-failed"===(null===(I=U)||void 0===I?void 0:I.code)&&E.schedule(!0))}E.schedule()})()}}class ri{constructor(E,I){this.createdAt=E,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jr(this.lastLoginAt),this.creationTime=Jr(this.createdAt)}_copy(E){this.createdAt=E.createdAt,this.lastLoginAt=E.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function or(F){return ai.apply(this,arguments)}function ai(){return(ai=(0,g.Z)(function*(F){var E;const I=F.auth,U=yield F.getIdToken(),de=yield fi(F,Hi(I,{idToken:U}));xe(de?.users.length,I,"internal-error");const Ae=de.users[0];F._notifyReloadListener(Ae);const St=null!==(E=Ae.providerUserInfo)&&void 0!==E&&E.length?qe(Ae.providerUserInfo):[],on=ct(F.providerData,St),_r=!!F.isAnonymous&&!(F.email&&Ae.passwordHash||on?.length),Ts={uid:Ae.localId,displayName:Ae.displayName||null,photoURL:Ae.photoUrl||null,email:Ae.email||null,emailVerified:Ae.emailVerified||!1,phoneNumber:Ae.phoneNumber||null,tenantId:Ae.tenantId||null,providerData:on,metadata:new ri(Ae.createdAt,Ae.lastLoginAt),isAnonymous:_r};Object.assign(F,Ts)})).apply(this,arguments)}function qn(){return(qn=(0,g.Z)(function*(F){const E=(0,i.m9)(F);yield or(E),yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)})).apply(this,arguments)}function ct(F,E){return[...F.filter(U=>!E.some(de=>de.providerId===U.providerId)),...E]}function qe(F){return F.map(E=>{var{providerId:I}=E,U=(0,ge._T)(E,["providerId"]);return{providerId:I,uid:U.rawId||"",displayName:U.displayName||null,email:U.email||null,phoneNumber:U.phoneNumber||null,photoURL:U.photoUrl||null}})}function it(){return(it=(0,g.Z)(function*(F,E){const I=yield Hn(F,{},(0,g.Z)(function*(){const U=(0,i.xO)({grant_type:"refresh_token",refresh_token:E}).slice(1),{tokenApiHost:de,apiKey:Ae}=F.config,St=Zi(F,de,"/v1/token",`key=${Ae}`),on=yield F._getAdditionalHeaders();return on["Content-Type"]="application/x-www-form-urlencoded",Un.fetch()(St,{method:"POST",headers:on,body:U})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class Ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(E){xe(E.idToken,"internal-error"),xe(typeof E.idToken<"u","internal-error"),xe(typeof E.refreshToken<"u","internal-error");const I="expiresIn"in E&&typeof E.expiresIn<"u"?Number(E.expiresIn):function Gn(F){const E=Kn(F);return xe(E,"internal-error"),xe(typeof E.exp<"u","internal-error"),xe(typeof E.iat<"u","internal-error"),Number(E.exp)-Number(E.iat)}(E.idToken);this.updateTokensAndExpiration(E.idToken,E.refreshToken,I)}getToken(E,I=!1){var U=this;return(0,g.Z)(function*(){return xe(!U.accessToken||U.refreshToken,E,"user-token-expired"),I||!U.accessToken||U.isExpired?U.refreshToken?(yield U.refresh(E,U.refreshToken),U.accessToken):null:U.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(E,I){var U=this;return(0,g.Z)(function*(){const{accessToken:de,refreshToken:Ae,expiresIn:St}=yield function ze(F,E){return it.apply(this,arguments)}(E,I);U.updateTokensAndExpiration(de,Ae,Number(St))})()}updateTokensAndExpiration(E,I,U){this.refreshToken=I||null,this.accessToken=E||null,this.expirationTime=Date.now()+1e3*U}static fromJSON(E,I){const{refreshToken:U,accessToken:de,expirationTime:Ae}=I,St=new Ye;return U&&(xe("string"==typeof U,"internal-error",{appName:E}),St.refreshToken=U),de&&(xe("string"==typeof de,"internal-error",{appName:E}),St.accessToken=de),Ae&&(xe("number"==typeof Ae,"internal-error",{appName:E}),St.expirationTime=Ae),St}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(E){this.accessToken=E.accessToken,this.refreshToken=E.refreshToken,this.expirationTime=E.expirationTime}_clone(){return Object.assign(new Ye,this.toJSON())}_performRefresh(){return ee("not implemented")}}function Zt(F,E){xe("string"==typeof F||typeof F>"u","internal-error",{appName:E})}class mn{constructor(E){var{uid:I,auth:U,stsTokenManager:de}=E,Ae=(0,ge._T)(E,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ji(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=U,this.stsTokenManager=de,this.accessToken=de.accessToken,this.displayName=Ae.displayName||null,this.email=Ae.email||null,this.emailVerified=Ae.emailVerified||!1,this.phoneNumber=Ae.phoneNumber||null,this.photoURL=Ae.photoURL||null,this.isAnonymous=Ae.isAnonymous||!1,this.tenantId=Ae.tenantId||null,this.providerData=Ae.providerData?[...Ae.providerData]:[],this.metadata=new ri(Ae.createdAt||void 0,Ae.lastLoginAt||void 0)}getIdToken(E){var I=this;return(0,g.Z)(function*(){const U=yield fi(I,I.stsTokenManager.getToken(I.auth,E));return xe(U,I.auth,"internal-error"),I.accessToken!==U&&(I.accessToken=U,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),U})()}getIdTokenResult(E){return function xr(F){return br.apply(this,arguments)}(this,E)}reload(){return function vs(F){return qn.apply(this,arguments)}(this)}_assign(E){this!==E&&(xe(this.uid===E.uid,this.auth,"internal-error"),this.displayName=E.displayName,this.photoURL=E.photoURL,this.email=E.email,this.emailVerified=E.emailVerified,this.phoneNumber=E.phoneNumber,this.isAnonymous=E.isAnonymous,this.tenantId=E.tenantId,this.providerData=E.providerData.map(I=>Object.assign({},I)),this.metadata._copy(E.metadata),this.stsTokenManager._assign(E.stsTokenManager))}_clone(E){return new mn(Object.assign(Object.assign({},this),{auth:E,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(E){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=E,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(E){this.reloadListener?this.reloadListener(E):this.reloadUserInfo=E}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(E,I=!1){var U=this;return(0,g.Z)(function*(){let de=!1;E.idToken&&E.idToken!==U.stsTokenManager.accessToken&&(U.stsTokenManager.updateFromServerResponse(E),de=!0),I&&(yield or(U)),yield U.auth._persistUserIfCurrent(U),de&&U.auth._notifyListenersIfCurrent(U)})()}delete(){var E=this;return(0,g.Z)(function*(){const I=yield E.getIdToken();return yield fi(E,function Ui(F,E){return yi.apply(this,arguments)}(E.auth,{idToken:I})),E.stsTokenManager.clearRefreshToken(),E.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(E=>Object.assign({},E)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(E,I){var U,de,Ae,St,on,On,pi,_r;const Ts=null!==(U=I.displayName)&&void 0!==U?U:void 0,Bl=null!==(de=I.email)&&void 0!==de?de:void 0,Nc=null!==(Ae=I.phoneNumber)&&void 0!==Ae?Ae:void 0,vc=null!==(St=I.photoURL)&&void 0!==St?St:void 0,Zc=null!==(on=I.tenantId)&&void 0!==on?on:void 0,pc=null!==(On=I._redirectEventId)&&void 0!==On?On:void 0,nu=null!==(pi=I.createdAt)&&void 0!==pi?pi:void 0,rc=null!==(_r=I.lastLoginAt)&&void 0!==_r?_r:void 0,{uid:Eu,emailVerified:iu,isAnonymous:Tu,providerData:ru,stsTokenManager:qc}=I;xe(Eu&&qc,E,"internal-error");const Zu=Ye.fromJSON(this.name,qc);xe("string"==typeof Eu,E,"internal-error"),Zt(Ts,E.name),Zt(Bl,E.name),xe("boolean"==typeof iu,E,"internal-error"),xe("boolean"==typeof Tu,E,"internal-error"),Zt(Nc,E.name),Zt(vc,E.name),Zt(Zc,E.name),Zt(pc,E.name),Zt(nu,E.name),Zt(rc,E.name);const Fc=new mn({uid:Eu,auth:E,email:Bl,emailVerified:iu,displayName:Ts,isAnonymous:Tu,photoURL:vc,phoneNumber:Nc,tenantId:Zc,stsTokenManager:Zu,createdAt:nu,lastLoginAt:rc});return ru&&Array.isArray(ru)&&(Fc.providerData=ru.map(cs=>Object.assign({},cs))),pc&&(Fc._redirectEventId=pc),Fc}static _fromIdTokenResponse(E,I,U=!1){return(0,g.Z)(function*(){const de=new Ye;de.updateFromServerResponse(I);const Ae=new mn({uid:I.localId,auth:E,stsTokenManager:de,isAnonymous:U});return yield or(Ae),Ae})()}}const zi=(()=>{class F{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(I,U){var de=this;return(0,g.Z)(function*(){de.storage[I]=U})()}_get(I){var U=this;return(0,g.Z)(function*(){const de=U.storage[I];return void 0===de?null:de})()}_remove(I){var U=this;return(0,g.Z)(function*(){delete U.storage[I]})()}_addListener(I,U){}_removeListener(I,U){}}return F.type="NONE",F})();function Xi(F,E,I){return`firebase:${F}:${E}:${I}`}class Hr{constructor(E,I,U){this.persistence=E,this.auth=I,this.userKey=U;const{config:de,name:Ae}=this.auth;this.fullUserKey=Xi(this.userKey,de.apiKey,Ae),this.fullPersistenceKey=Xi("persistence",de.apiKey,Ae),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(E){return this.persistence._set(this.fullUserKey,E.toJSON())}getCurrentUser(){var E=this;return(0,g.Z)(function*(){const I=yield E.persistence._get(E.fullUserKey);return I?mn._fromJSON(E.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(E){var I=this;return(0,g.Z)(function*(){if(I.persistence===E)return;const U=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=E,U?I.setCurrentUser(U):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(E,I,U="authUser"){return(0,g.Z)(function*(){if(!I.length)return new Hr(st(zi),E,U);const de=(yield Promise.all(I.map(function(){var pi=(0,g.Z)(function*(_r){if(yield _r._isAvailable())return _r});return function(_r){return pi.apply(this,arguments)}}()))).filter(pi=>pi);let Ae=de[0]||st(zi);const St=Xi(U,E.config.apiKey,E.name);let on=null;for(const pi of I)try{const _r=yield pi._get(St);if(_r){const Ts=mn._fromJSON(E,_r);pi!==Ae&&(on=Ts),Ae=pi;break}}catch{}const On=de.filter(pi=>pi._shouldAllowMigration);return Ae._shouldAllowMigration&&On.length?(Ae=On[0],on&&(yield Ae._set(St,on.toJSON())),yield Promise.all(I.map(function(){var pi=(0,g.Z)(function*(_r){if(_r!==Ae)try{yield _r._remove(St)}catch{}});return function(_r){return pi.apply(this,arguments)}}())),new Hr(Ae,E,U)):new Hr(Ae,E,U)})()}}function _t(F){const E=F.toLowerCase();if(E.includes("opera/")||E.includes("opr/")||E.includes("opios/"))return"Opera";if(_n(E))return"IEMobile";if(E.includes("msie")||E.includes("trident/"))return"IE";if(E.includes("edge/"))return"Edge";if(We(E))return"Firefox";if(E.includes("silk/"))return"Silk";if(Yn(E))return"Blackberry";if(Ne(E))return"Webos";if(tt(E))return"Safari";if((E.includes("chrome/")||zt(E))&&!E.includes("edge/"))return"Chrome";if($n(E))return"Android";{const U=F.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===U?.length)return U[1]}return"Other"}function We(F=(0,i.z$)()){return/firefox\//i.test(F)}function tt(F=(0,i.z$)()){const E=F.toLowerCase();return E.includes("safari/")&&!E.includes("chrome/")&&!E.includes("crios/")&&!E.includes("android")}function zt(F=(0,i.z$)()){return/crios\//i.test(F)}function _n(F=(0,i.z$)()){return/iemobile/i.test(F)}function $n(F=(0,i.z$)()){return/android/i.test(F)}function Yn(F=(0,i.z$)()){return/blackberry/i.test(F)}function Ne(F=(0,i.z$)()){return/webos/i.test(F)}function Ve(F=(0,i.z$)()){return/iphone|ipad|ipod/i.test(F)||/macintosh/i.test(F)&&/mobile/i.test(F)}function De(F=(0,i.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(F)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(F)}function En(F=(0,i.z$)()){return Ve(F)||$n(F)||Ne(F)||Yn(F)||/windows phone/i.test(F)||_n(F)}function Si(F,E=[]){let I;switch(F){case"Browser":I=_t((0,i.z$)());break;case"Worker":I=`${_t((0,i.z$)())}-${F}`;break;default:I=F}const U=E.length?E.join(","):"FirebaseCore-web";return`${I}/JsCore/${se.SDK_VERSION}/${U}`}class fr{constructor(E){this.auth=E,this.queue=[]}pushCallback(E,I){const U=Ae=>new Promise((St,on)=>{try{St(E(Ae))}catch(On){on(On)}});U.onAbort=I,this.queue.push(U);const de=this.queue.length-1;return()=>{this.queue[de]=()=>Promise.resolve()}}runMiddleware(E){var I=this;return(0,g.Z)(function*(){var U;if(I.auth.currentUser===E)return;const de=[];try{for(const Ae of I.queue)yield Ae(E),Ae.onAbort&&de.push(Ae.onAbort)}catch(Ae){de.reverse();for(const St of de)try{St()}catch{}throw I.auth._errorFactory.create("login-blocked",{originalMessage:null===(U=Ae)||void 0===U?void 0:U.message})}})()}}class wr{constructor(E,I,U){this.app=E,this.heartbeatServiceProvider=I,this.config=U,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zs(this),this.idTokenSubscription=new zs(this),this.beforeStateQueue=new fr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=E.name,this.clientVersion=U.sdkClientVersion}_initializeWithPersistence(E,I){var U=this;return I&&(this._popupRedirectResolver=st(I)),this._initializationPromise=this.queue((0,g.Z)(function*(){var de,Ae;if(!U._deleted&&(U.persistenceManager=yield Hr.create(U,E),!U._deleted)){if(null!==(de=U._popupRedirectResolver)&&void 0!==de&&de._shouldInitProactively)try{yield U._popupRedirectResolver._initialize(U)}catch{}yield U.initializeCurrentUser(I),U.lastNotifiedUid=(null===(Ae=U.currentUser)||void 0===Ae?void 0:Ae.uid)||null,!U._deleted&&(U._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var E=this;return(0,g.Z)(function*(){if(E._deleted)return;const I=yield E.assertedPersistence.getCurrentUser();if(E.currentUser||I){if(E.currentUser&&I&&E.currentUser.uid===I.uid)return E._currentUser._assign(I),void(yield E.currentUser.getIdToken());yield E._updateCurrentUser(I,!0)}})()}initializeCurrentUser(E){var I=this;return(0,g.Z)(function*(){var U;const de=yield I.assertedPersistence.getCurrentUser();let Ae=de,St=!1;if(E&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const on=null===(U=I.redirectUser)||void 0===U?void 0:U._redirectEventId,On=Ae?._redirectEventId,pi=yield I.tryRedirectSignIn(E);(!on||on===On)&&pi?.user&&(Ae=pi.user,St=!0)}if(!Ae)return I.directlySetCurrentUser(null);if(!Ae._redirectEventId){if(St)try{yield I.beforeStateQueue.runMiddleware(Ae)}catch(on){Ae=de,I._popupRedirectResolver._overrideRedirectResult(I,()=>Promise.reject(on))}return Ae?I.reloadAndSetCurrentUserOrClear(Ae):I.directlySetCurrentUser(null)}return xe(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===Ae._redirectEventId?I.directlySetCurrentUser(Ae):I.reloadAndSetCurrentUserOrClear(Ae)})()}tryRedirectSignIn(E){var I=this;return(0,g.Z)(function*(){let U=null;try{U=yield I._popupRedirectResolver._completeRedirectFn(I,E,!0)}catch{yield I._setRedirectUser(null)}return U})()}reloadAndSetCurrentUserOrClear(E){var I=this;return(0,g.Z)(function*(){var U;try{yield or(E)}catch(de){if("auth/network-request-failed"!==(null===(U=de)||void 0===U?void 0:U.code))return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(E)})()}useDeviceLanguage(){this.languageCode=function Pn(){if(typeof navigator>"u")return null;const F=navigator;return F.languages&&F.languages[0]||F.language||null}()}_delete(){var E=this;return(0,g.Z)(function*(){E._deleted=!0})()}updateCurrentUser(E){var I=this;return(0,g.Z)(function*(){const U=E?(0,i.m9)(E):null;return U&&xe(U.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(U&&U._clone(I))})()}_updateCurrentUser(E,I=!1){var U=this;return(0,g.Z)(function*(){if(!U._deleted)return E&&xe(U.tenantId===E.tenantId,U,"tenant-id-mismatch"),I||(yield U.beforeStateQueue.runMiddleware(E)),U.queue((0,g.Z)(function*(){yield U.directlySetCurrentUser(E),U.notifyAuthListeners()}))})()}signOut(){var E=this;return(0,g.Z)(function*(){return yield E.beforeStateQueue.runMiddleware(null),(E.redirectPersistenceManager||E._popupRedirectResolver)&&(yield E._setRedirectUser(null)),E._updateCurrentUser(null,!0)})()}setPersistence(E){var I=this;return this.queue((0,g.Z)(function*(){yield I.assertedPersistence.setPersistence(st(E))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(E){this._errorFactory=new i.LL("auth","Firebase",E())}onAuthStateChanged(E,I,U){return this.registerStateListener(this.authStateSubscription,E,I,U)}beforeAuthStateChanged(E,I){return this.beforeStateQueue.pushCallback(E,I)}onIdTokenChanged(E,I,U){return this.registerStateListener(this.idTokenSubscription,E,I,U)}toJSON(){var E;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(E=this._currentUser)||void 0===E?void 0:E.toJSON()}}_setRedirectUser(E,I){var U=this;return(0,g.Z)(function*(){const de=yield U.getOrInitRedirectPersistenceManager(I);return null===E?de.removeCurrentUser():de.setCurrentUser(E)})()}getOrInitRedirectPersistenceManager(E){var I=this;return(0,g.Z)(function*(){if(!I.redirectPersistenceManager){const U=E&&st(E)||I._popupRedirectResolver;xe(U,I,"argument-error"),I.redirectPersistenceManager=yield Hr.create(I,[st(U._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(E){var I=this;return(0,g.Z)(function*(){var U,de;return I._isInitialized&&(yield I.queue((0,g.Z)(function*(){}))),(null===(U=I._currentUser)||void 0===U?void 0:U._redirectEventId)===E?I._currentUser:(null===(de=I.redirectUser)||void 0===de?void 0:de._redirectEventId)===E?I.redirectUser:null})()}_persistUserIfCurrent(E){var I=this;return(0,g.Z)(function*(){if(E===I.currentUser)return I.queue((0,g.Z)(function*(){return I.directlySetCurrentUser(E)}))})()}_notifyListenersIfCurrent(E){E===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var E,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const U=null!==(I=null===(E=this.currentUser)||void 0===E?void 0:E.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==U&&(this.lastNotifiedUid=U,this.authStateSubscription.next(this.currentUser))}registerStateListener(E,I,U,de){if(this._deleted)return()=>{};const Ae="function"==typeof I?I:I.next.bind(I),St=this._isInitialized?Promise.resolve():this._initializationPromise;return xe(St,this,"internal-error"),St.then(()=>Ae(this.currentUser)),"function"==typeof I?E.addObserver(I,U,de):E.addObserver(I)}directlySetCurrentUser(E){var I=this;return(0,g.Z)(function*(){I.currentUser&&I.currentUser!==E&&(I._currentUser._stopProactiveRefresh(),E&&I.isProactiveRefreshEnabled&&E._startProactiveRefresh()),I.currentUser=E,E?yield I.assertedPersistence.setCurrentUser(E):yield I.assertedPersistence.removeCurrentUser()})()}queue(E){return this.operations=this.operations.then(E,E),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(E){!E||this.frameworks.includes(E)||(this.frameworks.push(E),this.frameworks.sort(),this.clientVersion=Si(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var E=this;return(0,g.Z)(function*(){var I;const U={"X-Client-Version":E.clientVersion};E.app.options.appId&&(U["X-Firebase-gmpid"]=E.app.options.appId);const de=yield null===(I=E.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getHeartbeatsHeader();return de&&(U["X-Firebase-Client"]=de),U})()}}function In(F){return(0,i.m9)(F)}class zs{constructor(E){this.auth=E,this.observer=null,this.addObserver=(0,i.ne)(I=>this.observer=I)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ss(F,E,I){const U=In(F);xe(U._canInitEmulator,U,"emulator-config-failed"),xe(/^https?:\/\//.test(E),U,"invalid-emulator-scheme");const de=!!I?.disableWarnings,Ae=ya(E),{host:St,port:on}=function ho(F){const E=ya(F),I=/(\/\/)?([^?#/]+)/.exec(F.substr(E.length));if(!I)return{host:"",port:null};const U=I[2].split("@").pop()||"",de=/^(\[[^\]]+\])(:|$)/.exec(U);if(de){const Ae=de[1];return{host:Ae,port:Kr(U.substr(Ae.length+1))}}{const[Ae,St]=U.split(":");return{host:Ae,port:Kr(St)}}}(E);U.config.emulator={url:`${Ae}//${St}${null===on?"":`:${on}`}/`},U.settings.appVerificationDisabledForTesting=!0,U.emulatorConfig=Object.freeze({host:St,port:on,protocol:Ae.replace(":",""),options:Object.freeze({disableWarnings:de})}),de||function ls(){function F(){const E=document.createElement("p"),I=E.style;E.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",E.classList.add("firebase-emulator-warning"),document.body.appendChild(E)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",F):F())}()}function ya(F){const E=F.indexOf(":");return E<0?"":F.substr(0,E+1)}function Kr(F){if(!F)return null;const E=Number(F);return isNaN(E)?null:E}class Ds{constructor(E,I){this.providerId=E,this.signInMethod=I}toJSON(){return ee("not implemented")}_getIdTokenResponse(E){return ee("not implemented")}_linkToIdToken(E,I){return ee("not implemented")}_getReauthenticationResolver(E){return ee("not implemented")}}function no(F,E){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,g.Z)(function*(F,E){return vt(F,"POST","/v1/accounts:resetPassword",He(F,E))})).apply(this,arguments)}function fo(F,E){return er.apply(this,arguments)}function er(){return(er=(0,g.Z)(function*(F,E){return vt(F,"POST","/v1/accounts:update",E)})).apply(this,arguments)}function ja(F,E){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,g.Z)(function*(F,E){return vt(F,"POST","/v1/accounts:update",He(F,E))})).apply(this,arguments)}function $s(){return($s=(0,g.Z)(function*(F,E){return Ci(F,"POST","/v1/accounts:signInWithPassword",He(F,E))})).apply(this,arguments)}function Ps(F,E){return po.apply(this,arguments)}function po(){return(po=(0,g.Z)(function*(F,E){return vt(F,"POST","/v1/accounts:sendOobCode",He(F,E))})).apply(this,arguments)}function Ns(F,E){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,g.Z)(function*(F,E){return Ps(F,E)})).apply(this,arguments)}function Qo(F,E){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(F,E){return Ps(F,E)})).apply(this,arguments)}function Wr(F,E){return gi.apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(F,E){return Ps(F,E)})).apply(this,arguments)}function Da(F,E){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(F,E){return Ps(F,E)})).apply(this,arguments)}function rl(){return(rl=(0,g.Z)(function*(F,E){return Ci(F,"POST","/v1/accounts:signInWithEmailLink",He(F,E))})).apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(F,E){return Ci(F,"POST","/v1/accounts:signInWithEmailLink",He(F,E))})).apply(this,arguments)}class va extends Ds{constructor(E,I,U,de=null){super("password",U),this._email=E,this._password=I,this._tenantId=de}static _fromEmailAndPassword(E,I){return new va(E,I,"password")}static _fromEmailAndCode(E,I,U=null){return new va(E,I,"emailLink",U)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(E){const I="string"==typeof E?JSON.parse(E):E;if(I?.email&&I?.password){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(E){var I=this;return(0,g.Z)(function*(){switch(I.signInMethod){case"password":return function xs(F,E){return $s.apply(this,arguments)}(E,{returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function us(F,E){return rl.apply(this,arguments)}(E,{email:I._email,oobCode:I._password});default:qt(E,"internal-error")}})()}_linkToIdToken(E,I){var U=this;return(0,g.Z)(function*(){switch(U.signInMethod){case"password":return fo(E,{idToken:I,returnSecureToken:!0,email:U._email,password:U._password});case"emailLink":return function Hl(F,E){return Eo.apply(this,arguments)}(E,{idToken:I,email:U._email,oobCode:U._password});default:qt(E,"internal-error")}})()}_getReauthenticationResolver(E){return this._getIdTokenResponse(E)}}function mo(F,E){return io.apply(this,arguments)}function io(){return(io=(0,g.Z)(function*(F,E){return Ci(F,"POST","/v1/accounts:signInWithIdp",He(F,E))})).apply(this,arguments)}class ut extends Ds{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(E){const I=new ut(E.providerId,E.signInMethod);return E.idToken||E.accessToken?(E.idToken&&(I.idToken=E.idToken),E.accessToken&&(I.accessToken=E.accessToken),E.nonce&&!E.pendingToken&&(I.nonce=E.nonce),E.pendingToken&&(I.pendingToken=E.pendingToken)):E.oauthToken&&E.oauthTokenSecret?(I.accessToken=E.oauthToken,I.secret=E.oauthTokenSecret):qt("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(E){const I="string"==typeof E?JSON.parse(E):E,{providerId:U,signInMethod:de}=I,Ae=(0,ge._T)(I,["providerId","signInMethod"]);if(!U||!de)return null;const St=new ut(U,de);return St.idToken=Ae.idToken||void 0,St.accessToken=Ae.accessToken||void 0,St.secret=Ae.secret,St.nonce=Ae.nonce,St.pendingToken=Ae.pendingToken||null,St}_getIdTokenResponse(E){return mo(E,this.buildRequest())}_linkToIdToken(E,I){const U=this.buildRequest();return U.idToken=I,mo(E,U)}_getReauthenticationResolver(E){const I=this.buildRequest();return I.autoCreate=!1,mo(E,I)}buildRequest(){const E={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)E.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),E.postBody=(0,i.xO)(I)}return E}}function Tt(F,E){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,g.Z)(function*(F,E){return vt(F,"POST","/v1/accounts:sendVerificationCode",He(F,E))})).apply(this,arguments)}function tn(){return(tn=(0,g.Z)(function*(F,E){return Ci(F,"POST","/v1/accounts:signInWithPhoneNumber",He(F,E))})).apply(this,arguments)}function li(){return(li=(0,g.Z)(function*(F,E){const I=yield Ci(F,"POST","/v1/accounts:signInWithPhoneNumber",He(F,E));if(I.temporaryProof)throw Ki(F,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const ar={USER_NOT_FOUND:"user-not-found"};function Ks(){return(Ks=(0,g.Z)(function*(F,E){return Ci(F,"POST","/v1/accounts:signInWithPhoneNumber",He(F,Object.assign(Object.assign({},E),{operation:"REAUTH"})),ar)})).apply(this,arguments)}class ds extends Ds{constructor(E){super("phone","phone"),this.params=E}static _fromVerification(E,I){return new ds({verificationId:E,verificationCode:I})}static _fromTokenResponse(E,I){return new ds({phoneNumber:E,temporaryProof:I})}_getIdTokenResponse(E){return function Yt(F,E){return tn.apply(this,arguments)}(E,this._makeVerificationRequest())}_linkToIdToken(E,I){return function si(F,E){return li.apply(this,arguments)}(E,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(E){return function go(F,E){return Ks.apply(this,arguments)}(E,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:E,phoneNumber:I,verificationId:U,verificationCode:de}=this.params;return E&&I?{temporaryProof:E,phoneNumber:I}:{sessionInfo:U,code:de}}toJSON(){const E={providerId:this.providerId};return this.params.phoneNumber&&(E.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(E.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(E.verificationCode=this.params.verificationCode),this.params.verificationId&&(E.verificationId=this.params.verificationId),E}static fromJSON(E){"string"==typeof E&&(E=JSON.parse(E));const{verificationId:I,verificationCode:U,phoneNumber:de,temporaryProof:Ae}=E;return U||I||de||Ae?new ds({verificationId:I,verificationCode:U,phoneNumber:de,temporaryProof:Ae}):null}}class jr{constructor(E){var I,U,de,Ae,St,on;const On=(0,i.zd)((0,i.pd)(E)),pi=null!==(I=On.apiKey)&&void 0!==I?I:null,_r=null!==(U=On.oobCode)&&void 0!==U?U:null,Ts=function Cr(F){switch(F){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(de=On.mode)&&void 0!==de?de:null);xe(pi&&_r&&Ts,"argument-error"),this.apiKey=pi,this.operation=Ts,this.code=_r,this.continueUrl=null!==(Ae=On.continueUrl)&&void 0!==Ae?Ae:null,this.languageCode=null!==(St=On.languageCode)&&void 0!==St?St:null,this.tenantId=null!==(on=On.tenantId)&&void 0!==on?on:null}static parseLink(E){const I=function _i(F){const E=(0,i.zd)((0,i.pd)(F)).link,I=E?(0,i.zd)((0,i.pd)(E)).deep_link_id:null,U=(0,i.zd)((0,i.pd)(F)).deep_link_id;return(U?(0,i.zd)((0,i.pd)(U)).link:null)||U||I||E||F}(E);try{return new jr(I)}catch{return null}}}let Oo=(()=>{class F{constructor(){this.providerId=F.PROVIDER_ID}static credential(I,U){return va._fromEmailAndPassword(I,U)}static credentialWithLink(I,U){const de=jr.parseLink(U);return xe(de,"argument-error"),va._fromEmailAndCode(I,de.code,de.tenantId)}}return F.PROVIDER_ID="password",F.EMAIL_PASSWORD_SIGN_IN_METHOD="password",F.EMAIL_LINK_SIGN_IN_METHOD="emailLink",F})();class Er{constructor(E){this.providerId=E,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(E){this.defaultLanguageCode=E}setCustomParameters(E){return this.customParameters=E,this}getCustomParameters(){return this.customParameters}}class ro extends Er{constructor(){super(...arguments),this.scopes=[]}addScope(E){return this.scopes.includes(E)||this.scopes.push(E),this}getScopes(){return[...this.scopes]}}class _o extends ro{static credentialFromJSON(E){const I="string"==typeof E?JSON.parse(E):E;return xe("providerId"in I&&"signInMethod"in I,"argument-error"),ut._fromParams(I)}credential(E){return this._credential(Object.assign(Object.assign({},E),{nonce:E.rawNonce}))}_credential(E){return xe(E.idToken||E.accessToken,"argument-error"),ut._fromParams(Object.assign(Object.assign({},E),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(E){return _o.oauthCredentialFromTaggedObject(E)}static credentialFromError(E){return _o.oauthCredentialFromTaggedObject(E.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:I,oauthAccessToken:U,oauthTokenSecret:de,pendingToken:Ae,nonce:St,providerId:on}=E;if(!U&&!de&&!I&&!Ae||!on)return null;try{return new _o(on)._credential({idToken:I,accessToken:U,nonce:St,pendingToken:Ae})}catch{return null}}}let sl=(()=>{class F extends ro{constructor(){super("facebook.com")}static credential(I){return ut._fromParams({providerId:F.PROVIDER_ID,signInMethod:F.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return F.credentialFromTaggedObject(I)}static credentialFromError(I){return F.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return F.credential(I.oauthAccessToken)}catch{return null}}}return F.FACEBOOK_SIGN_IN_METHOD="facebook.com",F.PROVIDER_ID="facebook.com",F})(),Xo=(()=>{class F extends ro{constructor(){super("google.com"),this.addScope("profile")}static credential(I,U){return ut._fromParams({providerId:F.PROVIDER_ID,signInMethod:F.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:U})}static credentialFromResult(I){return F.credentialFromTaggedObject(I)}static credentialFromError(I){return F.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:U,oauthAccessToken:de}=I;if(!U&&!de)return null;try{return F.credential(U,de)}catch{return null}}}return F.GOOGLE_SIGN_IN_METHOD="google.com",F.PROVIDER_ID="google.com",F})(),es=(()=>{class F extends ro{constructor(){super("github.com")}static credential(I){return ut._fromParams({providerId:F.PROVIDER_ID,signInMethod:F.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return F.credentialFromTaggedObject(I)}static credentialFromError(I){return F.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return F.credential(I.oauthAccessToken)}catch{return null}}}return F.GITHUB_SIGN_IN_METHOD="github.com",F.PROVIDER_ID="github.com",F})();class yo extends Ds{constructor(E,I){super(E,E),this.pendingToken=I}_getIdTokenResponse(E){return mo(E,this.buildRequest())}_linkToIdToken(E,I){const U=this.buildRequest();return U.idToken=I,mo(E,U)}_getReauthenticationResolver(E){const I=this.buildRequest();return I.autoCreate=!1,mo(E,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(E){const I="string"==typeof E?JSON.parse(E):E,{providerId:U,signInMethod:de,pendingToken:Ae}=I;return U&&de&&Ae&&U===de?new yo(U,Ae):null}static _create(E,I){return new yo(E,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class As extends Er{constructor(E){xe(E.startsWith("saml."),"argument-error"),super(E)}static credentialFromResult(E){return As.samlCredentialFromTaggedObject(E)}static credentialFromError(E){return As.samlCredentialFromTaggedObject(E.customData||{})}static credentialFromJSON(E){const I=yo.fromJSON(E);return xe(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{pendingToken:I,providerId:U}=E;if(!I||!U)return null;try{return yo._create(U,I)}catch{return null}}}let vo=(()=>{class F extends ro{constructor(){super("twitter.com")}static credential(I,U){return ut._fromParams({providerId:F.PROVIDER_ID,signInMethod:F.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:U})}static credentialFromResult(I){return F.credentialFromTaggedObject(I)}static credentialFromError(I){return F.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:U,oauthTokenSecret:de}=I;if(!U||!de)return null;try{return F.credential(U,de)}catch{return null}}}return F.TWITTER_SIGN_IN_METHOD="twitter.com",F.PROVIDER_ID="twitter.com",F})();function Or(F,E){return Po.apply(this,arguments)}function Po(){return(Po=(0,g.Z)(function*(F,E){return Ci(F,"POST","/v1/accounts:signUp",He(F,E))})).apply(this,arguments)}class Zr{constructor(E){this.user=E.user,this.providerId=E.providerId,this._tokenResponse=E._tokenResponse,this.operationType=E.operationType}static _fromIdTokenResponse(E,I,U,de=!1){return(0,g.Z)(function*(){const Ae=yield mn._fromIdTokenResponse(E,U,de),St=hs(U);return new Zr({user:Ae,providerId:St,_tokenResponse:U,operationType:I})})()}static _forOperation(E,I,U){return(0,g.Z)(function*(){yield E._updateTokensIfNecessary(U,!0);const de=hs(U);return new Zr({user:E,providerId:de,_tokenResponse:U,operationType:I})})()}}function hs(F){return F.providerId?F.providerId:"phoneNumber"in F?"phone":null}function Ai(F){return To.apply(this,arguments)}function To(){return(To=(0,g.Z)(function*(F){var E;const I=In(F);if(yield I._initializationPromise,null!==(E=I.currentUser)&&void 0!==E&&E.isAnonymous)return new Zr({user:I.currentUser,providerId:null,operationType:"signIn"});const U=yield Or(I,{returnSecureToken:!0}),de=yield Zr._fromIdTokenResponse(I,"signIn",U,!0);return yield I._updateCurrentUser(de.user),de})).apply(this,arguments)}class Pr extends i.ZR{constructor(E,I,U,de){var Ae;super(I.code,I.message),this.operationType=U,this.user=de,Object.setPrototypeOf(this,Pr.prototype),this.customData={appName:E.name,tenantId:null!==(Ae=E.tenantId)&&void 0!==Ae?Ae:void 0,_serverResponse:I.customData._serverResponse,operationType:U}}static _fromErrorAndOperation(E,I,U,de){return new Pr(E,I,U,de)}}function Bo(F,E,I,U){return("reauthenticate"===E?I._getReauthenticationResolver(F):I._getIdTokenResponse(F)).catch(Ae=>{throw"auth/multi-factor-auth-required"===Ae.code?Pr._fromErrorAndOperation(F,Ae,E,U):Ae})}function bo(F){return new Set(F.map(({providerId:E})=>E).filter(E=>!!E))}function Io(F,E){return lr.apply(this,arguments)}function lr(){return(lr=(0,g.Z)(function*(F,E){const I=(0,i.m9)(F);yield Ws(!0,I,E);const{providerUserInfo:U}=yield Jt(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[E]}),de=bo(U||[]);return I.providerData=I.providerData.filter(Ae=>de.has(Ae.providerId)),de.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I})).apply(this,arguments)}function So(F,E){return fs.apply(this,arguments)}function fs(){return(fs=(0,g.Z)(function*(F,E,I=!1){const U=yield fi(F,E._linkToIdToken(F.auth,yield F.getIdToken()),I);return Zr._forOperation(F,"link",U)})).apply(this,arguments)}function Ws(F,E,I){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(function*(F,E,I){yield or(E);const de=!1===F?"provider-already-linked":"no-such-provider";xe(bo(E.providerData).has(I)===F,E.auth,de)})).apply(this,arguments)}function xa(F,E){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(F,E,I=!1){var U;const{auth:de}=F,Ae="reauthenticate";try{const St=yield fi(F,Bo(de,Ae,E,F),I);xe(St.idToken,de,"internal-error");const on=Kn(St.idToken);xe(on,de,"internal-error");const{sub:On}=on;return xe(F.uid===On,de,"user-mismatch"),Zr._forOperation(F,Ae,St)}catch(St){throw"auth/user-not-found"===(null===(U=St)||void 0===U?void 0:U.code)&&qt(de,"user-mismatch"),St}})).apply(this,arguments)}function la(F,E){return qr.apply(this,arguments)}function qr(){return(qr=(0,g.Z)(function*(F,E,I=!1){const U="signIn",de=yield Bo(F,U,E),Ae=yield Zr._fromIdTokenResponse(F,U,de);return I||(yield F._updateCurrentUser(Ae.user)),Ae})).apply(this,arguments)}function ba(F,E){return cr.apply(this,arguments)}function cr(){return(cr=(0,g.Z)(function*(F,E){return la(In(F),E)})).apply(this,arguments)}function Ti(F,E){return ol.apply(this,arguments)}function ol(){return(ol=(0,g.Z)(function*(F,E){const I=(0,i.m9)(F);return yield Ws(!1,I,E.providerId),So(I,E)})).apply(this,arguments)}function lc(F,E){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,g.Z)(function*(F,E){return xa((0,i.m9)(F),E)})).apply(this,arguments)}function Yl(F,E){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(function*(F,E){return Ci(F,"POST","/v1/accounts:signInWithCustomToken",He(F,E))})).apply(this,arguments)}function No(F,E){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,g.Z)(function*(F,E){const I=In(F),U=yield Yl(I,{token:E,returnSecureToken:!0}),de=yield Zr._fromIdTokenResponse(I,"signIn",U);return yield I._updateCurrentUser(de.user),de})).apply(this,arguments)}class Zs{constructor(E,I){this.factorId=E,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(E,I){return"phoneInfo"in I?Xt._fromServerResponse(E,I):qt(E,"internal-error")}}class Xt extends Zs{constructor(E){super("phone",E),this.phoneNumber=E.phoneInfo}static _fromServerResponse(E,I){return new Xt(I)}}function ni(F,E,I){var U;xe((null===(U=I.url)||void 0===U?void 0:U.length)>0,F,"invalid-continue-uri"),xe(typeof I.dynamicLinkDomain>"u"||I.dynamicLinkDomain.length>0,F,"invalid-dynamic-link-domain"),E.continueUrl=I.url,E.dynamicLinkDomain=I.dynamicLinkDomain,E.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(xe(I.iOS.bundleId.length>0,F,"missing-ios-bundle-id"),E.iOSBundleId=I.iOS.bundleId),I.android&&(xe(I.android.packageName.length>0,F,"missing-android-pkg-name"),E.androidInstallApp=I.android.installApp,E.androidMinimumVersionCode=I.android.minimumVersion,E.androidPackageName=I.android.packageName)}function so(F,E,I){return bs.apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(F,E,I){const U=(0,i.m9)(F),de={requestType:"PASSWORD_RESET",email:E};I&&ni(U,de,I),yield Qo(U,de)})).apply(this,arguments)}function Wn(F,E,I){return ie.apply(this,arguments)}function ie(){return(ie=(0,g.Z)(function*(F,E,I){yield no((0,i.m9)(F),{oobCode:E,newPassword:I})})).apply(this,arguments)}function X(F,E){return W.apply(this,arguments)}function W(){return(W=(0,g.Z)(function*(F,E){yield ja((0,i.m9)(F),{oobCode:E})})).apply(this,arguments)}function pe(F,E){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,g.Z)(function*(F,E){const I=(0,i.m9)(F),U=yield no(I,{oobCode:E}),de=U.requestType;switch(xe(de,I,"internal-error"),de){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":xe(U.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":xe(U.mfaInfo,I,"internal-error");default:xe(U.email,I,"internal-error")}let Ae=null;return U.mfaInfo&&(Ae=Zs._fromServerResponse(In(I),U.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===U.requestType?U.newEmail:U.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===U.requestType?U.email:U.newEmail)||null,multiFactorInfo:Ae},operation:de}})).apply(this,arguments)}function Ln(F,E){return zr.apply(this,arguments)}function zr(){return(zr=(0,g.Z)(function*(F,E){const{data:I}=yield pe((0,i.m9)(F),E);return I.email})).apply(this,arguments)}function oo(F,E,I){return ps.apply(this,arguments)}function ps(){return(ps=(0,g.Z)(function*(F,E,I){const U=In(F),de=yield Or(U,{returnSecureToken:!0,email:E,password:I}),Ae=yield Zr._fromIdTokenResponse(U,"signIn",de);return yield U._updateCurrentUser(Ae.user),Ae})).apply(this,arguments)}function Yr(F,E,I){return ba((0,i.m9)(F),Oo.credential(E,I))}function ws(F,E,I){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,g.Z)(function*(F,E,I){const U=(0,i.m9)(F),de={requestType:"EMAIL_SIGNIN",email:E};xe(I.handleCodeInApp,U,"argument-error"),I&&ni(U,de,I),yield Wr(U,de)})).apply(this,arguments)}function xl(F,E){return"EMAIL_SIGNIN"===jr.parseLink(E)?.operation}function ta(F,E,I){return al.apply(this,arguments)}function al(){return(al=(0,g.Z)(function*(F,E,I){const U=(0,i.m9)(F),de=Oo.credentialWithLink(E,I||Qt());return xe(de._tenantId===(U.tenantId||null),U,"tenant-id-mismatch"),ba(U,de)})).apply(this,arguments)}function wa(F,E){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,g.Z)(function*(F,E){return vt(F,"POST","/v1/accounts:createAuthUri",He(F,E))})).apply(this,arguments)}function $a(F,E){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,g.Z)(function*(F,E){const U={identifier:E,continueUri:rn()?Qt():"http://localhost"},{signinMethods:de}=yield wa((0,i.m9)(F),U);return de||[]})).apply(this,arguments)}function Ma(F,E){return na.apply(this,arguments)}function na(){return(na=(0,g.Z)(function*(F,E){const I=(0,i.m9)(F),de={requestType:"VERIFY_EMAIL",idToken:yield F.getIdToken()};E&&ni(I.auth,de,E);const{email:Ae}=yield Ns(I.auth,de);Ae!==F.email&&(yield F.reload())})).apply(this,arguments)}function ms(F,E,I){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(F,E,I){const U=(0,i.m9)(F),Ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield F.getIdToken(),newEmail:E};I&&ni(U.auth,Ae,I);const{email:St}=yield Da(U.auth,Ae);St!==F.email&&(yield F.reload())})).apply(this,arguments)}function _l(F,E){return Al.apply(this,arguments)}function Al(){return(Al=(0,g.Z)(function*(F,E){return vt(F,"POST","/v1/accounts:update",E)})).apply(this,arguments)}function Cc(F,E){return ll.apply(this,arguments)}function ll(){return(ll=(0,g.Z)(function*(F,{displayName:E,photoURL:I}){if(void 0===E&&void 0===I)return;const U=(0,i.m9)(F),Ae={idToken:yield U.getIdToken(),displayName:E,photoUrl:I,returnSecureToken:!0},St=yield fi(U,_l(U.auth,Ae));U.displayName=St.displayName||null,U.photoURL=St.photoUrl||null;const on=U.providerData.find(({providerId:On})=>"password"===On);on&&(on.displayName=U.displayName,on.photoURL=U.photoURL),yield U._updateTokensIfNecessary(St)})).apply(this,arguments)}function Ml(F,E){return le((0,i.m9)(F),E,null)}function z(F,E){return le((0,i.m9)(F),null,E)}function le(F,E,I){return Y.apply(this,arguments)}function Y(){return(Y=(0,g.Z)(function*(F,E,I){const{auth:U}=F,Ae={idToken:yield F.getIdToken(),returnSecureToken:!0};E&&(Ae.email=E),I&&(Ae.password=I);const St=yield fi(F,fo(U,Ae));yield F._updateTokensIfNecessary(St,!0)})).apply(this,arguments)}class $e{constructor(E,I,U={}){this.isNewUser=E,this.providerId=I,this.profile=U}}class Rt extends $e{constructor(E,I,U,de){super(E,I,U),this.username=de}}class jt extends $e{constructor(E,I){super(E,"facebook.com",I)}}class Nn extends Rt{constructor(E,I){super(E,"github.com",I,"string"==typeof I?.login?I?.login:null)}}class $i extends $e{constructor(E,I){super(E,"google.com",I)}}class Ir extends Rt{constructor(E,I,U){super(E,"twitter.com",I,U)}}function nr(F){const{user:E,_tokenResponse:I}=F;return E.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function _e(F){var E,I;if(!F)return null;const{providerId:U}=F,de=F.rawUserInfo?JSON.parse(F.rawUserInfo):{},Ae=F.isNewUser||"identitytoolkit#SignupNewUserResponse"===F.kind;if(!U&&F?.idToken){const St=null===(I=null===(E=Kn(F.idToken))||void 0===E?void 0:E.firebase)||void 0===I?void 0:I.sign_in_provider;if(St)return new $e(Ae,"anonymous"!==St&&"custom"!==St?St:null)}if(!U)return null;switch(U){case"facebook.com":return new jt(Ae,de);case"github.com":return new Nn(Ae,de);case"google.com":return new $i(Ae,de);case"twitter.com":return new Ir(Ae,de,F.screenName||null);case"custom":case"anonymous":return new $e(Ae,null);default:return new $e(Ae,U,de)}}(I)}class ao{constructor(E,I){this.type=E,this.credential=I}static _fromIdtoken(E){return new ao("enroll",E)}static _fromMfaPendingCredential(E){return new ao("signin",E)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(E){var I,U;if(E?.multiFactorSession){if(null!==(I=E.multiFactorSession)&&void 0!==I&&I.pendingCredential)return ao._fromMfaPendingCredential(E.multiFactorSession.pendingCredential);if(null!==(U=E.multiFactorSession)&&void 0!==U&&U.idToken)return ao._fromIdtoken(E.multiFactorSession.idToken)}return null}}class ua{constructor(E,I,U){this.session=E,this.hints=I,this.signInResolver=U}static _fromError(E,I){const U=In(E),de=I.customData._serverResponse,Ae=(de.mfaInfo||[]).map(on=>Zs._fromServerResponse(U,on));xe(de.mfaPendingCredential,U,"internal-error");const St=ao._fromMfaPendingCredential(de.mfaPendingCredential);return new ua(St,Ae,function(){var on=(0,g.Z)(function*(On){const pi=yield On._process(U,St);delete de.mfaInfo,delete de.mfaPendingCredential;const _r=Object.assign(Object.assign({},de),{idToken:pi.idToken,refreshToken:pi.refreshToken});switch(I.operationType){case"signIn":const Ts=yield Zr._fromIdTokenResponse(U,I.operationType,_r);return yield U._updateCurrentUser(Ts.user),Ts;case"reauthenticate":return xe(I.user,U,"internal-error"),Zr._forOperation(I.user,I.operationType,_r);default:qt(U,"internal-error")}});return function(On){return on.apply(this,arguments)}}())}resolveSignIn(E){var I=this;return(0,g.Z)(function*(){return I.signInResolver(E)})()}}function Oa(F,E){var I;const U=(0,i.m9)(F),de=E;return xe(E.customData.operationType,U,"argument-error"),xe(null===(I=de.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,U,"argument-error"),ua._fromError(U,de)}function Gr(F,E){return vt(F,"POST","/v2/accounts/mfaEnrollment:start",He(F,E))}class da{constructor(E){this.user=E,this.enrolledFactors=[],E._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(U=>Zs._fromServerResponse(E.auth,U)))})}static _fromUser(E){return new da(E)}getSession(){var E=this;return(0,g.Z)(function*(){return ao._fromIdtoken(yield E.user.getIdToken())})()}enroll(E,I){var U=this;return(0,g.Z)(function*(){const de=E,Ae=yield U.getSession(),St=yield fi(U.user,de._process(U.user.auth,Ae,I));return yield U.user._updateTokensIfNecessary(St),U.user.reload()})()}unenroll(E){var I=this;return(0,g.Z)(function*(){var U;const de="string"==typeof E?E:E.uid,Ae=yield I.user.getIdToken(),St=yield fi(I.user,function Wa(F,E){return vt(F,"POST","/v2/accounts/mfaEnrollment:withdraw",He(F,E))}(I.user.auth,{idToken:Ae,mfaEnrollmentId:de}));I.enrolledFactors=I.enrolledFactors.filter(({uid:on})=>on!==de),yield I.user._updateTokensIfNecessary(St);try{yield I.user.reload()}catch(on){if("auth/user-token-expired"!==(null===(U=on)||void 0===U?void 0:U.code))throw on}})()}}const Ec=new WeakMap;function Za(F){const E=(0,i.m9)(F);return Ec.has(E)||Ec.set(E,da._fromUser(E)),Ec.get(E)}const qa="__sak";class ia{constructor(E,I){this.storageRetriever=E,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(qa,"1"),this.storage.removeItem(qa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(E,I){return this.storage.setItem(E,JSON.stringify(I)),Promise.resolve()}_get(E){const I=this.storage.getItem(E);return Promise.resolve(I?JSON.parse(I):null)}_remove(E){return this.storage.removeItem(E),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nr=(()=>{class F extends ia{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,U)=>this.onStorageEvent(I,U),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vl(){const F=(0,i.z$)();return tt(F)||Ve(F)}()&&function vi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=En(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const U of Object.keys(this.listeners)){const de=this.storage.getItem(U),Ae=this.localCache[U];de!==Ae&&I(U,Ae,de)}}onStorageEvent(I,U=!1){if(!I.key)return void this.forAllChangedKeys((on,On,pi)=>{this.notifyListeners(on,pi)});const de=I.key;if(U?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const on=this.storage.getItem(de);if(I.newValue!==on)null!==I.newValue?this.storage.setItem(de,I.newValue):this.storage.removeItem(de);else if(this.localCache[de]===I.newValue&&!U)return}const Ae=()=>{const on=this.storage.getItem(de);!U&&this.localCache[de]===on||this.notifyListeners(de,on)},St=this.storage.getItem(de);!function It(){return(0,i.w1)()&&10===document.documentMode}()||St===I.newValue||I.newValue===I.oldValue?Ae():setTimeout(Ae,10)}notifyListeners(I,U){this.localCache[I]=U;const de=this.listeners[I];if(de)for(const Ae of Array.from(de))Ae(U&&JSON.parse(U))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,U,de)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:U,newValue:de}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,U){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(U)}_removeListener(I,U){this.listeners[I]&&(this.listeners[I].delete(U),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,U){var de=()=>super._set,Ae=this;return(0,g.Z)(function*(){yield de().call(Ae,I,U),Ae.localCache[I]=JSON.stringify(U)})()}_get(I){var U=()=>super._get,de=this;return(0,g.Z)(function*(){const Ae=yield U().call(de,I);return de.localCache[I]=JSON.stringify(Ae),Ae})()}_remove(I){var U=()=>super._remove,de=this;return(0,g.Z)(function*(){yield U().call(de,I),delete de.localCache[I]})()}}return F.type="LOCAL",F})(),Ya=(()=>{class F extends ia{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,U){}_removeListener(I,U){}}return F.type="SESSION",F})();let ra=(()=>{class F{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const U=this.receivers.find(Ae=>Ae.isListeningto(I));if(U)return U;const de=new F(I);return this.receivers.push(de),de}isListeningto(I){return this.eventTarget===I}handleEvent(I){var U=this;return(0,g.Z)(function*(){const de=I,{eventId:Ae,eventType:St,data:on}=de.data,On=U.handlersMap[St];if(!On?.size)return;de.ports[0].postMessage({status:"ack",eventId:Ae,eventType:St});const pi=Array.from(On).map(function(){var Ts=(0,g.Z)(function*(Bl){return Bl(de.origin,on)});return function(Bl){return Ts.apply(this,arguments)}}()),_r=yield function $r(F){return Promise.all(F.map(function(){var E=(0,g.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(U){return{fulfilled:!1,reason:U}}});return function(I){return E.apply(this,arguments)}}()))}(pi);de.ports[0].postMessage({status:"done",eventId:Ae,eventType:St,response:_r})})()}_subscribe(I,U){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(U)}_unsubscribe(I,U){this.handlersMap[I]&&U&&this.handlersMap[I].delete(U),(!U||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return F.receivers=[],F})();function Rl(F="",E=10){let I="";for(let U=0;U<E;U++)I+=Math.floor(10*Math.random());return F+I}class cc{constructor(E){this.target=E,this.handlers=new Set}removeMessageHandler(E){E.messageChannel&&(E.messageChannel.port1.removeEventListener("message",E.onMessage),E.messageChannel.port1.close()),this.handlers.delete(E)}_send(E,I,U=50){var de=this;return(0,g.Z)(function*(){const Ae=typeof MessageChannel<"u"?new MessageChannel:null;if(!Ae)throw new Error("connection_unavailable");let St,on;return new Promise((On,pi)=>{const _r=Rl("",20);Ae.port1.start();const Ts=setTimeout(()=>{pi(new Error("unsupported_event"))},U);on={messageChannel:Ae,onMessage(Bl){const Nc=Bl;if(Nc.data.eventId===_r)switch(Nc.data.status){case"ack":clearTimeout(Ts),St=setTimeout(()=>{pi(new Error("timeout"))},3e3);break;case"done":clearTimeout(St),On(Nc.data.response);break;default:clearTimeout(Ts),clearTimeout(St),pi(new Error("invalid_response"))}}},de.handlers.add(on),Ae.port1.addEventListener("message",on.onMessage),de.target.postMessage({eventType:E,eventId:_r,data:I},[Ae.port2])}).finally(()=>{on&&de.removeMessageHandler(on)})})()}}function Fs(){return window}function Qs(){return typeof Fs().WorkerGlobalScope<"u"&&"function"==typeof Fs().importScripts}function ur(){return(ur=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ha="firebaseLocalStorageDb",pn="firebaseLocalStorage",Fr="fbase_key";class sa{constructor(E){this.request=E}toPromise(){return new Promise((E,I)=>{this.request.addEventListener("success",()=>{E(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function ul(F,E){return F.transaction([pn],E?"readwrite":"readonly").objectStore(pn)}function Fn(){const F=indexedDB.open(ha,1);return new Promise((E,I)=>{F.addEventListener("error",()=>{I(F.error)}),F.addEventListener("upgradeneeded",()=>{const U=F.result;try{U.createObjectStore(pn,{keyPath:Fr})}catch(de){I(de)}}),F.addEventListener("success",(0,g.Z)(function*(){const U=F.result;U.objectStoreNames.contains(pn)?E(U):(U.close(),yield function Vn(){const F=indexedDB.deleteDatabase(ha);return new sa(F).toPromise()}(),E(yield Fn()))}))})}function lo(F,E,I){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,g.Z)(function*(F,E,I){const U=ul(F,!0).put({[Fr]:E,value:I});return new sa(U).toPromise()})).apply(this,arguments)}function sn(){return(sn=(0,g.Z)(function*(F,E){const I=ul(F,!1).get(E),U=yield new sa(I).toPromise();return void 0===U?null:U.value})).apply(this,arguments)}function Ls(F,E){const I=ul(F,!0).delete(E);return new sa(I).toPromise()}const Xl=(()=>{class F{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,g.Z)(function*(){return I.db||(I.db=yield Fn()),I.db})()}_withRetries(I){var U=this;return(0,g.Z)(function*(){let de=0;for(;;)try{const Ae=yield U._openDb();return yield I(Ae)}catch(Ae){if(de++>3)throw Ae;U.db&&(U.db.close(),U.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,g.Z)(function*(){return Qs()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,g.Z)(function*(){I.receiver=ra._getInstance(function Ho(){return Qs()?self:null}()),I.receiver._subscribe("keyChanged",function(){var U=(0,g.Z)(function*(de,Ae){return{keyProcessed:(yield I._poll()).includes(Ae.key)}});return function(de,Ae){return U.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var U=(0,g.Z)(function*(de,Ae){return["keyChanged"]});return function(de,Ae){return U.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,g.Z)(function*(){var U,de;if(I.activeServiceWorker=yield function jl(){return ur.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new cc(I.activeServiceWorker);const Ae=yield I.sender._send("ping",{},800);!Ae||(null===(U=Ae[0])||void 0===U?void 0:U.fulfilled)&&(null===(de=Ae[0])||void 0===de?void 0:de.value.includes("keyChanged"))&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var U=this;return(0,g.Z)(function*(){if(U.sender&&U.activeServiceWorker&&function wl(){var F;return(null===(F=navigator?.serviceWorker)||void 0===F?void 0:F.controller)||null}()===U.activeServiceWorker)try{yield U.sender._send("keyChanged",{key:I},U.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const I=yield Fn();return yield lo(I,qa,"1"),yield Ls(I,qa),!0}catch{}return!1})()}_withPendingWrite(I){var U=this;return(0,g.Z)(function*(){U.pendingWrites++;try{yield I()}finally{U.pendingWrites--}})()}_set(I,U){var de=this;return(0,g.Z)(function*(){return de._withPendingWrite((0,g.Z)(function*(){return yield de._withRetries(Ae=>lo(Ae,I,U)),de.localCache[I]=U,de.notifyServiceWorker(I)}))})()}_get(I){var U=this;return(0,g.Z)(function*(){const de=yield U._withRetries(Ae=>function Ht(F,E){return sn.apply(this,arguments)}(Ae,I));return U.localCache[I]=de,de})()}_remove(I){var U=this;return(0,g.Z)(function*(){return U._withPendingWrite((0,g.Z)(function*(){return yield U._withRetries(de=>Ls(de,I)),delete U.localCache[I],U.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,g.Z)(function*(){const U=yield I._withRetries(St=>{const on=ul(St,!1).getAll();return new sa(on).toPromise()});if(!U)return[];if(0!==I.pendingWrites)return[];const de=[],Ae=new Set;for(const{fbase_key:St,value:on}of U)Ae.add(St),JSON.stringify(I.localCache[St])!==JSON.stringify(on)&&(I.notifyListeners(St,on),de.push(St));for(const St of Object.keys(I.localCache))I.localCache[St]&&!Ae.has(St)&&(I.notifyListeners(St,null),de.push(St));return de})()}notifyListeners(I,U){this.localCache[I]=U;const de=this.listeners[I];if(de)for(const Ae of Array.from(de))Ae(U)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,U){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(U)}_removeListener(I,U){this.listeners[I]&&(this.listeners[I].delete(U),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return F.type="LOCAL",F})();function ec(F,E){return vt(F,"POST","/v2/accounts/mfaSignIn:start",He(F,E))}function Ms(){return(Ms=(0,g.Z)(function*(F){return(yield vt(F,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Qa(F){return new Promise((E,I)=>{const U=document.createElement("script");U.setAttribute("src",F),U.onload=E,U.onerror=de=>{const Ae=Be("internal-error");Ae.customData=de,I(Ae)},U.type="text/javascript",U.charset="UTF-8",function Pa(){var F,E;return null!==(E=null===(F=document.getElementsByTagName("head"))||void 0===F?void 0:F[0])&&void 0!==E?E:document}().appendChild(U)})}function jo(F){return`__${F}${Math.floor(1e6*Math.random())}`}const pa=1e12;class Qr{constructor(E){this.auth=E,this.counter=pa,this._widgets=new Map}render(E,I){const U=this.counter;return this._widgets.set(U,new An(E,this.auth.name,I||{})),this.counter++,U}reset(E){var I;const U=E||pa;null===(I=this._widgets.get(U))||void 0===I||I.delete(),this._widgets.delete(U)}getResponse(E){var I;return(null===(I=this._widgets.get(E||pa))||void 0===I?void 0:I.getResponse())||""}execute(E){var I=this;return(0,g.Z)(function*(){var U;return null===(U=I._widgets.get(E||pa))||void 0===U||U.execute(),""})()}}class An{constructor(E,I,U){this.params=U,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const de="string"==typeof E?document.getElementById(E):E;xe(de,"argument-error",{appName:I}),this.container=de,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function tc(F){const E=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let U=0;U<F;U++)E.push(I.charAt(Math.floor(Math.random()*I.length)));return E.join("")}(50);const{callback:E,"expired-callback":I}=this.params;if(E)try{E(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gr=jo("rcb"),Xc=new Gt(3e4,6e4);class bn{constructor(){var E;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(E=Fs().grecaptcha)||void 0===E||!E.render)}load(E,I=""){return xe(function Cl(F){return F.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(F)}(I),E,"argument-error"),this.shouldResolveImmediately(I)?Promise.resolve(Fs().grecaptcha):new Promise((U,de)=>{const Ae=Fs().setTimeout(()=>{de(Be(E,"network-request-failed"))},Xc.get());Fs()[gr]=()=>{Fs().clearTimeout(Ae),delete Fs()[gr];const on=Fs().grecaptcha;if(!on)return void de(Be(E,"internal-error"));const On=on.render;on.render=(pi,_r)=>{const Ts=On(pi,_r);return this.counter++,Ts},this.hostLanguage=I,U(on)},Qa(`https://www.google.com/recaptcha/api.js??${(0,i.xO)({onload:gr,render:"explicit",hl:I})}`).catch(()=>{clearTimeout(Ae),de(Be(E,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(E){var I;return!(null===(I=Fs().grecaptcha)||void 0===I||!I.render)&&(E===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zo{load(E){return(0,g.Z)(function*(){return new Qr(E)})()}clearedOneInstance(){}}const Na="recaptcha",Gc={theme:"light",type:"image"};class uc{constructor(E,I=Object.assign({},Gc),U){this.parameters=I,this.type=Na,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(U),this.isInvisible="invisible"===this.parameters.size,xe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const de="string"==typeof E?document.getElementById(E):E;xe(de,this.auth,"argument-error"),this.container=de,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zo:new bn,this.validateStartingState()}verify(){var E=this;return(0,g.Z)(function*(){E.assertNotDestroyed();const I=yield E.render(),U=E.getAssertedRecaptcha();return U.getResponse(I)||new Promise(Ae=>{const St=on=>{!on||(E.tokenChangeListeners.delete(St),Ae(on))};E.tokenChangeListeners.add(St),E.isInvisible&&U.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(E){return Promise.reject(E)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(E=>{throw this.renderPromise=null,E})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(E=>{this.container.removeChild(E)})}validateStartingState(){xe(!this.parameters.sitekey,this.auth,"argument-error"),xe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(E){return I=>{if(this.tokenChangeListeners.forEach(U=>U(I)),"function"==typeof E)E(I);else if("string"==typeof E){const U=Fs()[E];"function"==typeof U&&U(I)}}}assertNotDestroyed(){xe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var E=this;return(0,g.Z)(function*(){if(yield E.init(),!E.widgetId){let I=E.container;if(!E.isInvisible){const U=document.createElement("div");I.appendChild(U),I=U}E.widgetId=E.getAssertedRecaptcha().render(I,E.parameters)}return E.widgetId})()}init(){var E=this;return(0,g.Z)(function*(){xe(rn()&&!Qs(),E.auth,"internal-error"),yield function Vs(){let F=null;return new Promise(E=>{"complete"!==document.readyState?(F=()=>E(),window.addEventListener("load",F)):E()}).catch(E=>{throw F&&window.removeEventListener("load",F),E})}(),E.recaptcha=yield E._recaptchaLoader.load(E.auth,E.auth.languageCode||void 0);const I=yield function fa(F){return Ms.apply(this,arguments)}(E.auth);xe(I,E.auth,"internal-error"),E.parameters.sitekey=I})()}getAssertedRecaptcha(){return xe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hl{constructor(E,I){this.verificationId=E,this.onConfirmation=I}confirm(E){const I=ds._fromVerification(this.verificationId,E);return this.onConfirmation(I)}}function zl(F,E,I){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,g.Z)(function*(F,E,I){const U=In(F),de=yield xo(U,E,(0,i.m9)(I));return new hl(de,Ae=>ba(U,Ae))})).apply(this,arguments)}function Lr(F,E,I){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(F,E,I){const U=(0,i.m9)(F);yield Ws(!1,U,"phone");const de=yield xo(U.auth,E,(0,i.m9)(I));return new hl(de,Ae=>Ti(U,Ae))})).apply(this,arguments)}function Ja(F,E,I){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,g.Z)(function*(F,E,I){const U=(0,i.m9)(F),de=yield xo(U.auth,E,(0,i.m9)(I));return new hl(de,Ae=>lc(U,Ae))})).apply(this,arguments)}function xo(F,E,I){return fl.apply(this,arguments)}function fl(){return(fl=(0,g.Z)(function*(F,E,I){var U;const de=yield I.verify();try{let Ae;if(xe("string"==typeof de,F,"argument-error"),xe(I.type===Na,F,"argument-error"),Ae="string"==typeof E?{phoneNumber:E}:E,"session"in Ae){const St=Ae.session;if("phoneNumber"in Ae)return xe("enroll"===St.type,F,"internal-error"),(yield Gr(F,{idToken:St.credential,phoneEnrollmentInfo:{phoneNumber:Ae.phoneNumber,recaptchaToken:de}})).phoneSessionInfo.sessionInfo;{xe("signin"===St.type,F,"internal-error");const on=(null===(U=Ae.multiFactorHint)||void 0===U?void 0:U.uid)||Ae.multiFactorUid;return xe(on,F,"missing-multi-factor-info"),(yield ec(F,{mfaPendingCredential:St.credential,mfaEnrollmentId:on,phoneSignInInfo:{recaptchaToken:de}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:St}=yield Tt(F,{phoneNumber:Ae.phoneNumber,recaptchaToken:de});return St}}finally{I._reset()}})).apply(this,arguments)}function D(F,E){return N.apply(this,arguments)}function N(){return(N=(0,g.Z)(function*(F,E){yield So((0,i.m9)(F),E)})).apply(this,arguments)}let R=(()=>{class F{constructor(I){this.providerId=F.PROVIDER_ID,this.auth=In(I)}verifyPhoneNumber(I,U){return xo(this.auth,I,(0,i.m9)(U))}static credential(I,U){return ds._fromVerification(I,U)}static credentialFromResult(I){return F.credentialFromTaggedObject(I)}static credentialFromError(I){return F.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:U,temporaryProof:de}=I;return U&&de?ds._fromTokenResponse(U,de):null}}return F.PROVIDER_ID="phone",F.PHONE_SIGN_IN_METHOD="phone",F})();function H(F,E){return E?st(E):(xe(F._popupRedirectResolver,F,"argument-error"),F._popupRedirectResolver)}class te extends Ds{constructor(E){super("custom","custom"),this.params=E}_getIdTokenResponse(E){return mo(E,this._buildIdpRequest())}_linkToIdToken(E,I){return mo(E,this._buildIdpRequest(I))}_getReauthenticationResolver(E){return mo(E,this._buildIdpRequest())}_buildIdpRequest(E){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return E&&(I.idToken=E),I}}function me(F){return la(F.auth,new te(F),F.bypassAuthState)}function Pe(F){const{auth:E,user:I}=F;return xe(I,E,"internal-error"),xa(I,new te(F),F.bypassAuthState)}function Ze(F){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,g.Z)(function*(F){const{auth:E,user:I}=F;return xe(I,E,"internal-error"),So(I,new te(F),F.bypassAuthState)})).apply(this,arguments)}class Tn{constructor(E,I,U,de,Ae=!1){this.auth=E,this.resolver=U,this.user=de,this.bypassAuthState=Ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var E=this;return new Promise(function(){var I=(0,g.Z)(function*(U,de){E.pendingPromise={resolve:U,reject:de};try{E.eventManager=yield E.resolver._initialize(E.auth),yield E.onExecution(),E.eventManager.registerConsumer(E)}catch(Ae){E.reject(Ae)}});return function(U,de){return I.apply(this,arguments)}}())}onAuthEvent(E){var I=this;return(0,g.Z)(function*(){const{urlResponse:U,sessionId:de,postBody:Ae,tenantId:St,error:on,type:On}=E;if(on)return void I.reject(on);const pi={auth:I.auth,requestUri:U,sessionId:de,tenantId:St||void 0,postBody:Ae||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(On)(pi))}catch(_r){I.reject(_r)}})()}onError(E){this.reject(E)}getIdpTask(E){switch(E){case"signInViaPopup":case"signInViaRedirect":return me;case"linkViaPopup":case"linkViaRedirect":return Ze;case"reauthViaPopup":case"reauthViaRedirect":return Pe;default:qt(this.auth,"internal-error")}}resolve(E){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(E),this.unregisterAndCleanUp()}reject(E){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(E),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vi=new Gt(2e3,1e4);function jn(F,E,I){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,g.Z)(function*(F,E,I){const U=In(F);nt(F,E,Er);const de=H(U,I);return new Go(U,"signInViaPopup",E,de).executeNotNull()})).apply(this,arguments)}function os(F,E,I){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(F,E,I){const U=(0,i.m9)(F);nt(U.auth,E,Er);const de=H(U.auth,I);return new Go(U.auth,"reauthViaPopup",E,de,U).executeNotNull()})).apply(this,arguments)}function Xa(F,E,I){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(function*(F,E,I){const U=(0,i.m9)(F);nt(U.auth,E,Er);const de=H(U.auth,I);return new Go(U.auth,"linkViaPopup",E,de,U).executeNotNull()})).apply(this,arguments)}let Go=(()=>{class F extends Tn{constructor(I,U,de,Ae,St){super(I,U,Ae,St),this.provider=de,this.authWindow=null,this.pollId=null,F.currentPopupAction&&F.currentPopupAction.cancel(),F.currentPopupAction=this}executeNotNull(){var I=this;return(0,g.Z)(function*(){const U=yield I.execute();return xe(U,I.auth,"internal-error"),U})()}onExecution(){var I=this;return(0,g.Z)(function*(){pt(1===I.filter.length,"Popup operations only handle one event");const U=Rl();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],U),I.authWindow.associatedEvent=U,I.resolver._originValidation(I.auth).catch(de=>{I.reject(de)}),I.resolver._isIframeWebStorageSupported(I.auth,de=>{de||I.reject(Be(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,F.currentPopupAction=null}pollUserCancellation(){const I=()=>{var U,de;this.pollId=null!==(de=null===(U=this.authWindow)||void 0===U?void 0:U.window)&&void 0!==de&&de.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(I,Vi.get())};I()}}return F.currentPopupAction=null,F})();const qi=new Map;class nc extends Tn{constructor(E,I,U=!1){super(E,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,U),this.eventId=null}execute(){var E=()=>super.execute,I=this;return(0,g.Z)(function*(){let U=qi.get(I.auth._key());if(!U){try{const Ae=(yield function dc(F,E){return $o.apply(this,arguments)}(I.resolver,I.auth))?yield E().call(I):null;U=()=>Promise.resolve(Ae)}catch(de){U=()=>Promise.reject(de)}qi.set(I.auth._key(),U)}return I.bypassAuthState||qi.set(I.auth._key(),()=>Promise.resolve(null)),U()})()}onAuthEvent(E){var I=()=>super.onAuthEvent,U=this;return(0,g.Z)(function*(){if("signInViaRedirect"===E.type)return I().call(U,E);if("unknown"!==E.type){if(E.eventId){const de=yield U.auth._redirectUserForId(E.eventId);if(de)return U.user=de,I().call(U,E);U.resolve(null)}}else U.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function $o(){return($o=(0,g.Z)(function*(F,E){const I=Fa(E),U=ts(F);if(!(yield U._isAvailable()))return!1;const de="true"===(yield U._get(I));return yield U._remove(I),de})).apply(this,arguments)}function $l(F,E){return co.apply(this,arguments)}function co(){return(co=(0,g.Z)(function*(F,E){return ts(F)._set(Fa(E),"true")})).apply(this,arguments)}function yc(){qi.clear()}function ma(F,E){qi.set(F._key(),E)}function ts(F){return st(F._redirectPersistence)}function Fa(F){return Xi("pendingRedirect",F.config.apiKey,F.name)}function Sc(F,E,I){return function uo(F,E,I){return Pl.apply(this,arguments)}(F,E,I)}function Pl(){return(Pl=(0,g.Z)(function*(F,E,I){const U=In(F);nt(F,E,Er);const de=H(U,I);return yield $l(de,U),de._openRedirect(U,E,"signInViaRedirect")})).apply(this,arguments)}function q(F,E,I){return function ne(F,E,I){return he.apply(this,arguments)}(F,E,I)}function he(){return(he=(0,g.Z)(function*(F,E,I){const U=(0,i.m9)(F);nt(U.auth,E,Er);const de=H(U.auth,I);yield $l(de,U.auth);const Ae=yield ki(U);return de._openRedirect(U.auth,E,"reauthViaRedirect",Ae)})).apply(this,arguments)}function je(F,E,I){return function gt(F,E,I){return At.apply(this,arguments)}(F,E,I)}function At(){return(At=(0,g.Z)(function*(F,E,I){const U=(0,i.m9)(F);nt(U.auth,E,Er);const de=H(U.auth,I);yield Ws(!1,U,E.providerId),yield $l(de,U.auth);const Ae=yield ki(U);return de._openRedirect(U.auth,E,"linkViaRedirect",Ae)})).apply(this,arguments)}function cn(F,E){return yn.apply(this,arguments)}function yn(){return(yn=(0,g.Z)(function*(F,E){return yield In(F)._initializationPromise,Xn(F,E,!1)})).apply(this,arguments)}function Xn(F,E){return ci.apply(this,arguments)}function ci(){return(ci=(0,g.Z)(function*(F,E,I=!1){const U=In(F),de=H(U,E),St=yield new nc(U,de,I).execute();return St&&!I&&(delete St.user._redirectEventId,yield U._persistUserIfCurrent(St.user),yield U._setRedirectUser(null,E)),St})).apply(this,arguments)}function ki(F){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,g.Z)(function*(F){const E=Rl(`${F.uid}:::`);return F._redirectEventId=E,yield F.auth._setRedirectUser(F),yield F.auth._persistUserIfCurrent(F),E})).apply(this,arguments)}class Js{constructor(E){this.auth=E,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(E){this.consumers.add(E),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,E)&&(this.sendToConsumer(this.queuedRedirectEvent,E),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(E){this.consumers.delete(E)}onEvent(E){if(this.hasEventBeenHandled(E))return!1;let I=!1;return this.consumers.forEach(U=>{this.isEventForConsumer(E,U)&&(I=!0,this.sendToConsumer(E,U),this.saveEventToCache(E))}),this.hasHandledPotentialRedirect||!function El(F){switch(F.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ea(F);default:return!1}}(E)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=E,I=!0)),I}sendToConsumer(E,I){var U;if(E.error&&!Ea(E)){const de=(null===(U=E.error.code)||void 0===U?void 0:U.split("auth/")[1])||"internal-error";I.onError(Be(this.auth,de))}else I.onAuthEvent(E)}isEventForConsumer(E,I){const U=null===I.eventId||!!E.eventId&&E.eventId===I.eventId;return I.filter.includes(E.type)&&U}hasEventBeenHandled(E){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xs(E))}saveEventToCache(E){this.cachedEventUids.add(Xs(E)),this.lastProcessedEventTime=Date.now()}}function Xs(F){return[F.type,F.eventId,F.sessionId,F.tenantId].filter(E=>E).join("-")}function Ea({type:F,error:E}){return"unknown"===F&&"auth/no-auth-event"===E?.code}function el(F){return La.apply(this,arguments)}function La(){return(La=(0,g.Z)(function*(F,E={}){return vt(F,"GET","/v1/projects",E)})).apply(this,arguments)}const Tl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tl=/^https?/;function Pc(){return(Pc=(0,g.Z)(function*(F){if(F.config.emulator)return;const{authorizedDomains:E}=yield el(F);for(const I of E)try{if(cd(I))return}catch{}qt(F,"unauthorized-domain")})).apply(this,arguments)}function cd(F){const E=Qt(),{protocol:I,hostname:U}=new URL(E);if(F.startsWith("chrome-extension://")){const St=new URL(F);return""===St.hostname&&""===U?"chrome-extension:"===I&&F.replace("chrome-extension://","")===E.replace("chrome-extension://",""):"chrome-extension:"===I&&St.hostname===U}if(!tl.test(I))return!1;if(Tl.test(F))return U===F;const de=F.replace(/\./g,"\\.");return new RegExp("^(.+\\."+de+"|"+de+")$","i").test(U)}const du=new Gt(3e4,6e4);function $c(){const F=Fs().___jsl;if(F?.H)for(const E of Object.keys(F.H))if(F.H[E].r=F.H[E].r||[],F.H[E].L=F.H[E].L||[],F.H[E].r=[...F.H[E].L],F.CP)for(let I=0;I<F.CP.length;I++)F.CP[I]=null}let Il=null;function _s(F){return Il=Il||function Ko(F){return new Promise((E,I)=>{var U,de,Ae;function St(){$c(),gapi.load("gapi.iframes",{callback:()=>{E(gapi.iframes.getContext())},ontimeout:()=>{$c(),I(Be(F,"network-request-failed"))},timeout:du.get()})}if(null!==(de=null===(U=Fs().gapi)||void 0===U?void 0:U.iframes)&&void 0!==de&&de.Iframe)E(gapi.iframes.getContext());else{if(null===(Ae=Fs().gapi)||void 0===Ae||!Ae.load){const on=jo("iframefcb");return Fs()[on]=()=>{gapi.load?St():I(Be(F,"network-request-failed"))},Qa(`https://apis.google.com/js/api.js?onload=${on}`).catch(On=>I(On))}St()}}).catch(E=>{throw Il=null,E})}(F),Il}const Kc=new Gt(5e3,15e3),K={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ve=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Je(F){const E=F.config;xe(E.authDomain,F,"auth-domain-config-required");const I=E.emulator?di(E,"emulator/auth/iframe"):`https://${F.config.authDomain}/__/auth/iframe`,U={apiKey:E.apiKey,appName:F.name,v:se.SDK_VERSION},de=ve.get(F.config.apiHost);de&&(U.eid=de);const Ae=F._getFrameworks();return Ae.length&&(U.fw=Ae.join(",")),`${I}?${(0,i.xO)(U).slice(1)}`}function vn(){return vn=(0,g.Z)(function*(F){const E=yield _s(F),I=Fs().gapi;return xe(I,F,"internal-error"),E.open({where:document.body,url:Je(F),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K,dontclear:!0},U=>new Promise(function(){var de=(0,g.Z)(function*(Ae,St){yield U.restyle({setHideOnLeave:!1});const on=Be(F,"network-request-failed"),On=Fs().setTimeout(()=>{St(on)},Kc.get());function pi(){Fs().clearTimeout(On),Ae(U)}U.ping(pi).then(pi,()=>{St(on)})});return function(Ae,St){return de.apply(this,arguments)}}()))}),vn.apply(this,arguments)}const bi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ta{constructor(E){this.window=E,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Co(F,E,I,U,de,Ae){xe(F.config.authDomain,F,"auth-domain-config-required"),xe(F.config.apiKey,F,"invalid-api-key");const St={apiKey:F.config.apiKey,appName:F.name,authType:I,redirectUrl:U,v:se.SDK_VERSION,eventId:de};if(E instanceof Er){E.setDefaultLanguage(F.languageCode),St.providerId=E.providerId||"",(0,i.xb)(E.getCustomParameters())||(St.customParameters=JSON.stringify(E.getCustomParameters()));for(const[On,pi]of Object.entries(Ae||{}))St[On]=pi}if(E instanceof ro){const On=E.getScopes().filter(pi=>""!==pi);On.length>0&&(St.scopes=On.join(","))}F.tenantId&&(St.tid=F.tenantId);const on=St;for(const On of Object.keys(on))void 0===on[On]&&delete on[On];return`${function aa({config:F}){return F.emulator?di(F,"emulator/auth/handler"):`https://${F.authDomain}/__/auth/handler`}(F)}?${(0,i.xO)(on).slice(1)}`}const eu="webStorageSupport",tu=class hu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ya,this._completeRedirectFn=Xn,this._overrideRedirectResult=ma}_openPopup(E,I,U,de){var Ae=this;return(0,g.Z)(function*(){var St;pt(null===(St=Ae.eventManagers[E._key()])||void 0===St?void 0:St.manager,"_initialize() not called before _openPopup()");const on=Co(E,I,U,Qt(),de);return function Va(F,E,I,U=500,de=600){const Ae=Math.max((window.screen.availHeight-de)/2,0).toString(),St=Math.max((window.screen.availWidth-U)/2,0).toString();let on="";const On=Object.assign(Object.assign({},bi),{width:U.toString(),height:de.toString(),top:Ae,left:St}),pi=(0,i.z$)().toLowerCase();I&&(on=zt(pi)?"_blank":I),We(pi)&&(E=E||"http://localhost",On.scrollbars="yes");const _r=Object.entries(On).reduce((Bl,[Nc,vc])=>`${Bl}${Nc}=${vc},`,"");if(function ht(F=(0,i.z$)()){var E;return Ve(F)&&!(null===(E=window.navigator)||void 0===E||!E.standalone)}(pi)&&"_self"!==on)return function Nl(F,E){const I=document.createElement("a");I.href=F,I.target=E;const U=document.createEvent("MouseEvent");U.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(U)}(E||"",on),new Ta(null);const Ts=window.open(E||"",on,_r);xe(Ts,F,"popup-blocked");try{Ts.focus()}catch{}return new Ta(Ts)}(E,on,Rl())})()}_openRedirect(E,I,U,de){var Ae=this;return(0,g.Z)(function*(){return yield Ae._originValidation(E),function bl(F){Fs().location.href=F}(Co(E,I,U,Qt(),de)),new Promise(()=>{})})()}_initialize(E){const I=E._key();if(this.eventManagers[I]){const{manager:de,promise:Ae}=this.eventManagers[I];return de?Promise.resolve(de):(pt(Ae,"If manager is not set, promise should be"),Ae)}const U=this.initAndGetManager(E);return this.eventManagers[I]={promise:U},U.catch(()=>{delete this.eventManagers[I]}),U}initAndGetManager(E){var I=this;return(0,g.Z)(function*(){const U=yield function Ot(F){return vn.apply(this,arguments)}(E),de=new Js(E);return U.register("authEvent",Ae=>(xe(Ae?.authEvent,E,"invalid-auth-event"),{status:de.onEvent(Ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[E._key()]={manager:de},I.iframes[E._key()]=U,de})()}_isIframeWebStorageSupported(E,I){this.iframes[E._key()].send(eu,{type:eu},de=>{var Ae;const St=null===(Ae=de?.[0])||void 0===Ae?void 0:Ae[eu];void 0!==St&&I(!!St),qt(E,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(E){const I=E._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function hc(F){return Pc.apply(this,arguments)}(E)),this.originValidationPromises[I]}get _shouldInitProactively(){return En()||tt()||Ve()}};class Dc extends class Ll{constructor(E){this.factorId=E}_process(E,I,U){switch(I.type){case"enroll":return this._finalizeEnroll(E,I.credential,U);case"signin":return this._finalizeSignIn(E,I.credential);default:return ee("unexpected MultiFactorSessionType")}}}{constructor(E){super("phone"),this.credential=E}static _fromCredential(E){return new Dc(E)}_finalizeEnroll(E,I,U){return function Ka(F,E){return vt(F,"POST","/v2/accounts/mfaEnrollment:finalize",He(F,E))}(E,{idToken:I,displayName:U,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(E,I){return function dl(F,E){return vt(F,"POST","/v2/accounts/mfaSignIn:finalize",He(F,E))}(E,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vl=(()=>{class F{constructor(){}static assertion(I){return Dc._fromCredential(I)}}return F.FACTOR_ID="phone",F})();var ga="@firebase/auth";class Wu{constructor(E){this.auth=E,this.internalListeners=new Map}getUid(){var E;return this.assertAuthConfigured(),(null===(E=this.auth.currentUser)||void 0===E?void 0:E.uid)||null}getToken(E){var I=this;return(0,g.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(E)}:null})()}addAuthTokenListener(E){if(this.assertAuthConfigured(),this.internalListeners.has(E))return;const I=this.auth.onIdTokenChanged(U=>{var de;E((null===(de=U)||void 0===de?void 0:de.stsTokenManager.accessToken)||null)});this.internalListeners.set(E,I),this.updateProactiveRefresh()}removeAuthTokenListener(E){this.assertAuthConfigured();const I=this.internalListeners.get(E);!I||(this.internalListeners.delete(E),I(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function xc(F){(0,se._registerComponent)(new Ee.wA("auth",(E,{options:I})=>{const U=E.getProvider("app").getImmediate(),de=E.getProvider("heartbeat"),{apiKey:Ae,authDomain:St}=U.options;return((on,On)=>{xe(Ae&&!Ae.includes(":"),"invalid-api-key",{appName:on.name}),xe(!St?.includes(":"),"argument-error",{appName:on.name});const pi={apiKey:Ae,authDomain:St,clientPlatform:F,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Si(F)},_r=new wr(on,On,pi);return function yt(F,E){const I=E?.persistence||[],U=(Array.isArray(I)?I:[I]).map(st);E?.errorMap&&F._updateErrorMap(E.errorMap),F._initializeWithPersistence(U,E?.popupRedirectResolver)}(_r,I),_r})(U,de)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((E,I,U)=>{E.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new Ee.wA("auth-internal",E=>{const I=In(E.getProvider("auth").getImmediate());return new Wu(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(ga,"0.20.5",function Wc(F){switch(F){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(F)),(0,se.registerVersion)(ga,"0.20.5","esm2017")}("Browser")},2090:(Sn,Ct,Q)=>{Q.d(Ct,{$s:()=>or,BH:()=>kt,DV:()=>vt,Dv:()=>Jr,G6:()=>xe,GJ:()=>Ut,L:()=>Me,LL:()=>Qt,Mn:()=>nt,Pz:()=>Pn,Sg:()=>dt,UG:()=>Dt,UI:()=>Hn,US:()=>Ee,Wj:()=>br,Yr:()=>Xe,ZB:()=>Se,ZR:()=>yt,b$:()=>qt,cI:()=>kn,d:()=>Be,dS:()=>Kn,eu:()=>pt,g5:()=>se,gK:()=>sr,gQ:()=>Ui,h$:()=>Oe,hl:()=>ee,hu:()=>i,jU:()=>bt,lb:()=>Ji,m9:()=>qn,ne:()=>yi,p$:()=>Re,pd:()=>Ki,r3:()=>He,ru:()=>ot,tV:()=>rt,uI:()=>Wt,ug:()=>Gn,vZ:()=>Wi,w1:()=>we,w9:()=>xt,xO:()=>Zi,xb:()=>un,z$:()=>wt,zI:()=>Ue,zd:()=>oi});const i=function(ct,qe){if(!ct)throw se(qe)},se=function(ct){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ct)},ge=function(ct){const qe=[];let ze=0;for(let it=0;it<ct.length;it++){let Ye=ct.charCodeAt(it);Ye<128?qe[ze++]=Ye:Ye<2048?(qe[ze++]=Ye>>6|192,qe[ze++]=63&Ye|128):55296==(64512&Ye)&&it+1<ct.length&&56320==(64512&ct.charCodeAt(it+1))?(Ye=65536+((1023&Ye)<<10)+(1023&ct.charCodeAt(++it)),qe[ze++]=Ye>>18|240,qe[ze++]=Ye>>12&63|128,qe[ze++]=Ye>>6&63|128,qe[ze++]=63&Ye|128):(qe[ze++]=Ye>>12|224,qe[ze++]=Ye>>6&63|128,qe[ze++]=63&Ye|128)}return qe},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ct,qe){if(!Array.isArray(ct))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ze=qe?this.byteToCharMapWebSafe_:this.byteToCharMap_,it=[];for(let Ye=0;Ye<ct.length;Ye+=3){const Zt=ct[Ye],mn=Ye+1<ct.length,Rn=mn?ct[Ye+1]:0,zi=Ye+2<ct.length,Xi=zi?ct[Ye+2]:0;let We=(15&Rn)<<2|Xi>>6,tt=63&Xi;zi||(tt=64,mn||(We=64)),it.push(ze[Zt>>2],ze[(3&Zt)<<4|Rn>>4],ze[We],ze[tt])}return it.join("")},encodeString(ct,qe){return this.HAS_NATIVE_SUPPORT&&!qe?btoa(ct):this.encodeByteArray(ge(ct),qe)},decodeString(ct,qe){return this.HAS_NATIVE_SUPPORT&&!qe?atob(ct):function(ct){const qe=[];let ze=0,it=0;for(;ze<ct.length;){const Ye=ct[ze++];if(Ye<128)qe[it++]=String.fromCharCode(Ye);else if(Ye>191&&Ye<224){const Zt=ct[ze++];qe[it++]=String.fromCharCode((31&Ye)<<6|63&Zt)}else if(Ye>239&&Ye<365){const zi=((7&Ye)<<18|(63&ct[ze++])<<12|(63&ct[ze++])<<6|63&ct[ze++])-65536;qe[it++]=String.fromCharCode(55296+(zi>>10)),qe[it++]=String.fromCharCode(56320+(1023&zi))}else{const Zt=ct[ze++],mn=ct[ze++];qe[it++]=String.fromCharCode((15&Ye)<<12|(63&Zt)<<6|63&mn)}}return qe.join("")}(this.decodeStringToByteArray(ct,qe))},decodeStringToByteArray(ct,qe){this.init_();const ze=qe?this.charToByteMapWebSafe_:this.charToByteMap_,it=[];for(let Ye=0;Ye<ct.length;){const Zt=ze[ct.charAt(Ye++)],Rn=Ye<ct.length?ze[ct.charAt(Ye)]:0;++Ye;const Xi=Ye<ct.length?ze[ct.charAt(Ye)]:64;++Ye;const _t=Ye<ct.length?ze[ct.charAt(Ye)]:64;if(++Ye,null==Zt||null==Rn||null==Xi||null==_t)throw Error();it.push(Zt<<2|Rn>>4),64!==Xi&&(it.push(Rn<<4&240|Xi>>2),64!==_t&&it.push(Xi<<6&192|_t))}return it},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ct=0;ct<this.ENCODED_VALS.length;ct++)this.byteToCharMap_[ct]=this.ENCODED_VALS.charAt(ct),this.charToByteMap_[this.byteToCharMap_[ct]]=ct,this.byteToCharMapWebSafe_[ct]=this.ENCODED_VALS_WEBSAFE.charAt(ct),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ct]]=ct,ct>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ct)]=ct,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ct)]=ct)}}},Oe=function(ct){const qe=ge(ct);return Ee.encodeByteArray(qe,!0)},Me=function(ct){return Oe(ct).replace(/\./g,"")},rt=function(ct){try{return Ee.decodeString(ct,!0)}catch(qe){console.error("base64Decode failed: ",qe)}return null};function Re(ct){return Se(void 0,ct)}function Se(ct,qe){if(!(qe instanceof Object))return qe;switch(qe.constructor){case Date:return new Date(qe.getTime());case Object:void 0===ct&&(ct={});break;case Array:ct=[];break;default:return qe}for(const ze in qe)!qe.hasOwnProperty(ze)||!Ge(ze)||(ct[ze]=Se(ct[ze],qe[ze]));return ct}function Ge(ct){return"__proto__"!==ct}class kt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((qe,ze)=>{this.resolve=qe,this.reject=ze})}wrapCallback(qe){return(ze,it)=>{ze?this.reject(ze):this.resolve(it),"function"==typeof qe&&(this.promise.catch(()=>{}),1===qe.length?qe(ze):qe(ze,it))}}}function dt(ct,qe){if(ct.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const it=qe||"demo-project",Ye=ct.iat||0,Zt=ct.sub||ct.user_id;if(!Zt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mn=Object.assign({iss:`https://securetoken.google.com/${it}`,aud:it,iat:Ye,exp:Ye+3600,auth_time:Ye,sub:Zt,user_id:Zt,firebase:{sign_in_provider:"custom",identities:{}}},ct);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(mn)),""].join(".")}function wt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Wt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function Dt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function bt(){return"object"==typeof self&&self.self===self}function ot(){const ct="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ct&&void 0!==ct.id}function qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Be(){return wt().indexOf("Electron/")>=0}function we(){const ct=wt();return ct.indexOf("MSIE ")>=0||ct.indexOf("Trident/")>=0}function nt(){return wt().indexOf("MSAppHost/")>=0}function Xe(){return!1}function xe(){return!Dt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){return"object"==typeof indexedDB}function pt(){return new Promise((ct,qe)=>{try{let ze=!0;const it="validate-browser-context-for-indexeddb-analytics-module",Ye=self.indexedDB.open(it);Ye.onsuccess=()=>{Ye.result.close(),ze||self.indexedDB.deleteDatabase(it),ct(!0)},Ye.onupgradeneeded=()=>{ze=!1},Ye.onerror=()=>{var Zt;qe((null===(Zt=Ye.error)||void 0===Zt?void 0:Zt.message)||"")}}catch(ze){qe(ze)}})}function Ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class yt extends Error{constructor(qe,ze,it){super(ze),this.code=qe,this.customData=it,this.name="FirebaseError",Object.setPrototypeOf(this,yt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}}class Qt{constructor(qe,ze,it){this.service=qe,this.serviceName=ze,this.errors=it}create(qe,...ze){const it=ze[0]||{},Ye=`${this.service}/${qe}`,Zt=this.errors[qe],mn=Zt?function rn(ct,qe){return ct.replace(gn,(ze,it)=>{const Ye=qe[it];return null!=Ye?String(Ye):`<${it}?>`})}(Zt,it):"Error";return new yt(Ye,`${this.serviceName}: ${mn} (${Ye}).`,it)}}const gn=/\{\$([^}]+)}/g;function kn(ct){return JSON.parse(ct)}function Pn(ct){return JSON.stringify(ct)}const Gt=function(ct){let qe={},ze={},it={},Ye="";try{const Zt=ct.split(".");qe=kn(rt(Zt[0])||""),ze=kn(rt(Zt[1])||""),Ye=Zt[2],it=ze.d||{},delete ze.d}catch{}return{header:qe,claims:ze,data:it,signature:Ye}},xt=function(ct){const ze=Gt(ct).claims;return!!ze&&"object"==typeof ze&&ze.hasOwnProperty("iat")},Ut=function(ct){const qe=Gt(ct).claims;return"object"==typeof qe&&!0===qe.admin};function He(ct,qe){return Object.prototype.hasOwnProperty.call(ct,qe)}function vt(ct,qe){if(Object.prototype.hasOwnProperty.call(ct,qe))return ct[qe]}function un(ct){for(const qe in ct)if(Object.prototype.hasOwnProperty.call(ct,qe))return!1;return!0}function Hn(ct,qe,ze){const it={};for(const Ye in ct)Object.prototype.hasOwnProperty.call(ct,Ye)&&(it[Ye]=qe.call(ze,ct[Ye],Ye,ct));return it}function Wi(ct,qe){if(ct===qe)return!0;const ze=Object.keys(ct),it=Object.keys(qe);for(const Ye of ze){if(!it.includes(Ye))return!1;const Zt=ct[Ye],mn=qe[Ye];if(Ci(Zt)&&Ci(mn)){if(!Wi(Zt,mn))return!1}else if(Zt!==mn)return!1}for(const Ye of it)if(!ze.includes(Ye))return!1;return!0}function Ci(ct){return null!==ct&&"object"==typeof ct}function Zi(ct){const qe=[];for(const[ze,it]of Object.entries(ct))Array.isArray(it)?it.forEach(Ye=>{qe.push(encodeURIComponent(ze)+"="+encodeURIComponent(Ye))}):qe.push(encodeURIComponent(ze)+"="+encodeURIComponent(it));return qe.length?"&"+qe.join("&"):""}function oi(ct){const qe={};return ct.replace(/^\?/,"").split("&").forEach(it=>{if(it){const[Ye,Zt]=it.split("=");qe[decodeURIComponent(Ye)]=decodeURIComponent(Zt)}}),qe}function Ki(ct){const qe=ct.indexOf("?");if(!qe)return"";const ze=ct.indexOf("#",qe);return ct.substring(qe,ze>0?ze:void 0)}class Ui{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let qe=1;qe<this.blockSize;++qe)this.pad_[qe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(qe,ze){ze||(ze=0);const it=this.W_;if("string"==typeof qe)for(let _t=0;_t<16;_t++)it[_t]=qe.charCodeAt(ze)<<24|qe.charCodeAt(ze+1)<<16|qe.charCodeAt(ze+2)<<8|qe.charCodeAt(ze+3),ze+=4;else for(let _t=0;_t<16;_t++)it[_t]=qe[ze]<<24|qe[ze+1]<<16|qe[ze+2]<<8|qe[ze+3],ze+=4;for(let _t=16;_t<80;_t++){const We=it[_t-3]^it[_t-8]^it[_t-14]^it[_t-16];it[_t]=4294967295&(We<<1|We>>>31)}let Xi,Hr,Ye=this.chain_[0],Zt=this.chain_[1],mn=this.chain_[2],Rn=this.chain_[3],zi=this.chain_[4];for(let _t=0;_t<80;_t++){_t<40?_t<20?(Xi=Rn^Zt&(mn^Rn),Hr=1518500249):(Xi=Zt^mn^Rn,Hr=1859775393):_t<60?(Xi=Zt&mn|Rn&(Zt|mn),Hr=2400959708):(Xi=Zt^mn^Rn,Hr=3395469782);const We=(Ye<<5|Ye>>>27)+Xi+zi+Hr+it[_t]&4294967295;zi=Rn,Rn=mn,mn=4294967295&(Zt<<30|Zt>>>2),Zt=Ye,Ye=We}this.chain_[0]=this.chain_[0]+Ye&4294967295,this.chain_[1]=this.chain_[1]+Zt&4294967295,this.chain_[2]=this.chain_[2]+mn&4294967295,this.chain_[3]=this.chain_[3]+Rn&4294967295,this.chain_[4]=this.chain_[4]+zi&4294967295}update(qe,ze){if(null==qe)return;void 0===ze&&(ze=qe.length);const it=ze-this.blockSize;let Ye=0;const Zt=this.buf_;let mn=this.inbuf_;for(;Ye<ze;){if(0===mn)for(;Ye<=it;)this.compress_(qe,Ye),Ye+=this.blockSize;if("string"==typeof qe){for(;Ye<ze;)if(Zt[mn]=qe.charCodeAt(Ye),++mn,++Ye,mn===this.blockSize){this.compress_(Zt),mn=0;break}}else for(;Ye<ze;)if(Zt[mn]=qe[Ye],++mn,++Ye,mn===this.blockSize){this.compress_(Zt),mn=0;break}}this.inbuf_=mn,this.total_+=ze}digest(){const qe=[];let ze=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ye=this.blockSize-1;Ye>=56;Ye--)this.buf_[Ye]=255&ze,ze/=256;this.compress_(this.buf_);let it=0;for(let Ye=0;Ye<5;Ye++)for(let Zt=24;Zt>=0;Zt-=8)qe[it]=this.chain_[Ye]>>Zt&255,++it;return qe}}function yi(ct,qe){const ze=new Jt(ct,qe);return ze.subscribe.bind(ze)}class Jt{constructor(qe,ze){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ze,this.task.then(()=>{qe(this)}).catch(it=>{this.error(it)})}next(qe){this.forEachObserver(ze=>{ze.next(qe)})}error(qe){this.forEachObserver(ze=>{ze.error(qe)}),this.close(qe)}complete(){this.forEachObserver(qe=>{qe.complete()}),this.close()}subscribe(qe,ze,it){let Ye;if(void 0===qe&&void 0===ze&&void 0===it)throw new Error("Missing Observer.");Ye=function Hi(ct,qe){if("object"!=typeof ct||null===ct)return!1;for(const ze of qe)if(ze in ct&&"function"==typeof ct[ze])return!0;return!1}(qe,["next","error","complete"])?qe:{next:qe,error:ze,complete:it},void 0===Ye.next&&(Ye.next=Qi),void 0===Ye.error&&(Ye.error=Qi),void 0===Ye.complete&&(Ye.complete=Qi);const Zt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ye.error(this.finalError):Ye.complete()}catch{}}),this.observers.push(Ye),Zt}unsubscribeOne(qe){void 0===this.observers||void 0===this.observers[qe]||(delete this.observers[qe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(qe){if(!this.finalized)for(let ze=0;ze<this.observers.length;ze++)this.sendOne(ze,qe)}sendOne(qe,ze){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[qe])try{ze(this.observers[qe])}catch(it){typeof console<"u"&&console.error&&console.error(it)}})}close(qe){this.finalized||(this.finalized=!0,void 0!==qe&&(this.finalError=qe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qi(){}const Jr=function(ct,qe,ze,it){let Ye;if(it<qe?Ye="at least "+qe:it>ze&&(Ye=0===ze?"none":"no more than "+ze),Ye)throw new Error(ct+" failed: Was called with "+it+(1===it?" argument.":" arguments.")+" Expects "+Ye+".")};function sr(ct,qe){return`${ct} failed: ${qe} argument `}function br(ct,qe,ze,it){if((!it||ze)&&"function"!=typeof ze)throw new Error(sr(ct,qe)+"must be a valid function.")}function Ji(ct,qe,ze,it){if((!it||ze)&&("object"!=typeof ze||null===ze))throw new Error(sr(ct,qe)+"must be a valid context object.")}const Kn=function(ct){const qe=[];let ze=0;for(let it=0;it<ct.length;it++){let Ye=ct.charCodeAt(it);if(Ye>=55296&&Ye<=56319){const Zt=Ye-55296;it++,i(it<ct.length,"Surrogate pair missing trail surrogate."),Ye=65536+(Zt<<10)+(ct.charCodeAt(it)-56320)}Ye<128?qe[ze++]=Ye:Ye<2048?(qe[ze++]=Ye>>6|192,qe[ze++]=63&Ye|128):Ye<65536?(qe[ze++]=Ye>>12|224,qe[ze++]=Ye>>6&63|128,qe[ze++]=63&Ye|128):(qe[ze++]=Ye>>18|240,qe[ze++]=Ye>>12&63|128,qe[ze++]=Ye>>6&63|128,qe[ze++]=63&Ye|128)}return qe},Gn=function(ct){let qe=0;for(let ze=0;ze<ct.length;ze++){const it=ct.charCodeAt(ze);it<128?qe++:it<2048?qe+=2:it>=55296&&it<=56319?(qe+=4,ze++):qe+=3}return qe};function or(ct,qe=1e3,ze=2){const it=qe*Math.pow(ze,ct),Ye=Math.round(.5*it*(Math.random()-.5)*2);return Math.min(144e5,it+Ye)}function qn(ct){return ct&&ct._delegate?ct._delegate:ct}},4058:(Sn,Ct,Q)=>{Q.r(Ct),Q.d(Ct,{ComponentsModule:()=>vu});var g=Q(6895),i=Q(4650),se=Q(7340);let ge=(()=>{class y{static addClass(s,u){s.classList?s.classList.add(u):s.className+=" "+u}static addMultipleClasses(s,u){if(s.classList){let b=u.trim().split(" ");for(let x=0;x<b.length;x++)s.classList.add(b[x])}else{let b=u.split(" ");for(let x=0;x<b.length;x++)s.className+=" "+b[x]}}static removeClass(s,u){s.classList?s.classList.remove(u):s.className=s.className.replace(new RegExp("(^|\\b)"+u.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(s,u){return s.classList?s.classList.contains(u):new RegExp("(^| )"+u+"( |$)","gi").test(s.className)}static siblings(s){return Array.prototype.filter.call(s.parentNode.children,function(u){return u!==s})}static find(s,u){return Array.from(s.querySelectorAll(u))}static findSingle(s,u){return s?s.querySelector(u):null}static index(s){let u=s.parentNode.childNodes,b=0;for(var x=0;x<u.length;x++){if(u[x]==s)return b;1==u[x].nodeType&&b++}return-1}static indexWithinGroup(s,u){let b=s.parentNode?s.parentNode.childNodes:[],x=0;for(var Ce=0;Ce<b.length;Ce++){if(b[Ce]==s)return x;b[Ce].attributes&&b[Ce].attributes[u]&&1==b[Ce].nodeType&&x++}return-1}static relativePosition(s,u){let b=s.offsetParent?{width:s.offsetWidth,height:s.offsetHeight}:this.getHiddenElementDimensions(s);const x=u.offsetHeight,Ce=u.getBoundingClientRect(),et=this.getViewport();let Mt,fn;Ce.top+x+b.height>et.height?(Mt=-1*b.height,s.style.transformOrigin="bottom",Ce.top+Mt<0&&(Mt=-1*Ce.top)):(Mt=x,s.style.transformOrigin="top"),fn=b.width>et.width?-1*Ce.left:Ce.left+b.width>et.width?-1*(Ce.left+b.width-et.width):0,s.style.top=Mt+"px",s.style.left=fn+"px"}static absolutePosition(s,u){let Pi,ys,b=s.offsetParent?{width:s.offsetWidth,height:s.offsetHeight}:this.getHiddenElementDimensions(s),x=b.height,Ce=b.width,et=u.offsetHeight,Mt=u.offsetWidth,fn=u.getBoundingClientRect(),wn=this.getWindowScrollTop(),wi=this.getWindowScrollLeft(),hr=this.getViewport();fn.top+et+x>hr.height?(Pi=fn.top+wn-x,s.style.transformOrigin="bottom",Pi<0&&(Pi=wn)):(Pi=et+fn.top+wn,s.style.transformOrigin="top"),ys=fn.left+Ce>hr.width?Math.max(0,fn.left+wi+Mt-Ce):fn.left+wi,s.style.top=Pi+"px",s.style.left=ys+"px"}static getParents(s,u=[]){return null===s.parentNode?u:this.getParents(s.parentNode,u.concat([s.parentNode]))}static getScrollableParents(s){let u=[];if(s){let b=this.getParents(s);const x=/(auto|scroll)/,Ce=et=>{let Mt=window.getComputedStyle(et,null);return x.test(Mt.getPropertyValue("overflow"))||x.test(Mt.getPropertyValue("overflowX"))||x.test(Mt.getPropertyValue("overflowY"))};for(let et of b){let Mt=1===et.nodeType&&et.dataset.scrollselectors;if(Mt){let fn=Mt.split(",");for(let wn of fn){let wi=this.findSingle(et,wn);wi&&Ce(wi)&&u.push(wi)}}9!==et.nodeType&&Ce(et)&&u.push(et)}}return u}static getHiddenElementOuterHeight(s){s.style.visibility="hidden",s.style.display="block";let u=s.offsetHeight;return s.style.display="none",s.style.visibility="visible",u}static getHiddenElementOuterWidth(s){s.style.visibility="hidden",s.style.display="block";let u=s.offsetWidth;return s.style.display="none",s.style.visibility="visible",u}static getHiddenElementDimensions(s){let u={};return s.style.visibility="hidden",s.style.display="block",u.width=s.offsetWidth,u.height=s.offsetHeight,s.style.display="none",s.style.visibility="visible",u}static scrollInView(s,u){let b=getComputedStyle(s).getPropertyValue("borderTopWidth"),x=b?parseFloat(b):0,Ce=getComputedStyle(s).getPropertyValue("paddingTop"),et=Ce?parseFloat(Ce):0,Mt=s.getBoundingClientRect(),wn=u.getBoundingClientRect().top+document.body.scrollTop-(Mt.top+document.body.scrollTop)-x-et,wi=s.scrollTop,hr=s.clientHeight,Pi=this.getOuterHeight(u);wn<0?s.scrollTop=wi+wn:wn+Pi>hr&&(s.scrollTop=wi+wn-hr+Pi)}static fadeIn(s,u){s.style.opacity=0;let b=+new Date,x=0,Ce=function(){x=+s.style.opacity.replace(",",".")+((new Date).getTime()-b)/u,s.style.opacity=x,b=+new Date,+x<1&&(window.requestAnimationFrame&&requestAnimationFrame(Ce)||setTimeout(Ce,16))};Ce()}static fadeOut(s,u){var b=1,et=50/u;let Mt=setInterval(()=>{(b-=et)<=0&&(b=0,clearInterval(Mt)),s.style.opacity=b},50)}static getWindowScrollTop(){let s=document.documentElement;return(window.pageYOffset||s.scrollTop)-(s.clientTop||0)}static getWindowScrollLeft(){let s=document.documentElement;return(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0)}static matches(s,u){var b=Element.prototype;return(b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector||function(Ce){return-1!==[].indexOf.call(document.querySelectorAll(Ce),this)}).call(s,u)}static getOuterWidth(s,u){let b=s.offsetWidth;if(u){let x=getComputedStyle(s);b+=parseFloat(x.marginLeft)+parseFloat(x.marginRight)}return b}static getHorizontalPadding(s){let u=getComputedStyle(s);return parseFloat(u.paddingLeft)+parseFloat(u.paddingRight)}static getHorizontalMargin(s){let u=getComputedStyle(s);return parseFloat(u.marginLeft)+parseFloat(u.marginRight)}static innerWidth(s){let u=s.offsetWidth,b=getComputedStyle(s);return u+=parseFloat(b.paddingLeft)+parseFloat(b.paddingRight),u}static width(s){let u=s.offsetWidth,b=getComputedStyle(s);return u-=parseFloat(b.paddingLeft)+parseFloat(b.paddingRight),u}static getInnerHeight(s){let u=s.offsetHeight,b=getComputedStyle(s);return u+=parseFloat(b.paddingTop)+parseFloat(b.paddingBottom),u}static getOuterHeight(s,u){let b=s.offsetHeight;if(u){let x=getComputedStyle(s);b+=parseFloat(x.marginTop)+parseFloat(x.marginBottom)}return b}static getHeight(s){let u=s.offsetHeight,b=getComputedStyle(s);return u-=parseFloat(b.paddingTop)+parseFloat(b.paddingBottom)+parseFloat(b.borderTopWidth)+parseFloat(b.borderBottomWidth),u}static getWidth(s){let u=s.offsetWidth,b=getComputedStyle(s);return u-=parseFloat(b.paddingLeft)+parseFloat(b.paddingRight)+parseFloat(b.borderLeftWidth)+parseFloat(b.borderRightWidth),u}static getViewport(){let s=window,u=document,b=u.documentElement,x=u.getElementsByTagName("body")[0];return{width:s.innerWidth||b.clientWidth||x.clientWidth,height:s.innerHeight||b.clientHeight||x.clientHeight}}static getOffset(s){var u=s.getBoundingClientRect();return{top:u.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:u.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(s,u){let b=s.parentNode;if(!b)throw"Can't replace element";return b.replaceChild(u,s)}static getUserAgent(){return navigator.userAgent}static isIE(){var s=window.navigator.userAgent;return s.indexOf("MSIE ")>0||(s.indexOf("Trident/")>0?(s.indexOf("rv:"),!0):s.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(s,u){if(this.isElement(u))u.appendChild(s);else{if(!u.el||!u.el.nativeElement)throw"Cannot append "+u+" to "+s;u.el.nativeElement.appendChild(s)}}static removeChild(s,u){if(this.isElement(u))u.removeChild(s);else{if(!u.el||!u.el.nativeElement)throw"Cannot remove "+s+" from "+u;u.el.nativeElement.removeChild(s)}}static removeElement(s){"remove"in Element.prototype?s.remove():s.parentNode.removeChild(s)}static isElement(s){return"object"==typeof HTMLElement?s instanceof HTMLElement:s&&"object"==typeof s&&null!==s&&1===s.nodeType&&"string"==typeof s.nodeName}static calculateScrollbarWidth(s){if(s){let u=getComputedStyle(s);return s.offsetWidth-s.clientWidth-parseFloat(u.borderLeftWidth)-parseFloat(u.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let u=document.createElement("div");u.className="p-scrollbar-measure",document.body.appendChild(u);let b=u.offsetWidth-u.clientWidth;return document.body.removeChild(u),this.calculatedScrollbarWidth=b,b}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let s=document.createElement("div");s.className="p-scrollbar-measure",document.body.appendChild(s);let u=s.offsetHeight-s.clientHeight;return document.body.removeChild(s),this.calculatedScrollbarWidth=u,u}static invokeElementMethod(s,u,b){s[u].apply(s,b)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let s=this.resolveUserAgent();this.browser={},s.browser&&(this.browser[s.browser]=!0,this.browser.version=s.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let s=navigator.userAgent.toLowerCase(),u=/(chrome)[ \/]([\w.]+)/.exec(s)||/(webkit)[ \/]([\w.]+)/.exec(s)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(s)||/(msie) ([\w.]+)/.exec(s)||s.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(s)||[];return{browser:u[1]||"",version:u[2]||"0"}}static isInteger(s){return Number.isInteger?Number.isInteger(s):"number"==typeof s&&isFinite(s)&&Math.floor(s)===s}static isHidden(s){return null===s.offsetParent}static getFocusableElements(s){let u=y.find(s,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),b=[];for(let x of u)"none"!=getComputedStyle(x).display&&"hidden"!=getComputedStyle(x).visibility&&b.push(x);return b}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return y.zindex=1e3,y.calculatedScrollbarWidth=null,y.calculatedScrollbarHeight=null,y})();class Ke{constructor(V,s=(()=>{})){this.element=V,this.listener=s}bindScrollListener(){this.scrollableParents=ge.getScrollableParents(this.element);for(let V=0;V<this.scrollableParents.length;V++)this.scrollableParents[V].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let V=0;V<this.scrollableParents.length;V++)this.scrollableParents[V].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}var Ee=Q(805);let Oe=(()=>{class y{constructor(s,u,b){this.el=s,this.zone=u,this.config=b}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(s){let u=this.getInk();if(!u||"none"===getComputedStyle(u,null).display)return;if(ge.removeClass(u,"p-ink-active"),!ge.getHeight(u)&&!ge.getWidth(u)){let et=Math.max(ge.getOuterWidth(this.el.nativeElement),ge.getOuterHeight(this.el.nativeElement));u.style.height=et+"px",u.style.width=et+"px"}let b=ge.getOffset(this.el.nativeElement),x=s.pageX-b.left+document.body.scrollTop-ge.getWidth(u)/2,Ce=s.pageY-b.top+document.body.scrollLeft-ge.getHeight(u)/2;u.style.top=Ce+"px",u.style.left=x+"px",ge.addClass(u,"p-ink-active")}getInk(){for(let s=0;s<this.el.nativeElement.children.length;s++)if(-1!==this.el.nativeElement.children[s].className.indexOf("p-ink"))return this.el.nativeElement.children[s];return null}resetInk(){let s=this.getInk();s&&ge.removeClass(s,"p-ink-active")}onAnimationEnd(s){ge.removeClass(s.currentTarget,"p-ink-active")}create(){let s=document.createElement("span");s.className="p-ink",this.el.nativeElement.appendChild(s),this.animationListener=this.onAnimationEnd.bind(this),s.addEventListener("animationend",this.animationListener)}remove(){let s=this.getInk();s&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),s.removeEventListener("animationend",this.animationListener),ge.removeElement(s))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.SBq),i.Y36(i.R0b),i.Y36(Ee.b4,8))},y.\u0275dir=i.lG2({type:y,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),y})(),Me=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez]}),y})();(0,se.oQ)([(0,se.oB)({transform:"{{transform}}",opacity:0}),(0,se.jt)("{{transition}}")]),(0,se.oQ)([(0,se.jt)("{{transition}}",(0,se.oB)({transform:"{{transform}}",opacity:0}))]);let ot=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,Me]}),y})();var qt=Q(1211),Be=Q(4006),we=Q(773),nt=Q(1740);let yt=(()=>{class y{constructor(s){this.el=s,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,ge.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let s=document.createElement("span");this.icon&&!this.label&&s.setAttribute("aria-hidden","true"),s.className="p-button-label",this.label?s.appendChild(document.createTextNode(this.label)):s.innerHTML="&nbsp;",this.el.nativeElement.appendChild(s),this.initialized=!0}getStyleClass(){let s="p-button p-component";return this.icon&&!this.label&&(s+=" p-button-icon-only"),this.loading&&(s+=" p-disabled p-button-loading",!this.icon&&this.label&&(s+=" p-button-loading-label-only")),s}setStyleClass(){let s=this.getStyleClass();this.el.nativeElement.className=s+" "+this._initialStyleClass}createIconEl(){let s=document.createElement("span");s.className="p-button-icon",s.setAttribute("aria-hidden","true");let u=this.label?"p-button-icon-"+this.iconPos:null;u&&ge.addClass(s,u);let b=this.getIconClass();b&&ge.addMultipleClasses(s,b);let x=ge.findSingle(this.el.nativeElement,".p-button-label");x?this.el.nativeElement.insertBefore(s,x):this.el.nativeElement.appendChild(s)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let s=ge.findSingle(this.el.nativeElement,".p-button-icon");s?s.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let s=ge.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(s)}get label(){return this._label}set label(s){this._label=s,this.initialized&&(ge.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(s){this._icon=s,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(s){this._loading=s,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.SBq))},y.\u0275dir=i.lG2({type:y,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),y})(),rn=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,Me]}),y})();function gn(y,V){1&y&&i.GkF(0)}function kn(y,V){if(1&y&&(i.TgZ(0,"div",8),i.Hsn(1,1),i.YNc(2,gn,1,0,"ng-container",6),i.qZA()),2&y){const s=i.oxw();i.xp6(2),i.Q6J("ngTemplateOutlet",s.headerTemplate)}}function Pn(y,V){1&y&&i.GkF(0)}function Gt(y,V){if(1&y&&(i.TgZ(0,"div",9),i._uU(1),i.YNc(2,Pn,1,0,"ng-container",6),i.qZA()),2&y){const s=i.oxw();i.xp6(1),i.hij(" ",s.header," "),i.xp6(1),i.Q6J("ngTemplateOutlet",s.titleTemplate)}}function di(y,V){1&y&&i.GkF(0)}function Un(y,V){if(1&y&&(i.TgZ(0,"div",10),i._uU(1),i.YNc(2,di,1,0,"ng-container",6),i.qZA()),2&y){const s=i.oxw();i.xp6(1),i.hij(" ",s.subheader," "),i.xp6(1),i.Q6J("ngTemplateOutlet",s.subtitleTemplate)}}function xt(y,V){1&y&&i.GkF(0)}function Ut(y,V){1&y&&i.GkF(0)}function He(y,V){if(1&y&&(i.TgZ(0,"div",11),i.Hsn(1,2),i.YNc(2,Ut,1,0,"ng-container",6),i.qZA()),2&y){const s=i.oxw();i.xp6(2),i.Q6J("ngTemplateOutlet",s.footerTemplate)}}const vt=["*",[["p-header"]],[["p-footer"]]],un=["*","p-header","p-footer"];let Hn=(()=>{class y{constructor(s){this.el=s}ngAfterContentInit(){this.templates.forEach(s=>{switch(s.getType()){case"header":this.headerTemplate=s.template;break;case"title":this.titleTemplate=s.template;break;case"subtitle":this.subtitleTemplate=s.template;break;case"content":default:this.contentTemplate=s.template;break;case"footer":this.footerTemplate=s.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.SBq))},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-card"]],contentQueries:function(s,u,b){if(1&s&&(i.Suo(b,Ee.h4,5),i.Suo(b,Ee.$_,5),i.Suo(b,Ee.jx,4)),2&s){let x;i.iGM(x=i.CRH())&&(u.headerFacet=x.first),i.iGM(x=i.CRH())&&(u.footerFacet=x.first),i.iGM(x=i.CRH())&&(u.templates=x)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:un,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(s,u){1&s&&(i.F$t(vt),i.TgZ(0,"div",0),i.YNc(1,kn,3,1,"div",1),i.TgZ(2,"div",2),i.YNc(3,Gt,3,2,"div",3),i.YNc(4,Un,3,2,"div",4),i.TgZ(5,"div",5),i.Hsn(6),i.YNc(7,xt,1,0,"ng-container",6),i.qZA(),i.YNc(8,He,3,1,"div",7),i.qZA()()),2&s&&(i.Tol(u.styleClass),i.Q6J("ngClass","p-card p-component")("ngStyle",u.style),i.xp6(1),i.Q6J("ngIf",u.headerFacet||u.headerTemplate),i.xp6(2),i.Q6J("ngIf",u.header||u.titleTemplate),i.xp6(1),i.Q6J("ngIf",u.subheader||u.subtitleTemplate),i.xp6(3),i.Q6J("ngTemplateOutlet",u.contentTemplate),i.xp6(1),i.Q6J("ngIf",u.footerFacet||u.footerTemplate))},dependencies:[g.mk,g.O5,g.tP,g.PC],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),y})(),Wi=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,Ee.m8]}),y})();function Ci(y,V){1&y&&(i.TgZ(0,"span",19),i._uU(1,"Email is required"),i.qZA())}function Ei(y,V){1&y&&(i.TgZ(0,"div",19),i._uU(1,"please enter valid Email"),i.qZA())}function Zi(y,V){1&y&&(i.TgZ(0,"span",19),i._uU(1,"Password is required"),i.qZA())}function oi(y,V){1&y&&(i.TgZ(0,"div",19),i._uU(1,"please enter valid Password"),i.qZA())}const Ki=function(y){return{"is-invalid":y}};let Ui=(()=>{class y{constructor(s,u){this.authService=s,this.fromBuilder=u,this.submitted=!1}ngOnInit(){this.registerForm=this.fromBuilder.group({email:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],password:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z0-9._%+-]")]]})}get f(){return this.registerForm.controls}Signin(){if(this.submitted=!0,this.registerForm.invalid)for(const s of Object.keys(this.registerForm.controls))this.registerForm.controls[s].markAsTouched();else this.authService.SignIn(this.registerForm.value.email,this.registerForm.value.password).then(s=>{s&&window.alert("signin success")}).catch(s=>{window.alert("Error"+s)})}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(we.e),i.Y36(Be.qu))},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-sign-in"]],decls:47,vars:11,consts:[[1,"main"],[3,"formGroup","ngSubmit"],[1,"form-group"],["pButton","","type","button","label","SignIn with Google",1,"p-button-danger",3,"click"],[1,"pi","pi-google"],[1,"or"],[1,"p-input-icon-left"],[1,"pi","pi-envelope"],["type","text","pInputText","","placeholder","email","formControlName","email",1,"form-control",3,"ngClass"],["style","color: red;",4,"ngIf"],[1,"pi","pi-unlock"],["type","text","pInputText","","placeholder","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"form-conrol"],[1,"forgotPassword"],["routerLink","/forgot-password",1,"p-float-label"],["type","submit ",1,"btn","btn-primary"],[1,"redirectToLogin"],[1,"p-float-label"],["routerLink","/sign-up",1,"redirect"],[2,"color","red"]],template:function(s,u){1&s&&(i.TgZ(0,"div",0)(1,"form",1),i.NdJ("ngSubmit",function(){return u.Signin()}),i.TgZ(2,"p-card")(3,"div")(4,"h1"),i._uU(5,"Sign In"),i.qZA()(),i.TgZ(6,"div",2)(7,"button",3),i.NdJ("click",function(){return u.authService.GoogleAuth()}),i._UZ(8,"i",4),i._uU(9,"\xa0"),i.qZA(),i._uU(10,"\xa0 "),i.qZA(),i._UZ(11,"br"),i.TgZ(12,"div",5)(13,"h3"),i._uU(14,"-OR-"),i.qZA()(),i._UZ(15,"br"),i.TgZ(16,"div",2)(17,"span",6),i._UZ(18,"i",7)(19,"input",8),i.qZA(),i._UZ(20,"br"),i.YNc(21,Ci,2,0,"span",9),i.YNc(22,Ei,2,0,"div",9),i.qZA(),i._UZ(23,"br"),i.TgZ(24,"div",2)(25,"span",6),i._UZ(26,"i",10)(27,"input",11),i.qZA(),i._UZ(28,"br"),i.YNc(29,Zi,2,0,"span",9),i.YNc(30,oi,2,0,"div",9),i.qZA(),i._UZ(31,"br"),i.TgZ(32,"div",12)(33,"div",13)(34,"span",14),i._uU(35,"Forgot Password?"),i.qZA()()(),i._UZ(36,"br"),i.TgZ(37,"div")(38,"button",15),i._uU(39,"SignIn"),i.qZA()(),i._UZ(40,"br"),i.TgZ(41,"div",16)(42,"span",17),i._uU(43,"Don't have an account?"),i.TgZ(44,"span",18),i._uU(45," Sign Up"),i.qZA()()(),i._UZ(46,"br"),i.qZA()()()),2&s&&(i.xp6(1),i.Q6J("formGroup",u.registerForm),i.xp6(18),i.Q6J("ngClass",i.VKq(7,Ki,u.submitted&&u.f.email.errors)),i.xp6(2),i.Q6J("ngIf",!u.f.email.valid&&u.f.email.touched&&!(null!=u.f.email.errors&&u.f.email.errors.pattern)),i.xp6(1),i.Q6J("ngIf",null==u.f.email.errors?null:u.f.email.errors.pattern),i.xp6(5),i.Q6J("ngClass",i.VKq(9,Ki,u.submitted&&u.f.password.errors)),i.xp6(2),i.Q6J("ngIf",!u.f.password.valid&&u.f.password.touched&&!(null!=u.f.password.errors&&u.f.password.errors.pattern)),i.xp6(1),i.Q6J("ngIf",null==u.f.password.errors?null:u.f.password.errors.pattern))},dependencies:[g.mk,g.O5,qt.rH,nt.o,yt,Hn,Be._Y,Be.Fj,Be.JJ,Be.JL,Be.sg,Be.u],styles:[".main[_ngcontent-%COMP%]{min-height:100vh;width:600px;margin-top:40px;margin-left:auto;margin-right:auto;display:block}.main[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;margin-left:auto;margin-right:auto;margin-top:20px}.main[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:30px;margin-left:200px;font-family:poppins;font-size:35px;font-weight:700}.main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:500px;text-align:center}.forgotPassword[_ngcontent-%COMP%]{margin-left:380px;color:#076199}.redirectToLogin[_ngcontent-%COMP%]{margin-top:30px;margin-left:50px}.redirect[_ngcontent-%COMP%]{color:#076199}.main[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.main[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:center;margin-top:1px}"]}),y})();function yi(y,V){1&y&&(i.TgZ(0,"span",22),i._uU(1,"Name is required"),i.qZA())}function Jt(y,V){1&y&&(i.TgZ(0,"div",22),i._uU(1,"Only alphabate allow "),i.qZA())}function Ni(y,V){1&y&&(i.TgZ(0,"div"),i._uU(1,"Name is required"),i.qZA())}function Hi(y,V){if(1&y&&(i.TgZ(0,"div",23),i.YNc(1,Ni,2,0,"div",24),i.qZA()),2&y){const s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.f.displayName.errors.required)}}function Qi(y,V){1&y&&(i.TgZ(0,"span",22),i._uU(1,"Email is required"),i.qZA())}function Jr(y,V){1&y&&(i.TgZ(0,"div",22),i._uU(1,"please enter valid Email"),i.qZA())}function sr(y,V){1&y&&(i.TgZ(0,"span",22),i._uU(1,"Password is required"),i.qZA())}function xr(y,V){1&y&&(i.TgZ(0,"div",22),i._uU(1,"please enter strong password :- "),i.TgZ(2,"p",25),i._uU(3,"Suggestions"),i.qZA(),i.TgZ(4,"ul",26)(5,"li"),i._uU(6,"At least one lowercase"),i.qZA(),i.TgZ(7,"li"),i._uU(8,"At least one uppercase"),i.qZA(),i.TgZ(9,"li"),i._uU(10,"At least one numeric"),i.qZA(),i.TgZ(11,"li"),i._uU(12,"Minimum 6 characters"),i.qZA()()())}function br(y,V){1&y&&(i.TgZ(0,"span",22),i._uU(1,"Mobile Number is required"),i.qZA())}function Ji(y,V){1&y&&(i.TgZ(0,"div",22),i._uU(1,"please enter 10 number "),i.qZA())}function Kn(y,V){1&y&&(i.TgZ(0,"div"),i._uU(1,"Mobile Number is required"),i.qZA())}function Gn(y,V){if(1&y&&(i.TgZ(0,"div",23),i.YNc(1,Kn,2,0,"div",24),i.qZA()),2&y){const s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.f.mobile.errors.required)}}function fi(y,V){1&y&&(i.TgZ(0,"span",22),i._uU(1,"photoURL is required"),i.qZA())}function Ar(y,V){1&y&&(i.TgZ(0,"div",22),i._uU(1,"please enter valid Password"),i.qZA())}const Mn=function(y){return{"is-invalid":y}};let ji=(()=>{class y{constructor(s,u){this.authService=s,this.formBuilder=u,this.submitted=!1}ngOnInit(){this.registerForm=this.formBuilder.group({displayName:["",[Be.kI.required,Be.kI.pattern("[a-zA-Z ]*")]],email:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],photoURL:["",Be.kI.required],password:["",[Be.kI.required,Be.kI.pattern("[A-z0-9._%+-]+@[a-z0-9.-]+.[a-z0-9._%+-]")]],mobile:["",[Be.kI.required,Be.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]]})}get f(){return this.registerForm.controls}onSubmit(){if(this.submitted=!0,this.registerForm.invalid){for(const u of Object.keys(this.registerForm.controls))this.registerForm.controls[u].markAsTouched();return}this.data=this.registerForm.value,console.log(this.data);let s=Math.floor(1e5+9e5*Math.random());console.log(s),this.data.userId=s,this.data.emailVerified=!0,this.authService.signUp(this.registerForm.value.email,this.registerForm.value.password).then(u=>{console.log(u),window.alert("Data saved")}).catch(u=>{window.alert(u)})}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(we.e),i.Y36(Be.qu))},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-sign-up"]],decls:57,vars:28,consts:[[1,"container"],[1,"main"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"p-input-icon-left"],[1,"pi","pi-user"],["type","text","pInputText","","placeholder","Name","formControlName","displayName",1,"form-control",3,"ngClass"],["style","color: red;",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"pi","pi-envelope"],["type","email","pInputText","","placeholder","Email","formControlName","email",1,"form-control",3,"ngClass"],[1,"form-group",2,"width","500px"],[1,"pi","pi-unlock",2,"margin","none"],["type","password","pInputText","","placeholder","Password","formControlName","password",1,"form-control",3,"ngClass"],[1,"pi","pi-mobile"],["type","text","pInputText","","placeholder","mobile Number","formControlName","mobile",1,"form-control",3,"ngClass"],[1,"pi","pi-image",2,"margin-left","2px","margin-right","20px"],["type","file","pInputText","","placeholder","image","formControlName","photoURL",1,"form-control",3,"ngClass"],["type","submit ",1,"btn","btn-danger"],[1,"redirectToLogin"],[1,"p-float-label"],["routerLink","/sign-in",1,"redirect"],[2,"color","red"],[1,"invalid-feedback"],[4,"ngIf"],[1,"mt-2"],[1,"pl-2","ml-2","mt-0",2,"line-height","1.5"]],template:function(s,u){1&s&&(i.TgZ(0,"div",0)(1,"div",1)(2,"form",2),i.NdJ("ngSubmit",function(){return u.onSubmit()}),i.TgZ(3,"p-card")(4,"div")(5,"h1"),i._uU(6,"Sign Up"),i.qZA()(),i.TgZ(7,"div",3)(8,"span",4),i._UZ(9,"i",5)(10,"input",6),i.qZA(),i._UZ(11,"br"),i.YNc(12,yi,2,0,"span",7),i.YNc(13,Jt,2,0,"div",7),i.YNc(14,Hi,2,1,"div",8),i.qZA(),i._UZ(15,"br"),i.TgZ(16,"div",3)(17,"span",4),i._UZ(18,"i",9)(19,"input",10),i.qZA(),i._UZ(20,"br"),i.YNc(21,Qi,2,0,"span",7),i.YNc(22,Jr,2,0,"div",7),i.qZA(),i._UZ(23,"br"),i.TgZ(24,"div",11)(25,"span",4),i._UZ(26,"i",12)(27,"input",13),i.qZA(),i.YNc(28,sr,2,0,"span",7),i.YNc(29,xr,13,0,"div",7),i.qZA(),i._UZ(30,"br"),i.TgZ(31,"div",3)(32,"span",4),i._UZ(33,"i",14)(34,"input",15),i.qZA(),i._UZ(35,"br"),i.YNc(36,br,2,0,"span",7),i.YNc(37,Ji,2,0,"div",7),i.YNc(38,Gn,2,1,"div",8),i.qZA(),i._UZ(39,"br"),i.TgZ(40,"div",3)(41,"span",4),i._UZ(42,"i",16)(43,"input",17),i.qZA(),i._UZ(44,"br"),i.YNc(45,fi,2,0,"span",7),i.YNc(46,Ar,2,0,"div",7),i.qZA(),i._UZ(47,"br"),i.TgZ(48,"div")(49,"button",18),i._uU(50,"Submit"),i.qZA()(),i._UZ(51,"br"),i.TgZ(52,"div",19)(53,"span",20),i._uU(54,"Already have an account?"),i.TgZ(55,"span",21),i._uU(56," Sign In "),i.qZA()()()()()()()),2&s&&(i.xp6(2),i.Q6J("formGroup",u.registerForm),i.xp6(8),i.Q6J("ngClass",i.VKq(18,Mn,u.submitted&&u.f.displayName.errors)),i.xp6(2),i.Q6J("ngIf",u.f.displayName.touched&&!u.f.displayName.valid&&!(null!=u.f.displayName.errors&&u.f.displayName.errors.pattern)),i.xp6(1),i.Q6J("ngIf",null==u.f.displayName.errors?null:u.f.displayName.errors.pattern),i.xp6(1),i.Q6J("ngIf",u.submitted&&u.f.displayName.errors),i.xp6(5),i.Q6J("ngClass",i.VKq(20,Mn,u.submitted&&u.f.email.errors)),i.xp6(2),i.Q6J("ngIf",!u.f.email.valid&&u.f.email.touched&&!(null!=u.f.email.errors&&u.f.email.errors.pattern)),i.xp6(1),i.Q6J("ngIf",null==u.f.email.errors?null:u.f.email.errors.pattern),i.xp6(5),i.Q6J("ngClass",i.VKq(22,Mn,u.submitted&&u.f.password.errors)),i.xp6(1),i.Q6J("ngIf",u.f.password.touched&&!u.f.password.valid&&!(null!=u.f.password.errors&&u.f.password.errors.pattern)),i.xp6(1),i.Q6J("ngIf",null==u.f.password.errors?null:u.f.password.errors.pattern),i.xp6(5),i.Q6J("ngClass",i.VKq(24,Mn,u.submitted&&u.f.mobile.errors)),i.xp6(2),i.Q6J("ngIf",u.f.mobile.touched&&!u.f.mobile.valid&&!(null!=u.f.mobile.errors&&u.f.mobile.errors.pattern)),i.xp6(1),i.Q6J("ngIf",null==u.f.mobile.errors?null:u.f.mobile.errors.pattern),i.xp6(1),i.Q6J("ngIf",u.submitted&&u.f.mobile.errors),i.xp6(5),i.Q6J("ngClass",i.VKq(26,Mn,u.submitted&&u.f.photoURL.errors)),i.xp6(2),i.Q6J("ngIf",!u.f.photoURL.valid&&u.f.photoURL.touched&&!(null!=u.f.photoURL.errors&&u.f.photoURL.errors.pattern)),i.xp6(1),i.Q6J("ngIf",null==u.f.photoURL.errors?null:u.f.photoURL.errors.pattern))},dependencies:[g.mk,g.O5,qt.rH,nt.o,Hn,Be._Y,Be.Fj,Be.JJ,Be.JL,Be.sg,Be.u],styles:[".main[_ngcontent-%COMP%]{margin-top:40px;width:600px;min-height:100vh;margin-left:auto;margin-right:auto}.main[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;margin-top:20px}.main[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;margin-left:200px;font-family:poppins;font-size:35px;font-weight:700}.main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:500px;font-size:medium;margin-top:20px}.redirect[_ngcontent-%COMP%]{color:#076199;font-family:poppins}.redirectToLogin[_ngcontent-%COMP%]{margin-top:10px;font-family:poppins;text-align:center}.main[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:1px}"]}),y})();function ri(y,V){1&y&&(i.TgZ(0,"span",12),i._uU(1,"Email is required"),i.qZA())}function or(y,V){1&y&&(i.TgZ(0,"div",12),i._uU(1,"please enter valid Email"),i.qZA())}const ai=function(y){return{"is-invalid":y}};let vs=(()=>{class y{constructor(s,u){this.authService=s,this.formBuilder=u,this.submitted=!1}ngOnInit(){this.registerForm=this.formBuilder.group({email:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]]})}get f(){return this.registerForm.controls}submit(){if(this.submitted=!0,this.registerForm.invalid)for(const s of Object.keys(this.registerForm.controls))this.registerForm.controls[s].markAsTouched()}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(we.e),i.Y36(Be.qu))},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-forgot-password"]],decls:26,vars:6,consts:[[1,"main"],[3,"formGroup","ngSubmit"],[1,"heading"],[1,"form-group"],[1,"p-input-icon-left"],[1,"pi","pi-envelope"],["type","text","pInputText","","placeholder","email","formControlName","email",1,"form-control",3,"ngClass"],["style","color: red;",4,"ngIf"],["pButton","","type","submit","label","Submit","value","Reset Password",1,"p-button-primary",3,"click"],[1,"redirectToLogin"],[1,"p-float-label"],["routerLink","/sign-in",1,"redirect"],[2,"color","red"]],template:function(s,u){1&s&&(i.TgZ(0,"div",0)(1,"form",1),i.NdJ("ngSubmit",function(){return u.submit()}),i.TgZ(2,"p-card")(3,"div",2)(4,"h3"),i._uU(5,"Reset password"),i.qZA(),i.TgZ(6,"p"),i._uU(7,"Please enter your email address to request a password reset."),i.qZA()(),i.TgZ(8,"div",3)(9,"span",4),i._UZ(10,"i",5)(11,"input",6),i.qZA(),i._UZ(12,"br"),i.YNc(13,ri,2,0,"span",7),i.YNc(14,or,2,0,"div",7),i.qZA(),i._UZ(15,"br"),i.TgZ(16,"div")(17,"button",8),i.NdJ("click",function(){return u.authService.ForgotPassword(u.registerForm.value.email)}),i.qZA()(),i._UZ(18,"br"),i.TgZ(19,"div")(20,"div",9)(21,"span",10),i._uU(22,"Don't have an account?"),i.TgZ(23,"span",11),i._uU(24," Sign In"),i.qZA()()(),i._UZ(25,"br"),i.qZA()()()()),2&s&&(i.xp6(1),i.Q6J("formGroup",u.registerForm),i.xp6(10),i.Q6J("ngClass",i.VKq(4,ai,u.submitted&&u.f.email.errors)),i.xp6(2),i.Q6J("ngIf",!u.f.email.valid&&u.f.email.touched&&!(null!=u.f.email.errors&&u.f.email.errors.pattern)),i.xp6(1),i.Q6J("ngIf",null==u.f.email.errors?null:u.f.email.errors.pattern))},dependencies:[g.mk,g.O5,qt.rH,nt.o,yt,Hn,Be._Y,Be.Fj,Be.JJ,Be.JL,Be.sg,Be.u],styles:[".main[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;margin-top:20px}.main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:500px;font-size:20px;margin-top:20px}.forgotPassword[_ngcontent-%COMP%]{margin-left:380px;color:#076199}.redirectToLogin[_ngcontent-%COMP%]{margin-left:100px;margin-top:1px}.redirect[_ngcontent-%COMP%]{color:#076199}.main[_ngcontent-%COMP%]{margin-top:150px;height:1000px;width:550px;margin-left:auto;margin-right:auto;display:block}.heading[_ngcontent-%COMP%]{text-align:center}.heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:30px;font-family:poppins;font-size:35px;font-weight:700;margin-top:10px}.heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:poppins;font-size:18px;margin-top:35px}.main[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:1px}"]}),y})();function qn(y,V){if(1&y&&(i.TgZ(0,"div",13)(1,"p",14),i._uU(2,"We have sent a confirmation email to "),i.TgZ(3,"strong"),i._uU(4),i.qZA(),i._uU(5,"."),i.qZA(),i.TgZ(6,"p",15),i._uU(7,"Please check your email and click on the link to verfiy your email address."),i.qZA()()),2&y){const s=V.ngIf;i.xp6(4),i.Oqu(s.email)}}let ct=(()=>{class y{constructor(s){this.authService=s}ngOnInit(){}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(we.e))},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-verify-email"]],decls:17,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[2,"text-align","center","color","red","font-family","poppins","font-weight","bold","margin-top","100px","font-size","35px"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","../../../assets/images/email.png ","alt","positronX.io Logo",1,"brand-logo",2,"width","260px","height","250px","margin-left","900px","margin-top","20px","margin-bottom","30px"],["class","formGroup",4,"ngIf"],[1,"formGroup",2,"text-align","center"],["type","submit",1,"btn","btnPrimary",2,"font-size","25px","font-family","poppins","color","blue","margin-top","20px",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin",2,"text-align","center","margin-top","20px","font-size","20px","font-family","poppins"],[2,"font-size","20px","font-family","poppins"],["routerLink","/sign-in",1,"redirect",2,"color","rgb(7, 97, 153)","font-size","20px","font-family","poppins"],[1,"formGroup"],[1,"text-center",2,"margin-top","20px","font-size","25px","font-family","poppins"],[1,"text-center",2,"margin-top","20px","font-size","20px","font-family","poppins"]],template:function(s,u){1&s&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),i._uU(4,"Thank You for Registering"),i.qZA(),i.TgZ(5,"a",4),i._UZ(6,"img",5),i.qZA(),i.YNc(7,qn,8,1,"div",6),i.TgZ(8,"div",7)(9,"button",8),i.NdJ("click",function(){return u.authService.SendVerificationMail()}),i._UZ(10,"i",9),i._uU(11," Resend Verification Email "),i.qZA()()(),i.TgZ(12,"div",10)(13,"span",11),i._uU(14,"Go back to?"),i.TgZ(15,"span",12),i._uU(16," Sign in"),i.qZA()()()()()),2&s&&(i.xp6(7),i.Q6J("ngIf",u.authService.data))},dependencies:[g.O5,qt.rH]}),y})(),qe=(()=>{class y{constructor(s,u){this.authService=s,this.route=u}ngOnInit(){}logOut(){confirm("Are you Sure ?")&&this.authService.SignOut()}profile(){this.route.navigate(["/student-profile"]).then(()=>{window.location.reload()})}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(we.e),i.Y36(qt.F0))},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-dashboard"]],decls:27,vars:0,consts:[[1,"navbar","navbar-expand-sm","bg-dark","navbar-dark"],[1,"container-fluid"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","../../../assets/images/main.jpg","alt","positronX.io Logo",1,"brand-logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapsibleNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","collapsibleNavbar",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item","active"],["routerLink","/student-profile",1,"nav-link"],[1,"pi","pi-user","mt-3"],[1,"sr-only"],[1,"nav-item"],["routerLink","/student-add",1,"nav-link"],[1,"pi","pi-user-plus","mt-3"],["routerLink","/student-list",1,"nav-link"],[1,"pi","pi-list","mt-3"],[1,"user-image"],[1,"nav-link",3,"click"],[1,"pi","pi-sign-out","mt-3"]],template:function(s,u){1&s&&(i.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),i._UZ(3,"img",3),i.qZA(),i.TgZ(4,"button",4),i._UZ(5,"span",5),i.qZA(),i.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),i._UZ(10,"i",10),i._uU(11,"User Profile "),i.TgZ(12,"span",11),i._uU(13,"(current)"),i.qZA()()(),i.TgZ(14,"li",12)(15,"a",13),i._UZ(16,"i",14),i._uU(17,"Add Student"),i.qZA()(),i.TgZ(18,"li",12)(19,"a",15),i._UZ(20,"i",16)(21,"span",17),i._uU(22," Student List"),i.qZA()(),i.TgZ(23,"li",12)(24,"a",18),i.NdJ("click",function(){return u.logOut()}),i._UZ(25,"i",19),i._uU(26,"Log Out"),i.qZA()()()()()())},dependencies:[qt.yS],styles:["*[_ngcontent-%COMP%]{color:#fff}.brand-logo[_ngcontent-%COMP%]{width:50px;height:35px;margin-left:40px;border-radius:5px;margin-top:3px;margin-bottom:3px}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red;width:40px;height:30px;font-weight:700;margin:auto}"]}),y})(),ze=(()=>{class y{constructor(s,u){this.authService=s,this.router=u}canActivate(s,u){return!0!==this.authService.isLoggedIn&&this.router.navigate(["/sign-in"]),!0}}return y.\u0275fac=function(s){return new(s||y)(i.LFG(we.e),i.LFG(qt.F0))},y.\u0275prov=i.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();var it=Q(7185);function Ye(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"tr")(1,"th",14),i._uU(2),i.qZA(),i.TgZ(3,"th",14),i._uU(4),i.qZA(),i.TgZ(5,"td"),i._uU(6),i.qZA(),i.TgZ(7,"td"),i._uU(8),i.qZA(),i.TgZ(9,"td"),i._uU(10),i.qZA(),i.TgZ(11,"td",15)(12,"div")(13,"button",16),i._uU(14,"Edit"),i.qZA(),i._uU(15,"\xa0 "),i.TgZ(16,"button",17),i.NdJ("click",function(){const x=i.CHM(s).$implicit,Ce=i.oxw();return i.KtG(Ce.deleteStudent(x))}),i._uU(17,"Delete"),i.qZA()()()()}if(2&y){const s=V.$implicit,u=V.index;i.xp6(2),i.Oqu(u+1),i.xp6(2),i.Oqu(s.$key),i.xp6(2),i.AsE("",s.firstName," ",s.lastName,""),i.xp6(2),i.Oqu(s.email),i.xp6(2),i.Oqu(s.mobileNumber),i.xp6(3),i.MGl("routerLink","/edit-student/",s.$key,"")}}const mn=function(){return{display:"flex","align-items":"center","text-align":"center","margin-top":"50px",width:"400px","justify-content":"center"}};function Rn(y,V){if(1&y&&(i.TgZ(0,"p-card")(1,"main",5)(2,"div",6)(3,"div",7)(4,"h1",8),i._uU(5,"User Profile"),i.qZA()(),i.TgZ(6,"div",2)(7,"div",9)(8,"div",10),i._UZ(9,"img",11),i.TgZ(10,"div",12)(11,"h1",13),i._uU(12,"Wel-Come :- "),i.TgZ(13,"strong"),i._uU(14),i.qZA()(),i.TgZ(15,"p"),i._uU(16,"User ID :- "),i.TgZ(17,"strong"),i._uU(18),i.qZA()(),i.TgZ(19,"p"),i._uU(20,"Email :- "),i.TgZ(21,"strong"),i._uU(22),i.qZA()(),i.TgZ(23,"p"),i._uU(24,"Email Verified :- "),i.TgZ(25,"strong"),i._uU(26),i.qZA()()(),i.TgZ(27,"button",14),i._uU(28,"Go back"),i.qZA()()()()()()()),2&y){const s=V.ngIf;i.Akn(i.DdM(8,mn)),i.xp6(9),i.s9C("src",s.photoURL?s.photoURL:"/assets/dummy-user.png",i.LSH),i.s9C("alt",s.displayName),i.xp6(5),i.Oqu(s.displayName?s.displayName:"User"),i.xp6(4),i.Oqu(s.uid),i.xp6(4),i.Oqu(s.email),i.xp6(4),i.Oqu(s.emailVerified)}}function zi(y,V){if(1&y&&(i.TgZ(0,"div",1)(1,"div",2)(2,"div",3),i.YNc(3,Rn,29,9,"p-card",4),i.qZA()()()),2&y){const s=i.oxw();i.xp6(3),i.Q6J("ngIf",s.authService.data)}}function Hr(y,V){1&y&&(i.TgZ(0,"span",16),i._uU(1," First Name is required"),i.qZA())}function _t(y,V){1&y&&(i.TgZ(0,"div",16),i._uU(1,"Only alphabate allow "),i.qZA())}function We(y,V){1&y&&i._UZ(0,"div",17)}function tt(y,V){1&y&&(i.TgZ(0,"span",16),i._uU(1,"Last Name is required"),i.qZA())}function zt(y,V){1&y&&(i.TgZ(0,"div",16),i._uU(1,"Only alphabate allow "),i.qZA())}function _n(y,V){1&y&&i._UZ(0,"div",17)}function $n(y,V){1&y&&(i.TgZ(0,"span",16),i._uU(1,"Email is required"),i.qZA())}function Yn(y,V){1&y&&(i.TgZ(0,"div",16),i._uU(1,"please enter valid Email"),i.qZA())}function Ne(y,V){1&y&&i._UZ(0,"div",17)}function Ve(y,V){1&y&&(i.TgZ(0,"span",16),i._uU(1,"Mobile Number is required"),i.qZA())}function De(y,V){1&y&&(i.TgZ(0,"div",16),i._uU(1,"please enter 10 number "),i.qZA())}function ht(y,V){1&y&&i._UZ(0,"div",17)}const It=function(y){return{"is-invalid":y}};function vi(y,V){1&y&&(i.TgZ(0,"span",16),i._uU(1,"only alphabate allow"),i.qZA())}function Si(y,V){1&y&&(i.TgZ(0,"div"),i._uU(1,"Name is required"),i.qZA())}function fr(y,V){if(1&y&&(i.TgZ(0,"div",17),i.YNc(1,Si,2,0,"div",18),i.qZA()),2&y){const s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.f.firstName.errors)}}function wr(y,V){1&y&&(i.TgZ(0,"span",16),i._uU(1,"Name is required"),i.qZA())}function In(y,V){1&y&&(i.TgZ(0,"div"),i._uU(1,"Name is required"),i.qZA())}function zs(y,V){if(1&y&&(i.TgZ(0,"div",17),i.YNc(1,In,2,0,"div",18),i.qZA()),2&y){const s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.f.lastName.errors)}}function Ss(y,V){1&y&&(i.TgZ(0,"div"),i._uU(1,"email is required"),i.qZA())}function ya(y,V){if(1&y&&(i.TgZ(0,"div",17),i.YNc(1,Ss,2,0,"div",18),i.qZA()),2&y){const s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.f.email.errors)}}function ho(y,V){1&y&&(i.TgZ(0,"span",16),i._uU(1,"Mobile Number is required"),i.qZA())}function Kr(y,V){1&y&&(i.TgZ(0,"div"),i._uU(1,"Name is required"),i.qZA())}function ls(y,V){if(1&y&&(i.TgZ(0,"div",17),i.YNc(1,Kr,2,0,"div",18),i.qZA()),2&y){const s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.f.mobileNumber.errors)}}const Ds=function(y){return{"is-invalid":y}},fo=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-up",component:ji},{path:"sign-in",component:Ui},{path:"forgot-password",component:vs},{path:"verify-email",component:ct},{path:"dashboard",canActivate:[ze],component:qe},{path:"student-list",canActivate:[ze],component:(()=>{class y{constructor(s,u){this.authService=s,this.toastr=u,this.p=1,this.hideWhenNoStudent=!1,this.noData=!1,this.preLoader=!0,this.users=[]}ngOnInit(){this.dataState(),this.authService.GetStudentsList().snapshotChanges().subscribe(u=>{console.log(u),this.Student=[],u.forEach(b=>{let x=b.payload.toJSON();x.$key=b.key,this.Student.push(x)})})}dataState(){this.authService.GetStudentsList().valueChanges().subscribe(s=>{this.preLoader=!1,s.length<=0?(this.hideWhenNoStudent=!1,this.noData=!0):(this.hideWhenNoStudent=!0,this.noData=!1)})}deleteStudent(s){window.confirm("Are sure you want to delete this student ?")&&(this.authService.DeleteStudent(s.$key),this.toastr.success(s.firstName+" successfully deleted!"))}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(we.e),i.Y36(it._W))},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-student-list"]],decls:31,vars:1,consts:[[1,"container","user_list","my-5"],[1,"row"],[1,"col-lg-6","col-4"],[1,"heading"],[1,"col-lg-6","col-8"],[1,"btn_back"],["routerLink","/dashboard",1,"btn","btn-primary"],["routerLink","/student-add",1,"btn","btn-success"],[1,"pricing-header","mx-auto"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-center","action-block"],[1,"mr-2","btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(s,u){1&s&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),i._uU(5,"Students List"),i.qZA()()(),i.TgZ(6,"div",4)(7,"div",5)(8,"a",6),i._uU(9,"Go Back"),i.qZA(),i.TgZ(10,"a",7),i._uU(11,"Add Student "),i.qZA()()()(),i.TgZ(12,"div",8)(13,"div",9)(14,"table",10)(15,"thead")(16,"tr")(17,"th",11),i._uU(18,"S.No. "),i.qZA(),i.TgZ(19,"th",11),i._uU(20,"Student Id"),i.qZA(),i.TgZ(21,"th",11),i._uU(22,"Student name"),i.qZA(),i.TgZ(23,"th",11),i._uU(24,"Email"),i.qZA(),i.TgZ(25,"th",11),i._uU(26,"Mobile number"),i.qZA(),i.TgZ(27,"th",12),i._uU(28,"Edit"),i.qZA()()(),i.TgZ(29,"tbody"),i.YNc(30,Ye,18,7,"tr",13),i.qZA()()()()()),2&s&&(i.xp6(30),i.Q6J("ngForOf",u.Student))},dependencies:[g.sg,qt.rH,qt.yS],styles:["*[_ngcontent-%COMP%]{font-family:poppins;font-weight:700;font-size:15px}.btn_back[_ngcontent-%COMP%]{text-align:right}.btn_back[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:15px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:poppins;font-size:20px;color:brown;font-weight:700}@media only screen and (max-width: 767px){.heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}}@media only screen and (max-weidth:767){.user_list[_ngcontent-%COMP%]{width:100vh}}"]}),y})()},{path:"student-profile",canActivate:[ze],component:(()=>{class y{constructor(s){this.authService=s}ngOnInit(){}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(we.e))},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-student-profile"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col","ml-12"],[3,"style",4,"ngIf"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2",2,"color","red","margin-top","20px","font-family","poppins","font-weight","bolder"],[1,"col-md-12",2,"color","black","font-family","poppins"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"],[2,"color","blue","font-family","poopins","font-size","22px"],["type","go back","routerLink","/dashboard",1,"btn","btn-secondary"]],template:function(s,u){1&s&&i.YNc(0,zi,4,1,"div",0),2&s&&i.Q6J("ngIf",u.authService.data)},dependencies:[g.O5,qt.rH,Hn],styles:[".main[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}"]}),y})()},{path:"student-add",canActivate:[ze],component:(()=>{class y{constructor(s,u,b,x){this.authService=s,this.fb=u,this.toastr=b,this.router=x,this.submitted=!1}ngOnInit(){this.authService.GetStudentsList(),this.form()}form(){this.studentForm=this.fb.group({firstName:["",[Be.kI.required,Be.kI.pattern("[a-zA-Z ]*")]],email:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],lastName:["",[Be.kI.required,Be.kI.pattern("[a-zA-Z ]*")]],mobileNumber:["",[Be.kI.required,Be.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]]})}get f(){return this.studentForm.controls}ResetForm(){this.studentForm.reset()}submitStudentData(){if(this.submitted=!0,this.studentForm.invalid)for(const s of Object.keys(this.studentForm.controls))this.studentForm.controls[s].markAsTouched();else console.log(this.studentForm.value),this.authService.AddStudent(this.studentForm.value),console.log(this.studentForm.value),this.toastr.success(this.studentForm.controls.firstName.value+" successfully added!"),this.router.navigate(["/student-list"])}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(we.e),i.Y36(Be.qu),i.Y36(it._W),i.Y36(qt.F0))},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-add-student"]],decls:44,vars:25,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],[1,"heading"],[1,"form-group"],[2,"margin-top","20px"],["type","text","placeholder","Please Enter First Name","formControlName","firstName",1,"form-control",2,"margin-top","10px",3,"ngClass"],["style","color: red;",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Please Enter Last Name","formControlName","lastName",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","text","placeholder","Please Enter Email","formControlName","email",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","text","placeholder","Please Enter Mobile number","formControlName","mobileNumber",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","reset","routerLink","/dashboard",1,"btn","btn-secondary","gap-right"],["type","submit",1,"btn","btn-primary"],[2,"color","red"],[1,"invalid-feedback"]],template:function(s,u){1&s&&(i.TgZ(0,"div",0)(1,"p-card")(2,"div",1)(3,"div",2)(4,"div",3)(5,"form",4),i.NdJ("ngSubmit",function(){return u.submitStudentData()}),i.TgZ(6,"div",5)(7,"h1"),i._uU(8,"Student Registration"),i.qZA()(),i.TgZ(9,"div",6)(10,"label",7),i._uU(11,"First Name"),i.qZA(),i._UZ(12,"input",8),i.YNc(13,Hr,2,0,"span",9),i.YNc(14,_t,2,0,"div",9),i.YNc(15,We,1,0,"div",10),i.qZA(),i.TgZ(16,"div",6)(17,"label",7),i._uU(18,"Last Name"),i.qZA(),i._UZ(19,"input",11),i.YNc(20,tt,2,0,"span",9),i.YNc(21,zt,2,0,"div",9),i.YNc(22,_n,1,0,"div",10),i.qZA(),i.TgZ(23,"div",6)(24,"label",7),i._uU(25,"Email"),i.qZA(),i._UZ(26,"input",12),i.YNc(27,$n,2,0,"span",9),i.YNc(28,Yn,2,0,"div",9),i.YNc(29,Ne,1,0,"div",10),i.qZA(),i.TgZ(30,"div",6)(31,"label",7),i._uU(32,"Mobile number"),i.qZA(),i._UZ(33,"input",13),i.YNc(34,Ve,2,0,"span",9),i.YNc(35,De,2,0,"div",9),i.YNc(36,ht,1,0,"div",10),i.qZA(),i._UZ(37,"br"),i.TgZ(38,"div")(39,"button",14),i._uU(40," Go Back"),i.qZA(),i._uU(41,"\xa0 "),i.TgZ(42,"button",15),i._uU(43,"Register"),i.qZA()()()()()()()()),2&s&&(i.xp6(5),i.Q6J("formGroup",u.studentForm),i.xp6(7),i.Q6J("ngClass",i.VKq(17,It,u.submitted&&u.f.firstName.errors)),i.xp6(1),i.Q6J("ngIf",u.f.firstName.touched&&!u.f.firstName.valid&&!(null!=u.f.firstName.errors&&u.f.firstName.errors.pattern)&&u.f.firstName.errors),i.xp6(1),i.Q6J("ngIf",null==u.f.firstName.errors?null:u.f.firstName.errors.pattern),i.xp6(1),i.Q6J("ngIf",u.submitted&&u.f.firstName.errors),i.xp6(4),i.Q6J("ngClass",i.VKq(19,It,u.submitted&&u.f.lastName.errors)),i.xp6(1),i.Q6J("ngIf",u.f.lastName.touched&&!u.f.lastName.valid&&!(null!=u.f.lastName.errors&&u.f.lastName.errors.pattern)&&u.f.lastName.errors),i.xp6(1),i.Q6J("ngIf",null==u.f.lastName.errors?null:u.f.lastName.errors.pattern),i.xp6(1),i.Q6J("ngIf",u.submitted&&u.f.lastName.errors),i.xp6(4),i.Q6J("ngClass",i.VKq(21,It,u.submitted&&u.f.email.errors)),i.xp6(1),i.Q6J("ngIf",!u.f.email.valid&&u.f.email.touched&&!(null!=u.f.email.errors&&u.f.email.errors.pattern)&&u.f.email.errors),i.xp6(1),i.Q6J("ngIf",null==u.f.email.errors?null:u.f.email.errors.pattern),i.xp6(1),i.Q6J("ngIf",u.submitted&&u.f.email.errors),i.xp6(4),i.Q6J("ngClass",i.VKq(23,It,u.submitted&&u.f.mobileNumber.errors)),i.xp6(1),i.Q6J("ngIf",u.f.mobileNumber.touched&&!u.f.mobileNumber.valid&&!(null!=u.f.mobileNumber.errors&&u.f.mobileNumber.errors.pattern)&&u.f.mobileNumber.errors),i.xp6(1),i.Q6J("ngIf",null==u.f.mobileNumber.errors?null:u.f.mobileNumber.errors.pattern),i.xp6(1),i.Q6J("ngIf",u.submitted&&u.f.mobileNumber.errors))},dependencies:[g.mk,g.O5,qt.rH,Hn,Be._Y,Be.Fj,Be.JJ,Be.JL,Be.sg,Be.u],styles:[".main[_ngcontent-%COMP%]{width:700px;min-height:100vh;margin:50px auto auto;font-size:17px;font-family:poppins;font-weight:700}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-top:30px;font-size:30px;font-family:poppins;font-weight:700}input.ng-invalid.ng-touched[_ngcontent-%COMP%], .input-error[_ngcontent-%COMP%]{border:red 1px solid}"]}),y})()},{path:"edit-student/:id",canActivate:[ze],component:(()=>{class y{constructor(s,u,b,x,Ce,et){this.atuhService=s,this.fb=u,this.location=b,this.actRoute=x,this.router=Ce,this.toastr=et,this.submitted=!1}ngOnInit(){this.updateStudentData();const s=this.actRoute.snapshot.paramMap.get("id");this.atuhService.GetStudent(s).valueChanges().subscribe(u=>{console.log(u),this.editForm.setValue(u)})}updateStudentData(){this.editForm=this.fb.group({firstName:["",[Be.kI.required,Be.kI.pattern("[a-zA-Z ]*")]],email:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],lastName:["",[Be.kI.required,Be.kI.pattern("[a-zA-Z ]*")]],mobileNumber:["",[Be.kI.required,Be.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]]})}get f(){return this.editForm.controls}updateForm(){this.atuhService.UpdateStudent(this.editForm.value),this.toastr.success(this.editForm.controls.firstName.value+" updated successfully"),this.router.navigate(["/student-list"])}goBack(){this.location.back()}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(we.e),i.Y36(Be.qu),i.Y36(g.Ye),i.Y36(qt.gz),i.Y36(qt.F0),i.Y36(it._W))},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-edit-student"]],decls:39,vars:20,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],[1,"heading"],[1,"form-group"],[2,"margin-top","20px"],["type","text","placeholder","Please Enter First Name","formControlName","firstName",1,"form-control",2,"margin-top","10px",3,"ngClass"],["style","color: red;",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Please Enter Last Name","formControlName","lastName",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","text","placeholder","Please Enter Email","formControlName","email",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","text","placeholder","Please Enter Mobile number","formControlName","mobileNumber",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","button",1,"btn","btn-secondary","gap-right",3,"click"],["type","submit",1,"btn","btn-primary"],[2,"color","red"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(s,u){1&s&&(i.TgZ(0,"div",0)(1,"div",1)(2,"p-card")(3,"div",2)(4,"div",3)(5,"form",4),i.NdJ("ngSubmit",function(){return u.updateForm()}),i.TgZ(6,"div",5)(7,"h1"),i._uU(8,"Edit Student Details"),i.qZA()(),i.TgZ(9,"div",6)(10,"label",7),i._uU(11,"First Name"),i.qZA(),i._UZ(12,"input",8),i.YNc(13,vi,2,0,"span",9),i.YNc(14,fr,2,1,"div",10),i.qZA(),i.TgZ(15,"div",6)(16,"label",7),i._uU(17,"Last Name"),i.qZA(),i._UZ(18,"input",11),i.YNc(19,wr,2,0,"span",9),i.YNc(20,zs,2,1,"div",10),i.qZA(),i.TgZ(21,"div",6)(22,"label",7),i._uU(23,"Email"),i.qZA(),i._UZ(24,"input",12),i.YNc(25,ya,2,1,"div",10),i.qZA(),i.TgZ(26,"div",6)(27,"label",7),i._uU(28,"Mobile number"),i.qZA(),i._UZ(29,"input",13),i.YNc(30,ho,2,0,"span",9),i.YNc(31,ls,2,1,"div",10),i.qZA(),i._UZ(32,"br"),i.TgZ(33,"div")(34,"button",14),i.NdJ("click",function(){return u.goBack()}),i._uU(35,"Go Back"),i.qZA(),i._uU(36,"\xa0 "),i.TgZ(37,"button",15),i._uU(38,"Save"),i.qZA()()()()()()()()),2&s&&(i.xp6(5),i.Q6J("formGroup",u.editForm),i.xp6(7),i.Q6J("ngClass",i.VKq(12,Ds,u.submitted&&u.f.firstName.errors)),i.xp6(1),i.Q6J("ngIf",u.f.firstName.touched&&!u.f.firstName.valid&&!u.f.firstName.errors),i.xp6(1),i.Q6J("ngIf",u.submitted&&u.f.firstName.errors),i.xp6(4),i.Q6J("ngClass",i.VKq(14,Ds,u.submitted&&u.f.lastName.errors)),i.xp6(1),i.Q6J("ngIf",u.f.lastName.touched&&!u.f.lastName.valid&&!u.f.lastName.errors),i.xp6(1),i.Q6J("ngIf",u.submitted&&u.f.lastName.errors),i.xp6(4),i.Q6J("ngClass",i.VKq(16,Ds,u.submitted&&u.f.email.errors)),i.xp6(1),i.Q6J("ngIf",u.submitted&&u.f.email.errors),i.xp6(4),i.Q6J("ngClass",i.VKq(18,Ds,u.submitted&&u.f.mobileNumber.errors)),i.xp6(1),i.Q6J("ngIf",u.f.mobileNumber.touched&&!u.f.mobileNumber.valid&&!u.f.mobileNumber.errors),i.xp6(1),i.Q6J("ngIf",u.submitted&&u.f.mobileNumber.errors))},dependencies:[g.mk,g.O5,Hn,Be._Y,Be.Fj,Be.JJ,Be.JL,Be.sg,Be.u],styles:[".main[_ngcontent-%COMP%]{width:700px;height:800px;margin:150px auto auto;font-size:17px;font-family:poppins;font-weight:700}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-top:30px;font-size:30px;font-family:poppins;font-weight:700}"]}),y})()},{path:"delete-student",canActivate:[ze],component:(()=>{class y{constructor(){}ngOnInit(){}}return y.\u0275fac=function(s){return new(s||y)},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-delete-student"]],decls:2,vars:0,template:function(s,u){1&s&&(i.TgZ(0,"p"),i._uU(1,"delete-student works!"),i.qZA())}}),y})()}];let er=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[qt.Bz.forChild(fo),qt.Bz]}),y})(),Rr=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez]}),y})(),Wr=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez]}),y})();var gi=Q(982);let Da=(()=>{class y{constructor(s,u,b){this.el=s,this.zone=u,this.config=b,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(s){this._disabled=s,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let s=this.getTarget(this.el.nativeElement);s.addEventListener("focus",this.focusListener),s.addEventListener("blur",this.blurListener)}})}ngOnChanges(s){s.tooltipPosition&&this.setOption({tooltipPosition:s.tooltipPosition.currentValue}),s.tooltipEvent&&this.setOption({tooltipEvent:s.tooltipEvent.currentValue}),s.appendTo&&this.setOption({appendTo:s.appendTo.currentValue}),s.positionStyle&&this.setOption({positionStyle:s.positionStyle.currentValue}),s.tooltipStyleClass&&this.setOption({tooltipStyleClass:s.tooltipStyleClass.currentValue}),s.tooltipZIndex&&this.setOption({tooltipZIndex:s.tooltipZIndex.currentValue}),s.escape&&this.setOption({escape:s.escape.currentValue}),s.showDelay&&this.setOption({showDelay:s.showDelay.currentValue}),s.hideDelay&&this.setOption({hideDelay:s.hideDelay.currentValue}),s.life&&this.setOption({life:s.life.currentValue}),s.positionTop&&this.setOption({positionTop:s.positionTop.currentValue}),s.positionLeft&&this.setOption({positionLeft:s.positionLeft.currentValue}),s.disabled&&this.setOption({disabled:s.disabled.currentValue}),s.text&&(this.setOption({tooltipLabel:s.text.currentValue}),this.active&&(s.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),s.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...s.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(s){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(s){this.deactivate()}onFocus(s){this.activate()}onBlur(s){this.deactivate()}onClick(s){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let s=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},s)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let s=document.createElement("div");s.className="p-tooltip-arrow",this.container.appendChild(s),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?ge.appendChild(this.container,this.el.nativeElement):ge.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),ge.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?gi.P9.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&gi.P9.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let s=this.el.nativeElement.getBoundingClientRect();return{left:s.left+ge.getWindowScrollLeft(),top:s.top+ge.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let s=this.getHostOffset(),u=s.left+ge.getOuterWidth(this.el.nativeElement),b=s.top+(ge.getOuterHeight(this.el.nativeElement)-ge.getOuterHeight(this.container))/2;this.container.style.left=u+this.getOption("positionLeft")+"px",this.container.style.top=b+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let s=this.getHostOffset(),u=s.left-ge.getOuterWidth(this.container),b=s.top+(ge.getOuterHeight(this.el.nativeElement)-ge.getOuterHeight(this.container))/2;this.container.style.left=u+this.getOption("positionLeft")+"px",this.container.style.top=b+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let s=this.getHostOffset(),u=s.left+(ge.getOuterWidth(this.el.nativeElement)-ge.getOuterWidth(this.container))/2,b=s.top-ge.getOuterHeight(this.container);this.container.style.left=u+this.getOption("positionLeft")+"px",this.container.style.top=b+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let s=this.getHostOffset(),u=s.left+(ge.getOuterWidth(this.el.nativeElement)-ge.getOuterWidth(this.container))/2,b=s.top+ge.getOuterHeight(this.el.nativeElement);this.container.style.left=u+this.getOption("positionLeft")+"px",this.container.style.top=b+this.getOption("positionTop")+"px"}setOption(s){this._tooltipOptions={...this._tooltipOptions,...s}}getOption(s){return this._tooltipOptions[s]}getTarget(s){return ge.hasClass(s,"p-inputwrapper")?ge.findSingle(s,"input"):s}preAlign(s){this.container.style.left="-999px",this.container.style.top="-999px";let u="p-tooltip p-component p-tooltip-"+s;this.container.className=this.getOption("tooltipStyleClass")?u+" "+this.getOption("tooltipStyleClass"):u}isOutOfBounds(){let s=this.container.getBoundingClientRect(),u=s.top,b=s.left,x=ge.getOuterWidth(this.container),Ce=ge.getOuterHeight(this.container),et=ge.getViewport();return b+x>et.width||b<0||u<0||u+Ce>et.height}onWindowResize(s){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Ke(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let s=this.getTarget(this.el.nativeElement);s.removeEventListener("focus",this.focusListener),s.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):ge.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&gi.P9.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.SBq),i.Y36(i.R0b),i.Y36(Ee.b4))},y.\u0275dir=i.lG2({type:y,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[i.TTD]}),y})(),Jo=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez]}),y})();const us=["element"],rl=["content"];function Hl(y,V){1&y&&i.GkF(0)}const Eo=function(y,V){return{$implicit:y,options:V}};function va(y,V){if(1&y&&(i.ynx(0),i.YNc(1,Hl,1,0,"ng-container",7),i.BQk()),2&y){const s=i.oxw(2);i.xp6(1),i.Q6J("ngTemplateOutlet",s.contentTemplate)("ngTemplateOutletContext",i.WLB(2,Eo,s.loadedItems,s.getContentOptions()))}}function mo(y,V){1&y&&i.GkF(0)}function io(y,V){if(1&y&&(i.ynx(0),i.YNc(1,mo,1,0,"ng-container",7),i.BQk()),2&y){const s=V.$implicit,u=V.index,b=i.oxw(3);i.xp6(1),i.Q6J("ngTemplateOutlet",b.itemTemplate)("ngTemplateOutletContext",i.WLB(2,Eo,s,b.getOptions(u)))}}const mt=function(y){return{"p-scroller-loading":y}};function ut(y,V){if(1&y&&(i.TgZ(0,"div",8,9),i.YNc(2,io,2,5,"ng-container",10),i.qZA()),2&y){const s=i.oxw(2);i.Q6J("ngClass",i.VKq(4,mt,s.d_loading))("ngStyle",s.contentStyle),i.xp6(2),i.Q6J("ngForOf",s.loadedItems)("ngForTrackBy",s._trackBy||s.index)}}function Tt(y,V){if(1&y&&i._UZ(0,"div",11),2&y){const s=i.oxw(2);i.Q6J("ngStyle",s.spacerStyle)}}function Pt(y,V){1&y&&i.GkF(0)}const Yt=function(y){return{numCols:y}},tn=function(y){return{options:y}};function si(y,V){if(1&y&&(i.ynx(0),i.YNc(1,Pt,1,0,"ng-container",7),i.BQk()),2&y){const s=V.index,u=i.oxw(4);i.xp6(1),i.Q6J("ngTemplateOutlet",u.loaderTemplate)("ngTemplateOutletContext",i.VKq(4,tn,u.getLoaderOptions(s,u.both&&i.VKq(2,Yt,u._numItemsInViewport.cols))))}}function li(y,V){if(1&y&&(i.ynx(0),i.YNc(1,si,2,6,"ng-container",14),i.BQk()),2&y){const s=i.oxw(3);i.xp6(1),i.Q6J("ngForOf",s.loaderArr)}}function ar(y,V){1&y&&i.GkF(0)}const go=function(){return{styleClass:"p-scroller-loading-icon"}};function Ks(y,V){if(1&y&&(i.ynx(0),i.YNc(1,ar,1,0,"ng-container",7),i.BQk()),2&y){const s=i.oxw(4);i.xp6(1),i.Q6J("ngTemplateOutlet",s.loaderIconTemplate)("ngTemplateOutletContext",i.VKq(3,tn,i.DdM(2,go)))}}function ds(y,V){1&y&&i._UZ(0,"i",16)}function Cr(y,V){if(1&y&&(i.YNc(0,Ks,2,5,"ng-container",0),i.YNc(1,ds,1,0,"ng-template",null,15,i.W1O)),2&y){const s=i.MAs(2),u=i.oxw(3);i.Q6J("ngIf",u.loaderIconTemplate)("ngIfElse",s)}}const _i=function(y){return{"p-component-overlay":y}};function jr(y,V){if(1&y&&(i.TgZ(0,"div",12),i.YNc(1,li,2,1,"ng-container",0),i.YNc(2,Cr,3,2,"ng-template",null,13,i.W1O),i.qZA()),2&y){const s=i.MAs(3),u=i.oxw(2);i.Q6J("ngClass",i.VKq(3,_i,!u.loaderTemplate)),i.xp6(1),i.Q6J("ngIf",u.loaderTemplate)("ngIfElse",s)}}const ko=function(y,V){return{"p-scroller":!0,"p-both-scroll":y,"p-horizontal-scroll":V}};function Oo(y,V){if(1&y){const s=i.EpF();i.ynx(0),i.TgZ(1,"div",2,3),i.NdJ("scroll",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onContainerScroll(b))}),i.YNc(3,va,2,5,"ng-container",0),i.YNc(4,ut,3,6,"ng-template",null,4,i.W1O),i.YNc(6,Tt,1,1,"div",5),i.YNc(7,jr,4,5,"div",6),i.qZA(),i.BQk()}if(2&y){const s=i.MAs(5),u=i.oxw();i.xp6(1),i.Tol(u._styleClass),i.Q6J("ngStyle",u._style)("ngClass",i.WLB(10,ko,u.both,u.horizontal)),i.uIk("id",u._id)("tabindex",u.tabindex),i.xp6(2),i.Q6J("ngIf",u.contentTemplate)("ngIfElse",s),i.xp6(3),i.Q6J("ngIf",u._showSpacer),i.xp6(1),i.Q6J("ngIf",!u.loaderDisabled&&u._showLoader&&u.d_loading)}}function Er(y,V){1&y&&i.GkF(0)}const ro=function(y,V){return{rows:y,columns:V}};function _o(y,V){if(1&y&&(i.ynx(0),i.YNc(1,Er,1,0,"ng-container",7),i.BQk()),2&y){const s=i.oxw(2);i.xp6(1),i.Q6J("ngTemplateOutlet",s.contentTemplate)("ngTemplateOutletContext",i.WLB(5,Eo,s.items,i.WLB(2,ro,s._items,s.loadedColumns)))}}function sl(y,V){if(1&y&&(i.Hsn(0),i.YNc(1,_o,2,8,"ng-container",17)),2&y){const s=i.oxw();i.xp6(1),i.Q6J("ngIf",s.contentTemplate)}}const Xo=["*"];let es=(()=>{class y{constructor(s,u){this.cd=s,this.zone=u,this.onLazyLoad=new i.vpe,this.onScroll=new i.vpe,this.onScrollIndexChange=new i.vpe,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._delay=0,this._resizeDelay=10,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1,this._disabled||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}get id(){return this._id}set id(s){this._id=s}get style(){return this._style}set style(s){this._style=s}get styleClass(){return this._styleClass}set styleClass(s){this._styleClass=s}get tabindex(){return this._tabindex}set tabindex(s){this._tabindex=s}get items(){return this._items}set items(s){this._items=s}get itemSize(){return this._itemSize}set itemSize(s){this._itemSize=s}get scrollHeight(){return this._scrollHeight}set scrollHeight(s){this._scrollHeight=s}get scrollWidth(){return this._scrollWidth}set scrollWidth(s){this._scrollWidth=s}get orientation(){return this._orientation}set orientation(s){this._orientation=s}get delay(){return this._delay}set delay(s){this._delay=s}get resizeDelay(){return this._resizeDelay}set resizeDelay(s){this._resizeDelay=s}get lazy(){return this._lazy}set lazy(s){this._lazy=s}get disabled(){return this._disabled}set disabled(s){this._disabled=s}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(s){this._loaderDisabled=s}get columns(){return this._columns}set columns(s){this._columns=s}get showSpacer(){return this._showSpacer}set showSpacer(s){this._showSpacer=s}get showLoader(){return this._showLoader}set showLoader(s){this._showLoader=s}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(s){this._numToleratedItems=s}get loading(){return this._loading}set loading(s){this._loading=s}get autoSize(){return this._autoSize}set autoSize(s){this._autoSize=s}get trackBy(){return this._trackBy}set trackBy(s){this._trackBy=s}get options(){return this._options}set options(s){this._options=s,s&&"object"==typeof s&&Object.entries(s).forEach(([u,b])=>this[`_${u}`]!==b&&(this[`_${u}`]=b))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this.first.rows,this.last.rows).map(s=>this._columns?s:s.slice(this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}ngOnInit(){this.setInitialState()}ngOnChanges(s){let u=!1;if(s.loading){const{previousValue:b,currentValue:x}=s.loading;this.lazy&&b!==x&&x!==this.d_loading&&(this.d_loading=x,u=!0)}if(this.initialized&&!u&&(s.items||s.itemSize||s.scrollHeight||s.scrollWidth)&&this.init(),s.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),s.numToleratedItems){const{previousValue:b,currentValue:x}=s.numToleratedItems;b!==x&&x!==this.d_numToleratedItems&&(this.d_numToleratedItems=x)}if(s.options){const{previousValue:b,currentValue:x}=s.options;this.lazy&&b?.loading!==x?.loading&&x?.loading!==this.d_loading&&(this.d_loading=x.loading),b?.numToleratedItems!==x?.numToleratedItems&&x?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=x.numToleratedItems)}}ngAfterContentInit(){this.templates.forEach(s=>{switch(s.getType()){case"content":this.contentTemplate=s.template;break;case"item":default:this.itemTemplate=s.template;break;case"loader":this.loaderTemplate=s.template;break;case"loadericon":this.loaderIconTemplate=s.template}})}ngAfterViewInit(){this.setContentEl(this.contentEl),this.init(),this.defaultWidth=ge.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=ge.getHeight(this.elementViewChild.nativeElement),this.initialized=!0}ngAfterViewChecked(){this.calculateAutoSize()}ngOnDestroy(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(s){this.contentEl=s||this.contentViewChild?.nativeElement||ge.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems}getElementRef(){return this.elementViewChild}scrollTo(s){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(s)}scrollToIndex(s,u="auto"){const{numToleratedItems:b}=this.calculateNumItems(),x=this.getContentPosition(),Ce=(fn=0,wn)=>fn<=wn?0:fn,et=(fn,wn,wi)=>fn*wn+wi,Mt=(fn=0,wn=0)=>this.scrollTo({left:fn,top:wn,behavior:u});if(this.both){const fn={rows:Ce(s[0],b[0]),cols:Ce(s[1],b[1])};(fn.rows!==this.first.rows||fn.cols!==this.first.cols)&&Mt(et(fn.cols,this._itemSize[1],x.left),et(fn.rows,this._itemSize[0],x.top))}else{const fn=Ce(s,b);fn!==this.first&&(this.horizontal?Mt(et(fn,this._itemSize,x.left),0):Mt(0,et(fn,this._itemSize,x.top)))}}scrollInView(s,u,b="auto"){if(u){const{first:x,viewport:Ce}=this.getRenderedRange(),et=(wn=0,wi=0)=>this.scrollTo({left:wn,top:wi,behavior:b}),fn="to-end"===u;if("to-start"===u){if(this.both)Ce.first.rows-x.rows>s[0]?et(Ce.first.cols*this._itemSize[1],(Ce.first.rows-1)*this._itemSize[0]):Ce.first.cols-x.cols>s[1]&&et((Ce.first.cols-1)*this._itemSize[1],Ce.first.rows*this._itemSize[0]);else if(Ce.first-x>s){const wn=(Ce.first-1)*this._itemSize;this.horizontal?et(wn,0):et(0,wn)}}else if(fn)if(this.both)Ce.last.rows-x.rows<=s[0]+1?et(Ce.first.cols*this._itemSize[1],(Ce.first.rows+1)*this._itemSize[0]):Ce.last.cols-x.cols<=s[1]+1&&et((Ce.first.cols+1)*this._itemSize[1],Ce.first.rows*this._itemSize[0]);else if(Ce.last-x<=s+1){const wn=(Ce.first+1)*this._itemSize;this.horizontal?et(wn,0):et(0,wn)}}else this.scrollToIndex(s,b)}getRenderedRange(){const s=(x,Ce)=>Math.floor(x/(Ce||x));let u=this.first,b=0;if(this.elementViewChild?.nativeElement){const{scrollTop:x,scrollLeft:Ce}=this.elementViewChild.nativeElement;this.both?(u={rows:s(x,this._itemSize[0]),cols:s(Ce,this._itemSize[1])},b={rows:u.rows+this.numItemsInViewport.rows,cols:u.cols+this.numItemsInViewport.cols}):(u=s(this.horizontal?Ce:x,this._itemSize),b=u+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:u,last:b}}}calculateNumItems(){const s=this.getContentPosition(),u=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-s.left:0,b=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-s.top:0,x=(fn,wn)=>Math.ceil(fn/(wn||fn)),Ce=fn=>Math.ceil(fn/2),et=this.both?{rows:x(b,this._itemSize[0]),cols:x(u,this._itemSize[1])}:x(this.horizontal?u:b,this._itemSize);return{numItemsInViewport:et,numToleratedItems:this.d_numToleratedItems||(this.both?[Ce(et.rows),Ce(et.cols)]:Ce(et))}}calculateOptions(){const{numItemsInViewport:s,numToleratedItems:u}=this.calculateNumItems(),b=(et,Mt,fn,wn=!1)=>this.getLast(et+Mt+(et<fn?2:3)*fn,wn),x=this.first,Ce=this.both?{rows:b(this.first.rows,s.rows,u[0]),cols:b(this.first.cols,s.cols,u[1],!0)}:b(this.first,s,u);this.last=Ce,this.numItemsInViewport=s,this.d_numToleratedItems=u,this.showLoader&&(this.loaderArr=this.both?Array.from({length:s.rows}).map(()=>Array.from({length:s.cols})):Array.from({length:s})),this._lazy&&this.handleEvents("onLazyLoad",{first:x,last:Ce})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:s,offsetHeight:u}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(s<this.defaultWidth?s:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(u<this.defaultHeight?u:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(s=0,u=!1){return this._items?Math.min(u?(this._columns||this._items[0]).length:this._items.length,s):0}getContentPosition(){if(this.contentEl){const s=getComputedStyle(this.contentEl),u=parseFloat(s.paddingLeft)+Math.max(parseFloat(s.left)||0,0),b=parseFloat(s.paddingRight)+Math.max(parseFloat(s.right)||0,0),x=parseFloat(s.paddingTop)+Math.max(parseFloat(s.top)||0,0),Ce=parseFloat(s.paddingBottom)+Math.max(parseFloat(s.bottom)||0,0);return{left:u,right:b,top:x,bottom:Ce,x:u+b,y:x+Ce}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const s=this.elementViewChild.nativeElement.parentElement.parentElement,u=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||s.offsetWidth}px`,b=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||s.offsetHeight}px`,x=(Ce,et)=>this.elementViewChild.nativeElement.style[Ce]=et;this.both||this.horizontal?(x("height",b),x("width",u)):x("height",b)}}setSpacerSize(){if(this._items){const s=this.getContentPosition(),u=(b,x,Ce,et=0)=>this.spacerStyle={...this.spacerStyle,[`${b}`]:(x||[]).length*Ce+et+"px"};this.both?(u("height",this._items,this._itemSize[0],s.y),u("width",this._columns||this._items[1],this._itemSize[1],s.x)):this.horizontal?u("width",this._columns||this._items,this._itemSize,s.x):u("height",this._items,this._itemSize,s.y)}}setContentPosition(s){if(this.contentEl){const u=s?s.first:this.first,b=(Ce,et)=>Ce*et,x=(Ce=0,et=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${Ce}px, ${et}px, 0)`};if(this.both)x(b(u.cols,this._itemSize[1]),b(u.rows,this._itemSize[0]));else{const Ce=b(u,this._itemSize);this.horizontal?x(Ce,0):x(0,Ce)}}}onScrollPositionChange(s){const u=s.target,b=this.getContentPosition(),x=(yr,Zo)=>yr?yr>Zo?yr-Zo:yr:0,Ce=(yr,Zo)=>Math.floor(yr/(Zo||yr)),et=(yr,Zo,qo,Mo,Ia,Ul)=>yr<=Ia?Ia:Ul?qo-Mo-Ia:Zo+Ia-1,Mt=(yr,Zo,qo,Mo,Ia,Ul,Hc)=>yr<=Ul?0:Math.max(0,Hc?yr<Zo?qo:yr-Ul:yr>Zo?qo:yr-2*Ul),fn=(yr,Zo,qo,Mo,Ia,Ul=!1)=>{let Hc=Zo+Mo+2*Ia;return yr>=Ia&&(Hc+=Ia+1),this.getLast(Hc,Ul)},wn=x(u.scrollTop,b.top),wi=x(u.scrollLeft,b.left);let hr=this.both?{rows:0,cols:0}:0,Pi=this.last,ys=!1,Dr=this.lastScrollPos;if(this.both){const yr=this.lastScrollPos.top<=wn,Zo=this.lastScrollPos.left<=wi,qo={rows:Ce(wn,this._itemSize[0]),cols:Ce(wi,this._itemSize[1])},Mo={rows:et(qo.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],yr),cols:et(qo.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],Zo)};hr={rows:Mt(qo.rows,Mo.rows,this.first.rows,0,0,this.d_numToleratedItems[0],yr),cols:Mt(qo.cols,Mo.cols,this.first.cols,0,0,this.d_numToleratedItems[1],Zo)},Pi={rows:fn(qo.rows,hr.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:fn(qo.cols,hr.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},ys=hr.rows!==this.first.rows||Pi.rows!==this.last.rows||hr.cols!==this.first.cols||Pi.cols!==this.last.cols,Dr={top:wn,left:wi}}else{const yr=this.horizontal?wi:wn,Zo=this.lastScrollPos<=yr,qo=Ce(yr,this._itemSize);hr=Mt(qo,et(qo,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,Zo),this.first,0,0,this.d_numToleratedItems,Zo),Pi=fn(qo,hr,0,this.numItemsInViewport,this.d_numToleratedItems),ys=hr!==this.first||Pi!==this.last,Dr=yr}return{first:hr,last:Pi,isRangeChanged:ys,scrollPos:Dr}}onScrollChange(s){const{first:u,last:b,isRangeChanged:x,scrollPos:Ce}=this.onScrollPositionChange(s);if(x){const et={first:u,last:b};this.setContentPosition(et),this.first=u,this.last=b,this.lastScrollPos=Ce,this.handleEvents("onScrollIndexChange",et),this._lazy&&this.handleEvents("onLazyLoad",et)}}onContainerScroll(s){if(this.handleEvents("onScroll",{originalEvent:s}),this._delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:u}=this.onScrollPositionChange(s);u&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(s),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.cd.detectChanges())},this._delay)}else this.onScrollChange(s)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(this.elementViewChild){const[s,u]=[ge.getWidth(this.elementViewChild.nativeElement),ge.getHeight(this.elementViewChild.nativeElement)],[b,x]=[s!==this.defaultWidth,u!==this.defaultHeight];(this.both?b||x:this.horizontal?b:this.vertical&&x)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=s,this.defaultHeight=u,this.init()})}},this._resizeDelay)}handleEvents(s,u){return this.options&&this.options[s]?this.options[s](u):this[s].emit(u)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:s=>this.getOptions(s),loading:this.d_loading,getLoaderOptions:(s,u)=>this.getLoaderOptions(s,u),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(s){const u=(this._items||[]).length,b=this.both?this.first.rows+s:this.first+s;return{index:b,count:u,first:0===b,last:b===u-1,even:b%2==0,odd:b%2!=0}}getLoaderOptions(s,u){const b=this.loaderArr.length;return{index:s,count:b,first:0===s,last:s===b-1,even:s%2==0,odd:s%2!=0,...u}}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.sBO),i.Y36(i.R0b))},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-scroller"]],contentQueries:function(s,u,b){if(1&s&&i.Suo(b,Ee.jx,4),2&s){let x;i.iGM(x=i.CRH())&&(u.templates=x)}},viewQuery:function(s,u){if(1&s&&(i.Gf(us,5),i.Gf(rl,5)),2&s){let b;i.iGM(b=i.CRH())&&(u.elementViewChild=b.first),i.iGM(b=i.CRH())&&(u.contentViewChild=b.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",delay:"delay",resizeDelay:"resizeDelay",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[i.TTD],ngContentSelectors:Xo,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(s,u){if(1&s&&(i.F$t(),i.YNc(0,Oo,8,13,"ng-container",0),i.YNc(1,sl,2,1,"ng-template",null,1,i.W1O)),2&s){const b=i.MAs(2);i.Q6J("ngIf",!u._disabled)("ngIfElse",b)}},dependencies:[g.mk,g.sg,g.O5,g.tP,g.PC],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}\n"],encapsulation:2}),y})(),ea=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez]}),y})(),yo=(()=>{class y{constructor(s){this.host=s,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const s=ge.getFocusableElements(this.host.nativeElement);0===s.length&&this.host.nativeElement.focus(),s.length>0&&s[0].focus(),this.focused=!0}}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.SBq))},y.\u0275dir=i.lG2({type:y,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:["pAutoFocus","autofocus"]}}),y})(),za=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez]}),y})();function As(y,V){if(1&y&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&y){const s=i.oxw();i.xp6(1),i.Oqu(s.label||"empty")}}function vo(y,V){1&y&&i.GkF(0)}const Or=function(y){return{height:y}},Po=function(y,V){return{"p-dropdown-item":!0,"p-highlight":y,"p-disabled":V}},Zr=function(y){return{$implicit:y}},hs=["container"],Ai=["filter"],To=["in"],Pr=["editableInput"],Bo=["items"],bo=["scroller"];function Io(y,V){if(1&y&&(i.ynx(0),i._uU(1),i.BQk()),2&y){const s=i.oxw(2);i.xp6(1),i.Oqu(s.label||"empty")}}function lr(y,V){1&y&&i.GkF(0)}const So=function(y){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":y}};function fs(y,V){if(1&y&&(i.TgZ(0,"span",12),i.YNc(1,Io,2,1,"ng-container",13),i.YNc(2,lr,1,0,"ng-container",14),i.qZA()),2&y){const s=i.oxw();i.Q6J("ngClass",i.VKq(9,So,null==s.label||0===s.label.length))("pTooltip",s.tooltip)("tooltipPosition",s.tooltipPosition)("positionStyle",s.tooltipPositionStyle)("tooltipStyleClass",s.tooltipStyleClass),i.uIk("id",s.labelId),i.xp6(1),i.Q6J("ngIf",!s.selectedItemTemplate),i.xp6(1),i.Q6J("ngTemplateOutlet",s.selectedItemTemplate)("ngTemplateOutletContext",i.VKq(11,Zr,s.selectedOption))}}const Ws=function(y){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":y}};function Yi(y,V){if(1&y&&(i.TgZ(0,"span",15),i._uU(1),i.qZA()),2&y){const s=i.oxw();i.Q6J("ngClass",i.VKq(2,Ws,null==s.placeholder||0===s.placeholder.length)),i.xp6(1),i.Oqu(s.placeholder||"empty")}}function xa(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"input",16,17),i.NdJ("click",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onEditableInputClick())})("input",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onEditableInputChange(b))})("focus",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onEditableInputFocus(b))})("blur",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onInputBlur(b))}),i.qZA()}if(2&y){const s=i.oxw();i.Q6J("disabled",s.disabled),i.uIk("maxlength",s.maxlength)("placeholder",s.placeholder)("aria-expanded",s.overlayVisible)}}function mr(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"i",18),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.clear(b))}),i.qZA()}}function la(y,V){1&y&&i.GkF(0)}function qr(y,V){1&y&&i.GkF(0)}const ba=function(y){return{options:y}};function cr(y,V){if(1&y&&(i.ynx(0),i.YNc(1,qr,1,0,"ng-container",14),i.BQk()),2&y){const s=i.oxw(3);i.xp6(1),i.Q6J("ngTemplateOutlet",s.filterTemplate)("ngTemplateOutletContext",i.VKq(2,ba,s.filterOptions))}}function Ti(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",27)(1,"input",28,29),i.NdJ("keydown.enter",function(b){return b.preventDefault()})("keydown",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onKeydown(b,!1))})("input",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onFilterInputChange(b))}),i.qZA(),i._UZ(3,"span",30),i.qZA()}if(2&y){const s=i.oxw(3);i.xp6(1),i.Q6J("value",s.filterValue||""),i.uIk("placeholder",s.filterPlaceholder)("aria-label",s.ariaFilterLabel)("aria-activedescendant",s.overlayVisible?"p-highlighted-option":s.labelId)}}function ol(y,V){if(1&y&&(i.TgZ(0,"div",24),i.NdJ("click",function(u){return u.stopPropagation()}),i.YNc(1,cr,2,4,"ng-container",25),i.YNc(2,Ti,4,4,"ng-template",null,26,i.W1O),i.qZA()),2&y){const s=i.MAs(3),u=i.oxw(2);i.xp6(1),i.Q6J("ngIf",u.filterTemplate)("ngIfElse",s)}}function lc(y,V){1&y&&i.GkF(0)}const Uo=function(y,V){return{$implicit:y,options:V}};function Yl(y,V){if(1&y&&i.YNc(0,lc,1,0,"ng-container",14),2&y){const s=V.$implicit,u=V.options;i.oxw(2);const b=i.MAs(7);i.Q6J("ngTemplateOutlet",b)("ngTemplateOutletContext",i.WLB(2,Uo,s,u))}}function Tr(y,V){1&y&&i.GkF(0)}function No(y,V){if(1&y&&i.YNc(0,Tr,1,0,"ng-container",14),2&y){const s=V.options,u=i.oxw(4);i.Q6J("ngTemplateOutlet",u.loaderTemplate)("ngTemplateOutletContext",i.VKq(2,ba,s))}}function Fo(y,V){1&y&&(i.ynx(0),i.YNc(1,No,1,4,"ng-template",34),i.BQk())}function Zs(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"p-scroller",31,32),i.NdJ("onLazyLoad",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onLazyLoad.emit(b))}),i.YNc(2,Yl,1,5,"ng-template",33),i.YNc(3,Fo,2,0,"ng-container",13),i.qZA()}if(2&y){const s=i.oxw(2);i.Akn(i.VKq(8,Or,s.scrollHeight)),i.Q6J("items",s.optionsToDisplay)("itemSize",s.virtualScrollItemSize||s._itemSize)("autoSize",!0)("lazy",s.lazy)("options",s.virtualScrollOptions),i.xp6(3),i.Q6J("ngIf",s.loaderTemplate)}}function Xt(y,V){1&y&&i.GkF(0)}const ni=function(){return{}};function so(y,V){if(1&y&&(i.ynx(0),i.YNc(1,Xt,1,0,"ng-container",14),i.BQk()),2&y){i.oxw();const s=i.MAs(7),u=i.oxw();i.xp6(1),i.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",i.WLB(3,Uo,u.optionsToDisplay,i.DdM(2,ni)))}}function bs(y,V){if(1&y&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&y){const s=i.oxw().$implicit,u=i.oxw(4);i.xp6(1),i.Oqu(u.getOptionGroupLabel(s)||"empty")}}function Wn(y,V){1&y&&i.GkF(0)}function ie(y,V){1&y&&i.GkF(0)}const X=function(y,V){return{$implicit:y,selectedOption:V}};function W(y,V){if(1&y&&(i.TgZ(0,"li",40),i.YNc(1,bs,2,1,"span",13),i.YNc(2,Wn,1,0,"ng-container",14),i.qZA(),i.YNc(3,ie,1,0,"ng-container",14)),2&y){const s=V.$implicit,u=i.oxw(2).options,b=i.MAs(5),x=i.oxw(2);i.Q6J("ngStyle",i.VKq(6,Or,u.itemSize+"px")),i.xp6(1),i.Q6J("ngIf",!x.groupTemplate),i.xp6(1),i.Q6J("ngTemplateOutlet",x.groupTemplate)("ngTemplateOutletContext",i.VKq(8,Zr,s)),i.xp6(1),i.Q6J("ngTemplateOutlet",b)("ngTemplateOutletContext",i.WLB(10,X,x.getOptionGroupChildren(s),x.selectedOption))}}function pe(y,V){if(1&y&&(i.ynx(0),i.YNc(1,W,4,13,"ng-template",39),i.BQk()),2&y){const s=i.oxw().$implicit;i.xp6(1),i.Q6J("ngForOf",s)}}function Lt(y,V){1&y&&i.GkF(0)}function Ln(y,V){if(1&y&&(i.ynx(0),i.YNc(1,Lt,1,0,"ng-container",14),i.BQk()),2&y){const s=i.oxw().$implicit,u=i.MAs(5),b=i.oxw(2);i.xp6(1),i.Q6J("ngTemplateOutlet",u)("ngTemplateOutletContext",i.WLB(2,X,s,b.selectedOption))}}function zr(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"p-dropdownItem",41),i.NdJ("onClick",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.onItemClick(b))}),i.qZA()}if(2&y){const s=V.$implicit,u=i.oxw().selectedOption,b=i.oxw(3);i.Q6J("option",s)("selected",u==s)("label",b.getOptionLabel(s))("disabled",b.isOptionDisabled(s))("template",b.itemTemplate)}}function oo(y,V){1&y&&i.YNc(0,zr,1,5,"ng-template",39),2&y&&i.Q6J("ngForOf",V.$implicit)}function ps(y,V){if(1&y&&(i.ynx(0),i._uU(1),i.BQk()),2&y){const s=i.oxw(4);i.xp6(1),i.hij(" ",s.emptyFilterMessageLabel," ")}}function Yr(y,V){1&y&&i.GkF(0,null,43)}function ws(y,V){if(1&y&&(i.TgZ(0,"li",42),i.YNc(1,ps,2,1,"ng-container",25),i.YNc(2,Yr,2,0,"ng-container",19),i.qZA()),2&y){const s=i.oxw().options,u=i.oxw(2);i.Q6J("ngStyle",i.VKq(4,Or,s.itemSize+"px")),i.xp6(1),i.Q6J("ngIf",!u.emptyFilterTemplate&&!u.emptyTemplate)("ngIfElse",u.emptyFilter),i.xp6(1),i.Q6J("ngTemplateOutlet",u.emptyFilterTemplate||u.emptyTemplate)}}function Aa(y,V){if(1&y&&(i.ynx(0),i._uU(1),i.BQk()),2&y){const s=i.oxw(4);i.xp6(1),i.hij(" ",s.emptyMessageLabel," ")}}function xl(y,V){1&y&&i.GkF(0,null,44)}function ta(y,V){if(1&y&&(i.TgZ(0,"li",42),i.YNc(1,Aa,2,1,"ng-container",25),i.YNc(2,xl,2,0,"ng-container",19),i.qZA()),2&y){const s=i.oxw().options,u=i.oxw(2);i.Q6J("ngStyle",i.VKq(4,Or,s.itemSize+"px")),i.xp6(1),i.Q6J("ngIf",!u.emptyTemplate)("ngIfElse",u.empty),i.xp6(1),i.Q6J("ngTemplateOutlet",u.emptyTemplate)}}function al(y,V){if(1&y&&(i.TgZ(0,"ul",35,36),i.YNc(2,pe,2,1,"ng-container",13),i.YNc(3,Ln,2,5,"ng-container",13),i.YNc(4,oo,1,1,"ng-template",null,37,i.W1O),i.YNc(6,ws,3,6,"li",38),i.YNc(7,ta,3,6,"li",38),i.qZA()),2&y){const s=V.options,u=i.oxw(2);i.Akn(s.contentStyle),i.Q6J("ngClass",s.contentStyleClass),i.uIk("id",u.listId),i.xp6(2),i.Q6J("ngIf",u.group),i.xp6(1),i.Q6J("ngIf",!u.group),i.xp6(3),i.Q6J("ngIf",u.filterValue&&u.isEmpty()),i.xp6(1),i.Q6J("ngIf",!u.filterValue&&u.isEmpty())}}function wa(y,V){1&y&&i.GkF(0)}const Ga=function(y,V){return{showTransitionParams:y,hideTransitionParams:V}},$a=function(y){return{value:"visible",params:y}};function Ca(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",0),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onOverlayClick(b))})("@overlayAnimation.start",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onOverlayAnimationStart(b))})("@overlayAnimation.done",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onOverlayAnimationEnd(b))}),i.YNc(1,la,1,0,"ng-container",19),i.YNc(2,ol,4,2,"div",20),i.TgZ(3,"div",21),i.YNc(4,Zs,4,10,"p-scroller",22),i.YNc(5,so,2,6,"ng-container",13),i.YNc(6,al,8,8,"ng-template",null,23,i.W1O),i.qZA(),i.YNc(8,wa,1,0,"ng-container",19),i.qZA()}if(2&y){const s=i.oxw();i.Tol(s.panelStyleClass),i.Q6J("ngClass","p-dropdown-panel p-component")("@overlayAnimation",i.VKq(15,$a,i.WLB(12,Ga,s.showTransitionOptions,s.hideTransitionOptions)))("ngStyle",s.panelStyle),i.xp6(1),i.Q6J("ngTemplateOutlet",s.headerTemplate),i.xp6(1),i.Q6J("ngIf",s.filter),i.xp6(1),i.Udp("max-height",s.virtualScroll?"auto":s.scrollHeight||"auto"),i.xp6(1),i.Q6J("ngIf",s.virtualScroll),i.xp6(1),i.Q6J("ngIf",!s.virtualScroll),i.xp6(3),i.Q6J("ngTemplateOutlet",s.footerTemplate)}}const Ma=function(y,V,s,u){return{"p-dropdown p-component":!0,"p-disabled":y,"p-dropdown-open":V,"p-focus":s,"p-dropdown-clearable":u}},na={provide:Be.JU,useExisting:(0,i.Gpc)(()=>ca),multi:!0};let ms=(()=>{class y{constructor(){this.onClick=new i.vpe}onOptionClick(s){this.onClick.emit({originalEvent:s,option:this.option})}}return y.\u0275fac=function(s){return new(s||y)},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,u){1&s&&(i.TgZ(0,"li",0),i.NdJ("click",function(x){return u.onOptionClick(x)}),i.YNc(1,As,2,1,"span",1),i.YNc(2,vo,1,0,"ng-container",2),i.qZA()),2&s&&(i.Q6J("ngStyle",i.VKq(8,Or,u.itemSize+"px"))("id",u.selected?"p-highlighted-option":"")("ngClass",i.WLB(10,Po,u.selected,u.disabled)),i.uIk("aria-label",u.label)("aria-selected",u.selected),i.xp6(1),i.Q6J("ngIf",!u.template),i.xp6(1),i.Q6J("ngTemplateOutlet",u.template)("ngTemplateOutletContext",i.VKq(13,Zr,u.option)))},dependencies:[g.mk,g.O5,g.tP,g.PC,Oe],encapsulation:2}),y})(),ca=(()=>{class y{constructor(s,u,b,x,Ce,et,Mt){this.el=s,this.renderer=u,this.cd=b,this.zone=x,this.filterService=Ce,this.config=et,this.overlayService=Mt,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new i.vpe,this.onFilter=new i.vpe,this.onFocus=new i.vpe,this.onBlur=new i.vpe,this.onClick=new i.vpe,this.onShow=new i.vpe,this.onHide=new i.vpe,this.onClear=new i.vpe,this.onLazyLoad=new i.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=(0,gi.Th)()}get disabled(){return this._disabled}set disabled(s){s&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=s,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(s){this._itemSize=s,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngAfterContentInit(){this.templates.forEach(s=>{switch(s.getType()){case"item":default:this.itemTemplate=s.template;break;case"selectedItem":this.selectedItemTemplate=s.template;break;case"header":this.headerTemplate=s.template;break;case"filter":this.filterTemplate=s.template;break;case"footer":this.footerTemplate=s.template;break;case"emptyfilter":this.emptyFilterTemplate=s.template;break;case"empty":this.emptyTemplate=s.template;break;case"group":this.groupTemplate=s.template;break;case"loader":this.loaderTemplate=s.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:s=>this.onFilterInputChange(s),reset:()=>this.resetFilter()})}get options(){return this._options}set options(s){this._options=s,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&gi.gb.isNotEmpty(this.value)&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(s){this._filterValue=s,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Ee.ws.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Ee.ws.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}get isVisibleClearIcon(){return null!=this.value&&""!==this.value&&this.showClear&&!this.disabled}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(s){return this.optionLabel?gi.gb.resolveFieldData(s,this.optionLabel):s&&void 0!==s.label?s.label:s}getOptionValue(s){return this.optionValue?gi.gb.resolveFieldData(s,this.optionValue):!this.optionLabel&&s&&void 0!==s.value?s.value:s}isOptionDisabled(s){return this.optionDisabled?gi.gb.resolveFieldData(s,this.optionDisabled):!(!s||void 0===s.disabled)&&s.disabled}getOptionGroupLabel(s){return this.optionGroupLabel?gi.gb.resolveFieldData(s,this.optionGroupLabel):s&&void 0!==s.label?s.label:s}getOptionGroupChildren(s){return this.optionGroupChildren?gi.gb.resolveFieldData(s,this.optionGroupChildren):s.items}onItemClick(s){const u=s.option;this.isOptionDisabled(u)||(this.selectItem(s.originalEvent,u),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},150)}selectItem(s,u){this.selectedOption!=u&&(this.selectedOption=u,this.value=this.getOptionValue(u),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:s,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(ge.findSingle(this.overlay,"li.p-highlight")&&ge.scrollInView(this.itemsWrapper,ge.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(s){this.filter&&this.resetFilter(),this.value=s,this.updateSelectedOption(s),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(s){this.selectedOption=this.findOption(s,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(s){this.onModelChange=s}registerOnTouched(s){this.onModelTouched=s}setDisabledState(s){this.disabled=s,this.cd.markForCheck()}onMouseclick(s){this.disabled||this.readonly||this.isInputClick(s)||(this.onClick.emit(s),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(s){this.overlayService.add({originalEvent:s,target:this.el.nativeElement})}isInputClick(s){return ge.hasClass(s.target,"p-dropdown-clear-icon")||s.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&s.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(s){return!(this.el.nativeElement.isSameNode(s.target)||this.el.nativeElement.contains(s.target)||this.overlay&&this.overlay.contains(s.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(s){this.focused=!0,this.hide(),this.onFocus.emit(s)}onEditableInputChange(s){this.value=s.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:s,value:this.value})}show(){this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck()}onOverlayAnimationStart(s){switch(s.toState){case"visible":if(this.overlay=s.element,this.itemsWrapper=ge.findSingle(this.overlay,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&gi.P9.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length)if(this.virtualScroll){const u=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==u&&this.scroller.scrollToIndex(u)}else{let u=ge.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");u&&u.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(s);break;case"void":this.onOverlayHide(),this.onHide.emit(s)}}onOverlayAnimationEnd(s){"void"===s.toState&&gi.P9.clear(s.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):ge.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=ge.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?ge.absolutePosition(this.overlay,this.containerViewChild.nativeElement):ge.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(s){this.focused=!0,this.onFocus.emit(s)}onInputBlur(s){this.focused=!1,this.onBlur.emit(s),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(s){let u;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let b=s-1;0<=b;b--){let x=this.optionsToDisplay[b];if(!this.isOptionDisabled(x)){u=x;break}}if(!u)for(let b=this.optionsToDisplay.length-1;b>=s;b--){let x=this.optionsToDisplay[b];if(!this.isOptionDisabled(x)){u=x;break}}}return u}findNextEnabledOption(s){let u;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let b=s+1;b<this.optionsToDisplay.length;b++){let x=this.optionsToDisplay[b];if(!this.isOptionDisabled(x)){u=x;break}}if(!u)for(let b=0;b<s;b++){let x=this.optionsToDisplay[b];if(!this.isOptionDisabled(x)){u=x;break}}}return u}onKeydown(s,u){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(s.which){case 40:if(!this.overlayVisible&&s.altKey)this.show();else if(this.group){let b=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==b){let x=b.itemIndex+1;x<this.getOptionGroupChildren(this.optionsToDisplay[b.groupIndex]).length?(this.selectItem(s,this.getOptionGroupChildren(this.optionsToDisplay[b.groupIndex])[x]),this.selectedOptionUpdated=!0):this.optionsToDisplay[b.groupIndex+1]&&(this.selectItem(s,this.getOptionGroupChildren(this.optionsToDisplay[b.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(s,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let b=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,x=this.findNextEnabledOption(b);x&&(this.selectItem(s,x),this.selectedOptionUpdated=!0)}s.preventDefault();break;case 38:if(this.group){let b=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==b){let x=b.itemIndex-1;if(x>=0)this.selectItem(s,this.getOptionGroupChildren(this.optionsToDisplay[b.groupIndex])[x]),this.selectedOptionUpdated=!0;else if(x<0){let Ce=this.optionsToDisplay[b.groupIndex-1];Ce&&(this.selectItem(s,this.getOptionGroupChildren(Ce)[this.getOptionGroupChildren(Ce).length-1]),this.selectedOptionUpdated=!0)}}}else{let b=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,x=this.findPrevEnabledOption(b);x&&(this.selectItem(s,x),this.selectedOptionUpdated=!0)}s.preventDefault();break;case 32:u&&(this.overlayVisible?this.hide():this.show(),s.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),s.preventDefault();break;case 27:case 9:this.hide();break;default:u&&!s.metaKey&&this.search(s)}}search(s){this.searchTimeout&&clearTimeout(this.searchTimeout);const u=s.key;let b;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=u,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+u:u,this.group){let x=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};b=this.searchOptionWithinGroup(x)}else{let x=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;b=this.searchOption(++x)}b&&!this.isOptionDisabled(b)&&(this.selectItem(s,b),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(s){let u;return this.searchValue&&(u=this.searchOptionInRange(s,this.optionsToDisplay.length),u||(u=this.searchOptionInRange(0,s))),u}searchOptionInRange(s,u){for(let b=s;b<u;b++){let x=this.optionsToDisplay[b];if(this.getOptionLabel(x).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(x))return x}return null}searchOptionWithinGroup(s){if(this.searchValue){for(let b=s.groupIndex;b<this.optionsToDisplay.length;b++)for(let x=s.groupIndex===b?s.itemIndex+1:0;x<this.getOptionGroupChildren(this.optionsToDisplay[b]).length;x++){let Ce=this.getOptionGroupChildren(this.optionsToDisplay[b])[x];if(this.getOptionLabel(Ce).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(Ce))return Ce}for(let b=0;b<=s.groupIndex;b++)for(let x=0;x<(s.groupIndex===b?s.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[b]).length);x++){let Ce=this.getOptionGroupChildren(this.optionsToDisplay[b])[x];if(this.getOptionLabel(Ce).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(Ce))return Ce}}return null}findOptionIndex(s,u){let b=-1;if(u)for(let x=0;x<u.length;x++)if(null==s&&null==this.getOptionValue(u[x])||gi.gb.equals(s,this.getOptionValue(u[x]),this.dataKey)){b=x;break}return b}findOptionGroupIndex(s,u){let b,x;if(u)for(let Ce=0;Ce<u.length&&(b=Ce,x=this.findOptionIndex(s,this.getOptionGroupChildren(u[Ce])),-1===x);Ce++);return-1!==x?{groupIndex:b,itemIndex:x}:-1}findOption(s,u,b){if(this.group&&!b){let x;if(u&&u.length)for(let Ce of u)if(x=this.findOption(s,this.getOptionGroupChildren(Ce),!0),x)break;return x}{let x=this.findOptionIndex(s,u);return-1!=x?u[x]:null}}onFilterInputChange(s){let u=s.target.value;u&&u.length?(this._filterValue=u,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:s,filter:this._filterValue})}activateFilter(){let s=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let u=[];for(let b of this.options){let x=this.filterService.filter(this.getOptionGroupChildren(b),s,this.filterValue,this.filterMatchMode,this.filterLocale);x&&x.length&&u.push({...b,[this.optionGroupChildren]:x})}this.optionsToDisplay=u}else this.optionsToDisplay=this.filterService.filter(this.options,s,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?ge.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():ge.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",u=>{!this.preventDocumentDefault&&this.isOutsideClicked(u)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!ge.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Ke(this.containerViewChild.nativeElement,s=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(s){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:s,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(s)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&gi.P9.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.sBO),i.Y36(i.R0b),i.Y36(Ee.iZ),i.Y36(Ee.b4),i.Y36(Ee.F0))},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-dropdown"]],contentQueries:function(s,u,b){if(1&s&&i.Suo(b,Ee.jx,4),2&s){let x;i.iGM(x=i.CRH())&&(u.templates=x)}},viewQuery:function(s,u){if(1&s&&(i.Gf(hs,5),i.Gf(Ai,5),i.Gf(To,5),i.Gf(Pr,5),i.Gf(Bo,5),i.Gf(bo,5)),2&s){let b;i.iGM(b=i.CRH())&&(u.containerViewChild=b.first),i.iGM(b=i.CRH())&&(u.filterViewChild=b.first),i.iGM(b=i.CRH())&&(u.accessibleViewChild=b.first),i.iGM(b=i.CRH())&&(u.editableInputViewChild=b.first),i.iGM(b=i.CRH())&&(u.itemsViewChild=b.first),i.iGM(b=i.CRH())&&(u.scroller=b.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(s,u){2&s&&i.ekj("p-inputwrapper-filled",u.filled)("p-inputwrapper-focus",u.focused||u.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[i._Bn([na])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","pAutoFocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(s,u){1&s&&(i.TgZ(0,"div",0,1),i.NdJ("click",function(x){return u.onMouseclick(x)}),i.TgZ(2,"div",2)(3,"input",3,4),i.NdJ("focus",function(x){return u.onInputFocus(x)})("blur",function(x){return u.onInputBlur(x)})("keydown",function(x){return u.onKeydown(x,!0)}),i.qZA()(),i.YNc(5,fs,3,13,"span",5),i.YNc(6,Yi,2,4,"span",6),i.YNc(7,xa,2,4,"input",7),i.YNc(8,mr,1,0,"i",8),i.TgZ(9,"div",9),i._UZ(10,"span",10),i.qZA(),i.YNc(11,Ca,9,17,"div",11),i.qZA()),2&s&&(i.Tol(u.styleClass),i.Q6J("ngClass",i.l5B(20,Ma,u.disabled,u.overlayVisible,u.focused,u.showClear&&!u.disabled))("ngStyle",u.style),i.xp6(3),i.Q6J("disabled",u.disabled)("pAutoFocus",u.autofocus),i.uIk("id",u.inputId)("placeholder",u.placeholder)("aria-label",u.ariaLabel)("aria-expanded",!1)("aria-labelledby",u.ariaLabelledBy)("tabindex",u.tabindex)("aria-activedescendant",u.overlayVisible?u.labelId:null),i.xp6(2),i.Q6J("ngIf",!u.editable&&null!=u.label),i.xp6(1),i.Q6J("ngIf",!u.editable&&null==u.label),i.xp6(1),i.Q6J("ngIf",u.editable),i.xp6(1),i.Q6J("ngIf",u.isVisibleClearIcon),i.xp6(1),i.uIk("aria-expanded",u.overlayVisible),i.xp6(1),i.Q6J("ngClass",u.dropdownIcon),i.xp6(1),i.Q6J("ngIf",u.overlayVisible))},dependencies:[g.mk,g.sg,g.O5,g.tP,g.PC,Ee.jx,Da,es,yo,ms],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[(0,se.X$)("overlayAnimation",[(0,se.eR)(":enter",[(0,se.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,se.jt)("{{showTransitionParams}}")]),(0,se.eR)(":leave",[(0,se.jt)("{{hideTransitionParams}}",(0,se.oB)({opacity:0}))])])]},changeDetection:0}),y})(),_l=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,Ee.m8,Jo,Me,ea,za,Ee.m8,ea]}),y})();const Al=["input"];function Cc(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"i",6),i.NdJ("click",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.clear())}),i.qZA()}}const ll=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},Ml=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function z(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"span",7)(1,"button",8),i.NdJ("mousedown",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onUpButtonMouseDown(b))})("mouseup",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onUpButtonMouseUp())})("mouseleave",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onUpButtonMouseLeave())})("keydown",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onUpButtonKeyDown(b))})("keyup",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onUpButtonKeyUp())}),i.qZA(),i.TgZ(2,"button",8),i.NdJ("mousedown",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onDownButtonMouseDown(b))})("mouseup",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onDownButtonMouseUp())})("mouseleave",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onDownButtonMouseLeave())})("keydown",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onDownButtonKeyDown(b))})("keyup",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onDownButtonKeyUp())}),i.qZA()()}if(2&y){const s=i.oxw();i.xp6(1),i.Tol(s.incrementButtonClass),i.Q6J("ngClass",i.DdM(10,ll))("icon",s.incrementButtonIcon)("disabled",s.disabled),i.xp6(1),i.Tol(s.decrementButtonClass),i.Q6J("ngClass",i.DdM(11,Ml))("icon",s.decrementButtonIcon)("disabled",s.disabled)}}function le(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"button",8),i.NdJ("mousedown",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onUpButtonMouseDown(b))})("mouseup",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onUpButtonMouseUp())})("mouseleave",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onUpButtonMouseLeave())})("keydown",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onUpButtonKeyDown(b))})("keyup",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onUpButtonKeyUp())}),i.qZA()}if(2&y){const s=i.oxw();i.Tol(s.incrementButtonClass),i.Q6J("ngClass",i.DdM(5,ll))("icon",s.incrementButtonIcon)("disabled",s.disabled)}}function Y(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"button",8),i.NdJ("mousedown",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onDownButtonMouseDown(b))})("mouseup",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onDownButtonMouseUp())})("mouseleave",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onDownButtonMouseLeave())})("keydown",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onDownButtonKeyDown(b))})("keyup",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onDownButtonKeyUp())}),i.qZA()}if(2&y){const s=i.oxw();i.Tol(s.decrementButtonClass),i.Q6J("ngClass",i.DdM(5,Ml))("icon",s.decrementButtonIcon)("disabled",s.disabled)}}const _e=function(y,V,s){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":y,"p-inputnumber-buttons-horizontal":V,"p-inputnumber-buttons-vertical":s}},$e={provide:Be.JU,useExisting:(0,i.Gpc)(()=>Rt),multi:!0};let Rt=(()=>{class y{constructor(s,u){this.el=s,this.cd=u,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new i.vpe,this.onFocus=new i.vpe,this.onBlur=new i.vpe,this.onKeyDown=new i.vpe,this.onClear=new i.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(s){s&&(this.focused=!1),this._disabled=s,this.timer&&this.clearTimer()}ngOnChanges(s){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(b=>!!s[b])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const s=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),u=new Map(s.map((b,x)=>[b,x]));this._numeral=new RegExp(`[${s.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=b=>u.get(b)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const s=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${s.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const s=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=s.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const s=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${s.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const s=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${s.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const s=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=s.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const s=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=s.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(s){if(null!=s){if("-"===s)return s;if(this.format){let b=new Intl.NumberFormat(this.locale,this.getOptions()).format(s);return this.prefix&&(b=this.prefix+b),this.suffix&&(b+=this.suffix),b}return s.toString()}return""}parseValue(s){let u=s.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(u){if("-"===u)return u;let b=+u;return isNaN(b)?null:b}return null}repeat(s,u,b){if(this.readonly)return;let x=u||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(s,40,b)},x),this.spin(s,b)}spin(s,u){let b=this.step*u,x=this.parseValue(this.input.nativeElement.value)||0,Ce=this.validateValue(x+b);this.maxlength&&this.maxlength<this.formatValue(Ce).length||(this.updateInput(Ce,null,"spin",null),this.updateModel(s,Ce),this.handleOnInput(s,x,Ce))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(s){this.input.nativeElement.focus(),this.repeat(s,null,1),s.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(s){(32===s.keyCode||13===s.keyCode)&&this.repeat(s,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(s){this.input.nativeElement.focus(),this.repeat(s,null,-1),s.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(s){(32===s.keyCode||13===s.keyCode)&&this.repeat(s,null,-1)}onUserInput(s){this.readonly||(this.isSpecialChar&&(s.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(s){if(this.readonly)return;if(this.lastValue=s.target.value,s.shiftKey||s.altKey)return void(this.isSpecialChar=!0);let u=s.target.selectionStart,b=s.target.selectionEnd,x=s.target.value,Ce=null;switch(s.altKey&&s.preventDefault(),s.which){case 38:this.spin(s,1),s.preventDefault();break;case 40:this.spin(s,-1),s.preventDefault();break;case 37:this.isNumeralChar(x.charAt(u-1))||s.preventDefault();break;case 39:this.isNumeralChar(x.charAt(u))||s.preventDefault();break;case 13:Ce=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(Ce),this.input.nativeElement.setAttribute("aria-valuenow",Ce),this.updateModel(s,Ce);break;case 8:if(s.preventDefault(),u===b){const et=x.charAt(u-1),{decimalCharIndex:Mt,decimalCharIndexWithoutPrefix:fn}=this.getDecimalCharIndexes(x);if(this.isNumeralChar(et)){const wn=this.getDecimalLength(x);if(this._group.test(et))this._group.lastIndex=0,Ce=x.slice(0,u-2)+x.slice(u-1);else if(this._decimal.test(et))this._decimal.lastIndex=0,wn?this.input.nativeElement.setSelectionRange(u-1,u-1):Ce=x.slice(0,u-1)+x.slice(u);else if(Mt>0&&u>Mt){const wi=this.isDecimalMode()&&(this.minFractionDigits||0)<wn?"":"0";Ce=x.slice(0,u-1)+wi+x.slice(u)}else 1===fn?(Ce=x.slice(0,u-1)+"0"+x.slice(u),Ce=this.parseValue(Ce)>0?Ce:""):Ce=x.slice(0,u-1)+x.slice(u)}this.updateValue(s,Ce,null,"delete-single")}else Ce=this.deleteRange(x,u,b),this.updateValue(s,Ce,null,"delete-range");break;case 46:if(s.preventDefault(),u===b){const et=x.charAt(u),{decimalCharIndex:Mt,decimalCharIndexWithoutPrefix:fn}=this.getDecimalCharIndexes(x);if(this.isNumeralChar(et)){const wn=this.getDecimalLength(x);if(this._group.test(et))this._group.lastIndex=0,Ce=x.slice(0,u)+x.slice(u+2);else if(this._decimal.test(et))this._decimal.lastIndex=0,wn?this.input.nativeElement.setSelectionRange(u+1,u+1):Ce=x.slice(0,u)+x.slice(u+1);else if(Mt>0&&u>Mt){const wi=this.isDecimalMode()&&(this.minFractionDigits||0)<wn?"":"0";Ce=x.slice(0,u)+wi+x.slice(u+1)}else 1===fn?(Ce=x.slice(0,u)+"0"+x.slice(u+1),Ce=this.parseValue(Ce)>0?Ce:""):Ce=x.slice(0,u)+x.slice(u+1)}this.updateValue(s,Ce,null,"delete-back-single")}else Ce=this.deleteRange(x,u,b),this.updateValue(s,Ce,null,"delete-range")}this.onKeyDown.emit(s)}onInputKeyPress(s){if(this.readonly)return;s.preventDefault();let u=s.which||s.keyCode,b=String.fromCharCode(u);const x=this.isDecimalSign(b),Ce=this.isMinusSign(b);(48<=u&&u<=57||Ce||x)&&this.insert(s,b,{isDecimalSign:x,isMinusSign:Ce})}onPaste(s){if(!this.disabled&&!this.readonly){s.preventDefault();let u=(s.clipboardData||window.clipboardData).getData("Text");if(u){let b=this.parseValue(u);null!=b&&this.insert(s,b.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(s){return!(!this._minusSign.test(s)&&"-"!==s||(this._minusSign.lastIndex=0,0))}isDecimalSign(s){return!!this._decimal.test(s)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(s){let u=s.search(this._decimal);this._decimal.lastIndex=0;const x=s.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:u,decimalCharIndexWithoutPrefix:x}}getCharIndexes(s){const u=s.search(this._decimal);this._decimal.lastIndex=0;const b=s.search(this._minusSign);this._minusSign.lastIndex=0;const x=s.search(this._suffix);this._suffix.lastIndex=0;const Ce=s.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:u,minusCharIndex:b,suffixCharIndex:x,currencyCharIndex:Ce}}insert(s,u,b={isDecimalSign:!1,isMinusSign:!1}){const x=u.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==x)return;let Ce=this.input.nativeElement.selectionStart,et=this.input.nativeElement.selectionEnd,Mt=this.input.nativeElement.value.trim();const{decimalCharIndex:fn,minusCharIndex:wn,suffixCharIndex:wi,currencyCharIndex:hr}=this.getCharIndexes(Mt);let Pi;if(b.isMinusSign)0===Ce&&(Pi=Mt,(-1===wn||0!==et)&&(Pi=this.insertText(Mt,u,0,et)),this.updateValue(s,Pi,u,"insert"));else if(b.isDecimalSign)fn>0&&Ce===fn?this.updateValue(s,Mt,u,"insert"):(fn>Ce&&fn<et||-1===fn&&this.maxFractionDigits)&&(Pi=this.insertText(Mt,u,Ce,et),this.updateValue(s,Pi,u,"insert"));else{const ys=this.numberFormat.resolvedOptions().maximumFractionDigits,Dr=Ce!==et?"range-insert":"insert";if(fn>0&&Ce>fn){if(Ce+u.length-(fn+1)<=ys){const yr=hr>=Ce?hr-1:wi>=Ce?wi:Mt.length;Pi=Mt.slice(0,Ce)+u+Mt.slice(Ce+u.length,yr)+Mt.slice(yr),this.updateValue(s,Pi,u,Dr)}}else Pi=this.insertText(Mt,u,Ce,et),this.updateValue(s,Pi,u,Dr)}}insertText(s,u,b,x){if(2===("."===u?u:u.split(".")).length){const et=s.slice(b,x).search(this._decimal);return this._decimal.lastIndex=0,et>0?s.slice(0,b)+this.formatValue(u)+s.slice(x):s||this.formatValue(u)}return x-b===s.length?this.formatValue(u):0===b?u+s.slice(x):x===s.length?s.slice(0,b)+u:s.slice(0,b)+u+s.slice(x)}deleteRange(s,u,b){let x;return x=b-u===s.length?"":0===u?s.slice(b):b===s.length?s.slice(0,u):s.slice(0,u)+s.slice(b),x}initCursor(){let s=this.input.nativeElement.selectionStart,u=this.input.nativeElement.value,b=u.length,x=null,Ce=(this.prefixChar||"").length;u=u.replace(this._prefix,""),s-=Ce;let et=u.charAt(s);if(this.isNumeralChar(et))return s+Ce;let Mt=s-1;for(;Mt>=0;){if(et=u.charAt(Mt),this.isNumeralChar(et)){x=Mt+Ce;break}Mt--}if(null!==x)this.input.nativeElement.setSelectionRange(x+1,x+1);else{for(Mt=s;Mt<b;){if(et=u.charAt(Mt),this.isNumeralChar(et)){x=Mt+Ce;break}Mt++}null!==x&&this.input.nativeElement.setSelectionRange(x,x)}return x||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(s){return!(1!==s.length||!(this._numeral.test(s)||this._decimal.test(s)||this._group.test(s)||this._minusSign.test(s))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(s,u,b,x){let Ce=this.input.nativeElement.value,et=null;null!=u&&(et=this.parseValue(u),et=et||this.allowEmpty?et:0,this.updateInput(et,b,x,u),this.handleOnInput(s,Ce,et))}handleOnInput(s,u,b){this.isValueChanged(u,b)&&this.onInput.emit({originalEvent:s,value:b})}isValueChanged(s,u){return null===u&&null!==s||null!=u&&u!==("string"==typeof s?this.parseValue(s):s)}validateValue(s){return"-"===s||null==s?null:null!=this.min&&s<this.min?this.min:null!=this.max&&s>this.max?this.max:s}updateInput(s,u,b,x){u=u||"";let Ce=this.input.nativeElement.value,et=this.formatValue(s),Mt=Ce.length;if(et!==x&&(et=this.concatValues(et,x)),0===Mt){this.input.nativeElement.value=et,this.input.nativeElement.setSelectionRange(0,0);const wn=this.initCursor()+u.length;this.input.nativeElement.setSelectionRange(wn,wn)}else{let fn=this.input.nativeElement.selectionStart,wn=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<et.length)return;this.input.nativeElement.value=et;let wi=et.length;if("range-insert"===b){const hr=this.parseValue((Ce||"").slice(0,fn)),ys=(null!==hr?hr.toString():"").split("").join(`(${this.groupChar})?`),Dr=new RegExp(ys,"g");Dr.test(et);const yr=u.split("").join(`(${this.groupChar})?`),Zo=new RegExp(yr,"g");Zo.test(et.slice(Dr.lastIndex)),wn=Dr.lastIndex+Zo.lastIndex,this.input.nativeElement.setSelectionRange(wn,wn)}else if(wi===Mt)"insert"===b||"delete-back-single"===b?this.input.nativeElement.setSelectionRange(wn+1,wn+1):"delete-single"===b?this.input.nativeElement.setSelectionRange(wn-1,wn-1):("delete-range"===b||"spin"===b)&&this.input.nativeElement.setSelectionRange(wn,wn);else if("delete-back-single"===b){let hr=Ce.charAt(wn-1),Pi=Ce.charAt(wn),ys=Mt-wi,Dr=this._group.test(Pi);Dr&&1===ys?wn+=1:!Dr&&this.isNumeralChar(hr)&&(wn+=-1*ys+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(wn,wn)}else if("-"===Ce&&"insert"===b){this.input.nativeElement.setSelectionRange(0,0);const Pi=this.initCursor()+u.length+1;this.input.nativeElement.setSelectionRange(Pi,Pi)}else wn+=wi-Mt,this.input.nativeElement.setSelectionRange(wn,wn)}this.input.nativeElement.setAttribute("aria-valuenow",s)}concatValues(s,u){if(s&&u){let b=u.search(this._decimal);return this._decimal.lastIndex=0,-1!==b?s.split(this._decimal)[0]+u.slice(b):s}return s}getDecimalLength(s){if(s){const u=s.split(this._decimal);if(2===u.length)return u[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(s){this.focused=!0,this.onFocus.emit(s)}onInputBlur(s){this.focused=!1;let u=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(u),this.input.nativeElement.setAttribute("aria-valuenow",u),this.updateModel(s,u),this.onBlur.emit(s)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(s,u){this.value!==u&&(this.value=u,this.onModelChange(u)),this.onModelTouched()}writeValue(s){this.value=s,this.cd.markForCheck()}registerOnChange(s){this.onModelChange=s}registerOnTouched(s){this.onModelTouched=s}setDisabledState(s){this.disabled=s,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.SBq),i.Y36(i.sBO))},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-inputNumber"]],viewQuery:function(s,u){if(1&s&&i.Gf(Al,5),2&s){let b;i.iGM(b=i.CRH())&&(u.input=b.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(s,u){2&s&&i.ekj("p-inputwrapper-filled",u.filled)("p-inputwrapper-focus",u.focused)("p-inputnumber-clearable",u.showClear&&"vertical"!=u.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[i._Bn([$e]),i.TTD],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(s,u){1&s&&(i.TgZ(0,"span",0)(1,"input",1,2),i.NdJ("input",function(x){return u.onUserInput(x)})("keydown",function(x){return u.onInputKeyDown(x)})("keypress",function(x){return u.onInputKeyPress(x)})("paste",function(x){return u.onPaste(x)})("click",function(){return u.onInputClick()})("focus",function(x){return u.onInputFocus(x)})("blur",function(x){return u.onInputBlur(x)}),i.qZA(),i.YNc(3,Cc,1,0,"i",3),i.YNc(4,z,3,12,"span",4),i.YNc(5,le,1,6,"button",5),i.YNc(6,Y,1,6,"button",5),i.qZA()),2&s&&(i.Tol(u.styleClass),i.Q6J("ngClass",i.kEZ(28,_e,u.showButtons&&"stacked"===u.buttonLayout,u.showButtons&&"horizontal"===u.buttonLayout,u.showButtons&&"vertical"===u.buttonLayout))("ngStyle",u.style),i.xp6(1),i.Tol(u.inputStyleClass),i.Q6J("ngClass","p-inputnumber-input")("ngStyle",u.inputStyle)("value",u.formattedValue())("disabled",u.disabled)("readonly",u.readonly),i.uIk("placeholder",u.placeholder)("title",u.title)("id",u.inputId)("size",u.size)("name",u.name)("autocomplete",u.autocomplete)("maxlength",u.maxlength)("tabindex",u.tabindex)("aria-label",u.ariaLabel)("aria-required",u.ariaRequired)("required",u.required)("min",u.min)("max",u.max),i.xp6(2),i.Q6J("ngIf","vertical"!=u.buttonLayout&&u.showClear&&u.value),i.xp6(1),i.Q6J("ngIf",u.showButtons&&"stacked"===u.buttonLayout),i.xp6(1),i.Q6J("ngIf",u.showButtons&&"stacked"!==u.buttonLayout),i.xp6(1),i.Q6J("ngIf",u.showButtons&&"stacked"!==u.buttonLayout))},dependencies:[g.mk,g.O5,g.PC,nt.o,yt],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),y})(),jt=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,nt.j,rn]}),y})(),Za=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,_l,jt,Be.u5,Ee.m8,Me,_l,jt,Be.u5,Ee.m8]}),y})();var qa=Q(3928);const ia=["input"];function vl(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"i",5),i.NdJ("click",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.clear())}),i.qZA()}}function Ys(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"i",6),i.NdJ("click",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onMaskToggle())}),i.qZA()}if(2&y){const s=i.oxw();i.Q6J("ngClass",s.toggleIconClass())}}function Ql(y,V){1&y&&i.GkF(0)}function Jl(y,V){1&y&&i.GkF(0)}function Nr(y,V){if(1&y&&(i.ynx(0),i.YNc(1,Jl,1,0,"ng-container",8),i.BQk()),2&y){const s=i.oxw(2);i.xp6(1),i.Q6J("ngTemplateOutlet",s.contentTemplate)}}const Cs=function(y){return{width:y}};function Ya(y,V){if(1&y&&(i.TgZ(0,"div",11),i._UZ(1,"div",0),i.qZA(),i.TgZ(2,"div",12),i._uU(3),i.qZA()),2&y){const s=i.oxw(2);i.xp6(1),i.Q6J("ngClass",s.strengthClass())("ngStyle",i.VKq(3,Cs,s.meter?s.meter.width:"")),i.xp6(2),i.Oqu(s.infoText)}}function $r(y,V){1&y&&i.GkF(0)}const ra=function(y,V){return{showTransitionParams:y,hideTransitionParams:V}},Rl=function(y){return{value:"visible",params:y}};function cc(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",6,7),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onOverlayClick(b))})("@overlayAnimation.start",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onAnimationStart(b))})("@overlayAnimation.done",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onAnimationEnd(b))}),i.YNc(2,Ql,1,0,"ng-container",8),i.YNc(3,Nr,2,1,"ng-container",9),i.YNc(4,Ya,4,5,"ng-template",null,10,i.W1O),i.YNc(6,$r,1,0,"ng-container",8),i.qZA()}if(2&y){const s=i.MAs(5),u=i.oxw();i.Q6J("ngClass","p-password-panel p-component")("@overlayAnimation",i.VKq(9,Rl,i.WLB(6,ra,u.showTransitionOptions,u.hideTransitionOptions))),i.xp6(2),i.Q6J("ngTemplateOutlet",u.headerTemplate),i.xp6(1),i.Q6J("ngIf",u.contentTemplate)("ngIfElse",s),i.xp6(3),i.Q6J("ngTemplateOutlet",u.footerTemplate)}}const bl={provide:Be.JU,useExisting:(0,i.Gpc)(()=>Qs),multi:!0};let Qs=(()=>{class y{constructor(s,u,b,x){this.cd=s,this.config=u,this.el=b,this.overlayService=x,this.mediumRegex="^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})",this.strongRegex="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})",this.feedback=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.showClear=!1,this.onFocus=new i.vpe,this.onBlur=new i.vpe,this.onClear=new i.vpe,this.overlayVisible=!1,this.focused=!1,this.unmasked=!1,this.value=null,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngAfterContentInit(){this.templates.forEach(s=>{switch(s.getType()){case"content":default:this.contentTemplate=s.template;break;case"header":this.headerTemplate=s.template;break;case"footer":this.footerTemplate=s.template}})}ngOnInit(){this.infoText=this.promptText(),this.mediumCheckRegExp=new RegExp(this.mediumRegex),this.strongCheckRegExp=new RegExp(this.strongRegex),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.updateUI(this.value||"")})}onAnimationStart(s){switch(s.toState){case"visible":this.overlay=s.element,gi.P9.set("overlay",this.overlay,this.config.zIndex.overlay),this.appendContainer(),this.alignOverlay(),this.bindScrollListener(),this.bindResizeListener();break;case"void":this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null}}onAnimationEnd(s){"void"===s.toState&&gi.P9.clear(s.element)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):document.getElementById(this.appendTo).appendChild(this.overlay))}alignOverlay(){this.appendTo?(this.overlay.style.minWidth=ge.getOuterWidth(this.input.nativeElement)+"px",ge.absolutePosition(this.overlay,this.input.nativeElement)):ge.relativePosition(this.overlay,this.input.nativeElement)}onInput(s){this.value=s.target.value,this.onModelChange(this.value),this.onModelTouched()}onInputFocus(s){this.focused=!0,this.feedback&&(this.overlayVisible=!0),this.onFocus.emit(s)}onInputBlur(s){this.focused=!1,this.feedback&&(this.overlayVisible=!1),this.onBlur.emit(s)}onKeyDown(s){"Escape"===s.key&&(this.overlayVisible=!1)}onKeyUp(s){this.feedback&&(this.updateUI(s.target.value),this.overlayVisible||(this.overlayVisible=!0))}updateUI(s){let u=null,b=null;switch(this.testStrength(s)){case 1:u=this.weakText(),b={strength:"weak",width:"33.33%"};break;case 2:u=this.mediumText(),b={strength:"medium",width:"66.66%"};break;case 3:u=this.strongText(),b={strength:"strong",width:"100%"};break;default:u=this.promptText(),b=null}this.meter=b,this.infoText=u}onMaskToggle(){this.unmasked=!this.unmasked}onOverlayClick(s){this.overlayService.add({originalEvent:s,target:this.el.nativeElement})}testStrength(s){let u=0;return this.strongCheckRegExp.test(s)?u=3:this.mediumCheckRegExp.test(s)?u=2:s.length&&(u=1),u}writeValue(s){this.value=void 0===s?null:s,this.feedback&&this.updateUI(this.value||""),this.cd.markForCheck()}registerOnChange(s){this.onModelChange=s}registerOnTouched(s){this.onModelTouched=s}setDisabledState(s){this.disabled=s}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Ke(this.input.nativeElement,()=>{this.overlayVisible&&(this.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()}bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!ge.isTouchDevice()&&(this.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}containerClass(){return{"p-password p-component p-inputwrapper":!0,"p-input-icon-right":this.toggleMask}}inputFieldClass(){return{"p-password-input":!0,"p-disabled":this.disabled}}toggleIconClass(){return this.unmasked?"pi pi-eye-slash":"pi pi-eye"}strengthClass(){return`p-password-strength ${this.meter?this.meter.strength:""}`}filled(){return null!=this.value&&this.value.toString().length>0}promptText(){return this.promptLabel||this.getTranslation(Ee.ws.PASSWORD_PROMPT)}weakText(){return this.weakLabel||this.getTranslation(Ee.ws.WEAK)}mediumText(){return this.mediumLabel||this.getTranslation(Ee.ws.MEDIUM)}strongText(){return this.strongLabel||this.getTranslation(Ee.ws.STRONG)}restoreAppend(){this.overlay&&this.appendTo&&("body"===this.appendTo?document.body.removeChild(this.overlay):document.getElementById(this.appendTo).removeChild(this.overlay))}inputType(){return this.unmasked?"text":"password"}getTranslation(s){return this.config.getTranslation(s)}clear(){this.value=null,this.onModelChange(this.value),this.writeValue(this.value),this.onClear.emit()}ngOnDestroy(){this.overlay&&(gi.P9.clear(this.overlay),this.overlay=null),this.restoreAppend(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.sBO),i.Y36(Ee.b4),i.Y36(i.SBq),i.Y36(Ee.F0))},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-password"]],contentQueries:function(s,u,b){if(1&s&&i.Suo(b,Ee.jx,4),2&s){let x;i.iGM(x=i.CRH())&&(u.templates=x)}},viewQuery:function(s,u){if(1&s&&i.Gf(ia,5),2&s){let b;i.iGM(b=i.CRH())&&(u.input=b.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:8,hostBindings:function(s,u){2&s&&i.ekj("p-inputwrapper-filled",u.filled())("p-inputwrapper-focus",u.focused)("p-password-clearable",u.showClear)("p-password-mask",u.toggleMask)},inputs:{ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",label:"label",disabled:"disabled",promptLabel:"promptLabel",mediumRegex:"mediumRegex",strongRegex:"strongRegex",weakLabel:"weakLabel",mediumLabel:"mediumLabel",strongLabel:"strongLabel",inputId:"inputId",feedback:"feedback",appendTo:"appendTo",toggleMask:"toggleMask",inputStyleClass:"inputStyleClass",styleClass:"styleClass",style:"style",inputStyle:"inputStyle",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",placeholder:"placeholder",showClear:"showClear"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClear:"onClear"},features:[i._Bn([bl])],decls:6,vars:18,consts:[[3,"ngClass","ngStyle"],["pInputText","",3,"ngClass","ngStyle","value","input","focus","blur","keyup","keydown"],["input",""],["class","p-password-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],[1,"p-password-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","click"],["overlay",""],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["content",""],[1,"p-password-meter"],["className","p-password-info"]],template:function(s,u){1&s&&(i.TgZ(0,"div",0)(1,"input",1,2),i.NdJ("input",function(x){return u.onInput(x)})("focus",function(x){return u.onInputFocus(x)})("blur",function(x){return u.onInputBlur(x)})("keyup",function(x){return u.onKeyUp(x)})("keydown",function(x){return u.onKeyDown(x)}),i.qZA(),i.YNc(3,vl,1,0,"i",3),i.YNc(4,Ys,1,1,"i",4),i.YNc(5,cc,7,11,"div",4),i.qZA()),2&s&&(i.Tol(u.styleClass),i.Q6J("ngClass",u.containerClass())("ngStyle",u.style),i.xp6(1),i.Tol(u.inputStyleClass),i.Q6J("ngClass",u.inputFieldClass())("ngStyle",u.inputStyle)("value",u.value),i.uIk("label",u.label)("aria-label",u.ariaLabel)("aria-labelledBy",u.ariaLabelledBy)("id",u.inputId)("type",u.inputType())("placeholder",u.placeholder),i.xp6(2),i.Q6J("ngIf",u.showClear&&null!=u.value),i.xp6(1),i.Q6J("ngIf",u.toggleMask),i.xp6(1),i.Q6J("ngIf",u.overlayVisible))},dependencies:[g.mk,g.O5,g.tP,g.PC,nt.o],styles:[".p-password{position:relative;display:inline-flex}.p-password-panel{position:absolute;top:0;left:0}.p-password .p-password-panel{min-width:100%}.p-password-meter{height:10px}.p-password-strength{height:100%;width:0%;transition:width 1s ease-in-out}.p-fluid .p-password{display:flex}.p-password-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-password-clearable{position:relative}\n"],encapsulation:2,data:{animation:[(0,se.X$)("overlayAnimation",[(0,se.eR)(":enter",[(0,se.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,se.jt)("{{showTransitionParams}}")]),(0,se.eR)(":leave",[(0,se.jt)("{{hideTransitionParams}}",(0,se.oB)({opacity:0}))])])]},changeDetection:0}),y})(),jl=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,nt.j,Ee.m8]}),y})(),Ho=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez]}),y})();function ha(y,V){if(1&y&&i._UZ(0,"span",8),2&y){const s=i.oxw(2).$implicit;i.Tol(s.icon),i.Q6J("ngClass","p-button-icon p-button-icon-left")}}function cl(y,V){if(1&y&&(i.ynx(0),i.YNc(1,ha,1,3,"span",6),i.TgZ(2,"span",7),i._uU(3),i.qZA(),i.BQk()),2&y){const s=i.oxw().$implicit,u=i.oxw();i.xp6(1),i.Q6J("ngIf",s.icon),i.xp6(2),i.Oqu(u.getOptionLabel(s))}}function pn(y,V){1&y&&i.GkF(0)}const Fr=function(y,V){return{$implicit:y,index:V}};function sa(y,V){if(1&y&&i.YNc(0,pn,1,0,"ng-container",9),2&y){const s=i.oxw(),u=s.$implicit,b=s.index,x=i.oxw();i.Q6J("ngTemplateOutlet",x.itemTemplate)("ngTemplateOutletContext",i.WLB(2,Fr,u,b))}}const ul=function(y,V,s){return{"p-highlight":y,"p-disabled":V,"p-button-icon-only":s}};function Vn(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",2,3),i.NdJ("click",function(b){const x=i.CHM(s),Ce=x.$implicit,et=x.index,Mt=i.oxw();return i.KtG(Mt.onItemClick(b,Ce,et))})("keydown.enter",function(b){const x=i.CHM(s),Ce=x.$implicit,et=x.index,Mt=i.oxw();return i.KtG(Mt.onItemClick(b,Ce,et))})("blur",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onBlur())}),i.YNc(2,cl,4,2,"ng-container",4),i.YNc(3,sa,1,5,"ng-template",null,5,i.W1O),i.qZA()}if(2&y){const s=V.$implicit,u=i.MAs(4),b=i.oxw();i.Tol(s.styleClass),i.Q6J("ngClass",i.kEZ(10,ul,b.isSelected(s),b.disabled||b.isOptionDisabled(s),s.icon&&!b.getOptionLabel(s))),i.uIk("aria-pressed",b.isSelected(s))("title",s.title)("aria-label",s.label)("tabindex",b.disabled?null:b.tabindex)("aria-labelledby",b.getOptionLabel(s)),i.xp6(2),i.Q6J("ngIf",!b.itemTemplate)("ngIfElse",u)}}const Fn={provide:Be.JU,useExisting:(0,i.Gpc)(()=>lo),multi:!0};let lo=(()=>{class y{constructor(s){this.cd=s,this.tabindex=0,this.onOptionClick=new i.vpe,this.onChange=new i.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(s){return this.optionLabel?gi.gb.resolveFieldData(s,this.optionLabel):null!=s.label?s.label:s}getOptionValue(s){return this.optionValue?gi.gb.resolveFieldData(s,this.optionValue):this.optionLabel||void 0===s.value?s:s.value}isOptionDisabled(s){return this.optionDisabled?gi.gb.resolveFieldData(s,this.optionDisabled):void 0!==s.disabled&&s.disabled}writeValue(s){this.value=s,this.cd.markForCheck()}registerOnChange(s){this.onModelChange=s}registerOnTouched(s){this.onModelTouched=s}setDisabledState(s){this.disabled=s,this.cd.markForCheck()}onItemClick(s,u,b){if(!this.disabled&&!this.isOptionDisabled(u)){if(this.multiple)this.isSelected(u)?this.removeOption(u):this.value=[...this.value||[],this.getOptionValue(u)],this.onModelChange(this.value),this.onChange.emit({originalEvent:s,value:this.value});else{let x=this.getOptionValue(u);this.value!==x&&(this.value=this.getOptionValue(u),this.onModelChange(this.value),this.onChange.emit({originalEvent:s,value:this.value}))}this.onOptionClick.emit({originalEvent:s,option:u,index:b})}}onBlur(){this.onModelTouched()}removeOption(s){this.value=this.value.filter(u=>!gi.gb.equals(u,this.getOptionValue(s),this.dataKey))}isSelected(s){let u=!1,b=this.getOptionValue(s);if(this.multiple){if(this.value)for(let x of this.value)if(gi.gb.equals(x,b,this.dataKey)){u=!0;break}}else u=gi.gb.equals(this.getOptionValue(s),this.value,this.dataKey);return u}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.sBO))},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-selectButton"]],contentQueries:function(s,u,b){if(1&s&&i.Suo(b,i.Rgc,5),2&s){let x;i.iGM(x=i.CRH())&&(u.itemTemplate=x.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[i._Bn([Fn])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,u){1&s&&(i.TgZ(0,"div",0),i.YNc(1,Vn,5,14,"div",1),i.qZA()),2&s&&(i.Tol(u.styleClass),i.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",u.style),i.xp6(1),i.Q6J("ngForOf",u.options))},dependencies:[g.mk,g.sg,g.O5,g.tP,g.PC,Oe],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n"],encapsulation:2,changeDetection:0}),y})(),Dn=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,Me]}),y})();const Ht=function(y,V,s){return{"p-checkbox-label-active":y,"p-disabled":V,"p-checkbox-label-focus":s}};function sn(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"label",7),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw(),Ce=i.MAs(3);return i.KtG(x.onClick(b,Ce))}),i._uU(1),i.qZA()}if(2&y){const s=i.oxw();i.Q6J("ngClass",i.kEZ(3,Ht,null!=s.value,s.disabled,s.focused)),i.uIk("for",s.inputId),i.xp6(1),i.Oqu(s.label)}}const Ls=function(y,V){return{"p-checkbox p-component":!0,"p-checkbox-disabled":y,"p-checkbox-focused":V}},kl=function(y,V,s){return{"p-highlight":y,"p-disabled":V,"p-focus":s}},Tc={provide:Be.JU,useExisting:(0,i.Gpc)(()=>Ic),multi:!0};let Ic=(()=>{class y{constructor(s){this.cd=s,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new i.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(s,u){!this.disabled&&!this.readonly&&(this.toggle(s),this.focused=!0,u.focus())}onKeydown(s){32==s.keyCode&&s.preventDefault()}onKeyup(s){32==s.keyCode&&!this.readonly&&(this.toggle(s),s.preventDefault())}toggle(s){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:s,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(s){this.onModelChange=s}registerOnTouched(s){this.onModelTouched=s}writeValue(s){this.value=s,this.cd.markForCheck()}setDisabledState(s){this.disabled=s,this.cd.markForCheck()}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.sBO))},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[i._Bn([Tc])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(s,u){if(1&s){const b=i.EpF();i.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),i.NdJ("keyup",function(Ce){return u.onKeyup(Ce)})("keydown",function(Ce){return u.onKeydown(Ce)})("focus",function(){return u.onFocus()})("blur",function(){return u.onBlur()}),i.qZA()(),i.TgZ(4,"div",4),i.NdJ("click",function(Ce){i.CHM(b);const et=i.MAs(3);return i.KtG(u.onClick(Ce,et))}),i._UZ(5,"span",5),i.qZA()(),i.YNc(6,sn,2,7,"label",6)}2&s&&(i.Tol(u.styleClass),i.Q6J("ngStyle",u.style)("ngClass",i.WLB(14,Ls,u.disabled,u.focused)),i.xp6(2),i.Q6J("name",u.name)("readonly",u.readonly)("disabled",u.disabled),i.uIk("id",u.inputId)("tabindex",u.tabindex)("aria-labelledby",u.ariaLabelledBy),i.xp6(2),i.Q6J("ngClass",i.kEZ(17,kl,null!=u.value,u.disabled,u.focused)),i.uIk("aria-checked",!0===u.value),i.xp6(1),i.Q6J("ngClass",!0===u.value?u.checkboxTrueIcon:!1===u.value?u.checkboxFalseIcon:""),i.xp6(1),i.Q6J("ngIf",u.label))},dependencies:[g.mk,g.O5,g.PC],encapsulation:2,changeDetection:0}),y})(),Xl=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez]}),y})();const ec=["container"],dl=["inputfield"],fa=["contentWrapper"];function Ms(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"i",8),i.NdJ("click",function(){i.CHM(s);const b=i.oxw(2);return i.KtG(b.clear())}),i.qZA()}}function Pa(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"button",9),i.NdJ("click",function(b){i.CHM(s),i.oxw();const x=i.MAs(1),Ce=i.oxw();return i.KtG(Ce.onButtonClick(b,x))}),i.qZA()}if(2&y){const s=i.oxw(2);i.Q6J("icon",s.icon)("disabled",s.disabled),i.uIk("aria-label",s.iconAriaLabel)}}function Qa(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"input",4,5),i.NdJ("focus",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onInputFocus(b))})("keydown",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onInputKeydown(b))})("click",function(){i.CHM(s);const b=i.oxw();return i.KtG(b.onInputClick())})("blur",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onInputBlur(b))})("input",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onUserInput(b))}),i.qZA(),i.YNc(2,Ms,1,0,"i",6),i.YNc(3,Pa,1,3,"button",7)}if(2&y){const s=i.oxw();i.Tol(s.inputStyleClass),i.Q6J("value",s.inputFieldValue)("readonly",s.readonlyInput)("ngStyle",s.inputStyle)("placeholder",s.placeholder||"")("disabled",s.disabled)("ngClass","p-inputtext p-component"),i.uIk("id",s.inputId)("name",s.name)("required",s.required)("aria-required",s.required)("tabindex",s.tabindex)("inputmode",s.touchUI?"off":null)("aria-labelledby",s.ariaLabelledBy),i.xp6(2),i.Q6J("ngIf",s.showClear&&!s.disabled&&null!=s.value),i.xp6(1),i.Q6J("ngIf",s.showIcon)}}function jo(y,V){1&y&&i.GkF(0)}function Mi(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"button",30),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.onContainerButtonKeydown(b))})("click",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.onPrevButtonClick(b))}),i._UZ(1,"span",31),i.qZA()}}function Lo(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"button",32),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.switchToMonthView(b))})("keydown",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.onContainerButtonKeydown(b))}),i._uU(1),i.qZA()}if(2&y){const s=i.oxw().$implicit,u=i.oxw(3);i.Q6J("disabled",u.switchViewButtonDisabled()),i.xp6(1),i.hij(" ",u.getMonthName(s.month)," ")}}function pa(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"button",33),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.switchToYearView(b))})("keydown",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.onContainerButtonKeydown(b))}),i._uU(1),i.qZA()}if(2&y){const s=i.oxw().$implicit,u=i.oxw(3);i.Q6J("disabled",u.switchViewButtonDisabled()),i.xp6(1),i.hij(" ",u.getYear(s)," ")}}function Qr(y,V){if(1&y&&(i.ynx(0),i._uU(1),i.BQk()),2&y){const s=i.oxw(5);i.xp6(1),i.AsE("",s.yearPickerValues()[0]," - ",s.yearPickerValues()[s.yearPickerValues().length-1],"")}}function An(y,V){1&y&&i.GkF(0)}const tc=function(y){return{$implicit:y}};function gr(y,V){if(1&y&&(i.TgZ(0,"span",34),i.YNc(1,Qr,2,2,"ng-container",13),i.YNc(2,An,1,0,"ng-container",35),i.qZA()),2&y){const s=i.oxw(4);i.xp6(1),i.Q6J("ngIf",!s.decadeTemplate),i.xp6(1),i.Q6J("ngTemplateOutlet",s.decadeTemplate)("ngTemplateOutletContext",i.VKq(3,tc,s.yearPickerValues))}}function Xc(y,V){if(1&y&&(i.TgZ(0,"th",41)(1,"span"),i._uU(2),i.qZA()()),2&y){const s=i.oxw(5);i.xp6(2),i.Oqu(s.getTranslation("weekHeader"))}}function Rs(y,V){if(1&y&&(i.TgZ(0,"th",42)(1,"span"),i._uU(2),i.qZA()()),2&y){const s=V.$implicit;i.xp6(2),i.Oqu(s)}}function bn(y,V){if(1&y&&(i.TgZ(0,"td",45)(1,"span",46),i._uU(2),i.qZA()()),2&y){const s=i.oxw().index,u=i.oxw(2).$implicit;i.xp6(2),i.hij(" ",u.weekNumbers[s]," ")}}function Cl(y,V){if(1&y&&(i.ynx(0),i._uU(1),i.BQk()),2&y){const s=i.oxw(2).$implicit;i.xp6(1),i.Oqu(s.day)}}function zo(y,V){1&y&&i.GkF(0)}const Na=function(y,V){return{"p-highlight":y,"p-disabled":V}};function Gc(y,V){if(1&y){const s=i.EpF();i.ynx(0),i.TgZ(1,"span",48),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw().$implicit,Ce=i.oxw(6);return i.KtG(Ce.onDateSelect(b,x))})("keydown",function(b){i.CHM(s);const x=i.oxw().$implicit,Ce=i.oxw(3).index,et=i.oxw(3);return i.KtG(et.onDateCellKeydown(b,x,Ce))}),i.YNc(2,Cl,2,1,"ng-container",13),i.YNc(3,zo,1,0,"ng-container",35),i.qZA(),i.BQk()}if(2&y){const s=i.oxw().$implicit,u=i.oxw(6);i.xp6(1),i.Q6J("ngClass",i.WLB(4,Na,u.isSelected(s),!s.selectable)),i.xp6(1),i.Q6J("ngIf",!u.dateTemplate),i.xp6(1),i.Q6J("ngTemplateOutlet",u.dateTemplate)("ngTemplateOutletContext",i.VKq(7,tc,s))}}const uc=function(y,V){return{"p-datepicker-other-month":y,"p-datepicker-today":V}};function Vs(y,V){if(1&y&&(i.TgZ(0,"td",47),i.YNc(1,Gc,4,9,"ng-container",13),i.qZA()),2&y){const s=V.$implicit,u=i.oxw(6);i.Q6J("ngClass",i.WLB(2,uc,s.otherMonth,s.today)),i.xp6(1),i.Q6J("ngIf",!s.otherMonth||u.showOtherMonths)}}function hl(y,V){if(1&y&&(i.TgZ(0,"tr"),i.YNc(1,bn,3,1,"td",43),i.YNc(2,Vs,2,5,"td",44),i.qZA()),2&y){const s=V.$implicit,u=i.oxw(5);i.xp6(1),i.Q6J("ngIf",u.showWeek),i.xp6(1),i.Q6J("ngForOf",s)}}function zl(y,V){if(1&y&&(i.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),i.YNc(4,Xc,3,1,"th",38),i.YNc(5,Rs,3,1,"th",39),i.qZA()(),i.TgZ(6,"tbody"),i.YNc(7,hl,3,2,"tr",40),i.qZA()()()),2&y){const s=i.oxw().$implicit,u=i.oxw(3);i.xp6(4),i.Q6J("ngIf",u.showWeek),i.xp6(1),i.Q6J("ngForOf",u.weekDays),i.xp6(2),i.Q6J("ngForOf",s.dates)}}function Ol(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",20)(1,"div",21),i.YNc(2,Mi,2,0,"button",22),i.TgZ(3,"div",23),i.YNc(4,Lo,2,2,"button",24),i.YNc(5,pa,2,2,"button",25),i.YNc(6,gr,3,5,"span",26),i.qZA(),i.TgZ(7,"button",27),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onContainerButtonKeydown(b))})("click",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onNextButtonClick(b))}),i._UZ(8,"span",28),i.qZA()(),i.YNc(9,zl,8,3,"div",29),i.qZA()}if(2&y){const s=V.index,u=i.oxw(3);i.xp6(2),i.Q6J("ngIf",0===s),i.xp6(2),i.Q6J("ngIf","date"===u.currentView),i.xp6(1),i.Q6J("ngIf","year"!==u.currentView),i.xp6(1),i.Q6J("ngIf","year"===u.currentView),i.xp6(1),i.Udp("display",1===u.numberOfMonths||s===u.numberOfMonths-1?"inline-flex":"none"),i.xp6(2),i.Q6J("ngIf","date"===u.currentView)}}const Lr=function(y){return{"p-highlight":y}};function wo(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"span",51),i.NdJ("click",function(b){const Ce=i.CHM(s).index,et=i.oxw(4);return i.KtG(et.onMonthSelect(b,Ce))})("keydown",function(b){const Ce=i.CHM(s).index,et=i.oxw(4);return i.KtG(et.onMonthCellKeydown(b,Ce))}),i._uU(1),i.qZA()}if(2&y){const s=V.$implicit,u=V.index,b=i.oxw(4);i.Q6J("ngClass",i.VKq(2,Lr,b.isMonthSelected(u))),i.xp6(1),i.hij(" ",s," ")}}function Ja(y,V){if(1&y&&(i.TgZ(0,"div",49),i.YNc(1,wo,2,4,"span",50),i.qZA()),2&y){const s=i.oxw(3);i.xp6(1),i.Q6J("ngForOf",s.monthPickerValues())}}function Gl(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"span",54),i.NdJ("click",function(b){const Ce=i.CHM(s).$implicit,et=i.oxw(4);return i.KtG(et.onYearSelect(b,Ce))})("keydown",function(b){const Ce=i.CHM(s).$implicit,et=i.oxw(4);return i.KtG(et.onYearCellKeydown(b,Ce))}),i._uU(1),i.qZA()}if(2&y){const s=V.$implicit,u=i.oxw(4);i.Q6J("ngClass",i.VKq(2,Lr,u.isYearSelected(s))),i.xp6(1),i.hij(" ",s," ")}}function xo(y,V){if(1&y&&(i.TgZ(0,"div",52),i.YNc(1,Gl,2,4,"span",53),i.qZA()),2&y){const s=i.oxw(3);i.xp6(1),i.Q6J("ngForOf",s.yearPickerValues())}}function fl(y,V){if(1&y&&(i.ynx(0),i.TgZ(1,"div",16),i.YNc(2,Ol,10,7,"div",17),i.qZA(),i.YNc(3,Ja,2,1,"div",18),i.YNc(4,xo,2,1,"div",19),i.BQk()),2&y){const s=i.oxw(2);i.xp6(2),i.Q6J("ngForOf",s.months),i.xp6(1),i.Q6J("ngIf","month"===s.currentView),i.xp6(1),i.Q6J("ngIf","year"===s.currentView)}}function D(y,V){1&y&&(i.ynx(0),i._uU(1,"0"),i.BQk())}function N(y,V){1&y&&(i.ynx(0),i._uU(1,"0"),i.BQk())}function R(y,V){if(1&y&&(i.TgZ(0,"div",60)(1,"span"),i._uU(2),i.qZA()()),2&y){const s=i.oxw(3);i.xp6(2),i.Oqu(s.timeSeparator)}}function H(y,V){1&y&&(i.ynx(0),i._uU(1,"0"),i.BQk())}function te(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",65)(1,"button",57),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onContainerButtonKeydown(b))})("keydown.enter",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.incrementSecond(b))})("keydown.space",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.incrementSecond(b))})("mousedown",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onTimePickerElementMouseDown(b,2,1))})("mouseup",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.enter",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.space",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onTimePickerElementMouseUp(b))})("mouseleave",function(){i.CHM(s);const b=i.oxw(3);return i.KtG(b.onTimePickerElementMouseLeave())}),i._UZ(2,"span",58),i.qZA(),i.TgZ(3,"span"),i.YNc(4,H,2,0,"ng-container",13),i._uU(5),i.qZA(),i.TgZ(6,"button",57),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onContainerButtonKeydown(b))})("keydown.enter",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.decrementSecond(b))})("keydown.space",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.decrementSecond(b))})("mousedown",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onTimePickerElementMouseDown(b,2,-1))})("mouseup",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.enter",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.space",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onTimePickerElementMouseUp(b))})("mouseleave",function(){i.CHM(s);const b=i.oxw(3);return i.KtG(b.onTimePickerElementMouseLeave())}),i._UZ(7,"span",59),i.qZA()()}if(2&y){const s=i.oxw(3);i.xp6(4),i.Q6J("ngIf",s.currentSecond<10),i.xp6(1),i.Oqu(s.currentSecond)}}function me(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",66)(1,"button",67),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onContainerButtonKeydown(b))})("click",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.toggleAMPM(b))})("keydown.enter",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.toggleAMPM(b))}),i._UZ(2,"span",58),i.qZA(),i.TgZ(3,"span"),i._uU(4),i.qZA(),i.TgZ(5,"button",67),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.onContainerButtonKeydown(b))})("click",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.toggleAMPM(b))})("keydown.enter",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.toggleAMPM(b))}),i._UZ(6,"span",59),i.qZA()()}if(2&y){const s=i.oxw(3);i.xp6(4),i.Oqu(s.pm?"PM":"AM")}}function Pe(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",55)(1,"div",56)(2,"button",57),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onContainerButtonKeydown(b))})("keydown.enter",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.incrementHour(b))})("keydown.space",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.incrementHour(b))})("mousedown",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseDown(b,0,1))})("mouseup",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.enter",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.space",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("mouseleave",function(){i.CHM(s);const b=i.oxw(2);return i.KtG(b.onTimePickerElementMouseLeave())}),i._UZ(3,"span",58),i.qZA(),i.TgZ(4,"span"),i.YNc(5,D,2,0,"ng-container",13),i._uU(6),i.qZA(),i.TgZ(7,"button",57),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onContainerButtonKeydown(b))})("keydown.enter",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.decrementHour(b))})("keydown.space",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.decrementHour(b))})("mousedown",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseDown(b,0,-1))})("mouseup",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.enter",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.space",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("mouseleave",function(){i.CHM(s);const b=i.oxw(2);return i.KtG(b.onTimePickerElementMouseLeave())}),i._UZ(8,"span",59),i.qZA()(),i.TgZ(9,"div",60)(10,"span"),i._uU(11),i.qZA()(),i.TgZ(12,"div",61)(13,"button",57),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onContainerButtonKeydown(b))})("keydown.enter",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.incrementMinute(b))})("keydown.space",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.incrementMinute(b))})("mousedown",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseDown(b,1,1))})("mouseup",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.enter",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.space",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("mouseleave",function(){i.CHM(s);const b=i.oxw(2);return i.KtG(b.onTimePickerElementMouseLeave())}),i._UZ(14,"span",58),i.qZA(),i.TgZ(15,"span"),i.YNc(16,N,2,0,"ng-container",13),i._uU(17),i.qZA(),i.TgZ(18,"button",57),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onContainerButtonKeydown(b))})("keydown.enter",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.decrementMinute(b))})("keydown.space",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.decrementMinute(b))})("mousedown",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseDown(b,1,-1))})("mouseup",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.enter",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("keyup.space",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTimePickerElementMouseUp(b))})("mouseleave",function(){i.CHM(s);const b=i.oxw(2);return i.KtG(b.onTimePickerElementMouseLeave())}),i._UZ(19,"span",59),i.qZA()(),i.YNc(20,R,3,1,"div",62),i.YNc(21,te,8,2,"div",63),i.YNc(22,me,7,1,"div",64),i.qZA()}if(2&y){const s=i.oxw(2);i.xp6(5),i.Q6J("ngIf",s.currentHour<10),i.xp6(1),i.Oqu(s.currentHour),i.xp6(5),i.Oqu(s.timeSeparator),i.xp6(5),i.Q6J("ngIf",s.currentMinute<10),i.xp6(1),i.Oqu(s.currentMinute),i.xp6(3),i.Q6J("ngIf",s.showSeconds),i.xp6(1),i.Q6J("ngIf",s.showSeconds),i.xp6(1),i.Q6J("ngIf","12"==s.hourFormat)}}const Ze=function(y){return[y]};function Bt(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",68)(1,"button",69),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onContainerButtonKeydown(b))})("click",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onTodayButtonClick(b))}),i.qZA(),i.TgZ(2,"button",69),i.NdJ("keydown",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onContainerButtonKeydown(b))})("click",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onClearButtonClick(b))}),i.qZA()()}if(2&y){const s=i.oxw(2);i.xp6(1),i.Q6J("label",s.getTranslation("today"))("ngClass",i.VKq(4,Ze,s.todayButtonStyleClass)),i.xp6(1),i.Q6J("label",s.getTranslation("clear"))("ngClass",i.VKq(6,Ze,s.clearButtonStyleClass))}}function Tn(y,V){1&y&&i.GkF(0)}const Vi=function(y,V,s,u,b,x){return{"p-datepicker p-component":!0,"p-datepicker-inline":y,"p-disabled":V,"p-datepicker-timeonly":s,"p-datepicker-multiple-month":u,"p-datepicker-monthpicker":b,"p-datepicker-touch-ui":x}},jn=function(y,V){return{showTransitionParams:y,hideTransitionParams:V}},Bi=function(y){return{value:"visibleTouchUI",params:y}},os=function(y){return{value:"visible",params:y}};function Vr(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",10,11),i.NdJ("@overlayAnimation.start",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onOverlayAnimationStart(b))})("@overlayAnimation.done",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onOverlayAnimationDone(b))})("click",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onOverlayClick(b))}),i.Hsn(2),i.YNc(3,jo,1,0,"ng-container",12),i.YNc(4,fl,5,3,"ng-container",13),i.YNc(5,Pe,23,8,"div",14),i.YNc(6,Bt,3,8,"div",15),i.Hsn(7,1),i.YNc(8,Tn,1,0,"ng-container",12),i.qZA()}if(2&y){const s=i.oxw();i.Tol(s.panelStyleClass),i.Q6J("ngStyle",s.panelStyle)("ngClass",i.HTZ(11,Vi,s.inline,s.disabled,s.timeOnly,s.numberOfMonths>1,"month"===s.view,s.touchUI))("@overlayAnimation",s.touchUI?i.VKq(21,Bi,i.WLB(18,jn,s.showTransitionOptions,s.hideTransitionOptions)):i.VKq(26,os,i.WLB(23,jn,s.showTransitionOptions,s.hideTransitionOptions)))("@.disabled",!0===s.inline),i.xp6(3),i.Q6J("ngTemplateOutlet",s.headerTemplate),i.xp6(1),i.Q6J("ngIf",!s.timeOnly),i.xp6(1),i.Q6J("ngIf",(s.showTime||s.timeOnly)&&"date"===s.currentView),i.xp6(1),i.Q6J("ngIf",s.showButtonBar),i.xp6(2),i.Q6J("ngTemplateOutlet",s.footerTemplate)}}const Xa=[[["p-header"]],[["p-footer"]]],Mr=function(y,V,s,u){return{"p-calendar":!0,"p-calendar-w-btn":y,"p-calendar-timeonly":V,"p-calendar-disabled":s,"p-focus":u}},Go=["p-header","p-footer"],Br={provide:Be.JU,useExisting:(0,i.Gpc)(()=>qi),multi:!0};let qi=(()=>{class y{constructor(s,u,b,x,Ce,et){this.el=s,this.renderer=u,this.cd=b,this.zone=x,this.config=Ce,this.overlayService=et,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new i.vpe,this.onBlur=new i.vpe,this.onClose=new i.vpe,this.onSelect=new i.vpe,this.onClear=new i.vpe,this.onInput=new i.vpe,this.onTodayClick=new i.vpe,this.onClearClick=new i.vpe,this.onMonthChange=new i.vpe,this.onYearChange=new i.vpe,this.onClickOutside=new i.vpe,this.onShow=new i.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(Mt,fn){return"12"==this.hourFormat?12===Mt?fn?12:0:fn?Mt+12:Mt:Mt}}set content(s){this.contentViewChild=s,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(s){this._view=s,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(s){if(this._defaultDate=s,this.initialized){const u=s||new Date;this.currentMonth=u.getMonth(),this.currentYear=u.getFullYear(),this.initTime(u),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(s){this._minDate=s,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(s){this._maxDate=s,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(s){this._disabledDates=s,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(s){this._disabledDays=s,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(s){if(this._yearRange=s,s){const u=s.split(":"),b=parseInt(u[0]),x=parseInt(u[1]);this.populateYearOptions(b,x)}}get showTime(){return this._showTime}set showTime(s){this._showTime=s,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(s){this._responsiveOptions=s,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(s){this._numberOfMonths=s,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(s){this._firstDayOfWeek=s,this.createWeekDays()}set locale(s){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=(0,gi.Th)();const s=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=s.getMonth(),this.currentYear=s.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(s),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(s=>{switch(s.getType()){case"date":default:this.dateTemplate=s.template;break;case"decade":this.decadeTemplate=s.template;break;case"disabledDate":this.disabledDateTemplate=s.template;break;case"header":this.headerTemplate=s.template;break;case"footer":this.footerTemplate=s.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=ge.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(s){return this.config.getTranslation(s)}populateYearOptions(s,u){this.yearOptions=[];for(let b=s;b<=u;b++)this.yearOptions.push(b)}createWeekDays(){this.weekDays=[];let s=this.getFirstDateOfWeek(),u=this.getTranslation(Ee.ws.DAY_NAMES_MIN);for(let b=0;b<7;b++)this.weekDays.push(u[s]),s=6==s?0:++s}monthPickerValues(){let s=[];for(let u=0;u<=11;u++)s.push(this.config.getTranslation("monthNamesShort")[u]);return s}yearPickerValues(){let s=[],u=this.currentYear-this.currentYear%10;for(let b=0;b<10;b++)s.push(u+b);return s}createMonths(s,u){this.months=this.months=[];for(let b=0;b<this.numberOfMonths;b++){let x=s+b,Ce=u;x>11&&(x=x%11-1,Ce=u+1),this.months.push(this.createMonth(x,Ce))}}getWeekNumber(s){let u=new Date(s.getTime());u.setDate(u.getDate()+4-(u.getDay()||7));let b=u.getTime();return u.setMonth(0),u.setDate(1),Math.floor(Math.round((b-u.getTime())/864e5)/7)+1}createMonth(s,u){let b=[],x=this.getFirstDayOfMonthIndex(s,u),Ce=this.getDaysCountInMonth(s,u),et=this.getDaysCountInPrevMonth(s,u),Mt=1,fn=new Date,wn=[],wi=Math.ceil((Ce+x)/7);for(let hr=0;hr<wi;hr++){let Pi=[];if(0==hr){for(let Dr=et-x+1;Dr<=et;Dr++){let yr=this.getPreviousMonthAndYear(s,u);Pi.push({day:Dr,month:yr.month,year:yr.year,otherMonth:!0,today:this.isToday(fn,Dr,yr.month,yr.year),selectable:this.isSelectable(Dr,yr.month,yr.year,!0)})}let ys=7-Pi.length;for(let Dr=0;Dr<ys;Dr++)Pi.push({day:Mt,month:s,year:u,today:this.isToday(fn,Mt,s,u),selectable:this.isSelectable(Mt,s,u,!1)}),Mt++}else for(let ys=0;ys<7;ys++){if(Mt>Ce){let Dr=this.getNextMonthAndYear(s,u);Pi.push({day:Mt-Ce,month:Dr.month,year:Dr.year,otherMonth:!0,today:this.isToday(fn,Mt-Ce,Dr.month,Dr.year),selectable:this.isSelectable(Mt-Ce,Dr.month,Dr.year,!0)})}else Pi.push({day:Mt,month:s,year:u,today:this.isToday(fn,Mt,s,u),selectable:this.isSelectable(Mt,s,u,!1)});Mt++}this.showWeek&&wn.push(this.getWeekNumber(new Date(Pi[0].year,Pi[0].month,Pi[0].day))),b.push(Pi)}return{month:s,year:u,dates:b,weekNumbers:wn}}initTime(s){this.pm=s.getHours()>11,this.showTime?(this.currentMinute=s.getMinutes(),this.currentSecond=s.getSeconds(),this.setCurrentHourPM(s.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(s){this.disabled?s.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(s){this.disabled?s.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let s=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-s,this.yearOptions[this.yearOptions.length-1]-s)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let s=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+s,this.yearOptions[this.yearOptions.length-1]+s)}}switchToMonthView(s){this.setCurrentView("month"),s.preventDefault()}switchToYearView(s){this.setCurrentView("year"),s.preventDefault()}onDateSelect(s,u){!this.disabled&&u.selectable?(this.isMultipleSelection()&&this.isSelected(u)?(this.value=this.value.filter((b,x)=>!this.isDateEquals(b,u)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(u)&&this.selectDate(u),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{s.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),s.preventDefault()):s.preventDefault()}shouldSelectDate(s){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(s,u){"month"===this.view?this.onDateSelect(s,{year:this.currentYear,month:u,day:1,selectable:!0}):(this.currentMonth=u,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(s,u){"year"===this.view?this.onDateSelect(s,{year:u,month:0,day:1,selectable:!0}):(this.currentYear=u,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let s="";if(this.value)if(this.isSingleSelection())s=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let u=0;u<this.value.length;u++)s+=this.formatDateTime(this.value[u]),u!==this.value.length-1&&(s+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let b=this.value[1];s=this.formatDateTime(this.value[0]),b&&(s+=" "+this.rangeSeparator+" "+this.formatDateTime(b))}this.inputFieldValue=s,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(s){let u=this.keepInvalid?s:null;return this.isValidDate(s)&&(this.timeOnly?u=this.formatTime(s):(u=this.formatDate(s,this.getDateFormat()),this.showTime&&(u+=" "+this.formatTime(s)))),u}setCurrentHourPM(s){"12"==this.hourFormat?(this.pm=s>11,this.currentHour=s>=12?12==s?12:s-12:0==s?12:s):this.currentHour=s}setCurrentView(s){this.currentView=s,this.cd.detectChanges(),this.alignOverlay()}selectDate(s){let u=new Date(s.year,s.month,s.day);if(this.showTime&&(u.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),u.setMinutes(this.currentMinute),u.setSeconds(this.currentSecond)),this.minDate&&this.minDate>u&&(u=this.minDate,this.setCurrentHourPM(u.getHours()),this.currentMinute=u.getMinutes(),this.currentSecond=u.getSeconds()),this.maxDate&&this.maxDate<u&&(u=this.maxDate,this.setCurrentHourPM(u.getHours()),this.currentMinute=u.getMinutes(),this.currentSecond=u.getSeconds()),this.isSingleSelection())this.updateModel(u);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,u]:[u]);else if(this.isRangeSelection())if(this.value&&this.value.length){let b=this.value[0],x=this.value[1];!x&&u.getTime()>=b.getTime()?x=u:(b=u,x=null),this.updateModel([b,x])}else this.updateModel([u,null]);this.onSelect.emit(u)}updateModel(s){if(this.value=s,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let u=null;this.value&&(u=this.value.map(b=>this.formatDateTime(b))),this.onModelChange(u)}}getFirstDayOfMonthIndex(s,u){let b=new Date;b.setDate(1),b.setMonth(s),b.setFullYear(u);let x=b.getDay()+this.getSundayIndex();return x>=7?x-7:x}getDaysCountInMonth(s,u){return 32-this.daylightSavingAdjust(new Date(u,s,32)).getDate()}getDaysCountInPrevMonth(s,u){let b=this.getPreviousMonthAndYear(s,u);return this.getDaysCountInMonth(b.month,b.year)}getPreviousMonthAndYear(s,u){let b,x;return 0===s?(b=11,x=u-1):(b=s-1,x=u),{month:b,year:x}}getNextMonthAndYear(s,u){let b,x;return 11===s?(b=0,x=u+1):(b=s+1,x=u),{month:b,year:x}}getSundayIndex(){let s=this.getFirstDateOfWeek();return s>0?7-s:0}isSelected(s){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,s);if(this.isMultipleSelection()){let u=!1;for(let b of this.value)if(u=this.isDateEquals(b,s),u)break;return u}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],s)||this.isDateEquals(this.value[1],s)||this.isDateBetween(this.value[0],this.value[1],s):this.isDateEquals(this.value[0],s):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(s){if(this.isComparable()){let u=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&u.getMonth()===s&&u.getFullYear()===this.currentYear}return!1}isYearSelected(s){if(this.isComparable()){let u=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&u.getFullYear()===s}return!1}isDateEquals(s,u){return!!(s&&s instanceof Date)&&s.getDate()===u.day&&s.getMonth()===u.month&&s.getFullYear()===u.year}isDateBetween(s,u,b){if(s&&u){let Ce=new Date(b.year,b.month,b.day);return s.getTime()<=Ce.getTime()&&u.getTime()>=Ce.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(s,u,b,x){return s.getDate()===u&&s.getMonth()===b&&s.getFullYear()===x}isSelectable(s,u,b,x){let Ce=!0,et=!0,Mt=!0,fn=!0;return!(x&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>b||this.minDate.getFullYear()===b&&(this.minDate.getMonth()>u||this.minDate.getMonth()===u&&this.minDate.getDate()>s))&&(Ce=!1),this.maxDate&&(this.maxDate.getFullYear()<b||this.maxDate.getFullYear()===b&&(this.maxDate.getMonth()<u||this.maxDate.getMonth()===u&&this.maxDate.getDate()<s))&&(et=!1),this.disabledDates&&(Mt=!this.isDateDisabled(s,u,b)),this.disabledDays&&(fn=!this.isDayDisabled(s,u,b)),Ce&&et&&Mt&&fn)}isDateDisabled(s,u,b){if(this.disabledDates)for(let x of this.disabledDates)if(x.getFullYear()===b&&x.getMonth()===u&&x.getDate()===s)return!0;return!1}isDayDisabled(s,u,b){if(this.disabledDays){let Ce=new Date(b,u,s).getDay();return-1!==this.disabledDays.indexOf(Ce)}return!1}onInputFocus(s){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(s)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(s){this.focus=!1,this.onBlur.emit(s),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(s,u){this.overlayVisible?this.hideOverlay():(u.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(s){this.overlayService.add({originalEvent:s,target:this.el.nativeElement})}getMonthName(s){return this.config.getTranslation("monthNames")[s]}getYear(s){return"month"===this.currentView?this.currentYear:s.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(s){this.navigationState={backward:!0,button:!0},this.navBackward(s)}onNextButtonClick(s){this.navigationState={backward:!1,button:!0},this.navForward(s)}onContainerButtonKeydown(s){switch(s.which){case 9:this.inline||this.trapFocus(s);break;case 27:this.overlayVisible=!1,s.preventDefault()}}onInputKeydown(s){this.isKeydown=!0,40===s.keyCode&&this.contentViewChild?this.trapFocus(s):27===s.keyCode||13===s.keyCode?this.overlayVisible&&(this.overlayVisible=!1,s.preventDefault()):9===s.keyCode&&this.contentViewChild&&(ge.getFocusableElements(this.contentViewChild.nativeElement).forEach(u=>u.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(s,u,b){const x=s.currentTarget,Ce=x.parentElement;switch(s.which){case 40:{x.tabIndex="-1";let et=ge.index(Ce),Mt=Ce.parentElement.nextElementSibling;Mt?ge.hasClass(Mt.children[et].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(s)):(Mt.children[et].children[0].tabIndex="0",Mt.children[et].children[0].focus()):(this.navigationState={backward:!1},this.navForward(s)),s.preventDefault();break}case 38:{x.tabIndex="-1";let et=ge.index(Ce),Mt=Ce.parentElement.previousElementSibling;if(Mt){let fn=Mt.children[et].children[0];ge.hasClass(fn,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(s)):(fn.tabIndex="0",fn.focus())}else this.navigationState={backward:!0},this.navBackward(s);s.preventDefault();break}case 37:{x.tabIndex="-1";let et=Ce.previousElementSibling;if(et){let Mt=et.children[0];ge.hasClass(Mt,"p-disabled")||ge.hasClass(Mt.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,b):(Mt.tabIndex="0",Mt.focus())}else this.navigateToMonth(!0,b);s.preventDefault();break}case 39:{x.tabIndex="-1";let et=Ce.nextElementSibling;if(et){let Mt=et.children[0];ge.hasClass(Mt,"p-disabled")?this.navigateToMonth(!1,b):(Mt.tabIndex="0",Mt.focus())}else this.navigateToMonth(!1,b);s.preventDefault();break}case 13:case 32:this.onDateSelect(s,u),s.preventDefault();break;case 27:this.overlayVisible=!1,s.preventDefault();break;case 9:this.inline||this.trapFocus(s)}}onMonthCellKeydown(s,u){const b=s.currentTarget;switch(s.which){case 38:case 40:{b.tabIndex="-1";var x=b.parentElement.children,Ce=ge.index(b);let et=x[40===s.which?Ce+3:Ce-3];et&&(et.tabIndex="0",et.focus()),s.preventDefault();break}case 37:{b.tabIndex="-1";let et=b.previousElementSibling;et?(et.tabIndex="0",et.focus()):(this.navigationState={backward:!0},this.navBackward(s)),s.preventDefault();break}case 39:{b.tabIndex="-1";let et=b.nextElementSibling;et?(et.tabIndex="0",et.focus()):(this.navigationState={backward:!1},this.navForward(s)),s.preventDefault();break}case 13:this.onMonthSelect(s,u),s.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,s.preventDefault();break;case 9:this.inline||this.trapFocus(s)}}onYearCellKeydown(s,u){const b=s.currentTarget;switch(s.which){case 38:case 40:{b.tabIndex="-1";var x=b.parentElement.children,Ce=ge.index(b);let et=x[40===s.which?Ce+2:Ce-2];et&&(et.tabIndex="0",et.focus()),s.preventDefault();break}case 37:{b.tabIndex="-1";let et=b.previousElementSibling;et?(et.tabIndex="0",et.focus()):(this.navigationState={backward:!0},this.navBackward(s)),s.preventDefault();break}case 39:{b.tabIndex="-1";let et=b.nextElementSibling;et?(et.tabIndex="0",et.focus()):(this.navigationState={backward:!1},this.navForward(s)),s.preventDefault();break}case 13:case 32:this.onYearSelect(s,u),s.preventDefault();break;case 27:this.overlayVisible=!1,s.preventDefault();break;case 9:this.trapFocus(s)}}navigateToMonth(s,u){if(s)if(1===this.numberOfMonths||0===u)this.navigationState={backward:!0},this.navBackward(event);else{let x=ge.find(this.contentViewChild.nativeElement.children[u-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),Ce=x[x.length-1];Ce.tabIndex="0",Ce.focus()}else if(1===this.numberOfMonths||u===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let x=ge.findSingle(this.contentViewChild.nativeElement.children[u+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");x.tabIndex="0",x.focus()}}updateFocus(){let s;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?ge.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():ge.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let u;u=ge.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),u&&u.length>0&&(s=u[u.length-1])}else s=ge.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s&&(s.tabIndex="0",s.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let s;if("month"===this.currentView){let u=ge.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),b=ge.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");u.forEach(x=>x.tabIndex=-1),s=b||u[0],0===u.length&&ge.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(Ce=>Ce.tabIndex=-1)}else if("year"===this.currentView){let u=ge.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),b=ge.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year.p-highlight");u.forEach(x=>x.tabIndex=-1),s=b||u[0],0===u.length&&ge.find(this.contentViewChild.nativeElement,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(Ce=>Ce.tabIndex=-1)}else if(s=ge.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!s){let u=ge.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");s=u||ge.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}s&&(s.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{s.focus()},1),this.preventFocus=!1)}trapFocus(s){let u=ge.getFocusableElements(this.contentViewChild.nativeElement);if(u&&u.length>0)if(u[0].ownerDocument.activeElement){let b=u.indexOf(u[0].ownerDocument.activeElement);if(s.shiftKey)if(-1==b||0===b)if(this.focusTrap)u[u.length-1].focus();else{if(-1===b)return this.hideOverlay();if(0===b)return}else u[b-1].focus();else if(-1==b||b===u.length-1){if(!this.focusTrap&&-1!=b)return this.hideOverlay();u[0].focus()}else u[b+1].focus()}else u[0].focus();s.preventDefault()}onMonthDropdownChange(s){this.currentMonth=parseInt(s),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(s){this.currentYear=parseInt(s),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(s,u,b,x){let Ce=this.value;const et=this.convertTo24Hour(s,x);this.isRangeSelection()&&(Ce=this.value[1]||this.value[0]),this.isMultipleSelection()&&(Ce=this.value[this.value.length-1]);const Mt=Ce?Ce.toDateString():null;return!(this.minDate&&Mt&&this.minDate.toDateString()===Mt&&(this.minDate.getHours()>et||this.minDate.getHours()===et&&(this.minDate.getMinutes()>u||this.minDate.getMinutes()===u&&this.minDate.getSeconds()>b))||this.maxDate&&Mt&&this.maxDate.toDateString()===Mt&&(this.maxDate.getHours()<et||this.maxDate.getHours()===et&&(this.maxDate.getMinutes()<u||this.maxDate.getMinutes()===u&&this.maxDate.getSeconds()<b)))}incrementHour(s){let b=this.currentHour+this.stepHour,x=this.pm;"24"==this.hourFormat?b=b>=24?b-24:b:"12"==this.hourFormat&&(this.currentHour<12&&b>11&&(x=!this.pm),b=b>=13?b-12:b),this.validateTime(b,this.currentMinute,this.currentSecond,x)&&(this.currentHour=b,this.pm=x),s.preventDefault()}onTimePickerElementMouseDown(s,u,b){this.disabled||(this.repeat(s,null,u,b),s.preventDefault())}onTimePickerElementMouseUp(s){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(s,u,b,x){let Ce=u||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(s,100,b,x),this.cd.markForCheck()},Ce),b){case 0:1===x?this.incrementHour(s):this.decrementHour(s);break;case 1:1===x?this.incrementMinute(s):this.decrementMinute(s);break;case 2:1===x?this.incrementSecond(s):this.decrementSecond(s)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(s){let u=this.currentHour-this.stepHour,b=this.pm;"24"==this.hourFormat?u=u<0?24+u:u:"12"==this.hourFormat&&(12===this.currentHour&&(b=!this.pm),u=u<=0?12+u:u),this.validateTime(u,this.currentMinute,this.currentSecond,b)&&(this.currentHour=u,this.pm=b),s.preventDefault()}incrementMinute(s){let u=this.currentMinute+this.stepMinute;u=u>59?u-60:u,this.validateTime(this.currentHour,u,this.currentSecond,this.pm)&&(this.currentMinute=u),s.preventDefault()}decrementMinute(s){let u=this.currentMinute-this.stepMinute;u=u<0?60+u:u,this.validateTime(this.currentHour,u,this.currentSecond,this.pm)&&(this.currentMinute=u),s.preventDefault()}incrementSecond(s){let u=this.currentSecond+this.stepSecond;u=u>59?u-60:u,this.validateTime(this.currentHour,this.currentMinute,u,this.pm)&&(this.currentSecond=u),s.preventDefault()}decrementSecond(s){let u=this.currentSecond-this.stepSecond;u=u<0?60+u:u,this.validateTime(this.currentHour,this.currentMinute,u,this.pm)&&(this.currentSecond=u),s.preventDefault()}updateTime(){let s=this.value;this.isRangeSelection()&&(s=this.value[1]||this.value[0]),this.isMultipleSelection()&&(s=this.value[this.value.length-1]),s=s?new Date(s.getTime()):new Date,s.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),s.setMinutes(this.currentMinute),s.setSeconds(this.currentSecond),this.isRangeSelection()&&(s=this.value[1]?[this.value[0],s]:[s,null]),this.isMultipleSelection()&&(s=[...this.value.slice(0,-1),s]),this.updateModel(s),this.onSelect.emit(s),this.updateInputfield()}toggleAMPM(s){const u=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,u)&&(this.pm=u,this.updateTime()),s.preventDefault()}onUserInput(s){if(!this.isKeydown)return;this.isKeydown=!1;let u=s.target.value;try{let b=this.parseValueFromString(u);this.isValidSelection(b)&&(this.updateModel(b),this.updateUI())}catch{this.updateModel(this.keepInvalid?u:null)}this.filled=null!=u&&u.length,this.onInput.emit(s)}isValidSelection(s){let u=!0;return this.isSingleSelection()?this.isSelectable(s.getDate(),s.getMonth(),s.getFullYear(),!1)||(u=!1):s.every(b=>this.isSelectable(b.getDate(),b.getMonth(),b.getFullYear(),!1))&&this.isRangeSelection()&&(u=s.length>1&&s[1]>s[0]),u}parseValueFromString(s){if(!s||0===s.trim().length)return null;let u;if(this.isSingleSelection())u=this.parseDateTime(s);else if(this.isMultipleSelection()){let b=s.split(this.multipleSeparator);u=[];for(let x of b)u.push(this.parseDateTime(x.trim()))}else if(this.isRangeSelection()){let b=s.split(" "+this.rangeSeparator+" ");u=[];for(let x=0;x<b.length;x++)u[x]=this.parseDateTime(b[x].trim())}return u}parseDateTime(s){let u,b=s.split(" ");if(this.timeOnly)u=new Date,this.populateTime(u,b[0],b[1]);else{const x=this.getDateFormat();if(this.showTime){let Ce="12"==this.hourFormat?b.pop():null,et=b.pop();u=this.parseDate(b.join(" "),x),this.populateTime(u,et,Ce)}else u=this.parseDate(s,x)}return u}populateTime(s,u,b){if("12"==this.hourFormat&&!b)throw"Invalid Time";this.pm="PM"===b||"pm"===b;let x=this.parseTime(u);s.setHours(x.hour),s.setMinutes(x.minute),s.setSeconds(x.second)}isValidDate(s){return s instanceof Date&&gi.gb.isNotEmpty(s)}updateUI(){let s=this.value;Array.isArray(s)&&(s=s[0]);let u=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:s&&this.isValidDate(s)?s:new Date;this.currentMonth=u.getMonth(),this.currentYear=u.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(u.getHours()),this.currentMinute=u.getMinutes(),this.currentSecond=u.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(s){switch(s.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=s.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?gi.P9.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):gi.P9.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(s));break;case"void":this.onOverlayHide(),this.onClose.emit(s)}}onOverlayAnimationDone(s){switch(s.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&gi.P9.clear(s.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):ge.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=ge.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=ge.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=ge.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",ge.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):ge.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(s){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(s.style.zIndex)-1),ge.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",b=>{this.disableModality()}),document.body.appendChild(this.mask),ge.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(ge.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let u,s=document.body.children;for(let b=0;b<s.length;b++)if(ge.hasClass(s[b],"p-datepicker-mask-scrollblocker")){u=!0;break}u||ge.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(s){if(this.value=s,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=s)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(s){this.onModelChange=s}registerOnTouched(s){this.onModelTouched=s}setDisabledState(s){this.disabled=s,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Ee.ws.FIRST_DAY_OF_WEEK)}formatDate(s,u){if(!s)return"";let b;const x=wn=>{const wi=b+1<u.length&&u.charAt(b+1)===wn;return wi&&b++,wi},Ce=(wn,wi,hr)=>{let Pi=""+wi;if(x(wn))for(;Pi.length<hr;)Pi="0"+Pi;return Pi},et=(wn,wi,hr,Pi)=>x(wn)?Pi[wi]:hr[wi];let Mt="",fn=!1;if(s)for(b=0;b<u.length;b++)if(fn)"'"!==u.charAt(b)||x("'")?Mt+=u.charAt(b):fn=!1;else switch(u.charAt(b)){case"d":Mt+=Ce("d",s.getDate(),2);break;case"D":Mt+=et("D",s.getDay(),this.getTranslation(Ee.ws.DAY_NAMES_SHORT),this.getTranslation(Ee.ws.DAY_NAMES));break;case"o":Mt+=Ce("o",Math.round((new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime()-new Date(s.getFullYear(),0,0).getTime())/864e5),3);break;case"m":Mt+=Ce("m",s.getMonth()+1,2);break;case"M":Mt+=et("M",s.getMonth(),this.getTranslation(Ee.ws.MONTH_NAMES_SHORT),this.getTranslation(Ee.ws.MONTH_NAMES));break;case"y":Mt+=x("y")?s.getFullYear():(s.getFullYear()%100<10?"0":"")+s.getFullYear()%100;break;case"@":Mt+=s.getTime();break;case"!":Mt+=1e4*s.getTime()+this.ticksTo1970;break;case"'":x("'")?Mt+="'":fn=!0;break;default:Mt+=u.charAt(b)}return Mt}formatTime(s){if(!s)return"";let u="",b=s.getHours(),x=s.getMinutes(),Ce=s.getSeconds();return"12"==this.hourFormat&&b>11&&12!=b&&(b-=12),u+="12"==this.hourFormat&&0===b?12:b<10?"0"+b:b,u+=":",u+=x<10?"0"+x:x,this.showSeconds&&(u+=":",u+=Ce<10?"0"+Ce:Ce),"12"==this.hourFormat&&(u+=s.getHours()>11?" PM":" AM"),u}parseTime(s){let u=s.split(":");if(u.length!==(this.showSeconds?3:2))throw"Invalid time";let x=parseInt(u[0]),Ce=parseInt(u[1]),et=this.showSeconds?parseInt(u[2]):null;if(isNaN(x)||isNaN(Ce)||x>23||Ce>59||"12"==this.hourFormat&&x>12||this.showSeconds&&(isNaN(et)||et>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==x&&this.pm?x+=12:!this.pm&&12===x&&(x-=12)),{hour:x,minute:Ce,second:et}}parseDate(s,u){if(null==u||null==s)throw"Invalid arguments";if(""===(s="object"==typeof s?s.toString():s+""))return null;let b,x,Ce,ys,et=0,Mt="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),fn=-1,wn=-1,wi=-1,hr=-1,Pi=!1,Dr=Mo=>{let Ia=b+1<u.length&&u.charAt(b+1)===Mo;return Ia&&b++,Ia},yr=Mo=>{let Ia=Dr(Mo),Ul="@"===Mo?14:"!"===Mo?20:"y"===Mo&&Ia?4:"o"===Mo?3:2,md=new RegExp("^\\d{"+("y"===Mo?Ul:1)+","+Ul+"}"),p=s.substring(et).match(md);if(!p)throw"Missing number at position "+et;return et+=p[0].length,parseInt(p[0],10)},Zo=(Mo,Ia,Ul)=>{let Hc=-1,md=Dr(Mo)?Ul:Ia,p=[];for(let d=0;d<md.length;d++)p.push([d,md[d]]);p.sort((d,h)=>-(d[1].length-h[1].length));for(let d=0;d<p.length;d++){let h=p[d][1];if(s.substr(et,h.length).toLowerCase()===h.toLowerCase()){Hc=p[d][0],et+=h.length;break}}if(-1!==Hc)return Hc+1;throw"Unknown name at position "+et},qo=()=>{if(s.charAt(et)!==u.charAt(b))throw"Unexpected literal at position "+et;et++};for("month"===this.view&&(wi=1),b=0;b<u.length;b++)if(Pi)"'"!==u.charAt(b)||Dr("'")?qo():Pi=!1;else switch(u.charAt(b)){case"d":wi=yr("d");break;case"D":Zo("D",this.getTranslation(Ee.ws.DAY_NAMES_SHORT),this.getTranslation(Ee.ws.DAY_NAMES));break;case"o":hr=yr("o");break;case"m":wn=yr("m");break;case"M":wn=Zo("M",this.getTranslation(Ee.ws.MONTH_NAMES_SHORT),this.getTranslation(Ee.ws.MONTH_NAMES));break;case"y":fn=yr("y");break;case"@":ys=new Date(yr("@")),fn=ys.getFullYear(),wn=ys.getMonth()+1,wi=ys.getDate();break;case"!":ys=new Date((yr("!")-this.ticksTo1970)/1e4),fn=ys.getFullYear(),wn=ys.getMonth()+1,wi=ys.getDate();break;case"'":Dr("'")?qo():Pi=!0;break;default:qo()}if(et<s.length&&(Ce=s.substr(et),!/^\s+/.test(Ce)))throw"Extra/unparsed characters found in date: "+Ce;if(-1===fn?fn=(new Date).getFullYear():fn<100&&(fn+=(new Date).getFullYear()-(new Date).getFullYear()%100+(fn<=Mt?0:-100)),hr>-1)for(wn=1,wi=hr;x=this.getDaysCountInMonth(fn,wn-1),!(wi<=x);)wn++,wi-=x;if("year"===this.view&&(wn=-1===wn?1:wn,wi=-1===wi?1:wi),ys=this.daylightSavingAdjust(new Date(fn,wn-1,wi)),ys.getFullYear()!==fn||ys.getMonth()+1!==wn||ys.getDate()!==wi)throw"Invalid date";return ys}daylightSavingAdjust(s){return s?(s.setHours(s.getHours()>12?s.getHours()+2:0),s):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(s){let u=new Date,b={day:u.getDate(),month:u.getMonth(),year:u.getFullYear(),otherMonth:u.getMonth()!==this.currentMonth||u.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(s,b),this.onTodayClick.emit(s)}onClearButtonClick(s){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(s)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let s="";if(this.responsiveOptions){let u=[...this.responsiveOptions].filter(b=>!(!b.breakpoint||!b.numMonths)).sort((b,x)=>-1*b.breakpoint.localeCompare(x.breakpoint,void 0,{numeric:!0}));for(let b=0;b<u.length;b++){let{breakpoint:x,numMonths:Ce}=u[b],et=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${Ce}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let Mt=Ce;Mt<this.numberOfMonths;Mt++)et+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${Mt+1}) {\n                                display: none !important;\n                            }\n                        `;s+=`\n                        @media screen and (max-width: ${x}) {\n                            ${et}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=s}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",u=>{this.isOutsideClicked(u)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(u),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Ke(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(s){return!(this.el.nativeElement.isSameNode(s.target)||this.isNavIconClicked(s)||this.el.nativeElement.contains(s.target)||this.overlay&&this.overlay.contains(s.target))}isNavIconClicked(s){return ge.hasClass(s.target,"p-datepicker-prev")||ge.hasClass(s.target,"p-datepicker-prev-icon")||ge.hasClass(s.target,"p-datepicker-next")||ge.hasClass(s.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!ge.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&gi.P9.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.sBO),i.Y36(i.R0b),i.Y36(Ee.b4),i.Y36(Ee.F0))},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-calendar"]],contentQueries:function(s,u,b){if(1&s&&i.Suo(b,Ee.jx,4),2&s){let x;i.iGM(x=i.CRH())&&(u.templates=x)}},viewQuery:function(s,u){if(1&s&&(i.Gf(ec,5),i.Gf(dl,5),i.Gf(fa,5)),2&s){let b;i.iGM(b=i.CRH())&&(u.containerViewChild=b.first),i.iGM(b=i.CRH())&&(u.inputfieldViewChild=b.first),i.iGM(b=i.CRH())&&(u.content=b.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(s,u){2&s&&i.ekj("p-inputwrapper-filled",u.filled)("p-inputwrapper-focus",u.focus)("p-calendar-clearable",u.showClear&&!u.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[i._Bn([Br])],ngContentSelectors:Go,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(s,u){1&s&&(i.F$t(Xa),i.TgZ(0,"span",0,1),i.YNc(2,Qa,4,17,"ng-template",2),i.YNc(3,Vr,9,28,"div",3),i.qZA()),2&s&&(i.Tol(u.styleClass),i.Q6J("ngClass",i.l5B(6,Mr,u.showIcon,u.timeOnly,u.disabled,u.focus))("ngStyle",u.style),i.xp6(2),i.Q6J("ngIf",!u.inline),i.xp6(1),i.Q6J("ngIf",u.inline||u.overlayVisible))},dependencies:[g.mk,g.sg,g.O5,g.tP,g.PC,yt,Oe],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[(0,se.X$)("overlayAnimation",[(0,se.SB)("visibleTouchUI",(0,se.oB)({transform:"translate(-50%,-50%)",opacity:1})),(0,se.eR)("void => visible",[(0,se.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,se.jt)("{{showTransitionParams}}",(0,se.oB)({opacity:1,transform:"*"}))]),(0,se.eR)("visible => void",[(0,se.jt)("{{hideTransitionParams}}",(0,se.oB)({opacity:0}))]),(0,se.eR)("void => visibleTouchUI",[(0,se.oB)({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),(0,se.jt)("{{showTransitionParams}}")]),(0,se.eR)("visibleTouchUI => void",[(0,se.jt)("{{hideTransitionParams}}",(0,se.oB)({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),y})(),nc=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,rn,Ee.m8,Me,rn,Ee.m8]}),y})(),Ua=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,Za,nt.j,_l,Be.u5,rn,Dn,nc,jt,Xl,ea,Ee.m8,ea]}),y})();function Lc(y,V){if(1&y&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&y){const s=i.oxw();i.xp6(1),i.Oqu(s.label)}}function eo(y,V){1&y&&i.GkF(0)}const pl=function(y){return{height:y}},ud=function(y,V){return{"p-highlight":y,"p-disabled":V}},rs=function(y){return{"p-highlight":y}},Mc=function(y){return{"pi pi-check":y}},nl=function(y){return{$implicit:y}},Vc=["container"],sc=["filterInput"],lh=["in"],ch=["items"],au=["scroller"];function uh(y,V){if(1&y&&(i.ynx(0),i._uU(1),i.BQk()),2&y){const s=i.oxw(2);i.xp6(1),i.Oqu(s.valuesAsString||"empty")}}function Su(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"span",18),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw().$implicit,Ce=i.oxw(3);return i.KtG(Ce.removeChip(x,b))}),i.qZA()}}function Lu(y,V){if(1&y&&(i.TgZ(0,"div",14,15)(2,"span",16),i._uU(3),i.qZA(),i.YNc(4,Su,1,0,"span",17),i.qZA()),2&y){const s=V.$implicit,u=i.oxw(3);i.xp6(3),i.Oqu(u.findLabelByValue(s)),i.xp6(1),i.Q6J("ngIf",!u.disabled)}}function jh(y,V){if(1&y&&(i.ynx(0),i._uU(1),i.BQk()),2&y){const s=i.oxw(3);i.xp6(1),i.Oqu(s.placeholder||s.defaultLabel||"empty")}}function Vf(y,V){if(1&y&&(i.ynx(0),i.YNc(1,Lu,5,2,"div",13),i.YNc(2,jh,2,1,"ng-container",7),i.BQk()),2&y){const s=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",s.value),i.xp6(1),i.Q6J("ngIf",!s.value||0===s.value.length)}}function Vu(y,V){if(1&y&&(i.ynx(0),i.YNc(1,uh,2,1,"ng-container",7),i.YNc(2,Vf,3,2,"ng-container",7),i.BQk()),2&y){const s=i.oxw();i.xp6(1),i.Q6J("ngIf","comma"===s.display),i.xp6(1),i.Q6J("ngIf","chip"===s.display)}}function xd(y,V){1&y&&i.GkF(0)}function zh(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"i",19),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.clear(b))}),i.qZA()}}function dh(y,V){1&y&&i.GkF(0)}function Ad(y,V){1&y&&i.GkF(0)}const dd=function(y){return{options:y}};function Md(y,V){if(1&y&&(i.ynx(0),i.YNc(1,Ad,1,0,"ng-container",8),i.BQk()),2&y){const s=i.oxw(3);i.xp6(1),i.Q6J("ngTemplateOutlet",s.filterTemplate)("ngTemplateOutletContext",i.VKq(2,dd,s.filterOptions))}}const hh=function(y){return{"p-checkbox-disabled":y}},Bc=function(y,V,s){return{"p-highlight":y,"p-focus":V,"p-disabled":s}};function Rd(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",34)(1,"div",2)(2,"input",35),i.NdJ("focus",function(){i.CHM(s);const b=i.oxw(4);return i.KtG(b.onHeaderCheckboxFocus())})("blur",function(){i.CHM(s);const b=i.oxw(4);return i.KtG(b.onHeaderCheckboxBlur())})("keydown.space",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.toggleAll(b))}),i.qZA()(),i.TgZ(3,"div",36),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.toggleAll(b))}),i._UZ(4,"span",37),i.qZA()()}if(2&y){const s=i.oxw(4);i.Q6J("ngClass",i.VKq(6,hh,s.disabled||s.toggleAllDisabled)),i.xp6(2),i.Q6J("checked",s.allChecked)("disabled",s.disabled||s.toggleAllDisabled),i.xp6(1),i.Q6J("ngClass",i.kEZ(8,Bc,s.allChecked,s.headerCheckboxFocus,s.disabled||s.toggleAllDisabled)),i.uIk("aria-checked",s.allChecked),i.xp6(1),i.Q6J("ngClass",i.VKq(12,Mc,s.allChecked))}}function Du(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",38)(1,"input",39,40),i.NdJ("input",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.onFilterInputChange(b))}),i.qZA(),i._UZ(3,"span",41),i.qZA()}if(2&y){const s=i.oxw(4);i.xp6(1),i.Q6J("value",s.filterValue||"")("disabled",s.disabled),i.uIk("autocomplete",s.autocomplete)("placeholder",s.filterPlaceHolder)("aria-label",s.ariaFilterLabel)}}function Bu(y,V){if(1&y){const s=i.EpF();i.YNc(0,Rd,5,14,"div",30),i.YNc(1,Du,4,5,"div",31),i.TgZ(2,"button",32),i.NdJ("click",function(b){i.CHM(s);const x=i.oxw(3);return i.KtG(x.close(b))}),i._UZ(3,"span",33),i.qZA()}if(2&y){const s=i.oxw(3);i.Q6J("ngIf",s.showToggleAll&&!s.selectionLimit),i.xp6(1),i.Q6J("ngIf",s.filter)}}function kd(y,V){if(1&y&&(i.TgZ(0,"div",26),i.Hsn(1),i.YNc(2,dh,1,0,"ng-container",27),i.YNc(3,Md,2,4,"ng-container",28),i.YNc(4,Bu,4,2,"ng-template",null,29,i.W1O),i.qZA()),2&y){const s=i.MAs(5),u=i.oxw(2);i.xp6(2),i.Q6J("ngTemplateOutlet",u.headerTemplate),i.xp6(1),i.Q6J("ngIf",u.filterTemplate)("ngIfElse",s)}}function Gh(y,V){1&y&&i.GkF(0)}const $h=function(y,V){return{$implicit:y,options:V}};function Kh(y,V){if(1&y&&i.YNc(0,Gh,1,0,"ng-container",8),2&y){const s=V.$implicit,u=V.options;i.oxw(2);const b=i.MAs(6);i.Q6J("ngTemplateOutlet",b)("ngTemplateOutletContext",i.WLB(2,$h,s,u))}}function mc(y,V){1&y&&i.GkF(0)}function Bf(y,V){if(1&y&&i.YNc(0,mc,1,0,"ng-container",8),2&y){const s=V.options,u=i.oxw(4);i.Q6J("ngTemplateOutlet",u.loaderTemplate)("ngTemplateOutletContext",i.VKq(2,dd,s))}}function Od(y,V){1&y&&(i.ynx(0),i.YNc(1,Bf,1,4,"ng-template",45),i.BQk())}function Uc(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"p-scroller",42,43),i.NdJ("onLazyLoad",function(b){i.CHM(s);const x=i.oxw(2);return i.KtG(x.onLazyLoad.emit(b))}),i.YNc(2,Kh,1,5,"ng-template",44),i.YNc(3,Od,2,0,"ng-container",7),i.qZA()}if(2&y){const s=i.oxw(2);i.Akn(i.VKq(9,pl,s.scrollHeight)),i.Q6J("items",s.optionsToRender)("itemSize",s.virtualScrollItemSize||s._itemSize)("autoSize",!0)("tabindex",-1)("lazy",s.lazy)("options",s.virtualScrollOptions),i.xp6(3),i.Q6J("ngIf",s.loaderTemplate)}}function hd(y,V){1&y&&i.GkF(0)}const fd=function(){return{}};function Pd(y,V){if(1&y&&(i.ynx(0),i.YNc(1,hd,1,0,"ng-container",8),i.BQk()),2&y){i.oxw();const s=i.MAs(6),u=i.oxw();i.xp6(1),i.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",i.WLB(3,$h,u.optionsToRender,i.DdM(2,fd)))}}function fh(y,V){if(1&y&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&y){const s=i.oxw().$implicit,u=i.oxw(4);i.xp6(1),i.Oqu(u.getOptionGroupLabel(s)||"empty")}}function Nd(y,V){1&y&&i.GkF(0)}function Wh(y,V){1&y&&i.GkF(0)}function Fd(y,V){if(1&y&&(i.TgZ(0,"li",51),i.YNc(1,fh,2,1,"span",7),i.YNc(2,Nd,1,0,"ng-container",8),i.qZA(),i.YNc(3,Wh,1,0,"ng-container",8)),2&y){const s=V.$implicit,u=i.oxw(2).options,b=i.MAs(5),x=i.oxw(2);i.Q6J("ngStyle",i.VKq(6,pl,u.itemSize+"px")),i.xp6(1),i.Q6J("ngIf",!x.groupTemplate),i.xp6(1),i.Q6J("ngTemplateOutlet",x.groupTemplate)("ngTemplateOutletContext",i.VKq(8,nl,s)),i.xp6(1),i.Q6J("ngTemplateOutlet",b)("ngTemplateOutletContext",i.VKq(10,nl,x.getOptionGroupChildren(s)))}}function qu(y,V){if(1&y&&(i.ynx(0),i.YNc(1,Fd,4,12,"ng-template",50),i.BQk()),2&y){const s=i.oxw().$implicit;i.xp6(1),i.Q6J("ngForOf",s)}}function Zh(y,V){1&y&&i.GkF(0)}function qh(y,V){if(1&y&&(i.ynx(0),i.YNc(1,Zh,1,0,"ng-container",8),i.BQk()),2&y){const s=i.oxw().$implicit,u=i.MAs(5);i.xp6(1),i.Q6J("ngTemplateOutlet",u)("ngTemplateOutletContext",i.VKq(2,nl,s))}}function Yh(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"p-multiSelectItem",52),i.NdJ("onClick",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.onOptionClick(b))})("onKeydown",function(b){i.CHM(s);const x=i.oxw(4);return i.KtG(x.onOptionKeydown(b))}),i.qZA()}if(2&y){const s=V.$implicit,u=i.oxw(2).options,b=i.oxw(2);i.Q6J("option",s)("selected",b.isSelected(s))("label",b.getOptionLabel(s))("disabled",b.isOptionDisabled(s))("template",b.itemTemplate)("itemSize",u.itemSize)}}function ph(y,V){1&y&&i.YNc(0,Yh,1,6,"ng-template",50),2&y&&i.Q6J("ngForOf",V.$implicit)}function Uf(y,V){if(1&y&&(i.ynx(0),i._uU(1),i.BQk()),2&y){const s=i.oxw(4);i.xp6(1),i.hij(" ",s.emptyFilterMessageLabel," ")}}function Hf(y,V){1&y&&i.GkF(0,null,54)}function Qh(y,V){if(1&y&&(i.TgZ(0,"li",53),i.YNc(1,Uf,2,1,"ng-container",28),i.YNc(2,Hf,2,0,"ng-container",27),i.qZA()),2&y){const s=i.oxw().options,u=i.oxw(2);i.Q6J("ngStyle",i.VKq(4,pl,s.itemSize+"px")),i.xp6(1),i.Q6J("ngIf",!u.emptyFilterTemplate&&!u.emptyTemplate)("ngIfElse",u.emptyFilter),i.xp6(1),i.Q6J("ngTemplateOutlet",u.emptyFilterTemplate||u.emptyTemplate)}}function Jh(y,V){if(1&y&&(i.ynx(0),i._uU(1),i.BQk()),2&y){const s=i.oxw(4);i.xp6(1),i.hij(" ",s.emptyMessageLabel," ")}}function Ld(y,V){1&y&&i.GkF(0,null,55)}function mh(y,V){if(1&y&&(i.TgZ(0,"li",53),i.YNc(1,Jh,2,1,"ng-container",28),i.YNc(2,Ld,2,0,"ng-container",27),i.qZA()),2&y){const s=i.oxw().options,u=i.oxw(2);i.Q6J("ngStyle",i.VKq(4,pl,s.itemSize+"px")),i.xp6(1),i.Q6J("ngIf",!u.emptyTemplate)("ngIfElse",u.empty),i.xp6(1),i.Q6J("ngTemplateOutlet",u.emptyTemplate)}}function gh(y,V){if(1&y&&(i.TgZ(0,"ul",46,47),i.YNc(2,qu,2,1,"ng-container",7),i.YNc(3,qh,2,4,"ng-container",7),i.YNc(4,ph,1,1,"ng-template",null,48,i.W1O),i.YNc(6,Qh,3,6,"li",49),i.YNc(7,mh,3,6,"li",49),i.qZA()),2&y){const s=V.options,u=i.oxw(2);i.Akn(s.contentStyle),i.Q6J("ngClass",s.contentStyleClass),i.xp6(2),i.Q6J("ngIf",u.group),i.xp6(1),i.Q6J("ngIf",!u.group),i.xp6(3),i.Q6J("ngIf",u.hasFilter()&&u.isEmpty()),i.xp6(1),i.Q6J("ngIf",!u.hasFilter()&&u.isEmpty())}}function Xh(y,V){1&y&&i.GkF(0)}function Vd(y,V){if(1&y&&(i.TgZ(0,"div",56),i.Hsn(1,1),i.YNc(2,Xh,1,0,"ng-container",27),i.qZA()),2&y){const s=i.oxw(2);i.xp6(2),i.Q6J("ngTemplateOutlet",s.footerTemplate)}}const _h=function(){return["p-multiselect-panel p-component"]},gu=function(y,V){return{showTransitionParams:y,hideTransitionParams:V}},Is=function(y){return{value:"visible",params:y}};function ks(y,V){if(1&y){const s=i.EpF();i.TgZ(0,"div",20),i.NdJ("@overlayAnimation.start",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onOverlayAnimationStart(b))})("@overlayAnimation.done",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onOverlayAnimationEnd(b))})("keydown",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onKeydown(b))})("click",function(b){i.CHM(s);const x=i.oxw();return i.KtG(x.onOverlayClick(b))}),i.YNc(1,kd,6,3,"div",21),i.TgZ(2,"div",22),i.YNc(3,Uc,4,11,"p-scroller",23),i.YNc(4,Pd,2,6,"ng-container",7),i.YNc(5,gh,8,7,"ng-template",null,24,i.W1O),i.qZA(),i.YNc(7,Vd,3,1,"div",25),i.qZA()}if(2&y){const s=i.oxw();i.Tol(s.panelStyleClass),i.Q6J("ngClass",i.DdM(11,_h))("@overlayAnimation",i.VKq(15,Is,i.WLB(12,gu,s.showTransitionOptions,s.hideTransitionOptions)))("ngStyle",s.panelStyle),i.xp6(1),i.Q6J("ngIf",s.showHeader),i.xp6(1),i.Udp("max-height",s.virtualScroll?"auto":s.scrollHeight||"auto"),i.xp6(1),i.Q6J("ngIf",s.virtualScroll),i.xp6(1),i.Q6J("ngIf",!s.virtualScroll),i.xp6(3),i.Q6J("ngIf",s.footerFacet||s.footerTemplate)}}const _u=[[["p-header"]],[["p-footer"]]],Yu=function(y,V,s,u){return{"p-multiselect p-component":!0,"p-multiselect-open":y,"p-multiselect-chip":V,"p-focus":s,"p-disabled":u}},Sl=function(y,V){return{"p-placeholder":y,"p-multiselect-label-empty":V}},Rc=function(){return{"p-multiselect-trigger":!0}},pd=["p-header","p-footer"],yu={provide:Be.JU,useExisting:(0,i.Gpc)(()=>Qu),multi:!0};let yh=(()=>{class y{constructor(){this.onClick=new i.vpe,this.onKeydown=new i.vpe}onOptionClick(s){this.onClick.emit({originalEvent:s,option:this.option})}onOptionKeydown(s){this.onKeydown.emit({originalEvent:s,option:this.option})}}return y.\u0275fac=function(s){return new(s||y)},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,u){1&s&&(i.TgZ(0,"li",0),i.NdJ("click",function(x){return u.onOptionClick(x)})("keydown",function(x){return u.onOptionKeydown(x)}),i.TgZ(1,"div",1)(2,"div",2),i._UZ(3,"span",3),i.qZA()(),i.YNc(4,Lc,2,1,"span",4),i.YNc(5,eo,1,0,"ng-container",5),i.qZA()),2&s&&(i.Q6J("ngStyle",i.VKq(9,pl,u.itemSize+"px"))("ngClass",i.WLB(11,ud,u.selected,u.disabled)),i.uIk("aria-label",u.label)("tabindex",u.disabled?null:"0"),i.xp6(2),i.Q6J("ngClass",i.VKq(14,rs,u.selected)),i.xp6(1),i.Q6J("ngClass",i.VKq(16,Mc,u.selected)),i.xp6(1),i.Q6J("ngIf",!u.template),i.xp6(1),i.Q6J("ngTemplateOutlet",u.template)("ngTemplateOutletContext",i.VKq(18,nl,u.option)))},dependencies:[g.mk,g.O5,g.tP,g.PC,Oe],encapsulation:2}),y})(),Qu=(()=>{class y{constructor(s,u,b,x,Ce,et){this.el=s,this.renderer=u,this.cd=b,this.filterService=x,this.config=Ce,this.overlayService=et,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.scrollHeight="200px",this.lazy=!1,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.autocomplete="on",this.showClear=!1,this.onChange=new i.vpe,this.onFilter=new i.vpe,this.onFocus=new i.vpe,this.onBlur=new i.vpe,this.onClick=new i.vpe,this.onClear=new i.vpe,this.onPanelShow=new i.vpe,this.onPanelHide=new i.vpe,this.onLazyLoad=new i.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}set defaultLabel(s){this._defaultLabel=s,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(s){this._placeholder=s,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(s){this._options=s,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(s){this._filterValue=s,this.activateFilter()}get itemSize(){return this._itemSize}set itemSize(s){this._itemSize=s,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.updateLabel(),this.filterBy&&(this.filterOptions={filter:s=>this.onFilterInputChange(s),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(s=>{switch(s.getType()){case"item":default:this.itemTemplate=s.template;break;case"group":this.groupTemplate=s.template;break;case"selectedItems":this.selectedItemsTemplate=s.template;break;case"header":this.headerTemplate=s.template;break;case"filter":this.filterTemplate=s.template;break;case"emptyfilter":this.emptyFilterTemplate=s.template;break;case"empty":this.emptyTemplate=s.template;break;case"footer":this.footerTemplate=s.template;break;case"loader":this.loaderTemplate=s.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}getOptionLabel(s){return this.optionLabel?gi.gb.resolveFieldData(s,this.optionLabel):s&&null!=s.label?s.label:s}getOptionValue(s){return this.optionValue?gi.gb.resolveFieldData(s,this.optionValue):!this.optionLabel&&s&&void 0!==s.value?s.value:s}getOptionGroupLabel(s){return this.optionGroupLabel?gi.gb.resolveFieldData(s,this.optionGroupLabel):s&&null!=s.label?s.label:s}getOptionGroupChildren(s){return this.optionGroupChildren?gi.gb.resolveFieldData(s,this.optionGroupChildren):s.items}isOptionDisabled(s){return(this.optionDisabled?gi.gb.resolveFieldData(s,this.optionDisabled):!(!s||void 0===s.disabled)&&s.disabled)||this.maxSelectionLimitReached&&!this.isSelected(s)}writeValue(s){this.value=s,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(s){this.onModelChange=s}registerOnTouched(s){this.onModelTouched=s}setDisabledState(s){this.disabled=s,this.cd.markForCheck()}onOptionClick(s){let u=s.option;if(this.isOptionDisabled(u))return;let b=this.getOptionValue(u),x=this.findSelectionIndex(b);-1!=x?(this.value=this.value.filter((Ce,et)=>et!=x),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],b]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:s.originalEvent,value:this.value,itemValue:b}),this.updateLabel(),this.updateFilledState()}isSelected(s){return-1!=this.findSelectionIndex(this.getOptionValue(s))}findSelectionIndex(s){let u=-1;if(this.value)for(let b=0;b<this.value.length;b++)if(gi.gb.equals(this.value[b],s,this.dataKey)){u=b;break}return u}get toggleAllDisabled(){let s=this.optionsToRender;if(!s||0===s.length)return!0;for(let u of s)if(!this.isOptionDisabled(u))return!1;return!0}toggleAll(s){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:s,value:this.value}),this.updateFilledState(),this.updateLabel(),s.preventDefault())}checkAll(){let u=[];this.optionsToRender.forEach(b=>{if(this.group){let x=this.getOptionGroupChildren(b);x&&x.forEach(Ce=>{let et=this.isOptionDisabled(Ce);(!et||et&&this.isSelected(Ce))&&u.push(this.getOptionValue(Ce))})}else{let x=this.isOptionDisabled(b);(!x||x&&this.isSelected(b))&&u.push(this.getOptionValue(b))}}),this.value=u}uncheckAll(){let u=[];this.optionsToRender.forEach(b=>{this.group?b.items&&b.items.forEach(x=>{this.isOptionDisabled(x)&&this.isSelected(x)&&u.push(this.getOptionValue(x))}):this.isOptionDisabled(b)&&this.isSelected(b)&&u.push(this.getOptionValue(b))}),this.value=u}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayClick(s){this.overlayService.add({originalEvent:s,target:this.el.nativeElement})}onOverlayAnimationStart(s){switch(s.toState){case"visible":this.overlay=s.element,this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&gi.P9.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(s){"void"===s.toState&&gi.P9.clear(s.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):ge.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=ge.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.overlay&&(this.appendTo?ge.absolutePosition(this.overlay,this.containerViewChild.nativeElement):ge.relativePosition(this.overlay,this.containerViewChild.nativeElement))}hide(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&this.resetFilter(),this.onPanelHide.emit(),this.cd.markForCheck()}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}close(s){this.hide(),s.preventDefault(),s.stopPropagation()}clear(s){this.value=null,this.updateLabel(),this.updateFilledState(),this.onClear.emit(),this.onModelChange(this.value),s.stopPropagation()}onMouseclick(s,u){this.disabled||this.readonly||s.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(s),!this.isOverlayClick(s)&&!ge.hasClass(s.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(u.focus(),this.show())))}removeChip(s,u){this.value=this.value.filter(b=>!gi.gb.equals(b,s,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:u,value:this.value,itemValue:s}),this.updateLabel(),this.updateFilledState()}isOverlayClick(s){let u=s.target;return!!this.overlay&&(this.overlay.isSameNode(u)||this.overlay.contains(u))}isOutsideClicked(s){return!(this.el.nativeElement.isSameNode(s.target)||this.el.nativeElement.contains(s.target)||this.isOverlayClick(s))}onInputFocus(s){this.focus=!0,this.onFocus.emit({originalEvent:s})}onInputBlur(s){this.focus=!1,this.onBlur.emit({originalEvent:s}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(s){if(!this.readonly)switch(s.originalEvent.which){case 40:var u=this.findNextItem(s.originalEvent.target.parentElement);u&&u.focus(),s.originalEvent.preventDefault();break;case 38:var b=this.findPrevItem(s.originalEvent.target.parentElement);b&&b.focus(),s.originalEvent.preventDefault();break;case 13:this.onOptionClick(s),s.originalEvent.preventDefault();break;case 9:this.hide()}}findNextItem(s){let u=s.nextElementSibling;return u?ge.hasClass(u.children[0],"p-disabled")||ge.isHidden(u.children[0])||ge.hasClass(u,"p-multiselect-item-group")?this.findNextItem(u):u.children[0]:null}findPrevItem(s){let u=s.previousElementSibling;return u?ge.hasClass(u.children[0],"p-disabled")||ge.isHidden(u.children[0])||ge.hasClass(u,"p-multiselect-item-group")?this.findPrevItem(u):u.children[0]:null}onKeydown(s){switch(s.which){case 40:!this.overlayVisible&&s.altKey&&(this.show(),s.preventDefault());break;case 32:this.overlayVisible||(this.show(),s.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let s="";for(let u=0;u<this.value.length;u++){let b=this.findLabelByValue(this.value[u]);b&&(s.length>0&&(s+=", "),s+=b)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=s;else{let u=/{(.*?)}/;this.valuesAsString=u.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(u)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(s){if(this.group){let u=null;for(let b=0;b<this.options.length;b++){let x=this.getOptionGroupChildren(this.options[b]);if(x&&(u=this.searchLabelByValue(s,x),u))break}return u}return this.searchLabelByValue(s,this.options)}searchLabelByValue(s,u){let b=null;for(let x=0;x<u.length;x++){let Ce=u[x],et=this.getOptionValue(Ce);if(null==s&&null==et||gi.gb.equals(s,et,this.dataKey)){b=this.getOptionLabel(Ce);break}}return b}get allChecked(){let s=this.optionsToRender;if(!s||0===s.length)return!1;{let u=0,b=0,x=0,Ce=this.group?0:this.optionsToRender.length;for(let et of s)if(this.group)for(let Mt of this.getOptionGroupChildren(et)){let fn=this.isOptionDisabled(Mt),wn=this.isSelected(Mt);if(fn)wn?u++:b++;else{if(!wn)return!1;x++}Ce++}else{let Mt=this.isOptionDisabled(et),fn=this.isSelected(et);if(Mt)fn?u++:b++;else{if(!fn)return!1;x++}}return Ce===u||Ce===x||x&&Ce===x+b+u}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Ee.ws.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Ee.ws.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilterInputChange(s){this._filterValue=s.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:s,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}activateFilter(){if(this.hasFilter()&&this._options){let s=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let u=[];for(let b of this.options){let x=this.filterService.filter(this.getOptionGroupChildren(b),s,this.filterValue,this.filterMatchMode,this.filterLocale);x&&x.length&&u.push({...b,[this.optionGroupChildren]:x})}this._filteredOptions=u}else this._filteredOptions=this.filterService.filter(this.options,s,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",u=>{!this.preventDocumentDefault&&this.isOutsideClicked(u)&&this.hide(),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!ge.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Ke(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&gi.P9.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return y.\u0275fac=function(s){return new(s||y)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.sBO),i.Y36(Ee.iZ),i.Y36(Ee.b4),i.Y36(Ee.F0))},y.\u0275cmp=i.Xpm({type:y,selectors:[["p-multiSelect"]],contentQueries:function(s,u,b){if(1&s&&(i.Suo(b,Ee.$_,5),i.Suo(b,Ee.h4,5),i.Suo(b,Ee.jx,4)),2&s){let x;i.iGM(x=i.CRH())&&(u.footerFacet=x.first),i.iGM(x=i.CRH())&&(u.headerFacet=x.first),i.iGM(x=i.CRH())&&(u.templates=x)}},viewQuery:function(s,u){if(1&s&&(i.Gf(Vc,5),i.Gf(sc,5),i.Gf(lh,5),i.Gf(ch,5),i.Gf(au,5)),2&s){let b;i.iGM(b=i.CRH())&&(u.containerViewChild=b.first),i.iGM(b=i.CRH())&&(u.filterInputChild=b.first),i.iGM(b=i.CRH())&&(u.accessibleViewChild=b.first),i.iGM(b=i.CRH())&&(u.itemsViewChild=b.first),i.iGM(b=i.CRH())&&(u.scroller=b.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(s,u){2&s&&i.ekj("p-inputwrapper-filled",u.filled)("p-inputwrapper-focus",u.focus||u.overlayVisible)("p-multiselect-clearable",u.showClear&&!u.disabled)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",label:"label",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad"},features:[i._Bn([yu])],ngContentSelectors:pd,decls:13,vars:34,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-multiselect-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],[1,"p-multiselect-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["itemslist",""],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(s,u){if(1&s){const b=i.EpF();i.F$t(_u),i.TgZ(0,"div",0,1),i.NdJ("click",function(Ce){i.CHM(b);const et=i.MAs(4);return i.KtG(u.onMouseclick(Ce,et))}),i.TgZ(2,"div",2)(3,"input",3,4),i.NdJ("focus",function(Ce){return u.onInputFocus(Ce)})("blur",function(Ce){return u.onInputBlur(Ce)})("keydown",function(Ce){return u.onKeydown(Ce)}),i.qZA()(),i.TgZ(5,"div",5)(6,"div",6),i.YNc(7,Vu,3,2,"ng-container",7),i.YNc(8,xd,1,0,"ng-container",8),i.qZA(),i.YNc(9,zh,1,0,"i",9),i.qZA(),i.TgZ(10,"div",10),i._UZ(11,"span",11),i.qZA(),i.YNc(12,ks,8,17,"div",12),i.qZA()}2&s&&(i.Tol(u.styleClass),i.Q6J("ngClass",i.l5B(23,Yu,u.overlayVisible,"chip"===u.display,u.focus,u.disabled))("ngStyle",u.style),i.xp6(3),i.Q6J("disabled",u.disabled),i.uIk("label",u.label)("id",u.inputId)("name",u.name)("tabindex",u.tabindex)("aria-expanded",u.overlayVisible)("aria-labelledby",u.ariaLabelledBy),i.xp6(2),i.Q6J("pTooltip",u.tooltip)("tooltipPosition",u.tooltipPosition)("positionStyle",u.tooltipPositionStyle)("tooltipStyleClass",u.tooltipStyleClass),i.xp6(1),i.Q6J("ngClass",i.WLB(28,Sl,u.valuesAsString===(u.defaultLabel||u.placeholder),!(null!=u.valuesAsString&&0!==u.valuesAsString.length||null!=u.placeholder&&0!==u.placeholder.length))),i.xp6(1),i.Q6J("ngIf",!u.selectedItemsTemplate),i.xp6(1),i.Q6J("ngTemplateOutlet",u.selectedItemsTemplate)("ngTemplateOutletContext",i.VKq(31,nl,u.value)),i.xp6(1),i.Q6J("ngIf",null!=u.value&&u.filled&&!u.disabled&&u.showClear),i.xp6(1),i.Q6J("ngClass",i.DdM(33,Rc)),i.xp6(1),i.Q6J("ngClass",u.dropdownIcon),i.xp6(1),i.Q6J("ngIf",u.overlayVisible))},dependencies:[g.mk,g.sg,g.O5,g.tP,g.PC,Ee.jx,Da,Oe,es,yh],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}\n"],encapsulation:2,data:{animation:[(0,se.X$)("overlayAnimation",[(0,se.eR)(":enter",[(0,se.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,se.jt)("{{showTransitionParams}}")]),(0,se.eR)(":leave",[(0,se.jt)("{{hideTransitionParams}}",(0,se.oB)({opacity:0}))])])]},changeDetection:0}),y})(),xu=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,Ee.m8,Jo,Me,ea,Ee.m8,ea]}),y})(),vu=(()=>{class y{}return y.\u0275fac=function(s){return new(s||y)},y.\u0275mod=i.oAB({type:y}),y.\u0275inj=i.cJS({imports:[g.ez,er,nt.j,rn,Wi,Be.u5,Be.UX,ot,Rr,Wr,Za,qa.Ps,jl,Ho,Ua,xu,it.Rh.forRoot()]}),y})()},773:(Sn,Ct,Q)=>{Q.d(Ct,{e:()=>Se});var g=Q(6457),Ee=(Q(2090),Q(9681),Q(1877),Q(4859),Q(4650)),Oe=Q(1205),Me=Q(7407),rt=Q(1211),Re=Q(7471);let Se=(()=>{class Ge{constructor(dt,wt,Wt,Dt,bt){this.afAuth=dt,this.afs=wt,this.router=Wt,this.ngZone=Dt,this.db=bt,this.afAuth.authState.subscribe(ot=>{ot?(this.data=ot,localStorage.setItem("user",JSON.stringify(this.data)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(dt,wt){return this.afAuth.signInWithEmailAndPassword(dt,wt).then(Wt=>{this.setUserData(Wt.user),this.afAuth.authState.subscribe(Dt=>{Dt&&this.router.navigate(["dashboard"])})}).catch(Wt=>{window.alert(Wt.message)})}signUp(dt,wt){return this.afAuth.createUserWithEmailAndPassword(dt,wt).then(Wt=>{this.SendVerificationMail(),this.setUserData(Wt.user)}).catch(Wt=>{window.alert(Wt.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(dt=>dt.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email"])})}ForgotPassword(dt){return this.afAuth.sendPasswordResetEmail(dt).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(wt=>{window.alert(wt)})}get isLoggedIn(){const dt=JSON.parse(localStorage.getItem("user"));return null!==dt&&!1!==dt.emailVerified}GoogleAuth(){return this.AuthLogin(new g.Q).then(dt=>{this.router.navigate(["dashboard"])})}AuthLogin(dt){return this.afAuth.signInWithPopup(dt).then(wt=>{this.router.navigate(["dashboard"]),this.setUserData(wt.user)}).catch(wt=>{window.alert(wt)})}getUsers(){return new Promise((dt,wt)=>{this.afs.collection("/people").snapshotChanges().subscribe(Wt=>{dt(Wt)})})}GetStudent(dt){return this.studentRef=this.db.object("students-list/"+dt),this.studentRef}GetStudentsList(){return this.studentsRef=this.db.list("students-list"),this.studentsRef}UpdateStudent(dt){this.studentRef.update({firstName:dt.firstName,lastName:dt.lastName,email:dt.email,mobileNumber:dt.mobileNumber})}AddStudent(dt){this.studentsRef.push({firstName:dt.firstName,lastName:dt.lastName,email:dt.email,mobileNumber:dt.mobileNumber})}DeleteStudent(dt){this.studentRef=this.db.object("students-list/"+dt),this.studentRef.remove()}setUserData(dt){return this.afs.doc(`users/${dt.userId}`).set({uid:dt.uid,email:dt.email,displayName:dt.displayName,photoURL:dt.photoURL,emailVerified:dt.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return Ge.\u0275fac=function(dt){return new(dt||Ge)(Ee.LFG(Oe.zQ),Ee.LFG(Me.ST),Ee.LFG(rt.F0),Ee.LFG(Ee.R0b),Ee.LFG(Re.KQ))},Ge.\u0275prov=Ee.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})()},6427:(Sn,Ct,Q)=>{var g=Q(1481),i=Q(4650),se=Q(1211);const ge=[{path:"",loadChildren:()=>Promise.resolve().then(Q.bind(Q,4058)).then(k=>k.ComponentsModule)}];let Ke=(()=>{class k{constructor(){console.log("app-component")}}return k.\u0275fac=function(T){return new(T||k)},k.\u0275mod=i.oAB({type:k}),k.\u0275inj=i.cJS({imports:[se.Bz.forRoot(ge),se.Bz]}),k})();var Ee=Q(805);let Oe=(()=>{class k{constructor(T){this.primengconfig=T,this.title="PrimeNG"}ngOnInit(){this.primengconfig.ripple=!0}}return k.\u0275fac=function(T){return new(T||k)(i.Y36(Ee.b4))},k.\u0275cmp=i.Xpm({type:k,selectors:[["app-root"]],decls:1,vars:0,template:function(T,P){1&T&&i._UZ(0,"router-outlet")},dependencies:[se.lC]}),k})();var Me=Q(4006),rt=Q(6895);let ee=(()=>{class k{}return k.\u0275fac=function(T){return new(T||k)},k.\u0275mod=i.oAB({type:k}),k.\u0275inj=i.cJS({imports:[rt.ez,Ee.m8]}),k})();var pt=Q(7340);function st(k){return new i.vHH(3e3,!1)}function Ar(){return typeof window<"u"&&typeof window.document<"u"}function Mn(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ji(k){switch(k.length){case 0:return new pt.ZN;case 1:return k[0];default:return new pt.ZE(k)}}function ri(k,_,T,P,J=new Map,ce=new Map){const Ie=[],Le=[];let lt=-1,Ft=null;if(P.forEach(nn=>{const en=nn.get("offset"),hi=en==lt,mi=hi&&Ft||new Map;nn.forEach((Bn,ei)=>{let ui=ei,pr=Bn;if("offset"!==ei)switch(ui=_.normalizePropertyName(ui,Ie),pr){case pt.k1:pr=J.get(ei);break;case pt.l3:pr=ce.get(ei);break;default:pr=_.normalizeStyleValue(ei,ui,pr,Ie)}mi.set(ui,pr)}),hi||Le.push(mi),Ft=mi,lt=en}),Ie.length)throw function yi(k){return new i.vHH(3502,!1)}();return Le}function or(k,_,T,P){switch(_){case"start":k.onStart(()=>P(T&&ai(T,"start",k)));break;case"done":k.onDone(()=>P(T&&ai(T,"done",k)));break;case"destroy":k.onDestroy(()=>P(T&&ai(T,"destroy",k)))}}function ai(k,_,T){const ce=vs(k.element,k.triggerName,k.fromState,k.toState,_||k.phaseName,T.totalTime??k.totalTime,!!T.disabled),Ie=k._data;return null!=Ie&&(ce._data=Ie),ce}function vs(k,_,T,P,J="",ce=0,Ie){return{element:k,triggerName:_,fromState:T,toState:P,phaseName:J,totalTime:ce,disabled:!!Ie}}function qn(k,_,T){let P=k.get(_);return P||k.set(_,P=T),P}function ct(k){const _=k.indexOf(":");return[k.substring(1,_),k.slice(_+1)]}let qe=(k,_)=>!1,ze=(k,_,T)=>[],it=null;function Ye(k){const _=k.parentNode||k.host;return _===it?null:_}(Mn()||typeof Element<"u")&&(Ar()?(it=(()=>document.documentElement)(),qe=(k,_)=>{for(;_;){if(_===k)return!0;_=Ye(_)}return!1}):qe=(k,_)=>k.contains(_),ze=(k,_,T)=>{if(T)return Array.from(k.querySelectorAll(_));const P=k.querySelector(_);return P?[P]:[]});let Rn=null,zi=!1;const We=qe,tt=ze;let _n=(()=>{class k{validateStyleProperty(T){return function Xi(k){Rn||(Rn=function _t(){return typeof document<"u"?document.body:null}()||{},zi=!!Rn.style&&"WebkitAppearance"in Rn.style);let _=!0;return Rn.style&&!function mn(k){return"ebkit"==k.substring(1,6)}(k)&&(_=k in Rn.style,!_&&zi&&(_="Webkit"+k.charAt(0).toUpperCase()+k.slice(1)in Rn.style)),_}(T)}matchesElement(T,P){return!1}containsElement(T,P){return We(T,P)}getParentElement(T){return Ye(T)}query(T,P,J){return tt(T,P,J)}computeStyle(T,P,J){return J||""}animate(T,P,J,ce,Ie,Le=[],lt){return new pt.ZN(J,ce)}}return k.\u0275fac=function(T){return new(T||k)},k.\u0275prov=i.Yz7({token:k,factory:k.\u0275fac}),k})(),$n=(()=>{class k{}return k.NOOP=new _n,k})();const De="ng-enter",ht="ng-leave",It="ng-trigger",En=".ng-trigger",vi="ng-animating",Si=".ng-animating";function fr(k){if("number"==typeof k)return k;const _=k.match(/^(-?[\.\d]+)(m?s)/);return!_||_.length<2?0:wr(parseFloat(_[1]),_[2])}function wr(k,_){return"s"===_?1e3*k:k}function In(k,_,T){return k.hasOwnProperty("duration")?k:function zs(k,_,T){let J,ce=0,Ie="";if("string"==typeof k){const Le=k.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Le)return _.push(st()),{duration:0,delay:0,easing:""};J=wr(parseFloat(Le[1]),Le[2]);const lt=Le[3];null!=lt&&(ce=wr(parseFloat(lt),Le[4]));const Ft=Le[5];Ft&&(Ie=Ft)}else J=k;if(!T){let Le=!1,lt=_.length;J<0&&(_.push(function Et(){return new i.vHH(3100,!1)}()),Le=!0),ce<0&&(_.push(function yt(){return new i.vHH(3101,!1)}()),Le=!0),Le&&_.splice(lt,0,st())}return{duration:J,delay:ce,easing:Ie}}(k,_,T)}function Ss(k,_={}){return Object.keys(k).forEach(T=>{_[T]=k[T]}),_}function ya(k){const _=new Map;return Object.keys(k).forEach(T=>{_.set(T,k[T])}),_}function ls(k,_=new Map,T){if(T)for(let[P,J]of T)_.set(P,J);for(let[P,J]of k)_.set(P,J);return _}function Ds(k,_,T){return T?_+":"+T+";":""}function no(k){let _="";for(let T=0;T<k.style.length;T++){const P=k.style.item(T);_+=Ds(0,P,k.style.getPropertyValue(P))}for(const T in k.style)k.style.hasOwnProperty(T)&&!T.startsWith("_")&&(_+=Ds(0,Rr(T),k.style[T]));k.setAttribute("style",_)}function Gi(k,_,T){k.style&&(_.forEach((P,J)=>{const ce=Ns(J);T&&!T.has(J)&&T.set(J,k.style[ce]),k.style[ce]=P}),Mn()&&no(k))}function fo(k,_){k.style&&(_.forEach((T,P)=>{const J=Ns(P);k.style[J]=""}),Mn()&&no(k))}function er(k){return Array.isArray(k)?1==k.length?k[0]:(0,pt.vP)(k):k}const Gs=new RegExp("{{\\s*(.+?)\\s*}}","g");function xs(k){let _=[];if("string"==typeof k){let T;for(;T=Gs.exec(k);)_.push(T[1]);Gs.lastIndex=0}return _}function $s(k,_,T){const P=k.toString(),J=P.replace(Gs,(ce,Ie)=>{let Le=_[Ie];return null==Le&&(T.push(function rn(k){return new i.vHH(3003,!1)}()),Le=""),Le.toString()});return J==P?k:J}function Ps(k){const _=[];let T=k.next();for(;!T.done;)_.push(T.value),T=k.next();return _}const po=/-+([a-z0-9])/g;function Ns(k){return k.replace(po,(..._)=>_[1].toUpperCase())}function Rr(k){return k.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Wr(k,_,T){switch(_.type){case 7:return k.visitTrigger(_,T);case 0:return k.visitState(_,T);case 1:return k.visitTransition(_,T);case 2:return k.visitSequence(_,T);case 3:return k.visitGroup(_,T);case 4:return k.visitAnimate(_,T);case 5:return k.visitKeyframes(_,T);case 6:return k.visitStyle(_,T);case 8:return k.visitReference(_,T);case 9:return k.visitAnimateChild(_,T);case 10:return k.visitAnimateRef(_,T);case 11:return k.visitQuery(_,T);case 12:return k.visitStagger(_,T);default:throw function gn(k){return new i.vHH(3004,!1)}()}}function gi(k,_){return window.getComputedStyle(k)[_]}function io(k,_){const T=[];return"string"==typeof k?k.split(/\s*,\s*/).forEach(P=>function mt(k,_,T){if(":"==k[0]){const lt=function ut(k,_){switch(k){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(T,P)=>parseFloat(P)>parseFloat(T);case":decrement":return(T,P)=>parseFloat(P)<parseFloat(T);default:return _.push(function Zi(k){return new i.vHH(3016,!1)}()),"* => *"}}(k,T);if("function"==typeof lt)return void _.push(lt);k=lt}const P=k.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==P||P.length<4)return T.push(function Ei(k){return new i.vHH(3015,!1)}()),_;const J=P[1],ce=P[2],Ie=P[3];_.push(Yt(J,Ie));"<"==ce[0]&&!("*"==J&&"*"==Ie)&&_.push(Yt(Ie,J))}(P,T,_)):T.push(k),T}const Tt=new Set(["true","1"]),Pt=new Set(["false","0"]);function Yt(k,_){const T=Tt.has(k)||Pt.has(k),P=Tt.has(_)||Pt.has(_);return(J,ce)=>{let Ie="*"==k||k==J,Le="*"==_||_==ce;return!Ie&&T&&"boolean"==typeof J&&(Ie=J?Tt.has(k):Pt.has(k)),!Le&&P&&"boolean"==typeof ce&&(Le=ce?Tt.has(_):Pt.has(_)),Ie&&Le}}const si=new RegExp("s*:selfs*,?","g");function li(k,_,T,P){return new go(k).build(_,T,P)}class go{constructor(_){this._driver=_}build(_,T,P){const J=new Cr(T);return this._resetContextStyleTimingState(J),Wr(this,er(_),J)}_resetContextStyleTimingState(_){_.currentQuerySelector="",_.collectedStyles=new Map,_.collectedStyles.set("",new Map),_.currentTime=0}visitTrigger(_,T){let P=T.queryCount=0,J=T.depCount=0;const ce=[],Ie=[];return"@"==_.name.charAt(0)&&T.errors.push(function Pn(){return new i.vHH(3006,!1)}()),_.definitions.forEach(Le=>{if(this._resetContextStyleTimingState(T),0==Le.type){const lt=Le,Ft=lt.name;Ft.toString().split(/\s*,\s*/).forEach(nn=>{lt.name=nn,ce.push(this.visitState(lt,T))}),lt.name=Ft}else if(1==Le.type){const lt=this.visitTransition(Le,T);P+=lt.queryCount,J+=lt.depCount,Ie.push(lt)}else T.errors.push(function Gt(){return new i.vHH(3007,!1)}())}),{type:7,name:_.name,states:ce,transitions:Ie,queryCount:P,depCount:J,options:null}}visitState(_,T){const P=this.visitStyle(_.styles,T),J=_.options&&_.options.params||null;if(P.containsDynamicStyles){const ce=new Set,Ie=J||{};P.styles.forEach(Le=>{Le instanceof Map&&Le.forEach(lt=>{xs(lt).forEach(Ft=>{Ie.hasOwnProperty(Ft)||ce.add(Ft)})})}),ce.size&&(Ps(ce.values()),T.errors.push(function di(k,_){return new i.vHH(3008,!1)}()))}return{type:0,name:_.name,style:P,options:J?{params:J}:null}}visitTransition(_,T){T.queryCount=0,T.depCount=0;const P=Wr(this,er(_.animation),T);return{type:1,matchers:io(_.expr,T.errors),animation:P,queryCount:T.queryCount,depCount:T.depCount,options:ko(_.options)}}visitSequence(_,T){return{type:2,steps:_.steps.map(P=>Wr(this,P,T)),options:ko(_.options)}}visitGroup(_,T){const P=T.currentTime;let J=0;const ce=_.steps.map(Ie=>{T.currentTime=P;const Le=Wr(this,Ie,T);return J=Math.max(J,T.currentTime),Le});return T.currentTime=J,{type:3,steps:ce,options:ko(_.options)}}visitAnimate(_,T){const P=function jr(k,_){if(k.hasOwnProperty("duration"))return k;if("number"==typeof k)return Oo(In(k,_).duration,0,"");const T=k;if(T.split(/\s+/).some(ce=>"{"==ce.charAt(0)&&"{"==ce.charAt(1))){const ce=Oo(0,0,"");return ce.dynamic=!0,ce.strValue=T,ce}const J=In(T,_);return Oo(J.duration,J.delay,J.easing)}(_.timings,T.errors);T.currentAnimateTimings=P;let J,ce=_.styles?_.styles:(0,pt.oB)({});if(5==ce.type)J=this.visitKeyframes(ce,T);else{let Ie=_.styles,Le=!1;if(!Ie){Le=!0;const Ft={};P.easing&&(Ft.easing=P.easing),Ie=(0,pt.oB)(Ft)}T.currentTime+=P.duration+P.delay;const lt=this.visitStyle(Ie,T);lt.isEmptyStep=Le,J=lt}return T.currentAnimateTimings=null,{type:4,timings:P,style:J,options:null}}visitStyle(_,T){const P=this._makeStyleAst(_,T);return this._validateStyleAst(P,T),P}_makeStyleAst(_,T){const P=[],J=Array.isArray(_.styles)?_.styles:[_.styles];for(let Le of J)"string"==typeof Le?Le===pt.l3?P.push(Le):T.errors.push(new i.vHH(3002,!1)):P.push(ya(Le));let ce=!1,Ie=null;return P.forEach(Le=>{if(Le instanceof Map&&(Le.has("easing")&&(Ie=Le.get("easing"),Le.delete("easing")),!ce))for(let lt of Le.values())if(lt.toString().indexOf("{{")>=0){ce=!0;break}}),{type:6,styles:P,easing:Ie,offset:_.offset,containsDynamicStyles:ce,options:null}}_validateStyleAst(_,T){const P=T.currentAnimateTimings;let J=T.currentTime,ce=T.currentTime;P&&ce>0&&(ce-=P.duration+P.delay),_.styles.forEach(Ie=>{"string"!=typeof Ie&&Ie.forEach((Le,lt)=>{const Ft=T.collectedStyles.get(T.currentQuerySelector),nn=Ft.get(lt);let en=!0;nn&&(ce!=J&&ce>=nn.startTime&&J<=nn.endTime&&(T.errors.push(function Ut(k,_,T,P,J){return new i.vHH(3010,!1)}()),en=!1),ce=nn.startTime),en&&Ft.set(lt,{startTime:ce,endTime:J}),T.options&&function ja(k,_,T){const P=_.params||{},J=xs(k);J.length&&J.forEach(ce=>{P.hasOwnProperty(ce)||T.push(function Qt(k){return new i.vHH(3001,!1)}())})}(Le,T.options,T.errors)})})}visitKeyframes(_,T){const P={type:5,styles:[],options:null};if(!T.currentAnimateTimings)return T.errors.push(function He(){return new i.vHH(3011,!1)}()),P;let ce=0;const Ie=[];let Le=!1,lt=!1,Ft=0;const nn=_.steps.map(pr=>{const ns=this._makeStyleAst(pr,T);let dr=null!=ns.offset?ns.offset:function _i(k){if("string"==typeof k)return null;let _=null;if(Array.isArray(k))k.forEach(T=>{if(T instanceof Map&&T.has("offset")){const P=T;_=parseFloat(P.get("offset")),P.delete("offset")}});else if(k instanceof Map&&k.has("offset")){const T=k;_=parseFloat(T.get("offset")),T.delete("offset")}return _}(ns.styles),tr=0;return null!=dr&&(ce++,tr=ns.offset=dr),lt=lt||tr<0||tr>1,Le=Le||tr<Ft,Ft=tr,Ie.push(tr),ns});lt&&T.errors.push(function vt(){return new i.vHH(3012,!1)}()),Le&&T.errors.push(function un(){return new i.vHH(3200,!1)}());const en=_.steps.length;let hi=0;ce>0&&ce<en?T.errors.push(function Hn(){return new i.vHH(3202,!1)}()):0==ce&&(hi=1/(en-1));const mi=en-1,Bn=T.currentTime,ei=T.currentAnimateTimings,ui=ei.duration;return nn.forEach((pr,ns)=>{const dr=hi>0?ns==mi?1:hi*ns:Ie[ns],tr=dr*ui;T.currentTime=Bn+ei.delay+tr,ei.duration=tr,this._validateStyleAst(pr,T),pr.offset=dr,P.styles.push(pr)}),P}visitReference(_,T){return{type:8,animation:Wr(this,er(_.animation),T),options:ko(_.options)}}visitAnimateChild(_,T){return T.depCount++,{type:9,options:ko(_.options)}}visitAnimateRef(_,T){return{type:10,animation:this.visitReference(_.animation,T),options:ko(_.options)}}visitQuery(_,T){const P=T.currentQuerySelector,J=_.options||{};T.queryCount++,T.currentQuery=_;const[ce,Ie]=function Ks(k){const _=!!k.split(/\s*,\s*/).find(T=>":self"==T);return _&&(k=k.replace(si,"")),k=k.replace(/@\*/g,En).replace(/@\w+/g,T=>En+"-"+T.slice(1)).replace(/:animating/g,Si),[k,_]}(_.selector);T.currentQuerySelector=P.length?P+" "+ce:ce,qn(T.collectedStyles,T.currentQuerySelector,new Map);const Le=Wr(this,er(_.animation),T);return T.currentQuery=null,T.currentQuerySelector=P,{type:11,selector:ce,limit:J.limit||0,optional:!!J.optional,includeSelf:Ie,animation:Le,originalSelector:_.selector,options:ko(_.options)}}visitStagger(_,T){T.currentQuery||T.errors.push(function Wi(){return new i.vHH(3013,!1)}());const P="full"===_.timings?{duration:0,delay:0,easing:"full"}:In(_.timings,T.errors,!0);return{type:12,animation:Wr(this,er(_.animation),T),timings:P,options:null}}}class Cr{constructor(_){this.errors=_,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ko(k){return k?(k=Ss(k)).params&&(k.params=function ds(k){return k?Ss(k):null}(k.params)):k={},k}function Oo(k,_,T){return{duration:k,delay:_,easing:T}}function Er(k,_,T,P,J,ce,Ie=null,Le=!1){return{type:1,element:k,keyframes:_,preStyleProps:T,postStyleProps:P,duration:J,delay:ce,totalTime:J+ce,easing:Ie,subTimeline:Le}}class ro{constructor(){this._map=new Map}get(_){return this._map.get(_)||[]}append(_,T){let P=this._map.get(_);P||this._map.set(_,P=[]),P.push(...T)}has(_){return this._map.has(_)}clear(){this._map.clear()}}const Xo=new RegExp(":enter","g"),ea=new RegExp(":leave","g");function yo(k,_,T,P,J,ce=new Map,Ie=new Map,Le,lt,Ft=[]){return(new za).buildKeyframes(k,_,T,P,J,ce,Ie,Le,lt,Ft)}class za{buildKeyframes(_,T,P,J,ce,Ie,Le,lt,Ft,nn=[]){Ft=Ft||new ro;const en=new vo(_,T,Ft,J,ce,nn,[]);en.options=lt;const hi=lt.delay?fr(lt.delay):0;en.currentTimeline.delayNextStep(hi),en.currentTimeline.setStyles([Ie],null,en.errors,lt),Wr(this,P,en);const mi=en.timelines.filter(Bn=>Bn.containsAnimation());if(mi.length&&Le.size){let Bn;for(let ei=mi.length-1;ei>=0;ei--){const ui=mi[ei];if(ui.element===T){Bn=ui;break}}Bn&&!Bn.allowOnlyTimelineStyles()&&Bn.setStyles([Le],null,en.errors,lt)}return mi.length?mi.map(Bn=>Bn.buildKeyframes()):[Er(T,[],[],[],0,hi,"",!1)]}visitTrigger(_,T){}visitState(_,T){}visitTransition(_,T){}visitAnimateChild(_,T){const P=T.subInstructions.get(T.element);if(P){const J=T.createSubContext(_.options),ce=T.currentTimeline.currentTime,Ie=this._visitSubInstructions(P,J,J.options);ce!=Ie&&T.transformIntoNewTimeline(Ie)}T.previousNode=_}visitAnimateRef(_,T){const P=T.createSubContext(_.options);P.transformIntoNewTimeline(),this.visitReference(_.animation,P),T.transformIntoNewTimeline(P.currentTimeline.currentTime),T.previousNode=_}_visitSubInstructions(_,T,P){let ce=T.currentTimeline.currentTime;const Ie=null!=P.duration?fr(P.duration):null,Le=null!=P.delay?fr(P.delay):null;return 0!==Ie&&_.forEach(lt=>{const Ft=T.appendInstructionToTimeline(lt,Ie,Le);ce=Math.max(ce,Ft.duration+Ft.delay)}),ce}visitReference(_,T){T.updateOptions(_.options,!0),Wr(this,_.animation,T),T.previousNode=_}visitSequence(_,T){const P=T.subContextCount;let J=T;const ce=_.options;if(ce&&(ce.params||ce.delay)&&(J=T.createSubContext(ce),J.transformIntoNewTimeline(),null!=ce.delay)){6==J.previousNode.type&&(J.currentTimeline.snapshotCurrentStyles(),J.previousNode=As);const Ie=fr(ce.delay);J.delayNextStep(Ie)}_.steps.length&&(_.steps.forEach(Ie=>Wr(this,Ie,J)),J.currentTimeline.applyStylesToKeyframe(),J.subContextCount>P&&J.transformIntoNewTimeline()),T.previousNode=_}visitGroup(_,T){const P=[];let J=T.currentTimeline.currentTime;const ce=_.options&&_.options.delay?fr(_.options.delay):0;_.steps.forEach(Ie=>{const Le=T.createSubContext(_.options);ce&&Le.delayNextStep(ce),Wr(this,Ie,Le),J=Math.max(J,Le.currentTimeline.currentTime),P.push(Le.currentTimeline)}),P.forEach(Ie=>T.currentTimeline.mergeTimelineCollectedStyles(Ie)),T.transformIntoNewTimeline(J),T.previousNode=_}_visitTiming(_,T){if(_.dynamic){const P=_.strValue;return In(T.params?$s(P,T.params,T.errors):P,T.errors)}return{duration:_.duration,delay:_.delay,easing:_.easing}}visitAnimate(_,T){const P=T.currentAnimateTimings=this._visitTiming(_.timings,T),J=T.currentTimeline;P.delay&&(T.incrementTime(P.delay),J.snapshotCurrentStyles());const ce=_.style;5==ce.type?this.visitKeyframes(ce,T):(T.incrementTime(P.duration),this.visitStyle(ce,T),J.applyStylesToKeyframe()),T.currentAnimateTimings=null,T.previousNode=_}visitStyle(_,T){const P=T.currentTimeline,J=T.currentAnimateTimings;!J&&P.hasCurrentStyleProperties()&&P.forwardFrame();const ce=J&&J.easing||_.easing;_.isEmptyStep?P.applyEmptyStep(ce):P.setStyles(_.styles,ce,T.errors,T.options),T.previousNode=_}visitKeyframes(_,T){const P=T.currentAnimateTimings,J=T.currentTimeline.duration,ce=P.duration,Le=T.createSubContext().currentTimeline;Le.easing=P.easing,_.styles.forEach(lt=>{Le.forwardTime((lt.offset||0)*ce),Le.setStyles(lt.styles,lt.easing,T.errors,T.options),Le.applyStylesToKeyframe()}),T.currentTimeline.mergeTimelineCollectedStyles(Le),T.transformIntoNewTimeline(J+ce),T.previousNode=_}visitQuery(_,T){const P=T.currentTimeline.currentTime,J=_.options||{},ce=J.delay?fr(J.delay):0;ce&&(6===T.previousNode.type||0==P&&T.currentTimeline.hasCurrentStyleProperties())&&(T.currentTimeline.snapshotCurrentStyles(),T.previousNode=As);let Ie=P;const Le=T.invokeQuery(_.selector,_.originalSelector,_.limit,_.includeSelf,!!J.optional,T.errors);T.currentQueryTotal=Le.length;let lt=null;Le.forEach((Ft,nn)=>{T.currentQueryIndex=nn;const en=T.createSubContext(_.options,Ft);ce&&en.delayNextStep(ce),Ft===T.element&&(lt=en.currentTimeline),Wr(this,_.animation,en),en.currentTimeline.applyStylesToKeyframe(),Ie=Math.max(Ie,en.currentTimeline.currentTime)}),T.currentQueryIndex=0,T.currentQueryTotal=0,T.transformIntoNewTimeline(Ie),lt&&(T.currentTimeline.mergeTimelineCollectedStyles(lt),T.currentTimeline.snapshotCurrentStyles()),T.previousNode=_}visitStagger(_,T){const P=T.parentContext,J=T.currentTimeline,ce=_.timings,Ie=Math.abs(ce.duration),Le=Ie*(T.currentQueryTotal-1);let lt=Ie*T.currentQueryIndex;switch(ce.duration<0?"reverse":ce.easing){case"reverse":lt=Le-lt;break;case"full":lt=P.currentStaggerTime}const nn=T.currentTimeline;lt&&nn.delayNextStep(lt);const en=nn.currentTime;Wr(this,_.animation,T),T.previousNode=_,P.currentStaggerTime=J.currentTime-en+(J.startTime-P.currentTimeline.startTime)}}const As={};class vo{constructor(_,T,P,J,ce,Ie,Le,lt){this._driver=_,this.element=T,this.subInstructions=P,this._enterClassName=J,this._leaveClassName=ce,this.errors=Ie,this.timelines=Le,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=As,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=lt||new Or(this._driver,T,0),Le.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(_,T){if(!_)return;const P=_;let J=this.options;null!=P.duration&&(J.duration=fr(P.duration)),null!=P.delay&&(J.delay=fr(P.delay));const ce=P.params;if(ce){let Ie=J.params;Ie||(Ie=this.options.params={}),Object.keys(ce).forEach(Le=>{(!T||!Ie.hasOwnProperty(Le))&&(Ie[Le]=$s(ce[Le],Ie,this.errors))})}}_copyOptions(){const _={};if(this.options){const T=this.options.params;if(T){const P=_.params={};Object.keys(T).forEach(J=>{P[J]=T[J]})}}return _}createSubContext(_=null,T,P){const J=T||this.element,ce=new vo(this._driver,J,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(J,P||0));return ce.previousNode=this.previousNode,ce.currentAnimateTimings=this.currentAnimateTimings,ce.options=this._copyOptions(),ce.updateOptions(_),ce.currentQueryIndex=this.currentQueryIndex,ce.currentQueryTotal=this.currentQueryTotal,ce.parentContext=this,this.subContextCount++,ce}transformIntoNewTimeline(_){return this.previousNode=As,this.currentTimeline=this.currentTimeline.fork(this.element,_),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(_,T,P){const J={duration:T??_.duration,delay:this.currentTimeline.currentTime+(P??0)+_.delay,easing:""},ce=new Po(this._driver,_.element,_.keyframes,_.preStyleProps,_.postStyleProps,J,_.stretchStartingKeyframe);return this.timelines.push(ce),J}incrementTime(_){this.currentTimeline.forwardTime(this.currentTimeline.duration+_)}delayNextStep(_){_>0&&this.currentTimeline.delayNextStep(_)}invokeQuery(_,T,P,J,ce,Ie){let Le=[];if(J&&Le.push(this.element),_.length>0){_=(_=_.replace(Xo,"."+this._enterClassName)).replace(ea,"."+this._leaveClassName);let Ft=this._driver.query(this.element,_,1!=P);0!==P&&(Ft=P<0?Ft.slice(Ft.length+P,Ft.length):Ft.slice(0,P)),Le.push(...Ft)}return!ce&&0==Le.length&&Ie.push(function Ci(k){return new i.vHH(3014,!1)}()),Le}}class Or{constructor(_,T,P,J){this._driver=_,this.element=T,this.startTime=P,this._elementTimelineStylesLookup=J,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(T),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(T,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(_){const T=1===this._keyframes.size&&this._pendingStyles.size;this.duration||T?(this.forwardTime(this.currentTime+_),T&&this.snapshotCurrentStyles()):this.startTime+=_}fork(_,T){return this.applyStylesToKeyframe(),new Or(this._driver,_,T||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(_){this.applyStylesToKeyframe(),this.duration=_,this._loadKeyframe()}_updateStyle(_,T){this._localTimelineStyles.set(_,T),this._globalTimelineStyles.set(_,T),this._styleSummary.set(_,{time:this.currentTime,value:T})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(_){_&&this._previousKeyframe.set("easing",_);for(let[T,P]of this._globalTimelineStyles)this._backFill.set(T,P||pt.l3),this._currentKeyframe.set(T,pt.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(_,T,P,J){T&&this._previousKeyframe.set("easing",T);const ce=J&&J.params||{},Ie=function hs(k,_){const T=new Map;let P;return k.forEach(J=>{if("*"===J){P=P||_.keys();for(let ce of P)T.set(ce,pt.l3)}else ls(J,T)}),T}(_,this._globalTimelineStyles);for(let[Le,lt]of Ie){const Ft=$s(lt,ce,P);this._pendingStyles.set(Le,Ft),this._localTimelineStyles.has(Le)||this._backFill.set(Le,this._globalTimelineStyles.get(Le)??pt.l3),this._updateStyle(Le,Ft)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((_,T)=>{this._currentKeyframe.set(T,_)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((_,T)=>{this._currentKeyframe.has(T)||this._currentKeyframe.set(T,_)}))}snapshotCurrentStyles(){for(let[_,T]of this._localTimelineStyles)this._pendingStyles.set(_,T),this._updateStyle(_,T)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const _=[];for(let T in this._currentKeyframe)_.push(T);return _}mergeTimelineCollectedStyles(_){_._styleSummary.forEach((T,P)=>{const J=this._styleSummary.get(P);(!J||T.time>J.time)&&this._updateStyle(P,T.value)})}buildKeyframes(){this.applyStylesToKeyframe();const _=new Set,T=new Set,P=1===this._keyframes.size&&0===this.duration;let J=[];this._keyframes.forEach((Le,lt)=>{const Ft=ls(Le,new Map,this._backFill);Ft.forEach((nn,en)=>{nn===pt.k1?_.add(en):nn===pt.l3&&T.add(en)}),P||Ft.set("offset",lt/this.duration),J.push(Ft)});const ce=_.size?Ps(_.values()):[],Ie=T.size?Ps(T.values()):[];if(P){const Le=J[0],lt=new Map(Le);Le.set("offset",0),lt.set("offset",1),J=[Le,lt]}return Er(this.element,J,ce,Ie,this.duration,this.startTime,this.easing,!1)}}class Po extends Or{constructor(_,T,P,J,ce,Ie,Le=!1){super(_,T,Ie.delay),this.keyframes=P,this.preStyleProps=J,this.postStyleProps=ce,this._stretchStartingKeyframe=Le,this.timings={duration:Ie.duration,delay:Ie.delay,easing:Ie.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let _=this.keyframes,{delay:T,duration:P,easing:J}=this.timings;if(this._stretchStartingKeyframe&&T){const ce=[],Ie=P+T,Le=T/Ie,lt=ls(_[0]);lt.set("offset",0),ce.push(lt);const Ft=ls(_[0]);Ft.set("offset",Zr(Le)),ce.push(Ft);const nn=_.length-1;for(let en=1;en<=nn;en++){let hi=ls(_[en]);const mi=hi.get("offset");hi.set("offset",Zr((T+mi*P)/Ie)),ce.push(hi)}P=Ie,T=0,J="",_=ce}return Er(this.element,_,this.preStyleProps,this.postStyleProps,P,T,J,!0)}}function Zr(k,_=3){const T=Math.pow(10,_-1);return Math.round(k*T)/T}class To{}const Bo=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class bo extends To{normalizePropertyName(_,T){return Ns(_)}normalizeStyleValue(_,T,P,J){let ce="";const Ie=P.toString().trim();if(Bo.has(T)&&0!==P&&"0"!==P)if("number"==typeof P)ce="px";else{const Le=P.match(/^[+-]?[\d\.]+([a-z]*)$/);Le&&0==Le[1].length&&J.push(function kn(k,_){return new i.vHH(3005,!1)}())}return Ie+ce}}function Io(k,_,T,P,J,ce,Ie,Le,lt,Ft,nn,en,hi){return{type:0,element:k,triggerName:_,isRemovalTransition:J,fromState:T,fromStyles:ce,toState:P,toStyles:Ie,timelines:Le,queriedElements:lt,preStyleProps:Ft,postStyleProps:nn,totalTime:en,errors:hi}}const lr={};class So{constructor(_,T,P){this._triggerName=_,this.ast=T,this._stateStyles=P}match(_,T,P,J){return function Ws(k,_,T,P,J){return k.some(ce=>ce(_,T,P,J))}(this.ast.matchers,_,T,P,J)}buildStyles(_,T,P){let J=this._stateStyles.get("*");return void 0!==_&&(J=this._stateStyles.get(_?.toString())||J),J?J.buildStyles(T,P):new Map}build(_,T,P,J,ce,Ie,Le,lt,Ft,nn){const en=[],hi=this.ast.options&&this.ast.options.params||lr,Bn=this.buildStyles(P,Le&&Le.params||lr,en),ei=lt&&lt.params||lr,ui=this.buildStyles(J,ei,en),pr=new Set,ns=new Map,dr=new Map,tr="void"===J,Kl={params:Yi(ei,hi),delay:this.ast.options?.delay},Wo=nn?[]:yo(_,T,this.ast.animation,ce,Ie,Bn,ui,Kl,Ft,en);let Ao=0;if(Wo.forEach(Di=>{Ao=Math.max(Di.duration+Di.delay,Ao)}),en.length)return Io(T,this._triggerName,P,J,tr,Bn,ui,[],[],ns,dr,Ao,en);Wo.forEach(Di=>{const Yc=Di.element,Qc=qn(ns,Yc,new Set);Di.preStyleProps.forEach(Ac=>Qc.add(Ac));const bc=qn(dr,Yc,new Set);Di.postStyleProps.forEach(Ac=>bc.add(Ac)),Yc!==T&&pr.add(Yc)});const Wl=Ps(pr.values());return Io(T,this._triggerName,P,J,tr,Bn,ui,Wo,Wl,ns,dr,Ao)}}function Yi(k,_){const T=Ss(_);for(const P in k)k.hasOwnProperty(P)&&null!=k[P]&&(T[P]=k[P]);return T}class xa{constructor(_,T,P){this.styles=_,this.defaultParams=T,this.normalizer=P}buildStyles(_,T){const P=new Map,J=Ss(this.defaultParams);return Object.keys(_).forEach(ce=>{const Ie=_[ce];null!==Ie&&(J[ce]=Ie)}),this.styles.styles.forEach(ce=>{"string"!=typeof ce&&ce.forEach((Ie,Le)=>{Ie&&(Ie=$s(Ie,J,T));const lt=this.normalizer.normalizePropertyName(Le,T);Ie=this.normalizer.normalizeStyleValue(Le,lt,Ie,T),P.set(lt,Ie)})}),P}}class la{constructor(_,T,P){this.name=_,this.ast=T,this._normalizer=P,this.transitionFactories=[],this.states=new Map,T.states.forEach(J=>{this.states.set(J.name,new xa(J.style,J.options&&J.options.params||{},P))}),ba(this.states,"true","1"),ba(this.states,"false","0"),T.transitions.forEach(J=>{this.transitionFactories.push(new So(_,J,this.states))}),this.fallbackTransition=function qr(k,_,T){return new So(k,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ie,Le)=>!0],options:null,queryCount:0,depCount:0},_)}(_,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(_,T,P,J){return this.transitionFactories.find(Ie=>Ie.match(_,T,P,J))||null}matchStyles(_,T,P){return this.fallbackTransition.buildStyles(_,T,P)}}function ba(k,_,T){k.has(_)?k.has(T)||k.set(T,k.get(_)):k.has(T)&&k.set(_,k.get(T))}const cr=new ro;class Ti{constructor(_,T,P){this.bodyNode=_,this._driver=T,this._normalizer=P,this._animations=new Map,this._playersById=new Map,this.players=[]}register(_,T){const P=[],ce=li(this._driver,T,P,[]);if(P.length)throw function Jt(k){return new i.vHH(3503,!1)}();this._animations.set(_,ce)}_buildPlayer(_,T,P){const J=_.element,ce=ri(0,this._normalizer,0,_.keyframes,T,P);return this._driver.animate(J,ce,_.duration,_.delay,_.easing,[],!0)}create(_,T,P={}){const J=[],ce=this._animations.get(_);let Ie;const Le=new Map;if(ce?(Ie=yo(this._driver,T,ce,De,ht,new Map,new Map,P,cr,J),Ie.forEach(nn=>{const en=qn(Le,nn.element,new Map);nn.postStyleProps.forEach(hi=>en.set(hi,null))})):(J.push(function Ni(){return new i.vHH(3300,!1)}()),Ie=[]),J.length)throw function Hi(k){return new i.vHH(3504,!1)}();Le.forEach((nn,en)=>{nn.forEach((hi,mi)=>{nn.set(mi,this._driver.computeStyle(en,mi,pt.l3))})});const Ft=ji(Ie.map(nn=>{const en=Le.get(nn.element);return this._buildPlayer(nn,new Map,en)}));return this._playersById.set(_,Ft),Ft.onDestroy(()=>this.destroy(_)),this.players.push(Ft),Ft}destroy(_){const T=this._getPlayer(_);T.destroy(),this._playersById.delete(_);const P=this.players.indexOf(T);P>=0&&this.players.splice(P,1)}_getPlayer(_){const T=this._playersById.get(_);if(!T)throw function Qi(k){return new i.vHH(3301,!1)}();return T}listen(_,T,P,J){const ce=vs(T,"","","");return or(this._getPlayer(_),P,ce,J),()=>{}}command(_,T,P,J){if("register"==P)return void this.register(_,J[0]);if("create"==P)return void this.create(_,T,J[0]||{});const ce=this._getPlayer(_);switch(P){case"play":ce.play();break;case"pause":ce.pause();break;case"reset":ce.reset();break;case"restart":ce.restart();break;case"finish":ce.finish();break;case"init":ce.init();break;case"setPosition":ce.setPosition(parseFloat(J[0]));break;case"destroy":this.destroy(_)}}}const ol="ng-animate-queued",Uo="ng-animate-disabled",Fo=[],Zs={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Xt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ni="__ng_removed";class so{constructor(_,T=""){this.namespaceId=T;const P=_&&_.hasOwnProperty("value");if(this.value=function Lt(k){return k??null}(P?_.value:_),P){const ce=Ss(_);delete ce.value,this.options=ce}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(_){const T=_.params;if(T){const P=this.options.params;Object.keys(T).forEach(J=>{null==P[J]&&(P[J]=T[J])})}}}const bs="void",Wn=new so(bs);class ie{constructor(_,T,P){this.id=_,this.hostElement=T,this._engine=P,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+_,ws(T,this._hostClassName)}listen(_,T,P,J){if(!this._triggers.has(T))throw function Jr(k,_){return new i.vHH(3302,!1)}();if(null==P||0==P.length)throw function sr(k){return new i.vHH(3303,!1)}();if(!function zr(k){return"start"==k||"done"==k}(P))throw function xr(k,_){return new i.vHH(3400,!1)}();const ce=qn(this._elementListeners,_,[]),Ie={name:T,phase:P,callback:J};ce.push(Ie);const Le=qn(this._engine.statesByElement,_,new Map);return Le.has(T)||(ws(_,It),ws(_,It+"-"+T),Le.set(T,Wn)),()=>{this._engine.afterFlush(()=>{const lt=ce.indexOf(Ie);lt>=0&&ce.splice(lt,1),this._triggers.has(T)||Le.delete(T)})}}register(_,T){return!this._triggers.has(_)&&(this._triggers.set(_,T),!0)}_getTrigger(_){const T=this._triggers.get(_);if(!T)throw function br(k){return new i.vHH(3401,!1)}();return T}trigger(_,T,P,J=!0){const ce=this._getTrigger(T),Ie=new W(this.id,T,_);let Le=this._engine.statesByElement.get(_);Le||(ws(_,It),ws(_,It+"-"+T),this._engine.statesByElement.set(_,Le=new Map));let lt=Le.get(T);const Ft=new so(P,this.id);if(!(P&&P.hasOwnProperty("value"))&&lt&&Ft.absorbOptions(lt.options),Le.set(T,Ft),lt||(lt=Wn),Ft.value!==bs&&lt.value===Ft.value){if(!function wa(k,_){const T=Object.keys(k),P=Object.keys(_);if(T.length!=P.length)return!1;for(let J=0;J<T.length;J++){const ce=T[J];if(!_.hasOwnProperty(ce)||k[ce]!==_[ce])return!1}return!0}(lt.params,Ft.params)){const ei=[],ui=ce.matchStyles(lt.value,lt.params,ei),pr=ce.matchStyles(Ft.value,Ft.params,ei);ei.length?this._engine.reportError(ei):this._engine.afterFlush(()=>{fo(_,ui),Gi(_,pr)})}return}const hi=qn(this._engine.playersByElement,_,[]);hi.forEach(ei=>{ei.namespaceId==this.id&&ei.triggerName==T&&ei.queued&&ei.destroy()});let mi=ce.matchTransition(lt.value,Ft.value,_,Ft.params),Bn=!1;if(!mi){if(!J)return;mi=ce.fallbackTransition,Bn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:_,triggerName:T,transition:mi,fromState:lt,toState:Ft,player:Ie,isFallbackTransition:Bn}),Bn||(ws(_,ol),Ie.onStart(()=>{Aa(_,ol)})),Ie.onDone(()=>{let ei=this.players.indexOf(Ie);ei>=0&&this.players.splice(ei,1);const ui=this._engine.playersByElement.get(_);if(ui){let pr=ui.indexOf(Ie);pr>=0&&ui.splice(pr,1)}}),this.players.push(Ie),hi.push(Ie),Ie}deregister(_){this._triggers.delete(_),this._engine.statesByElement.forEach(T=>T.delete(_)),this._elementListeners.forEach((T,P)=>{this._elementListeners.set(P,T.filter(J=>J.name!=_))})}clearElementCache(_){this._engine.statesByElement.delete(_),this._elementListeners.delete(_);const T=this._engine.playersByElement.get(_);T&&(T.forEach(P=>P.destroy()),this._engine.playersByElement.delete(_))}_signalRemovalForInnerTriggers(_,T){const P=this._engine.driver.query(_,En,!0);P.forEach(J=>{if(J[ni])return;const ce=this._engine.fetchNamespacesByElement(J);ce.size?ce.forEach(Ie=>Ie.triggerLeaveAnimation(J,T,!1,!0)):this.clearElementCache(J)}),this._engine.afterFlushAnimationsDone(()=>P.forEach(J=>this.clearElementCache(J)))}triggerLeaveAnimation(_,T,P,J){const ce=this._engine.statesByElement.get(_),Ie=new Map;if(ce){const Le=[];if(ce.forEach((lt,Ft)=>{if(Ie.set(Ft,lt.value),this._triggers.has(Ft)){const nn=this.trigger(_,Ft,bs,J);nn&&Le.push(nn)}}),Le.length)return this._engine.markElementAsRemoved(this.id,_,!0,T,Ie),P&&ji(Le).onDone(()=>this._engine.processLeaveNode(_)),!0}return!1}prepareLeaveAnimationListeners(_){const T=this._elementListeners.get(_),P=this._engine.statesByElement.get(_);if(T&&P){const J=new Set;T.forEach(ce=>{const Ie=ce.name;if(J.has(Ie))return;J.add(Ie);const lt=this._triggers.get(Ie).fallbackTransition,Ft=P.get(Ie)||Wn,nn=new so(bs),en=new W(this.id,Ie,_);this._engine.totalQueuedPlayers++,this._queue.push({element:_,triggerName:Ie,transition:lt,fromState:Ft,toState:nn,player:en,isFallbackTransition:!0})})}}removeNode(_,T){const P=this._engine;if(_.childElementCount&&this._signalRemovalForInnerTriggers(_,T),this.triggerLeaveAnimation(_,T,!0))return;let J=!1;if(P.totalAnimations){const ce=P.players.length?P.playersByQueriedElement.get(_):[];if(ce&&ce.length)J=!0;else{let Ie=_;for(;Ie=Ie.parentNode;)if(P.statesByElement.get(Ie)){J=!0;break}}}if(this.prepareLeaveAnimationListeners(_),J)P.markElementAsRemoved(this.id,_,!1,T);else{const ce=_[ni];(!ce||ce===Zs)&&(P.afterFlush(()=>this.clearElementCache(_)),P.destroyInnerAnimations(_),P._onRemovalComplete(_,T))}}insertNode(_,T){ws(_,this._hostClassName)}drainQueuedTransitions(_){const T=[];return this._queue.forEach(P=>{const J=P.player;if(J.destroyed)return;const ce=P.element,Ie=this._elementListeners.get(ce);Ie&&Ie.forEach(Le=>{if(Le.name==P.triggerName){const lt=vs(ce,P.triggerName,P.fromState.value,P.toState.value);lt._data=_,or(P.player,Le.phase,lt,Le.callback)}}),J.markedForDestroy?this._engine.afterFlush(()=>{J.destroy()}):T.push(P)}),this._queue=[],T.sort((P,J)=>{const ce=P.transition.ast.depCount,Ie=J.transition.ast.depCount;return 0==ce||0==Ie?ce-Ie:this._engine.driver.containsElement(P.element,J.element)?1:-1})}destroy(_){this.players.forEach(T=>T.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,_)}elementContainsData(_){let T=!1;return this._elementListeners.has(_)&&(T=!0),T=!!this._queue.find(P=>P.element===_)||T,T}}class X{constructor(_,T,P){this.bodyNode=_,this.driver=T,this._normalizer=P,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(J,ce)=>{}}_onRemovalComplete(_,T){this.onRemovalComplete(_,T)}get queuedPlayers(){const _=[];return this._namespaceList.forEach(T=>{T.players.forEach(P=>{P.queued&&_.push(P)})}),_}createNamespace(_,T){const P=new ie(_,T,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,T)?this._balanceNamespaceList(P,T):(this.newHostElements.set(T,P),this.collectEnterElement(T)),this._namespaceLookup[_]=P}_balanceNamespaceList(_,T){const P=this._namespaceList,J=this.namespacesByHostElement;if(P.length-1>=0){let Ie=!1,Le=this.driver.getParentElement(T);for(;Le;){const lt=J.get(Le);if(lt){const Ft=P.indexOf(lt);P.splice(Ft+1,0,_),Ie=!0;break}Le=this.driver.getParentElement(Le)}Ie||P.unshift(_)}else P.push(_);return J.set(T,_),_}register(_,T){let P=this._namespaceLookup[_];return P||(P=this.createNamespace(_,T)),P}registerTrigger(_,T,P){let J=this._namespaceLookup[_];J&&J.register(T,P)&&this.totalAnimations++}destroy(_,T){if(!_)return;const P=this._fetchNamespace(_);this.afterFlush(()=>{this.namespacesByHostElement.delete(P.hostElement),delete this._namespaceLookup[_];const J=this._namespaceList.indexOf(P);J>=0&&this._namespaceList.splice(J,1)}),this.afterFlushAnimationsDone(()=>P.destroy(T))}_fetchNamespace(_){return this._namespaceLookup[_]}fetchNamespacesByElement(_){const T=new Set,P=this.statesByElement.get(_);if(P)for(let J of P.values())if(J.namespaceId){const ce=this._fetchNamespace(J.namespaceId);ce&&T.add(ce)}return T}trigger(_,T,P,J){if(Ln(T)){const ce=this._fetchNamespace(_);if(ce)return ce.trigger(T,P,J),!0}return!1}insertNode(_,T,P,J){if(!Ln(T))return;const ce=T[ni];if(ce&&ce.setForRemoval){ce.setForRemoval=!1,ce.setForMove=!0;const Ie=this.collectedLeaveElements.indexOf(T);Ie>=0&&this.collectedLeaveElements.splice(Ie,1)}if(_){const Ie=this._fetchNamespace(_);Ie&&Ie.insertNode(T,P)}J&&this.collectEnterElement(T)}collectEnterElement(_){this.collectedEnterElements.push(_)}markElementAsDisabled(_,T){T?this.disabledNodes.has(_)||(this.disabledNodes.add(_),ws(_,Uo)):this.disabledNodes.has(_)&&(this.disabledNodes.delete(_),Aa(_,Uo))}removeNode(_,T,P,J){if(Ln(T)){const ce=_?this._fetchNamespace(_):null;if(ce?ce.removeNode(T,J):this.markElementAsRemoved(_,T,!1,J),P){const Ie=this.namespacesByHostElement.get(T);Ie&&Ie.id!==_&&Ie.removeNode(T,J)}}else this._onRemovalComplete(T,J)}markElementAsRemoved(_,T,P,J,ce){this.collectedLeaveElements.push(T),T[ni]={namespaceId:_,setForRemoval:J,hasAnimation:P,removedBeforeQueried:!1,previousTriggersValues:ce}}listen(_,T,P,J,ce){return Ln(T)?this._fetchNamespace(_).listen(T,P,J,ce):()=>{}}_buildInstruction(_,T,P,J,ce){return _.transition.build(this.driver,_.element,_.fromState.value,_.toState.value,P,J,_.fromState.options,_.toState.options,T,ce)}destroyInnerAnimations(_){let T=this.driver.query(_,En,!0);T.forEach(P=>this.destroyActiveAnimationsForElement(P)),0!=this.playersByQueriedElement.size&&(T=this.driver.query(_,Si,!0),T.forEach(P=>this.finishActiveQueriedAnimationOnElement(P)))}destroyActiveAnimationsForElement(_){const T=this.playersByElement.get(_);T&&T.forEach(P=>{P.queued?P.markedForDestroy=!0:P.destroy()})}finishActiveQueriedAnimationOnElement(_){const T=this.playersByQueriedElement.get(_);T&&T.forEach(P=>P.finish())}whenRenderingDone(){return new Promise(_=>{if(this.players.length)return ji(this.players).onDone(()=>_());_()})}processLeaveNode(_){const T=_[ni];if(T&&T.setForRemoval){if(_[ni]=Zs,T.namespaceId){this.destroyInnerAnimations(_);const P=this._fetchNamespace(T.namespaceId);P&&P.clearElementCache(_)}this._onRemovalComplete(_,T.setForRemoval)}_.classList?.contains(Uo)&&this.markElementAsDisabled(_,!1),this.driver.query(_,".ng-animate-disabled",!0).forEach(P=>{this.markElementAsDisabled(P,!1)})}flush(_=-1){let T=[];if(this.newHostElements.size&&(this.newHostElements.forEach((P,J)=>this._balanceNamespaceList(P,J)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let P=0;P<this.collectedEnterElements.length;P++)ws(this.collectedEnterElements[P],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const P=[];try{T=this._flushAnimations(P,_)}finally{for(let J=0;J<P.length;J++)P[J]()}}else for(let P=0;P<this.collectedLeaveElements.length;P++)this.processLeaveNode(this.collectedLeaveElements[P]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(P=>P()),this._flushFns=[],this._whenQuietFns.length){const P=this._whenQuietFns;this._whenQuietFns=[],T.length?ji(T).onDone(()=>{P.forEach(J=>J())}):P.forEach(J=>J())}}reportError(_){throw function Ji(k){return new i.vHH(3402,!1)}()}_flushAnimations(_,T){const P=new ro,J=[],ce=new Map,Ie=[],Le=new Map,lt=new Map,Ft=new Map,nn=new Set;this.disabledNodes.forEach(Jn=>{nn.add(Jn);const Oi=this.driver.query(Jn,".ng-animate-queued",!0);for(let Fi=0;Fi<Oi.length;Fi++)nn.add(Oi[Fi])});const en=this.bodyNode,hi=Array.from(this.statesByElement.keys()),mi=Yr(hi,this.collectedEnterElements),Bn=new Map;let ei=0;mi.forEach((Jn,Oi)=>{const Fi=De+ei++;Bn.set(Oi,Fi),Jn.forEach(is=>ws(is,Fi))});const ui=[],pr=new Set,ns=new Set;for(let Jn=0;Jn<this.collectedLeaveElements.length;Jn++){const Oi=this.collectedLeaveElements[Jn],Fi=Oi[ni];Fi&&Fi.setForRemoval&&(ui.push(Oi),pr.add(Oi),Fi.hasAnimation?this.driver.query(Oi,".ng-star-inserted",!0).forEach(is=>pr.add(is)):ns.add(Oi))}const dr=new Map,tr=Yr(hi,Array.from(pr));tr.forEach((Jn,Oi)=>{const Fi=ht+ei++;dr.set(Oi,Fi),Jn.forEach(is=>ws(is,Fi))}),_.push(()=>{mi.forEach((Jn,Oi)=>{const Fi=Bn.get(Oi);Jn.forEach(is=>Aa(is,Fi))}),tr.forEach((Jn,Oi)=>{const Fi=dr.get(Oi);Jn.forEach(is=>Aa(is,Fi))}),ui.forEach(Jn=>{this.processLeaveNode(Jn)})});const Kl=[],Wo=[];for(let Jn=this._namespaceList.length-1;Jn>=0;Jn--)this._namespaceList[Jn].drainQueuedTransitions(T).forEach(Fi=>{const is=Fi.player,Ba=Fi.element;if(Kl.push(is),this.collectedEnterElements.length){const rs=Ba[ni];if(rs&&rs.setForMove){if(rs.previousTriggersValues&&rs.previousTriggersValues.has(Fi.triggerName)){const Mc=rs.previousTriggersValues.get(Fi.triggerName),nl=this.statesByElement.get(Fi.element);if(nl&&nl.has(Fi.triggerName)){const Vc=nl.get(Fi.triggerName);Vc.value=Mc,nl.set(Fi.triggerName,Vc)}}return void is.destroy()}}const wc=!en||!this.driver.containsElement(en,Ba),Ua=dr.get(Ba),Lc=Bn.get(Ba),eo=this._buildInstruction(Fi,P,Lc,Ua,wc);if(eo.errors&&eo.errors.length)return void Wo.push(eo);if(wc)return is.onStart(()=>fo(Ba,eo.fromStyles)),is.onDestroy(()=>Gi(Ba,eo.toStyles)),void J.push(is);if(Fi.isFallbackTransition)return is.onStart(()=>fo(Ba,eo.fromStyles)),is.onDestroy(()=>Gi(Ba,eo.toStyles)),void J.push(is);const pl=[];eo.timelines.forEach(rs=>{rs.stretchStartingKeyframe=!0,this.disabledNodes.has(rs.element)||pl.push(rs)}),eo.timelines=pl,P.append(Ba,eo.timelines),Ie.push({instruction:eo,player:is,element:Ba}),eo.queriedElements.forEach(rs=>qn(Le,rs,[]).push(is)),eo.preStyleProps.forEach((rs,Mc)=>{if(rs.size){let nl=lt.get(Mc);nl||lt.set(Mc,nl=new Set),rs.forEach((Vc,sc)=>nl.add(sc))}}),eo.postStyleProps.forEach((rs,Mc)=>{let nl=Ft.get(Mc);nl||Ft.set(Mc,nl=new Set),rs.forEach((Vc,sc)=>nl.add(sc))})});if(Wo.length){const Jn=[];Wo.forEach(Oi=>{Jn.push(function Gn(k,_){return new i.vHH(3505,!1)}())}),Kl.forEach(Oi=>Oi.destroy()),this.reportError(Jn)}const Ao=new Map,Wl=new Map;Ie.forEach(Jn=>{const Oi=Jn.element;P.has(Oi)&&(Wl.set(Oi,Oi),this._beforeAnimationBuild(Jn.player.namespaceId,Jn.instruction,Ao))}),J.forEach(Jn=>{const Oi=Jn.element;this._getPreviousPlayers(Oi,!1,Jn.namespaceId,Jn.triggerName,null).forEach(is=>{qn(Ao,Oi,[]).push(is),is.destroy()})});const Di=ui.filter(Jn=>Ga(Jn,lt,Ft)),Yc=new Map;ps(Yc,this.driver,ns,Ft,pt.l3).forEach(Jn=>{Ga(Jn,lt,Ft)&&Di.push(Jn)});const bc=new Map;mi.forEach((Jn,Oi)=>{ps(bc,this.driver,new Set(Jn),lt,pt.k1)}),Di.forEach(Jn=>{const Oi=Yc.get(Jn),Fi=bc.get(Jn);Yc.set(Jn,new Map([...Array.from(Oi?.entries()??[]),...Array.from(Fi?.entries()??[])]))});const Ac=[],mu=[],Iu={};Ie.forEach(Jn=>{const{element:Oi,player:Fi,instruction:is}=Jn;if(P.has(Oi)){if(nn.has(Oi))return Fi.onDestroy(()=>Gi(Oi,is.toStyles)),Fi.disabled=!0,Fi.overrideTotalTime(is.totalTime),void J.push(Fi);let Ba=Iu;if(Wl.size>1){let Ua=Oi;const Lc=[];for(;Ua=Ua.parentNode;){const eo=Wl.get(Ua);if(eo){Ba=eo;break}Lc.push(Ua)}Lc.forEach(eo=>Wl.set(eo,Ba))}const wc=this._buildAnimation(Fi.namespaceId,is,Ao,ce,bc,Yc);if(Fi.setRealPlayer(wc),Ba===Iu)Ac.push(Fi);else{const Ua=this.playersByElement.get(Ba);Ua&&Ua.length&&(Fi.parentPlayer=ji(Ua)),J.push(Fi)}}else fo(Oi,is.fromStyles),Fi.onDestroy(()=>Gi(Oi,is.toStyles)),mu.push(Fi),nn.has(Oi)&&J.push(Fi)}),mu.forEach(Jn=>{const Oi=ce.get(Jn.element);if(Oi&&Oi.length){const Fi=ji(Oi);Jn.setRealPlayer(Fi)}}),J.forEach(Jn=>{Jn.parentPlayer?Jn.syncPlayerEvents(Jn.parentPlayer):Jn.destroy()});for(let Jn=0;Jn<ui.length;Jn++){const Oi=ui[Jn],Fi=Oi[ni];if(Aa(Oi,ht),Fi&&Fi.hasAnimation)continue;let is=[];if(Le.size){let wc=Le.get(Oi);wc&&wc.length&&is.push(...wc);let Ua=this.driver.query(Oi,Si,!0);for(let Lc=0;Lc<Ua.length;Lc++){let eo=Le.get(Ua[Lc]);eo&&eo.length&&is.push(...eo)}}const Ba=is.filter(wc=>!wc.destroyed);Ba.length?xl(this,Oi,Ba):this.processLeaveNode(Oi)}return ui.length=0,Ac.forEach(Jn=>{this.players.push(Jn),Jn.onDone(()=>{Jn.destroy();const Oi=this.players.indexOf(Jn);this.players.splice(Oi,1)}),Jn.play()}),Ac}elementContainsData(_,T){let P=!1;const J=T[ni];return J&&J.setForRemoval&&(P=!0),this.playersByElement.has(T)&&(P=!0),this.playersByQueriedElement.has(T)&&(P=!0),this.statesByElement.has(T)&&(P=!0),this._fetchNamespace(_).elementContainsData(T)||P}afterFlush(_){this._flushFns.push(_)}afterFlushAnimationsDone(_){this._whenQuietFns.push(_)}_getPreviousPlayers(_,T,P,J,ce){let Ie=[];if(T){const Le=this.playersByQueriedElement.get(_);Le&&(Ie=Le)}else{const Le=this.playersByElement.get(_);if(Le){const lt=!ce||ce==bs;Le.forEach(Ft=>{Ft.queued||!lt&&Ft.triggerName!=J||Ie.push(Ft)})}}return(P||J)&&(Ie=Ie.filter(Le=>!(P&&P!=Le.namespaceId||J&&J!=Le.triggerName))),Ie}_beforeAnimationBuild(_,T,P){const ce=T.element,Ie=T.isRemovalTransition?void 0:_,Le=T.isRemovalTransition?void 0:T.triggerName;for(const lt of T.timelines){const Ft=lt.element,nn=Ft!==ce,en=qn(P,Ft,[]);this._getPreviousPlayers(Ft,nn,Ie,Le,T.toState).forEach(mi=>{const Bn=mi.getRealPlayer();Bn.beforeDestroy&&Bn.beforeDestroy(),mi.destroy(),en.push(mi)})}fo(ce,T.fromStyles)}_buildAnimation(_,T,P,J,ce,Ie){const Le=T.triggerName,lt=T.element,Ft=[],nn=new Set,en=new Set,hi=T.timelines.map(Bn=>{const ei=Bn.element;nn.add(ei);const ui=ei[ni];if(ui&&ui.removedBeforeQueried)return new pt.ZN(Bn.duration,Bn.delay);const pr=ei!==lt,ns=function ta(k){const _=[];return al(k,_),_}((P.get(ei)||Fo).map(Ao=>Ao.getRealPlayer())).filter(Ao=>!!Ao.element&&Ao.element===ei),dr=ce.get(ei),tr=Ie.get(ei),Kl=ri(0,this._normalizer,0,Bn.keyframes,dr,tr),Wo=this._buildPlayer(Bn,Kl,ns);if(Bn.subTimeline&&J&&en.add(ei),pr){const Ao=new W(_,Le,ei);Ao.setRealPlayer(Wo),Ft.push(Ao)}return Wo});Ft.forEach(Bn=>{qn(this.playersByQueriedElement,Bn.element,[]).push(Bn),Bn.onDone(()=>function pe(k,_,T){let P=k.get(_);if(P){if(P.length){const J=P.indexOf(T);P.splice(J,1)}0==P.length&&k.delete(_)}return P}(this.playersByQueriedElement,Bn.element,Bn))}),nn.forEach(Bn=>ws(Bn,vi));const mi=ji(hi);return mi.onDestroy(()=>{nn.forEach(Bn=>Aa(Bn,vi)),Gi(lt,T.toStyles)}),en.forEach(Bn=>{qn(J,Bn,[]).push(mi)}),mi}_buildPlayer(_,T,P){return T.length>0?this.driver.animate(_.element,T,_.duration,_.delay,_.easing,P):new pt.ZN(_.duration,_.delay)}}class W{constructor(_,T,P){this.namespaceId=_,this.triggerName=T,this.element=P,this._player=new pt.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(_){this._containsRealPlayer||(this._player=_,this._queuedCallbacks.forEach((T,P)=>{T.forEach(J=>or(_,P,void 0,J))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(_.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(_){this.totalTime=_}syncPlayerEvents(_){const T=this._player;T.triggerCallback&&_.onStart(()=>T.triggerCallback("start")),_.onDone(()=>this.finish()),_.onDestroy(()=>this.destroy())}_queueEvent(_,T){qn(this._queuedCallbacks,_,[]).push(T)}onDone(_){this.queued&&this._queueEvent("done",_),this._player.onDone(_)}onStart(_){this.queued&&this._queueEvent("start",_),this._player.onStart(_)}onDestroy(_){this.queued&&this._queueEvent("destroy",_),this._player.onDestroy(_)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(_){this.queued||this._player.setPosition(_)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(_){const T=this._player;T.triggerCallback&&T.triggerCallback(_)}}function Ln(k){return k&&1===k.nodeType}function oo(k,_){const T=k.style.display;return k.style.display=_??"none",T}function ps(k,_,T,P,J){const ce=[];T.forEach(lt=>ce.push(oo(lt)));const Ie=[];P.forEach((lt,Ft)=>{const nn=new Map;lt.forEach(en=>{const hi=_.computeStyle(Ft,en,J);nn.set(en,hi),(!hi||0==hi.length)&&(Ft[ni]=Xt,Ie.push(Ft))}),k.set(Ft,nn)});let Le=0;return T.forEach(lt=>oo(lt,ce[Le++])),Ie}function Yr(k,_){const T=new Map;if(k.forEach(Le=>T.set(Le,[])),0==_.length)return T;const J=new Set(_),ce=new Map;function Ie(Le){if(!Le)return 1;let lt=ce.get(Le);if(lt)return lt;const Ft=Le.parentNode;return lt=T.has(Ft)?Ft:J.has(Ft)?1:Ie(Ft),ce.set(Le,lt),lt}return _.forEach(Le=>{const lt=Ie(Le);1!==lt&&T.get(lt).push(Le)}),T}function ws(k,_){k.classList?.add(_)}function Aa(k,_){k.classList?.remove(_)}function xl(k,_,T){ji(T).onDone(()=>k.processLeaveNode(_))}function al(k,_){for(let T=0;T<k.length;T++){const P=k[T];P instanceof pt.ZE?al(P.players,_):_.push(P)}}function Ga(k,_,T){const P=T.get(k);if(!P)return!1;let J=_.get(k);return J?P.forEach(ce=>J.add(ce)):_.set(k,P),T.delete(k),!0}class $a{constructor(_,T,P){this.bodyNode=_,this._driver=T,this._normalizer=P,this._triggerCache={},this.onRemovalComplete=(J,ce)=>{},this._transitionEngine=new X(_,T,P),this._timelineEngine=new Ti(_,T,P),this._transitionEngine.onRemovalComplete=(J,ce)=>this.onRemovalComplete(J,ce)}registerTrigger(_,T,P,J,ce){const Ie=_+"-"+J;let Le=this._triggerCache[Ie];if(!Le){const lt=[],nn=li(this._driver,ce,lt,[]);if(lt.length)throw function Ui(k,_){return new i.vHH(3404,!1)}();Le=function mr(k,_,T){return new la(k,_,T)}(J,nn,this._normalizer),this._triggerCache[Ie]=Le}this._transitionEngine.registerTrigger(T,J,Le)}register(_,T){this._transitionEngine.register(_,T)}destroy(_,T){this._transitionEngine.destroy(_,T)}onInsert(_,T,P,J){this._transitionEngine.insertNode(_,T,P,J)}onRemove(_,T,P,J){this._transitionEngine.removeNode(_,T,J||!1,P)}disableAnimations(_,T){this._transitionEngine.markElementAsDisabled(_,T)}process(_,T,P,J){if("@"==P.charAt(0)){const[ce,Ie]=ct(P);this._timelineEngine.command(ce,T,Ie,J)}else this._transitionEngine.trigger(_,T,P,J)}listen(_,T,P,J,ce){if("@"==P.charAt(0)){const[Ie,Le]=ct(P);return this._timelineEngine.listen(Ie,T,Le,ce)}return this._transitionEngine.listen(_,T,P,J,ce)}flush(_=-1){this._transitionEngine.flush(_)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Ma=(()=>{class k{constructor(T,P,J){this._element=T,this._startStyles=P,this._endStyles=J,this._state=0;let ce=k.initialStylesByElement.get(T);ce||k.initialStylesByElement.set(T,ce=new Map),this._initialStyles=ce}start(){this._state<1&&(this._startStyles&&Gi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Gi(this._element,this._initialStyles),this._endStyles&&(Gi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(k.initialStylesByElement.delete(this._element),this._startStyles&&(fo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fo(this._element,this._endStyles),this._endStyles=null),Gi(this._element,this._initialStyles),this._state=3)}}return k.initialStylesByElement=new WeakMap,k})();function na(k){let _=null;return k.forEach((T,P)=>{(function ms(k){return"display"===k||"position"===k})(P)&&(_=_||new Map,_.set(P,T))}),_}class ca{constructor(_,T,P,J){this.element=_,this.keyframes=T,this.options=P,this._specialStyles=J,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=P.duration,this._delay=P.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_=>_()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const _=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,_,this.options),this._finalKeyframe=_.length?_[_.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(_){const T=[];return _.forEach(P=>{T.push(Object.fromEntries(P))}),T}_triggerWebAnimation(_,T,P){return _.animate(this._convertKeyframesToObject(T),P)}onStart(_){this._originalOnStartFns.push(_),this._onStartFns.push(_)}onDone(_){this._originalOnDoneFns.push(_),this._onDoneFns.push(_)}onDestroy(_){this._onDestroyFns.push(_)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(_=>_()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(_=>_()),this._onDestroyFns=[])}setPosition(_){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=_*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const _=new Map;this.hasStarted()&&this._finalKeyframe.forEach((P,J)=>{"offset"!==J&&_.set(J,this._finished?P:gi(this.element,J))}),this.currentSnapshot=_}triggerCallback(_){const T="start"===_?this._onStartFns:this._onDoneFns;T.forEach(P=>P()),T.length=0}}class _l{validateStyleProperty(_){return!0}validateAnimatableStyleProperty(_){return!0}matchesElement(_,T){return!1}containsElement(_,T){return We(_,T)}getParentElement(_){return Ye(_)}query(_,T,P){return tt(_,T,P)}computeStyle(_,T,P){return window.getComputedStyle(_)[T]}animate(_,T,P,J,ce,Ie=[]){const lt={duration:P,delay:J,fill:0==J?"both":"forwards"};ce&&(lt.easing=ce);const Ft=new Map,nn=Ie.filter(mi=>mi instanceof ca);(function Qo(k,_){return 0===k||0===_})(P,J)&&nn.forEach(mi=>{mi.currentSnapshot.forEach((Bn,ei)=>Ft.set(ei,Bn))});let en=function ho(k){return k.length?k[0]instanceof Map?k:k.map(_=>ya(_)):[]}(T).map(mi=>ls(mi));en=function Xr(k,_,T){if(T.size&&_.length){let P=_[0],J=[];if(T.forEach((ce,Ie)=>{P.has(Ie)||J.push(Ie),P.set(Ie,ce)}),J.length)for(let ce=1;ce<_.length;ce++){let Ie=_[ce];J.forEach(Le=>Ie.set(Le,gi(k,Le)))}}return _}(_,en,Ft);const hi=function Ca(k,_){let T=null,P=null;return Array.isArray(_)&&_.length?(T=na(_[0]),_.length>1&&(P=na(_[_.length-1]))):_ instanceof Map&&(T=na(_)),T||P?new Ma(k,T,P):null}(_,en);return new ca(_,en,lt,hi)}}let Al=(()=>{class k extends pt._j{constructor(T,P){super(),this._nextAnimationId=0,this._renderer=T.createRenderer(P.body,{id:"0",encapsulation:i.ifc.None,styles:[],data:{animation:[]}})}build(T){const P=this._nextAnimationId.toString();this._nextAnimationId++;const J=Array.isArray(T)?(0,pt.vP)(T):T;return Ml(this._renderer,null,P,"register",[J]),new Cc(P,this._renderer)}}return k.\u0275fac=function(T){return new(T||k)(i.LFG(i.FYo),i.LFG(rt.K0))},k.\u0275prov=i.Yz7({token:k,factory:k.\u0275fac}),k})();class Cc extends pt.LC{constructor(_,T){super(),this._id=_,this._renderer=T}create(_,T){return new ll(this._id,_,T||{},this._renderer)}}class ll{constructor(_,T,P,J){this.id=_,this.element=T,this._renderer=J,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",P)}_listen(_,T){return this._renderer.listen(this.element,`@@${this.id}:${_}`,T)}_command(_,...T){return Ml(this._renderer,this.element,this.id,_,T)}onDone(_){this._listen("done",_)}onStart(_){this._listen("start",_)}onDestroy(_){this._listen("destroy",_)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(_){this._command("setPosition",_)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ml(k,_,T,P,J){return k.setProperty(_,`@@${T}:${P}`,J)}const z="@",le="@.disabled";let Y=(()=>{class k{constructor(T,P,J){this.delegate=T,this.engine=P,this._zone=J,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),P.onRemovalComplete=(ce,Ie)=>{const Le=Ie?.parentNode(ce);Le&&Ie.removeChild(Le,ce)}}createRenderer(T,P){const ce=this.delegate.createRenderer(T,P);if(!(T&&P&&P.data&&P.data.animation)){let nn=this._rendererCache.get(ce);return nn||(nn=new _e("",ce,this.engine),this._rendererCache.set(ce,nn)),nn}const Ie=P.id,Le=P.id+"-"+this._currentId;this._currentId++,this.engine.register(Le,T);const lt=nn=>{Array.isArray(nn)?nn.forEach(lt):this.engine.registerTrigger(Ie,Le,T,nn.name,nn)};return P.data.animation.forEach(lt),new $e(this,Le,ce,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(T,P,J){T>=0&&T<this._microtaskId?this._zone.run(()=>P(J)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ce=>{const[Ie,Le]=ce;Ie(Le)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([P,J]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return k.\u0275fac=function(T){return new(T||k)(i.LFG(i.FYo),i.LFG($a),i.LFG(i.R0b))},k.\u0275prov=i.Yz7({token:k,factory:k.\u0275fac}),k})();class _e{constructor(_,T,P){this.namespaceId=_,this.delegate=T,this.engine=P,this.destroyNode=this.delegate.destroyNode?J=>T.destroyNode(J):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(_,T){return this.delegate.createElement(_,T)}createComment(_){return this.delegate.createComment(_)}createText(_){return this.delegate.createText(_)}appendChild(_,T){this.delegate.appendChild(_,T),this.engine.onInsert(this.namespaceId,T,_,!1)}insertBefore(_,T,P,J=!0){this.delegate.insertBefore(_,T,P),this.engine.onInsert(this.namespaceId,T,_,J)}removeChild(_,T,P){this.engine.onRemove(this.namespaceId,T,this.delegate,P)}selectRootElement(_,T){return this.delegate.selectRootElement(_,T)}parentNode(_){return this.delegate.parentNode(_)}nextSibling(_){return this.delegate.nextSibling(_)}setAttribute(_,T,P,J){this.delegate.setAttribute(_,T,P,J)}removeAttribute(_,T,P){this.delegate.removeAttribute(_,T,P)}addClass(_,T){this.delegate.addClass(_,T)}removeClass(_,T){this.delegate.removeClass(_,T)}setStyle(_,T,P,J){this.delegate.setStyle(_,T,P,J)}removeStyle(_,T,P){this.delegate.removeStyle(_,T,P)}setProperty(_,T,P){T.charAt(0)==z&&T==le?this.disableAnimations(_,!!P):this.delegate.setProperty(_,T,P)}setValue(_,T){this.delegate.setValue(_,T)}listen(_,T,P){return this.delegate.listen(_,T,P)}disableAnimations(_,T){this.engine.disableAnimations(_,T)}}class $e extends _e{constructor(_,T,P,J){super(T,P,J),this.factory=_,this.namespaceId=T}setProperty(_,T,P){T.charAt(0)==z?"."==T.charAt(1)&&T==le?this.disableAnimations(_,P=void 0===P||!!P):this.engine.process(this.namespaceId,_,T.slice(1),P):this.delegate.setProperty(_,T,P)}listen(_,T,P){if(T.charAt(0)==z){const J=function Rt(k){switch(k){case"body":return document.body;case"document":return document;case"window":return window;default:return k}}(_);let ce=T.slice(1),Ie="";return ce.charAt(0)!=z&&([ce,Ie]=function jt(k){const _=k.indexOf(".");return[k.substring(0,_),k.slice(_+1)]}(ce)),this.engine.listen(this.namespaceId,J,ce,Ie,Le=>{this.factory.scheduleListenerCallback(Le._data||-1,P,Le)})}return this.delegate.listen(_,T,P)}}const nr=[{provide:pt._j,useClass:Al},{provide:To,useFactory:function $i(){return new bo}},{provide:$a,useClass:(()=>{class k extends $a{constructor(T,P,J,ce){super(T.body,P,J)}ngOnDestroy(){this.flush()}}return k.\u0275fac=function(T){return new(T||k)(i.LFG(rt.K0),i.LFG($n),i.LFG(To),i.LFG(i.z2F))},k.\u0275prov=i.Yz7({token:k,factory:k.\u0275fac}),k})()},{provide:i.FYo,useFactory:function Ir(k,_,T){return new Y(k,_,T)},deps:[g.se,$a,i.R0b]}],Li=[{provide:$n,useFactory:()=>new _l},{provide:i.QbO,useValue:"BrowserAnimations"},...nr],qs=[{provide:$n,useClass:_n},{provide:i.QbO,useValue:"NoopAnimations"},...nr];let Sr=(()=>{class k{static withConfig(T){return{ngModule:k,providers:T.disableAnimations?qs:Li}}}return k.\u0275fac=function(T){return new(T||k)},k.\u0275mod=i.oAB({type:k}),k.\u0275inj=i.cJS({providers:Li,imports:[g.b2]}),k})();var kr=Q(2011);const ka_firebaseConfig={apiKey:"AIzaSyBUgNFS13c48PtIJMzCMPT8qcbDWj12VWU",authDomain:"primeng-authantication.firebaseapp.com",databaseURL:"https://primeng-authantication-default-rtdb.firebaseio.com",projectId:"primeng-authantication",storageBucket:"primeng-authantication.appspot.com",messagingSenderId:"346274216699",appId:"1:346274216699:web:a3904bd29679b7a7b64e5e",measurementId:"G-44F25D0S16"};var Do=Q(1205),ao=Q(9751),ua=Q(9646),Oa=Q(8996),Gr=Q(8372),Ka=Q(4004),Wa=Q(3900),da=Q(5813),Ec=Q(3942),Za=Q(5861),qa=Q(9681),ia=Q(2090),vl=Q(4859);const Ys="firebasestorage.googleapis.com",Ql="storageBucket";class Cs extends ia.ZR{constructor(_,T){super(Ya(_),`Firebase Storage: ${T} (${Ya(_)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cs.prototype)}_codeEquals(_){return Ya(_)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(_){this.customData.serverResponse=_,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ya(k){return"storage/"+k}function $r(){return new Cs("unknown","An unknown error occurred, please check the error payload for server response.")}function jl(){return new Cs("canceled","User canceled the upload/download.")}function ha(){return new Cs("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Fr(k){return new Cs("invalid-argument",k)}function sa(){return new Cs("app-deleted","The Firebase app was deleted.")}function ul(k){return new Cs("invalid-root-operation","The operation '"+k+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vn(k,_){return new Cs("invalid-format","String does not match format '"+k+"': "+_)}function Fn(k){throw new Cs("internal-error","Internal error: "+k)}class lo{constructor(_,T){this.bucket=_,this.path_=T}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const _=encodeURIComponent;return"/b/"+_(this.bucket)+"/o/"+_(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(_,T){let P;try{P=lo.makeFromUrl(_,T)}catch{return new lo(_,"")}if(""===P.path)return P;throw function wl(k){return new Cs("invalid-default-bucket","Invalid default bucket '"+k+"'.")}(_)}static makeFromUrl(_,T){let P=null;const J="([A-Za-z0-9.\\-_]+)",Le=new RegExp("^gs://"+J+"(/(.*))?$","i");function Ft(tr){tr.path_=decodeURIComponent(tr.path)}const en=T.replace(/[.]/g,"\\."),dr=[{regex:Le,indices:{bucket:1,path:3},postModify:function ce(tr){"/"===tr.path.charAt(tr.path.length-1)&&(tr.path_=tr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${en}/v[A-Za-z0-9_]+/b/${J}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Ft},{regex:new RegExp(`^https?://${T===Ys?"(?:storage.googleapis.com|storage.cloud.google.com)":T}/${J}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Ft}];for(let tr=0;tr<dr.length;tr++){const Kl=dr[tr],Wo=Kl.regex.exec(_);if(Wo){let Wl=Wo[Kl.indices.path];Wl||(Wl=""),P=new lo(Wo[Kl.indices.bucket],Wl),Kl.postModify(P);break}}if(null==P)throw function ur(k){return new Cs("invalid-url","Invalid URL '"+k+"'.")}(_);return P}}class Dn{constructor(_){this.promise_=Promise.reject(_)}getPromise(){return this.promise_}cancel(_=!1){}}function Ic(k){return"string"==typeof k||k instanceof String}function Xl(k){return ec()&&k instanceof Blob}function ec(){return typeof Blob<"u"}function dl(k,_,T,P){if(P<_)throw Fr(`Invalid value for '${k}'. Expected ${_} or greater.`);if(P>T)throw Fr(`Invalid value for '${k}'. Expected ${T} or less.`)}function fa(k,_,T){let P=_;return null==T&&(P=`https://${_}`),`${T}://${P}/v0${k}`}function Ms(k){const _=encodeURIComponent;let T="?";for(const P in k)k.hasOwnProperty(P)&&(T=T+(_(P)+"=")+_(k[P])+"&");return T=T.slice(0,-1),T}var Pa=(()=>{return(k=Pa||(Pa={}))[k.NO_ERROR=0]="NO_ERROR",k[k.NETWORK_ERROR=1]="NETWORK_ERROR",k[k.ABORT=2]="ABORT",Pa;var k})();class Qa{constructor(_,T,P,J,ce,Ie,Le,lt,Ft,nn,en){this.url_=_,this.method_=T,this.headers_=P,this.body_=J,this.successCodes_=ce,this.additionalRetryCodes_=Ie,this.callback_=Le,this.errorCallback_=lt,this.timeout_=Ft,this.progressCallback_=nn,this.connectionFactory_=en,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((hi,mi)=>{this.resolve_=hi,this.reject_=mi,this.start_()})}start_(){const T=(P,J)=>{const ce=this.resolve_,Ie=this.reject_,Le=J.connection;if(J.wasSuccessCode)try{const lt=this.callback_(Le,Le.getResponse());!function Ls(k){return void 0!==k}(lt)?ce():ce(lt)}catch(lt){Ie(lt)}else if(null!==Le){const lt=$r();lt.serverResponse=Le.getErrorText(),Ie(this.errorCallback_?this.errorCallback_(Le,lt):lt)}else Ie(J.canceled?this.appDelete_?sa():jl():function Qs(){return new Cs("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?T(0,new jo(!1,null,!0)):this.backoffId_=function Ht(k,_,T){let P=1,J=null,ce=null,Ie=!1,Le=0;function lt(){return 2===Le}let Ft=!1;function nn(...ui){Ft||(Ft=!0,_.apply(null,ui))}function en(ui){J=setTimeout(()=>{J=null,k(mi,lt())},ui)}function hi(){ce&&clearTimeout(ce)}function mi(ui,...pr){if(Ft)return void hi();if(ui)return hi(),void nn.call(null,ui,...pr);if(lt()||Ie)return hi(),void nn.call(null,ui,...pr);let dr;P<64&&(P*=2),1===Le?(Le=2,dr=0):dr=1e3*(P+Math.random()),en(dr)}let Bn=!1;function ei(ui){Bn||(Bn=!0,hi(),!Ft&&(null!==J?(ui||(Le=2),clearTimeout(J),en(0)):ui||(Le=1)))}return en(0),ce=setTimeout(()=>{Ie=!0,ei(!0)},T),ei}((P,J)=>{if(J)return void P(!1,new jo(!1,null,!0));const ce=this.connectionFactory_();this.pendingConnection_=ce;const Ie=Le=>{null!==this.progressCallback_&&this.progressCallback_(Le.loaded,Le.lengthComputable?Le.total:-1)};null!==this.progressCallback_&&ce.addUploadProgressListener(Ie),ce.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&ce.removeUploadProgressListener(Ie),this.pendingConnection_=null;const Le=ce.getErrorCode()===Pa.NO_ERROR,lt=ce.getStatus();if(!Le||this.isRetryStatusCode_(lt)){const nn=ce.getErrorCode()===Pa.ABORT;return void P(!1,new jo(!1,null,nn))}const Ft=-1!==this.successCodes_.indexOf(lt);P(!0,new jo(Ft,ce))})},T,this.timeout_)}getPromise(){return this.promise_}cancel(_){this.canceled_=!0,this.appDelete_=_||!1,null!==this.backoffId_&&function sn(k){k(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(_){const T=_>=500&&_<600,J=-1!==[408,429].indexOf(_),ce=-1!==this.additionalRetryCodes_.indexOf(_);return T||J||ce}}class jo{constructor(_,T,P){this.wasSuccessCode=_,this.connection=T,this.canceled=!!P}}function gr(...k){const _=function tc(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==_){const T=new _;for(let P=0;P<k.length;P++)T.append(k[P]);return T.getBlob()}if(ec())return new Blob(k);throw new Cs("unsupported-environment","This browser doesn't seem to support creating Blobs")}const bn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cl{constructor(_,T){this.data=_,this.contentType=T||null}}function zo(k,_){switch(k){case bn.RAW:return new Cl(Na(_));case bn.BASE64:case bn.BASE64URL:return new Cl(uc(k,_));case bn.DATA_URL:return new Cl(function hl(k){const _=new Vs(k);return _.base64?uc(bn.BASE64,_.rest):function Gc(k){let _;try{_=decodeURIComponent(k)}catch{throw Vn(bn.DATA_URL,"Malformed data URL.")}return Na(_)}(_.rest)}(_),function zl(k){return new Vs(k).contentType}(_))}throw $r()}function Na(k){const _=[];for(let T=0;T<k.length;T++){let P=k.charCodeAt(T);P<=127?_.push(P):P<=2047?_.push(192|P>>6,128|63&P):55296==(64512&P)?T<k.length-1&&56320==(64512&k.charCodeAt(T+1))?(P=65536|(1023&P)<<10|1023&k.charCodeAt(++T),_.push(240|P>>18,128|P>>12&63,128|P>>6&63,128|63&P)):_.push(239,191,189):56320==(64512&P)?_.push(239,191,189):_.push(224|P>>12,128|P>>6&63,128|63&P)}return new Uint8Array(_)}function uc(k,_){switch(k){case bn.BASE64:{const J=-1!==_.indexOf("-"),ce=-1!==_.indexOf("_");if(J||ce)throw Vn(k,"Invalid character '"+(J?"-":"_")+"' found: is it base64url encoded?");break}case bn.BASE64URL:{const J=-1!==_.indexOf("+"),ce=-1!==_.indexOf("/");if(J||ce)throw Vn(k,"Invalid character '"+(J?"+":"/")+"' found: is it base64 encoded?");_=_.replace(/-/g,"+").replace(/_/g,"/");break}}let T;try{T=function Rs(k){return atob(k)}(_)}catch{throw Vn(k,"Invalid character found")}const P=new Uint8Array(T.length);for(let J=0;J<T.length;J++)P[J]=T.charCodeAt(J);return P}class Vs{constructor(_){this.base64=!1,this.contentType=null;const T=_.match(/^data:([^,]+)?,/);if(null===T)throw Vn(bn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const P=T[1]||null;null!=P&&(this.base64=function Ol(k,_){return k.length>=_.length&&k.substring(k.length-_.length)===_}(P,";base64"),this.contentType=this.base64?P.substring(0,P.length-7):P),this.rest=_.substring(_.indexOf(",")+1)}}class Lr{constructor(_,T){let P=0,J="";Xl(_)?(this.data_=_,P=_.size,J=_.type):_ instanceof ArrayBuffer?(T?this.data_=new Uint8Array(_):(this.data_=new Uint8Array(_.byteLength),this.data_.set(new Uint8Array(_))),P=this.data_.length):_ instanceof Uint8Array&&(T?this.data_=_:(this.data_=new Uint8Array(_.length),this.data_.set(_)),P=_.length),this.size_=P,this.type_=J}size(){return this.size_}type(){return this.type_}slice(_,T){if(Xl(this.data_)){const J=function Xc(k,_,T){return k.webkitSlice?k.webkitSlice(_,T):k.mozSlice?k.mozSlice(_,T):k.slice?k.slice(_,T):null}(this.data_,_,T);return null===J?null:new Lr(J)}{const P=new Uint8Array(this.data_.buffer,_,T-_);return new Lr(P,!0)}}static getBlob(..._){if(ec()){const T=_.map(P=>P instanceof Lr?P.data_:P);return new Lr(gr.apply(null,T))}{const T=_.map(Ie=>Ic(Ie)?zo(bn.RAW,Ie).data:Ie.data_);let P=0;T.forEach(Ie=>{P+=Ie.byteLength});const J=new Uint8Array(P);let ce=0;return T.forEach(Ie=>{for(let Le=0;Le<Ie.length;Le++)J[ce++]=Ie[Le]}),new Lr(J,!0)}}uploadData(){return this.data_}}function wo(k){let _;try{_=JSON.parse(k)}catch{return null}return function Tc(k){return"object"==typeof k&&!Array.isArray(k)}(_)?_:null}function xo(k){const _=k.lastIndexOf("/",k.length-2);return-1===_?k:k.slice(_+1)}function fl(k,_){return _}class D{constructor(_,T,P,J){this.server=_,this.local=T||_,this.writable=!!P,this.xform=J||fl}}let N=null;function H(){if(N)return N;const k=[];k.push(new D("bucket")),k.push(new D("generation")),k.push(new D("metageneration")),k.push(new D("name","fullPath",!0));const T=new D("name");T.xform=function _(ce,Ie){return function R(k){return!Ic(k)||k.length<2?k:xo(k)}(Ie)},k.push(T);const J=new D("size");return J.xform=function P(ce,Ie){return void 0!==Ie?Number(Ie):Ie},k.push(J),k.push(new D("timeCreated")),k.push(new D("updated")),k.push(new D("md5Hash",null,!0)),k.push(new D("cacheControl",null,!0)),k.push(new D("contentDisposition",null,!0)),k.push(new D("contentEncoding",null,!0)),k.push(new D("contentLanguage",null,!0)),k.push(new D("contentType",null,!0)),k.push(new D("metadata","customMetadata",!0)),N=k,N}function Pe(k,_,T){const P=wo(_);return null===P?null:function me(k,_,T){const P={type:"file"},J=T.length;for(let ce=0;ce<J;ce++){const Ie=T[ce];P[Ie.local]=Ie.xform(P,_[Ie.server])}return function te(k,_){Object.defineProperty(k,"ref",{get:function T(){const ce=new lo(k.bucket,k.fullPath);return _._makeStorageReference(ce)}})}(P,k),P}(k,P,T)}function Bt(k,_){const T={},P=_.length;for(let J=0;J<P;J++){const ce=_[J];ce.writable&&(T[ce.server]=k[ce.local])}return JSON.stringify(T)}const Tn="prefixes";class os{constructor(_,T,P,J){this.url=_,this.method=T,this.handler=P,this.timeout=J,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Vr(k){if(!k)throw $r()}function Xa(k,_){return function T(P,J){const ce=Pe(k,J,_);return Vr(null!==ce),ce}}function Br(k){return function _(T,P){let J;return J=401===T.getStatus()?T.getErrorText().includes("Firebase App Check token is invalid")?function Fs(){return new Cs("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function cc(){return new Cs("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===T.getStatus()?function Rl(k){return new Cs("quota-exceeded","Quota for bucket '"+k+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(k.bucket):403===T.getStatus()?function bl(k){return new Cs("unauthorized","User does not have permission to access '"+k+"'.")}(k.path):P,J.serverResponse=P.serverResponse,J}}function qi(k){const _=Br(k);return function T(P,J){let ce=_(P,J);return 404===P.getStatus()&&(ce=function ra(k){return new Cs("object-not-found","Object '"+k+"' does not exist.")}(k.path)),ce.serverResponse=J.serverResponse,ce}}function nc(k,_,T){const J=fa(_.fullServerUrl(),k.host,k._protocol),Ie=k.maxOperationRetryTime,Le=new os(J,"GET",Xa(k,T),Ie);return Le.errorHandler=qi(_),Le}function dc(k,_,T,P,J){const ce={};ce.prefix=_.isRoot?"":_.path+"/",T&&T.length>0&&(ce.delimiter=T),P&&(ce.pageToken=P),J&&(ce.maxResults=J);const Le=fa(_.bucketOnlyServerUrl(),k.host,k._protocol),Ft=k.maxOperationRetryTime,nn=new os(Le,"GET",function Mr(k,_){return function T(P,J){const ce=function Bi(k,_,T){const P=wo(T);return null===P?null:function jn(k,_,T){const P={prefixes:[],items:[],nextPageToken:T.nextPageToken};if(T[Tn])for(const J of T[Tn]){const ce=J.replace(/\/$/,""),Ie=k._makeStorageReference(new lo(_,ce));P.prefixes.push(Ie)}if(T.items)for(const J of T.items){const ce=k._makeStorageReference(new lo(_,J.name));P.items.push(ce)}return P}(k,_,P)}(k,_,J);return Vr(null!==ce),ce}}(k,_.bucket),Ft);return nn.urlParams=ce,nn.errorHandler=Br(_),nn}function ts(k,_,T){const P=Object.assign({},T);return P.fullPath=k.path,P.size=_.size(),P.contentType||(P.contentType=function ma(k,_){return k&&k.contentType||_&&_.type()||"application/octet-stream"}(null,_)),P}class Sc{constructor(_,T,P,J){this.current=_,this.total=T,this.finalized=!!P,this.metadata=J||null}}function uo(k,_){let T=null;try{T=k.getResponseHeader("X-Goog-Upload-Status")}catch{Vr(!1)}return Vr(!!T&&-1!==(_||["active"]).indexOf(T)),T}const je={STATE_CHANGED:"state_changed"},gt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function At(k){switch(k){case"running":case"pausing":case"canceling":return gt.RUNNING;case"paused":return gt.PAUSED;case"success":return gt.SUCCESS;case"canceled":return gt.CANCELED;default:return gt.ERROR}}class cn{constructor(_,T,P){if(function kl(k){return"function"==typeof k}(_)||null!=T||null!=P)this.next=_,this.error=T??void 0,this.complete=P??void 0;else{const ce=_;this.next=ce.next,this.error=ce.error,this.complete=ce.complete}}}function yn(k){return(..._)=>{Promise.resolve().then(()=>k(..._))}}class ki extends class ci{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pa.NO_ERROR,this.sendPromise_=new Promise(_=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pa.ABORT,_()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pa.NETWORK_ERROR,_()}),this.xhr_.addEventListener("load",()=>{_()})})}send(_,T,P,J){if(this.sent_)throw Fn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(T,_,!0),void 0!==J)for(const ce in J)J.hasOwnProperty(ce)&&this.xhr_.setRequestHeader(ce,J[ce].toString());return void 0!==P?this.xhr_.send(P):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(_){return this.xhr_.getResponseHeader(_)}addUploadProgressListener(_){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",_)}removeUploadProgressListener(_){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",_)}}{initXhr(){this.xhr_.responseType="text"}}function Zn(){return new ki}class El{constructor(_,T,P=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=_,this._blob=T,this._metadata=P,this._mappings=H(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=J=>{this._request=void 0,this._chunkMultiplier=1,J._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=J,this._transition("error"))},this._metadataErrorHandler=J=>{this._request=void 0,J._codeEquals("canceled")?this.completeTransitions_():(this._error=J,this._transition("error"))},this._promise=new Promise((J,ce)=>{this._resolve=J,this._reject=ce,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const _=this._transferred;return T=>this._updateProgress(_+T)}_shouldDoResumable(_){return _.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(_){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([T,P])=>{switch(this._state){case"running":_(T,P);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((_,T)=>{const P=function Pl(k,_,T,P,J){const ce=_.bucketOnlyServerUrl(),Ie=ts(_,P,J),Le={name:Ie.fullPath},lt=fa(ce,k.host,k._protocol),nn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${P.size()}`,"X-Goog-Upload-Header-Content-Type":Ie.contentType,"Content-Type":"application/json; charset=utf-8"},en=Bt(Ie,T),Bn=new os(lt,"POST",function mi(ei){let ui;uo(ei);try{ui=ei.getResponseHeader("X-Goog-Upload-URL")}catch{Vr(!1)}return Vr(Ic(ui)),ui},k.maxUploadRetryTime);return Bn.urlParams=Le,Bn.headers=nn,Bn.body=en,Bn.errorHandler=Br(_),Bn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),J=this._ref.storage._makeRequest(P,Zn,_,T);this._request=J,J.getPromise().then(ce=>{this._request=void 0,this._uploadUrl=ce,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const _=this._uploadUrl;this._resolveToken((T,P)=>{const J=function q(k,_,T,P){const lt=new os(T,"POST",function ce(Ft){const nn=uo(Ft,["active","final"]);let en=null;try{en=Ft.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Vr(!1)}en||Vr(!1);const hi=Number(en);return Vr(!isNaN(hi)),new Sc(hi,P.size(),"final"===nn)},k.maxUploadRetryTime);return lt.headers={"X-Goog-Upload-Command":"query"},lt.errorHandler=Br(_),lt}(this._ref.storage,this._ref._location,_,this._blob),ce=this._ref.storage._makeRequest(J,Zn,T,P);this._request=ce,ce.getPromise().then(Ie=>{this._request=void 0,this._updateProgress(Ie.current),this._needToFetchStatus=!1,Ie.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const _=262144*this._chunkMultiplier,T=new Sc(this._transferred,this._blob.size()),P=this._uploadUrl;this._resolveToken((J,ce)=>{let Ie;try{Ie=function he(k,_,T,P,J,ce,Ie,Le){const lt=new Sc(0,0);if(Ie?(lt.current=Ie.current,lt.total=Ie.total):(lt.current=0,lt.total=P.size()),P.size()!==lt.total)throw function cl(){return new Cs("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Ft=lt.total-lt.current;let nn=Ft;J>0&&(nn=Math.min(nn,J));const en=lt.current,Bn={"X-Goog-Upload-Command":nn===Ft?"upload, finalize":"upload","X-Goog-Upload-Offset":`${lt.current}`},ei=P.slice(en,en+nn);if(null===ei)throw ha();const dr=new os(T,"POST",function ui(tr,Kl){const Wo=uo(tr,["active","final"]),Ao=lt.current+nn,Wl=P.size();let Di;return Di="final"===Wo?Xa(_,ce)(tr,Kl):null,new Sc(Ao,Wl,"final"===Wo,Di)},_.maxUploadRetryTime);return dr.headers=Bn,dr.body=ei.uploadData(),dr.progressCallback=Le||null,dr.errorHandler=Br(k),dr}(this._ref._location,this._ref.storage,P,this._blob,_,this._mappings,T,this._makeProgressCallback())}catch(lt){return this._error=lt,void this._transition("error")}const Le=this._ref.storage._makeRequest(Ie,Zn,J,ce);this._request=Le,Le.getPromise().then(lt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(lt.current),lt.finalized?(this._metadata=lt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((_,T)=>{const P=nc(this._ref.storage,this._ref._location,this._mappings),J=this._ref.storage._makeRequest(P,Zn,_,T);this._request=J,J.getPromise().then(ce=>{this._request=void 0,this._metadata=ce,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((_,T)=>{const P=function Fa(k,_,T,P,J){const ce=_.bucketOnlyServerUrl(),Ie={"X-Goog-Upload-Protocol":"multipart"},lt=function Le(){let dr="";for(let tr=0;tr<2;tr++)dr+=Math.random().toString().slice(2);return dr}();Ie["Content-Type"]="multipart/related; boundary="+lt;const Ft=ts(_,P,J),nn=Bt(Ft,T),mi=Lr.getBlob("--"+lt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+nn+"\r\n--"+lt+"\r\nContent-Type: "+Ft.contentType+"\r\n\r\n",P,"\r\n--"+lt+"--");if(null===mi)throw ha();const Bn={name:Ft.fullPath},ei=fa(ce,k.host,k._protocol),pr=k.maxUploadRetryTime,ns=new os(ei,"POST",Xa(k,T),pr);return ns.urlParams=Bn,ns.headers=Ie,ns.body=mi.uploadData(),ns.errorHandler=Br(_),ns}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),J=this._ref.storage._makeRequest(P,Zn,_,T);this._request=J,J.getPromise().then(ce=>{this._request=void 0,this._metadata=ce,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(_){const T=this._transferred;this._transferred=_,this._transferred!==T&&this._notifyObservers()}_transition(_){if(this._state!==_)switch(_){case"canceling":case"pausing":this._state=_,void 0!==this._request&&this._request.cancel();break;case"running":const T="paused"===this._state;this._state=_,T&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=_,this._notifyObservers();break;case"canceled":this._error=jl(),this._state=_,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const _=At(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:_,metadata:this._metadata,task:this,ref:this._ref}}on(_,T,P,J){const ce=new cn(T||void 0,P||void 0,J||void 0);return this._addObserver(ce),()=>{this._removeObserver(ce)}}then(_,T){return this._promise.then(_,T)}catch(_){return this.then(null,_)}_addObserver(_){this._observers.push(_),this._notifyObserver(_)}_removeObserver(_){const T=this._observers.indexOf(_);-1!==T&&this._observers.splice(T,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(T=>{this._notifyObserver(T)})}_finishPromise(){if(void 0!==this._resolve){let _=!0;switch(At(this._state)){case gt.SUCCESS:yn(this._resolve.bind(null,this.snapshot))();break;case gt.CANCELED:case gt.ERROR:yn(this._reject.bind(null,this._error))();break;default:_=!1}_&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(_){switch(At(this._state)){case gt.RUNNING:case gt.PAUSED:_.next&&yn(_.next.bind(_,this.snapshot))();break;case gt.SUCCESS:_.complete&&yn(_.complete.bind(_))();break;default:_.error&&yn(_.error.bind(_,this._error))()}}resume(){const _="paused"===this._state||"pausing"===this._state;return _&&this._transition("running"),_}pause(){const _="running"===this._state;return _&&this._transition("pausing"),_}cancel(){const _="running"===this._state||"pausing"===this._state;return _&&this._transition("canceling"),_}}class el{constructor(_,T){this._service=_,this._location=T instanceof lo?T:lo.makeFromUrl(T,_.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(_,T){return new el(_,T)}get root(){const _=new lo(this._location.bucket,"");return this._newRef(this._service,_)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xo(this._location.path)}get storage(){return this._service}get parent(){const _=function Ja(k){if(0===k.length)return null;const _=k.lastIndexOf("/");return-1===_?"":k.slice(0,_)}(this._location.path);if(null===_)return null;const T=new lo(this._location.bucket,_);return new el(this._service,T)}_throwIfRoot(_){if(""===this._location.path)throw ul(_)}}function du(k,_,T){return $c.apply(this,arguments)}function $c(){return($c=(0,Za.Z)(function*(k,_,T){const J=yield Ko(k,{pageToken:T});_.prefixes.push(...J.prefixes),_.items.push(...J.items),null!=J.nextPageToken&&(yield du(k,_,J.nextPageToken))})).apply(this,arguments)}function Ko(k,_){null!=_&&"number"==typeof _.maxResults&&dl("options.maxResults",1,1e3,_.maxResults);const T=_||{},P=dc(k.storage,k._location,"/",T.pageToken,T.maxResults);return k.storage.makeRequestWithTokens(P,Zn)}function Kc(k){k._throwIfRoot("getDownloadURL");const _=function $l(k,_,T){const J=fa(_.fullServerUrl(),k.host,k._protocol),Ie=k.maxOperationRetryTime,Le=new os(J,"GET",function Go(k,_){return function T(P,J){const ce=Pe(k,J,_);return Vr(null!==ce),function Ze(k,_,T,P){const J=wo(_);if(null===J||!Ic(J.downloadTokens))return null;const ce=J.downloadTokens;if(0===ce.length)return null;const Ie=encodeURIComponent;return ce.split(",").map(Ft=>{const en=k.fullPath;return fa("/b/"+Ie(k.bucket)+"/o/"+Ie(en),T,P)+Ms({alt:"media",token:Ft})})[0]}(ce,J,k.host,k._protocol)}}(k,T),Ie);return Le.errorHandler=qi(_),Le}(k.storage,k._location,H());return k.storage.makeRequestWithTokens(_,Zn).then(T=>{if(null===T)throw function pn(){return new Cs("no-download-url","The given file does not have any download URLs.")}();return T})}function $(k,_){const T=function Gl(k,_){const T=_.split("/").filter(P=>P.length>0).join("/");return 0===k.length?T:k+"/"+T}(k._location.path,_),P=new lo(k._location.bucket,T);return new el(k.storage,P)}function Je(k,_){if(k instanceof Qn){const T=k;if(null==T._bucket)throw function Ho(){return new Cs("no-default-bucket","No default bucket found. Did you set the '"+Ql+"' property when initializing the app?")}();const P=new el(T,T._bucket);return null!=_?Je(P,_):P}return void 0!==_?$(k,_):k}function Ot(k,_){if(_&&function K(k){return/^[A-Za-z]+:\/\//.test(k)}(_)){if(k instanceof Qn)return function ve(k,_){return new el(k,_)}(k,_);throw Fr("To use ref(service, url), the first argument must be a Storage instance.")}return Je(k,_)}function vn(k,_){const T=_?.[Ql];return null==T?null:lo.makeFromBucketSpec(T,k)}class Qn{constructor(_,T,P,J,ce){this.app=_,this._authProvider=T,this._appCheckProvider=P,this._url=J,this._firebaseVersion=ce,this._bucket=null,this._host=Ys,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=J?lo.makeFromBucketSpec(J,this._host):vn(this._host,this.app.options)}get host(){return this._host}set host(_){this._host=_,this._bucket=null!=this._url?lo.makeFromBucketSpec(this._url,_):vn(_,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(_){dl("time",0,Number.POSITIVE_INFINITY,_),this._maxUploadRetryTime=_}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(_){dl("time",0,Number.POSITIVE_INFINITY,_),this._maxOperationRetryTime=_}_getAuthToken(){var _=this;return(0,Za.Z)(function*(){if(_._overrideAuthToken)return _._overrideAuthToken;const T=_._authProvider.getImmediate({optional:!0});if(T){const P=yield T.getToken();if(null!==P)return P.accessToken}return null})()}_getAppCheckToken(){var _=this;return(0,Za.Z)(function*(){const T=_._appCheckProvider.getImmediate({optional:!0});return T?(yield T.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(_=>_.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(_){return new el(this,_)}_makeRequest(_,T,P,J){if(this._deleted)return new Dn(sa());{const ce=function An(k,_,T,P,J,ce){const Ie=Ms(k.urlParams),Le=k.url+Ie,lt=Object.assign({},k.headers);return function pa(k,_){_&&(k["X-Firebase-GMPID"]=_)}(lt,_),function Mi(k,_){null!==_&&_.length>0&&(k.Authorization="Firebase "+_)}(lt,T),function Lo(k,_){k["X-Firebase-Storage-Version"]="webjs/"+(_??"AppManager")}(lt,ce),function Qr(k,_){null!==_&&(k["X-Firebase-AppCheck"]=_)}(lt,P),new Qa(Le,k.method,lt,k.body,k.successCodes,k.additionalRetryCodes,k.handler,k.errorHandler,k.timeout,k.progressCallback,J)}(_,this._appId,P,J,T,this._firebaseVersion);return this._requests.add(ce),ce.getPromise().then(()=>this._requests.delete(ce),()=>this._requests.delete(ce)),ce}}makeRequestWithTokens(_,T){var P=this;return(0,Za.Z)(function*(){const[J,ce]=yield Promise.all([P._getAuthToken(),P._getAppCheckToken()]);return P._makeRequest(_,T,J,ce).getPromise()})()}}const Es="@firebase/storage";function Ll(k,_){return Ot(k=(0,ia.m9)(k),_)}function Wc(k,{instanceIdentifier:_}){const T=k.getProvider("app").getImmediate(),P=k.getProvider("auth-internal"),J=k.getProvider("app-check-internal");return new Qn(T,P,J,_,qa.SDK_VERSION)}!function xc(){(0,qa._registerComponent)(new vl.wA("storage",Wc,"PUBLIC").setMultipleInstances(!0)),(0,qa.registerVersion)(Es,"0.9.9",""),(0,qa.registerVersion)(Es,"0.9.9","esm2017")}();class Bs{constructor(_,T,P){this._delegate=_,this.task=T,this.ref=P}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class F{constructor(_,T){this._delegate=_,this._ref=T,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Bs(this._delegate.snapshot,this,this._ref)}then(_,T){return this._delegate.then(P=>{if(_)return _(new Bs(P,this,this._ref))},T)}on(_,T,P,J){let ce;return T&&(ce="function"==typeof T?Ie=>T(new Bs(Ie,this,this._ref)):{next:T.next?Ie=>T.next(new Bs(Ie,this,this._ref)):void 0,complete:T.complete||void 0,error:T.error||void 0}),this._delegate.on(_,ce,P||void 0,J||void 0)}}class E{constructor(_,T){this._delegate=_,this._service=T}get prefixes(){return this._delegate.prefixes.map(_=>new I(_,this._service))}get items(){return this._delegate.items.map(_=>new I(_,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class I{constructor(_,T){this._delegate=_,this.storage=T}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(_){const T=function Dc(k,_){return $(k,_)}(this._delegate,_);return new I(T,this.storage)}get root(){return new I(this._delegate.root,this.storage)}get parent(){const _=this._delegate.parent;return null==_?null:new I(_,this.storage)}put(_,T){return this._throwIfRoot("put"),new F(function Fl(k,_,T){return function hc(k,_,T){return k._throwIfRoot("uploadBytesResumable"),new El(k,new Lr(_),T)}(k=(0,ia.m9)(k),_,T)}(this._delegate,_,T),this)}putString(_,T=bn.RAW,P){this._throwIfRoot("putString");const J=zo(T,_),ce=Object.assign({},P);return null==ce.contentType&&null!=J.contentType&&(ce.contentType=J.contentType),new F(new El(this._delegate,new Lr(J.data,!0),ce),this)}listAll(){return function eu(k){return function cd(k){const _={prefixes:[],items:[]};return du(k,_).then(()=>_)}(k=(0,ia.m9)(k))}(this._delegate).then(_=>new E(_,this.storage))}list(_){return function aa(k,_){return Ko(k=(0,ia.m9)(k),_)}(this._delegate,_||void 0).then(T=>new E(T,this.storage))}getMetadata(){return function fc(k){return function Il(k){k._throwIfRoot("getMetadata");const _=nc(k.storage,k._location,H());return k.storage.makeRequestWithTokens(_,Zn)}(k=(0,ia.m9)(k))}(this._delegate)}updateMetadata(_){return function Co(k,_){return function _s(k,_){k._throwIfRoot("updateMetadata");const T=function co(k,_,T,P){const ce=fa(_.fullServerUrl(),k.host,k._protocol),Le=Bt(T,P),Ft=k.maxOperationRetryTime,nn=new os(ce,"PATCH",Xa(k,P),Ft);return nn.headers={"Content-Type":"application/json; charset=utf-8"},nn.body=Le,nn.errorHandler=qi(_),nn}(k.storage,k._location,_,H());return k.storage.makeRequestWithTokens(T,Zn)}(k=(0,ia.m9)(k),_)}(this._delegate,_)}getDownloadURL(){return function hu(k){return Kc(k=(0,ia.m9)(k))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function tu(k){return function fe(k){k._throwIfRoot("deleteObject");const _=function yc(k,_){const P=fa(_.fullServerUrl(),k.host,k._protocol),Le=new os(P,"DELETE",function Ie(lt,Ft){},k.maxOperationRetryTime);return Le.successCodes=[200,204],Le.errorHandler=qi(_),Le}(k.storage,k._location);return k.storage.makeRequestWithTokens(_,Zn)}(k=(0,ia.m9)(k))}(this._delegate)}_throwIfRoot(_){if(""===this._delegate._location.path)throw ul(_)}}class U{constructor(_,T){this.app=_,this._delegate=T}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(_){if(de(_))throw Fr("ref() expected a child path but got a URL, use refFromURL instead.");return new I(Ll(this._delegate,_),this)}refFromURL(_){if(!de(_))throw Fr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{lo.makeFromUrl(_,this._delegate.host)}catch{throw Fr("refFromUrl() expected a valid full URL but got an invalid one.")}return new I(Ll(this._delegate,_),this)}setMaxUploadRetryTime(_){this._delegate.maxUploadRetryTime=_}setMaxOperationRetryTime(_){this._delegate.maxOperationRetryTime=_}useEmulator(_,T,P={}){!function ga(k,_,T,P={}){!function bi(k,_,T,P={}){k.host=`${_}:${T}`,k._protocol="http";const{mockUserToken:J}=P;J&&(k._overrideAuthToken="string"==typeof J?J:(0,ia.Sg)(J,k.app.options.projectId))}(k,_,T,P)}(this._delegate,_,T,P)}}function de(k){return/^[A-Za-z]+:\/\//.test(k)}function On(k,{instanceIdentifier:_}){const T=k.getProvider("app-compat").getImmediate(),P=k.getProvider("storage").getImmediate({identifier:_});return new U(T,P)}!function pi(k){const _={TaskState:gt,TaskEvent:je,StringFormat:bn,Storage:U,Reference:I};k.INTERNAL.registerComponent(new vl.wA("storage-compat",On,"PUBLIC").setServiceProps(_).setMultipleInstances(!0)),k.registerVersion("@firebase/storage-compat","0.1.17")}(Ec.Z);var _r=Q(440),Ts=Q(127);function Nc(k){const _=function Bl(k){return new ao.y(_=>{const T=Ie=>_.next(Ie);T(k.snapshot);const ce=k.on("state_changed",T);return k.then(Ie=>{T(Ie),_.complete()},Ie=>{T(k.snapshot),(Ie=>{_.error(Ie)})(Ie)}),function(){ce()}}).pipe((0,Gr.b)(0))}(k);return{task:k,then:k.then.bind(k),catch:k.catch.bind(k),pause:k.pause.bind(k),cancel:k.cancel.bind(k),resume:k.resume.bind(k),snapshotChanges:()=>_,percentageChanges:()=>_.pipe((0,Ka.U)(T=>T.bytesTransferred/T.totalBytes*100))}}function vc(k){return{getDownloadURL:()=>(0,ua.of)(void 0).pipe(da.fc,(0,Wa.w)(()=>k.getDownloadURL()),da.iC),getMetadata:()=>(0,ua.of)(void 0).pipe(da.fc,(0,Wa.w)(()=>k.getMetadata()),da.iC),delete:()=>(0,Oa.D)(k.delete()),child:_=>vc(k.child(_)),updateMetadata:_=>(0,Oa.D)(k.updateMetadata(_)),put:(_,T)=>Nc(k.put(_,T)),putString:(_,T,P)=>Nc(k.putString(_,T,P)),list:_=>(0,Oa.D)(k.list(_)),listAll:()=>(0,Oa.D)(k.listAll())}}const Zc=new i.OlP("angularfire2.storageBucket"),pc=new i.OlP("angularfire2.storage.maxUploadRetryTime"),nu=new i.OlP("angularfire2.storage.maxOperationRetryTime"),rc=new i.OlP("angularfire2.storage.use-emulator");let Eu=(()=>{class k{constructor(T,P,J,ce,Ie,Le,lt,Ft,nn,en){const hi=(0,kr.on)(T,Ie,P);this.storage=(0,kr.cc)(`${hi.name}.storage.${J}`,"AngularFireStorage",hi.name,()=>{const mi=Ie.runOutsideAngular(()=>hi.storage(J||void 0)),Bn=nn;return Bn&&mi.useEmulator(...Bn),lt&&mi.setMaxUploadRetryTime(lt),Ft&&mi.setMaxOperationRetryTime(Ft),mi},[lt,Ft])}ref(T){return vc(this.storage.ref(T))}refFromURL(T){return vc(this.storage.refFromURL(T))}upload(T,P,J){return vc(this.storage.ref(T)).put(P,J)}}return k.\u0275fac=function(T){return new(T||k)(i.LFG(kr.Dh),i.LFG(kr.xv,8),i.LFG(Zc,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(da.HU),i.LFG(pc,8),i.LFG(nu,8),i.LFG(rc,8),i.LFG(_r.nm,8))},k.\u0275prov=i.Yz7({token:k,factory:k.\u0275fac,providedIn:"any"}),k})(),Tu=(()=>{class k{}return k.\u0275fac=function(T){return new(T||k)},k.\u0275mod=i.oAB({type:k}),k.\u0275inj=i.cJS({}),k})(),ru=(()=>{class k{constructor(){Ts.Z.registerVersion("angularfire",da.q4.full,"gcs-compat")}}return k.\u0275fac=function(T){return new(T||k)},k.\u0275mod=i.oAB({type:k}),k.\u0275inj=i.cJS({providers:[Eu],imports:[Tu]}),k})();var qc=Q(7407),Zu=Q(7471),Fc=Q(7185),cs=Q(1740),pu=Q(773),su=Q(3928),ou=Q(4058);let Dd=(()=>{class k{}return k.\u0275fac=function(T){return new(T||k)},k.\u0275mod=i.oAB({type:k,bootstrap:[Oe]}),k.\u0275inj=i.cJS({providers:[pu.e],imports:[g.b2,Ke,Me.u5,ee,Sr,kr.hO.initializeApp(ka_firebaseConfig),Do.ww,ru,qc.yb,Zu.JS,cs.j,Me.UX,su.Ps,Fc.Rh.forRoot(),ou.ComponentsModule]}),k})();(0,i.G48)(),g.q6().bootstrapModule(Dd).catch(k=>console.error(k))},5867:(Sn,Ct,Q)=>{Q.d(Ct,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=Q(9681);(0,g.registerVersion)("firebase","9.9.3","app")},127:(Sn,Ct,Q)=>{Q.d(Ct,{Z:()=>g.Z});var g=Q(3942);g.Z.registerVersion("firebase","9.9.3","app-compat")},5881:(Sn,Ct,Q)=>{Q.r(Ct);var g=Q(5861),i=Q(3942),se=Q(6457),ge=Q(2090),Oe=(Q(9681),Q(1877),Q(4859));function Me(){return window}function Se(){return(Se=(0,g.Z)(function*(_t,We,tt){var zt;const{BuildInfo:_n}=Me();(0,se.aq)(We.sessionId,"AuthEvent did not contain a session ID");const $n=yield bt(We.sessionId),Yn={};return(0,se.ar)()?Yn.ibi=_n.packageName:(0,se.as)()?Yn.apn=_n.packageName:(0,se.at)(_t,"operation-not-supported-in-this-environment"),_n.displayName&&(Yn.appDisplayName=_n.displayName),Yn.sessionId=$n,(0,se.au)(_t,tt,We.type,void 0,null!==(zt=We.eventId)&&void 0!==zt?zt:void 0,Yn)})).apply(this,arguments)}function kt(){return(kt=(0,g.Z)(function*(_t){const{BuildInfo:We}=Me(),tt={};(0,se.ar)()?tt.iosBundleId=We.packageName:(0,se.as)()?tt.androidPackageName=We.packageName:(0,se.at)(_t,"operation-not-supported-in-this-environment"),yield(0,se.av)(_t,tt)})).apply(this,arguments)}function Wt(){return(Wt=(0,g.Z)(function*(_t,We,tt){const{cordova:zt}=Me();let _n=()=>{};try{yield new Promise(($n,Yn)=>{let Ne=null;function Ve(){var It;$n();const En=null===(It=zt.plugins.browsertab)||void 0===It?void 0:It.close;"function"==typeof En&&En(),"function"==typeof tt?.close&&tt.close()}function De(){Ne||(Ne=window.setTimeout(()=>{Yn((0,se.aw)(_t,"redirect-cancelled-by-user"))},2e3))}function ht(){"visible"===document?.visibilityState&&De()}We.addPassiveListener(Ve),document.addEventListener("resume",De,!1),(0,se.as)()&&document.addEventListener("visibilitychange",ht,!1),_n=()=>{We.removePassiveListener(Ve),document.removeEventListener("resume",De,!1),document.removeEventListener("visibilitychange",ht,!1),Ne&&window.clearTimeout(Ne)}})}finally{_n()}})).apply(this,arguments)}function bt(_t){return ot.apply(this,arguments)}function ot(){return(ot=(0,g.Z)(function*(_t){const We=qt(_t),tt=yield crypto.subtle.digest("SHA-256",We);return Array.from(new Uint8Array(tt)).map(_n=>_n.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qt(_t){if((0,se.aq)(/[0-9a-zA-Z]+/.test(_t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_t);const We=new ArrayBuffer(_t.length),tt=new Uint8Array(We);for(let zt=0;zt<_t.length;zt++)tt[zt]=_t.charCodeAt(zt);return tt}class we extends se.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(We=>{this.resolveInialized=We})}addPassiveListener(We){this.passiveListeners.add(We)}removePassiveListener(We){this.passiveListeners.delete(We)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(We){return this.resolveInialized(),this.passiveListeners.forEach(tt=>tt(We)),super.onEvent(We)}initialized(){var We=this;return(0,g.Z)(function*(){yield We.initPromise})()}}function xe(_t){return ee.apply(this,arguments)}function ee(){return(ee=(0,g.Z)(function*(_t){const We=yield st()._get(Et(_t));return We&&(yield st()._remove(Et(_t))),We})).apply(this,arguments)}function Ue(){const _t=[],We="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let tt=0;tt<20;tt++){const zt=Math.floor(Math.random()*We.length);_t.push(We.charAt(zt))}return _t.join("")}function st(){return(0,se.ay)(se.b)}function Et(_t){return(0,se.az)("authEvent",_t.config.apiKey,_t.name)}function rn(_t){if(!_t?.includes("?"))return{};const[We,...tt]=_t.split("?");return(0,ge.zd)(tt.join("?"))}function Gt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,se.aw)("no-auth-event")}}function He(){var _t;return(null===(_t=self?.location)||void 0===_t?void 0:_t.protocol)||null}function un(_t=(0,ge.z$)()){return!("file:"!==He()&&"ionic:"!==He()&&"capacitor:"!==He()||!_t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zi(){try{const _t=self.localStorage,We=se.aI();if(_t)return _t.setItem(We,"1"),_t.removeItem(We),!function Ei(_t=(0,ge.z$)()){return function Wi(){return(0,ge.w1)()&&11===document?.documentMode}()||function Ci(_t=(0,ge.z$)()){return/Edge\/\d+/.test(_t)}(_t)}()||(0,ge.hl)()}catch{return oi()&&(0,ge.hl)()}return!1}function oi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ki(){return(function vt(){return"http:"===He()||"https:"===He()}()||(0,ge.ru)()||un())&&!function Hn(){return(0,ge.b$)()||(0,ge.UG)()}()&&Zi()&&!oi()}function Ui(){return un()&&typeof document<"u"}function Jt(){return(Jt=(0,g.Z)(function*(){return!!Ui()&&new Promise(_t=>{const We=setTimeout(()=>{_t(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(We),_t(!0)})})})).apply(this,arguments)}const Hi={LOCAL:"local",NONE:"none",SESSION:"session"},Qi=se.ax,Jr="persistence";function xr(_t){return br.apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(_t){yield _t._initializationPromise;const We=Kn(),tt=se.az(Jr,_t.config.apiKey,_t.name);We&&We.setItem(tt,_t._getPersistence())})).apply(this,arguments)}function Kn(){var _t;try{return(null===(_t=function Ni(){return typeof window<"u"?window:null}())||void 0===_t?void 0:_t.sessionStorage)||null}catch{return null}}const Gn=se.ax;class fi{constructor(){this.browserResolver=se.ay(se.k),this.cordovaResolver=se.ay(class kn{constructor(){this._redirectPersistence=se.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=se.aB,this._overrideRedirectResult=se.aC}_initialize(We){var tt=this;return(0,g.Z)(function*(){const zt=We._key();let _n=tt.eventManagers.get(zt);return _n||(_n=new we(We),tt.eventManagers.set(zt,_n),tt.attachCallbackListeners(We,_n)),_n})()}_openPopup(We){(0,se.at)(We,"operation-not-supported-in-this-environment")}_openRedirect(We,tt,zt,_n){var $n=this;return(0,g.Z)(function*(){!function Dt(_t){var We,tt,zt,_n,$n,Yn,Ne,Ve,De,ht;const It=Me();(0,se.ax)("function"==typeof(null===(We=It?.universalLinks)||void 0===We?void 0:We.subscribe),_t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,se.ax)(typeof(null===(tt=It?.BuildInfo)||void 0===tt?void 0:tt.packageName)<"u",_t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,se.ax)("function"==typeof(null===($n=null===(_n=null===(zt=It?.cordova)||void 0===zt?void 0:zt.plugins)||void 0===_n?void 0:_n.browsertab)||void 0===$n?void 0:$n.openUrl),_t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,se.ax)("function"==typeof(null===(Ve=null===(Ne=null===(Yn=It?.cordova)||void 0===Yn?void 0:Yn.plugins)||void 0===Ne?void 0:Ne.browsertab)||void 0===Ve?void 0:Ve.isAvailable),_t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,se.ax)("function"==typeof(null===(ht=null===(De=It?.cordova)||void 0===De?void 0:De.InAppBrowser)||void 0===ht?void 0:ht.open),_t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(We);const Yn=yield $n._initialize(We);yield Yn.initialized(),Yn.resetRedirect(),(0,se.aD)(),yield $n._originValidation(We);const Ne=function nt(_t,We,tt=null){return{type:We,eventId:tt,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:_t.tenantId,error:(0,se.aw)(_t,"no-auth-event")}}(We,zt,_n);yield function Xe(_t,We){return st()._set(Et(_t),We)}(We,Ne);const Ve=yield function Re(_t,We,tt){return Se.apply(this,arguments)}(We,Ne,tt),De=yield function dt(_t){const{cordova:We}=Me();return new Promise(tt=>{We.plugins.browsertab.isAvailable(zt=>{let _n=null;zt?We.plugins.browsertab.openUrl(_t):_n=We.InAppBrowser.open(_t,(0,se.ap)()?"_blank":"_system","location=yes"),tt(_n)})})}(Ve);return function wt(_t,We,tt){return Wt.apply(this,arguments)}(We,Yn,De)})()}_isIframeWebStorageSupported(We,tt){throw new Error("Method not implemented.")}_originValidation(We){const tt=We._key();return this.originValidationPromises[tt]||(this.originValidationPromises[tt]=function Ge(_t){return kt.apply(this,arguments)}(We)),this.originValidationPromises[tt]}attachCallbackListeners(We,tt){const{universalLinks:zt,handleOpenURL:_n,BuildInfo:$n}=Me(),Yn=setTimeout((0,g.Z)(function*(){yield xe(We),tt.onEvent(Gt())}),500),Ne=function(){var ht=(0,g.Z)(function*(It){clearTimeout(Yn);const En=yield xe(We);let vi=null;En&&It?.url&&(vi=function pt(_t,We){var tt,zt;const _n=function Qt(_t){const We=rn(_t),tt=We.link?decodeURIComponent(We.link):void 0,zt=rn(tt).link,_n=We.deep_link_id?decodeURIComponent(We.deep_link_id):void 0;return rn(_n).link||_n||zt||tt||_t}(We);if(_n.includes("/__/auth/callback")){const $n=rn(_n),Yn=$n.firebaseError?function yt(_t){try{return JSON.parse(_t)}catch{return null}}(decodeURIComponent($n.firebaseError)):null,Ne=null===(zt=null===(tt=Yn?.code)||void 0===tt?void 0:tt.split("auth/"))||void 0===zt?void 0:zt[1],Ve=Ne?(0,se.aw)(Ne):null;return Ve?{type:_t.type,eventId:_t.eventId,tenantId:_t.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:_t.type,eventId:_t.eventId,tenantId:_t.tenantId,sessionId:_t.sessionId,urlResponse:_n,postBody:null}}return null}(En,It.url)),tt.onEvent(vi||Gt())});return function(En){return ht.apply(this,arguments)}}();typeof zt<"u"&&"function"==typeof zt.subscribe&&zt.subscribe(null,Ne);const Ve=_n,De=`${$n.packageName.toLowerCase()}://`;Me().handleOpenURL=function(){var ht=(0,g.Z)(function*(It){if(It.toLowerCase().startsWith(De)&&Ne({url:It}),"function"==typeof Ve)try{Ve(It)}catch(En){console.error(En)}});return function(It){return ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=se.a,this._completeRedirectFn=se.aB,this._overrideRedirectResult=se.aC}_initialize(We){var tt=this;return(0,g.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._initialize(We)})()}_openPopup(We,tt,zt,_n){var $n=this;return(0,g.Z)(function*(){return yield $n.selectUnderlyingResolver(),$n.assertedUnderlyingResolver._openPopup(We,tt,zt,_n)})()}_openRedirect(We,tt,zt,_n){var $n=this;return(0,g.Z)(function*(){return yield $n.selectUnderlyingResolver(),$n.assertedUnderlyingResolver._openRedirect(We,tt,zt,_n)})()}_isIframeWebStorageSupported(We,tt){this.assertedUnderlyingResolver._isIframeWebStorageSupported(We,tt)}_originValidation(We){return this.assertedUnderlyingResolver._originValidation(We)}get _shouldInitProactively(){return Ui()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var We=this;return(0,g.Z)(function*(){if(We.underlyingResolver)return;const tt=yield function yi(){return Jt.apply(this,arguments)}();We.underlyingResolver=tt?We.cordovaResolver:We.browserResolver})()}}function Ar(_t){return _t.unwrap()}function ji(_t){return or(_t)}function or(_t){const{_tokenResponse:We}=_t instanceof ge.ZR?_t.customData:_t;if(!We)return null;if(!(_t instanceof ge.ZR)&&"temporaryProof"in We&&"phoneNumber"in We)return se.P.credentialFromResult(_t);const tt=We.providerId;if(!tt||tt===se.o.PASSWORD)return null;let zt;switch(tt){case se.o.GOOGLE:zt=se.Q;break;case se.o.FACEBOOK:zt=se.N;break;case se.o.GITHUB:zt=se.T;break;case se.o.TWITTER:zt=se.W;break;default:const{oauthIdToken:_n,oauthAccessToken:$n,oauthTokenSecret:Yn,pendingToken:Ne,nonce:Ve}=We;return $n||Yn||_n||Ne?Ne?tt.startsWith("saml.")?se.aL._create(tt,Ne):se.J._fromParams({providerId:tt,signInMethod:tt,pendingToken:Ne,idToken:_n,accessToken:$n}):new se.U(tt).credential({idToken:_n,accessToken:$n,rawNonce:Ve}):null}return _t instanceof ge.ZR?zt.credentialFromError(_t):zt.credentialFromResult(_t)}function ai(_t,We){return We.catch(tt=>{throw tt instanceof ge.ZR&&function ri(_t,We){var tt,zt;const _n=null===(tt=We.customData)||void 0===tt?void 0:tt._tokenResponse;if("auth/multi-factor-auth-required"===(null===(zt=We)||void 0===zt?void 0:zt.code))We.resolver=new ct(_t,se.an(_t,We));else if(_n){const $n=or(We),Yn=We;$n&&(Yn.credential=$n,Yn.tenantId=_n.tenantId||void 0,Yn.email=_n.email||void 0,Yn.phoneNumber=_n.phoneNumber||void 0)}}(_t,tt),tt}).then(tt=>{const _n=tt.user;return{operationType:tt.operationType,credential:ji(tt),additionalUserInfo:se.al(tt),user:qe.getOrCreate(_n)}})}function vs(_t,We){return qn.apply(this,arguments)}function qn(){return(qn=(0,g.Z)(function*(_t,We){const tt=yield We;return{verificationId:tt.verificationId,confirm:zt=>ai(_t,tt.confirm(zt))}})).apply(this,arguments)}class ct{constructor(We,tt){this.resolver=tt,this.auth=function Mn(_t){return _t.wrapped()}(We)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(We){return ai(Ar(this.auth),this.resolver.resolveSignIn(We))}}class qe{constructor(We){this._delegate=We,this.multiFactor=se.ao(We)}static getOrCreate(We){return qe.USER_MAP.has(We)||qe.USER_MAP.set(We,new qe(We)),qe.USER_MAP.get(We)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(We){return this._delegate.getIdTokenResult(We)}getIdToken(We){return this._delegate.getIdToken(We)}linkAndRetrieveDataWithCredential(We){return this.linkWithCredential(We)}linkWithCredential(We){var tt=this;return(0,g.Z)(function*(){return ai(tt.auth,se.Z(tt._delegate,We))})()}linkWithPhoneNumber(We,tt){var zt=this;return(0,g.Z)(function*(){return vs(zt.auth,se.l(zt._delegate,We,tt))})()}linkWithPopup(We){var tt=this;return(0,g.Z)(function*(){return ai(tt.auth,se.d(tt._delegate,We,fi))})()}linkWithRedirect(We){var tt=this;return(0,g.Z)(function*(){return yield xr(se.aE(tt.auth)),se.g(tt._delegate,We,fi)})()}reauthenticateAndRetrieveDataWithCredential(We){return this.reauthenticateWithCredential(We)}reauthenticateWithCredential(We){var tt=this;return(0,g.Z)(function*(){return ai(tt.auth,se._(tt._delegate,We))})()}reauthenticateWithPhoneNumber(We,tt){return vs(this.auth,se.r(this._delegate,We,tt))}reauthenticateWithPopup(We){return ai(this.auth,se.e(this._delegate,We,fi))}reauthenticateWithRedirect(We){var tt=this;return(0,g.Z)(function*(){return yield xr(se.aE(tt.auth)),se.h(tt._delegate,We,fi)})()}sendEmailVerification(We){return se.ab(this._delegate,We)}unlink(We){var tt=this;return(0,g.Z)(function*(){return yield se.ak(tt._delegate,We),tt})()}updateEmail(We){return se.ag(this._delegate,We)}updatePassword(We){return se.ah(this._delegate,We)}updatePhoneNumber(We){return se.u(this._delegate,We)}updateProfile(We){return se.af(this._delegate,We)}verifyBeforeUpdateEmail(We,tt){return se.ac(this._delegate,We,tt)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qe.USER_MAP=new WeakMap;const ze=se.ax;let it=(()=>{class _t{constructor(tt,zt){if(this.app=tt,zt.isInitialized())return this._delegate=zt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:_n}=tt.options;ze(_n,"invalid-api-key",{appName:tt.name}),ze(_n,"invalid-api-key",{appName:tt.name});const $n=typeof window<"u"?fi:void 0;this._delegate=zt.initialize({options:{persistence:Zt(_n,tt.name),popupRedirectResolver:$n}}),this._delegate._updateErrorMap(se.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qe.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(tt){this._delegate.languageCode=tt}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(tt){this._delegate.tenantId=tt}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(tt,zt){se.G(this._delegate,tt,zt)}applyActionCode(tt){return se.a2(this._delegate,tt)}checkActionCode(tt){return se.a3(this._delegate,tt)}confirmPasswordReset(tt,zt){return se.a1(this._delegate,tt,zt)}createUserWithEmailAndPassword(tt,zt){var _n=this;return(0,g.Z)(function*(){return ai(_n._delegate,se.a5(_n._delegate,tt,zt))})()}fetchProvidersForEmail(tt){return this.fetchSignInMethodsForEmail(tt)}fetchSignInMethodsForEmail(tt){return se.aa(this._delegate,tt)}isSignInWithEmailLink(tt){return se.a8(this._delegate,tt)}getRedirectResult(){var tt=this;return(0,g.Z)(function*(){ze(Ki(),tt._delegate,"operation-not-supported-in-this-environment");const zt=yield se.j(tt._delegate,fi);return zt?ai(tt._delegate,Promise.resolve(zt)):{credential:null,user:null}})()}addFrameworkForLogging(tt){!function di(_t,We){(0,se.aE)(_t)._logFramework(We)}(this._delegate,tt)}onAuthStateChanged(tt,zt,_n){const{next:$n,error:Yn,complete:Ne}=Ye(tt,zt,_n);return this._delegate.onAuthStateChanged($n,Yn,Ne)}onIdTokenChanged(tt,zt,_n){const{next:$n,error:Yn,complete:Ne}=Ye(tt,zt,_n);return this._delegate.onIdTokenChanged($n,Yn,Ne)}sendSignInLinkToEmail(tt,zt){return se.a7(this._delegate,tt,zt)}sendPasswordResetEmail(tt,zt){return se.a0(this._delegate,tt,zt||void 0)}setPersistence(tt){var zt=this;return(0,g.Z)(function*(){let _n;switch(function sr(_t,We){Qi(Object.values(Hi).includes(We),_t,"invalid-persistence-type"),(0,ge.b$)()?Qi(We!==Hi.SESSION,_t,"unsupported-persistence-type"):(0,ge.UG)()?Qi(We===Hi.NONE,_t,"unsupported-persistence-type"):oi()?Qi(We===Hi.NONE||We===Hi.LOCAL&&(0,ge.hl)(),_t,"unsupported-persistence-type"):Qi(We===Hi.NONE||Zi(),_t,"unsupported-persistence-type")}(zt._delegate,tt),tt){case Hi.SESSION:_n=se.a;break;case Hi.LOCAL:_n=(yield se.ay(se.i)._isAvailable())?se.i:se.b;break;case Hi.NONE:_n=se.L;break;default:return se.at("argument-error",{appName:zt._delegate.name})}return zt._delegate.setPersistence(_n)})()}signInAndRetrieveDataWithCredential(tt){return this.signInWithCredential(tt)}signInAnonymously(){return ai(this._delegate,se.X(this._delegate))}signInWithCredential(tt){return ai(this._delegate,se.Y(this._delegate,tt))}signInWithCustomToken(tt){return ai(this._delegate,se.$(this._delegate,tt))}signInWithEmailAndPassword(tt,zt){return ai(this._delegate,se.a6(this._delegate,tt,zt))}signInWithEmailLink(tt,zt){return ai(this._delegate,se.a9(this._delegate,tt,zt))}signInWithPhoneNumber(tt,zt){return vs(this._delegate,se.s(this._delegate,tt,zt))}signInWithPopup(tt){var zt=this;return(0,g.Z)(function*(){return ze(Ki(),zt._delegate,"operation-not-supported-in-this-environment"),ai(zt._delegate,se.c(zt._delegate,tt,fi))})()}signInWithRedirect(tt){var zt=this;return(0,g.Z)(function*(){return ze(Ki(),zt._delegate,"operation-not-supported-in-this-environment"),yield xr(zt._delegate),se.f(zt._delegate,tt,fi)})()}updateCurrentUser(tt){return this._delegate.updateCurrentUser(tt)}verifyPasswordResetCode(tt){return se.a4(this._delegate,tt)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _t.Persistence=Hi,_t})();function Ye(_t,We,tt){let zt=_t;"function"!=typeof _t&&({next:zt,error:We,complete:tt}=_t);const _n=zt;return{next:Yn=>_n(Yn&&qe.getOrCreate(Yn)),error:We,complete:tt}}function Zt(_t,We){const tt=function Ji(_t,We){const tt=Kn();if(!tt)return[];const zt=se.az(Jr,_t,We);switch(tt.getItem(zt)){case Hi.NONE:return[se.L];case Hi.LOCAL:return[se.i,se.a];case Hi.SESSION:return[se.a];default:return[]}}(_t,We);if(typeof self<"u"&&!tt.includes(se.i)&&tt.push(se.i),typeof window<"u")for(const zt of[se.b,se.a])tt.includes(zt)||tt.push(zt);return tt.includes(se.L)||tt.push(se.L),tt}class mn{constructor(){this.providerId="phone",this._delegate=new se.P(Ar(i.Z.auth()))}static credential(We,tt){return se.P.credential(We,tt)}verifyPhoneNumber(We,tt){return this._delegate.verifyPhoneNumber(We,tt)}unwrap(){return this._delegate}}mn.PHONE_SIGN_IN_METHOD=se.P.PHONE_SIGN_IN_METHOD,mn.PROVIDER_ID=se.P.PROVIDER_ID;const Rn=se.ax;class zi{constructor(We,tt,zt=i.Z.app()){var _n;Rn(null===(_n=zt.options)||void 0===_n?void 0:_n.apiKey,"invalid-api-key",{appName:zt.name}),this._delegate=new se.R(We,tt,zt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Hr(_t){_t.INTERNAL.registerComponent(new Oe.wA("auth-compat",We=>{const tt=We.getProvider("app-compat").getImmediate(),zt=We.getProvider("auth");return new it(tt,zt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:se.A.EMAIL_SIGNIN,PASSWORD_RESET:se.A.PASSWORD_RESET,RECOVER_EMAIL:se.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:se.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:se.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:se.A.VERIFY_EMAIL}},EmailAuthProvider:se.M,FacebookAuthProvider:se.N,GithubAuthProvider:se.T,GoogleAuthProvider:se.Q,OAuthProvider:se.U,SAMLAuthProvider:se.V,PhoneAuthProvider:mn,PhoneMultiFactorGenerator:se.m,RecaptchaVerifier:zi,TwitterAuthProvider:se.W,Auth:it,AuthCredential:se.H,Error:ge.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_t.registerVersion("@firebase/auth-compat","0.2.18")}(i.Z)},9751:(Sn,Ct,Q)=>{Q.d(Ct,{y:()=>Me});var g=Q(930),i=Q(727),se=Q(8822),ge=Q(9635),Ke=Q(2416),Ee=Q(576),Oe=Q(2806);let Me=(()=>{class Ge{constructor(dt){dt&&(this._subscribe=dt)}lift(dt){const wt=new Ge;return wt.source=this,wt.operator=dt,wt}subscribe(dt,wt,Wt){const Dt=function Se(Ge){return Ge&&Ge instanceof g.Lv||function Re(Ge){return Ge&&(0,Ee.m)(Ge.next)&&(0,Ee.m)(Ge.error)&&(0,Ee.m)(Ge.complete)}(Ge)&&(0,i.Nn)(Ge)}(dt)?dt:new g.Hp(dt,wt,Wt);return(0,Oe.x)(()=>{const{operator:bt,source:ot}=this;Dt.add(bt?bt.call(Dt,ot):ot?this._subscribe(Dt):this._trySubscribe(Dt))}),Dt}_trySubscribe(dt){try{return this._subscribe(dt)}catch(wt){dt.error(wt)}}forEach(dt,wt){return new(wt=rt(wt))((Wt,Dt)=>{const bt=new g.Hp({next:ot=>{try{dt(ot)}catch(qt){Dt(qt),bt.unsubscribe()}},error:Dt,complete:Wt});this.subscribe(bt)})}_subscribe(dt){var wt;return null===(wt=this.source)||void 0===wt?void 0:wt.subscribe(dt)}[se.L](){return this}pipe(...dt){return(0,ge.U)(dt)(this)}toPromise(dt){return new(dt=rt(dt))((wt,Wt)=>{let Dt;this.subscribe(bt=>Dt=bt,bt=>Wt(bt),()=>wt(Dt))})}}return Ge.create=kt=>new Ge(kt),Ge})();function rt(Ge){var kt;return null!==(kt=Ge??Ke.v.Promise)&&void 0!==kt?kt:Promise}},7579:(Sn,Ct,Q)=>{Q.d(Ct,{x:()=>Oe});var g=Q(9751),i=Q(727);const ge=(0,Q(3888).d)(rt=>function(){rt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=Q(8737),Ee=Q(2806);let Oe=(()=>{class rt extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Se){const Ge=new Me(this,this);return Ge.operator=Se,Ge}_throwIfClosed(){if(this.closed)throw new ge}next(Se){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ge of this.currentObservers)Ge.next(Se)}})}error(Se){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Se;const{observers:Ge}=this;for(;Ge.length;)Ge.shift().error(Se)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Se}=this;for(;Se.length;)Se.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Se;return(null===(Se=this.observers)||void 0===Se?void 0:Se.length)>0}_trySubscribe(Se){return this._throwIfClosed(),super._trySubscribe(Se)}_subscribe(Se){return this._throwIfClosed(),this._checkFinalizedStatuses(Se),this._innerSubscribe(Se)}_innerSubscribe(Se){const{hasError:Ge,isStopped:kt,observers:dt}=this;return Ge||kt?i.Lc:(this.currentObservers=null,dt.push(Se),new i.w0(()=>{this.currentObservers=null,(0,Ke.P)(dt,Se)}))}_checkFinalizedStatuses(Se){const{hasError:Ge,thrownError:kt,isStopped:dt}=this;Ge?Se.error(kt):dt&&Se.complete()}asObservable(){const Se=new g.y;return Se.source=this,Se}}return rt.create=(Re,Se)=>new Me(Re,Se),rt})();class Me extends Oe{constructor(Re,Se){super(),this.destination=Re,this.source=Se}next(Re){var Se,Ge;null===(Ge=null===(Se=this.destination)||void 0===Se?void 0:Se.next)||void 0===Ge||Ge.call(Se,Re)}error(Re){var Se,Ge;null===(Ge=null===(Se=this.destination)||void 0===Se?void 0:Se.error)||void 0===Ge||Ge.call(Se,Re)}complete(){var Re,Se;null===(Se=null===(Re=this.destination)||void 0===Re?void 0:Re.complete)||void 0===Se||Se.call(Re)}_subscribe(Re){var Se,Ge;return null!==(Ge=null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(Re))&&void 0!==Ge?Ge:i.Lc}}},930:(Sn,Ct,Q)=>{Q.d(Ct,{Hp:()=>Wt,Lv:()=>Ge});var g=Q(576),i=Q(727),se=Q(2416),ge=Q(7849),Ke=Q(5032);const Ee=rt("C",void 0,void 0);function rt(Be,we,nt){return{kind:Be,value:we,error:nt}}var Re=Q(3410),Se=Q(2806);class Ge extends i.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,i.Nn)(we)&&we.add(this)):this.destination=qt}static create(we,nt,Xe){return new Wt(we,nt,Xe)}next(we){this.isStopped?ot(function Me(Be){return rt("N",Be,void 0)}(we),this):this._next(we)}error(we){this.isStopped?ot(function Oe(Be){return rt("E",void 0,Be)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?ot(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const kt=Function.prototype.bind;function dt(Be,we){return kt.call(Be,we)}class wt{constructor(we){this.partialObserver=we}next(we){const{partialObserver:nt}=this;if(nt.next)try{nt.next(we)}catch(Xe){Dt(Xe)}}error(we){const{partialObserver:nt}=this;if(nt.error)try{nt.error(we)}catch(Xe){Dt(Xe)}else Dt(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(nt){Dt(nt)}}}class Wt extends Ge{constructor(we,nt,Xe){let xe;if(super(),(0,g.m)(we)||!we)xe={next:we??void 0,error:nt??void 0,complete:Xe??void 0};else{let ee;this&&se.v.useDeprecatedNextContext?(ee=Object.create(we),ee.unsubscribe=()=>this.unsubscribe(),xe={next:we.next&&dt(we.next,ee),error:we.error&&dt(we.error,ee),complete:we.complete&&dt(we.complete,ee)}):xe=we}this.destination=new wt(xe)}}function Dt(Be){se.v.useDeprecatedSynchronousErrorHandling?(0,Se.O)(Be):(0,ge.h)(Be)}function ot(Be,we){const{onStoppedNotification:nt}=se.v;nt&&Re.z.setTimeout(()=>nt(Be,we))}const qt={closed:!0,next:Ke.Z,error:function bt(Be){throw Be},complete:Ke.Z}},727:(Sn,Ct,Q)=>{Q.d(Ct,{Lc:()=>Ee,w0:()=>Ke,Nn:()=>Oe});var g=Q(576);const se=(0,Q(3888).d)(rt=>function(Se){rt(this),this.message=Se?`${Se.length} errors occurred during unsubscription:\n${Se.map((Ge,kt)=>`${kt+1}) ${Ge.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Se});var ge=Q(8737);class Ke{constructor(Re){this.initialTeardown=Re,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Re;if(!this.closed){this.closed=!0;const{_parentage:Se}=this;if(Se)if(this._parentage=null,Array.isArray(Se))for(const dt of Se)dt.remove(this);else Se.remove(this);const{initialTeardown:Ge}=this;if((0,g.m)(Ge))try{Ge()}catch(dt){Re=dt instanceof se?dt.errors:[dt]}const{_finalizers:kt}=this;if(kt){this._finalizers=null;for(const dt of kt)try{Me(dt)}catch(wt){Re=Re??[],wt instanceof se?Re=[...Re,...wt.errors]:Re.push(wt)}}if(Re)throw new se(Re)}}add(Re){var Se;if(Re&&Re!==this)if(this.closed)Me(Re);else{if(Re instanceof Ke){if(Re.closed||Re._hasParent(this))return;Re._addParent(this)}(this._finalizers=null!==(Se=this._finalizers)&&void 0!==Se?Se:[]).push(Re)}}_hasParent(Re){const{_parentage:Se}=this;return Se===Re||Array.isArray(Se)&&Se.includes(Re)}_addParent(Re){const{_parentage:Se}=this;this._parentage=Array.isArray(Se)?(Se.push(Re),Se):Se?[Se,Re]:Re}_removeParent(Re){const{_parentage:Se}=this;Se===Re?this._parentage=null:Array.isArray(Se)&&(0,ge.P)(Se,Re)}remove(Re){const{_finalizers:Se}=this;Se&&(0,ge.P)(Se,Re),Re instanceof Ke&&Re._removeParent(this)}}Ke.EMPTY=(()=>{const rt=new Ke;return rt.closed=!0,rt})();const Ee=Ke.EMPTY;function Oe(rt){return rt instanceof Ke||rt&&"closed"in rt&&(0,g.m)(rt.remove)&&(0,g.m)(rt.add)&&(0,g.m)(rt.unsubscribe)}function Me(rt){(0,g.m)(rt)?rt():rt.unsubscribe()}},2416:(Sn,Ct,Q)=>{Q.d(Ct,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Sn,Ct,Q)=>{Q.d(Ct,{a:()=>Re});var g=Q(9751),i=Q(4742),se=Q(8996),ge=Q(4671),Ke=Q(3268),Ee=Q(7669),Oe=Q(1810),Me=Q(5403),rt=Q(9672);function Re(...kt){const dt=(0,Ee.yG)(kt),wt=(0,Ee.jO)(kt),{args:Wt,keys:Dt}=(0,i.D)(kt);if(0===Wt.length)return(0,se.D)([],dt);const bt=new g.y(function Se(kt,dt,wt=ge.y){return Wt=>{Ge(dt,()=>{const{length:Dt}=kt,bt=new Array(Dt);let ot=Dt,qt=Dt;for(let Be=0;Be<Dt;Be++)Ge(dt,()=>{const we=(0,se.D)(kt[Be],dt);let nt=!1;we.subscribe((0,Me.x)(Wt,Xe=>{bt[Be]=Xe,nt||(nt=!0,qt--),qt||Wt.next(wt(bt.slice()))},()=>{--ot||Wt.complete()}))},Wt)},Wt)}}(Wt,dt,Dt?ot=>(0,Oe.n)(Dt,ot):ge.y));return wt?bt.pipe((0,Ke.Z)(wt)):bt}function Ge(kt,dt,wt){kt?(0,rt.f)(wt,kt,dt):dt()}},7272:(Sn,Ct,Q)=>{Q.d(Ct,{z:()=>Ke});var g=Q(8189),se=Q(7669),ge=Q(8996);function Ke(...Ee){return function i(){return(0,g.J)(1)}()((0,ge.D)(Ee,(0,se.yG)(Ee)))}},515:(Sn,Ct,Q)=>{Q.d(Ct,{E:()=>i});const i=new(Q(9751).y)(Ke=>Ke.complete())},4128:(Sn,Ct,Q)=>{Q.d(Ct,{D:()=>Me});var g=Q(9751),i=Q(4742),se=Q(8421),ge=Q(7669),Ke=Q(5403),Ee=Q(3268),Oe=Q(1810);function Me(...rt){const Re=(0,ge.jO)(rt),{args:Se,keys:Ge}=(0,i.D)(rt),kt=new g.y(dt=>{const{length:wt}=Se;if(!wt)return void dt.complete();const Wt=new Array(wt);let Dt=wt,bt=wt;for(let ot=0;ot<wt;ot++){let qt=!1;(0,se.Xf)(Se[ot]).subscribe((0,Ke.x)(dt,Be=>{qt||(qt=!0,bt--),Wt[ot]=Be},()=>Dt--,void 0,()=>{(!Dt||!qt)&&(bt||dt.next(Ge?(0,Oe.n)(Ge,Wt):Wt),dt.complete())}))}});return Re?kt.pipe((0,Ee.Z)(Re)):kt}},8996:(Sn,Ct,Q)=>{Q.d(Ct,{D:()=>we});var g=Q(8421),i=Q(5363),se=Q(9468),Ee=Q(9751),Me=Q(2202),rt=Q(576),Re=Q(9672);function Ge(nt,Xe){if(!nt)throw new Error("Iterable cannot be null");return new Ee.y(xe=>{(0,Re.f)(xe,Xe,()=>{const ee=nt[Symbol.asyncIterator]();(0,Re.f)(xe,Xe,()=>{ee.next().then(pt=>{pt.done?xe.complete():xe.next(pt.value)})},0,!0)})})}var kt=Q(3670),dt=Q(8239),wt=Q(1144),Wt=Q(6495),Dt=Q(2206),bt=Q(4532),ot=Q(3260);function we(nt,Xe){return Xe?function Be(nt,Xe){if(null!=nt){if((0,kt.c)(nt))return function ge(nt,Xe){return(0,g.Xf)(nt).pipe((0,se.R)(Xe),(0,i.Q)(Xe))}(nt,Xe);if((0,wt.z)(nt))return function Oe(nt,Xe){return new Ee.y(xe=>{let ee=0;return Xe.schedule(function(){ee===nt.length?xe.complete():(xe.next(nt[ee++]),xe.closed||this.schedule())})})}(nt,Xe);if((0,dt.t)(nt))return function Ke(nt,Xe){return(0,g.Xf)(nt).pipe((0,se.R)(Xe),(0,i.Q)(Xe))}(nt,Xe);if((0,Dt.D)(nt))return Ge(nt,Xe);if((0,Wt.T)(nt))return function Se(nt,Xe){return new Ee.y(xe=>{let ee;return(0,Re.f)(xe,Xe,()=>{ee=nt[Me.h](),(0,Re.f)(xe,Xe,()=>{let pt,Ue;try{({value:pt,done:Ue}=ee.next())}catch(st){return void xe.error(st)}Ue?xe.complete():xe.next(pt)},0,!0)}),()=>(0,rt.m)(ee?.return)&&ee.return()})}(nt,Xe);if((0,ot.L)(nt))return function qt(nt,Xe){return Ge((0,ot.Q)(nt),Xe)}(nt,Xe)}throw(0,bt.z)(nt)}(nt,Xe):(0,g.Xf)(nt)}},8421:(Sn,Ct,Q)=>{Q.d(Ct,{Xf:()=>kt});var g=Q(655),i=Q(1144),se=Q(8239),ge=Q(9751),Ke=Q(3670),Ee=Q(2206),Oe=Q(4532),Me=Q(6495),rt=Q(3260),Re=Q(576),Se=Q(7849),Ge=Q(8822);function kt(Be){if(Be instanceof ge.y)return Be;if(null!=Be){if((0,Ke.c)(Be))return function dt(Be){return new ge.y(we=>{const nt=Be[Ge.L]();if((0,Re.m)(nt.subscribe))return nt.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Be);if((0,i.z)(Be))return function wt(Be){return new ge.y(we=>{for(let nt=0;nt<Be.length&&!we.closed;nt++)we.next(Be[nt]);we.complete()})}(Be);if((0,se.t)(Be))return function Wt(Be){return new ge.y(we=>{Be.then(nt=>{we.closed||(we.next(nt),we.complete())},nt=>we.error(nt)).then(null,Se.h)})}(Be);if((0,Ee.D)(Be))return bt(Be);if((0,Me.T)(Be))return function Dt(Be){return new ge.y(we=>{for(const nt of Be)if(we.next(nt),we.closed)return;we.complete()})}(Be);if((0,rt.L)(Be))return function ot(Be){return bt((0,rt.Q)(Be))}(Be)}throw(0,Oe.z)(Be)}function bt(Be){return new ge.y(we=>{(function qt(Be,we){var nt,Xe,xe,ee;return(0,g.mG)(this,void 0,void 0,function*(){try{for(nt=(0,g.KL)(Be);!(Xe=yield nt.next()).done;)if(we.next(Xe.value),we.closed)return}catch(pt){xe={error:pt}}finally{try{Xe&&!Xe.done&&(ee=nt.return)&&(yield ee.call(nt))}finally{if(xe)throw xe.error}}we.complete()})})(Be,we).catch(nt=>we.error(nt))})}},6451:(Sn,Ct,Q)=>{Q.d(Ct,{T:()=>Ee});var g=Q(8189),i=Q(8421),se=Q(515),ge=Q(7669),Ke=Q(8996);function Ee(...Oe){const Me=(0,ge.yG)(Oe),rt=(0,ge._6)(Oe,1/0),Re=Oe;return Re.length?1===Re.length?(0,i.Xf)(Re[0]):(0,g.J)(rt)((0,Ke.D)(Re,Me)):se.E}},9646:(Sn,Ct,Q)=>{Q.d(Ct,{of:()=>se});var g=Q(7669),i=Q(8996);function se(...ge){const Ke=(0,g.yG)(ge);return(0,i.D)(ge,Ke)}},2843:(Sn,Ct,Q)=>{Q.d(Ct,{_:()=>se});var g=Q(9751),i=Q(576);function se(ge,Ke){const Ee=(0,i.m)(ge)?ge:()=>ge,Oe=Me=>Me.error(Ee());return new g.y(Ke?Me=>Ke.schedule(Oe,0,Me):Oe)}},5403:(Sn,Ct,Q)=>{Q.d(Ct,{x:()=>i});var g=Q(930);function i(ge,Ke,Ee,Oe,Me){return new se(ge,Ke,Ee,Oe,Me)}class se extends g.Lv{constructor(Ke,Ee,Oe,Me,rt,Re){super(Ke),this.onFinalize=rt,this.shouldUnsubscribe=Re,this._next=Ee?function(Se){try{Ee(Se)}catch(Ge){Ke.error(Ge)}}:super._next,this._error=Me?function(Se){try{Me(Se)}catch(Ge){Ke.error(Ge)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(Se){Ke.error(Se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ke;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(Ke=this.onFinalize)||void 0===Ke||Ke.call(this))}}}},262:(Sn,Ct,Q)=>{Q.d(Ct,{K:()=>ge});var g=Q(8421),i=Q(5403),se=Q(4482);function ge(Ke){return(0,se.e)((Ee,Oe)=>{let Re,Me=null,rt=!1;Me=Ee.subscribe((0,i.x)(Oe,void 0,void 0,Se=>{Re=(0,g.Xf)(Ke(Se,ge(Ke)(Ee))),Me?(Me.unsubscribe(),Me=null,Re.subscribe(Oe)):rt=!0})),rt&&(Me.unsubscribe(),Me=null,Re.subscribe(Oe))})}},4351:(Sn,Ct,Q)=>{Q.d(Ct,{b:()=>se});var g=Q(5577),i=Q(576);function se(ge,Ke){return(0,i.m)(Ke)?(0,g.z)(ge,Ke,1):(0,g.z)(ge,1)}},8372:(Sn,Ct,Q)=>{Q.d(Ct,{b:()=>ge});var g=Q(4986),i=Q(4482),se=Q(5403);function ge(Ke,Ee=g.z){return(0,i.e)((Oe,Me)=>{let rt=null,Re=null,Se=null;const Ge=()=>{if(rt){rt.unsubscribe(),rt=null;const dt=Re;Re=null,Me.next(dt)}};function kt(){const dt=Se+Ke,wt=Ee.now();if(wt<dt)return rt=this.schedule(void 0,dt-wt),void Me.add(rt);Ge()}Oe.subscribe((0,se.x)(Me,dt=>{Re=dt,Se=Ee.now(),rt||(rt=Ee.schedule(kt,Ke),Me.add(rt))},()=>{Ge(),Me.complete()},void 0,()=>{Re=rt=null}))})}},6590:(Sn,Ct,Q)=>{Q.d(Ct,{d:()=>se});var g=Q(4482),i=Q(5403);function se(ge){return(0,g.e)((Ke,Ee)=>{let Oe=!1;Ke.subscribe((0,i.x)(Ee,Me=>{Oe=!0,Ee.next(Me)},()=>{Oe||Ee.next(ge),Ee.complete()}))})}},1884:(Sn,Ct,Q)=>{Q.d(Ct,{x:()=>ge});var g=Q(4671),i=Q(4482),se=Q(5403);function ge(Ee,Oe=g.y){return Ee=Ee??Ke,(0,i.e)((Me,rt)=>{let Re,Se=!0;Me.subscribe((0,se.x)(rt,Ge=>{const kt=Oe(Ge);(Se||!Ee(Re,kt))&&(Se=!1,Re=kt,rt.next(Ge))}))})}function Ke(Ee,Oe){return Ee===Oe}},9300:(Sn,Ct,Q)=>{Q.d(Ct,{h:()=>se});var g=Q(4482),i=Q(5403);function se(ge,Ke){return(0,g.e)((Ee,Oe)=>{let Me=0;Ee.subscribe((0,i.x)(Oe,rt=>ge.call(Ke,rt,Me++)&&Oe.next(rt)))})}},8746:(Sn,Ct,Q)=>{Q.d(Ct,{x:()=>i});var g=Q(4482);function i(se){return(0,g.e)((ge,Ke)=>{try{ge.subscribe(Ke)}finally{Ke.add(se)}})}},590:(Sn,Ct,Q)=>{Q.d(Ct,{P:()=>Oe});var g=Q(6805),i=Q(9300),se=Q(5698),ge=Q(6590),Ke=Q(8068),Ee=Q(4671);function Oe(Me,rt){const Re=arguments.length>=2;return Se=>Se.pipe(Me?(0,i.h)((Ge,kt)=>Me(Ge,kt,Se)):Ee.y,(0,se.q)(1),Re?(0,ge.d)(rt):(0,Ke.T)(()=>new g.K))}},4004:(Sn,Ct,Q)=>{Q.d(Ct,{U:()=>se});var g=Q(4482),i=Q(5403);function se(ge,Ke){return(0,g.e)((Ee,Oe)=>{let Me=0;Ee.subscribe((0,i.x)(Oe,rt=>{Oe.next(ge.call(Ke,rt,Me++))}))})}},8189:(Sn,Ct,Q)=>{Q.d(Ct,{J:()=>se});var g=Q(5577),i=Q(4671);function se(ge=1/0){return(0,g.z)(i.y,ge)}},5577:(Sn,Ct,Q)=>{Q.d(Ct,{z:()=>Me});var g=Q(4004),i=Q(8421),se=Q(4482),ge=Q(9672),Ke=Q(5403),Oe=Q(576);function Me(rt,Re,Se=1/0){return(0,Oe.m)(Re)?Me((Ge,kt)=>(0,g.U)((dt,wt)=>Re(Ge,dt,kt,wt))((0,i.Xf)(rt(Ge,kt))),Se):("number"==typeof Re&&(Se=Re),(0,se.e)((Ge,kt)=>function Ee(rt,Re,Se,Ge,kt,dt,wt,Wt){const Dt=[];let bt=0,ot=0,qt=!1;const Be=()=>{qt&&!Dt.length&&!bt&&Re.complete()},we=Xe=>bt<Ge?nt(Xe):Dt.push(Xe),nt=Xe=>{dt&&Re.next(Xe),bt++;let xe=!1;(0,i.Xf)(Se(Xe,ot++)).subscribe((0,Ke.x)(Re,ee=>{kt?.(ee),dt?we(ee):Re.next(ee)},()=>{xe=!0},void 0,()=>{if(xe)try{for(bt--;Dt.length&&bt<Ge;){const ee=Dt.shift();wt?(0,ge.f)(Re,wt,()=>nt(ee)):nt(ee)}Be()}catch(ee){Re.error(ee)}}))};return rt.subscribe((0,Ke.x)(Re,we,()=>{qt=!0,Be()})),()=>{Wt?.()}}(Ge,kt,rt,Se)))}},5363:(Sn,Ct,Q)=>{Q.d(Ct,{Q:()=>ge});var g=Q(9672),i=Q(4482),se=Q(5403);function ge(Ke,Ee=0){return(0,i.e)((Oe,Me)=>{Oe.subscribe((0,se.x)(Me,rt=>(0,g.f)(Me,Ke,()=>Me.next(rt),Ee),()=>(0,g.f)(Me,Ke,()=>Me.complete(),Ee),rt=>(0,g.f)(Me,Ke,()=>Me.error(rt),Ee)))})}},5026:(Sn,Ct,Q)=>{Q.d(Ct,{R:()=>ge});var g=Q(4482),i=Q(5403);function se(Ke,Ee,Oe,Me,rt){return(Re,Se)=>{let Ge=Oe,kt=Ee,dt=0;Re.subscribe((0,i.x)(Se,wt=>{const Wt=dt++;kt=Ge?Ke(kt,wt,Wt):(Ge=!0,wt),Me&&Se.next(kt)},rt&&(()=>{Ge&&Se.next(kt),Se.complete()})))}}function ge(Ke,Ee){return(0,g.e)(se(Ke,Ee,arguments.length>=2,!0))}},3099:(Sn,Ct,Q)=>{Q.d(Ct,{B:()=>Ke});var g=Q(8421),i=Q(7579),se=Q(930),ge=Q(4482);function Ke(Oe={}){const{connector:Me=(()=>new i.x),resetOnError:rt=!0,resetOnComplete:Re=!0,resetOnRefCountZero:Se=!0}=Oe;return Ge=>{let kt,dt,wt,Wt=0,Dt=!1,bt=!1;const ot=()=>{dt?.unsubscribe(),dt=void 0},qt=()=>{ot(),kt=wt=void 0,Dt=bt=!1},Be=()=>{const we=kt;qt(),we?.unsubscribe()};return(0,ge.e)((we,nt)=>{Wt++,!bt&&!Dt&&ot();const Xe=wt=wt??Me();nt.add(()=>{Wt--,0===Wt&&!bt&&!Dt&&(dt=Ee(Be,Se))}),Xe.subscribe(nt),!kt&&Wt>0&&(kt=new se.Hp({next:xe=>Xe.next(xe),error:xe=>{bt=!0,ot(),dt=Ee(qt,rt,xe),Xe.error(xe)},complete:()=>{Dt=!0,ot(),dt=Ee(qt,Re),Xe.complete()}}),(0,g.Xf)(we).subscribe(kt))})(Ge)}}function Ee(Oe,Me,...rt){if(!0===Me)return void Oe();if(!1===Me)return;const Re=new se.Hp({next:()=>{Re.unsubscribe(),Oe()}});return Me(...rt).subscribe(Re)}},8675:(Sn,Ct,Q)=>{Q.d(Ct,{O:()=>ge});var g=Q(7272),i=Q(7669),se=Q(4482);function ge(...Ke){const Ee=(0,i.yG)(Ke);return(0,se.e)((Oe,Me)=>{(Ee?(0,g.z)(Ke,Oe,Ee):(0,g.z)(Ke,Oe)).subscribe(Me)})}},9468:(Sn,Ct,Q)=>{Q.d(Ct,{R:()=>i});var g=Q(4482);function i(se,ge=0){return(0,g.e)((Ke,Ee)=>{Ee.add(se.schedule(()=>Ke.subscribe(Ee),ge))})}},3900:(Sn,Ct,Q)=>{Q.d(Ct,{w:()=>ge});var g=Q(8421),i=Q(4482),se=Q(5403);function ge(Ke,Ee){return(0,i.e)((Oe,Me)=>{let rt=null,Re=0,Se=!1;const Ge=()=>Se&&!rt&&Me.complete();Oe.subscribe((0,se.x)(Me,kt=>{rt?.unsubscribe();let dt=0;const wt=Re++;(0,g.Xf)(Ke(kt,wt)).subscribe(rt=(0,se.x)(Me,Wt=>Me.next(Ee?Ee(kt,Wt,wt,dt++):Wt),()=>{rt=null,Ge()}))},()=>{Se=!0,Ge()}))})}},5698:(Sn,Ct,Q)=>{Q.d(Ct,{q:()=>ge});var g=Q(515),i=Q(4482),se=Q(5403);function ge(Ke){return Ke<=0?()=>g.E:(0,i.e)((Ee,Oe)=>{let Me=0;Ee.subscribe((0,se.x)(Oe,rt=>{++Me<=Ke&&(Oe.next(rt),Ke<=Me&&Oe.complete())}))})}},8505:(Sn,Ct,Q)=>{Q.d(Ct,{b:()=>Ke});var g=Q(576),i=Q(4482),se=Q(5403),ge=Q(4671);function Ke(Ee,Oe,Me){const rt=(0,g.m)(Ee)||Oe||Me?{next:Ee,error:Oe,complete:Me}:Ee;return rt?(0,i.e)((Re,Se)=>{var Ge;null===(Ge=rt.subscribe)||void 0===Ge||Ge.call(rt);let kt=!0;Re.subscribe((0,se.x)(Se,dt=>{var wt;null===(wt=rt.next)||void 0===wt||wt.call(rt,dt),Se.next(dt)},()=>{var dt;kt=!1,null===(dt=rt.complete)||void 0===dt||dt.call(rt),Se.complete()},dt=>{var wt;kt=!1,null===(wt=rt.error)||void 0===wt||wt.call(rt,dt),Se.error(dt)},()=>{var dt,wt;kt&&(null===(dt=rt.unsubscribe)||void 0===dt||dt.call(rt)),null===(wt=rt.finalize)||void 0===wt||wt.call(rt)}))}):ge.y}},8068:(Sn,Ct,Q)=>{Q.d(Ct,{T:()=>ge});var g=Q(6805),i=Q(4482),se=Q(5403);function ge(Ee=Ke){return(0,i.e)((Oe,Me)=>{let rt=!1;Oe.subscribe((0,se.x)(Me,Re=>{rt=!0,Me.next(Re)},()=>rt?Me.complete():Me.error(Ee())))})}function Ke(){return new g.K}},4408:(Sn,Ct,Q)=>{Q.d(Ct,{o:()=>Ke});var g=Q(727);class i extends g.w0{constructor(Oe,Me){super()}schedule(Oe,Me=0){return this}}const se={setInterval(Ee,Oe,...Me){const{delegate:rt}=se;return rt?.setInterval?rt.setInterval(Ee,Oe,...Me):setInterval(Ee,Oe,...Me)},clearInterval(Ee){const{delegate:Oe}=se;return(Oe?.clearInterval||clearInterval)(Ee)},delegate:void 0};var ge=Q(8737);class Ke extends i{constructor(Oe,Me){super(Oe,Me),this.scheduler=Oe,this.work=Me,this.pending=!1}schedule(Oe,Me=0){if(this.closed)return this;this.state=Oe;const rt=this.id,Re=this.scheduler;return null!=rt&&(this.id=this.recycleAsyncId(Re,rt,Me)),this.pending=!0,this.delay=Me,this.id=this.id||this.requestAsyncId(Re,this.id,Me),this}requestAsyncId(Oe,Me,rt=0){return se.setInterval(Oe.flush.bind(Oe,this),rt)}recycleAsyncId(Oe,Me,rt=0){if(null!=rt&&this.delay===rt&&!1===this.pending)return Me;se.clearInterval(Me)}execute(Oe,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const rt=this._execute(Oe,Me);if(rt)return rt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,Me){let Re,rt=!1;try{this.work(Oe)}catch(Se){rt=!0,Re=Se||new Error("Scheduled action threw falsy error")}if(rt)return this.unsubscribe(),Re}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:Me}=this,{actions:rt}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ge.P)(rt,this),null!=Oe&&(this.id=this.recycleAsyncId(Me,Oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Sn,Ct,Q)=>{Q.d(Ct,{v:()=>se});var g=Q(6063);class i{constructor(Ke,Ee=i.now){this.schedulerActionCtor=Ke,this.now=Ee}schedule(Ke,Ee=0,Oe){return new this.schedulerActionCtor(this,Ke).schedule(Oe,Ee)}}i.now=g.l.now;class se extends i{constructor(Ke,Ee=i.now){super(Ke,Ee),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Ke){const{actions:Ee}=this;if(this._active)return void Ee.push(Ke);let Oe;this._active=!0;do{if(Oe=Ke.execute(Ke.state,Ke.delay))break}while(Ke=Ee.shift());if(this._active=!1,Oe){for(;Ke=Ee.shift();)Ke.unsubscribe();throw Oe}}}},4986:(Sn,Ct,Q)=>{Q.d(Ct,{z:()=>se});var g=Q(4408);const se=new(Q(7565).v)(g.o)},6063:(Sn,Ct,Q)=>{Q.d(Ct,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Sn,Ct,Q)=>{Q.d(Ct,{z:()=>g});const g={setTimeout(i,se,...ge){const{delegate:Ke}=g;return Ke?.setTimeout?Ke.setTimeout(i,se,...ge):setTimeout(i,se,...ge)},clearTimeout(i){const{delegate:se}=g;return(se?.clearTimeout||clearTimeout)(i)},delegate:void 0}},2202:(Sn,Ct,Q)=>{Q.d(Ct,{h:()=>i});const i=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Sn,Ct,Q)=>{Q.d(Ct,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Sn,Ct,Q)=>{Q.d(Ct,{K:()=>i});const i=(0,Q(3888).d)(se=>function(){se(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Sn,Ct,Q)=>{Q.d(Ct,{_6:()=>Ee,jO:()=>ge,yG:()=>Ke});var g=Q(576);function se(Oe){return Oe[Oe.length-1]}function ge(Oe){return(0,g.m)(se(Oe))?Oe.pop():void 0}function Ke(Oe){return function i(Oe){return Oe&&(0,g.m)(Oe.schedule)}(se(Oe))?Oe.pop():void 0}function Ee(Oe,Me){return"number"==typeof se(Oe)?Oe.pop():Me}},4742:(Sn,Ct,Q)=>{Q.d(Ct,{D:()=>Ke});const{isArray:g}=Array,{getPrototypeOf:i,prototype:se,keys:ge}=Object;function Ke(Oe){if(1===Oe.length){const Me=Oe[0];if(g(Me))return{args:Me,keys:null};if(function Ee(Oe){return Oe&&"object"==typeof Oe&&i(Oe)===se}(Me)){const rt=ge(Me);return{args:rt.map(Re=>Me[Re]),keys:rt}}}return{args:Oe,keys:null}}},8737:(Sn,Ct,Q)=>{function g(i,se){if(i){const ge=i.indexOf(se);0<=ge&&i.splice(ge,1)}}Q.d(Ct,{P:()=>g})},3888:(Sn,Ct,Q)=>{function g(i){const ge=i(Ke=>{Error.call(Ke),Ke.stack=(new Error).stack});return ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge,ge}Q.d(Ct,{d:()=>g})},1810:(Sn,Ct,Q)=>{function g(i,se){return i.reduce((ge,Ke,Ee)=>(ge[Ke]=se[Ee],ge),{})}Q.d(Ct,{n:()=>g})},2806:(Sn,Ct,Q)=>{Q.d(Ct,{O:()=>ge,x:()=>se});var g=Q(2416);let i=null;function se(Ke){if(g.v.useDeprecatedSynchronousErrorHandling){const Ee=!i;if(Ee&&(i={errorThrown:!1,error:null}),Ke(),Ee){const{errorThrown:Oe,error:Me}=i;if(i=null,Oe)throw Me}}else Ke()}function ge(Ke){g.v.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=Ke)}},9672:(Sn,Ct,Q)=>{function g(i,se,ge,Ke=0,Ee=!1){const Oe=se.schedule(function(){ge(),Ee?i.add(this.schedule(null,Ke)):this.unsubscribe()},Ke);if(i.add(Oe),!Ee)return Oe}Q.d(Ct,{f:()=>g})},4671:(Sn,Ct,Q)=>{function g(i){return i}Q.d(Ct,{y:()=>g})},1144:(Sn,Ct,Q)=>{Q.d(Ct,{z:()=>g});const g=i=>i&&"number"==typeof i.length&&"function"!=typeof i},2206:(Sn,Ct,Q)=>{Q.d(Ct,{D:()=>i});var g=Q(576);function i(se){return Symbol.asyncIterator&&(0,g.m)(se?.[Symbol.asyncIterator])}},576:(Sn,Ct,Q)=>{function g(i){return"function"==typeof i}Q.d(Ct,{m:()=>g})},3670:(Sn,Ct,Q)=>{Q.d(Ct,{c:()=>se});var g=Q(8822),i=Q(576);function se(ge){return(0,i.m)(ge[g.L])}},6495:(Sn,Ct,Q)=>{Q.d(Ct,{T:()=>se});var g=Q(2202),i=Q(576);function se(ge){return(0,i.m)(ge?.[g.h])}},8239:(Sn,Ct,Q)=>{Q.d(Ct,{t:()=>i});var g=Q(576);function i(se){return(0,g.m)(se?.then)}},3260:(Sn,Ct,Q)=>{Q.d(Ct,{L:()=>ge,Q:()=>se});var g=Q(655),i=Q(576);function se(Ke){return(0,g.FC)(this,arguments,function*(){const Oe=Ke.getReader();try{for(;;){const{value:Me,done:rt}=yield(0,g.qq)(Oe.read());if(rt)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(Me)}}finally{Oe.releaseLock()}})}function ge(Ke){return(0,i.m)(Ke?.getReader)}},4482:(Sn,Ct,Q)=>{Q.d(Ct,{A:()=>i,e:()=>se});var g=Q(576);function i(ge){return(0,g.m)(ge?.lift)}function se(ge){return Ke=>{if(i(Ke))return Ke.lift(function(Ee){try{return ge(Ee,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Sn,Ct,Q)=>{Q.d(Ct,{Z:()=>ge});var g=Q(4004);const{isArray:i}=Array;function ge(Ke){return(0,g.U)(Ee=>function se(Ke,Ee){return i(Ee)?Ke(...Ee):Ke(Ee)}(Ke,Ee))}},5032:(Sn,Ct,Q)=>{function g(){}Q.d(Ct,{Z:()=>g})},9635:(Sn,Ct,Q)=>{Q.d(Ct,{U:()=>se,z:()=>i});var g=Q(4671);function i(...ge){return se(ge)}function se(ge){return 0===ge.length?g.y:1===ge.length?ge[0]:function(Ee){return ge.reduce((Oe,Me)=>Me(Oe),Ee)}}},7849:(Sn,Ct,Q)=>{Q.d(Ct,{h:()=>se});var g=Q(2416),i=Q(3410);function se(ge){i.z.setTimeout(()=>{const{onUnhandledError:Ke}=g.v;if(!Ke)throw ge;Ke(ge)})}},4532:(Sn,Ct,Q)=>{function g(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Q.d(Ct,{z:()=>g})},655:(Sn,Ct,Q)=>{function ge(Ue,st){var Et={};for(var yt in Ue)Object.prototype.hasOwnProperty.call(Ue,yt)&&st.indexOf(yt)<0&&(Et[yt]=Ue[yt]);if(null!=Ue&&"function"==typeof Object.getOwnPropertySymbols){var Qt=0;for(yt=Object.getOwnPropertySymbols(Ue);Qt<yt.length;Qt++)st.indexOf(yt[Qt])<0&&Object.prototype.propertyIsEnumerable.call(Ue,yt[Qt])&&(Et[yt[Qt]]=Ue[yt[Qt]])}return Et}function Me(Ue,st,Et,yt){return new(Et||(Et=Promise))(function(rn,gn){function kn(di){try{Gt(yt.next(di))}catch(Un){gn(Un)}}function Pn(di){try{Gt(yt.throw(di))}catch(Un){gn(Un)}}function Gt(di){di.done?rn(di.value):function Qt(rn){return rn instanceof Et?rn:new Et(function(gn){gn(rn)})}(di.value).then(kn,Pn)}Gt((yt=yt.apply(Ue,st||[])).next())})}function Dt(Ue){return this instanceof Dt?(this.v=Ue,this):new Dt(Ue)}function bt(Ue,st,Et){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qt,yt=Et.apply(Ue,st||[]),rn=[];return Qt={},gn("next"),gn("throw"),gn("return"),Qt[Symbol.asyncIterator]=function(){return this},Qt;function gn(xt){yt[xt]&&(Qt[xt]=function(Ut){return new Promise(function(He,vt){rn.push([xt,Ut,He,vt])>1||kn(xt,Ut)})})}function kn(xt,Ut){try{!function Pn(xt){xt.value instanceof Dt?Promise.resolve(xt.value.v).then(Gt,di):Un(rn[0][2],xt)}(yt[xt](Ut))}catch(He){Un(rn[0][3],He)}}function Gt(xt){kn("next",xt)}function di(xt){kn("throw",xt)}function Un(xt,Ut){xt(Ut),rn.shift(),rn.length&&kn(rn[0][0],rn[0][1])}}function qt(Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Et,st=Ue[Symbol.asyncIterator];return st?st.call(Ue):(Ue=function Ge(Ue){var st="function"==typeof Symbol&&Symbol.iterator,Et=st&&Ue[st],yt=0;if(Et)return Et.call(Ue);if(Ue&&"number"==typeof Ue.length)return{next:function(){return Ue&&yt>=Ue.length&&(Ue=void 0),{value:Ue&&Ue[yt++],done:!Ue}}};throw new TypeError(st?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ue),Et={},yt("next"),yt("throw"),yt("return"),Et[Symbol.asyncIterator]=function(){return this},Et);function yt(rn){Et[rn]=Ue[rn]&&function(gn){return new Promise(function(kn,Pn){!function Qt(rn,gn,kn,Pn){Promise.resolve(Pn).then(function(Gt){rn({value:Gt,done:kn})},gn)}(kn,Pn,(gn=Ue[rn](gn)).done,gn.value)})}}}Q.d(Ct,{FC:()=>bt,KL:()=>qt,_T:()=>ge,mG:()=>Me,qq:()=>Dt})},7340:(Sn,Ct,Q)=>{Q.d(Ct,{LC:()=>i,SB:()=>rt,X$:()=>ge,ZE:()=>ot,ZN:()=>bt,_j:()=>g,eR:()=>Se,jt:()=>Ke,k1:()=>qt,l3:()=>se,oB:()=>Me,oQ:()=>Ge,vP:()=>Oe});class g{}class i{}const se="*";function ge(Be,we){return{type:7,name:Be,definitions:we,options:{}}}function Ke(Be,we=null){return{type:4,styles:we,timings:Be}}function Oe(Be,we=null){return{type:2,steps:Be,options:we}}function Me(Be){return{type:6,styles:Be,offset:null}}function rt(Be,we,nt){return{type:0,name:Be,styles:we,options:nt}}function Se(Be,we,nt=null){return{type:1,expr:Be,animation:we,options:nt}}function Ge(Be,we=null){return{type:8,animation:Be,options:we}}function Dt(Be){Promise.resolve(null).then(Be)}class bt{constructor(we=0,nt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=we+nt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(we=>we()),this._onDoneFns=[])}onStart(we){this._originalOnStartFns.push(we),this._onStartFns.push(we)}onDone(we){this._originalOnDoneFns.push(we),this._onDoneFns.push(we)}onDestroy(we){this._onDestroyFns.push(we)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Dt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(we=>we()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(we=>we()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(we){this._position=this.totalTime?we*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(we){const nt="start"==we?this._onStartFns:this._onDoneFns;nt.forEach(Xe=>Xe()),nt.length=0}}class ot{constructor(we){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=we;let nt=0,Xe=0,xe=0;const ee=this.players.length;0==ee?Dt(()=>this._onFinish()):this.players.forEach(pt=>{pt.onDone(()=>{++nt==ee&&this._onFinish()}),pt.onDestroy(()=>{++Xe==ee&&this._onDestroy()}),pt.onStart(()=>{++xe==ee&&this._onStart()})}),this.totalTime=this.players.reduce((pt,Ue)=>Math.max(pt,Ue.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(we=>we()),this._onDoneFns=[])}init(){this.players.forEach(we=>we.init())}onStart(we){this._onStartFns.push(we)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(we=>we()),this._onStartFns=[])}onDone(we){this._onDoneFns.push(we)}onDestroy(we){this._onDestroyFns.push(we)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(we=>we.play())}pause(){this.players.forEach(we=>we.pause())}restart(){this.players.forEach(we=>we.restart())}finish(){this._onFinish(),this.players.forEach(we=>we.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(we=>we.destroy()),this._onDestroyFns.forEach(we=>we()),this._onDestroyFns=[])}reset(){this.players.forEach(we=>we.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(we){const nt=we*this.totalTime;this.players.forEach(Xe=>{const xe=Xe.totalTime?Math.min(1,nt/Xe.totalTime):1;Xe.setPosition(xe)})}getPosition(){const we=this.players.reduce((nt,Xe)=>null===nt||Xe.totalTime>nt.totalTime?Xe:nt,null);return null!=we?we.getPosition():0}beforeDestroy(){this.players.forEach(we=>{we.beforeDestroy&&we.beforeDestroy()})}triggerCallback(we){const nt="start"==we?this._onStartFns:this._onDoneFns;nt.forEach(Xe=>Xe()),nt.length=0}}const qt="!"},6895:(Sn,Ct,Q)=>{Q.d(Ct,{Do:()=>qt,EM:()=>Bo,HT:()=>Ke,JF:()=>fs,K0:()=>Oe,Mx:()=>fo,NF:()=>Zr,O5:()=>Rr,PC:()=>Eo,PM:()=>hs,S$:()=>Dt,V_:()=>Re,Ye:()=>Be,b0:()=>ot,bD:()=>As,ez:()=>za,mk:()=>er,q:()=>se,sg:()=>Ps,tP:()=>va,w_:()=>Ee});var g=Q(4650);let i=null;function se(){return i}function Ke(z){i||(i=z)}class Ee{}const Oe=new g.OlP("DocumentToken");let Me=(()=>{class z{historyGo(Y){throw new Error("Not implemented")}}return z.\u0275fac=function(Y){return new(Y||z)},z.\u0275prov=g.Yz7({token:z,factory:function(){return function rt(){return(0,g.LFG)(Se)}()},providedIn:"platform"}),z})();const Re=new g.OlP("Location Initialized");let Se=(()=>{class z extends Me{constructor(Y){super(),this._doc=Y,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return se().getBaseHref(this._doc)}onPopState(Y){const _e=se().getGlobalEventTarget(this._doc,"window");return _e.addEventListener("popstate",Y,!1),()=>_e.removeEventListener("popstate",Y)}onHashChange(Y){const _e=se().getGlobalEventTarget(this._doc,"window");return _e.addEventListener("hashchange",Y,!1),()=>_e.removeEventListener("hashchange",Y)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(Y){this.location.pathname=Y}pushState(Y,_e,$e){Ge()?this._history.pushState(Y,_e,$e):this.location.hash=$e}replaceState(Y,_e,$e){Ge()?this._history.replaceState(Y,_e,$e):this.location.hash=$e}forward(){this._history.forward()}back(){this._history.back()}historyGo(Y=0){this._history.go(Y)}getState(){return this._history.state}}return z.\u0275fac=function(Y){return new(Y||z)(g.LFG(Oe))},z.\u0275prov=g.Yz7({token:z,factory:function(){return function kt(){return new Se((0,g.LFG)(Oe))}()},providedIn:"platform"}),z})();function Ge(){return!!window.history.pushState}function dt(z,le){if(0==z.length)return le;if(0==le.length)return z;let Y=0;return z.endsWith("/")&&Y++,le.startsWith("/")&&Y++,2==Y?z+le.substring(1):1==Y?z+le:z+"/"+le}function wt(z){const le=z.match(/#|\?|$/),Y=le&&le.index||z.length;return z.slice(0,Y-("/"===z[Y-1]?1:0))+z.slice(Y)}function Wt(z){return z&&"?"!==z[0]?"?"+z:z}let Dt=(()=>{class z{historyGo(Y){throw new Error("Not implemented")}}return z.\u0275fac=function(Y){return new(Y||z)},z.\u0275prov=g.Yz7({token:z,factory:function(){return(0,g.f3M)(ot)},providedIn:"root"}),z})();const bt=new g.OlP("appBaseHref");let ot=(()=>{class z extends Dt{constructor(Y,_e){super(),this._platformLocation=Y,this._removeListenerFns=[],this._baseHref=_e??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(Oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Y){this._removeListenerFns.push(this._platformLocation.onPopState(Y),this._platformLocation.onHashChange(Y))}getBaseHref(){return this._baseHref}prepareExternalUrl(Y){return dt(this._baseHref,Y)}path(Y=!1){const _e=this._platformLocation.pathname+Wt(this._platformLocation.search),$e=this._platformLocation.hash;return $e&&Y?`${_e}${$e}`:_e}pushState(Y,_e,$e,Rt){const jt=this.prepareExternalUrl($e+Wt(Rt));this._platformLocation.pushState(Y,_e,jt)}replaceState(Y,_e,$e,Rt){const jt=this.prepareExternalUrl($e+Wt(Rt));this._platformLocation.replaceState(Y,_e,jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Y=0){this._platformLocation.historyGo?.(Y)}}return z.\u0275fac=function(Y){return new(Y||z)(g.LFG(Me),g.LFG(bt,8))},z.\u0275prov=g.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})(),qt=(()=>{class z extends Dt{constructor(Y,_e){super(),this._platformLocation=Y,this._baseHref="",this._removeListenerFns=[],null!=_e&&(this._baseHref=_e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Y){this._removeListenerFns.push(this._platformLocation.onPopState(Y),this._platformLocation.onHashChange(Y))}getBaseHref(){return this._baseHref}path(Y=!1){let _e=this._platformLocation.hash;return null==_e&&(_e="#"),_e.length>0?_e.substring(1):_e}prepareExternalUrl(Y){const _e=dt(this._baseHref,Y);return _e.length>0?"#"+_e:_e}pushState(Y,_e,$e,Rt){let jt=this.prepareExternalUrl($e+Wt(Rt));0==jt.length&&(jt=this._platformLocation.pathname),this._platformLocation.pushState(Y,_e,jt)}replaceState(Y,_e,$e,Rt){let jt=this.prepareExternalUrl($e+Wt(Rt));0==jt.length&&(jt=this._platformLocation.pathname),this._platformLocation.replaceState(Y,_e,jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Y=0){this._platformLocation.historyGo?.(Y)}}return z.\u0275fac=function(Y){return new(Y||z)(g.LFG(Me),g.LFG(bt,8))},z.\u0275prov=g.Yz7({token:z,factory:z.\u0275fac}),z})(),Be=(()=>{class z{constructor(Y){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=Y;const _e=this._locationStrategy.getBaseHref();this._baseHref=wt(Xe(_e)),this._locationStrategy.onPopState($e=>{this._subject.emit({url:this.path(!0),pop:!0,state:$e.state,type:$e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(Y=!1){return this.normalize(this._locationStrategy.path(Y))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(Y,_e=""){return this.path()==this.normalize(Y+Wt(_e))}normalize(Y){return z.stripTrailingSlash(function nt(z,le){return z&&le.startsWith(z)?le.substring(z.length):le}(this._baseHref,Xe(Y)))}prepareExternalUrl(Y){return Y&&"/"!==Y[0]&&(Y="/"+Y),this._locationStrategy.prepareExternalUrl(Y)}go(Y,_e="",$e=null){this._locationStrategy.pushState($e,"",Y,_e),this._notifyUrlChangeListeners(this.prepareExternalUrl(Y+Wt(_e)),$e)}replaceState(Y,_e="",$e=null){this._locationStrategy.replaceState($e,"",Y,_e),this._notifyUrlChangeListeners(this.prepareExternalUrl(Y+Wt(_e)),$e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(Y=0){this._locationStrategy.historyGo?.(Y)}onUrlChange(Y){return this._urlChangeListeners.push(Y),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(_e=>{this._notifyUrlChangeListeners(_e.url,_e.state)})),()=>{const _e=this._urlChangeListeners.indexOf(Y);this._urlChangeListeners.splice(_e,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(Y="",_e){this._urlChangeListeners.forEach($e=>$e(Y,_e))}subscribe(Y,_e,$e){return this._subject.subscribe({next:Y,error:_e,complete:$e})}}return z.normalizeQueryParams=Wt,z.joinWithSlash=dt,z.stripTrailingSlash=wt,z.\u0275fac=function(Y){return new(Y||z)(g.LFG(Dt))},z.\u0275prov=g.Yz7({token:z,factory:function(){return function we(){return new Be((0,g.LFG)(Dt))}()},providedIn:"root"}),z})();function Xe(z){return z.replace(/\/index.html$/,"")}function fo(z,le){le=encodeURIComponent(le);for(const Y of z.split(";")){const _e=Y.indexOf("="),[$e,Rt]=-1==_e?[Y,""]:[Y.slice(0,_e),Y.slice(_e+1)];if($e.trim()===le)return decodeURIComponent(Rt)}return null}let er=(()=>{class z{constructor(Y,_e,$e,Rt){this._iterableDiffers=Y,this._keyValueDiffers=_e,this._ngEl=$e,this._renderer=Rt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(Y){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof Y?Y.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(Y){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof Y?Y.split(/\s+/):Y,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const Y=this._iterableDiffer.diff(this._rawClass);Y&&this._applyIterableChanges(Y)}else if(this._keyValueDiffer){const Y=this._keyValueDiffer.diff(this._rawClass);Y&&this._applyKeyValueChanges(Y)}}_applyKeyValueChanges(Y){Y.forEachAddedItem(_e=>this._toggleClass(_e.key,_e.currentValue)),Y.forEachChangedItem(_e=>this._toggleClass(_e.key,_e.currentValue)),Y.forEachRemovedItem(_e=>{_e.previousValue&&this._toggleClass(_e.key,!1)})}_applyIterableChanges(Y){Y.forEachAddedItem(_e=>{if("string"!=typeof _e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(_e.item)}`);this._toggleClass(_e.item,!0)}),Y.forEachRemovedItem(_e=>this._toggleClass(_e.item,!1))}_applyClasses(Y){Y&&(Array.isArray(Y)||Y instanceof Set?Y.forEach(_e=>this._toggleClass(_e,!0)):Object.keys(Y).forEach(_e=>this._toggleClass(_e,!!Y[_e])))}_removeClasses(Y){Y&&(Array.isArray(Y)||Y instanceof Set?Y.forEach(_e=>this._toggleClass(_e,!1)):Object.keys(Y).forEach(_e=>this._toggleClass(_e,!1)))}_toggleClass(Y,_e){(Y=Y.trim())&&Y.split(/\s+/g).forEach($e=>{_e?this._renderer.addClass(this._ngEl.nativeElement,$e):this._renderer.removeClass(this._ngEl.nativeElement,$e)})}}return z.\u0275fac=function(Y){return new(Y||z)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},z.\u0275dir=g.lG2({type:z,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),z})();class $s{constructor(le,Y,_e,$e){this.$implicit=le,this.ngForOf=Y,this.index=_e,this.count=$e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ps=(()=>{class z{constructor(Y,_e,$e){this._viewContainer=Y,this._template=_e,this._differs=$e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(Y){this._ngForOf=Y,this._ngForOfDirty=!0}set ngForTrackBy(Y){this._trackByFn=Y}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(Y){Y&&(this._template=Y)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Y=this._ngForOf;!this._differ&&Y&&(this._differ=this._differs.find(Y).create(this.ngForTrackBy))}if(this._differ){const Y=this._differ.diff(this._ngForOf);Y&&this._applyChanges(Y)}}_applyChanges(Y){const _e=this._viewContainer;Y.forEachOperation(($e,Rt,jt)=>{if(null==$e.previousIndex)_e.createEmbeddedView(this._template,new $s($e.item,this._ngForOf,-1,-1),null===jt?void 0:jt);else if(null==jt)_e.remove(null===Rt?void 0:Rt);else if(null!==Rt){const Nn=_e.get(Rt);_e.move(Nn,jt),po(Nn,$e)}});for(let $e=0,Rt=_e.length;$e<Rt;$e++){const Nn=_e.get($e).context;Nn.index=$e,Nn.count=Rt,Nn.ngForOf=this._ngForOf}Y.forEachIdentityChange($e=>{po(_e.get($e.currentIndex),$e)})}static ngTemplateContextGuard(Y,_e){return!0}}return z.\u0275fac=function(Y){return new(Y||z)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},z.\u0275dir=g.lG2({type:z,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),z})();function po(z,le){z.context.$implicit=le.item}let Rr=(()=>{class z{constructor(Y,_e){this._viewContainer=Y,this._context=new Qo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=_e}set ngIf(Y){this._context.$implicit=this._context.ngIf=Y,this._updateView()}set ngIfThen(Y){Xr("ngIfThen",Y),this._thenTemplateRef=Y,this._thenViewRef=null,this._updateView()}set ngIfElse(Y){Xr("ngIfElse",Y),this._elseTemplateRef=Y,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Y,_e){return!0}}return z.\u0275fac=function(Y){return new(Y||z)(g.Y36(g.s_b),g.Y36(g.Rgc))},z.\u0275dir=g.lG2({type:z,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),z})();class Qo{constructor(){this.$implicit=null,this.ngIf=null}}function Xr(z,le){if(le&&!le.createEmbeddedView)throw new Error(`${z} must be a TemplateRef, but received '${(0,g.AaK)(le)}'.`)}let Eo=(()=>{class z{constructor(Y,_e,$e){this._ngEl=Y,this._differs=_e,this._renderer=$e,this._ngStyle=null,this._differ=null}set ngStyle(Y){this._ngStyle=Y,!this._differ&&Y&&(this._differ=this._differs.find(Y).create())}ngDoCheck(){if(this._differ){const Y=this._differ.diff(this._ngStyle);Y&&this._applyChanges(Y)}}_setStyle(Y,_e){const[$e,Rt]=Y.split("."),jt=-1===$e.indexOf("-")?void 0:g.JOm.DashCase;null!=_e?this._renderer.setStyle(this._ngEl.nativeElement,$e,Rt?`${_e}${Rt}`:_e,jt):this._renderer.removeStyle(this._ngEl.nativeElement,$e,jt)}_applyChanges(Y){Y.forEachRemovedItem(_e=>this._setStyle(_e.key,null)),Y.forEachAddedItem(_e=>this._setStyle(_e.key,_e.currentValue)),Y.forEachChangedItem(_e=>this._setStyle(_e.key,_e.currentValue))}}return z.\u0275fac=function(Y){return new(Y||z)(g.Y36(g.SBq),g.Y36(g.aQg),g.Y36(g.Qsj))},z.\u0275dir=g.lG2({type:z,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),z})(),va=(()=>{class z{constructor(Y){this._viewContainerRef=Y,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(Y){if(Y.ngTemplateOutlet||Y.ngTemplateOutletInjector){const _e=this._viewContainerRef;if(this._viewRef&&_e.remove(_e.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:$e,ngTemplateOutletContext:Rt,ngTemplateOutletInjector:jt}=this;this._viewRef=_e.createEmbeddedView($e,Rt,jt?{injector:jt}:void 0)}else this._viewRef=null}else this._viewRef&&Y.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return z.\u0275fac=function(Y){return new(Y||z)(g.Y36(g.s_b))},z.\u0275dir=g.lG2({type:z,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[g.TTD]}),z})(),za=(()=>{class z{}return z.\u0275fac=function(Y){return new(Y||z)},z.\u0275mod=g.oAB({type:z}),z.\u0275inj=g.cJS({}),z})();const As="browser";function Zr(z){return z===As}function hs(z){return"server"===z}let Bo=(()=>{class z{}return z.\u0275prov=(0,g.Yz7)({token:z,providedIn:"root",factory:()=>new bo((0,g.LFG)(Oe),window)}),z})();class bo{constructor(le,Y){this.document=le,this.window=Y,this.offset=()=>[0,0]}setOffset(le){this.offset=Array.isArray(le)?()=>le:le}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(le){this.supportsScrolling()&&this.window.scrollTo(le[0],le[1])}scrollToAnchor(le){if(!this.supportsScrolling())return;const Y=function lr(z,le){const Y=z.getElementById(le)||z.getElementsByName(le)[0];if(Y)return Y;if("function"==typeof z.createTreeWalker&&z.body&&(z.body.createShadowRoot||z.body.attachShadow)){const _e=z.createTreeWalker(z.body,NodeFilter.SHOW_ELEMENT);let $e=_e.currentNode;for(;$e;){const Rt=$e.shadowRoot;if(Rt){const jt=Rt.getElementById(le)||Rt.querySelector(`[name="${le}"]`);if(jt)return jt}$e=_e.nextNode()}}return null}(this.document,le);Y&&(this.scrollToElement(Y),Y.focus())}setHistoryScrollRestoration(le){if(this.supportScrollRestoration()){const Y=this.window.history;Y&&Y.scrollRestoration&&(Y.scrollRestoration=le)}}scrollToElement(le){const Y=le.getBoundingClientRect(),_e=Y.left+this.window.pageXOffset,$e=Y.top+this.window.pageYOffset,Rt=this.offset();this.window.scrollTo(_e-Rt[0],$e-Rt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const le=Io(this.window.history)||Io(Object.getPrototypeOf(this.window.history));return!(!le||!le.writable&&!le.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Io(z){return Object.getOwnPropertyDescriptor(z,"scrollRestoration")}class fs{}},4650:(Sn,Ct,Q)=>{Q.d(Ct,{$8M:()=>fa,$Z:()=>Xf,AFp:()=>Rw,AaK:()=>Me,Akn:()=>wu,AsE:()=>N_,BQk:()=>kp,CHM:()=>so,CRH:()=>aw,CZH:()=>iy,CqO:()=>Nm,D6c:()=>VE,DdM:()=>jb,EJc:()=>XC,EiD:()=>su,EpF:()=>h_,F$t:()=>Lm,F4k:()=>Op,FYo:()=>Vu,FiY:()=>yn,G48:()=>bE,Gf:()=>sw,GfV:()=>Ad,GkF:()=>Pm,Gpc:()=>Se,HTZ:()=>Wb,Hsn:()=>Oh,JOm:()=>Dr,JVY:()=>Wu,KtG:()=>bs,L6k:()=>Wc,LAX:()=>Bs,LFG:()=>uo,LSH:()=>T,Lbi:()=>qC,Lck:()=>W0,MAs:()=>Om,MGl:()=>nh,MMx:()=>Ev,NdJ:()=>rd,OlP:()=>An,Oqu:()=>Km,PXZ:()=>pE,Q6J:()=>Rp,QGY:()=>Af,QP$:()=>_n,QbO:()=>YC,Qsj:()=>xd,R0b:()=>Ku,RDi:()=>Ot,Rgc:()=>og,SBq:()=>Lu,Sil:()=>tE,Suo:()=>ow,TTD:()=>_o,TgZ:()=>Gu,Tol:()=>S_,Udp:()=>Lh,VKq:()=>zb,W1O:()=>dw,WLB:()=>Gb,X6Q:()=>vE,XFs:()=>Jt,Xpm:()=>it,Xts:()=>hi,Y36:()=>_d,YKP:()=>Ob,YNc:()=>u_,Yjl:()=>_t,Yz7:()=>Ut,Z0I:()=>Hn,ZZ4:()=>Zv,_Bn:()=>kb,_UZ:()=>th,_Vd:()=>au,_c5:()=>FE,_uU:()=>P_,aQg:()=>qv,c2e:()=>QC,cJS:()=>vt,cg1:()=>tg,d8E:()=>Xm,dDg:()=>uE,dqk:()=>fi,eBb:()=>xc,eFA:()=>Gw,ekj:()=>zm,eoX:()=>Hw,f3M:()=>q,g9A:()=>Ow,h0i:()=>jp,hGG:()=>LE,hij:()=>Wm,iGM:()=>rw,ifc:()=>Gn,ip1:()=>Mw,jDz:()=>Nb,kEZ:()=>$b,kL8:()=>q_,l5B:()=>Kb,lG2:()=>Hr,lqb:()=>Jn,lri:()=>Bw,mCW:()=>St,n5z:()=>Ic,oAB:()=>Rn,oJD:()=>k,oxw:()=>Mf,pB0:()=>F,q3G:()=>Us,q4F:()=>dd,qLn:()=>qu,qOj:()=>Ip,qZA:()=>eh,qzn:()=>ga,rWj:()=>Uw,s9C:()=>Vm,sBO:()=>wE,sIi:()=>Zl,s_b:()=>ey,soG:()=>ry,tb:()=>Pw,tp0:()=>ci,uIk:()=>Sa,vHH:()=>wt,vpe:()=>Sd,wAp:()=>ir,xp6:()=>Cg,ynx:()=>kh,z2F:()=>sy,z3N:()=>Vl,zSh:()=>Qc,zs3:()=>gd});var g=Q(7579),i=Q(727),se=Q(9751),ge=Q(6451),Ke=Q(3099);function Ee(n){for(let r in n)if(n[r]===Ee)return r;throw Error("Could not find renamed property on target object.")}function Oe(n,r){for(const a in r)r.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(n[a]=r[a])}function Me(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Me).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const a=r.indexOf("\n");return-1===a?r:r.substring(0,a)}function rt(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Re=Ee({__forward_ref__:Ee});function Se(n){return n.__forward_ref__=Se,n.toString=function(){return Me(this())},n}function Ge(n){return kt(n)?n():n}function kt(n){return"function"==typeof n&&n.hasOwnProperty(Re)&&n.__forward_ref__===Se}class wt extends Error{constructor(r,a){super(function Wt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,a)),this.code=r}}function Dt(n){return"string"==typeof n?n:null==n?"":String(n)}function we(n,r){throw new wt(-201,!1)}function Pn(n,r){null==n&&function Gt(n,r,a,c){throw new Error(`ASSERTION ERROR: ${n}`+(null==c?"":` [Expected=> ${a} ${c} ${r} <=Actual]`))}(r,n,null,"!=")}function Ut(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function un(n){return Wi(n,oi)||Wi(n,Ui)}function Hn(n){return null!==un(n)}function Wi(n,r){return n.hasOwnProperty(r)?n[r]:null}function Zi(n){return n&&(n.hasOwnProperty(Ki)||n.hasOwnProperty(yi))?n[Ki]:null}const oi=Ee({\u0275prov:Ee}),Ki=Ee({\u0275inj:Ee}),Ui=Ee({ngInjectableDef:Ee}),yi=Ee({ngInjectorDef:Ee});var Jt=(()=>((Jt=Jt||{})[Jt.Default=0]="Default",Jt[Jt.Host=1]="Host",Jt[Jt.Self=2]="Self",Jt[Jt.SkipSelf=4]="SkipSelf",Jt[Jt.Optional=8]="Optional",Jt))();let Ni;function Qi(n){const r=Ni;return Ni=n,r}function Jr(n,r,a){const c=un(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Jt.Optional?null:void 0!==r?r:void we(Me(n))}function xr(n){return{toString:n}.toString()}var br=(()=>((br=br||{})[br.OnPush=0]="OnPush",br[br.Default=1]="Default",br))(),Gn=(()=>{return(n=Gn||(Gn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Gn;var n})();const fi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ji={},ri=[],or=Ee({\u0275cmp:Ee}),ai=Ee({\u0275dir:Ee}),vs=Ee({\u0275pipe:Ee}),qn=Ee({\u0275mod:Ee}),ct=Ee({\u0275fac:Ee}),qe=Ee({__NG_ELEMENT_ID__:Ee});let ze=0;function it(n){return xr(()=>{const a=!0===n.standalone,c={},m={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===br.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||ri,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Gn.Emulated,id:"c"+ze++,styles:n.styles||ri,_:null,setInput:null,schemas:n.schemas||null,tView:null},C=n.dependencies,M=n.features;return m.inputs=Xi(n.inputs,c),m.outputs=Xi(n.outputs),M&&M.forEach(L=>L(m)),m.directiveDefs=C?()=>("function"==typeof C?C():C).map(Zt).filter(mn):null,m.pipeDefs=C?()=>("function"==typeof C?C():C).map(zt).filter(mn):null,m})}function Zt(n){return We(n)||tt(n)}function mn(n){return null!==n}function Rn(n){return xr(()=>({type:n.type,bootstrap:n.bootstrap||ri,declarations:n.declarations||ri,imports:n.imports||ri,exports:n.exports||ri,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Xi(n,r){if(null==n)return ji;const a={};for(const c in n)if(n.hasOwnProperty(c)){let m=n[c],C=m;Array.isArray(m)&&(C=m[1],m=m[0]),a[m]=c,r&&(r[m]=C)}return a}const Hr=it;function _t(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function We(n){return n[or]||null}function tt(n){return n[ai]||null}function zt(n){return n[vs]||null}function _n(n){const r=We(n)||tt(n)||zt(n);return null!==r&&r.standalone}function $n(n,r){const a=n[qn]||null;if(!a&&!0===r)throw new Error(`Type ${Me(n)} does not have '\u0275mod' property.`);return a}function Xr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Wr(n){return Array.isArray(n)&&!0===n[1]}function gi(n){return 0!=(8&n.flags)}function Da(n){return 2==(2&n.flags)}function Jo(n){return 1==(1&n.flags)}function us(n){return null!==n.template}function rl(n){return 0!=(256&n[2])}function Er(n,r){return n.hasOwnProperty(ct)?n[ct]:null}class ro{constructor(r,a,c){this.previousValue=r,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function _o(){return sl}function sl(n){return n.type.prototype.ngOnChanges&&(n.setInput=es),Xo}function Xo(){const n=yo(this),r=n?.current;if(r){const a=n.previous;if(a===ji)n.previous=r;else for(let c in r)a[c]=r[c];n.current=null,this.ngOnChanges(r)}}function es(n,r,a,c){const m=yo(n)||function za(n,r){return n[ea]=r}(n,{previous:ji,current:null}),C=m.current||(m.current={}),M=m.previous,L=this.declaredInputs[a],G=M[L];C[L]=new ro(G&&G.currentValue,r,M===ji),n[c]=r}_o.ngInherit=!0;const ea="__ngSimpleChanges__";function yo(n){return n[ea]||null}function Pr(n){for(;Array.isArray(n);)n=n[0];return n}function Io(n,r){return Pr(r[n])}function lr(n,r){return Pr(r[n.index])}function fs(n,r){return n.data[r]}function Yi(n,r){const a=r[n];return Xr(a)?a:a[0]}function xa(n){return 4==(4&n[2])}function mr(n){return 64==(64&n[2])}function qr(n,r){return null==r?null:n[r]}function ba(n){n[18]=0}function cr(n,r){n[5]+=r;let a=n,c=n[3];for(;null!==c&&(1===r&&1===a[5]||-1===r&&0===a[5]);)c[5]+=r,a=c,c=c[3]}const Ti={lFrame:ll(null),bindingsEnabled:!0};function No(){return Ti.bindingsEnabled}function Xt(){return Ti.lFrame.lView}function ni(){return Ti.lFrame.tView}function so(n){return Ti.lFrame.contextLView=n,n[8]}function bs(n){return Ti.lFrame.contextLView=null,n}function Wn(){let n=ie();for(;null!==n&&64===n.type;)n=n.parent;return n}function ie(){return Ti.lFrame.currentTNode}function W(n,r){const a=Ti.lFrame;a.currentTNode=n,a.isParent=r}function pe(){return Ti.lFrame.isParent}function Lt(){Ti.lFrame.isParent=!1}function Yr(){const n=Ti.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function xl(){return Ti.lFrame.bindingIndex++}function ta(n){const r=Ti.lFrame,a=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,a}function Ga(n,r){const a=Ti.lFrame;a.bindingIndex=a.bindingRootIndex=n,Ca(r)}function Ca(n){Ti.lFrame.currentDirectiveIndex=n}function Ma(n){const r=Ti.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function na(){return Ti.lFrame.currentQueryIndex}function ms(n){Ti.lFrame.currentQueryIndex=n}function ca(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function _l(n,r,a){if(a&Jt.SkipSelf){let m=r,C=n;for(;!(m=m.parent,null!==m||a&Jt.Host||(m=ca(C),null===m||(C=C[15],10&m.type))););if(null===m)return!1;r=m,n=C}const c=Ti.lFrame=Cc();return c.currentTNode=r,c.lView=n,!0}function Al(n){const r=Cc(),a=n[1];Ti.lFrame=r,r.currentTNode=a.firstChild,r.lView=n,r.tView=a,r.contextLView=n,r.bindingIndex=a.bindingStartIndex,r.inI18n=!1}function Cc(){const n=Ti.lFrame,r=null===n?null:n.child;return null===r?ll(n):r}function ll(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ml(){const n=Ti.lFrame;return Ti.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const z=Ml;function le(){const n=Ml();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $e(){return Ti.lFrame.selectedIndex}function Rt(n){Ti.lFrame.selectedIndex=n}function jt(){const n=Ti.lFrame;return fs(n.tView,n.selectedIndex)}function Sr(n,r){for(let a=r.directiveStart,c=r.directiveEnd;a<c;a++){const C=n.data[a].type.prototype,{ngAfterContentInit:M,ngAfterContentChecked:L,ngAfterViewInit:G,ngAfterViewChecked:ae,ngOnDestroy:be}=C;M&&(n.contentHooks||(n.contentHooks=[])).push(-a,M),L&&((n.contentHooks||(n.contentHooks=[])).push(a,L),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(a,L)),G&&(n.viewHooks||(n.viewHooks=[])).push(-a,G),ae&&((n.viewHooks||(n.viewHooks=[])).push(a,ae),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(a,ae)),null!=be&&(n.destroyHooks||(n.destroyHooks=[])).push(a,be)}}function gs(n,r,a){kr(n,r,3,a)}function yl(n,r,a,c){(3&n[2])===a&&kr(n,r,a,c)}function Ra(n,r){let a=n[2];(3&a)===r&&(a&=2047,a+=1,n[2]=a)}function kr(n,r,a,c){const C=c??-1,M=r.length-1;let L=0;for(let G=void 0!==c?65535&n[18]:0;G<M;G++)if("number"==typeof r[G+1]){if(L=r[G],null!=c&&L>=c)break}else r[G]<0&&(n[18]+=65536),(L<C||-1==C)&&(ka(n,a,r,G),n[18]=(4294901760&n[18])+G+2),G++}function ka(n,r,a,c){const m=a[c]<0,C=a[c+1],L=n[m?-a[c]:a[c]];if(m){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{C.call(L)}finally{}}}else try{C.call(L)}finally{}}class ao{constructor(r,a,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function qa(n,r,a){let c=0;for(;c<a.length;){const m=a[c];if("number"==typeof m){if(0!==m)break;c++;const C=a[c++],M=a[c++],L=a[c++];n.setAttribute(r,M,L,C)}else{const C=m,M=a[++c];vl(C)?n.setProperty(r,C,M):n.setAttribute(r,C,M),c++}}return c}function ia(n){return 3===n||4===n||6===n}function vl(n){return 64===n.charCodeAt(0)}function Ys(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let a=-1;for(let c=0;c<r.length;c++){const m=r[c];"number"==typeof m?a=m:0===a||Ql(n,a,m,null,-1===a||2===a?r[++c]:null)}}return n}function Ql(n,r,a,c,m){let C=0,M=n.length;if(-1===r)M=-1;else for(;C<n.length;){const L=n[C++];if("number"==typeof L){if(L===r){M=-1;break}if(L>r){M=C-1;break}}}for(;C<n.length;){const L=n[C];if("number"==typeof L)break;if(L===a){if(null===c)return void(null!==m&&(n[C+1]=m));if(c===n[C+1])return void(n[C+2]=m)}C++,null!==c&&C++,null!==m&&C++}-1!==M&&(n.splice(M,0,r),C=M+1),n.splice(C++,0,a),null!==c&&n.splice(C++,0,c),null!==m&&n.splice(C++,0,m)}function Jl(n){return-1!==n}function Nr(n){return 32767&n}function Ya(n,r){let a=function Cs(n){return n>>16}(n),c=r;for(;a>0;)c=c[15],a--;return c}let $r=!0;function ra(n){const r=$r;return $r=n,r}let bl=0;const Qs={};function ur(n,r){const a=Ho(n,r);if(-1!==a)return a;const c=r[1];c.firstCreatePass&&(n.injectorIndex=r.length,wl(c.data,n),wl(r,null),wl(c.blueprint,null));const m=ha(n,r),C=n.injectorIndex;if(Jl(m)){const M=Nr(m),L=Ya(m,r),G=L[1].data;for(let ae=0;ae<8;ae++)r[C+ae]=L[M+ae]|G[M+ae]}return r[C+8]=m,C}function wl(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Ho(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ha(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let a=0,c=null,m=r;for(;null!==m;){if(c=dl(m),null===c)return-1;if(a++,m=m[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function cl(n,r,a){!function jl(n,r,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(qe)&&(c=a[qe]),null==c&&(c=a[qe]=bl++);const m=255&c;r.data[n+(m>>5)]|=1<<m}(n,r,a)}function Fr(n,r,a){if(a&Jt.Optional)return n;we()}function sa(n,r,a,c){if(a&Jt.Optional&&void 0===c&&(c=null),0==(a&(Jt.Self|Jt.Host))){const m=n[9],C=Qi(void 0);try{return m?m.get(r,c,a&Jt.Optional):Jr(r,c,a&Jt.Optional)}finally{Qi(C)}}return Fr(c,0,a)}function ul(n,r,a,c=Jt.Default,m){if(null!==n){if(1024&r[2]){const M=function ec(n,r,a,c,m){let C=n,M=r;for(;null!==C&&null!==M&&1024&M[2]&&!(256&M[2]);){const L=Vn(C,M,a,c|Jt.Self,Qs);if(L!==Qs)return L;let G=C.parent;if(!G){const ae=M[21];if(ae){const be=ae.get(a,Qs,c);if(be!==Qs)return be}G=dl(M),M=M[15]}C=G}return m}(n,r,a,c,Qs);if(M!==Qs)return M}const C=Vn(n,r,a,c,Qs);if(C!==Qs)return C}return sa(r,a,c,m)}function Vn(n,r,a,c,m){const C=function Ht(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(qe)?n[qe]:void 0;return"number"==typeof r?r>=0?255&r:Tc:r}(a);if("function"==typeof C){if(!_l(r,n,c))return c&Jt.Host?Fr(m,0,c):sa(r,a,c,m);try{const M=C(c);if(null!=M||c&Jt.Optional)return M;we()}finally{z()}}else if("number"==typeof C){let M=null,L=Ho(n,r),G=-1,ae=c&Jt.Host?r[16][6]:null;for((-1===L||c&Jt.SkipSelf)&&(G=-1===L?ha(n,r):r[L+8],-1!==G&&Ls(c,!1)?(M=r[1],L=Nr(G),r=Ya(G,r)):L=-1);-1!==L;){const be=r[1];if(sn(C,L,be.data)){const Fe=Fn(L,r,a,M,c,ae);if(Fe!==Qs)return Fe}G=r[L+8],-1!==G&&Ls(c,r[1].data[L+8]===ae)&&sn(C,L,r)?(M=be,L=Nr(G),r=Ya(G,r)):L=-1}}return m}function Fn(n,r,a,c,m,C){const M=r[1],L=M.data[n+8],be=lo(L,M,a,null==c?Da(L)&&$r:c!=M&&0!=(3&L.type),m&Jt.Host&&C===L);return null!==be?Dn(r,M,be,L):Qs}function lo(n,r,a,c,m){const C=n.providerIndexes,M=r.data,L=1048575&C,G=n.directiveStart,be=C>>20,ft=m?L+be:n.directiveEnd;for(let Nt=c?L:L+be;Nt<ft;Nt++){const hn=M[Nt];if(Nt<G&&a===hn||Nt>=G&&hn.type===a)return Nt}if(m){const Nt=M[G];if(Nt&&us(Nt)&&Nt.type===a)return G}return null}function Dn(n,r,a,c){let m=n[a];const C=r.data;if(function ua(n){return n instanceof ao}(m)){const M=m;M.resolving&&function ot(n,r){const a=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new wt(-200,`Circular dependency in DI detected for ${n}${a}`)}(function bt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Dt(n)}(C[a]));const L=ra(M.canSeeViewProviders);M.resolving=!0;const G=M.injectImpl?Qi(M.injectImpl):null;_l(n,c,Jt.Default);try{m=n[a]=M.factory(void 0,C,n,c),r.firstCreatePass&&a>=c.directiveStart&&function qs(n,r,a){const{ngOnChanges:c,ngOnInit:m,ngDoCheck:C}=r.type.prototype;if(c){const M=sl(r);(a.preOrderHooks||(a.preOrderHooks=[])).push(n,M),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,M)}m&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-n,m),C&&((a.preOrderHooks||(a.preOrderHooks=[])).push(n,C),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,C))}(a,C[a],r)}finally{null!==G&&Qi(G),ra(L),M.resolving=!1,z()}}return m}function sn(n,r,a){return!!(a[r+(n>>5)]&1<<n)}function Ls(n,r){return!(n&Jt.Self||n&Jt.Host&&r)}class kl{constructor(r,a){this._tNode=r,this._lView=a}get(r,a,c){return ul(this._tNode,this._lView,r,c,a)}}function Tc(){return new kl(Wn(),Xt())}function Ic(n){return xr(()=>{const r=n.prototype.constructor,a=r[ct]||Xl(r),c=Object.prototype;let m=Object.getPrototypeOf(n.prototype).constructor;for(;m&&m!==c;){const C=m[ct]||Xl(m);if(C&&C!==a)return C;m=Object.getPrototypeOf(m)}return C=>new C})}function Xl(n){return kt(n)?()=>{const r=Xl(Ge(n));return r&&r()}:Er(n)}function dl(n){const r=n[1],a=r.type;return 2===a?r.declTNode:1===a?n[6]:null}function fa(n){return function pn(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const a=n.attrs;if(a){const c=a.length;let m=0;for(;m<c;){const C=a[m];if(ia(C))break;if(0===C)m+=2;else if("number"==typeof C)for(m++;m<c&&"string"==typeof a[m];)m++;else{if(C===r)return a[m+1];m+=2}}}return null}(Wn(),n)}const Pa="__parameters__";function Lo(n,r,a){return xr(()=>{const c=function Mi(n){return function(...a){if(n){const c=n(...a);for(const m in c)this[m]=c[m]}}}(r);function m(...C){if(this instanceof m)return c.apply(this,C),this;const M=new m(...C);return L.annotation=M,L;function L(G,ae,be){const Fe=G.hasOwnProperty(Pa)?G[Pa]:Object.defineProperty(G,Pa,{value:[]})[Pa];for(;Fe.length<=be;)Fe.push(null);return(Fe[be]=Fe[be]||[]).push(M),G}}return a&&(m.prototype=Object.create(a.prototype)),m.prototype.ngMetadataName=n,m.annotationCls=m,m})}class An{constructor(r,a){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ut({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wo(n,r){void 0===r&&(r=n);for(let a=0;a<n.length;a++){let c=n[a];Array.isArray(c)?(r===n&&(r=n.slice(0,a)),wo(c,r)):r!==n&&r.push(c)}return r}function Ja(n,r){n.forEach(a=>Array.isArray(a)?Ja(a,r):r(a))}function Gl(n,r,a){r>=n.length?n.push(a):n.splice(r,0,a)}function xo(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function fl(n,r){const a=[];for(let c=0;c<n;c++)a.push(r);return a}function Pe(n,r,a){let c=Bt(n,r);return c>=0?n[1|c]=a:(c=~c,function R(n,r,a,c){let m=n.length;if(m==r)n.push(a,c);else if(1===m)n.push(c,n[0]),n[0]=a;else{for(m--,n.push(n[m-1],n[m]);m>r;)n[m]=n[m-2],m--;n[r]=a,n[r+1]=c}}(n,c,r,a)),c}function Ze(n,r){const a=Bt(n,r);if(a>=0)return n[1|a]}function Bt(n,r){return function Vi(n,r,a){let c=0,m=n.length>>a;for(;m!==c;){const C=c+(m-c>>1),M=n[C<<a];if(r===M)return C<<a;M>r?m=C:c=C+1}return~(m<<a)}(n,r,1)}const nc={},dc="__NG_DI_FLAG__",$o="ngTempTokenPath",co=/\n/gm,ma="__source";let ts;function Fa(n){const r=ts;return ts=n,r}function Sc(n,r=Jt.Default){if(void 0===ts)throw new wt(-203,!1);return null===ts?Jr(n,void 0,r):ts.get(n,r&Jt.Optional?null:void 0,r)}function uo(n,r=Jt.Default){return(function Hi(){return Ni}()||Sc)(Ge(n),r)}function q(n,r=Jt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),uo(n,r)}function ne(n){const r=[];for(let a=0;a<n.length;a++){const c=Ge(n[a]);if(Array.isArray(c)){if(0===c.length)throw new wt(900,!1);let m,C=Jt.Default;for(let M=0;M<c.length;M++){const L=c[M],G=je(L);"number"==typeof G?-1===G?m=L.token:C|=G:m=L}r.push(uo(m,C))}else r.push(uo(c))}return r}function he(n,r){return n[dc]=r,n.prototype[dc]=r,n}function je(n){return n[dc]}const yn=he(Lo("Optional"),8),ci=he(Lo("SkipSelf"),4);let Je,bi,Va;function Ot(n){Je=n}function Es(n){return function Qn(){if(void 0===bi&&(bi=null,fi.trustedTypes))try{bi=fi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return bi}()?.createHTML(n)||n}function Fl(n){return function Nl(){if(void 0===Va&&(Va=null,fi.trustedTypes))try{Va=fi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Va}()?.createHTML(n)||n}class aa{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class eu extends aa{getTypeName(){return"HTML"}}class hu extends aa{getTypeName(){return"Style"}}class tu extends aa{getTypeName(){return"Script"}}class Ll extends aa{getTypeName(){return"URL"}}class Dc extends aa{getTypeName(){return"ResourceURL"}}function Vl(n){return n instanceof aa?n.changingThisBreaksApplicationSecurity:n}function ga(n,r){const a=function fu(n){return n instanceof aa&&n.getTypeName()||null}(n);if(null!=a&&a!==r){if("ResourceURL"===a&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===r}function Wu(n){return new eu(n)}function Wc(n){return new hu(n)}function xc(n){return new tu(n)}function Bs(n){return new Ll(n)}function F(n){return new Dc(n)}class I{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const a=(new window.DOMParser).parseFromString(Es(r),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(r):(a.removeChild(a.firstChild),a)}catch{return null}}}class U{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const c=this.inertDocument.createElement("body");a.appendChild(c)}}getInertBodyElement(r){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Es(r),a;const c=this.inertDocument.createElement("body");return c.innerHTML=Es(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(r){const a=r.attributes;for(let m=a.length-1;0<m;m--){const M=a.item(m).name;("xmlns:ns1"===M||0===M.indexOf("ns1:"))&&r.removeAttribute(M)}let c=r.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const Ae=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function St(n){return(n=String(n)).match(Ae)?n:"unsafe:"+n}function On(n){const r={};for(const a of n.split(","))r[a]=!0;return r}function pi(...n){const r={};for(const a of n)for(const c in a)a.hasOwnProperty(c)&&(r[c]=!0);return r}const _r=On("area,br,col,hr,img,wbr"),Ts=On("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Bl=On("rp,rt"),pc=pi(_r,pi(Ts,On("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pi(Bl,On("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pi(Bl,Ts)),nu=On("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rc=On("srcset"),Tu=pi(nu,rc,On("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),On("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ru=On("script,style,template");class qc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let a=r.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let m=this.checkClobberedElement(a,a.nextSibling);if(m){a=m;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(r){const a=r.nodeName.toLowerCase();if(!pc.hasOwnProperty(a))return this.sanitizedSomething=!0,!ru.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=r.attributes;for(let m=0;m<c.length;m++){const C=c.item(m),M=C.name,L=M.toLowerCase();if(!Tu.hasOwnProperty(L)){this.sanitizedSomething=!0;continue}let G=C.value;nu[L]&&(G=St(G)),rc[L]&&(n=G,G=(n=String(n)).split(",").map(r=>St(r.trim())).join(", ")),this.buf.push(" ",M,'="',cs(G),'"')}var n;return this.buf.push(">"),!0}endElement(r){const a=r.nodeName.toLowerCase();pc.hasOwnProperty(a)&&!_r.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(r){this.buf.push(cs(r))}checkClobberedElement(r,a){if(a&&(r.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return a}}const Zu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fc=/([^\#-~ |!])/g;function cs(n){return n.replace(/&/g,"&amp;").replace(Zu,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Fc,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let pu;function su(n,r){let a=null;try{pu=pu||function E(n){const r=new U(n);return function de(){try{return!!(new window.DOMParser).parseFromString(Es(""),"text/html")}catch{return!1}}()?new I(r):r}(n);let c=r?String(r):"";a=pu.getInertBodyElement(c);let m=5,C=c;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,c=C,C=a.innerHTML,a=pu.getInertBodyElement(c)}while(c!==C);return Es((new qc).sanitizeChildren(ou(a)||a))}finally{if(a){const c=ou(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function ou(n){return"content"in n&&function Dd(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Us=(()=>((Us=Us||{})[Us.NONE=0]="NONE",Us[Us.HTML=1]="HTML",Us[Us.STYLE=2]="STYLE",Us[Us.SCRIPT=3]="SCRIPT",Us[Us.URL=4]="URL",Us[Us.RESOURCE_URL=5]="RESOURCE_URL",Us))();function k(n){const r=en();return r?Fl(r.sanitize(Us.HTML,n)||""):ga(n,"HTML")?Fl(Vl(n)):su(function vn(){return void 0!==Je?Je:typeof document<"u"?document:void 0}(),Dt(n))}function T(n){const r=en();return r?r.sanitize(Us.URL,n)||"":ga(n,"URL")?Vl(n):St(Dt(n))}function en(){const n=Xt();return n&&n[12]}const hi=new An("ENVIRONMENT_INITIALIZER"),mi=new An("INJECTOR",-1),Bn=new An("INJECTOR_DEF_TYPES");class ei{get(r,a=nc){if(a===nc){const c=new Error(`NullInjectorError: No provider for ${Me(r)}!`);throw c.name="NullInjectorError",c}return a}}function ui(...n){return{\u0275providers:pr(0,n)}}function pr(n,...r){const a=[],c=new Set;let m;return Ja(r,C=>{const M=C;dr(M,a,[],c)&&(m||(m=[]),m.push(M))}),void 0!==m&&ns(m,a),a}function ns(n,r){for(let a=0;a<n.length;a++){const{providers:m}=n[a];Ja(m,C=>{r.push(C)})}}function dr(n,r,a,c){if(!(n=Ge(n)))return!1;let m=null,C=Zi(n);const M=!C&&We(n);if(C||M){if(M&&!M.standalone)return!1;m=n}else{const G=n.ngModule;if(C=Zi(G),!C)return!1;m=G}const L=c.has(m);if(M){if(L)return!1;if(c.add(m),M.dependencies){const G="function"==typeof M.dependencies?M.dependencies():M.dependencies;for(const ae of G)dr(ae,r,a,c)}}else{if(!C)return!1;{if(null!=C.imports&&!L){let ae;c.add(m);try{Ja(C.imports,be=>{dr(be,r,a,c)&&(ae||(ae=[]),ae.push(be))})}finally{}void 0!==ae&&ns(ae,r)}if(!L){const ae=Er(m)||(()=>new m);r.push({provide:m,useFactory:ae,deps:ri},{provide:Bn,useValue:m,multi:!0},{provide:hi,useValue:()=>uo(m),multi:!0})}const G=C.providers;null==G||L||Ja(G,be=>{r.push(be)})}}return m!==n&&void 0!==n.providers}const Kl=Ee({provide:String,useValue:Ee});function Wo(n){return null!==n&&"object"==typeof n&&Kl in n}function Di(n){return"function"==typeof n}const Qc=new An("Set Injector scope."),bc={},Ac={};let mu;function Iu(){return void 0===mu&&(mu=new ei),mu}class Jn{}class Oi extends Jn{constructor(r,a,c,m){super(),this.parent=a,this.source=c,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rs(r,M=>this.processProvider(M)),this.records.set(mi,Ua(void 0,this)),m.has("environment")&&this.records.set(Jn,Ua(void 0,this));const C=this.records.get(Qc);null!=C&&"string"==typeof C.value&&this.scopes.add(C.value),this.injectorDefTypes=new Set(this.get(Bn.multi,ri,Jt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const a=Fa(this),c=Qi(void 0);try{return r()}finally{Fa(a),Qi(c)}}get(r,a=nc,c=Jt.Default){this.assertNotDestroyed();const m=Fa(this),C=Qi(void 0);try{if(!(c&Jt.SkipSelf)){let L=this.records.get(r);if(void 0===L){const G=function pl(n){return"function"==typeof n||"object"==typeof n&&n instanceof An}(r)&&un(r);L=G&&this.injectableDefInScope(G)?Ua(Fi(r),bc):null,this.records.set(r,L)}if(null!=L)return this.hydrate(r,L)}return(c&Jt.Self?Iu():this.parent).get(r,a=c&Jt.Optional&&a===nc?null:a)}catch(M){if("NullInjectorError"===M.name){if((M[$o]=M[$o]||[]).unshift(Me(r)),m)throw M;return function gt(n,r,a,c){const m=n[$o];throw r[ma]&&m.unshift(r[ma]),n.message=function At(n,r,a,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let m=Me(r);if(Array.isArray(r))m=r.map(Me).join(" -> ");else if("object"==typeof r){let C=[];for(let M in r)if(r.hasOwnProperty(M)){let L=r[M];C.push(M+":"+("string"==typeof L?JSON.stringify(L):Me(L)))}m=`{${C.join(", ")}}`}return`${a}${c?"("+c+")":""}[${m}]: ${n.replace(co,"\n  ")}`}("\n"+n.message,m,a,c),n.ngTokenPath=m,n[$o]=null,n}(M,r,"R3InjectorError",this.source)}throw M}finally{Qi(C),Fa(m)}}resolveInjectorInitializers(){const r=Fa(this),a=Qi(void 0);try{const c=this.get(hi.multi,ri,Jt.Self);for(const m of c)m()}finally{Fa(r),Qi(a)}}toString(){const r=[],a=this.records;for(const c of a.keys())r.push(Me(c));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new wt(205,!1)}processProvider(r){let a=Di(r=Ge(r))?r:Ge(r&&r.provide);const c=function Ba(n){return Wo(n)?Ua(void 0,n.useValue):Ua(wc(n),bc)}(r);if(Di(r)||!0!==r.multi)this.records.get(a);else{let m=this.records.get(a);m||(m=Ua(void 0,bc,!0),m.factory=()=>ne(m.multi),this.records.set(a,m)),a=r,m.multi.push(r)}this.records.set(a,c)}hydrate(r,a){return a.value===bc&&(a.value=Ac,a.value=a.factory()),"object"==typeof a.value&&a.value&&function eo(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(r){if(!r.providedIn)return!1;const a=Ge(r.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Fi(n){const r=un(n),a=null!==r?r.factory:Er(n);if(null!==a)return a;if(n instanceof An)throw new wt(204,!1);if(n instanceof Function)return function is(n){const r=n.length;if(r>0)throw fl(r,"?"),new wt(204,!1);const a=function Ci(n){const r=n&&(n[oi]||n[Ui]);if(r){const a=function Ei(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),r}return null}(n);return null!==a?()=>a.factory(n):()=>new n}(n);throw new wt(204,!1)}function wc(n,r,a){let c;if(Di(n)){const m=Ge(n);return Er(m)||Fi(m)}if(Wo(n))c=()=>Ge(n.useValue);else if(function Wl(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...ne(n.deps||[]));else if(function Ao(n){return!(!n||!n.useExisting)}(n))c=()=>uo(Ge(n.useExisting));else{const m=Ge(n&&(n.useClass||n.provide));if(!function Lc(n){return!!n.deps}(n))return Er(m)||Fi(m);c=()=>new m(...ne(n.deps))}return c}function Ua(n,r,a=!1){return{factory:n,value:r,multi:a?[]:void 0}}function ud(n){return!!n.\u0275providers}function rs(n,r){for(const a of n)Array.isArray(a)?rs(a,r):ud(a)?rs(a.\u0275providers,r):r(a)}class nl{}class ch{resolveComponentFactory(r){throw function Vc(n){const r=Error(`No component factory found for ${Me(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let au=(()=>{class n{}return n.NULL=new ch,n})();function uh(){return Su(Wn(),Xt())}function Su(n,r){return new Lu(lr(n,r))}let Lu=(()=>{class n{constructor(a){this.nativeElement=a}}return n.__NG_ELEMENT_ID__=uh,n})();function jh(n){return n instanceof Lu?n.nativeElement:n}class Vu{}let xd=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function zh(){const n=Xt(),a=Yi(Wn().index,n);return(Xr(a)?a:n)[11]}(),n})(),dh=(()=>{class n{}return n.\u0275prov=Ut({token:n,providedIn:"root",factory:()=>null}),n})();class Ad{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const dd=new Ad("14.2.0"),Md={};function Fd(n){return n.ngOriginalError}class qu{constructor(){this._console=console}handleError(r){const a=this._findOriginalError(r);this._console.error("ERROR",r),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(r){let a=r&&Fd(r);for(;a&&Fd(a);)a=Fd(a);return a||null}}const Ld=new Map;let mh=0;const Yu="__ngContext__";function Sl(n,r){Xr(r)?(n[Yu]=r[20],function Xh(n){Ld.set(n[20],n)}(r)):n[Yu]=r}function Rc(n){const r=n[Yu];return"number"==typeof r?function Vd(n){return Ld.get(n)||null}(r):r||null}function pd(n){const r=Rc(n);return r?Xr(r)?r:r.lView:null}function Mt(n){return n instanceof Function?n():n}var Dr=(()=>((Dr=Dr||{})[Dr.Important=1]="Important",Dr[Dr.DashCase=2]="DashCase",Dr))();function Zo(n,r){return undefined(n,r)}function Ul(n){const r=n[3];return Wr(r)?r[3]:r}function p(n){return h(n[13])}function d(n){return h(n[4])}function h(n){for(;null!==n&&!Wr(n);)n=n[4];return n}function O(n,r,a,c,m){if(null!=c){let C,M=!1;Wr(c)?C=c:Xr(c)&&(M=!0,c=c[0]);const L=Pr(c);0===n&&null!==a?null==m?lg(r,a,L):Bd(r,a,L,m||null,!0):1===n&&null!==a?Bd(r,a,L,m||null,!0):2===n?function hg(n,r,a){const c=ef(n,r);c&&function cy(n,r,a,c){n.removeChild(r,a,c)}(n,c,r,a)}(r,L,M):3===n&&r.destroyNode(L),null!=C&&function dy(n,r,a,c,m){const C=a[7];C!==Pr(a)&&O(r,n,c,C,m);for(let L=10;L<a.length;L++){const G=a[L];Ud(G[1],G,n,r,c,C)}}(r,n,C,a,m)}}function ke(n,r,a){return n.createElement(r,a)}function ss(n,r){const a=n[9],c=a.indexOf(r),m=r[3];512&r[2]&&(r[2]&=-513,cr(m,-1)),a.splice(c,1)}function ml(n,r){if(n.length<=10)return;const a=10+r,c=n[a];if(c){const m=c[17];null!==m&&m!==n&&ss(m,c),r>0&&(n[a-1][4]=c[4]);const C=xo(n,10+r);!function Qe(n,r){Ud(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(c[1],c);const M=C[19];null!==M&&M.detachView(C[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function oc(n,r){if(!(128&r[2])){const a=r[11];a.destroyNode&&Ud(n,r,a,3,null,null),function an(n){let r=n[13];if(!r)return lu(n[1],n);for(;r;){let a=null;if(Xr(r))a=r[13];else{const c=r[10];c&&(a=c)}if(!a){for(;r&&!r[4]&&r!==n;)Xr(r)&&lu(r[1],r),r=r[3];null===r&&(r=n),Xr(r)&&lu(r[1],r),a=r&&r[4]}r=a}}(r)}}function lu(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function jf(n,r){let a;if(null!=n&&null!=(a=n.destroyHooks))for(let c=0;c<a.length;c+=2){const m=r[a[c]];if(!(m instanceof ao)){const C=a[c+1];if(Array.isArray(C))for(let M=0;M<C.length;M+=2){const L=m[C[M]],G=C[M+1];try{G.call(L)}finally{}}else try{C.call(m)}finally{}}}}(n,r),function cu(n,r){const a=n.cleanup,c=r[7];let m=-1;if(null!==a)for(let C=0;C<a.length-1;C+=2)if("string"==typeof a[C]){const M=a[C+1],L="function"==typeof M?M(r):Pr(r[M]),G=c[m=a[C+2]],ae=a[C+3];"boolean"==typeof ae?L.removeEventListener(a[C],G,ae):ae>=0?c[m=ae]():c[m=-ae].unsubscribe(),C+=2}else{const M=c[m=a[C+1]];a[C].call(M)}if(null!==c){for(let C=m+1;C<c.length;C++)(0,c[C])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const a=r[17];if(null!==a&&Wr(r[3])){a!==r[3]&&ss(a,r);const c=r[19];null!==c&&c.detachView(n)}!function _h(n){Ld.delete(n[20])}(r)}}function Ju(n,r,a){return function $p(n,r,a){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return a[0];if(2&c.flags){const m=n.data[c.directiveStart].encapsulation;if(m===Gn.None||m===Gn.Emulated)return null}return lr(c,a)}(n,r.parent,a)}function Bd(n,r,a,c,m){n.insertBefore(r,a,c,m)}function lg(n,r,a){n.appendChild(r,a)}function cg(n,r,a,c,m){null!==c?Bd(n,r,a,c,m):lg(n,r,a)}function ef(n,r){return n.parentNode(r)}function Wp(n,r,a){return Zp(n,r,a)}let Zp=function ug(n,r,a){return 40&n.type?lr(n,a):null};function tf(n,r,a,c){const m=Ju(n,c,r),C=r[11],L=Wp(c.parent||r[6],c,r);if(null!=m)if(Array.isArray(a))for(let G=0;G<a.length;G++)cg(C,m,a[G],L,!1);else cg(C,m,a,L,!1)}function nf(n,r){if(null!==r){const a=r.type;if(3&a)return lr(r,n);if(4&a)return zf(-1,n[r.index]);if(8&a){const c=r.child;if(null!==c)return nf(n,c);{const m=n[r.index];return Wr(m)?zf(-1,m):Pr(m)}}if(32&a)return Zo(r,n)()||Pr(n[r.index]);{const c=dg(n,r);return null!==c?Array.isArray(c)?c[0]:nf(Ul(n[16]),c):nf(n,r.next)}}return null}function dg(n,r){return null!==r?n[16][6].projection[r.projection]:null}function zf(n,r){const a=10+n+1;if(a<r.length){const c=r[a],m=c[1].firstChild;if(null!==m)return nf(c,m)}return r[7]}function qp(n,r,a,c,m,C,M){for(;null!=a;){const L=c[a.index],G=a.type;if(M&&0===r&&(L&&Sl(Pr(L),c),a.flags|=4),64!=(64&a.flags))if(8&G)qp(n,r,a.child,c,m,C,!1),O(r,n,m,L,C);else if(32&G){const ae=Zo(a,c);let be;for(;be=ae();)O(r,n,m,be,C);O(r,n,m,L,C)}else 16&G?fg(n,r,c,a,m,C):O(r,n,m,L,C);a=M?a.projectionNext:a.next}}function Ud(n,r,a,c,m,C){qp(a,c,n.firstChild,r,m,C,!1)}function fg(n,r,a,c,m,C){const M=a[16],G=M[6].projection[c.projection];if(Array.isArray(G))for(let ae=0;ae<G.length;ae++)O(r,n,m,G[ae],C);else qp(n,r,G,M[3],m,C,!0)}function pg(n,r,a){n.setAttribute(r,"style",a)}function Gf(n,r,a){""===a?n.removeAttribute(r,"class"):n.setAttribute(r,"class",a)}function mg(n,r,a){let c=n.length;for(;;){const m=n.indexOf(r,a);if(-1===m)return m;if(0===m||n.charCodeAt(m-1)<=32){const C=r.length;if(m+C===c||n.charCodeAt(m+C)<=32)return m}a=m+1}}const gg="ng-template";function _g(n,r,a){let c=0;for(;c<n.length;){let m=n[c++];if(a&&"class"===m){if(m=n[c],-1!==mg(m.toLowerCase(),r,0))return!0}else if(1===m){for(;c<n.length&&"string"==typeof(m=n[c++]);)if(m.toLowerCase()===r)return!0;return!1}}return!1}function $f(n){return 4===n.type&&n.value!==gg}function Qp(n,r,a){return r===(4!==n.type||a?n.value:gg)}function rf(n,r,a){let c=4;const m=n.attrs||[],C=function fy(n){for(let r=0;r<n.length;r++)if(ia(n[r]))return r;return n.length}(m);let M=!1;for(let L=0;L<r.length;L++){const G=r[L];if("number"!=typeof G){if(!M)if(4&c){if(c=2|1&c,""!==G&&!Qp(n,G,a)||""===G&&1===r.length){if(Jc(c))return!1;M=!0}}else{const ae=8&c?G:r[++L];if(8&c&&null!==n.attrs){if(!_g(n.attrs,ae,a)){if(Jc(c))return!1;M=!0}continue}const Fe=Jp(8&c?"class":G,m,$f(n),a);if(-1===Fe){if(Jc(c))return!1;M=!0;continue}if(""!==ae){let ft;ft=Fe>C?"":m[Fe+1].toLowerCase();const Nt=8&c?ft:null;if(Nt&&-1!==mg(Nt,ae,0)||2&c&&ae!==ft){if(Jc(c))return!1;M=!0}}}}else{if(!M&&!Jc(c)&&!Jc(G))return!1;if(M&&Jc(G))continue;M=!1,c=G|1&c}}return Jc(c)||M}function Jc(n){return 0==(1&n)}function Jp(n,r,a,c){if(null===r)return-1;let m=0;if(c||!a){let C=!1;for(;m<r.length;){const M=r[m];if(M===n)return m;if(3===M||6===M)C=!0;else{if(1===M||2===M){let L=r[++m];for(;"string"==typeof L;)L=r[++m];continue}if(4===M)break;if(0===M){m+=4;continue}}m+=C?1:2}return-1}return function vg(n,r){let a=n.indexOf(4);if(a>-1)for(a++;a<n.length;){const c=n[a];if("number"==typeof c)return-1;if(c===r)return a;a++}return-1}(r,n)}function Kf(n,r,a=!1){for(let c=0;c<r.length;c++)if(rf(n,r[c],a))return!0;return!1}function bg(n,r){e:for(let a=0;a<r.length;a++){const c=r[a];if(n.length===c.length){for(let m=0;m<n.length;m++)if(n[m]!==c[m])continue e;return!0}}return!1}function Wf(n,r){return n?":not("+r.trim()+")":r}function py(n){let r=n[0],a=1,c=2,m="",C=!1;for(;a<n.length;){let M=n[a];if("string"==typeof M)if(2&c){const L=n[++a];m+="["+M+(L.length>0?'="'+L+'"':"")+"]"}else 8&c?m+="."+M:4&c&&(m+=" "+M);else""!==m&&!Jc(M)&&(r+=Wf(C,m),m=""),c=M,C=C||!Jc(c);a++}return""!==m&&(r+=Wf(C,m)),r}const Ur={};function Cg(n){Hd(ni(),Xt(),$e()+n,!1)}function Hd(n,r,a,c){if(!c)if(3==(3&r[2])){const C=n.preOrderCheckHooks;null!==C&&gs(r,C,a)}else{const C=n.preOrderHooks;null!==C&&yl(r,C,0,a)}Rt(a)}function qf(n,r=null,a=null,c){const m=im(n,r,a,c);return m.resolveInjectorInitializers(),m}function im(n,r=null,a=null,c,m=new Set){const C=[a||ri,ui(n)];return c=c||("object"==typeof n?void 0:Me(n)),new Oi(C,r||Iu(),c||null,m)}let gd=(()=>{class n{static create(a,c){if(Array.isArray(a))return qf({name:""},c,a,"");{const m=a.name??"";return qf({name:m},a.parent,a.providers,m)}}}return n.THROW_IF_NOT_FOUND=nc,n.NULL=new ei,n.\u0275prov=Ut({token:n,providedIn:"any",factory:()=>uo(mi)}),n.__NG_ELEMENT_ID__=-1,n})();function _d(n,r=Jt.Default){const a=Xt();return null===a?uo(n,r):ul(Wn(),a,Ge(n),r)}function Xf(){throw new Error("invalid")}function cf(n,r){return n<<17|r<<2}function Au(n){return n>>17&32767}function uf(n){return 2|n}function td(n){return(131068&n)>>2}function df(n,r){return-131069&n|r<<2}function ff(n){return 1|n}function Gg(n,r){const a=n.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const m=a[c],C=a[c+1];if(-1!==C){const M=n.data[C];ms(m),M.contentQueries(2,r[C],C)}}}function cp(n,r,a,c,m,C,M,L,G,ae,be){const Fe=r.blueprint.slice();return Fe[0]=m,Fe[2]=76|c,(null!==be||n&&1024&n[2])&&(Fe[2]|=1024),ba(Fe),Fe[3]=Fe[15]=n,Fe[8]=a,Fe[10]=M||n&&n[10],Fe[11]=L||n&&n[11],Fe[12]=G||n&&n[12]||null,Fe[9]=ae||n&&n[9]||null,Fe[6]=C,Fe[20]=function gh(){return mh++}(),Fe[21]=be,Fe[16]=2==r.type?n[16]:Fe,Fe}function yd(n,r,a,c,m){let C=n.data[r];if(null===C)C=function yf(n,r,a,c,m){const C=ie(),M=pe(),G=n.data[r]=function Ly(n,r,a,c,m,C){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:C,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,M?C:C&&C.parent,a,r,c,m);return null===n.firstChild&&(n.firstChild=G),null!==C&&(M?null==C.child&&null!==G.parent&&(C.child=G):null===C.next&&(C.next=G)),G}(n,r,a,c,m),function al(){return Ti.lFrame.inI18n}()&&(C.flags|=64);else if(64&C.type){C.type=a,C.value=c,C.attrs=m;const M=function X(){const n=Ti.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();C.injectorIndex=null===M?-1:M.injectorIndex}return W(C,!0),C}function vd(n,r,a,c){if(0===a)return-1;const m=r.length;for(let C=0;C<a;C++)r.push(c),n.blueprint.push(c),n.data.push(null);return m}function up(n,r,a){Al(r);try{const c=n.viewQuery;null!==c&&Sm(1,c,a);const m=n.template;null!==m&&dp(n,r,m,1,a),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Gg(n,r),n.staticViewQueries&&Sm(2,n.viewQuery,a);const C=n.components;null!==C&&function Oy(n,r){for(let a=0;a<r.length;a++)zy(n,r[a])}(r,C)}catch(c){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),c}finally{r[2]&=-5,le()}}function Zd(n,r,a,c){const m=r[2];if(128!=(128&m)){Al(r);try{ba(r),function Aa(n){return Ti.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==a&&dp(n,r,a,2,c);const M=3==(3&m);if(M){const ae=n.preOrderCheckHooks;null!==ae&&gs(r,ae,null)}else{const ae=n.preOrderHooks;null!==ae&&yl(r,ae,0,null),Ra(r,0)}if(function Cm(n){for(let r=p(n);null!==r;r=d(r)){if(!r[2])continue;const a=r[9];for(let c=0;c<a.length;c++){const m=a[c],C=m[3];0==(512&m[2])&&cr(C,1),m[2]|=512}}}(r),function jy(n){for(let r=p(n);null!==r;r=d(r))for(let a=10;a<r.length;a++){const c=r[a],m=c[1];mr(c)&&Zd(m,c,m.template,c[8])}}(r),null!==n.contentQueries&&Gg(n,r),M){const ae=n.contentCheckHooks;null!==ae&&gs(r,ae)}else{const ae=n.contentHooks;null!==ae&&yl(r,ae,1),Ra(r,1)}!function zg(n,r){const a=n.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const m=a[c];if(m<0)Rt(~m);else{const C=m,M=a[++c],L=a[++c];Ga(M,C),L(2,r[C])}}}finally{Rt(-1)}}(n,r);const L=n.components;null!==L&&function ky(n,r){for(let a=0;a<r.length;a++)Em(n,r[a])}(r,L);const G=n.viewQuery;if(null!==G&&Sm(2,G,c),M){const ae=n.viewCheckHooks;null!==ae&&gs(r,ae)}else{const ae=n.viewHooks;null!==ae&&yl(r,ae,2),Ra(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,cr(r[3],-1))}finally{le()}}}function Py(n,r,a,c){const m=r[10],M=xa(r);try{!M&&m.begin&&m.begin(),M&&up(n,r,c),Zd(n,r,a,c)}finally{!M&&m.end&&m.end()}}function dp(n,r,a,c,m){const C=$e(),M=2&c;try{Rt(-1),M&&r.length>22&&Hd(n,r,22,!1),a(c,m)}finally{Rt(C)}}function fm(n,r,a){if(gi(r)){const m=r.directiveEnd;for(let C=r.directiveStart;C<m;C++){const M=n.data[C];M.contentQueries&&M.contentQueries(1,a[C],C)}}}function vf(n,r,a){!No()||(function ym(n,r,a,c){const m=a.directiveStart,C=a.directiveEnd;n.firstCreatePass||ur(a,r),Sl(c,r);const M=a.initialInputs;for(let L=m;L<C;L++){const G=n.data[L],ae=us(G);ae&&wm(r,a,G);const be=Dn(r,n,L,a);Sl(be,r),null!==M&&Yg(0,L-m,be,G,0,M),ae&&(Yi(a.index,r)[8]=be)}}(n,r,a,lr(a,r)),128==(128&a.flags)&&function By(n,r,a){const c=a.directiveStart,m=a.directiveEnd,C=a.index,M=function $a(){return Ti.lFrame.currentDirectiveIndex}();try{Rt(C);for(let L=c;L<m;L++){const G=n.data[L],ae=r[L];Ca(L),(null!==G.hostBindings||0!==G.hostVars||null!==G.hostAttrs)&&Wg(G,ae)}}finally{Rt(-1),Ca(M)}}(n,r,a))}function hp(n,r,a=lr){const c=r.localNames;if(null!==c){let m=r.index+1;for(let C=0;C<c.length;C+=2){const M=c[C+1],L=-1===M?a(r,n):n[M];n[m++]=L}}}function $g(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=bf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function bf(n,r,a,c,m,C,M,L,G,ae){const be=22+c,Fe=be+m,ft=function Ny(n,r){const a=[];for(let c=0;c<r;c++)a.push(c<n?null:Ur);return a}(be,Fe),Nt="function"==typeof ae?ae():ae;return ft[1]={type:n,blueprint:ft,template:a,queries:null,viewQuery:L,declTNode:r,data:ft.slice().fill(null,be),bindingStartIndex:be,expandoStartIndex:Fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof C?C():C,pipeRegistry:"function"==typeof M?M():M,firstChild:null,schemas:G,consts:Nt,incompleteFirstPass:!1}}function fp(n,r,a,c){const m=Dm(r);null===a?m.push(c):(m.push(a),n.firstCreatePass&&bp(n).push(c,m.length-1))}function pp(n,r,a){for(let c in n)if(n.hasOwnProperty(c)){const m=n[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(r,m):a[c]=[r,m]}return a}function mp(n,r){const c=r.directiveEnd,m=n.data,C=r.attrs,M=[];let L=null,G=null;for(let ae=r.directiveStart;ae<c;ae++){const be=m[ae],Fe=be.inputs,ft=null===C||$f(r)?null:Hy(Fe,C);M.push(ft),L=pp(Fe,ae,L),G=pp(be.outputs,ae,G)}null!==L&&(L.hasOwnProperty("class")&&(r.flags|=16),L.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=M,r.inputs=L,r.outputs=G}function _c(n,r,a,c,m,C,M,L){const G=lr(r,a);let be,ae=r.inputs;!L&&null!=ae&&(be=ae[c])?(If(n,a,be,c,m),Da(r)&&mm(a,r.index)):3&r.type&&(c=function pm(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),m=null!=M?M(m,r.value||"",c):m,C.setProperty(G,c,m))}function mm(n,r){const a=Yi(r,n);16&a[2]||(a[2]|=32)}function Mu(n,r,a,c){let m=!1;if(No()){const C=function vm(n,r,a){const c=n.directiveRegistry;let m=null;if(c)for(let C=0;C<c.length;C++){const M=c[C];Kf(a,M.selectors,!1)&&(m||(m=[]),cl(ur(a,r),n,M.type),us(M)?(Zg(n,a),m.unshift(M)):m.push(M))}return m}(n,r,a),M=null===c?null:{"":-1};if(null!==C){m=!0,_p(a,n.data.length,C.length);for(let be=0;be<C.length;be++){const Fe=C[be];Fe.providersResolver&&Fe.providersResolver(Fe)}let L=!1,G=!1,ae=vd(n,r,C.length,null);for(let be=0;be<C.length;be++){const Fe=C[be];a.mergedAttrs=Ys(a.mergedAttrs,Fe.hostAttrs),qg(n,a,r,ae,Fe),Uy(ae,Fe,M),null!==Fe.contentQueries&&(a.flags|=8),(null!==Fe.hostBindings||null!==Fe.hostAttrs||0!==Fe.hostVars)&&(a.flags|=128);const ft=Fe.type.prototype;!L&&(ft.ngOnChanges||ft.ngOnInit||ft.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(a.index),L=!0),!G&&(ft.ngOnChanges||ft.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(a.index),G=!0),ae++}mp(n,a)}M&&function bm(n,r,a){if(r){const c=n.localNames=[];for(let m=0;m<r.length;m+=2){const C=a[r[m+1]];if(null==C)throw new wt(-301,!1);c.push(r[m],C)}}}(a,c,M)}return a.mergedAttrs=Ys(a.mergedAttrs,a.attrs),m}function gp(n,r,a,c,m,C){const M=C.hostBindings;if(M){let L=n.hostBindingOpCodes;null===L&&(L=n.hostBindingOpCodes=[]);const G=~r.index;(function Vy(n){let r=n.length;for(;r>0;){const a=n[--r];if("number"==typeof a&&a<0)return a}return 0})(L)!=G&&L.push(G),L.push(c,m,M)}}function Wg(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Zg(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Uy(n,r,a){if(a){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)a[r.exportAs[c]]=n;us(r)&&(a[""]=n)}}function _p(n,r,a){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+a,n.providerIndexes=r}function qg(n,r,a,c,m){n.data[c]=m;const C=m.factory||(m.factory=Er(m.type)),M=new ao(C,us(m),_d);n.blueprint[c]=M,a[c]=M,gp(n,r,0,c,vd(n,a,m.hostVars,Ur),m)}function wm(n,r,a){const c=lr(r,n),m=$g(a),C=n[10],M=Ef(n,cp(n,m,null,a.onPush?32:16,c,r,C,C.createRenderer(c,a),null,null,null));n[r.index]=M}function Ru(n,r,a,c,m,C){const M=lr(n,r);!function wf(n,r,a,c,m,C,M){if(null==C)n.removeAttribute(r,m,a);else{const L=null==M?Dt(C):M(C,c||"",m);n.setAttribute(r,m,L,a)}}(r[11],M,C,n.value,a,c,m)}function Yg(n,r,a,c,m,C){const M=C[r];if(null!==M){const L=c.setInput;for(let G=0;G<M.length;){const ae=M[G++],be=M[G++],Fe=M[G++];null!==L?c.setInput(a,Fe,ae,be):a[be]=Fe}}}function Hy(n,r){let a=null,c=0;for(;c<r.length;){const m=r[c];if(0!==m)if(5!==m){if("number"==typeof m)break;n.hasOwnProperty(m)&&(null===a&&(a=[]),a.push(m,n[m],r[c+1])),c+=2}else c+=2;else c+=4}return a}function yp(n,r,a,c){return new Array(n,!0,!1,r,null,0,c,a,null,null)}function Em(n,r){const a=Yi(r,n);if(mr(a)){const c=a[1];48&a[2]?Zd(c,a,c.template,a[8]):a[5]>0&&Cf(a)}}function Cf(n){for(let c=p(n);null!==c;c=d(c))for(let m=10;m<c.length;m++){const C=c[m];if(mr(C))if(512&C[2]){const M=C[1];Zd(M,C,M.template,C[8])}else C[5]>0&&Cf(C)}const a=n[1].components;if(null!==a)for(let c=0;c<a.length;c++){const m=Yi(a[c],n);mr(m)&&m[5]>0&&Cf(m)}}function zy(n,r){const a=Yi(r,n),c=a[1];(function Qg(n,r){for(let a=r.length;a<n.blueprint.length;a++)r.push(n.blueprint[a])})(c,a),up(c,a,a[8])}function Ef(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Tm(n){for(;n;){n[2]|=32;const r=Ul(n);if(rl(n)&&!r)return n;n=r}return null}function Sm(n,r,a){ms(0),r(n,a)}function Dm(n){return n[7]||(n[7]=[])}function bp(n){return n.cleanup||(n.cleanup=[])}function wp(n,r){const a=n[9],c=a?a.get(qu,null):null;c&&c.handleError(r)}function If(n,r,a,c,m){for(let C=0;C<a.length;){const M=a[C++],L=a[C++],G=r[M],ae=n.data[M];null!==ae.setInput?ae.setInput(G,m,c,L):G[L]=m}}function ku(n,r,a){const c=Io(r,n);!function re(n,r,a){n.setValue(r,a)}(n[11],c,a)}function qd(n,r,a){let c=a?n.styles:null,m=a?n.classes:null,C=0;if(null!==r)for(let M=0;M<r.length;M++){const L=r[M];"number"==typeof L?C=L:1==C?m=rt(m,L):2==C&&(c=rt(c,L+": "+r[++M]+";"))}a?n.styles=c:n.stylesWithoutHost=c,a?n.classes=m:n.classesWithoutHost=m}function Eh(n,r,a,c,m=!1){for(;null!==a;){const C=r[a.index];if(null!==C&&c.push(Pr(C)),Wr(C))for(let L=10;L<C.length;L++){const G=C[L],ae=G[1].firstChild;null!==ae&&Eh(G[1],G,ae,c)}const M=a.type;if(8&M)Eh(n,r,a.child,c);else if(32&M){const L=Zo(a,r);let G;for(;G=L();)c.push(G)}else if(16&M){const L=dg(r,a);if(Array.isArray(L))c.push(...L);else{const G=Ul(r[16]);Eh(G[1],G,L,c,!0)}}a=m?a.projectionNext:a.next}return c}class Th{constructor(r,a){this._lView=r,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,a=r[1];return Eh(a,r,a.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Wr(r)){const a=r[8],c=a?a.indexOf(this):-1;c>-1&&(ml(r,c),xo(a,c))}this._attachedToViewContainer=!1}oc(this._lView[1],this._lView)}onDestroy(r){fp(this._lView[1],this._lView,null,r)}markForCheck(){Tm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function vp(n,r,a){const c=r[10];c.begin&&c.begin();try{Zd(n,r,n.template,a)}catch(m){throw wp(r,m),m}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new wt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Kt(n,r){Ud(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new wt(902,!1);this._appRef=r}}class Cp extends Th{constructor(r){super(r),this._view=r}detectChanges(){!function Tf(n){!function Im(n){for(let r=0;r<n.components.length;r++){const a=n.components[r],c=pd(a);if(null!==c){const m=c[1];Py(m,c,m.template,a)}}}(n[8])}(this._view)}checkNoChanges(){}get context(){return null}}class Ep extends au{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const a=We(r);return new Sf(a,this.ngModule)}}function Tp(n){const r=[];for(let a in n)n.hasOwnProperty(a)&&r.push({propName:n[a],templateName:a});return r}class Am{constructor(r,a){this.injector=r,this.parentInjector=a}get(r,a,c){const m=this.injector.get(r,Md,c);return m!==Md||a===Md?m:this.parentInjector.get(r,a,c)}}class Sf extends nl{constructor(r,a){super(),this.componentDef=r,this.ngModule=a,this.componentType=r.type,this.selector=function wg(n){return n.map(py).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Tp(this.componentDef.inputs)}get outputs(){return Tp(this.componentDef.outputs)}create(r,a,c,m){let C=(m=m||this.ngModule)instanceof Jn?m:m?.injector;C&&null!==this.componentDef.getStandaloneInjector&&(C=this.componentDef.getStandaloneInjector(C)||C);const M=C?new Am(r,C):r,L=M.get(Vu,null);if(null===L)throw new wt(407,!1);const G=M.get(dh,null),ae=L.createRenderer(null,this.componentDef),be=this.componentDef.selectors[0][0]||"div",Fe=c?function Fy(n,r,a){return n.selectRootElement(r,a===Gn.ShadowDom)}(ae,c,this.componentDef.encapsulation):ke(L.createRenderer(null,this.componentDef),be,function Ih(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(be)),ft=this.componentDef.onPush?288:272,Nt={components:[]},hn=bf(0,null,null,1,0,null,null,null,null,null),xn=cp(null,hn,Nt,ft,null,null,L,ae,G,M,null);let ii,xi;Al(xn);try{const vr=function Xg(n,r,a,c,m,C){const M=a[1];a[22]=n;const G=yd(M,22,2,"#host",null),ae=G.mergedAttrs=r.hostAttrs;null!==ae&&(qd(G,ae,!0),null!==n&&(qa(m,n,ae),null!==G.classes&&Gf(m,n,G.classes),null!==G.styles&&pg(m,n,G.styles)));const be=c.createRenderer(n,r),Fe=cp(a,$g(r),null,r.onPush?32:16,a[22],G,c,be,C||null,null,null);return M.firstCreatePass&&(cl(ur(G,a),M,r.type),Zg(M,G),_p(G,a.length,1)),Ef(a,Fe),a[22]=Fe}(Fe,this.componentDef,xn,L,ae);if(Fe)if(c)qa(ae,Fe,["ng-version",dd.full]);else{const{attrs:Cn,classes:rr}=function my(n){const r=[],a=[];let c=1,m=2;for(;c<n.length;){let C=n[c];if("string"==typeof C)2===m?""!==C&&r.push(C,n[++c]):8===m&&a.push(C);else{if(!Jc(m))break;m=C}c++}return{attrs:r,classes:a}}(this.componentDef.selectors[0]);Cn&&qa(ae,Fe,Cn),rr&&rr.length>0&&Gf(ae,Fe,rr.join(" "))}if(xi=fs(hn,22),void 0!==a){const Cn=xi.projection=[];for(let rr=0;rr<this.ngContentSelectors.length;rr++){const to=a[rr];Cn.push(null!=to?Array.from(to):null)}}ii=function $y(n,r,a,c,m){const C=a[1],M=function _m(n,r,a){const c=Wn();n.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),qg(n,c,r,vd(n,r,1,null),a),mp(n,c));const m=Dn(r,n,c.directiveStart,c);Sl(m,r);const C=lr(c,r);return C&&Sl(C,r),m}(C,a,r);if(c.components.push(M),n[8]=M,null!==m)for(const G of m)G(M,r);if(r.contentQueries){const G=Wn();r.contentQueries(1,M,G.directiveStart)}const L=Wn();return!C.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Rt(L.index),gp(a[1],L,0,L.directiveStart,L.directiveEnd,r),Wg(r,M)),M}(vr,this.componentDef,xn,Nt,[Wy]),up(hn,xn,null)}finally{le()}return new Jg(this.componentType,ii,Su(xi,xn),xn,xi)}}class Jg extends class Mc{}{constructor(r,a,c,m,C){super(),this.location=c,this._rootLView=m,this._tNode=C,this.instance=a,this.hostView=this.changeDetectorRef=new Cp(m),this.componentType=r}setInput(r,a){const c=this._tNode.inputs;let m;if(null!==c&&(m=c[r])){const C=this._rootLView;If(C[1],C,m,r,a),mm(C,this._tNode.index)}}get injector(){return new kl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Wy(){const n=Wn();Sr(Xt()[1],n)}function Ip(n){let r=function e_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),a=!0;const c=[n];for(;r;){let m;if(us(n))m=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new wt(903,!1);m=r.\u0275dir}if(m){if(a){c.push(m);const M=n;M.inputs=Sp(n.inputs),M.declaredInputs=Sp(n.declaredInputs),M.outputs=Sp(n.outputs);const L=m.hostBindings;L&&Dp(n,L);const G=m.viewQuery,ae=m.contentQueries;if(G&&t_(n,G),ae&&n_(n,ae),Oe(n.inputs,m.inputs),Oe(n.declaredInputs,m.declaredInputs),Oe(n.outputs,m.outputs),us(m)&&m.data.animation){const be=n.data;be.animation=(be.animation||[]).concat(m.data.animation)}}const C=m.features;if(C)for(let M=0;M<C.length;M++){const L=C[M];L&&L.ngInherit&&L(n),L===Ip&&(a=!1)}}r=Object.getPrototypeOf(r)}!function Mm(n){let r=0,a=null;for(let c=n.length-1;c>=0;c--){const m=n[c];m.hostVars=r+=m.hostVars,m.hostAttrs=Ys(m.hostAttrs,a=Ys(a,m.hostAttrs))}}(c)}function Sp(n){return n===ji?{}:n===ri?[]:n}function t_(n,r){const a=n.viewQuery;n.viewQuery=a?(c,m)=>{r(c,m),a(c,m)}:r}function n_(n,r){const a=n.contentQueries;n.contentQueries=a?(c,m,C)=>{r(c,m,C),a(c,m,C)}:r}function Dp(n,r){const a=n.hostBindings;n.hostBindings=a?(c,m)=>{r(c,m),a(c,m)}:r}let bd=null;function Yd(){if(!bd){const n=fi.Symbol;if(n&&n.iterator)bd=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<r.length;++a){const c=r[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(bd=c)}}}return bd}function Zl(n){return!!Rm(n)&&(Array.isArray(n)||!(n instanceof Map)&&Yd()in n)}function Rm(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ou(n,r,a){return n[r]=a}function Sh(n,r){return n[r]}function kc(n,r,a){return!Object.is(n[r],a)&&(n[r]=a,!0)}function id(n,r,a,c){const m=kc(n,r,a);return kc(n,r+1,c)||m}function bu(n,r,a,c,m,C){const M=id(n,r,a,c);return id(n,r+2,m,C)||M}function Sa(n,r,a,c){const m=Xt();return kc(m,xl(),r)&&(ni(),Ru(jt(),m,n,r,a,c)),Sa}function xf(n,r,a,c){return kc(n,xl(),a)?r+Dt(a)+c:Ur}function Ha(n,r,a,c,m,C){const L=id(n,function ws(){return Ti.lFrame.bindingIndex}(),a,m);return ta(2),L?r+Dt(a)+c+Dt(m)+C:Ur}function u_(n,r,a,c,m,C,M,L){const G=Xt(),ae=ni(),be=n+22,Fe=ae.firstCreatePass?function Mp(n,r,a,c,m,C,M,L,G){const ae=r.consts,be=yd(r,n,4,M||null,qr(ae,L));Mu(r,a,be,qr(ae,G)),Sr(r,be);const Fe=be.tViews=bf(2,be,c,m,C,r.directiveRegistry,r.pipeRegistry,null,r.schemas,ae);return null!==r.queries&&(r.queries.template(r,be),Fe.queries=r.queries.embeddedTView(be)),be}(be,ae,G,r,a,c,m,C,M):ae.data[be];W(Fe,!1);const ft=G[11].createComment("");tf(ae,G,ft,Fe),Sl(ft,G),Ef(G,G[be]=yp(ft,G,ft,Fe)),Jo(Fe)&&vf(ae,G,Fe),null!=M&&hp(G,Fe,L)}function Om(n){return function Ws(n,r){return n[r]}(function zr(){return Ti.lFrame.contextLView}(),22+n)}function Rp(n,r,a){const c=Xt();return kc(c,xl(),r)&&_c(ni(),jt(),c,n,r,c[11],a,!1),Rp}function Rh(n,r,a,c,m){const M=m?"class":"style";If(n,a,r.inputs[M],M,c)}function Gu(n,r,a,c){const m=Xt(),C=ni(),M=22+n,L=m[11],G=m[M]=ke(L,r,function Li(){return Ti.lFrame.currentNamespace}()),ae=C.firstCreatePass?function Qy(n,r,a,c,m,C,M){const L=r.consts,ae=yd(r,n,2,m,qr(L,C));return Mu(r,a,ae,qr(L,M)),null!==ae.attrs&&qd(ae,ae.attrs,!1),null!==ae.mergedAttrs&&qd(ae,ae.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,ae),ae}(M,C,m,0,r,a,c):C.data[M];W(ae,!0);const be=ae.mergedAttrs;null!==be&&qa(L,G,be);const Fe=ae.classes;null!==Fe&&Gf(L,G,Fe);const ft=ae.styles;return null!==ft&&pg(L,G,ft),64!=(64&ae.flags)&&tf(C,m,G,ae),0===function Uo(){return Ti.lFrame.elementDepthCount}()&&Sl(G,m),function Yl(){Ti.lFrame.elementDepthCount++}(),Jo(ae)&&(vf(C,m,ae),fm(C,ae,m)),null!==c&&hp(m,ae),Gu}function eh(){let n=Wn();pe()?Lt():(n=n.parent,W(n,!1));const r=n;!function Tr(){Ti.lFrame.elementDepthCount--}();const a=ni();return a.firstCreatePass&&(Sr(a,n),gi(n)&&a.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Wa(n){return 0!=(16&n.flags)}(r)&&Rh(a,r,Xt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function da(n){return 0!=(32&n.flags)}(r)&&Rh(a,r,Xt(),r.stylesWithoutHost,!1),eh}function th(n,r,a,c){return Gu(n,r,a,c),eh(),th}function kh(n,r,a){const c=Xt(),m=ni(),C=n+22,M=m.firstCreatePass?function d_(n,r,a,c,m){const C=r.consts,M=qr(C,c),L=yd(r,n,8,"ng-container",M);return null!==M&&qd(L,M,!0),Mu(r,a,L,qr(C,m)),null!==r.queries&&r.queries.elementStart(r,L),L}(C,m,c,r,a):m.data[C];W(M,!0);const L=c[C]=c[11].createComment("");return tf(m,c,L,M),Sl(L,c),Jo(M)&&(vf(m,c,M),fm(m,M,c)),null!=a&&hp(c,M),kh}function kp(){let n=Wn();const r=ni();return pe()?Lt():(n=n.parent,W(n,!1)),r.firstCreatePass&&(Sr(r,n),gi(n)&&r.queries.elementEnd(n)),kp}function Pm(n,r,a){return kh(n,r,a),kp(),Pm}function h_(){return Xt()}function Af(n){return!!n&&"function"==typeof n.then}function Op(n){return!!n&&"function"==typeof n.subscribe}const Nm=Op;function rd(n,r,a,c){const m=Xt(),C=ni(),M=Wn();return function Pp(n,r,a,c,m,C,M,L){const G=Jo(c),be=n.firstCreatePass&&bp(n),Fe=r[8],ft=Dm(r);let Nt=!0;if(3&c.type||L){const ii=lr(c,r),xi=L?L(ii):ii,vr=ft.length,Cn=L?to=>L(Pr(to[c.index])):c.index;let rr=null;if(!L&&G&&(rr=function f_(n,r,a,c){const m=n.cleanup;if(null!=m)for(let C=0;C<m.length-1;C+=2){const M=m[C];if(M===a&&m[C+1]===c){const L=r[7],G=m[C+2];return L.length>G?L[G]:null}"string"==typeof M&&(C+=2)}return null}(n,r,m,c.index)),null!==rr)(rr.__ngLastListenerFn__||rr).__ngNextListenerFn__=C,rr.__ngLastListenerFn__=C,Nt=!1;else{C=p_(c,r,Fe,C,!1);const to=a.listen(xi,m,C);ft.push(C,to),be&&be.push(m,Cn,vr,vr+1)}}else C=p_(c,r,Fe,C,!1);const hn=c.outputs;let xn;if(Nt&&null!==hn&&(xn=hn[m])){const ii=xn.length;if(ii)for(let xi=0;xi<ii;xi+=2){const gl=r[xn[xi]][xn[xi+1]].subscribe(C),Lf=ft.length;ft.push(C,gl),be&&be.push(m,c.index,Lf,-(Lf+1))}}}(C,m,m[11],M,n,r,0,c),rd}function Np(n,r,a,c){try{return!1!==a(c)}catch(m){return wp(n,m),!1}}function p_(n,r,a,c,m){return function C(M){if(M===Function)return c;Tm(2&n.flags?Yi(n.index,r):r);let G=Np(r,0,c,M),ae=C.__ngNextListenerFn__;for(;ae;)G=Np(r,0,ae,M)&&G,ae=ae.__ngNextListenerFn__;return m&&!1===G&&(M.preventDefault(),M.returnValue=!1),G}}function Mf(n=1){return function Y(n){return(Ti.lFrame.contextLView=function _e(n,r){for(;n>0;)r=r[15],n--;return r}(n,Ti.lFrame.contextLView))[8]}(n)}function Fp(n,r){let a=null;const c=function yg(n){const r=n.attrs;if(null!=r){const a=r.indexOf(5);if(0==(1&a))return r[a+1]}return null}(n);for(let m=0;m<r.length;m++){const C=r[m];if("*"!==C){if(null===c?Kf(n,C,!0):bg(c,C))return m}else a=m}return a}function Lm(n){const r=Xt()[16][6];if(!r.projection){const c=r.projection=fl(n?n.length:1,null),m=c.slice();let C=r.child;for(;null!==C;){const M=n?Fp(C,n):0;null!==M&&(m[M]?m[M].projectionNext=C:c[M]=C,m[M]=C),C=C.next}}}function Oh(n,r=0,a){const c=Xt(),m=ni(),C=yd(m,22+n,16,null,a||null);null===C.projection&&(C.projection=r),Lt(),64!=(64&C.flags)&&function gc(n,r,a){fg(r[11],0,r,a,Ju(n,a,r),Wp(a.parent||r[6],a,r))}(m,c,C)}function Vm(n,r,a){return nh(n,"",r,"",a),Vm}function nh(n,r,a,c,m){const C=Xt(),M=xf(C,r,a,c);return M!==Ur&&_c(ni(),jt(),C,n,M,C[11],m,!1),nh}function g_(n,r,a,c,m){const C=n[a+1],M=null===r;let L=c?Au(C):td(C),G=!1;for(;0!==L&&(!1===G||M);){const be=n[L+1];ev(n[L],r)&&(G=!0,n[L+1]=c?ff(be):uf(be)),L=c?Au(be):td(be)}G&&(n[a+1]=c?uf(C):ff(C))}function ev(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Bt(n,r)>=0}const ql={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function __(n){return n.substring(ql.key,ql.keyEnd)}function tv(n){return n.substring(ql.value,ql.valueEnd)}function v_(n,r){const a=ql.textEnd;return a===r?-1:(r=ql.keyEnd=function w_(n,r,a){for(;r<a&&n.charCodeAt(r)>32;)r++;return r}(n,ql.key=r,a),Fh(n,r,a))}function Hm(n,r){const a=ql.textEnd;let c=ql.key=Fh(n,r,a);return a===c?-1:(c=ql.keyEnd=function C_(n,r,a){let c;for(;r<a&&(45===(c=n.charCodeAt(r))||95===c||(-33&c)>=65&&(-33&c)<=90||c>=48&&c<=57);)r++;return r}(n,c,a),c=jm(n,c,a),c=ql.value=Fh(n,c,a),c=ql.valueEnd=function E_(n,r,a){let c=-1,m=-1,C=-1,M=r,L=M;for(;M<a;){const G=n.charCodeAt(M++);if(59===G)return L;34===G||39===G?L=M=T_(n,G,M,a):r===M-4&&85===C&&82===m&&76===c&&40===G?L=M=T_(n,41,M,a):G>32&&(L=M),C=m,m=c,c=-33&G}return L}(n,c,a),jm(n,c,a))}function b_(n){ql.key=0,ql.keyEnd=0,ql.value=0,ql.valueEnd=0,ql.textEnd=n.length}function Fh(n,r,a){for(;r<a&&n.charCodeAt(r)<=32;)r++;return r}function jm(n,r,a,c){return(r=Fh(n,r,a))<a&&r++,r}function T_(n,r,a,c){let m=-1,C=a;for(;C<c;){const M=n.charCodeAt(C++);if(M==r&&92!==m)return C;m=92==M&&92===m?0:M}throw new Error}function Lh(n,r,a){return Nu(n,r,a,!1),Lh}function zm(n,r){return Nu(n,r,null,!0),zm}function wu(n){Fu(rh,Cd,n,!1)}function Cd(n,r){for(let a=function nv(n){return b_(n),Hm(n,Fh(n,0,ql.textEnd))}(r);a>=0;a=Hm(r,a))rh(n,__(r),tv(r))}function S_(n){Fu(Pe,Oc,n,!0)}function Oc(n,r){for(let a=function y_(n){return b_(n),v_(n,Fh(n,0,ql.textEnd))}(r);a>=0;a=v_(r,a))Pe(n,__(r),!0)}function Nu(n,r,a,c){const m=Xt(),C=ni(),M=ta(2);C.firstUpdatePass&&x_(C,n,M,c),r!==Ur&&kc(m,M,r)&&R_(C,C.data[$e()],m,m[11],n,m[M+1]=function ov(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Me(Vl(n)))),n}(r,a),c,M)}function Fu(n,r,a,c){const m=ni(),C=ta(2);m.firstUpdatePass&&x_(m,null,C,c);const M=Xt();if(a!==Ur&&kc(M,C,a)){const L=m.data[$e()];if(O_(L,c)&&!D_(m,C)){let G=c?L.classesWithoutHost:L.stylesWithoutHost;null!==G&&(a=rt(G,a||"")),Rh(m,L,M,a,c)}else!function $m(n,r,a,c,m,C,M,L){m===Ur&&(m=ri);let G=0,ae=0,be=0<m.length?m[0]:null,Fe=0<C.length?C[0]:null;for(;null!==be||null!==Fe;){const ft=G<m.length?m[G+1]:void 0,Nt=ae<C.length?C[ae+1]:void 0;let xn,hn=null;be===Fe?(G+=2,ae+=2,ft!==Nt&&(hn=Fe,xn=Nt)):null===Fe||null!==be&&be<Fe?(G+=2,hn=be):(ae+=2,hn=Fe,xn=Nt),null!==hn&&R_(n,r,a,c,hn,xn,M,L),be=G<m.length?m[G]:null,Fe=ae<C.length?C[ae]:null}}(m,L,M,M[11],M[C+1],M[C+1]=function sv(n,r,a){if(null==a||""===a)return ri;const c=[],m=Vl(a);if(Array.isArray(m))for(let C=0;C<m.length;C++)n(c,m[C],!0);else if("object"==typeof m)for(const C in m)m.hasOwnProperty(C)&&n(c,C,m[C]);else"string"==typeof m&&r(c,m);return c}(n,r,a),c,C)}}function D_(n,r){return r>=n.expandoStartIndex}function x_(n,r,a,c){const m=n.data;if(null===m[a+1]){const C=m[$e()],M=D_(n,a);O_(C,c)&&null===r&&!M&&(r=!1),r=function iv(n,r,a,c){const m=Ma(n);let C=c?r.residualClasses:r.residualStyles;if(null===m)0===(c?r.classBindings:r.styleBindings)&&(a=Vh(a=Gm(null,n,r,a,c),r.attrs,c),C=null);else{const M=r.directiveStylingLast;if(-1===M||n[M]!==m)if(a=Gm(m,n,r,a,c),null===C){let G=function A_(n,r,a){const c=a?r.classBindings:r.styleBindings;if(0!==td(c))return n[Au(c)]}(n,r,c);void 0!==G&&Array.isArray(G)&&(G=Gm(null,n,r,G[1],c),G=Vh(G,r.attrs,c),function M_(n,r,a,c){n[Au(a?r.classBindings:r.styleBindings)]=c}(n,r,c,G))}else C=function rv(n,r,a){let c;const m=r.directiveEnd;for(let C=1+r.directiveStylingLast;C<m;C++)c=Vh(c,n[C].hostAttrs,a);return Vh(c,r.attrs,a)}(n,r,c)}return void 0!==C&&(c?r.residualClasses=C:r.residualStyles=C),a}(m,C,r,c),function Jy(n,r,a,c,m,C){let M=C?r.classBindings:r.styleBindings,L=Au(M),G=td(M);n[c]=a;let be,ae=!1;if(Array.isArray(a)){const Fe=a;be=Fe[1],(null===be||Bt(Fe,be)>0)&&(ae=!0)}else be=a;if(m)if(0!==G){const ft=Au(n[L+1]);n[c+1]=cf(ft,L),0!==ft&&(n[ft+1]=df(n[ft+1],c)),n[L+1]=function Iy(n,r){return 131071&n|r<<17}(n[L+1],c)}else n[c+1]=cf(L,0),0!==L&&(n[L+1]=df(n[L+1],c)),L=c;else n[c+1]=cf(G,0),0===L?L=c:n[G+1]=df(n[G+1],c),G=c;ae&&(n[c+1]=uf(n[c+1])),g_(n,be,c,!0),g_(n,be,c,!1),function Xy(n,r,a,c,m){const C=m?n.residualClasses:n.residualStyles;null!=C&&"string"==typeof r&&Bt(C,r)>=0&&(a[c+1]=ff(a[c+1]))}(r,be,n,c,C),M=cf(L,G),C?r.classBindings=M:r.styleBindings=M}(m,C,r,a,M,c)}}function Gm(n,r,a,c,m){let C=null;const M=a.directiveEnd;let L=a.directiveStylingLast;for(-1===L?L=a.directiveStart:L++;L<M&&(C=r[L],c=Vh(c,C.hostAttrs,m),C!==n);)L++;return null!==n&&(a.directiveStylingLast=L),c}function Vh(n,r,a){const c=a?1:2;let m=-1;if(null!==r)for(let C=0;C<r.length;C++){const M=r[C];"number"==typeof M?m=M:m===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Pe(n,M,!!a||r[++C]))}return void 0===n?null:n}function rh(n,r,a){Pe(n,r,Vl(a))}function R_(n,r,a,c,m,C,M,L){if(!(3&r.type))return;const G=n.data,ae=G[L+1];Lp(function hf(n){return 1==(1&n)}(ae)?k_(G,r,a,m,td(ae),M):void 0)||(Lp(C)||function ep(n){return 2==(2&n)}(ae)&&(C=k_(G,null,a,m,L,M)),function hy(n,r,a,c,m){if(r)m?n.addClass(a,c):n.removeClass(a,c);else{let C=-1===c.indexOf("-")?void 0:Dr.DashCase;null==m?n.removeStyle(a,c,C):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),C|=Dr.Important),n.setStyle(a,c,m,C))}}(c,M,Io($e(),a),m,C))}function k_(n,r,a,c,m,C){const M=null===r;let L;for(;m>0;){const G=n[m],ae=Array.isArray(G),be=ae?G[1]:G,Fe=null===be;let ft=a[m+1];ft===Ur&&(ft=Fe?ri:void 0);let Nt=Fe?Ze(ft,c):be===c?ft:void 0;if(ae&&!Lp(Nt)&&(Nt=Ze(G,c)),Lp(Nt)&&(L=Nt,M))return L;const hn=n[m+1];m=M?Au(hn):td(hn)}if(null!==r){let G=C?r.residualClasses:r.residualStyles;null!=G&&(L=Ze(G,c))}return L}function Lp(n){return void 0!==n}function O_(n,r){return 0!=(n.flags&(r?16:32))}function P_(n,r=""){const a=Xt(),c=ni(),m=n+22,C=c.firstCreatePass?yd(c,m,1,r,null):c.data[m],M=a[m]=function j(n,r){return n.createText(r)}(a[11],r);tf(c,a,M,C),W(C,!1)}function Km(n){return Wm("",n,""),Km}function Wm(n,r,a){const c=Xt(),m=xf(c,n,r,a);return m!==Ur&&ku(c,$e(),m),Wm}function N_(n,r,a,c,m){const C=Xt(),M=Ha(C,n,r,a,c,m);return M!==Ur&&ku(C,$e(),M),N_}function Xm(n,r,a){const c=Xt();if(kc(c,xl(),r)){const C=ni(),M=jt();_c(C,M,c,n,r,function xm(n,r,a){return(null===n||us(n))&&(a=function Bo(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(a[r.index])),a[11]}(Ma(C.data),M,c),a,!0)}return Xm}const Id=void 0;var eg=["en",[["a","p"],["AM","PM"],Id],[["AM","PM"],Id,Id],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Id,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Id,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Id,"{1} 'at' {0}",Id],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dv(n){const a=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let ad={};function tg(n){const r=function pv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let a=ng(r);if(a)return a;const c=r.split("-")[0];if(a=ng(c),a)return a;if("en"===c)return eg;throw new wt(701,!1)}function q_(n){return tg(n)[ir.PluralCase]}function ng(n){return n in ad||(ad[n]=fi.ng&&fi.ng.common&&fi.ng.common.locales&&fi.ng.common.locales[n]),ad[n]}var ir=(()=>((ir=ir||{})[ir.LocaleId=0]="LocaleId",ir[ir.DayPeriodsFormat=1]="DayPeriodsFormat",ir[ir.DayPeriodsStandalone=2]="DayPeriodsStandalone",ir[ir.DaysFormat=3]="DaysFormat",ir[ir.DaysStandalone=4]="DaysStandalone",ir[ir.MonthsFormat=5]="MonthsFormat",ir[ir.MonthsStandalone=6]="MonthsStandalone",ir[ir.Eras=7]="Eras",ir[ir.FirstDayOfWeek=8]="FirstDayOfWeek",ir[ir.WeekendRange=9]="WeekendRange",ir[ir.DateFormat=10]="DateFormat",ir[ir.TimeFormat=11]="TimeFormat",ir[ir.DateTimeFormat=12]="DateTimeFormat",ir[ir.NumberSymbols=13]="NumberSymbols",ir[ir.NumberFormats=14]="NumberFormats",ir[ir.CurrencyCode=15]="CurrencyCode",ir[ir.CurrencySymbol=16]="CurrencySymbol",ir[ir.CurrencyName=17]="CurrencyName",ir[ir.Currencies=18]="Currencies",ir[ir.Directionality=19]="Directionality",ir[ir.PluralCase=20]="PluralCase",ir[ir.ExtraData=21]="ExtraData",ir))();const Uh="en-US";let e=Uh;function yv(n,r,a,c,m){if(n=Ge(n),Array.isArray(n))for(let C=0;C<n.length;C++)yv(n[C],r,a,c,m);else{const C=ni(),M=Xt();let L=Di(n)?n:Ge(n.provide),G=wc(n);const ae=Wn(),be=1048575&ae.providerIndexes,Fe=ae.directiveStart,ft=ae.providerIndexes>>20;if(Di(n)||!n.multi){const Nt=new ao(G,m,_d),hn=bv(L,r,m?be:be+ft,Fe);-1===hn?(cl(ur(ae,M),C,L),vv(C,n,r.length),r.push(L),ae.directiveStart++,ae.directiveEnd++,m&&(ae.providerIndexes+=1048576),a.push(Nt),M.push(Nt)):(a[hn]=Nt,M[hn]=Nt)}else{const Nt=bv(L,r,be+ft,Fe),hn=bv(L,r,be,be+ft),xn=Nt>=0&&a[Nt],ii=hn>=0&&a[hn];if(m&&!ii||!m&&!xn){cl(ur(ae,M),C,L);const xi=function K0(n,r,a,c,m){const C=new ao(n,a,_d);return C.multi=[],C.index=r,C.componentProviders=0,Rb(C,m,c&&!a),C}(m?$0:G0,a.length,m,c,G);!m&&ii&&(a[hn].providerFactory=xi),vv(C,n,r.length,0),r.push(L),ae.directiveStart++,ae.directiveEnd++,m&&(ae.providerIndexes+=1048576),a.push(xi),M.push(xi)}else vv(C,n,Nt>-1?Nt:hn,Rb(a[m?hn:Nt],G,!m&&c));!m&&c&&ii&&a[hn].componentProviders++}}}function vv(n,r,a,c){const m=Di(r),C=function Yc(n){return!!n.useClass}(r);if(m||C){const G=(C?Ge(r.useClass):r).prototype.ngOnDestroy;if(G){const ae=n.destroyHooks||(n.destroyHooks=[]);if(!m&&r.multi){const be=ae.indexOf(a);-1===be?ae.push(a,[c,G]):ae[be+1].push(c,G)}else ae.push(a,G)}}}function Rb(n,r,a){return a&&n.componentProviders++,n.multi.push(r)-1}function bv(n,r,a,c){for(let m=a;m<c;m++)if(r[m]===n)return m;return-1}function G0(n,r,a,c){return wv(this.multi,[])}function $0(n,r,a,c){const m=this.multi;let C;if(this.providerFactory){const M=this.providerFactory.componentProviders,L=Dn(a,a[1],this.providerFactory.index,c);C=L.slice(0,M),wv(m,C);for(let G=M;G<L.length;G++)C.push(L[G])}else C=[],wv(m,C);return C}function wv(n,r){for(let a=0;a<n.length;a++)r.push((0,n[a])());return r}function kb(n,r=[]){return a=>{a.providersResolver=(c,m)=>function z0(n,r,a){const c=ni();if(c.firstCreatePass){const m=us(n);yv(a,c.data,c.blueprint,m,!0),yv(r,c.data,c.blueprint,m,!1)}}(c,m?m(n):n,r)}}class jp{}class Ob{}function W0(n,r){return new Pb(n,r??null)}class Pb extends jp{constructor(r,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ep(this);const c=$n(r);this._bootstrapComponents=Mt(c.bootstrap),this._r3Injector=im(r,a,[{provide:jp,useValue:this},{provide:au,useValue:this.componentFactoryResolver}],Me(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Cv extends Ob{constructor(r){super(),this.moduleType=r}create(r){return new Pb(this.moduleType,r)}}class Z0 extends jp{constructor(r,a,c){super(),this.componentFactoryResolver=new Ep(this),this.instance=null;const m=new Oi([...r,{provide:jp,useValue:this},{provide:au,useValue:this.componentFactoryResolver}],a||Iu(),c,new Set(["environment"]));this.injector=m,m.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Ev(n,r,a=null){return new Z0(n,r,a).injector}let q0=(()=>{class n{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=pr(0,a.type),m=c.length>0?Ev([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,m)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Ut({token:n,providedIn:"environment",factory:()=>new n(uo(Jn))}),n})();function Nb(n){n.getStandaloneInjector=r=>r.get(q0).getOrCreateStandaloneInjector(n)}function jb(n,r,a){const c=Yr()+n,m=Xt();return m[c]===Ur?Ou(m,c,a?r.call(a):r()):Sh(m,c)}function zb(n,r,a,c){return function Zb(n,r,a,c,m,C){const M=r+a;return kc(n,M,m)?Ou(n,M+1,C?c.call(C,m):c(m)):rg(n,M+1)}(Xt(),Yr(),n,r,a,c)}function Gb(n,r,a,c,m){return function qb(n,r,a,c,m,C,M){const L=r+a;return id(n,L,m,C)?Ou(n,L+2,M?c.call(M,m,C):c(m,C)):rg(n,L+2)}(Xt(),Yr(),n,r,a,c,m)}function $b(n,r,a,c,m,C){return function Yb(n,r,a,c,m,C,M,L){const G=r+a;return function Ap(n,r,a,c,m){const C=id(n,r,a,c);return kc(n,r+2,m)||C}(n,G,m,C,M)?Ou(n,G+3,L?c.call(L,m,C,M):c(m,C,M)):rg(n,G+3)}(Xt(),Yr(),n,r,a,c,m,C)}function Kb(n,r,a,c,m,C,M){return function Qb(n,r,a,c,m,C,M,L,G){const ae=r+a;return bu(n,ae,m,C,M,L)?Ou(n,ae+4,G?c.call(G,m,C,M,L):c(m,C,M,L)):rg(n,ae+4)}(Xt(),Yr(),n,r,a,c,m,C,M)}function Wb(n,r,a,c,m,C,M,L,G){const ae=Yr()+n,be=Xt(),Fe=bu(be,ae,a,c,m,C);return id(be,ae+4,M,L)||Fe?Ou(be,ae+6,G?r.call(G,a,c,m,C,M,L):r(a,c,m,C,M,L)):Sh(be,ae+6)}function rg(n,r){const a=n[r];return a===Ur?void 0:a}function Iv(n){return r=>{setTimeout(n,void 0,r)}}const Sd=class mC extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,a,c){let m=r,C=a||(()=>null),M=c;if(r&&"object"==typeof r){const G=r;m=G.next?.bind(G),C=G.error?.bind(G),M=G.complete?.bind(G)}this.__isAsync&&(C=Iv(C),m&&(m=Iv(m)),M&&(M=Iv(M)));const L=super.subscribe({next:m,error:C,complete:M});return r instanceof i.w0&&r.add(L),L}};function gC(){return this._results[Yd()]()}class Sv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Yd(),c=Sv.prototype;c[a]||(c[a]=gC)}get changes(){return this._changes||(this._changes=new Sd)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,a){return this._results.reduce(r,a)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,a){const c=this;c.dirty=!1;const m=wo(r);(this._changesDetected=!function Lr(n,r,a){if(n.length!==r.length)return!1;for(let c=0;c<n.length;c++){let m=n[c],C=r[c];if(a&&(m=a(m),C=a(C)),C!==m)return!1}return!0}(c._results,m,a))&&(c._results=m,c.length=m.length,c.last=m[this.length-1],c.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let og=(()=>{class n{}return n.__NG_ELEMENT_ID__=vC,n})();const _C=og,yC=class extends _C{constructor(r,a,c){super(),this._declarationLView=r,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(r,a){const c=this._declarationTContainer.tViews,m=cp(this._declarationLView,c,r,16,null,c.declTNode,null,null,null,null,a||null);m[17]=this._declarationLView[this._declarationTContainer.index];const M=this._declarationLView[19];return null!==M&&(m[19]=M.createEmbeddedView(c)),up(c,m,r),new Th(m)}};function vC(){return X_(Wn(),Xt())}function X_(n,r){return 4&n.type?new yC(r,n,Su(n,r)):null}let ey=(()=>{class n{}return n.__NG_ELEMENT_ID__=bC,n})();function bC(){return tw(Wn(),Xt())}const wC=ey,Xb=class extends wC{constructor(r,a,c){super(),this._lContainer=r,this._hostTNode=a,this._hostLView=c}get element(){return Su(this._hostTNode,this._hostLView)}get injector(){return new kl(this._hostTNode,this._hostLView)}get parentInjector(){const r=ha(this._hostTNode,this._hostLView);if(Jl(r)){const a=Ya(r,this._hostLView),c=Nr(r);return new kl(a[1].data[c+8],a)}return new kl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const a=ew(this._lContainer);return null!==a&&a[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,a,c){let m,C;"number"==typeof c?m=c:null!=c&&(m=c.index,C=c.injector);const M=r.createEmbeddedView(a||{},C);return this.insert(M,m),M}createComponent(r,a,c,m,C){const M=r&&!function zl(n){return"function"==typeof n}(r);let L;if(M)L=a;else{const Fe=a||{};L=Fe.index,c=Fe.injector,m=Fe.projectableNodes,C=Fe.environmentInjector||Fe.ngModuleRef}const G=M?r:new Sf(We(r)),ae=c||this.parentInjector;if(!C&&null==G.ngModule){const ft=(M?ae:this.parentInjector).get(Jn,null);ft&&(C=ft)}const be=G.create(ae,m,void 0,C);return this.insert(be.hostView,L),be}insert(r,a){const c=r._lView,m=c[1];if(function la(n){return Wr(n[3])}(c)){const be=this.indexOf(r);if(-1!==be)this.detach(be);else{const Fe=c[3],ft=new Xb(Fe,Fe[6],Fe[3]);ft.detach(ft.indexOf(r))}}const C=this._adjustIndex(a),M=this._lContainer;!function ti(n,r,a,c){const m=10+c,C=a.length;c>0&&(a[m-1][4]=r),c<C-10?(r[4]=a[m],Gl(a,10+c,r)):(a.push(r),r[4]=null),r[3]=a;const M=r[17];null!==M&&a!==M&&function Ii(n,r){const a=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===a?n[9]=[r]:a.push(r)}(M,r);const L=r[19];null!==L&&L.insertView(n),r[2]|=64}(m,c,M,C);const L=zf(C,M),G=c[11],ae=ef(G,M[7]);return null!==ae&&function $t(n,r,a,c,m,C){c[0]=m,c[6]=r,Ud(n,c,a,1,m,C)}(m,M[6],G,c,ae,L),r.attachToViewContainerRef(),Gl(Dv(M),C,r),r}move(r,a){return this.insert(r,a)}indexOf(r){const a=ew(this._lContainer);return null!==a?a.indexOf(r):-1}remove(r){const a=this._adjustIndex(r,-1),c=ml(this._lContainer,a);c&&(xo(Dv(this._lContainer),a),oc(c[1],c))}detach(r){const a=this._adjustIndex(r,-1),c=ml(this._lContainer,a);return c&&null!=xo(Dv(this._lContainer),a)?new Th(c):null}_adjustIndex(r,a=0){return r??this.length+a}};function ew(n){return n[8]}function Dv(n){return n[8]||(n[8]=[])}function tw(n,r){let a;const c=r[n.index];if(Wr(c))a=c;else{let m;if(8&n.type)m=Pr(c);else{const C=r[11];m=C.createComment("");const M=lr(n,r);Bd(C,ef(C,M),m,function uy(n,r){return n.nextSibling(r)}(C,M),!1)}r[n.index]=a=yp(c,r,m,n),Ef(r,a)}return new Xb(a,n,r)}class xv{constructor(r){this.queryList=r,this.matches=null}clone(){return new xv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Av{constructor(r=[]){this.queries=r}createEmbeddedView(r){const a=r.queries;if(null!==a){const c=null!==r.contentQueries?r.contentQueries[0]:a.length,m=[];for(let C=0;C<c;C++){const M=a.getByIndex(C);m.push(this.queries[M.indexInDeclarationView].clone())}return new Av(m)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let a=0;a<this.queries.length;a++)null!==uw(r,a).matches&&this.queries[a].setDirty()}}class nw{constructor(r,a,c=null){this.predicate=r,this.flags=a,this.read=c}}class Mv{constructor(r=[]){this.queries=r}elementStart(r,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,a)}elementEnd(r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(r)}embeddedTView(r){let a=null;for(let c=0;c<this.length;c++){const m=null!==a?a.length:0,C=this.getByIndex(c).embeddedTView(r,m);C&&(C.indexInDeclarationView=c,null!==a?a.push(C):a=[C])}return null!==a?new Mv(a):null}template(r,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,a)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Rv{constructor(r,a=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(r,a){this.isApplyingToNode(a)&&this.matchTNode(r,a)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,a){this.elementStart(r,a)}embeddedTView(r,a){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,a),new Rv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let m=0;m<c.length;m++){const C=c[m];this.matchTNodeWithReadOption(r,a,TC(a,C)),this.matchTNodeWithReadOption(r,a,lo(a,r,C,!1,!1))}else c===og?4&a.type&&this.matchTNodeWithReadOption(r,a,-1):this.matchTNodeWithReadOption(r,a,lo(a,r,c,!1,!1))}matchTNodeWithReadOption(r,a,c){if(null!==c){const m=this.metadata.read;if(null!==m)if(m===Lu||m===ey||m===og&&4&a.type)this.addMatch(a.index,-2);else{const C=lo(a,r,m,!1,!1);null!==C&&this.addMatch(a.index,C)}else this.addMatch(a.index,c)}}addMatch(r,a){null===this.matches?this.matches=[r,a]:this.matches.push(r,a)}}function TC(n,r){const a=n.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===r)return a[c+1];return null}function SC(n,r,a,c){return-1===a?function IC(n,r){return 11&n.type?Su(n,r):4&n.type?X_(n,r):null}(r,n):-2===a?function DC(n,r,a){return a===Lu?Su(r,n):a===og?X_(r,n):a===ey?tw(r,n):void 0}(n,r,c):Dn(n,n[1],a,r)}function iw(n,r,a,c){const m=r[19].queries[c];if(null===m.matches){const C=n.data,M=a.matches,L=[];for(let G=0;G<M.length;G+=2){const ae=M[G];L.push(ae<0?null:SC(r,C[ae],M[G+1],a.metadata.read))}m.matches=L}return m.matches}function kv(n,r,a,c){const m=n.queries.getByIndex(a),C=m.matches;if(null!==C){const M=iw(n,r,m,a);for(let L=0;L<C.length;L+=2){const G=C[L];if(G>0)c.push(M[L/2]);else{const ae=C[L+1],be=r[-G];for(let Fe=10;Fe<be.length;Fe++){const ft=be[Fe];ft[17]===ft[3]&&kv(ft[1],ft,ae,c)}if(null!==be[9]){const Fe=be[9];for(let ft=0;ft<Fe.length;ft++){const Nt=Fe[ft];kv(Nt[1],Nt,ae,c)}}}}}return c}function rw(n){const r=Xt(),a=ni(),c=na();ms(c+1);const m=uw(a,c);if(n.dirty&&xa(r)===(2==(2&m.metadata.flags))){if(null===m.matches)n.reset([]);else{const C=m.crossesNgTemplate?kv(a,r,c,[]):iw(a,r,m,c);n.reset(C,jh),n.notifyOnChanges()}return!0}return!1}function sw(n,r,a){const c=ni();c.firstCreatePass&&(cw(c,new nw(n,r,a),-1),2==(2&r)&&(c.staticViewQueries=!0)),lw(c,Xt(),r)}function ow(n,r,a,c){const m=ni();if(m.firstCreatePass){const C=Wn();cw(m,new nw(r,a,c),C.index),function AC(n,r){const a=n.contentQueries||(n.contentQueries=[]);r!==(a.length?a[a.length-1]:-1)&&a.push(n.queries.length-1,r)}(m,n),2==(2&a)&&(m.staticContentQueries=!0)}lw(m,Xt(),a)}function aw(){return function xC(n,r){return n[19].queries[r].queryList}(Xt(),na())}function lw(n,r,a){const c=new Sv(4==(4&a));fp(n,r,c,c.destroy),null===r[19]&&(r[19]=new Av),r[19].queries.push(new xv(c))}function cw(n,r,a){null===n.queries&&(n.queries=new Mv),n.queries.track(new Rv(r,a))}function uw(n,r){return n.queries.getByIndex(r)}function dw(n,r){return X_(n,r)}function ny(...n){}const Mw=new An("Application Initializer");let iy=(()=>{class n{constructor(a){this.appInits=a,this.resolve=ny,this.reject=ny,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,m)=>{this.resolve=c,this.reject=m})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const C=this.appInits[m]();if(Af(C))a.push(C);else if(Nm(C)){const M=new Promise((L,G)=>{C.subscribe({complete:L,error:G})});a.push(M)}}Promise.all(a).then(()=>{c()}).catch(m=>{this.reject(m)}),0===a.length&&c(),this.initialized=!0}}return n.\u0275fac=function(a){return new(a||n)(uo(Mw,8))},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rw=new An("AppId",{providedIn:"root",factory:function kw(){return`${Lv()}${Lv()}${Lv()}`}});function Lv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ow=new An("Platform Initializer"),qC=new An("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Pw=new An("appBootstrapListener"),YC=new An("AnimationModuleType");let QC=(()=>{class n{log(a){console.log(a)}warn(a){console.warn(a)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ry=new An("LocaleId",{providedIn:"root",factory:()=>q(ry,Jt.Optional|Jt.SkipSelf)||function JC(){return typeof $localize<"u"&&$localize.locale||Uh}()}),XC=new An("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class eE{constructor(r,a){this.ngModuleFactory=r,this.componentFactories=a}}let tE=(()=>{class n{compileModuleSync(a){return new Cv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),C=Mt($n(a).declarations).reduce((M,L)=>{const G=We(L);return G&&M.push(new Sf(G)),M},[]);return new eE(c,C)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rE=(()=>Promise.resolve(0))();function Vv(n){typeof Zone>"u"?rE.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ku{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sd(!1),this.onMicrotaskEmpty=new Sd(!1),this.onStable=new Sd(!1),this.onError=new Sd(!1),typeof Zone>"u")throw new wt(908,!1);Zone.assertZonePatched();const m=this;if(m._nesting=0,m._outer=m._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const C=Zone.AsyncStackTaggingZoneSpec;m._inner=m._inner.fork(new C("Angular"))}Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!c&&a,m.shouldCoalesceRunChangeDetection=c,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function sE(){let n=fi.requestAnimationFrame,r=fi.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function lE(n){const r=()=>{!function aE(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(fi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Uv(n),n.isCheckStableRunning=!0,Bv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Uv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,m,C,M,L)=>{try{return Lw(n),a.invokeTask(m,C,M,L)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===C.type||n.shouldCoalesceRunChangeDetection)&&r(),Vw(n)}},onInvoke:(a,c,m,C,M,L,G)=>{try{return Lw(n),a.invoke(m,C,M,L,G)}finally{n.shouldCoalesceRunChangeDetection&&r(),Vw(n)}},onHasTask:(a,c,m,C)=>{a.hasTask(m,C),c===m&&("microTask"==C.change?(n._hasPendingMicrotasks=C.microTask,Uv(n),Bv(n)):"macroTask"==C.change&&(n.hasPendingMacrotasks=C.macroTask))},onHandleError:(a,c,m,C)=>(a.handleError(m,C),n.runOutsideAngular(()=>n.onError.emit(C)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ku.isInAngularZone())throw new wt(909,!1)}static assertNotInAngularZone(){if(Ku.isInAngularZone())throw new wt(909,!1)}run(r,a,c){return this._inner.run(r,a,c)}runTask(r,a,c,m){const C=this._inner,M=C.scheduleEventTask("NgZoneEvent: "+m,r,oE,ny,ny);try{return C.runTask(M,a,c)}finally{C.cancelTask(M)}}runGuarded(r,a,c){return this._inner.runGuarded(r,a,c)}runOutsideAngular(r){return this._outer.run(r)}}const oE={};function Bv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Uv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Lw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Vw(n){n._nesting--,Bv(n)}class cE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sd,this.onMicrotaskEmpty=new Sd,this.onStable=new Sd,this.onError=new Sd}run(r,a,c){return r.apply(a,c)}runGuarded(r,a,c){return r.apply(a,c)}runOutsideAngular(r){return r()}runTask(r,a,c,m){return r.apply(a,c)}}const Bw=new An(""),Uw=new An("");let Hv,uE=(()=>{class n{constructor(a,c,m){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Hv||(function dE(n){Hv=n}(m),m.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ku.assertNotInAngularZone(),Vv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,m){let C=-1;c&&c>0&&(C=setTimeout(()=>{this._callbacks=this._callbacks.filter(M=>M.timeoutId!==C),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:C,updateCb:m})}whenStable(a,c,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,m){return[]}}return n.\u0275fac=function(a){return new(a||n)(uo(Ku),uo(Hw),uo(Uw))},n.\u0275prov=Ut({token:n,factory:n.\u0275fac}),n})(),Hw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Hv?.findTestabilityInTree(this,a,c)??null}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Hh=null;const jw=new An("AllowMultipleToken"),jv=new An("PlatformDestroyListeners");class pE{constructor(r,a){this.name=r,this.token=a}}function Gw(n,r,a=[]){const c=`Platform: ${r}`,m=new An(c);return(C=[])=>{let M=zv();if(!M||M.injector.get(jw,!1)){const L=[...a,...C,{provide:m,useValue:!0}];n?n(L):function mE(n){if(Hh&&!Hh.get(jw,!1))throw new wt(400,!1);Hh=n;const r=n.get(Kw);(function zw(n){const r=n.get(Ow,null);r&&r.forEach(a=>a())})(n)}(function $w(n=[],r){return gd.create({name:r,providers:[{provide:Qc,useValue:"platform"},{provide:jv,useValue:new Set([()=>Hh=null])},...n]})}(L,c))}return function _E(n){const r=zv();if(!r)throw new wt(401,!1);return r}()}}function zv(){return Hh?.get(Kw)??null}let Kw=(()=>{class n{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const m=function Zw(n,r){let a;return a="noop"===n?new cE:("zone.js"===n?void 0:n)||new Ku(r),a}(c?.ngZone,function Ww(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(c)),C=[{provide:Ku,useValue:m}];return m.run(()=>{const M=gd.create({providers:C,parent:this.injector,name:a.moduleType.name}),L=a.create(M),G=L.injector.get(qu,null);if(!G)throw new wt(402,!1);return m.runOutsideAngular(()=>{const ae=m.onError.subscribe({next:be=>{G.handleError(be)}});L.onDestroy(()=>{oy(this._modules,L),ae.unsubscribe()})}),function qw(n,r,a){try{const c=a();return Af(c)?c.catch(m=>{throw r.runOutsideAngular(()=>n.handleError(m)),m}):c}catch(c){throw r.runOutsideAngular(()=>n.handleError(c)),c}}(G,m,()=>{const ae=L.injector.get(iy);return ae.runInitializers(),ae.donePromise.then(()=>(function t(n){Pn(n,"Expected localeId to be defined"),"string"==typeof n&&(e=n.toLowerCase().replace(/_/g,"-"))}(L.injector.get(ry,Uh)||Uh),this._moduleDoBootstrap(L),L))})})}bootstrapModule(a,c=[]){const m=Yw({},c);return function hE(n,r,a){const c=new Cv(a);return Promise.resolve(c)}(0,0,a).then(C=>this.bootstrapModuleFactory(C,m))}_moduleDoBootstrap(a){const c=a.injector.get(sy);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(m=>c.bootstrap(m));else{if(!a.instance.ngDoBootstrap)throw new wt(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new wt(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(jv,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(a){return new(a||n)(uo(gd))},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Yw(n,r){return Array.isArray(r)?r.reduce(Yw,n):{...n,...r}}let sy=(()=>{class n{constructor(a,c,m){this._zone=a,this._injector=c,this._exceptionHandler=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new se.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),M=new se.y(L=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{Ku.assertNotInAngularZone(),Vv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const ae=this._zone.onUnstable.subscribe(()=>{Ku.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{G.unsubscribe(),ae.unsubscribe()}});this.isStable=(0,ge.T)(C,M.pipe((0,Ke.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const m=a instanceof nl;if(!this._injector.get(iy).done)throw!m&&_n(a),new wt(405,false);let M;M=m?a:this._injector.get(au).resolveComponentFactory(a),this.componentTypes.push(M.componentType);const L=function fE(n){return n.isBoundToModule}(M)?void 0:this._injector.get(jp),ae=M.create(gd.NULL,[],c||M.selector,L),be=ae.location.nativeElement,Fe=ae.injector.get(Bw,null);return Fe?.registerApplication(be),ae.onDestroy(()=>{this.detachView(ae.hostView),oy(this.components,ae),Fe?.unregisterApplication(be)}),this._loadComponent(ae),ae}tick(){if(this._runningTick)throw new wt(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;oy(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Pw,[]).concat(this._bootstrapListeners).forEach(m=>m(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>oy(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new wt(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(a){return new(a||n)(uo(Ku),uo(Jn),uo(qu))},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oy(n,r){const a=n.indexOf(r);a>-1&&n.splice(a,1)}let Jw=!0,Xw=!1;function vE(){return Xw=!0,Jw}function bE(){if(Xw)throw new Error("Cannot enable prod mode after platform setup.");Jw=!1}let wE=(()=>{class n{}return n.__NG_ELEMENT_ID__=CE,n})();function CE(n){return function EE(n,r,a){if(Da(n)&&!a){const c=Yi(n.index,r);return new Th(c,c)}return 47&n.type?new Th(r[16],r):null}(Wn(),Xt(),16==(16&n))}class r0{constructor(){}supports(r){return Zl(r)}create(r){return new AE(r)}}const xE=(n,r)=>r;class AE{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||xE}forEachItem(r){let a;for(a=this._itHead;null!==a;a=a._next)r(a)}forEachOperation(r){let a=this._itHead,c=this._removalsHead,m=0,C=null;for(;a||c;){const M=!c||a&&a.currentIndex<o0(c,m,C)?a:c,L=o0(M,m,C),G=M.currentIndex;if(M===c)m--,c=c._nextRemoved;else if(a=a._next,null==M.previousIndex)m++;else{C||(C=[]);const ae=L-m,be=G-m;if(ae!=be){for(let ft=0;ft<ae;ft++){const Nt=ft<C.length?C[ft]:C[ft]=0,hn=Nt+ft;be<=hn&&hn<ae&&(C[ft]=Nt+1)}C[M.previousIndex]=be-ae}}L!==G&&r(M,L,G)}}forEachPreviousItem(r){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachMovedItem(r){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}forEachIdentityChange(r){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)r(a)}diff(r){if(null==r&&(r=[]),!Zl(r))throw new wt(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let m,C,M,a=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let L=0;L<this.length;L++)C=r[L],M=this._trackByFn(L,C),null!==a&&Object.is(a.trackById,M)?(c&&(a=this._verifyReinsertion(a,C,M,L)),Object.is(a.item,C)||this._addIdentityChange(a,C)):(a=this._mismatch(a,C,M,L),c=!0),a=a._next}else m=0,function s_(n,r){if(Array.isArray(n))for(let a=0;a<n.length;a++)r(n[a]);else{const a=n[Yd()]();let c;for(;!(c=a.next()).done;)r(c.value)}}(r,L=>{M=this._trackByFn(m,L),null!==a&&Object.is(a.trackById,M)?(c&&(a=this._verifyReinsertion(a,L,M,m)),Object.is(a.item,L)||this._addIdentityChange(a,L)):(a=this._mismatch(a,L,M,m),c=!0),a=a._next,m++}),this.length=m;return this._truncate(a),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,a,c,m){let C;return null===r?C=this._itTail:(C=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._reinsertAfter(r,C,m)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,m))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._moveAfter(r,C,m)):r=this._addAfter(new ME(a,c),C,m),r}_verifyReinsertion(r,a,c,m){let C=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==C?r=this._reinsertAfter(C,r._prev,m):r.currentIndex!=m&&(r.currentIndex=m,this._addToMoves(r,m)),r}_truncate(r){for(;null!==r;){const a=r._next;this._addToRemovals(this._unlink(r)),r=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const m=r._prevRemoved,C=r._nextRemoved;return null===m?this._removalsHead=C:m._nextRemoved=C,null===C?this._removalsTail=m:C._prevRemoved=m,this._insertAfter(r,a,c),this._addToMoves(r,c),r}_moveAfter(r,a,c){return this._unlink(r),this._insertAfter(r,a,c),this._addToMoves(r,c),r}_addAfter(r,a,c){return this._insertAfter(r,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,a,c){const m=null===a?this._itHead:a._next;return r._next=m,r._prev=a,null===m?this._itTail=r:m._prev=r,null===a?this._itHead=r:a._next=r,null===this._linkedRecords&&(this._linkedRecords=new s0),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const a=r._prev,c=r._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,r}_addToMoves(r,a){return r.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new s0),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,a){return r.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class ME{constructor(r,a){this.item=r,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RE{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const a=r._prevDup,c=r._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class s0{constructor(){this.map=new Map}put(r){const a=r.trackById;let c=this.map.get(a);c||(c=new RE,this.map.set(a,c)),c.add(r)}get(r,a){const m=this.map.get(r);return m?m.get(r,a):null}remove(r){const a=r.trackById;return this.map.get(a).remove(r)&&this.map.delete(a),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function o0(n,r,a){const c=n.previousIndex;if(null===c)return c;let m=0;return a&&c<a.length&&(m=a[c]),c+r+m}class a0{constructor(){}supports(r){return r instanceof Map||Rm(r)}create(){return new kE}}class kE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let a;for(a=this._mapHead;null!==a;a=a._next)r(a)}forEachPreviousItem(r){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)r(a)}forEachChangedItem(r){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}diff(r){if(r){if(!(r instanceof Map||Rm(r)))throw new wt(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,m)=>{if(a&&a.key===m)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const C=this._getOrCreateRecordForKey(m,c);a=this._insertBeforeOrAppend(a,C)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,a){if(r){const c=r._prev;return a._next=r,a._prev=c,r._prev=a,c&&(c._next=a),r===this._mapHead&&(this._mapHead=a),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(r,a){if(this._records.has(r)){const m=this._records.get(r);this._maybeAddToChanges(m,a);const C=m._prev,M=m._next;return C&&(C._next=M),M&&(M._prev=C),m._next=null,m._prev=null,m}const c=new OE(r);return this._records.set(r,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,a){Object.is(a,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=a,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,a){r instanceof Map?r.forEach(a):Object.keys(r).forEach(c=>a(r[c],c))}}class OE{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function l0(){return new Zv([new r0])}let Zv=(()=>{class n{constructor(a){this.factories=a}static create(a,c){if(null!=c){const m=c.factories.slice();a=a.concat(m)}return new n(a)}static extend(a){return{provide:n,useFactory:c=>n.create(a,c||l0()),deps:[[n,new ci,new yn]]}}find(a){const c=this.factories.find(m=>m.supports(a));if(null!=c)return c;throw new wt(901,!1)}}return n.\u0275prov=Ut({token:n,providedIn:"root",factory:l0}),n})();function c0(){return new qv([new a0])}let qv=(()=>{class n{constructor(a){this.factories=a}static create(a,c){if(c){const m=c.factories.slice();a=a.concat(m)}return new n(a)}static extend(a){return{provide:n,useFactory:c=>n.create(a,c||c0()),deps:[[n,new ci,new yn]]}}find(a){const c=this.factories.find(m=>m.supports(a));if(c)return c;throw new wt(901,!1)}}return n.\u0275prov=Ut({token:n,providedIn:"root",factory:c0}),n})();const FE=Gw(null,"core",[]);let LE=(()=>{class n{constructor(a){}}return n.\u0275fac=function(a){return new(a||n)(uo(sy))},n.\u0275mod=Rn({type:n}),n.\u0275inj=vt({}),n})();function VE(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(Sn,Ct,Q)=>{Q.d(Ct,{Fj:()=>dt,JJ:()=>Jt,JL:()=>Ni,JU:()=>Me,On:()=>Eo,UX:()=>Tr,_Y:()=>va,kI:()=>Be,qu:()=>ni,sg:()=>ds,u:()=>ro,u5:()=>Yl});var g=Q(4650),i=Q(6895),se=Q(8996),ge=Q(4128),Ke=Q(4004);let Ee=(()=>{class ie{constructor(W,pe){this._renderer=W,this._elementRef=pe,this.onChange=Lt=>{},this.onTouched=()=>{}}setProperty(W,pe){this._renderer.setProperty(this._elementRef.nativeElement,W,pe)}registerOnTouched(W){this.onTouched=W}registerOnChange(W){this.onChange=W}setDisabledState(W){this.setProperty("disabled",W)}}return ie.\u0275fac=function(W){return new(W||ie)(g.Y36(g.Qsj),g.Y36(g.SBq))},ie.\u0275dir=g.lG2({type:ie}),ie})(),Oe=(()=>{class ie extends Ee{}return ie.\u0275fac=function(){let X;return function(pe){return(X||(X=g.n5z(ie)))(pe||ie)}}(),ie.\u0275dir=g.lG2({type:ie,features:[g.qOj]}),ie})();const Me=new g.OlP("NgValueAccessor"),Se={provide:Me,useExisting:(0,g.Gpc)(()=>dt),multi:!0},kt=new g.OlP("CompositionEventMode");let dt=(()=>{class ie extends Ee{constructor(W,pe,Lt){super(W,pe),this._compositionMode=Lt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ge(){const ie=(0,i.q)()?(0,i.q)().getUserAgent():"";return/android (\d+)/.test(ie.toLowerCase())}())}writeValue(W){this.setProperty("value",W??"")}_handleInput(W){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(W)}_compositionStart(){this._composing=!0}_compositionEnd(W){this._composing=!1,this._compositionMode&&this.onChange(W)}}return ie.\u0275fac=function(W){return new(W||ie)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(kt,8))},ie.\u0275dir=g.lG2({type:ie,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(W,pe){1&W&&g.NdJ("input",function(Ln){return pe._handleInput(Ln.target.value)})("blur",function(){return pe.onTouched()})("compositionstart",function(){return pe._compositionStart()})("compositionend",function(Ln){return pe._compositionEnd(Ln.target.value)})},features:[g._Bn([Se]),g.qOj]}),ie})();function Wt(ie){return null==ie||("string"==typeof ie||Array.isArray(ie))&&0===ie.length}function Dt(ie){return null!=ie&&"number"==typeof ie.length}const bt=new g.OlP("NgValidators"),ot=new g.OlP("NgAsyncValidators"),qt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Be{static min(X){return function we(ie){return X=>{if(Wt(X.value)||Wt(ie))return null;const W=parseFloat(X.value);return!isNaN(W)&&W<ie?{min:{min:ie,actual:X.value}}:null}}(X)}static max(X){return function nt(ie){return X=>{if(Wt(X.value)||Wt(ie))return null;const W=parseFloat(X.value);return!isNaN(W)&&W>ie?{max:{max:ie,actual:X.value}}:null}}(X)}static required(X){return function Xe(ie){return Wt(ie.value)?{required:!0}:null}(X)}static requiredTrue(X){return function xe(ie){return!0===ie.value?null:{required:!0}}(X)}static email(X){return function ee(ie){return Wt(ie.value)||qt.test(ie.value)?null:{email:!0}}(X)}static minLength(X){return function pt(ie){return X=>Wt(X.value)||!Dt(X.value)?null:X.value.length<ie?{minlength:{requiredLength:ie,actualLength:X.value.length}}:null}(X)}static maxLength(X){return function Ue(ie){return X=>Dt(X.value)&&X.value.length>ie?{maxlength:{requiredLength:ie,actualLength:X.value.length}}:null}(X)}static pattern(X){return function st(ie){if(!ie)return Et;let X,W;return"string"==typeof ie?(W="","^"!==ie.charAt(0)&&(W+="^"),W+=ie,"$"!==ie.charAt(ie.length-1)&&(W+="$"),X=new RegExp(W)):(W=ie.toString(),X=ie),pe=>{if(Wt(pe.value))return null;const Lt=pe.value;return X.test(Lt)?null:{pattern:{requiredPattern:W,actualValue:Lt}}}}(X)}static nullValidator(X){return null}static compose(X){return Gt(X)}static composeAsync(X){return Un(X)}}function Et(ie){return null}function yt(ie){return null!=ie}function Qt(ie){return(0,g.QGY)(ie)?(0,se.D)(ie):ie}function rn(ie){let X={};return ie.forEach(W=>{X=null!=W?{...X,...W}:X}),0===Object.keys(X).length?null:X}function gn(ie,X){return X.map(W=>W(ie))}function Pn(ie){return ie.map(X=>function kn(ie){return!ie.validate}(X)?X:W=>X.validate(W))}function Gt(ie){if(!ie)return null;const X=ie.filter(yt);return 0==X.length?null:function(W){return rn(gn(W,X))}}function di(ie){return null!=ie?Gt(Pn(ie)):null}function Un(ie){if(!ie)return null;const X=ie.filter(yt);return 0==X.length?null:function(W){const pe=gn(W,X).map(Qt);return(0,ge.D)(pe).pipe((0,Ke.U)(rn))}}function xt(ie){return null!=ie?Un(Pn(ie)):null}function Ut(ie,X){return null===ie?[X]:Array.isArray(ie)?[...ie,X]:[ie,X]}function He(ie){return ie._rawValidators}function vt(ie){return ie._rawAsyncValidators}function un(ie){return ie?Array.isArray(ie)?ie:[ie]:[]}function Hn(ie,X){return Array.isArray(ie)?ie.includes(X):ie===X}function Wi(ie,X){const W=un(X);return un(ie).forEach(Lt=>{Hn(W,Lt)||W.push(Lt)}),W}function Ci(ie,X){return un(X).filter(W=>!Hn(ie,W))}class Ei{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(X){this._rawValidators=X||[],this._composedValidatorFn=di(this._rawValidators)}_setAsyncValidators(X){this._rawAsyncValidators=X||[],this._composedAsyncValidatorFn=xt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(X){this._onDestroyCallbacks.push(X)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(X=>X()),this._onDestroyCallbacks=[]}reset(X){this.control&&this.control.reset(X)}hasError(X,W){return!!this.control&&this.control.hasError(X,W)}getError(X,W){return this.control?this.control.getError(X,W):null}}class Zi extends Ei{get formDirective(){return null}get path(){return null}}class oi extends Ei{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ki{constructor(X){this._cd=X}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Jt=(()=>{class ie extends Ki{constructor(W){super(W)}}return ie.\u0275fac=function(W){return new(W||ie)(g.Y36(oi,2))},ie.\u0275dir=g.lG2({type:ie,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(W,pe){2&W&&g.ekj("ng-untouched",pe.isUntouched)("ng-touched",pe.isTouched)("ng-pristine",pe.isPristine)("ng-dirty",pe.isDirty)("ng-valid",pe.isValid)("ng-invalid",pe.isInvalid)("ng-pending",pe.isPending)},features:[g.qOj]}),ie})(),Ni=(()=>{class ie extends Ki{constructor(W){super(W)}}return ie.\u0275fac=function(W){return new(W||ie)(g.Y36(Zi,10))},ie.\u0275dir=g.lG2({type:ie,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(W,pe){2&W&&g.ekj("ng-untouched",pe.isUntouched)("ng-touched",pe.isTouched)("ng-pristine",pe.isPristine)("ng-dirty",pe.isDirty)("ng-valid",pe.isValid)("ng-invalid",pe.isInvalid)("ng-pending",pe.isPending)("ng-submitted",pe.isSubmitted)},features:[g.qOj]}),ie})();const ct="VALID",qe="INVALID",ze="PENDING",it="DISABLED";function Ye(ie){return(zi(ie)?ie.validators:ie)||null}function Zt(ie){return Array.isArray(ie)?di(ie):ie||null}function mn(ie,X){return(zi(X)?X.asyncValidators:ie)||null}function Rn(ie){return Array.isArray(ie)?xt(ie):ie||null}function zi(ie){return null!=ie&&!Array.isArray(ie)&&"object"==typeof ie}function Xi(ie,X,W){const pe=ie.controls;if(!(X?Object.keys(pe):pe).length)throw new g.vHH(1e3,"");if(!pe[W])throw new g.vHH(1001,"")}function Hr(ie,X,W){ie._forEachChild((pe,Lt)=>{if(void 0===W[Lt])throw new g.vHH(1002,"")})}class _t{constructor(X,W){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=X,this._rawAsyncValidators=W,this._composedValidatorFn=Zt(this._rawValidators),this._composedAsyncValidatorFn=Rn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(X){this._rawValidators=this._composedValidatorFn=X}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(X){this._rawAsyncValidators=this._composedAsyncValidatorFn=X}get parent(){return this._parent}get valid(){return this.status===ct}get invalid(){return this.status===qe}get pending(){return this.status==ze}get disabled(){return this.status===it}get enabled(){return this.status!==it}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(X){this._rawValidators=X,this._composedValidatorFn=Zt(X)}setAsyncValidators(X){this._rawAsyncValidators=X,this._composedAsyncValidatorFn=Rn(X)}addValidators(X){this.setValidators(Wi(X,this._rawValidators))}addAsyncValidators(X){this.setAsyncValidators(Wi(X,this._rawAsyncValidators))}removeValidators(X){this.setValidators(Ci(X,this._rawValidators))}removeAsyncValidators(X){this.setAsyncValidators(Ci(X,this._rawAsyncValidators))}hasValidator(X){return Hn(this._rawValidators,X)}hasAsyncValidator(X){return Hn(this._rawAsyncValidators,X)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(X={}){this.touched=!0,this._parent&&!X.onlySelf&&this._parent.markAsTouched(X)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(X=>X.markAllAsTouched())}markAsUntouched(X={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(W=>{W.markAsUntouched({onlySelf:!0})}),this._parent&&!X.onlySelf&&this._parent._updateTouched(X)}markAsDirty(X={}){this.pristine=!1,this._parent&&!X.onlySelf&&this._parent.markAsDirty(X)}markAsPristine(X={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(W=>{W.markAsPristine({onlySelf:!0})}),this._parent&&!X.onlySelf&&this._parent._updatePristine(X)}markAsPending(X={}){this.status=ze,!1!==X.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!X.onlySelf&&this._parent.markAsPending(X)}disable(X={}){const W=this._parentMarkedDirty(X.onlySelf);this.status=it,this.errors=null,this._forEachChild(pe=>{pe.disable({...X,onlySelf:!0})}),this._updateValue(),!1!==X.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...X,skipPristineCheck:W}),this._onDisabledChange.forEach(pe=>pe(!0))}enable(X={}){const W=this._parentMarkedDirty(X.onlySelf);this.status=ct,this._forEachChild(pe=>{pe.enable({...X,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:X.emitEvent}),this._updateAncestors({...X,skipPristineCheck:W}),this._onDisabledChange.forEach(pe=>pe(!1))}_updateAncestors(X){this._parent&&!X.onlySelf&&(this._parent.updateValueAndValidity(X),X.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(X){this._parent=X}getRawValue(){return this.value}updateValueAndValidity(X={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ct||this.status===ze)&&this._runAsyncValidator(X.emitEvent)),!1!==X.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!X.onlySelf&&this._parent.updateValueAndValidity(X)}_updateTreeValidity(X={emitEvent:!0}){this._forEachChild(W=>W._updateTreeValidity(X)),this.updateValueAndValidity({onlySelf:!0,emitEvent:X.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?it:ct}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(X){if(this.asyncValidator){this.status=ze,this._hasOwnPendingAsyncValidator=!0;const W=Qt(this.asyncValidator(this));this._asyncValidationSubscription=W.subscribe(pe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(pe,{emitEvent:X})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(X,W={}){this.errors=X,this._updateControlsErrors(!1!==W.emitEvent)}get(X){let W=X;return null==W||(Array.isArray(W)||(W=W.split(".")),0===W.length)?null:W.reduce((pe,Lt)=>pe&&pe._find(Lt),this)}getError(X,W){const pe=W?this.get(W):this;return pe&&pe.errors?pe.errors[X]:null}hasError(X,W){return!!this.getError(X,W)}get root(){let X=this;for(;X._parent;)X=X._parent;return X}_updateControlsErrors(X){this.status=this._calculateStatus(),X&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(X)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?it:this.errors?qe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ze)?ze:this._anyControlsHaveStatus(qe)?qe:ct}_anyControlsHaveStatus(X){return this._anyControls(W=>W.status===X)}_anyControlsDirty(){return this._anyControls(X=>X.dirty)}_anyControlsTouched(){return this._anyControls(X=>X.touched)}_updatePristine(X={}){this.pristine=!this._anyControlsDirty(),this._parent&&!X.onlySelf&&this._parent._updatePristine(X)}_updateTouched(X={}){this.touched=this._anyControlsTouched(),this._parent&&!X.onlySelf&&this._parent._updateTouched(X)}_registerOnCollectionChange(X){this._onCollectionChange=X}_setUpdateStrategy(X){zi(X)&&null!=X.updateOn&&(this._updateOn=X.updateOn)}_parentMarkedDirty(X){return!X&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(X){return null}}class We extends _t{constructor(X,W,pe){super(Ye(W),mn(pe,W)),this.controls=X,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(X,W){return this.controls[X]?this.controls[X]:(this.controls[X]=W,W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange),W)}addControl(X,W,pe={}){this.registerControl(X,W),this.updateValueAndValidity({emitEvent:pe.emitEvent}),this._onCollectionChange()}removeControl(X,W={}){this.controls[X]&&this.controls[X]._registerOnCollectionChange(()=>{}),delete this.controls[X],this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}setControl(X,W,pe={}){this.controls[X]&&this.controls[X]._registerOnCollectionChange(()=>{}),delete this.controls[X],W&&this.registerControl(X,W),this.updateValueAndValidity({emitEvent:pe.emitEvent}),this._onCollectionChange()}contains(X){return this.controls.hasOwnProperty(X)&&this.controls[X].enabled}setValue(X,W={}){Hr(this,0,X),Object.keys(X).forEach(pe=>{Xi(this,!0,pe),this.controls[pe].setValue(X[pe],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(X,W={}){null!=X&&(Object.keys(X).forEach(pe=>{const Lt=this.controls[pe];Lt&&Lt.patchValue(X[pe],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(X={},W={}){this._forEachChild((pe,Lt)=>{pe.reset(X[Lt],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this._reduceChildren({},(X,W,pe)=>(X[pe]=W.getRawValue(),X))}_syncPendingControls(){let X=this._reduceChildren(!1,(W,pe)=>!!pe._syncPendingControls()||W);return X&&this.updateValueAndValidity({onlySelf:!0}),X}_forEachChild(X){Object.keys(this.controls).forEach(W=>{const pe=this.controls[W];pe&&X(pe,W)})}_setUpControls(){this._forEachChild(X=>{X.setParent(this),X._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(X){for(const[W,pe]of Object.entries(this.controls))if(this.contains(W)&&X(pe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(W,pe,Lt)=>((pe.enabled||this.disabled)&&(W[Lt]=pe.value),W))}_reduceChildren(X,W){let pe=X;return this._forEachChild((Lt,Ln)=>{pe=W(pe,Lt,Ln)}),pe}_allControlsDisabled(){for(const X of Object.keys(this.controls))if(this.controls[X].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(X){return this.controls.hasOwnProperty(X)?this.controls[X]:null}}class _n extends We{}function Yn(ie,X){return[...X.path,ie]}function Ne(ie,X){It(ie,X),X.valueAccessor.writeValue(ie.value),ie.disabled&&X.valueAccessor.setDisabledState?.(!0),function vi(ie,X){X.valueAccessor.registerOnChange(W=>{ie._pendingValue=W,ie._pendingChange=!0,ie._pendingDirty=!0,"change"===ie.updateOn&&fr(ie,X)})}(ie,X),function wr(ie,X){const W=(pe,Lt)=>{X.valueAccessor.writeValue(pe),Lt&&X.viewToModelUpdate(pe)};ie.registerOnChange(W),X._registerOnDestroy(()=>{ie._unregisterOnChange(W)})}(ie,X),function Si(ie,X){X.valueAccessor.registerOnTouched(()=>{ie._pendingTouched=!0,"blur"===ie.updateOn&&ie._pendingChange&&fr(ie,X),"submit"!==ie.updateOn&&ie.markAsTouched()})}(ie,X),function ht(ie,X){if(X.valueAccessor.setDisabledState){const W=pe=>{X.valueAccessor.setDisabledState(pe)};ie.registerOnDisabledChange(W),X._registerOnDestroy(()=>{ie._unregisterOnDisabledChange(W)})}}(ie,X)}function Ve(ie,X,W=!0){const pe=()=>{};X.valueAccessor&&(X.valueAccessor.registerOnChange(pe),X.valueAccessor.registerOnTouched(pe)),En(ie,X),ie&&(X._invokeOnDestroyCallbacks(),ie._registerOnCollectionChange(()=>{}))}function De(ie,X){ie.forEach(W=>{W.registerOnValidatorChange&&W.registerOnValidatorChange(X)})}function It(ie,X){const W=He(ie);null!==X.validator?ie.setValidators(Ut(W,X.validator)):"function"==typeof W&&ie.setValidators([W]);const pe=vt(ie);null!==X.asyncValidator?ie.setAsyncValidators(Ut(pe,X.asyncValidator)):"function"==typeof pe&&ie.setAsyncValidators([pe]);const Lt=()=>ie.updateValueAndValidity();De(X._rawValidators,Lt),De(X._rawAsyncValidators,Lt)}function En(ie,X){let W=!1;if(null!==ie){if(null!==X.validator){const Lt=He(ie);if(Array.isArray(Lt)&&Lt.length>0){const Ln=Lt.filter(zr=>zr!==X.validator);Ln.length!==Lt.length&&(W=!0,ie.setValidators(Ln))}}if(null!==X.asyncValidator){const Lt=vt(ie);if(Array.isArray(Lt)&&Lt.length>0){const Ln=Lt.filter(zr=>zr!==X.asyncValidator);Ln.length!==Lt.length&&(W=!0,ie.setAsyncValidators(Ln))}}}const pe=()=>{};return De(X._rawValidators,pe),De(X._rawAsyncValidators,pe),W}function fr(ie,X){ie._pendingDirty&&ie.markAsDirty(),ie.setValue(ie._pendingValue,{emitModelToViewChange:!1}),X.viewToModelUpdate(ie._pendingValue),ie._pendingChange=!1}function ls(ie,X){if(!ie.hasOwnProperty("model"))return!1;const W=ie.model;return!!W.isFirstChange()||!Object.is(X,W.currentValue)}function Gi(ie,X){if(!X)return null;let W,pe,Lt;return Array.isArray(X),X.forEach(Ln=>{Ln.constructor===dt?W=Ln:function Ds(ie){return Object.getPrototypeOf(ie.constructor)===Oe}(Ln)?pe=Ln:Lt=Ln}),Lt||pe||W||null}function $s(ie,X){const W=ie.indexOf(X);W>-1&&ie.splice(W,1)}function Ps(ie){return"object"==typeof ie&&null!==ie&&2===Object.keys(ie).length&&"value"in ie&&"disabled"in ie}const po=class extends _t{constructor(X=null,W,pe){super(Ye(W),mn(pe,W)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(X),this._setUpdateStrategy(W),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zi(W)&&(W.nonNullable||W.initialValueIsDefault)&&(this.defaultValue=Ps(X)?X.value:X)}setValue(X,W={}){this.value=this._pendingValue=X,this._onChange.length&&!1!==W.emitModelToViewChange&&this._onChange.forEach(pe=>pe(this.value,!1!==W.emitViewToModelChange)),this.updateValueAndValidity(W)}patchValue(X,W={}){this.setValue(X,W)}reset(X=this.defaultValue,W={}){this._applyFormState(X),this.markAsPristine(W),this.markAsUntouched(W),this.setValue(this.value,W),this._pendingChange=!1}_updateValue(){}_anyControls(X){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(X){this._onChange.push(X)}_unregisterOnChange(X){$s(this._onChange,X)}registerOnDisabledChange(X){this._onDisabledChange.push(X)}_unregisterOnDisabledChange(X){$s(this._onDisabledChange,X)}_forEachChild(X){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(X){Ps(X)?(this.value=this._pendingValue=X.value,X.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=X}},rl={provide:oi,useExisting:(0,g.Gpc)(()=>Eo)},Hl=(()=>Promise.resolve(null))();let Eo=(()=>{class ie extends oi{constructor(W,pe,Lt,Ln,zr){super(),this._changeDetectorRef=zr,this.control=new po,this._registered=!1,this.update=new g.vpe,this._parent=W,this._setValidators(pe),this._setAsyncValidators(Lt),this.valueAccessor=Gi(0,Ln)}ngOnChanges(W){if(this._checkForErrors(),!this._registered||"name"in W){if(this._registered&&(this._checkName(),this.formDirective)){const pe=W.name.previousValue;this.formDirective.removeControl({name:pe,path:this._getPath(pe)})}this._setUpControl()}"isDisabled"in W&&this._updateDisabled(W),ls(W,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ne(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(W){Hl.then(()=>{this.control.setValue(W,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(W){const pe=W.isDisabled.currentValue,Lt=0!==pe&&(0,g.D6c)(pe);Hl.then(()=>{Lt&&!this.control.disabled?this.control.disable():!Lt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(W){return this._parent?Yn(W,this._parent):[W]}}return ie.\u0275fac=function(W){return new(W||ie)(g.Y36(Zi,9),g.Y36(bt,10),g.Y36(ot,10),g.Y36(Me,10),g.Y36(g.sBO,8))},ie.\u0275dir=g.lG2({type:ie,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([rl]),g.qOj,g.TTD]}),ie})(),va=(()=>{class ie{}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275dir=g.lG2({type:ie,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ie})(),Tt=(()=>{class ie{}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275mod=g.oAB({type:ie}),ie.\u0275inj=g.cJS({}),ie})();const li=new g.OlP("NgModelWithFormControlWarning"),Ks={provide:Zi,useExisting:(0,g.Gpc)(()=>ds)};let ds=(()=>{class ie extends Zi{constructor(W,pe){super(),this.validators=W,this.asyncValidators=pe,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(W),this._setAsyncValidators(pe)}ngOnChanges(W){this._checkFormPresent(),W.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(En(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(W){const pe=this.form.get(W.path);return Ne(pe,W),pe.updateValueAndValidity({emitEvent:!1}),this.directives.push(W),pe}getControl(W){return this.form.get(W.path)}removeControl(W){Ve(W.control||null,W,!1),function fo(ie,X){const W=ie.indexOf(X);W>-1&&ie.splice(W,1)}(this.directives,W)}addFormGroup(W){this._setUpFormContainer(W)}removeFormGroup(W){this._cleanUpFormContainer(W)}getFormGroup(W){return this.form.get(W.path)}addFormArray(W){this._setUpFormContainer(W)}removeFormArray(W){this._cleanUpFormContainer(W)}getFormArray(W){return this.form.get(W.path)}updateModel(W,pe){this.form.get(W.path).setValue(pe)}onSubmit(W){return this.submitted=!0,function no(ie,X){ie._syncPendingControls(),X.forEach(W=>{const pe=W.control;"submit"===pe.updateOn&&pe._pendingChange&&(W.viewToModelUpdate(pe._pendingValue),pe._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(W),!1}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_updateDomValue(){this.directives.forEach(W=>{const pe=W.control,Lt=this.form.get(W.path);pe!==Lt&&(Ve(pe||null,W),(ie=>ie instanceof po)(Lt)&&(Ne(Lt,W),W.control=Lt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(W){const pe=this.form.get(W.path);(function In(ie,X){It(ie,X)})(pe,W),pe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(W){if(this.form){const pe=this.form.get(W.path);pe&&function zs(ie,X){return En(ie,X)}(pe,W)&&pe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){It(this.form,this),this._oldForm&&En(this._oldForm,this)}_checkFormPresent(){}}return ie.\u0275fac=function(W){return new(W||ie)(g.Y36(bt,10),g.Y36(ot,10))},ie.\u0275dir=g.lG2({type:ie,selectors:[["","formGroup",""]],hostBindings:function(W,pe){1&W&&g.NdJ("submit",function(Ln){return pe.onSubmit(Ln)})("reset",function(){return pe.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Ks]),g.qOj,g.TTD]}),ie})();const Er={provide:oi,useExisting:(0,g.Gpc)(()=>ro)};let ro=(()=>{class ie extends oi{constructor(W,pe,Lt,Ln,zr){super(),this._ngModelWarningConfig=zr,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=W,this._setValidators(pe),this._setAsyncValidators(Lt),this.valueAccessor=Gi(0,Ln)}set isDisabled(W){}ngOnChanges(W){this._added||this._setUpControl(),ls(W,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}get path(){return Yn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return ie._ngModelWarningSentOnce=!1,ie.\u0275fac=function(W){return new(W||ie)(g.Y36(Zi,13),g.Y36(bt,10),g.Y36(ot,10),g.Y36(Me,10),g.Y36(li,8))},ie.\u0275dir=g.lG2({type:ie,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Er]),g.qOj,g.TTD]}),ie})(),Uo=(()=>{class ie{}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275mod=g.oAB({type:ie}),ie.\u0275inj=g.cJS({imports:[Tt]}),ie})(),Yl=(()=>{class ie{}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275mod=g.oAB({type:ie}),ie.\u0275inj=g.cJS({imports:[Uo]}),ie})(),Tr=(()=>{class ie{static withConfig(W){return{ngModule:ie,providers:[{provide:li,useValue:W.warnOnNgModelWithFormControl}]}}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275mod=g.oAB({type:ie}),ie.\u0275inj=g.cJS({imports:[Uo]}),ie})();class No extends _t{constructor(X,W,pe){super(Ye(W),mn(pe,W)),this.controls=X,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(X){return this.controls[this._adjustIndex(X)]}push(X,W={}){this.controls.push(X),this._registerControl(X),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}insert(X,W,pe={}){this.controls.splice(X,0,W),this._registerControl(W),this.updateValueAndValidity({emitEvent:pe.emitEvent})}removeAt(X,W={}){let pe=this._adjustIndex(X);pe<0&&(pe=0),this.controls[pe]&&this.controls[pe]._registerOnCollectionChange(()=>{}),this.controls.splice(pe,1),this.updateValueAndValidity({emitEvent:W.emitEvent})}setControl(X,W,pe={}){let Lt=this._adjustIndex(X);Lt<0&&(Lt=0),this.controls[Lt]&&this.controls[Lt]._registerOnCollectionChange(()=>{}),this.controls.splice(Lt,1),W&&(this.controls.splice(Lt,0,W),this._registerControl(W)),this.updateValueAndValidity({emitEvent:pe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(X,W={}){Hr(this,0,X),X.forEach((pe,Lt)=>{Xi(this,!1,Lt),this.at(Lt).setValue(pe,{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(X,W={}){null!=X&&(X.forEach((pe,Lt)=>{this.at(Lt)&&this.at(Lt).patchValue(pe,{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(X=[],W={}){this._forEachChild((pe,Lt)=>{pe.reset(X[Lt],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this.controls.map(X=>X.getRawValue())}clear(X={}){this.controls.length<1||(this._forEachChild(W=>W._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:X.emitEvent}))}_adjustIndex(X){return X<0?X+this.length:X}_syncPendingControls(){let X=this.controls.reduce((W,pe)=>!!pe._syncPendingControls()||W,!1);return X&&this.updateValueAndValidity({onlySelf:!0}),X}_forEachChild(X){this.controls.forEach((W,pe)=>{X(W,pe)})}_updateValue(){this.value=this.controls.filter(X=>X.enabled||this.disabled).map(X=>X.value)}_anyControls(X){return this.controls.some(W=>W.enabled&&X(W))}_setUpControls(){this._forEachChild(X=>this._registerControl(X))}_allControlsDisabled(){for(const X of this.controls)if(X.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(X){X.setParent(this),X._registerOnCollectionChange(this._onCollectionChange)}_find(X){return this.at(X)??null}}function Xt(ie){return!!ie&&(void 0!==ie.asyncValidators||void 0!==ie.validators||void 0!==ie.updateOn)}let ni=(()=>{class ie{constructor(){this.useNonNullable=!1}get nonNullable(){const W=new ie;return W.useNonNullable=!0,W}group(W,pe=null){const Lt=this._reduceControls(W);let Ln={};return Xt(pe)?Ln=pe:null!==pe&&(Ln.validators=pe.validator,Ln.asyncValidators=pe.asyncValidator),new We(Lt,Ln)}record(W,pe=null){const Lt=this._reduceControls(W);return new _n(Lt,pe)}control(W,pe,Lt){let Ln={};return this.useNonNullable?(Xt(pe)?Ln=pe:(Ln.validators=pe,Ln.asyncValidators=Lt),new po(W,{...Ln,nonNullable:!0})):new po(W,pe,Lt)}array(W,pe,Lt){const Ln=W.map(zr=>this._createControl(zr));return new No(Ln,pe,Lt)}_reduceControls(W){const pe={};return Object.keys(W).forEach(Lt=>{pe[Lt]=this._createControl(W[Lt])}),pe}_createControl(W){return W instanceof po||W instanceof _t?W:Array.isArray(W)?this.control(W[0],W.length>1?W[1]:null,W.length>2?W[2]:null):this.control(W)}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275prov=g.Yz7({token:ie,factory:ie.\u0275fac,providedIn:Tr}),ie})()},3928:(Sn,Ct,Q)=>{Q.d(Ct,{Ps:()=>Kc});var g=Q(4650),i=Q(6895);let se;try{se=typeof Intl<"u"&&Intl.v8BreakIterator}catch{se=!1}let ge=(()=>{class fe{constructor(K){this._platformId=K,this.isBrowser=this._platformId?(0,i.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!se)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return fe.\u0275fac=function(K){return new(K||fe)(g.LFG(g.Lbi))},fe.\u0275prov=g.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})();function Ks(fe){return Array.isArray(fe)?fe:[fe]}var jr=Q(7579),ko=Q(9841),Oo=Q(7272),Er=Q(9751),ro=Q(5698),_o=Q(9300),Xo=Q(8372),es=Q(4004),ea=Q(8675),yo=Q(4482),za=Q(5403),As=Q(8421),vo=Q(5032);function Or(fe){return(0,yo.e)(($,K)=>{(0,As.Xf)(fe).subscribe((0,za.x)(K,()=>K.complete(),vo.Z)),!K.closed&&$.subscribe(K)})}const Zr=new Set;let hs,Ai=(()=>{class fe{constructor(K){this._platform=K,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Pr}matchMedia(K){return(this._platform.WEBKIT||this._platform.BLINK)&&function To(fe){if(!Zr.has(fe))try{hs||(hs=document.createElement("style"),hs.setAttribute("type","text/css"),document.head.appendChild(hs)),hs.sheet&&(hs.sheet.insertRule(`@media ${fe} {body{ }}`,0),Zr.add(fe))}catch($){console.error($)}}(K),this._matchMedia(K)}}return fe.\u0275fac=function(K){return new(K||fe)(g.LFG(ge))},fe.\u0275prov=g.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})();function Pr(fe){return{matches:"all"===fe||""===fe,media:fe,addListener:()=>{},removeListener:()=>{}}}let Bo=(()=>{class fe{constructor(K,ve){this._mediaMatcher=K,this._zone=ve,this._queries=new Map,this._destroySubject=new jr.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(K){return bo(Ks(K)).some(Je=>this._registerQuery(Je).mql.matches)}observe(K){const Je=bo(Ks(K)).map(vn=>this._registerQuery(vn).observable);let Ot=(0,ko.a)(Je);return Ot=(0,Oo.z)(Ot.pipe((0,ro.q)(1)),Ot.pipe(function sl(fe){return(0,_o.h)(($,K)=>fe<=K)}(1),(0,Xo.b)(0))),Ot.pipe((0,es.U)(vn=>{const bi={matches:!1,breakpoints:{}};return vn.forEach(({matches:Qn,query:Es})=>{bi.matches=bi.matches||Qn,bi.breakpoints[Es]=Qn}),bi}))}_registerQuery(K){if(this._queries.has(K))return this._queries.get(K);const ve=this._mediaMatcher.matchMedia(K),Ot={observable:new Er.y(vn=>{const bi=Qn=>this._zone.run(()=>vn.next(Qn));return ve.addListener(bi),()=>{ve.removeListener(bi)}}).pipe((0,ea.O)(ve),(0,es.U)(({matches:vn})=>({query:K,matches:vn})),Or(this._destroySubject)),mql:ve};return this._queries.set(K,Ot),Ot}}return fe.\u0275fac=function(K){return new(K||fe)(g.LFG(Ai),g.LFG(g.R0b))},fe.\u0275prov=g.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})();function bo(fe){return fe.map($=>$.split(",")).reduce(($,K)=>$.concat(K)).map($=>$.trim())}const Ml="cdk-high-contrast-black-on-white",z="cdk-high-contrast-white-on-black",le="cdk-high-contrast-active";let Y=(()=>{class fe{constructor(K,ve){this._platform=K,this._document=ve,this._breakpointSubscription=(0,g.f3M)(Bo).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const K=this._document.createElement("div");K.style.backgroundColor="rgb(1,2,3)",K.style.position="absolute",this._document.body.appendChild(K);const ve=this._document.defaultView||window,Je=ve&&ve.getComputedStyle?ve.getComputedStyle(K):null,Ot=(Je&&Je.backgroundColor||"").replace(/ /g,"");switch(K.remove(),Ot){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const K=this._document.body.classList;K.remove(le,Ml,z),this._hasCheckedHighContrastMode=!0;const ve=this.getHighContrastMode();1===ve?K.add(le,Ml):2===ve&&K.add(le,z)}}}return fe.\u0275fac=function(K){return new(K||fe)(g.LFG(ge),g.LFG(i.K0))},fe.\u0275prov=g.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})(),nr=(()=>{class fe{}return fe.\u0275fac=function(K){return new(K||fe)},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({}),fe})();const ua=new g.OlP("mat-sanity-checks",{providedIn:"root",factory:function ao(){return!0}});let Oa=(()=>{class fe{constructor(K,ve,Je){this._sanityChecks=ve,this._document=Je,this._hasDoneGlobalChecks=!1,K._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(K){return!function Be(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[K])}}return fe.\u0275fac=function(K){return new(K||fe)(g.LFG(Y),g.LFG(ua,8),g.LFG(i.K0))},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({imports:[nr,nr]}),fe})();Q(9646),Q(2843),Q(4128),Q(8505),Q(262),Q(8746),Q(3099),Q(4351),Q(1481);let Kc=(()=>{class fe{}return fe.\u0275fac=function(K){return new(K||fe)},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({imports:[Oa,Oa]}),fe})()},1481:(Sn,Ct,Q)=>{Q.d(Ct,{Dx:()=>br,H7:()=>zt,b2:()=>Hi,q6:()=>Ui,se:()=>yt});var g=Q(6895),i=Q(4650);class se extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ge extends se{static makeCurrent(){(0,g.HT)(new ge)}onAndCancel(Ve,De,ht){return Ve.addEventListener(De,ht,!1),()=>{Ve.removeEventListener(De,ht,!1)}}dispatchEvent(Ve,De){Ve.dispatchEvent(De)}remove(Ve){Ve.parentNode&&Ve.parentNode.removeChild(Ve)}createElement(Ve,De){return(De=De||this.getDefaultDocument()).createElement(Ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ve){return Ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ve){return Ve instanceof DocumentFragment}getGlobalEventTarget(Ve,De){return"window"===De?window:"document"===De?Ve:"body"===De?Ve.body:null}getBaseHref(Ve){const De=function Ee(){return Ke=Ke||document.querySelector("base"),Ke?Ke.getAttribute("href"):null}();return null==De?null:function Me(Ne){Oe=Oe||document.createElement("a"),Oe.setAttribute("href",Ne);const Ve=Oe.pathname;return"/"===Ve.charAt(0)?Ve:`/${Ve}`}(De)}resetBaseElement(){Ke=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ve){return(0,g.Mx)(document.cookie,Ve)}}let Oe,Ke=null;const rt=new i.OlP("TRANSITION_ID"),Se=[{provide:i.ip1,useFactory:function Re(Ne,Ve,De){return()=>{De.get(i.CZH).donePromise.then(()=>{const ht=(0,g.q)(),It=Ve.querySelectorAll(`style[ng-transition="${Ne}"]`);for(let En=0;En<It.length;En++)ht.remove(It[En])})}},deps:[rt,g.K0,i.zs3],multi:!0}];let kt=(()=>{class Ne{build(){return new XMLHttpRequest}}return Ne.\u0275fac=function(De){return new(De||Ne)},Ne.\u0275prov=i.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();const dt=new i.OlP("EventManagerPlugins");let wt=(()=>{class Ne{constructor(De,ht){this._zone=ht,this._eventNameToPlugin=new Map,De.forEach(It=>It.manager=this),this._plugins=De.slice().reverse()}addEventListener(De,ht,It){return this._findPluginFor(ht).addEventListener(De,ht,It)}addGlobalEventListener(De,ht,It){return this._findPluginFor(ht).addGlobalEventListener(De,ht,It)}getZone(){return this._zone}_findPluginFor(De){const ht=this._eventNameToPlugin.get(De);if(ht)return ht;const It=this._plugins;for(let En=0;En<It.length;En++){const vi=It[En];if(vi.supports(De))return this._eventNameToPlugin.set(De,vi),vi}throw new Error(`No event manager plugin found for event ${De}`)}}return Ne.\u0275fac=function(De){return new(De||Ne)(i.LFG(dt),i.LFG(i.R0b))},Ne.\u0275prov=i.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();class Wt{constructor(Ve){this._doc=Ve}addGlobalEventListener(Ve,De,ht){const It=(0,g.q)().getGlobalEventTarget(this._doc,Ve);if(!It)throw new Error(`Unsupported event target ${It} for event ${De}`);return this.addEventListener(It,De,ht)}}let Dt=(()=>{class Ne{constructor(){this._stylesSet=new Set}addStyles(De){const ht=new Set;De.forEach(It=>{this._stylesSet.has(It)||(this._stylesSet.add(It),ht.add(It))}),this.onStylesAdded(ht)}onStylesAdded(De){}getAllStyles(){return Array.from(this._stylesSet)}}return Ne.\u0275fac=function(De){return new(De||Ne)},Ne.\u0275prov=i.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})(),bt=(()=>{class Ne extends Dt{constructor(De){super(),this._doc=De,this._hostNodes=new Map,this._hostNodes.set(De.head,[])}_addStylesToHost(De,ht,It){De.forEach(En=>{const vi=this._doc.createElement("style");vi.textContent=En,It.push(ht.appendChild(vi))})}addHost(De){const ht=[];this._addStylesToHost(this._stylesSet,De,ht),this._hostNodes.set(De,ht)}removeHost(De){const ht=this._hostNodes.get(De);ht&&ht.forEach(ot),this._hostNodes.delete(De)}onStylesAdded(De){this._hostNodes.forEach((ht,It)=>{this._addStylesToHost(De,It,ht)})}ngOnDestroy(){this._hostNodes.forEach(De=>De.forEach(ot))}}return Ne.\u0275fac=function(De){return new(De||Ne)(i.LFG(g.K0))},Ne.\u0275prov=i.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();function ot(Ne){(0,g.q)().remove(Ne)}const qt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Be=/%COMP%/g;function Ue(Ne,Ve,De){for(let ht=0;ht<Ve.length;ht++){let It=Ve[ht];Array.isArray(It)?Ue(Ne,It,De):(It=It.replace(Be,Ne),De.push(It))}return De}function st(Ne){return Ve=>{if("__ngUnwrap__"===Ve)return Ne;!1===Ne(Ve)&&(Ve.preventDefault(),Ve.returnValue=!1)}}let yt=(()=>{class Ne{constructor(De,ht,It){this.eventManager=De,this.sharedStylesHost=ht,this.appId=It,this.rendererByCompId=new Map,this.defaultRenderer=new Qt(De)}createRenderer(De,ht){if(!De||!ht)return this.defaultRenderer;switch(ht.encapsulation){case i.ifc.Emulated:{let It=this.rendererByCompId.get(ht.id);return It||(It=new Pn(this.eventManager,this.sharedStylesHost,ht,this.appId),this.rendererByCompId.set(ht.id,It)),It.applyToHost(De),It}case 1:case i.ifc.ShadowDom:return new Gt(this.eventManager,this.sharedStylesHost,De,ht);default:if(!this.rendererByCompId.has(ht.id)){const It=Ue(ht.id,ht.styles,[]);this.sharedStylesHost.addStyles(It),this.rendererByCompId.set(ht.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ne.\u0275fac=function(De){return new(De||Ne)(i.LFG(wt),i.LFG(bt),i.LFG(i.AFp))},Ne.\u0275prov=i.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();class Qt{constructor(Ve){this.eventManager=Ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ve,De){return De?document.createElementNS(qt[De]||De,Ve):document.createElement(Ve)}createComment(Ve){return document.createComment(Ve)}createText(Ve){return document.createTextNode(Ve)}appendChild(Ve,De){(kn(Ve)?Ve.content:Ve).appendChild(De)}insertBefore(Ve,De,ht){Ve&&(kn(Ve)?Ve.content:Ve).insertBefore(De,ht)}removeChild(Ve,De){Ve&&Ve.removeChild(De)}selectRootElement(Ve,De){let ht="string"==typeof Ve?document.querySelector(Ve):Ve;if(!ht)throw new Error(`The selector "${Ve}" did not match any elements`);return De||(ht.textContent=""),ht}parentNode(Ve){return Ve.parentNode}nextSibling(Ve){return Ve.nextSibling}setAttribute(Ve,De,ht,It){if(It){De=It+":"+De;const En=qt[It];En?Ve.setAttributeNS(En,De,ht):Ve.setAttribute(De,ht)}else Ve.setAttribute(De,ht)}removeAttribute(Ve,De,ht){if(ht){const It=qt[ht];It?Ve.removeAttributeNS(It,De):Ve.removeAttribute(`${ht}:${De}`)}else Ve.removeAttribute(De)}addClass(Ve,De){Ve.classList.add(De)}removeClass(Ve,De){Ve.classList.remove(De)}setStyle(Ve,De,ht,It){It&(i.JOm.DashCase|i.JOm.Important)?Ve.style.setProperty(De,ht,It&i.JOm.Important?"important":""):Ve.style[De]=ht}removeStyle(Ve,De,ht){ht&i.JOm.DashCase?Ve.style.removeProperty(De):Ve.style[De]=""}setProperty(Ve,De,ht){Ve[De]=ht}setValue(Ve,De){Ve.nodeValue=De}listen(Ve,De,ht){return"string"==typeof Ve?this.eventManager.addGlobalEventListener(Ve,De,st(ht)):this.eventManager.addEventListener(Ve,De,st(ht))}}function kn(Ne){return"TEMPLATE"===Ne.tagName&&void 0!==Ne.content}class Pn extends Qt{constructor(Ve,De,ht,It){super(Ve),this.component=ht;const En=Ue(It+"-"+ht.id,ht.styles,[]);De.addStyles(En),this.contentAttr=function ee(Ne){return"_ngcontent-%COMP%".replace(Be,Ne)}(It+"-"+ht.id),this.hostAttr=function pt(Ne){return"_nghost-%COMP%".replace(Be,Ne)}(It+"-"+ht.id)}applyToHost(Ve){super.setAttribute(Ve,this.hostAttr,"")}createElement(Ve,De){const ht=super.createElement(Ve,De);return super.setAttribute(ht,this.contentAttr,""),ht}}class Gt extends Qt{constructor(Ve,De,ht,It){super(Ve),this.sharedStylesHost=De,this.hostEl=ht,this.shadowRoot=ht.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const En=Ue(It.id,It.styles,[]);for(let vi=0;vi<En.length;vi++){const Si=document.createElement("style");Si.textContent=En[vi],this.shadowRoot.appendChild(Si)}}nodeOrShadowRoot(Ve){return Ve===this.hostEl?this.shadowRoot:Ve}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ve,De){return super.appendChild(this.nodeOrShadowRoot(Ve),De)}insertBefore(Ve,De,ht){return super.insertBefore(this.nodeOrShadowRoot(Ve),De,ht)}removeChild(Ve,De){return super.removeChild(this.nodeOrShadowRoot(Ve),De)}parentNode(Ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ve)))}}let di=(()=>{class Ne extends Wt{constructor(De){super(De)}supports(De){return!0}addEventListener(De,ht,It){return De.addEventListener(ht,It,!1),()=>this.removeEventListener(De,ht,It)}removeEventListener(De,ht,It){return De.removeEventListener(ht,It)}}return Ne.\u0275fac=function(De){return new(De||Ne)(i.LFG(g.K0))},Ne.\u0275prov=i.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();const Un=["alt","control","meta","shift"],xt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ut={alt:Ne=>Ne.altKey,control:Ne=>Ne.ctrlKey,meta:Ne=>Ne.metaKey,shift:Ne=>Ne.shiftKey};let He=(()=>{class Ne extends Wt{constructor(De){super(De)}supports(De){return null!=Ne.parseEventName(De)}addEventListener(De,ht,It){const En=Ne.parseEventName(ht),vi=Ne.eventCallback(En.fullKey,It,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(De,En.domEventName,vi))}static parseEventName(De){const ht=De.toLowerCase().split("."),It=ht.shift();if(0===ht.length||"keydown"!==It&&"keyup"!==It)return null;const En=Ne._normalizeKey(ht.pop());let vi="",Si=ht.indexOf("code");if(Si>-1&&(ht.splice(Si,1),vi="code."),Un.forEach(wr=>{const In=ht.indexOf(wr);In>-1&&(ht.splice(In,1),vi+=wr+".")}),vi+=En,0!=ht.length||0===En.length)return null;const fr={};return fr.domEventName=It,fr.fullKey=vi,fr}static matchEventFullKeyCode(De,ht){let It=xt[De.key]||De.key,En="";return ht.indexOf("code.")>-1&&(It=De.code,En="code."),!(null==It||!It)&&(It=It.toLowerCase()," "===It?It="space":"."===It&&(It="dot"),Un.forEach(vi=>{vi!==It&&(0,Ut[vi])(De)&&(En+=vi+".")}),En+=It,En===ht)}static eventCallback(De,ht,It){return En=>{Ne.matchEventFullKeyCode(En,De)&&It.runGuarded(()=>ht(En))}}static _normalizeKey(De){return"esc"===De?"escape":De}}return Ne.\u0275fac=function(De){return new(De||Ne)(i.LFG(g.K0))},Ne.\u0275prov=i.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();const Ui=(0,i.eFA)(i._c5,"browser",[{provide:i.Lbi,useValue:g.bD},{provide:i.g9A,useValue:function Ei(){ge.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function oi(){return(0,i.RDi)(document),document},deps:[]}]),yi=new i.OlP(""),Jt=[{provide:i.rWj,useClass:class Ge{addToWindow(Ve){i.dqk.getAngularTestability=(ht,It=!0)=>{const En=Ve.findTestabilityInTree(ht,It);if(null==En)throw new Error("Could not find testability for element.");return En},i.dqk.getAllAngularTestabilities=()=>Ve.getAllTestabilities(),i.dqk.getAllAngularRootElements=()=>Ve.getAllRootElements(),i.dqk.frameworkStabilizers||(i.dqk.frameworkStabilizers=[]),i.dqk.frameworkStabilizers.push(ht=>{const It=i.dqk.getAllAngularTestabilities();let En=It.length,vi=!1;const Si=function(fr){vi=vi||fr,En--,0==En&&ht(vi)};It.forEach(function(fr){fr.whenStable(Si)})})}findTestabilityInTree(Ve,De,ht){return null==De?null:Ve.getTestability(De)??(ht?(0,g.q)().isShadowRoot(De)?this.findTestabilityInTree(Ve,De.host,!0):this.findTestabilityInTree(Ve,De.parentElement,!0):null)}},deps:[]},{provide:i.lri,useClass:i.dDg,deps:[i.R0b,i.eoX,i.rWj]},{provide:i.dDg,useClass:i.dDg,deps:[i.R0b,i.eoX,i.rWj]}],Ni=[{provide:i.zSh,useValue:"root"},{provide:i.qLn,useFactory:function Zi(){return new i.qLn},deps:[]},{provide:dt,useClass:di,multi:!0,deps:[g.K0,i.R0b,i.Lbi]},{provide:dt,useClass:He,multi:!0,deps:[g.K0]},{provide:yt,useClass:yt,deps:[wt,bt,i.AFp]},{provide:i.FYo,useExisting:yt},{provide:Dt,useExisting:bt},{provide:bt,useClass:bt,deps:[g.K0]},{provide:wt,useClass:wt,deps:[dt,i.R0b]},{provide:g.JF,useClass:kt,deps:[]},[]];let Hi=(()=>{class Ne{constructor(De){}static withServerTransition(De){return{ngModule:Ne,providers:[{provide:i.AFp,useValue:De.appId},{provide:rt,useExisting:i.AFp},Se]}}}return Ne.\u0275fac=function(De){return new(De||Ne)(i.LFG(yi,12))},Ne.\u0275mod=i.oAB({type:Ne}),Ne.\u0275inj=i.cJS({providers:[...Ni,...Jt],imports:[g.ez,i.hGG]}),Ne})(),br=(()=>{class Ne{constructor(De){this._doc=De}getTitle(){return this._doc.title}setTitle(De){this._doc.title=De||""}}return Ne.\u0275fac=function(De){return new(De||Ne)(i.LFG(g.K0))},Ne.\u0275prov=i.Yz7({token:Ne,factory:function(De){let ht=null;return ht=De?new De:function xr(){return new br((0,i.LFG)(g.K0))}(),ht},providedIn:"root"}),Ne})();typeof window<"u"&&window;let zt=(()=>{class Ne{}return Ne.\u0275fac=function(De){return new(De||Ne)},Ne.\u0275prov=i.Yz7({token:Ne,factory:function(De){let ht=null;return ht=De?new(De||Ne):i.LFG($n),ht},providedIn:"root"}),Ne})(),$n=(()=>{class Ne extends zt{constructor(De){super(),this._doc=De}sanitize(De,ht){if(null==ht)return null;switch(De){case i.q3G.NONE:return ht;case i.q3G.HTML:return(0,i.qzn)(ht,"HTML")?(0,i.z3N)(ht):(0,i.EiD)(this._doc,String(ht)).toString();case i.q3G.STYLE:return(0,i.qzn)(ht,"Style")?(0,i.z3N)(ht):ht;case i.q3G.SCRIPT:if((0,i.qzn)(ht,"Script"))return(0,i.z3N)(ht);throw new Error("unsafe value used in a script context");case i.q3G.URL:return(0,i.qzn)(ht,"URL")?(0,i.z3N)(ht):(0,i.mCW)(String(ht));case i.q3G.RESOURCE_URL:if((0,i.qzn)(ht,"ResourceURL"))return(0,i.z3N)(ht);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${De} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(De){return(0,i.JVY)(De)}bypassSecurityTrustStyle(De){return(0,i.L6k)(De)}bypassSecurityTrustScript(De){return(0,i.eBb)(De)}bypassSecurityTrustUrl(De){return(0,i.LAX)(De)}bypassSecurityTrustResourceUrl(De){return(0,i.pB0)(De)}}return Ne.\u0275fac=function(De){return new(De||Ne)(i.LFG(g.K0))},Ne.\u0275prov=i.Yz7({token:Ne,factory:function(De){let ht=null;return ht=De?new De:function _n(Ne){return new $n(Ne.get(g.K0))}(i.LFG(i.zs3)),ht},providedIn:"root"}),Ne})()},1211:(Sn,Ct,Q)=>{Q.d(Ct,{gz:()=>ds,F0:()=>Fn,rH:()=>Ht,yS:()=>sn,Bz:()=>hl,lC:()=>Ai});var g=Q(4650),i=Q(8996),se=Q(9646),ge=Q(7579);class Ke extends ge.x{constructor(N){super(),this._value=N}get value(){return this.getValue()}_subscribe(N){const R=super._subscribe(N);return!R.closed&&N.next(this._value),R}getValue(){const{hasError:N,thrownError:R,_value:H}=this;if(N)throw R;return this._throwIfClosed(),H}next(N){super.next(this._value=N)}}var Ee=Q(6805),Oe=Q(9841),Me=Q(7272),rt=Q(9751),Re=Q(8421);function Se(D){return new rt.y(N=>{(0,Re.Xf)(D()).subscribe(N)})}var Ge=Q(9635),kt=Q(2843),dt=Q(515),wt=Q(727),Wt=Q(4482),Dt=Q(5403);function bt(){return(0,Wt.e)((D,N)=>{let R=null;D._refCount++;const H=(0,Dt.x)(N,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(R=null);const te=D._connection,me=R;R=null,te&&(!me||te===me)&&te.unsubscribe(),N.unsubscribe()});D.subscribe(H),H.closed||(R=D.connect())})}class ot extends rt.y{constructor(N,R){super(),this.source=N,this.subjectFactory=R,this._subject=null,this._refCount=0,this._connection=null,(0,Wt.A)(N)&&(this.lift=N.lift)}_subscribe(N){return this.getSubject().subscribe(N)}getSubject(){const N=this._subject;return(!N||N.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:N}=this;this._subject=this._connection=null,N?.unsubscribe()}connect(){let N=this._connection;if(!N){N=this._connection=new wt.w0;const R=this.getSubject();N.add(this.source.subscribe((0,Dt.x)(R,void 0,()=>{this._teardown(),R.complete()},H=>{this._teardown(),R.error(H)},()=>this._teardown()))),N.closed&&(this._connection=null,N=wt.w0.EMPTY)}return N}refCount(){return bt()(this)}}var qt=Q(6895),Be=Q(4004),we=Q(3900),nt=Q(5698),Xe=Q(8675),xe=Q(9300),ee=Q(5577),pt=Q(590),Ue=Q(4351),st=Q(8505),Et=Q(262),yt=Q(5026);function Qt(D){return D<=0?()=>dt.E:(0,Wt.e)((N,R)=>{let H=[];N.subscribe((0,Dt.x)(R,te=>{H.push(te),D<H.length&&H.shift()},()=>{for(const te of H)R.next(te);R.complete()},void 0,()=>{H=null}))})}var rn=Q(8068),gn=Q(6590),kn=Q(4671);function Pn(D,N){const R=arguments.length>=2;return H=>H.pipe(D?(0,xe.h)((te,me)=>D(te,me,H)):kn.y,Qt(1),R?(0,gn.d)(N):(0,rn.T)(()=>new Ee.K))}var Un=Q(8746),xt=Q(8189),Ut=Q(1481);const He="primary",vt=Symbol("RouteTitle");class un{constructor(N){this.params=N||{}}has(N){return Object.prototype.hasOwnProperty.call(this.params,N)}get(N){if(this.has(N)){const R=this.params[N];return Array.isArray(R)?R[0]:R}return null}getAll(N){if(this.has(N)){const R=this.params[N];return Array.isArray(R)?R:[R]}return[]}get keys(){return Object.keys(this.params)}}function Hn(D){return new un(D)}function Wi(D,N,R){const H=R.path.split("/");if(H.length>D.length||"full"===R.pathMatch&&(N.hasChildren()||H.length<D.length))return null;const te={};for(let me=0;me<H.length;me++){const Pe=H[me],Ze=D[me];if(Pe.startsWith(":"))te[Pe.substring(1)]=Ze;else if(Pe!==Ze.path)return null}return{consumed:D.slice(0,H.length),posParams:te}}function Ei(D,N){const R=D?Object.keys(D):void 0,H=N?Object.keys(N):void 0;if(!R||!H||R.length!=H.length)return!1;let te;for(let me=0;me<R.length;me++)if(te=R[me],!Zi(D[te],N[te]))return!1;return!0}function Zi(D,N){if(Array.isArray(D)&&Array.isArray(N)){if(D.length!==N.length)return!1;const R=[...D].sort(),H=[...N].sort();return R.every((te,me)=>H[me]===te)}return D===N}function oi(D){return Array.prototype.concat.apply([],D)}function Ki(D){return D.length>0?D[D.length-1]:null}function yi(D,N){for(const R in D)D.hasOwnProperty(R)&&N(D[R],R)}function Jt(D){return(0,g.CqO)(D)?D:(0,g.QGY)(D)?(0,i.D)(Promise.resolve(D)):(0,se.of)(D)}const Qi={exact:function br(D,N,R){if(!or(D.segments,N.segments)||!fi(D.segments,N.segments,R)||D.numberOfChildren!==N.numberOfChildren)return!1;for(const H in N.children)if(!D.children[H]||!br(D.children[H],N.children[H],R))return!1;return!0},subset:Kn},Jr={exact:function xr(D,N){return Ei(D,N)},subset:function Ji(D,N){return Object.keys(N).length<=Object.keys(D).length&&Object.keys(N).every(R=>Zi(D[R],N[R]))},ignored:()=>!0};function sr(D,N,R){return Qi[R.paths](D.root,N.root,R.matrixParams)&&Jr[R.queryParams](D.queryParams,N.queryParams)&&!("exact"===R.fragment&&D.fragment!==N.fragment)}function Kn(D,N,R){return Gn(D,N,N.segments,R)}function Gn(D,N,R,H){if(D.segments.length>R.length){const te=D.segments.slice(0,R.length);return!(!or(te,R)||N.hasChildren()||!fi(te,R,H))}if(D.segments.length===R.length){if(!or(D.segments,R)||!fi(D.segments,R,H))return!1;for(const te in N.children)if(!D.children[te]||!Kn(D.children[te],N.children[te],H))return!1;return!0}{const te=R.slice(0,D.segments.length),me=R.slice(D.segments.length);return!!(or(D.segments,te)&&fi(D.segments,te,H)&&D.children[He])&&Gn(D.children[He],N,me,H)}}function fi(D,N,R){return N.every((H,te)=>Jr[R](D[te].parameters,H.parameters))}class Ar{constructor(N,R,H){this.root=N,this.queryParams=R,this.fragment=H}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return ct.serialize(this)}}class Mn{constructor(N,R){this.segments=N,this.children=R,this.parent=null,yi(R,(H,te)=>H.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qe(this)}}class ji{constructor(N,R){this.path=N,this.parameters=R}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return Xi(this)}}function or(D,N){return D.length===N.length&&D.every((R,H)=>R.path===N[H].path)}let vs=(()=>{class D{}return D.\u0275fac=function(R){return new(R||D)},D.\u0275prov=g.Yz7({token:D,factory:function(){return new qn},providedIn:"root"}),D})();class qn{parse(N){const R=new Ne(N);return new Ar(R.parseRootSegment(),R.parseQueryParams(),R.parseFragment())}serialize(N){const R=`/${ze(N.root,!0)}`,H=function _t(D){const N=Object.keys(D).map(R=>{const H=D[R];return Array.isArray(H)?H.map(te=>`${Ye(R)}=${Ye(te)}`).join("&"):`${Ye(R)}=${Ye(H)}`}).filter(R=>!!R);return N.length?`?${N.join("&")}`:""}(N.queryParams);return`${R}${H}${"string"==typeof N.fragment?`#${function Zt(D){return encodeURI(D)}(N.fragment)}`:""}`}}const ct=new qn;function qe(D){return D.segments.map(N=>Xi(N)).join("/")}function ze(D,N){if(!D.hasChildren())return qe(D);if(N){const R=D.children[He]?ze(D.children[He],!1):"",H=[];return yi(D.children,(te,me)=>{me!==He&&H.push(`${me}:${ze(te,!1)}`)}),H.length>0?`${R}(${H.join("//")})`:R}{const R=function ai(D,N){let R=[];return yi(D.children,(H,te)=>{te===He&&(R=R.concat(N(H,te)))}),yi(D.children,(H,te)=>{te!==He&&(R=R.concat(N(H,te)))}),R}(D,(H,te)=>te===He?[ze(D.children[He],!1)]:[`${te}:${ze(H,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[He]?`${qe(D)}/${R[0]}`:`${qe(D)}/(${R.join("//")})`}}function it(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ye(D){return it(D).replace(/%3B/gi,";")}function mn(D){return it(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rn(D){return decodeURIComponent(D)}function zi(D){return Rn(D.replace(/\+/g,"%20"))}function Xi(D){return`${mn(D.path)}${function Hr(D){return Object.keys(D).map(N=>`;${mn(N)}=${mn(D[N])}`).join("")}(D.parameters)}`}const We=/^[^\/()?;=#]+/;function tt(D){const N=D.match(We);return N?N[0]:""}const zt=/^[^=?&#]+/,$n=/^[^&#]+/;class Ne{constructor(N){this.url=N,this.remaining=N}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mn([],{}):new Mn([],this.parseChildren())}parseQueryParams(){const N={};if(this.consumeOptional("?"))do{this.parseQueryParam(N)}while(this.consumeOptional("&"));return N}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const N=[];for(this.peekStartsWith("(")||N.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),N.push(this.parseSegment());let R={};this.peekStartsWith("/(")&&(this.capture("/"),R=this.parseParens(!0));let H={};return this.peekStartsWith("(")&&(H=this.parseParens(!1)),(N.length>0||Object.keys(R).length>0)&&(H[He]=new Mn(N,R)),H}parseSegment(){const N=tt(this.remaining);if(""===N&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(N),new ji(Rn(N),this.parseMatrixParams())}parseMatrixParams(){const N={};for(;this.consumeOptional(";");)this.parseParam(N);return N}parseParam(N){const R=tt(this.remaining);if(!R)return;this.capture(R);let H="";if(this.consumeOptional("=")){const te=tt(this.remaining);te&&(H=te,this.capture(H))}N[Rn(R)]=Rn(H)}parseQueryParam(N){const R=function _n(D){const N=D.match(zt);return N?N[0]:""}(this.remaining);if(!R)return;this.capture(R);let H="";if(this.consumeOptional("=")){const Pe=function Yn(D){const N=D.match($n);return N?N[0]:""}(this.remaining);Pe&&(H=Pe,this.capture(H))}const te=zi(R),me=zi(H);if(N.hasOwnProperty(te)){let Pe=N[te];Array.isArray(Pe)||(Pe=[Pe],N[te]=Pe),Pe.push(me)}else N[te]=me}parseParens(N){const R={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const H=tt(this.remaining),te=this.remaining[H.length];if("/"!==te&&")"!==te&&";"!==te)throw new g.vHH(4010,!1);let me;H.indexOf(":")>-1?(me=H.slice(0,H.indexOf(":")),this.capture(me),this.capture(":")):N&&(me=He);const Pe=this.parseChildren();R[me]=1===Object.keys(Pe).length?Pe[He]:new Mn([],Pe),this.consumeOptional("//")}return R}peekStartsWith(N){return this.remaining.startsWith(N)}consumeOptional(N){return!!this.peekStartsWith(N)&&(this.remaining=this.remaining.substring(N.length),!0)}capture(N){if(!this.consumeOptional(N))throw new g.vHH(4011,!1)}}function Ve(D){return D.segments.length>0?new Mn([],{[He]:D}):D}function De(D){const N={};for(const H of Object.keys(D.children)){const me=De(D.children[H]);(me.segments.length>0||me.hasChildren())&&(N[H]=me)}return function ht(D){if(1===D.numberOfChildren&&D.children[He]){const N=D.children[He];return new Mn(D.segments.concat(N.segments),N.children)}return D}(new Mn(D.segments,N))}function It(D){return D instanceof Ar}function wr(D,N,R,H,te){if(0===R.length)return Ss(N.root,N.root,N.root,H,te);const me=function Kr(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new ho(!0,0,D);let N=0,R=!1;const H=D.reduce((te,me,Pe)=>{if("object"==typeof me&&null!=me){if(me.outlets){const Ze={};return yi(me.outlets,(Bt,Tn)=>{Ze[Tn]="string"==typeof Bt?Bt.split("/"):Bt}),[...te,{outlets:Ze}]}if(me.segmentPath)return[...te,me.segmentPath]}return"string"!=typeof me?[...te,me]:0===Pe?(me.split("/").forEach((Ze,Bt)=>{0==Bt&&"."===Ze||(0==Bt&&""===Ze?R=!0:".."===Ze?N++:""!=Ze&&te.push(Ze))}),te):[...te,me]},[]);return new ho(R,N,H)}(R);return me.toRoot()?Ss(N.root,N.root,new Mn([],{}),H,te):function Pe(Bt){const Tn=function no(D,N,R,H){if(D.isAbsolute)return new ls(N.root,!0,0);if(-1===H)return new ls(R,R===N.root,0);return function Gi(D,N,R){let H=D,te=N,me=R;for(;me>te;){if(me-=te,H=H.parent,!H)throw new g.vHH(4005,!1);te=H.segments.length}return new ls(H,!1,te-me)}(R,H+(In(D.commands[0])?0:1),D.numberOfDoubleDots)}(me,N,D.snapshot?._urlSegment,Bt),Vi=Tn.processChildren?ja(Tn.segmentGroup,Tn.index,me.commands):er(Tn.segmentGroup,Tn.index,me.commands);return Ss(N.root,Tn.segmentGroup,Vi,H,te)}(D.snapshot?._lastPathIndex)}function In(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function zs(D){return"object"==typeof D&&null!=D&&D.outlets}function Ss(D,N,R,H,te){let Pe,me={};H&&yi(H,(Bt,Tn)=>{me[Tn]=Array.isArray(Bt)?Bt.map(Vi=>`${Vi}`):`${Bt}`}),Pe=D===N?R:ya(D,N,R);const Ze=Ve(De(Pe));return new Ar(Ze,me,te)}function ya(D,N,R){const H={};return yi(D.children,(te,me)=>{H[me]=te===N?R:ya(te,N,R)}),new Mn(D.segments,H)}class ho{constructor(N,R,H){if(this.isAbsolute=N,this.numberOfDoubleDots=R,this.commands=H,N&&H.length>0&&In(H[0]))throw new g.vHH(4003,!1);const te=H.find(zs);if(te&&te!==Ki(H))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ls{constructor(N,R,H){this.segmentGroup=N,this.processChildren=R,this.index=H}}function er(D,N,R){if(D||(D=new Mn([],{})),0===D.segments.length&&D.hasChildren())return ja(D,N,R);const H=function Gs(D,N,R){let H=0,te=N;const me={match:!1,pathIndex:0,commandIndex:0};for(;te<D.segments.length;){if(H>=R.length)return me;const Pe=D.segments[te],Ze=R[H];if(zs(Ze))break;const Bt=`${Ze}`,Tn=H<R.length-1?R[H+1]:null;if(te>0&&void 0===Bt)break;if(Bt&&Tn&&"object"==typeof Tn&&void 0===Tn.outlets){if(!po(Bt,Tn,Pe))return me;H+=2}else{if(!po(Bt,{},Pe))return me;H++}te++}return{match:!0,pathIndex:te,commandIndex:H}}(D,N,R),te=R.slice(H.commandIndex);if(H.match&&H.pathIndex<D.segments.length){const me=new Mn(D.segments.slice(0,H.pathIndex),{});return me.children[He]=new Mn(D.segments.slice(H.pathIndex),D.children),ja(me,0,te)}return H.match&&0===te.length?new Mn(D.segments,{}):H.match&&!D.hasChildren()?xs(D,N,R):H.match?ja(D,0,te):xs(D,N,R)}function ja(D,N,R){if(0===R.length)return new Mn(D.segments,{});{const H=function fo(D){return zs(D[0])?D[0].outlets:{[He]:D}}(R),te={};return yi(H,(me,Pe)=>{"string"==typeof me&&(me=[me]),null!==me&&(te[Pe]=er(D.children[Pe],N,me))}),yi(D.children,(me,Pe)=>{void 0===H[Pe]&&(te[Pe]=me)}),new Mn(D.segments,te)}}function xs(D,N,R){const H=D.segments.slice(0,N);let te=0;for(;te<R.length;){const me=R[te];if(zs(me)){const Bt=$s(me.outlets);return new Mn(H,Bt)}if(0===te&&In(R[0])){H.push(new ji(D.segments[N].path,Ps(R[0]))),te++;continue}const Pe=zs(me)?me.outlets[He]:`${me}`,Ze=te<R.length-1?R[te+1]:null;Pe&&Ze&&In(Ze)?(H.push(new ji(Pe,Ps(Ze))),te+=2):(H.push(new ji(Pe,{})),te++)}return new Mn(H,{})}function $s(D){const N={};return yi(D,(R,H)=>{"string"==typeof R&&(R=[R]),null!==R&&(N[H]=xs(new Mn([],{}),0,R))}),N}function Ps(D){const N={};return yi(D,(R,H)=>N[H]=`${R}`),N}function po(D,N,R){return D==R.path&&Ei(N,R.parameters)}class Ns{constructor(N,R){this.id=N,this.url=R}}class Rr extends Ns{constructor(N,R,H="imperative",te=null){super(N,R),this.type=0,this.navigationTrigger=H,this.restoredState=te}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qo extends Ns{constructor(N,R,H){super(N,R),this.urlAfterRedirects=H,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xr extends Ns{constructor(N,R,H,te){super(N,R),this.reason=H,this.code=te,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wr extends Ns{constructor(N,R,H,te){super(N,R),this.error=H,this.target=te,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gi extends Ns{constructor(N,R,H,te){super(N,R),this.urlAfterRedirects=H,this.state=te,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Da extends Ns{constructor(N,R,H,te){super(N,R),this.urlAfterRedirects=H,this.state=te,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jo extends Ns{constructor(N,R,H,te,me){super(N,R),this.urlAfterRedirects=H,this.state=te,this.shouldActivate=me,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class us extends Ns{constructor(N,R,H,te){super(N,R),this.urlAfterRedirects=H,this.state=te,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rl extends Ns{constructor(N,R,H,te){super(N,R),this.urlAfterRedirects=H,this.state=te,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hl{constructor(N){this.route=N,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Eo{constructor(N){this.route=N,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class va{constructor(N){this.snapshot=N,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mo{constructor(N){this.snapshot=N,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class io{constructor(N){this.snapshot=N,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mt{constructor(N){this.snapshot=N,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ut{constructor(N,R,H){this.routerEvent=N,this.position=R,this.anchor=H,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Pt{constructor(N){this._root=N}get root(){return this._root.value}parent(N){const R=this.pathFromRoot(N);return R.length>1?R[R.length-2]:null}children(N){const R=Yt(N,this._root);return R?R.children.map(H=>H.value):[]}firstChild(N){const R=Yt(N,this._root);return R&&R.children.length>0?R.children[0].value:null}siblings(N){const R=tn(N,this._root);return R.length<2?[]:R[R.length-2].children.map(te=>te.value).filter(te=>te!==N)}pathFromRoot(N){return tn(N,this._root).map(R=>R.value)}}function Yt(D,N){if(D===N.value)return N;for(const R of N.children){const H=Yt(D,R);if(H)return H}return null}function tn(D,N){if(D===N.value)return[N];for(const R of N.children){const H=tn(D,R);if(H.length)return H.unshift(N),H}return[]}class si{constructor(N,R){this.value=N,this.children=R}toString(){return`TreeNode(${this.value})`}}function li(D){const N={};return D&&D.children.forEach(R=>N[R.value.outlet]=R),N}class ar extends Pt{constructor(N,R){super(N),this.snapshot=R,Oo(this,N)}toString(){return this.snapshot.toString()}}function go(D,N){const R=function Ks(D,N){const Pe=new jr([],{},{},"",{},He,N,null,D.root,-1,{});return new ko("",new si(Pe,[]))}(D,N),H=new Ke([new ji("",{})]),te=new Ke({}),me=new Ke({}),Pe=new Ke({}),Ze=new Ke(""),Bt=new ds(H,te,Pe,Ze,me,He,N,R.root);return Bt.snapshot=R.root,new ar(new si(Bt,[]),R)}class ds{constructor(N,R,H,te,me,Pe,Ze,Bt){this.url=N,this.params=R,this.queryParams=H,this.fragment=te,this.data=me,this.outlet=Pe,this.component=Ze,this.title=this.data?.pipe((0,Be.U)(Tn=>Tn[vt]))??(0,se.of)(void 0),this._futureSnapshot=Bt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Be.U)(N=>Hn(N)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Be.U)(N=>Hn(N)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cr(D,N="emptyOnly"){const R=D.pathFromRoot;let H=0;if("always"!==N)for(H=R.length-1;H>=1;){const te=R[H],me=R[H-1];if(te.routeConfig&&""===te.routeConfig.path)H--;else{if(me.component)break;H--}}return function _i(D){return D.reduce((N,R)=>({params:{...N.params,...R.params},data:{...N.data,...R.data},resolve:{...R.data,...N.resolve,...R.routeConfig?.data,...R._resolvedData}}),{params:{},data:{},resolve:{}})}(R.slice(H))}class jr{constructor(N,R,H,te,me,Pe,Ze,Bt,Tn,Vi,jn,Bi){this.url=N,this.params=R,this.queryParams=H,this.fragment=te,this.data=me,this.outlet=Pe,this.component=Ze,this.title=this.data?.[vt],this.routeConfig=Bt,this._urlSegment=Tn,this._lastPathIndex=Vi,this._correctedLastPathIndex=Bi??Vi,this._resolve=jn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(H=>H.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ko extends Pt{constructor(N,R){super(R),this.url=N,Oo(this,R)}toString(){return Er(this._root)}}function Oo(D,N){N.value._routerState=D,N.children.forEach(R=>Oo(D,R))}function Er(D){const N=D.children.length>0?` { ${D.children.map(Er).join(", ")} } `:"";return`${D.value}${N}`}function ro(D){if(D.snapshot){const N=D.snapshot,R=D._futureSnapshot;D.snapshot=R,Ei(N.queryParams,R.queryParams)||D.queryParams.next(R.queryParams),N.fragment!==R.fragment&&D.fragment.next(R.fragment),Ei(N.params,R.params)||D.params.next(R.params),function Ci(D,N){if(D.length!==N.length)return!1;for(let R=0;R<D.length;++R)if(!Ei(D[R],N[R]))return!1;return!0}(N.url,R.url)||D.url.next(R.url),Ei(N.data,R.data)||D.data.next(R.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function _o(D,N){const R=Ei(D.params,N.params)&&function ri(D,N){return or(D,N)&&D.every((R,H)=>Ei(R.parameters,N[H].parameters))}(D.url,N.url);return R&&!(!D.parent!=!N.parent)&&(!D.parent||_o(D.parent,N.parent))}function Xo(D,N,R){if(R&&D.shouldReuseRoute(N.value,R.value.snapshot)){const H=R.value;H._futureSnapshot=N.value;const te=function es(D,N,R){return N.children.map(H=>{for(const te of R.children)if(D.shouldReuseRoute(H.value,te.value.snapshot))return Xo(D,H,te);return Xo(D,H)})}(D,N,R);return new si(H,te)}{if(D.shouldAttach(N.value)){const me=D.retrieve(N.value);if(null!==me){const Pe=me.route;return Pe.value._futureSnapshot=N.value,Pe.children=N.children.map(Ze=>Xo(D,Ze)),Pe}}const H=function ea(D){return new ds(new Ke(D.url),new Ke(D.params),new Ke(D.queryParams),new Ke(D.fragment),new Ke(D.data),D.outlet,D.component,D)}(N.value),te=N.children.map(me=>Xo(D,me));return new si(H,te)}}const yo="ngNavigationCancelingError";function za(D,N){const{redirectTo:R,navigationBehaviorOptions:H}=It(N)?{redirectTo:N,navigationBehaviorOptions:void 0}:N,te=As(!1,0,N);return te.url=R,te.navigationBehaviorOptions=H,te}function As(D,N,R){const H=new Error("NavigationCancelingError: "+(D||""));return H[yo]=!0,H.cancellationCode=N,R&&(H.url=R),H}function vo(D){return Or(D)&&It(D.url)}function Or(D){return D&&D[yo]}class Po{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Zr,this.attachRef=null}}let Zr=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(R,H){const te=this.getOrCreateContext(R);te.outlet=H,this.contexts.set(R,te)}onChildOutletDestroyed(R){const H=this.getContext(R);H&&(H.outlet=null,H.attachRef=null)}onOutletDeactivated(){const R=this.contexts;return this.contexts=new Map,R}onOutletReAttached(R){this.contexts=R}getOrCreateContext(R){let H=this.getContext(R);return H||(H=new Po,this.contexts.set(R,H)),H}getContext(R){return this.contexts.get(R)||null}}return D.\u0275fac=function(R){return new(R||D)},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const hs=!1;let Ai=(()=>{class D{constructor(R,H,te,me,Pe){this.parentContexts=R,this.location=H,this.changeDetector=me,this.environmentInjector=Pe,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=te||He,R.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const R=this.parentContexts.getContext(this.name);R&&R.route&&(R.attachRef?this.attach(R.attachRef,R.route):this.activateWith(R.route,R.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,hs);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,hs);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,hs);this.location.detach();const R=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(R.instance),R}attach(R,H){this.activated=R,this._activatedRoute=H,this.location.insert(R.hostView),this.attachEvents.emit(R.instance)}deactivate(){if(this.activated){const R=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(R)}}activateWith(R,H){if(this.isActivated)throw new g.vHH(4013,hs);this._activatedRoute=R;const te=this.location,Pe=R._futureSnapshot.component,Ze=this.parentContexts.getOrCreateContext(this.name).children,Bt=new To(R,Ze,te.injector);if(H&&function Pr(D){return!!D.resolveComponentFactory}(H)){const Tn=H.resolveComponentFactory(Pe);this.activated=te.createComponent(Tn,te.length,Bt)}else this.activated=te.createComponent(Pe,{index:te.length,injector:Bt,environmentInjector:H??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(R){return new(R||D)(g.Y36(Zr),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},D.\u0275dir=g.lG2({type:D,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),D})();class To{constructor(N,R,H){this.route=N,this.childContexts=R,this.parent=H}get(N,R){return N===ds?this.route:N===Zr?this.childContexts:this.parent.get(N,R)}}let Bo=(()=>{class D{}return D.\u0275fac=function(R){return new(R||D)},D.\u0275cmp=g.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(R,H){1&R&&g._UZ(0,"router-outlet")},dependencies:[Ai],encapsulation:2}),D})();function bo(D,N){return D.providers&&!D._injector&&(D._injector=(0,g.MMx)(D.providers,N,`Route: ${D.path}`)),D._injector??N}function la(D){const N=D.children&&D.children.map(la),R=N?{...D,children:N}:{...D};return!R.component&&!R.loadComponent&&(N||R.loadChildren)&&R.outlet&&R.outlet!==He&&(R.component=Bo),R}function qr(D){return D.outlet||He}function ba(D,N){const R=D.filter(H=>qr(H)===N);return R.push(...D.filter(H=>qr(H)!==N)),R}function cr(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let N=D.parent;N;N=N.parent){const R=N.routeConfig;if(R?._loadedInjector)return R._loadedInjector;if(R?._injector)return R._injector}return null}class ol{constructor(N,R,H,te){this.routeReuseStrategy=N,this.futureState=R,this.currState=H,this.forwardEvent=te}activate(N){const R=this.futureState._root,H=this.currState?this.currState._root:null;this.deactivateChildRoutes(R,H,N),ro(this.futureState.root),this.activateChildRoutes(R,H,N)}deactivateChildRoutes(N,R,H){const te=li(R);N.children.forEach(me=>{const Pe=me.value.outlet;this.deactivateRoutes(me,te[Pe],H),delete te[Pe]}),yi(te,(me,Pe)=>{this.deactivateRouteAndItsChildren(me,H)})}deactivateRoutes(N,R,H){const te=N.value,me=R?R.value:null;if(te===me)if(te.component){const Pe=H.getContext(te.outlet);Pe&&this.deactivateChildRoutes(N,R,Pe.children)}else this.deactivateChildRoutes(N,R,H);else me&&this.deactivateRouteAndItsChildren(R,H)}deactivateRouteAndItsChildren(N,R){N.value.component&&this.routeReuseStrategy.shouldDetach(N.value.snapshot)?this.detachAndStoreRouteSubtree(N,R):this.deactivateRouteAndOutlet(N,R)}detachAndStoreRouteSubtree(N,R){const H=R.getContext(N.value.outlet),te=H&&N.value.component?H.children:R,me=li(N);for(const Pe of Object.keys(me))this.deactivateRouteAndItsChildren(me[Pe],te);if(H&&H.outlet){const Pe=H.outlet.detach(),Ze=H.children.onOutletDeactivated();this.routeReuseStrategy.store(N.value.snapshot,{componentRef:Pe,route:N,contexts:Ze})}}deactivateRouteAndOutlet(N,R){const H=R.getContext(N.value.outlet),te=H&&N.value.component?H.children:R,me=li(N);for(const Pe of Object.keys(me))this.deactivateRouteAndItsChildren(me[Pe],te);H&&H.outlet&&(H.outlet.deactivate(),H.children.onOutletDeactivated(),H.attachRef=null,H.resolver=null,H.route=null)}activateChildRoutes(N,R,H){const te=li(R);N.children.forEach(me=>{this.activateRoutes(me,te[me.value.outlet],H),this.forwardEvent(new mt(me.value.snapshot))}),N.children.length&&this.forwardEvent(new mo(N.value.snapshot))}activateRoutes(N,R,H){const te=N.value,me=R?R.value:null;if(ro(te),te===me)if(te.component){const Pe=H.getOrCreateContext(te.outlet);this.activateChildRoutes(N,R,Pe.children)}else this.activateChildRoutes(N,R,H);else if(te.component){const Pe=H.getOrCreateContext(te.outlet);if(this.routeReuseStrategy.shouldAttach(te.snapshot)){const Ze=this.routeReuseStrategy.retrieve(te.snapshot);this.routeReuseStrategy.store(te.snapshot,null),Pe.children.onOutletReAttached(Ze.contexts),Pe.attachRef=Ze.componentRef,Pe.route=Ze.route.value,Pe.outlet&&Pe.outlet.attach(Ze.componentRef,Ze.route.value),ro(Ze.route.value),this.activateChildRoutes(N,null,Pe.children)}else{const Ze=cr(te.snapshot),Bt=Ze?.get(g._Vd)??null;Pe.attachRef=null,Pe.route=te,Pe.resolver=Bt,Pe.injector=Ze,Pe.outlet&&Pe.outlet.activateWith(te,Pe.injector),this.activateChildRoutes(N,null,Pe.children)}}else this.activateChildRoutes(N,null,H)}}class lc{constructor(N){this.path=N,this.route=this.path[this.path.length-1]}}class Uo{constructor(N,R){this.component=N,this.route=R}}function Yl(D,N,R){const H=D._root;return Fo(H,N?N._root:null,R,[H.value])}function No(D,N){const R=Symbol(),H=N.get(D,R);return H===R?"function"!=typeof D||(0,g.Z0I)(D)?N.get(D):D:H}function Fo(D,N,R,H,te={canDeactivateChecks:[],canActivateChecks:[]}){const me=li(N);return D.children.forEach(Pe=>{(function Zs(D,N,R,H,te={canDeactivateChecks:[],canActivateChecks:[]}){const me=D.value,Pe=N?N.value:null,Ze=R?R.getContext(D.value.outlet):null;if(Pe&&me.routeConfig===Pe.routeConfig){const Bt=function Xt(D,N,R){if("function"==typeof R)return R(D,N);switch(R){case"pathParamsChange":return!or(D.url,N.url);case"pathParamsOrQueryParamsChange":return!or(D.url,N.url)||!Ei(D.queryParams,N.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_o(D,N)||!Ei(D.queryParams,N.queryParams);default:return!_o(D,N)}}(Pe,me,me.routeConfig.runGuardsAndResolvers);Bt?te.canActivateChecks.push(new lc(H)):(me.data=Pe.data,me._resolvedData=Pe._resolvedData),Fo(D,N,me.component?Ze?Ze.children:null:R,H,te),Bt&&Ze&&Ze.outlet&&Ze.outlet.isActivated&&te.canDeactivateChecks.push(new Uo(Ze.outlet.component,Pe))}else Pe&&ni(N,Ze,te),te.canActivateChecks.push(new lc(H)),Fo(D,null,me.component?Ze?Ze.children:null:R,H,te)})(Pe,me[Pe.value.outlet],R,H.concat([Pe.value]),te),delete me[Pe.value.outlet]}),yi(me,(Pe,Ze)=>ni(Pe,R.getContext(Ze),te)),te}function ni(D,N,R){const H=li(D),te=D.value;yi(H,(me,Pe)=>{ni(me,te.component?N?N.children.getContext(Pe):null:N,R)}),R.canDeactivateChecks.push(new Uo(te.component&&N&&N.outlet&&N.outlet.isActivated?N.outlet.component:null,te))}function so(D){return"function"==typeof D}function zr(D){return D instanceof Ee.K||"EmptyError"===D?.name}const oo=Symbol("INITIAL_VALUE");function ps(){return(0,we.w)(D=>(0,Oe.a)(D.map(N=>N.pipe((0,nt.q)(1),(0,Xe.O)(oo)))).pipe((0,Be.U)(N=>{for(const R of N)if(!0!==R){if(R===oo)return oo;if(!1===R||R instanceof Ar)return R}return!0}),(0,xe.h)(N=>N!==oo),(0,nt.q)(1)))}function Ca(D){return(0,Ge.z)((0,st.b)(N=>{if(It(N))throw za(0,N)}),(0,Be.U)(N=>!0===N))}const na={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ms(D,N,R,H,te){const me=ca(D,N,R);return me.matched?function Ma(D,N,R,H){const te=N.canMatch;if(!te||0===te.length)return(0,se.of)(!0);const me=te.map(Pe=>{const Ze=No(Pe,D);return Jt(function pe(D){return D&&so(D.canMatch)}(Ze)?Ze.canMatch(N,R):D.runInContext(()=>Ze(N,R)))});return(0,se.of)(me).pipe(ps(),Ca())}(H=bo(N,H),N,R).pipe((0,Be.U)(Pe=>!0===Pe?me:{...na})):(0,se.of)(me)}function ca(D,N,R){if(""===N.path)return"full"===N.pathMatch&&(D.hasChildren()||R.length>0)?{...na}:{matched:!0,consumedSegments:[],remainingSegments:R,parameters:{},positionalParamSegments:{}};const te=(N.matcher||Wi)(R,D,N);if(!te)return{...na};const me={};yi(te.posParams,(Ze,Bt)=>{me[Bt]=Ze.path});const Pe=te.consumed.length>0?{...me,...te.consumed[te.consumed.length-1].parameters}:me;return{matched:!0,consumedSegments:te.consumed,remainingSegments:R.slice(te.consumed.length),parameters:Pe,positionalParamSegments:te.posParams??{}}}function _l(D,N,R,H,te="corrected"){if(R.length>0&&function ll(D,N,R){return R.some(H=>z(D,N,H)&&qr(H)!==He)}(D,R,H)){const Pe=new Mn(N,function Cc(D,N,R,H){const te={};te[He]=H,H._sourceSegment=D,H._segmentIndexShift=N.length;for(const me of R)if(""===me.path&&qr(me)!==He){const Pe=new Mn([],{});Pe._sourceSegment=D,Pe._segmentIndexShift=N.length,te[qr(me)]=Pe}return te}(D,N,H,new Mn(R,D.children)));return Pe._sourceSegment=D,Pe._segmentIndexShift=N.length,{segmentGroup:Pe,slicedSegments:[]}}if(0===R.length&&function Ml(D,N,R){return R.some(H=>z(D,N,H))}(D,R,H)){const Pe=new Mn(D.segments,function Al(D,N,R,H,te,me){const Pe={};for(const Ze of H)if(z(D,R,Ze)&&!te[qr(Ze)]){const Bt=new Mn([],{});Bt._sourceSegment=D,Bt._segmentIndexShift="legacy"===me?D.segments.length:N.length,Pe[qr(Ze)]=Bt}return{...te,...Pe}}(D,N,R,H,D.children,te));return Pe._sourceSegment=D,Pe._segmentIndexShift=N.length,{segmentGroup:Pe,slicedSegments:R}}const me=new Mn(D.segments,D.children);return me._sourceSegment=D,me._segmentIndexShift=N.length,{segmentGroup:me,slicedSegments:R}}function z(D,N,R){return(!(D.hasChildren()||N.length>0)||"full"!==R.pathMatch)&&""===R.path}function le(D,N,R,H){return!!(qr(D)===H||H!==He&&z(N,R,D))&&("**"===D.path||ca(N,D,R).matched)}function Y(D,N,R){return 0===N.length&&!D.children[R]}const _e=!1;class $e{constructor(N){this.segmentGroup=N||null}}class Rt{constructor(N){this.urlTree=N}}function jt(D){return(0,kt._)(new $e(D))}function Nn(D){return(0,kt._)(new Rt(D))}class Li{constructor(N,R,H,te,me){this.injector=N,this.configLoader=R,this.urlSerializer=H,this.urlTree=te,this.config=me,this.allowRedirects=!0}apply(){const N=_l(this.urlTree.root,[],[],this.config).segmentGroup,R=new Mn(N.segments,N.children);return this.expandSegmentGroup(this.injector,this.config,R,He).pipe((0,Be.U)(me=>this.createUrlTree(De(me),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Et.K)(me=>{if(me instanceof Rt)return this.allowRedirects=!1,this.match(me.urlTree);throw me instanceof $e?this.noMatchError(me):me}))}match(N){return this.expandSegmentGroup(this.injector,this.config,N.root,He).pipe((0,Be.U)(te=>this.createUrlTree(De(te),N.queryParams,N.fragment))).pipe((0,Et.K)(te=>{throw te instanceof $e?this.noMatchError(te):te}))}noMatchError(N){return new g.vHH(4002,_e)}createUrlTree(N,R,H){const te=Ve(N);return new Ar(te,R,H)}expandSegmentGroup(N,R,H,te){return 0===H.segments.length&&H.hasChildren()?this.expandChildren(N,R,H).pipe((0,Be.U)(me=>new Mn([],me))):this.expandSegment(N,H,R,H.segments,te,!0)}expandChildren(N,R,H){const te=[];for(const me of Object.keys(H.children))"primary"===me?te.unshift(me):te.push(me);return(0,i.D)(te).pipe((0,Ue.b)(me=>{const Pe=H.children[me],Ze=ba(R,me);return this.expandSegmentGroup(N,Ze,Pe,me).pipe((0,Be.U)(Bt=>({segment:Bt,outlet:me})))}),(0,yt.R)((me,Pe)=>(me[Pe.outlet]=Pe.segment,me),{}),Pn())}expandSegment(N,R,H,te,me,Pe){return(0,i.D)(H).pipe((0,Ue.b)(Ze=>this.expandSegmentAgainstRoute(N,R,H,Ze,te,me,Pe).pipe((0,Et.K)(Tn=>{if(Tn instanceof $e)return(0,se.of)(null);throw Tn}))),(0,pt.P)(Ze=>!!Ze),(0,Et.K)((Ze,Bt)=>{if(zr(Ze))return Y(R,te,me)?(0,se.of)(new Mn([],{})):jt(R);throw Ze}))}expandSegmentAgainstRoute(N,R,H,te,me,Pe,Ze){return le(te,R,me,Pe)?void 0===te.redirectTo?this.matchSegmentAgainstRoute(N,R,te,me,Pe):Ze&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(N,R,H,te,me,Pe):jt(R):jt(R)}expandSegmentAgainstRouteUsingRedirect(N,R,H,te,me,Pe){return"**"===te.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(N,H,te,Pe):this.expandRegularSegmentAgainstRouteUsingRedirect(N,R,H,te,me,Pe)}expandWildCardWithParamsAgainstRouteUsingRedirect(N,R,H,te){const me=this.applyRedirectCommands([],H.redirectTo,{});return H.redirectTo.startsWith("/")?Nn(me):this.lineralizeSegments(H,me).pipe((0,ee.z)(Pe=>{const Ze=new Mn(Pe,{});return this.expandSegment(N,Ze,R,Pe,te,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(N,R,H,te,me,Pe){const{matched:Ze,consumedSegments:Bt,remainingSegments:Tn,positionalParamSegments:Vi}=ca(R,te,me);if(!Ze)return jt(R);const jn=this.applyRedirectCommands(Bt,te.redirectTo,Vi);return te.redirectTo.startsWith("/")?Nn(jn):this.lineralizeSegments(te,jn).pipe((0,ee.z)(Bi=>this.expandSegment(N,R,H,Bi.concat(Tn),Pe,!1)))}matchSegmentAgainstRoute(N,R,H,te,me){return"**"===H.path?(N=bo(H,N),H.loadChildren?(H._loadedRoutes?(0,se.of)({routes:H._loadedRoutes,injector:H._loadedInjector}):this.configLoader.loadChildren(N,H)).pipe((0,Be.U)(Ze=>(H._loadedRoutes=Ze.routes,H._loadedInjector=Ze.injector,new Mn(te,{})))):(0,se.of)(new Mn(te,{}))):ms(R,H,te,N).pipe((0,we.w)(({matched:Pe,consumedSegments:Ze,remainingSegments:Bt})=>Pe?this.getChildConfig(N=H._injector??N,H,te).pipe((0,ee.z)(Vi=>{const jn=Vi.injector??N,Bi=Vi.routes,{segmentGroup:os,slicedSegments:Vr}=_l(R,Ze,Bt,Bi),Xa=new Mn(os.segments,os.children);if(0===Vr.length&&Xa.hasChildren())return this.expandChildren(jn,Bi,Xa).pipe((0,Be.U)(qi=>new Mn(Ze,qi)));if(0===Bi.length&&0===Vr.length)return(0,se.of)(new Mn(Ze,{}));const Mr=qr(H)===me;return this.expandSegment(jn,Xa,Bi,Vr,Mr?He:me,!0).pipe((0,Be.U)(Br=>new Mn(Ze.concat(Br.segments),Br.children)))})):jt(R)))}getChildConfig(N,R,H){return R.children?(0,se.of)({routes:R.children,injector:N}):R.loadChildren?void 0!==R._loadedRoutes?(0,se.of)({routes:R._loadedRoutes,injector:R._loadedInjector}):function $a(D,N,R,H){const te=N.canLoad;if(void 0===te||0===te.length)return(0,se.of)(!0);const me=te.map(Pe=>{const Ze=No(Pe,D);return Jt(function Wn(D){return D&&so(D.canLoad)}(Ze)?Ze.canLoad(N,R):D.runInContext(()=>Ze(N,R)))});return(0,se.of)(me).pipe(ps(),Ca())}(N,R,H).pipe((0,ee.z)(te=>te?this.configLoader.loadChildren(N,R).pipe((0,st.b)(me=>{R._loadedRoutes=me.routes,R._loadedInjector=me.injector})):function Ir(D){return(0,kt._)(As(_e,3))}())):(0,se.of)({routes:[],injector:N})}lineralizeSegments(N,R){let H=[],te=R.root;for(;;){if(H=H.concat(te.segments),0===te.numberOfChildren)return(0,se.of)(H);if(te.numberOfChildren>1||!te.children[He])return(0,kt._)(new g.vHH(4e3,_e));te=te.children[He]}}applyRedirectCommands(N,R,H){return this.applyRedirectCreateUrlTree(R,this.urlSerializer.parse(R),N,H)}applyRedirectCreateUrlTree(N,R,H,te){const me=this.createSegmentGroup(N,R.root,H,te);return new Ar(me,this.createQueryParams(R.queryParams,this.urlTree.queryParams),R.fragment)}createQueryParams(N,R){const H={};return yi(N,(te,me)=>{if("string"==typeof te&&te.startsWith(":")){const Ze=te.substring(1);H[me]=R[Ze]}else H[me]=te}),H}createSegmentGroup(N,R,H,te){const me=this.createSegments(N,R.segments,H,te);let Pe={};return yi(R.children,(Ze,Bt)=>{Pe[Bt]=this.createSegmentGroup(N,Ze,H,te)}),new Mn(me,Pe)}createSegments(N,R,H,te){return R.map(me=>me.path.startsWith(":")?this.findPosParam(N,me,te):this.findOrReturn(me,H))}findPosParam(N,R,H){const te=H[R.path.substring(1)];if(!te)throw new g.vHH(4001,_e);return te}findOrReturn(N,R){let H=0;for(const te of R){if(te.path===N.path)return R.splice(H),te;H++}return N}}class gs{}class kr{constructor(N,R,H,te,me,Pe,Ze,Bt){this.injector=N,this.rootComponentType=R,this.config=H,this.urlTree=te,this.url=me,this.paramsInheritanceStrategy=Pe,this.relativeLinkResolution=Ze,this.urlSerializer=Bt}recognize(){const N=_l(this.urlTree.root,[],[],this.config.filter(R=>void 0===R.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,N,He).pipe((0,Be.U)(R=>{if(null===R)return null;const H=new jr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},He,this.rootComponentType,null,this.urlTree.root,-1,{}),te=new si(H,R),me=new ko(this.url,te);return this.inheritParamsAndData(me._root),me}))}inheritParamsAndData(N){const R=N.value,H=Cr(R,this.paramsInheritanceStrategy);R.params=Object.freeze(H.params),R.data=Object.freeze(H.data),N.children.forEach(te=>this.inheritParamsAndData(te))}processSegmentGroup(N,R,H,te){return 0===H.segments.length&&H.hasChildren()?this.processChildren(N,R,H):this.processSegment(N,R,H,H.segments,te)}processChildren(N,R,H){return(0,i.D)(Object.keys(H.children)).pipe((0,Ue.b)(te=>{const me=H.children[te],Pe=ba(R,te);return this.processSegmentGroup(N,Pe,me,te)}),(0,yt.R)((te,me)=>te&&me?(te.push(...me),te):null),function Gt(D,N=!1){return(0,Wt.e)((R,H)=>{let te=0;R.subscribe((0,Dt.x)(H,me=>{const Pe=D(me,te++);(Pe||N)&&H.next(me),!Pe&&H.complete()}))})}(te=>null!==te),(0,gn.d)(null),Pn(),(0,Be.U)(te=>{if(null===te)return null;const me=ua(te);return function ka(D){D.sort((N,R)=>N.value.outlet===He?-1:R.value.outlet===He?1:N.value.outlet.localeCompare(R.value.outlet))}(me),me}))}processSegment(N,R,H,te,me){return(0,i.D)(R).pipe((0,Ue.b)(Pe=>this.processSegmentAgainstRoute(Pe._injector??N,Pe,H,te,me)),(0,pt.P)(Pe=>!!Pe),(0,Et.K)(Pe=>{if(zr(Pe))return Y(H,te,me)?(0,se.of)([]):(0,se.of)(null);throw Pe}))}processSegmentAgainstRoute(N,R,H,te,me){if(R.redirectTo||!le(R,H,te,me))return(0,se.of)(null);let Pe;if("**"===R.path){const Ze=te.length>0?Ki(te).parameters:{},Bt=Ka(H)+te.length,Tn=new jr(te,Ze,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,da(R),qr(R),R.component??R._loadedComponent??null,R,Gr(H),Bt,Ec(R),Bt);Pe=(0,se.of)({snapshot:Tn,consumedSegments:[],remainingSegments:[]})}else Pe=ms(H,R,te,N).pipe((0,Be.U)(({matched:Ze,consumedSegments:Bt,remainingSegments:Tn,parameters:Vi})=>{if(!Ze)return null;const jn=Ka(H)+Bt.length;return{snapshot:new jr(Bt,Vi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,da(R),qr(R),R.component??R._loadedComponent??null,R,Gr(H),jn,Ec(R),jn),consumedSegments:Bt,remainingSegments:Tn}}));return Pe.pipe((0,we.w)(Ze=>{if(null===Ze)return(0,se.of)(null);const{snapshot:Bt,consumedSegments:Tn,remainingSegments:Vi}=Ze;N=R._injector??N;const jn=R._loadedInjector??N,Bi=function Do(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(R),{segmentGroup:os,slicedSegments:Vr}=_l(H,Tn,Vi,Bi.filter(Mr=>void 0===Mr.redirectTo),this.relativeLinkResolution);if(0===Vr.length&&os.hasChildren())return this.processChildren(jn,Bi,os).pipe((0,Be.U)(Mr=>null===Mr?null:[new si(Bt,Mr)]));if(0===Bi.length&&0===Vr.length)return(0,se.of)([new si(Bt,[])]);const Xa=qr(R)===me;return this.processSegment(jn,Bi,os,Vr,Xa?He:me).pipe((0,Be.U)(Mr=>null===Mr?null:[new si(Bt,Mr)]))}))}}function ao(D){const N=D.value.routeConfig;return N&&""===N.path&&void 0===N.redirectTo}function ua(D){const N=[],R=new Set;for(const H of D){if(!ao(H)){N.push(H);continue}const te=N.find(me=>H.value.routeConfig===me.value.routeConfig);void 0!==te?(te.children.push(...H.children),R.add(te)):N.push(H)}for(const H of R){const te=ua(H.children);N.push(new si(H.value,te))}return N.filter(H=>!R.has(H))}function Gr(D){let N=D;for(;N._sourceSegment;)N=N._sourceSegment;return N}function Ka(D){let N=D,R=N._segmentIndexShift??0;for(;N._sourceSegment;)N=N._sourceSegment,R+=N._segmentIndexShift??0;return R-1}function da(D){return D.data||{}}function Ec(D){return D.resolve||{}}function Jl(D){return"string"==typeof D.title||null===D.title}function Nr(D){return(0,we.w)(N=>{const R=D(N);return R?(0,i.D)(R).pipe((0,Be.U)(()=>N)):(0,se.of)(N)})}let Cs=(()=>{class D{buildTitle(R){let H,te=R.root;for(;void 0!==te;)H=this.getResolvedTitleForRoute(te)??H,te=te.children.find(me=>me.outlet===He);return H}getResolvedTitleForRoute(R){return R.data[vt]}}return D.\u0275fac=function(R){return new(R||D)},D.\u0275prov=g.Yz7({token:D,factory:function(){return(0,g.f3M)(Ya)},providedIn:"root"}),D})(),Ya=(()=>{class D extends Cs{constructor(R){super(),this.title=R}updateTitle(R){const H=this.buildTitle(R);void 0!==H&&this.title.setTitle(H)}}return D.\u0275fac=function(R){return new(R||D)(g.LFG(Ut.Dx))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class ra{}class cc extends class Rl{shouldDetach(N){return!1}store(N,R){}shouldAttach(N){return!1}retrieve(N){return null}shouldReuseRoute(N,R){return N.routeConfig===R.routeConfig}}{}const bl=new g.OlP("",{providedIn:"root",factory:()=>({})}),jl=new g.OlP("ROUTES");let ur=(()=>{class D{constructor(R,H){this.injector=R,this.compiler=H,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(R){if(this.componentLoaders.get(R))return this.componentLoaders.get(R);if(R._loadedComponent)return(0,se.of)(R._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(R);const H=Jt(R.loadComponent()).pipe((0,st.b)(me=>{this.onLoadEndListener&&this.onLoadEndListener(R),R._loadedComponent=me}),(0,Un.x)(()=>{this.componentLoaders.delete(R)})),te=new ot(H,()=>new ge.x).pipe(bt());return this.componentLoaders.set(R,te),te}loadChildren(R,H){if(this.childrenLoaders.get(H))return this.childrenLoaders.get(H);if(H._loadedRoutes)return(0,se.of)({routes:H._loadedRoutes,injector:H._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(H);const me=this.loadModuleFactoryOrRoutes(H.loadChildren).pipe((0,Be.U)(Ze=>{this.onLoadEndListener&&this.onLoadEndListener(H);let Bt,Tn,Vi=!1;Array.isArray(Ze)?Tn=Ze:(Bt=Ze.create(R).injector,Tn=oi(Bt.get(jl,[],g.XFs.Self|g.XFs.Optional)));return{routes:Tn.map(la),injector:Bt}}),(0,Un.x)(()=>{this.childrenLoaders.delete(H)})),Pe=new ot(me,()=>new ge.x).pipe(bt());return this.childrenLoaders.set(H,Pe),Pe}loadModuleFactoryOrRoutes(R){return Jt(R()).pipe((0,ee.z)(H=>H instanceof g.YKP||Array.isArray(H)?(0,se.of)(H):(0,i.D)(this.compiler.compileModuleAsync(H))))}}return D.\u0275fac=function(R){return new(R||D)(g.LFG(g.zs3),g.LFG(g.Sil))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class wl{}class Ho{shouldProcessUrl(N){return!0}extract(N){return N}merge(N,R){return N}}function cl(D){throw D}function pn(D,N,R){return N.parse("/")}const Fr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Vn(){const D=(0,g.f3M)(vs),N=(0,g.f3M)(Zr),R=(0,g.f3M)(qt.Ye),H=(0,g.f3M)(g.zs3),te=(0,g.f3M)(g.Sil),me=(0,g.f3M)(jl,{optional:!0})??[],Pe=(0,g.f3M)(bl,{optional:!0})??{},Ze=(0,g.f3M)(Ya),Bt=(0,g.f3M)(Cs,{optional:!0}),Tn=(0,g.f3M)(wl,{optional:!0}),Vi=(0,g.f3M)(ra,{optional:!0}),jn=new Fn(null,D,N,R,H,te,oi(me));return Tn&&(jn.urlHandlingStrategy=Tn),Vi&&(jn.routeReuseStrategy=Vi),jn.titleStrategy=Bt??Ze,function ul(D,N){D.errorHandler&&(N.errorHandler=D.errorHandler),D.malformedUriErrorHandler&&(N.malformedUriErrorHandler=D.malformedUriErrorHandler),D.onSameUrlNavigation&&(N.onSameUrlNavigation=D.onSameUrlNavigation),D.paramsInheritanceStrategy&&(N.paramsInheritanceStrategy=D.paramsInheritanceStrategy),D.relativeLinkResolution&&(N.relativeLinkResolution=D.relativeLinkResolution),D.urlUpdateStrategy&&(N.urlUpdateStrategy=D.urlUpdateStrategy),D.canceledNavigationResolution&&(N.canceledNavigationResolution=D.canceledNavigationResolution)}(Pe,jn),jn}let Fn=(()=>{class D{constructor(R,H,te,me,Pe,Ze,Bt){this.rootComponentType=R,this.urlSerializer=H,this.rootContexts=te,this.location=me,this.config=Bt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ge.x,this.errorHandler=cl,this.malformedUriErrorHandler=pn,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,se.of)(void 0),this.urlHandlingStrategy=new Ho,this.routeReuseStrategy=new cc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Pe.get(ur),this.configLoader.onLoadEndListener=Bi=>this.triggerEvent(new Eo(Bi)),this.configLoader.onLoadStartListener=Bi=>this.triggerEvent(new Hl(Bi)),this.ngModule=Pe.get(g.h0i),this.console=Pe.get(g.c2e);const jn=Pe.get(g.R0b);this.isNgZoneEnabled=jn instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(Bt),this.currentUrlTree=function Hi(){return new Ar(new Mn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=go(this.currentUrlTree,this.rootComponentType),this.transitions=new Ke({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(R){const H=this.events;return R.pipe((0,xe.h)(te=>0!==te.id),(0,Be.U)(te=>({...te,extractedUrl:this.urlHandlingStrategy.extract(te.rawUrl)})),(0,we.w)(te=>{let me=!1,Pe=!1;return(0,se.of)(te).pipe((0,st.b)(Ze=>{this.currentNavigation={id:Ze.id,initialUrl:Ze.rawUrl,extractedUrl:Ze.extractedUrl,trigger:Ze.source,extras:Ze.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,we.w)(Ze=>{const Bt=this.browserUrlTree.toString(),Tn=!this.navigated||Ze.extractedUrl.toString()!==Bt||Bt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Tn)&&this.urlHandlingStrategy.shouldProcessUrl(Ze.rawUrl))return Dn(Ze.source)&&(this.browserUrlTree=Ze.extractedUrl),(0,se.of)(Ze).pipe((0,we.w)(jn=>{const Bi=this.transitions.getValue();return H.next(new Rr(jn.id,this.serializeUrl(jn.extractedUrl),jn.source,jn.restoredState)),Bi!==this.transitions.getValue()?dt.E:Promise.resolve(jn)}),function qs(D,N,R,H){return(0,we.w)(te=>function nr(D,N,R,H,te){return new Li(D,N,R,H,te).apply()}(D,N,R,te.extractedUrl,H).pipe((0,Be.U)(me=>({...te,urlAfterRedirects:me}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,st.b)(jn=>{this.currentNavigation={...this.currentNavigation,finalUrl:jn.urlAfterRedirects},te.urlAfterRedirects=jn.urlAfterRedirects}),function Za(D,N,R,H,te,me){return(0,ee.z)(Pe=>function Ra(D,N,R,H,te,me,Pe="emptyOnly",Ze="legacy"){return new kr(D,N,R,H,te,Pe,Ze,me).recognize().pipe((0,we.w)(Bt=>null===Bt?function yl(D){return new rt.y(N=>N.error(D))}(new gs):(0,se.of)(Bt)))}(D,N,R,Pe.urlAfterRedirects,H.serialize(Pe.urlAfterRedirects),H,te,me).pipe((0,Be.U)(Ze=>({...Pe,targetSnapshot:Ze}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,st.b)(jn=>{if(te.targetSnapshot=jn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!jn.extras.skipLocationChange){const os=this.urlHandlingStrategy.merge(jn.urlAfterRedirects,jn.rawUrl);this.setBrowserUrl(os,jn)}this.browserUrlTree=jn.urlAfterRedirects}const Bi=new gi(jn.id,this.serializeUrl(jn.extractedUrl),this.serializeUrl(jn.urlAfterRedirects),jn.targetSnapshot);H.next(Bi)}));if(Tn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Bi,extractedUrl:os,source:Vr,restoredState:Xa,extras:Mr}=Ze,Go=new Rr(Bi,this.serializeUrl(os),Vr,Xa);H.next(Go);const Br=go(os,this.rootComponentType).snapshot;return te={...Ze,targetSnapshot:Br,urlAfterRedirects:os,extras:{...Mr,skipLocationChange:!1,replaceUrl:!1}},(0,se.of)(te)}return this.rawUrlTree=Ze.rawUrl,Ze.resolve(null),dt.E}),(0,st.b)(Ze=>{const Bt=new Da(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot);this.triggerEvent(Bt)}),(0,Be.U)(Ze=>te={...Ze,guards:Yl(Ze.targetSnapshot,Ze.currentSnapshot,this.rootContexts)}),function Yr(D,N){return(0,ee.z)(R=>{const{targetSnapshot:H,currentSnapshot:te,guards:{canActivateChecks:me,canDeactivateChecks:Pe}}=R;return 0===Pe.length&&0===me.length?(0,se.of)({...R,guardsResult:!0}):function ws(D,N,R,H){return(0,i.D)(D).pipe((0,ee.z)(te=>function Ga(D,N,R,H,te){const me=N&&N.routeConfig?N.routeConfig.canDeactivate:null;if(!me||0===me.length)return(0,se.of)(!0);const Pe=me.map(Ze=>{const Bt=cr(N)??te,Tn=No(Ze,Bt);return Jt(function W(D){return D&&so(D.canDeactivate)}(Tn)?Tn.canDeactivate(D,N,R,H):Bt.runInContext(()=>Tn(D,N,R,H))).pipe((0,pt.P)())});return(0,se.of)(Pe).pipe(ps())}(te.component,te.route,R,N,H)),(0,pt.P)(te=>!0!==te,!0))}(Pe,H,te,D).pipe((0,ee.z)(Ze=>Ze&&function bs(D){return"boolean"==typeof D}(Ze)?function Aa(D,N,R,H){return(0,i.D)(N).pipe((0,Ue.b)(te=>(0,Me.z)(function ta(D,N){return null!==D&&N&&N(new va(D)),(0,se.of)(!0)}(te.route.parent,H),function xl(D,N){return null!==D&&N&&N(new io(D)),(0,se.of)(!0)}(te.route,H),function wa(D,N,R){const H=N[N.length-1],me=N.slice(0,N.length-1).reverse().map(Pe=>function Tr(D){const N=D.routeConfig?D.routeConfig.canActivateChild:null;return N&&0!==N.length?{node:D,guards:N}:null}(Pe)).filter(Pe=>null!==Pe).map(Pe=>Se(()=>{const Ze=Pe.guards.map(Bt=>{const Tn=cr(Pe.node)??R,Vi=No(Bt,Tn);return Jt(function X(D){return D&&so(D.canActivateChild)}(Vi)?Vi.canActivateChild(H,D):Tn.runInContext(()=>Vi(H,D))).pipe((0,pt.P)())});return(0,se.of)(Ze).pipe(ps())}));return(0,se.of)(me).pipe(ps())}(D,te.path,R),function al(D,N,R){const H=N.routeConfig?N.routeConfig.canActivate:null;if(!H||0===H.length)return(0,se.of)(!0);const te=H.map(me=>Se(()=>{const Pe=cr(N)??R,Ze=No(me,Pe);return Jt(function ie(D){return D&&so(D.canActivate)}(Ze)?Ze.canActivate(N,D):Pe.runInContext(()=>Ze(N,D))).pipe((0,pt.P)())}));return(0,se.of)(te).pipe(ps())}(D,te.route,R))),(0,pt.P)(te=>!0!==te,!0))}(H,me,D,N):(0,se.of)(Ze)),(0,Be.U)(Ze=>({...R,guardsResult:Ze})))})}(this.ngModule.injector,Ze=>this.triggerEvent(Ze)),(0,st.b)(Ze=>{if(te.guardsResult=Ze.guardsResult,It(Ze.guardsResult))throw za(0,Ze.guardsResult);const Bt=new Jo(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot,!!Ze.guardsResult);this.triggerEvent(Bt)}),(0,xe.h)(Ze=>!!Ze.guardsResult||(this.restoreHistory(Ze),this.cancelNavigationTransition(Ze,"",3),!1)),Nr(Ze=>{if(Ze.guards.canActivateChecks.length)return(0,se.of)(Ze).pipe((0,st.b)(Bt=>{const Tn=new us(Bt.id,this.serializeUrl(Bt.extractedUrl),this.serializeUrl(Bt.urlAfterRedirects),Bt.targetSnapshot);this.triggerEvent(Tn)}),(0,we.w)(Bt=>{let Tn=!1;return(0,se.of)(Bt).pipe(function qa(D,N){return(0,ee.z)(R=>{const{targetSnapshot:H,guards:{canActivateChecks:te}}=R;if(!te.length)return(0,se.of)(R);let me=0;return(0,i.D)(te).pipe((0,Ue.b)(Pe=>function ia(D,N,R,H){const te=D.routeConfig,me=D._resolve;return void 0!==te?.title&&!Jl(te)&&(me[vt]=te.title),function vl(D,N,R,H){const te=function Ys(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===te.length)return(0,se.of)({});const me={};return(0,i.D)(te).pipe((0,ee.z)(Pe=>function Ql(D,N,R,H){const te=cr(N)??H,me=No(D,te);return Jt(me.resolve?me.resolve(N,R):te.runInContext(()=>me(N,R)))}(D[Pe],N,R,H).pipe((0,pt.P)(),(0,st.b)(Ze=>{me[Pe]=Ze}))),Qt(1),function di(D){return(0,Be.U)(()=>D)}(me),(0,Et.K)(Pe=>zr(Pe)?dt.E:(0,kt._)(Pe)))}(me,D,N,H).pipe((0,Be.U)(Pe=>(D._resolvedData=Pe,D.data=Cr(D,R).resolve,te&&Jl(te)&&(D.data[vt]=te.title),null)))}(Pe.route,H,D,N)),(0,st.b)(()=>me++),Qt(1),(0,ee.z)(Pe=>me===te.length?(0,se.of)(R):dt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,st.b)({next:()=>Tn=!0,complete:()=>{Tn||(this.restoreHistory(Bt),this.cancelNavigationTransition(Bt,"",2))}}))}),(0,st.b)(Bt=>{const Tn=new rl(Bt.id,this.serializeUrl(Bt.extractedUrl),this.serializeUrl(Bt.urlAfterRedirects),Bt.targetSnapshot);this.triggerEvent(Tn)}))}),Nr(Ze=>{const Bt=Tn=>{const Vi=[];Tn.routeConfig?.loadComponent&&!Tn.routeConfig._loadedComponent&&Vi.push(this.configLoader.loadComponent(Tn.routeConfig).pipe((0,st.b)(jn=>{Tn.component=jn}),(0,Be.U)(()=>{})));for(const jn of Tn.children)Vi.push(...Bt(jn));return Vi};return(0,Oe.a)(Bt(Ze.targetSnapshot.root)).pipe((0,gn.d)(),(0,nt.q)(1))}),Nr(()=>this.afterPreactivation()),(0,Be.U)(Ze=>{const Bt=function sl(D,N,R){const H=Xo(D,N._root,R?R._root:void 0);return new ar(H,N)}(this.routeReuseStrategy,Ze.targetSnapshot,Ze.currentRouterState);return te={...Ze,targetRouterState:Bt}}),(0,st.b)(Ze=>{this.currentUrlTree=Ze.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ze.urlAfterRedirects,Ze.rawUrl),this.routerState=Ze.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ze.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ze),this.browserUrlTree=Ze.urlAfterRedirects)}),((D,N,R)=>(0,Be.U)(H=>(new ol(N,H.targetRouterState,H.currentRouterState,R).activate(D),H)))(this.rootContexts,this.routeReuseStrategy,Ze=>this.triggerEvent(Ze)),(0,st.b)({next(){me=!0},complete(){me=!0}}),(0,Un.x)(()=>{me||Pe||this.cancelNavigationTransition(te,"",1),this.currentNavigation?.id===te.id&&(this.currentNavigation=null)}),(0,Et.K)(Ze=>{if(Pe=!0,Or(Ze)){vo(Ze)||(this.navigated=!0,this.restoreHistory(te,!0));const Bt=new Xr(te.id,this.serializeUrl(te.extractedUrl),Ze.message,Ze.cancellationCode);if(H.next(Bt),vo(Ze)){const Tn=this.urlHandlingStrategy.merge(Ze.url,this.rawUrlTree),Vi={skipLocationChange:te.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Dn(te.source)};this.scheduleNavigation(Tn,"imperative",null,Vi,{resolve:te.resolve,reject:te.reject,promise:te.promise})}else te.resolve(!1)}else{this.restoreHistory(te,!0);const Bt=new Wr(te.id,this.serializeUrl(te.extractedUrl),Ze,te.targetSnapshot??void 0);H.next(Bt);try{te.resolve(this.errorHandler(Ze))}catch(Tn){te.reject(Tn)}}return dt.E}))}))}resetRootComponentType(R){this.rootComponentType=R,this.routerState.root.component=this.rootComponentType}setTransition(R){this.transitions.next({...this.transitions.value,...R})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(R=>{const H="popstate"===R.type?"popstate":"hashchange";"popstate"===H&&setTimeout(()=>{const te={replaceUrl:!0},me=R.state?.navigationId?R.state:null;if(me){const Ze={...me};delete Ze.navigationId,delete Ze.\u0275routerPageId,0!==Object.keys(Ze).length&&(te.state=Ze)}const Pe=this.parseUrl(R.url);this.scheduleNavigation(Pe,H,me,te)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(R){this.events.next(R)}resetConfig(R){this.config=R.map(la),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(R,H={}){const{relativeTo:te,queryParams:me,fragment:Pe,queryParamsHandling:Ze,preserveFragment:Bt}=H,Tn=te||this.routerState.root,Vi=Bt?this.currentUrlTree.fragment:Pe;let jn=null;switch(Ze){case"merge":jn={...this.currentUrlTree.queryParams,...me};break;case"preserve":jn=this.currentUrlTree.queryParams;break;default:jn=me||null}return null!==jn&&(jn=this.removeEmptyProps(jn)),wr(Tn,this.currentUrlTree,R,jn,Vi??null)}navigateByUrl(R,H={skipLocationChange:!1}){const te=It(R)?R:this.parseUrl(R),me=this.urlHandlingStrategy.merge(te,this.rawUrlTree);return this.scheduleNavigation(me,"imperative",null,H)}navigate(R,H={skipLocationChange:!1}){return function lo(D){for(let N=0;N<D.length;N++){if(null==D[N])throw new g.vHH(4008,false)}}(R),this.navigateByUrl(this.createUrlTree(R,H),H)}serializeUrl(R){return this.urlSerializer.serialize(R)}parseUrl(R){let H;try{H=this.urlSerializer.parse(R)}catch(te){H=this.malformedUriErrorHandler(te,this.urlSerializer,R)}return H}isActive(R,H){let te;if(te=!0===H?{...Fr}:!1===H?{...sa}:H,It(R))return sr(this.currentUrlTree,R,te);const me=this.parseUrl(R);return sr(this.currentUrlTree,me,te)}removeEmptyProps(R){return Object.keys(R).reduce((H,te)=>{const me=R[te];return null!=me&&(H[te]=me),H},{})}processNavigations(){this.navigations.subscribe(R=>{this.navigated=!0,this.lastSuccessfulId=R.id,this.currentPageId=R.targetPageId,this.events.next(new Qo(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),R.resolve(!0)},R=>{this.console.warn(`Unhandled Navigation Error: ${R}`)})}scheduleNavigation(R,H,te,me,Pe){if(this.disposed)return Promise.resolve(!1);let Ze,Bt,Tn;Pe?(Ze=Pe.resolve,Bt=Pe.reject,Tn=Pe.promise):Tn=new Promise((Bi,os)=>{Ze=Bi,Bt=os});const Vi=++this.navigationId;let jn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(te=this.location.getState()),jn=te&&te.\u0275routerPageId?te.\u0275routerPageId:me.replaceUrl||me.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):jn=0,this.setTransition({id:Vi,targetPageId:jn,source:H,restoredState:te,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:R,extras:me,resolve:Ze,reject:Bt,promise:Tn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Tn.catch(Bi=>Promise.reject(Bi))}setBrowserUrl(R,H){const te=this.urlSerializer.serialize(R),me={...H.extras.state,...this.generateNgRouterState(H.id,H.targetPageId)};this.location.isCurrentPathEqualTo(te)||H.extras.replaceUrl?this.location.replaceState(te,"",me):this.location.go(te,"",me)}restoreHistory(R,H=!1){if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-R.targetPageId;"popstate"!==R.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===te?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===te&&(this.resetState(R),this.browserUrlTree=R.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(te)}else"replace"===this.canceledNavigationResolution&&(H&&this.resetState(R),this.resetUrlToCurrentUrlTree())}resetState(R){this.routerState=R.currentRouterState,this.currentUrlTree=R.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,R.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(R,H,te){const me=new Xr(R.id,this.serializeUrl(R.extractedUrl),H,te);this.triggerEvent(me),R.resolve(!1)}generateNgRouterState(R,H){return"computed"===this.canceledNavigationResolution?{navigationId:R,\u0275routerPageId:H}:{navigationId:R}}}return D.\u0275fac=function(R){g.$Z()},D.\u0275prov=g.Yz7({token:D,factory:function(){return Vn()},providedIn:"root"}),D})();function Dn(D){return"imperative"!==D}let Ht=(()=>{class D{constructor(R,H,te,me,Pe){this.router=R,this.route=H,this.tabIndexAttribute=te,this.renderer=me,this.el=Pe,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ge.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(R){this._preserveFragment=(0,g.D6c)(R)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(R){this._skipLocationChange=(0,g.D6c)(R)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(R){this._replaceUrl=(0,g.D6c)(R)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(R){if(null!=this.tabIndexAttribute)return;const H=this.renderer,te=this.el.nativeElement;null!==R?H.setAttribute(te,"tabindex",R):H.removeAttribute(te,"tabindex")}ngOnChanges(R){this.onChanges.next(this)}set routerLink(R){null!=R?(this.commands=Array.isArray(R)?R:[R],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(R){return new(R||D)(g.Y36(Fn),g.Y36(ds),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},D.\u0275dir=g.lG2({type:D,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(R,H){1&R&&g.NdJ("click",function(){return H.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),D})(),sn=(()=>{class D{constructor(R,H,te){this.router=R,this.route=H,this.locationStrategy=te,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ge.x,this.subscription=R.events.subscribe(me=>{me instanceof Qo&&this.updateTargetUrlAndHref()})}set preserveFragment(R){this._preserveFragment=(0,g.D6c)(R)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(R){this._skipLocationChange=(0,g.D6c)(R)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(R){this._replaceUrl=(0,g.D6c)(R)}get replaceUrl(){return this._replaceUrl}set routerLink(R){this.commands=null!=R?Array.isArray(R)?R:[R]:null}ngOnChanges(R){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(R,H,te,me,Pe){return!!(0!==R||H||te||me||Pe||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(R){return new(R||D)(g.Y36(Fn),g.Y36(ds),g.Y36(qt.S$))},D.\u0275dir=g.lG2({type:D,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(R,H){1&R&&g.NdJ("click",function(me){return H.onClick(me.button,me.ctrlKey,me.shiftKey,me.altKey,me.metaKey)}),2&R&&g.uIk("target",H.target)("href",H.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),D})();class Tc{}let ec=(()=>{class D{constructor(R,H,te,me,Pe){this.router=R,this.injector=te,this.preloadingStrategy=me,this.loader=Pe}setUpPreloading(){this.subscription=this.router.events.pipe((0,xe.h)(R=>R instanceof Qo),(0,Ue.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(R,H){const te=[];for(const me of H){me.providers&&!me._injector&&(me._injector=(0,g.MMx)(me.providers,R,`Route: ${me.path}`));const Pe=me._injector??R,Ze=me._loadedInjector??Pe;me.loadChildren&&!me._loadedRoutes&&void 0===me.canLoad||me.loadComponent&&!me._loadedComponent?te.push(this.preloadConfig(Pe,me)):(me.children||me._loadedRoutes)&&te.push(this.processRoutes(Ze,me.children??me._loadedRoutes))}return(0,i.D)(te).pipe((0,xt.J)())}preloadConfig(R,H){return this.preloadingStrategy.preload(H,()=>{let te;te=H.loadChildren&&void 0===H.canLoad?this.loader.loadChildren(R,H):(0,se.of)(null);const me=te.pipe((0,ee.z)(Pe=>null===Pe?(0,se.of)(void 0):(H._loadedRoutes=Pe.routes,H._loadedInjector=Pe.injector,this.processRoutes(Pe.injector??R,Pe.routes))));if(H.loadComponent&&!H._loadedComponent){const Pe=this.loader.loadComponent(H);return(0,i.D)([me,Pe]).pipe((0,xt.J)())}return me})}}return D.\u0275fac=function(R){return new(R||D)(g.LFG(Fn),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(Tc),g.LFG(ur))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const dl=new g.OlP("");let fa=(()=>{class D{constructor(R,H,te={}){this.router=R,this.viewportScroller=H,this.options=te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},te.scrollPositionRestoration=te.scrollPositionRestoration||"disabled",te.anchorScrolling=te.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(R=>{R instanceof Rr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=R.navigationTrigger,this.restoredId=R.restoredState?R.restoredState.navigationId:0):R instanceof Qo&&(this.lastId=R.id,this.scheduleScrollEvent(R,this.router.parseUrl(R.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(R=>{R instanceof ut&&(R.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(R.position):R.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(R.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(R,H){this.router.triggerEvent(new ut(R,"popstate"===this.lastSource?this.store[this.restoredId]:null,H))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return D.\u0275fac=function(R){g.$Z()},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac}),D})();function jo(D,N){return{\u0275kind:D,\u0275providers:N}}function Mi(D){return[{provide:jl,multi:!0,useValue:D}]}function pa(){const D=(0,g.f3M)(g.zs3);return N=>{const R=D.get(g.z2F);if(N!==R.components[0])return;const H=D.get(Fn),te=D.get(Qr);1===D.get(An)&&H.initialNavigation(),D.get(Rs,null,g.XFs.Optional)?.setUpPreloading(),D.get(dl,null,g.XFs.Optional)?.init(),H.resetRootComponentType(R.componentTypes[0]),te.next(),te.complete()}}const Qr=new g.OlP("",{factory:()=>new ge.x}),An=new g.OlP("",{providedIn:"root",factory:()=>1});const Rs=new g.OlP("");function bn(D){return jo(0,[{provide:Rs,useExisting:ec},{provide:Tc,useExisting:D}])}const Gc=new g.OlP("ROUTER_FORROOT_GUARD"),uc=[qt.Ye,{provide:vs,useClass:qn},{provide:Fn,useFactory:Vn},Zr,{provide:ds,useFactory:function Qa(D){return D.routerState.root},deps:[Fn]},ur];function Vs(){return new g.PXZ("Router",Fn)}let hl=(()=>{class D{constructor(R){}static forRoot(R,H){return{ngModule:D,providers:[uc,[],Mi(R),{provide:Gc,useFactory:wo,deps:[[Fn,new g.FiY,new g.tp0]]},{provide:bl,useValue:H||{}},H?.useHash?{provide:qt.S$,useClass:qt.Do}:{provide:qt.S$,useClass:qt.b0},{provide:dl,useFactory:()=>{const D=(0,g.f3M)(Fn),N=(0,g.f3M)(qt.EM),R=(0,g.f3M)(bl);return R.scrollOffset&&N.setOffset(R.scrollOffset),new fa(D,N,R)}},H?.preloadingStrategy?bn(H.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:Vs},H?.initialNavigation?Ja(H):[],[{provide:Gl,useFactory:pa},{provide:g.tb,multi:!0,useExisting:Gl}]]}}static forChild(R){return{ngModule:D,providers:[Mi(R)]}}}return D.\u0275fac=function(R){return new(R||D)(g.LFG(Gc,8))},D.\u0275mod=g.oAB({type:D}),D.\u0275inj=g.cJS({imports:[Bo]}),D})();function wo(D){return"guarded"}function Ja(D){return["disabled"===D.initialNavigation?jo(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const N=(0,g.f3M)(Fn);return()=>{N.setUpLocationChangeListener()}}},{provide:An,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?jo(2,[{provide:An,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:N=>{const R=N.get(qt.V_,Promise.resolve(null));let H=!1;return()=>R.then(()=>new Promise(me=>{const Pe=N.get(Fn),Ze=N.get(Qr);(function te(me){N.get(Fn).events.pipe((0,xe.h)(Ze=>Ze instanceof Qo||Ze instanceof Xr||Ze instanceof Wr),(0,Be.U)(Ze=>Ze instanceof Qo||Ze instanceof Xr&&(0===Ze.code||1===Ze.code)&&null),(0,xe.h)(Ze=>null!==Ze),(0,nt.q)(1)).subscribe(()=>{me()})})(()=>{me(!0),H=!0}),Pe.afterPreactivation=()=>(me(!0),H||Ze.closed?(0,se.of)(void 0):Ze),Pe.initialNavigation()}))}}]).\u0275providers:[]]}const Gl=new g.OlP("")},3942:(Sn,Ct,Q)=>{Q.d(Ct,{Z:()=>wt});var g=Q(2090),i=Q(4859),se=Q(9681),ge=Q(1877);class Ke{constructor(Dt,bt){this._delegate=Dt,this.firebase=bt,(0,se._addComponent)(Dt,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=Dt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Dt){this._delegate.automaticDataCollectionEnabled=Dt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Dt=>{this._delegate.checkDestroyed(),Dt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,se.deleteApp)(this._delegate)))}_getService(Dt,bt=se._DEFAULT_ENTRY_NAME){var ot;this._delegate.checkDestroyed();const qt=this._delegate.container.getProvider(Dt);return!qt.isInitialized()&&"EXPLICIT"===(null===(ot=qt.getComponent())||void 0===ot?void 0:ot.instantiationMode)&&qt.initialize(),qt.getImmediate({identifier:bt})}_removeServiceInstance(Dt,bt=se._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Dt).clearInstance(bt)}_addComponent(Dt){(0,se._addComponent)(this._delegate,Dt)}_addOrOverwriteComponent(Dt){(0,se._addOrOverwriteComponent)(this._delegate,Dt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oe=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Re=function rt(){const Wt=function Me(Wt){const Dt={},bt={__esModule:!0,initializeApp:function Be(xe,ee={}){const pt=se.initializeApp(xe,ee);if((0,g.r3)(Dt,pt.name))return Dt[pt.name];const Ue=new Wt(pt,bt);return Dt[pt.name]=Ue,Ue},app:qt,registerVersion:se.registerVersion,setLogLevel:se.setLogLevel,onLog:se.onLog,apps:null,SDK_VERSION:se.SDK_VERSION,INTERNAL:{registerComponent:function nt(xe){const ee=xe.name,pt=ee.replace("-compat","");if(se._registerComponent(xe)&&"PUBLIC"===xe.type){const Ue=(st=qt())=>{if("function"!=typeof st[pt])throw Oe.create("invalid-app-argument",{appName:ee});return st[pt]()};void 0!==xe.serviceProps&&(0,g.ZB)(Ue,xe.serviceProps),bt[pt]=Ue,Wt.prototype[pt]=function(...st){return this._getService.bind(this,ee).apply(this,xe.multipleInstances?st:[])}}return"PUBLIC"===xe.type?bt[pt]:null},removeApp:function ot(xe){delete Dt[xe]},useAsService:function Xe(xe,ee){return"serverAuth"===ee?null:ee},modularAPIs:se}};function qt(xe){if(!(0,g.r3)(Dt,xe=xe||se._DEFAULT_ENTRY_NAME))throw Oe.create("no-app",{appName:xe});return Dt[xe]}return bt.default=bt,Object.defineProperty(bt,"apps",{get:function we(){return Object.keys(Dt).map(xe=>Dt[xe])}}),qt.App=Wt,bt}(Ke);return Wt.INTERNAL=Object.assign(Object.assign({},Wt.INTERNAL),{createFirebaseNamespace:rt,extendNamespace:function Dt(bt){(0,g.ZB)(Wt,bt)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Wt}(),Se=new ge.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){Se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Wt=self.firebase.SDK_VERSION;Wt&&Wt.indexOf("LITE")>=0&&Se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const wt=Re;!function dt(Wt){(0,se.registerVersion)("@firebase/app-compat","0.1.32",Wt)}()},9681:(Sn,Ct,Q)=>{Q.r(Ct),Q.d(Ct,{FirebaseError:()=>ge.ZR,SDK_VERSION:()=>Zi,_DEFAULT_ENTRY_NAME:()=>Pn,_addComponent:()=>xt,_addOrOverwriteComponent:()=>Ut,_apps:()=>di,_clearComponents:()=>Hn,_components:()=>Un,_getProvider:()=>vt,_registerComponent:()=>He,_removeServiceInstance:()=>un,deleteApp:()=>yi,getApp:()=>Ki,getApps:()=>Ui,initializeApp:()=>oi,onLog:()=>Hi,registerVersion:()=>Ni,setLogLevel:()=>Qi});var g=Q(5861),i=Q(4859),se=Q(1877),ge=Q(2090),Ke=Q(8766);class Ee{constructor(it){this.container=it}getPlatformInfoString(){return this.container.getProviders().map(Ye=>{if(function Oe(ze){return"VERSION"===ze.getComponent()?.type}(Ye)){const Zt=Ye.getImmediate();return`${Zt.library}/${Zt.version}`}return null}).filter(Ye=>Ye).join(" ")}}const Me="@firebase/app",Re=new se.Yd("@firebase/app"),Pn="[DEFAULT]",Gt={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},di=new Map,Un=new Map;function xt(ze,it){try{ze.container.addComponent(it)}catch(Ye){Re.debug(`Component ${it.name} failed to register with FirebaseApp ${ze.name}`,Ye)}}function Ut(ze,it){ze.container.addOrOverwriteComponent(it)}function He(ze){const it=ze.name;if(Un.has(it))return Re.debug(`There were multiple attempts to register component ${it}.`),!1;Un.set(it,ze);for(const Ye of di.values())xt(Ye,ze);return!0}function vt(ze,it){const Ye=ze.container.getProvider("heartbeat").getImmediate({optional:!0});return Ye&&Ye.triggerHeartbeat(),ze.container.getProvider(it)}function un(ze,it,Ye=Pn){vt(ze,it).clearInstance(Ye)}function Hn(){Un.clear()}const Ci=new ge.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ei{constructor(it,Ye,Zt){this._isDeleted=!1,this._options=Object.assign({},it),this._config=Object.assign({},Ye),this._name=Ye.name,this._automaticDataCollectionEnabled=Ye.automaticDataCollectionEnabled,this._container=Zt,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this.checkDestroyed(),this._automaticDataCollectionEnabled=it}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(it){this._isDeleted=it}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}const Zi="9.9.3";function oi(ze,it={}){"object"!=typeof it&&(it={name:it});const Ye=Object.assign({name:Pn,automaticDataCollectionEnabled:!1},it),Zt=Ye.name;if("string"!=typeof Zt||!Zt)throw Ci.create("bad-app-name",{appName:String(Zt)});const mn=di.get(Zt);if(mn){if((0,ge.vZ)(ze,mn.options)&&(0,ge.vZ)(Ye,mn.config))return mn;throw Ci.create("duplicate-app",{appName:Zt})}const Rn=new i.H0(Zt);for(const Xi of Un.values())Rn.addComponent(Xi);const zi=new Ei(ze,Ye,Rn);return di.set(Zt,zi),zi}function Ki(ze=Pn){const it=di.get(ze);if(!it)throw Ci.create("no-app",{appName:ze});return it}function Ui(){return Array.from(di.values())}function yi(ze){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,g.Z)(function*(ze){const it=ze.name;di.has(it)&&(di.delete(it),yield Promise.all(ze.container.getProviders().map(Ye=>Ye.delete())),ze.isDeleted=!0)})).apply(this,arguments)}function Ni(ze,it,Ye){var Zt;let mn=null!==(Zt=Gt[ze])&&void 0!==Zt?Zt:ze;Ye&&(mn+=`-${Ye}`);const Rn=mn.match(/\s|\//),zi=it.match(/\s|\//);if(Rn||zi){const Xi=[`Unable to register library "${mn}" with version "${it}":`];return Rn&&Xi.push(`library name "${mn}" contains illegal characters (whitespace or "/")`),Rn&&zi&&Xi.push("and"),zi&&Xi.push(`version name "${it}" contains illegal characters (whitespace or "/")`),void Re.warn(Xi.join(" "))}He(new i.wA(`${mn}-version`,()=>({library:mn,version:it}),"VERSION"))}function Hi(ze,it){if(null!==ze&&"function"!=typeof ze)throw Ci.create("invalid-log-argument");(0,se.Am)(ze,it)}function Qi(ze){(0,se.Ub)(ze)}const xr="firebase-heartbeat-store";let br=null;function Ji(){return br||(br=(0,Ke.X3)("firebase-heartbeat-database",1,{upgrade:(ze,it)=>{0===it&&ze.createObjectStore(xr)}}).catch(ze=>{throw Ci.create("idb-open",{originalErrorMessage:ze.message})})),br}function Gn(){return(Gn=(0,g.Z)(function*(ze){var it;try{return(yield Ji()).transaction(xr).objectStore(xr).get(Mn(ze))}catch(Ye){if(Ye instanceof ge.ZR)Re.warn(Ye.message);else{const Zt=Ci.create("idb-get",{originalErrorMessage:null===(it=Ye)||void 0===it?void 0:it.message});Re.warn(Zt.message)}}})).apply(this,arguments)}function fi(ze,it){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(ze,it){var Ye;try{const mn=(yield Ji()).transaction(xr,"readwrite");return yield mn.objectStore(xr).put(it,Mn(ze)),mn.done}catch(Zt){if(Zt instanceof ge.ZR)Re.warn(Zt.message);else{const mn=Ci.create("idb-set",{originalErrorMessage:null===(Ye=Zt)||void 0===Ye?void 0:Ye.message});Re.warn(mn.message)}}})).apply(this,arguments)}function Mn(ze){return`${ze.name}!${ze.options.appId}`}class or{constructor(it){this.container=it,this._heartbeatsCache=null;const Ye=this.container.getProvider("app").getImmediate();this._storage=new qn(Ye),this._heartbeatsCachePromise=this._storage.read().then(Zt=>(this._heartbeatsCache=Zt,Zt))}triggerHeartbeat(){var it=this;return(0,g.Z)(function*(){const Zt=it.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mn=ai();if(null===it._heartbeatsCache&&(it._heartbeatsCache=yield it._heartbeatsCachePromise),it._heartbeatsCache.lastSentHeartbeatDate!==mn&&!it._heartbeatsCache.heartbeats.some(Rn=>Rn.date===mn))return it._heartbeatsCache.heartbeats.push({date:mn,agent:Zt}),it._heartbeatsCache.heartbeats=it._heartbeatsCache.heartbeats.filter(Rn=>{const zi=new Date(Rn.date).valueOf();return Date.now()-zi<=2592e6}),it._storage.overwrite(it._heartbeatsCache)})()}getHeartbeatsHeader(){var it=this;return(0,g.Z)(function*(){if(null===it._heartbeatsCache&&(yield it._heartbeatsCachePromise),null===it._heartbeatsCache||0===it._heartbeatsCache.heartbeats.length)return"";const Ye=ai(),{heartbeatsToSend:Zt,unsentEntries:mn}=function vs(ze,it=1024){const Ye=[];let Zt=ze.slice();for(const mn of ze){const Rn=Ye.find(zi=>zi.agent===mn.agent);if(Rn){if(Rn.dates.push(mn.date),ct(Ye)>it){Rn.dates.pop();break}}else if(Ye.push({agent:mn.agent,dates:[mn.date]}),ct(Ye)>it){Ye.pop();break}Zt=Zt.slice(1)}return{heartbeatsToSend:Ye,unsentEntries:Zt}}(it._heartbeatsCache.heartbeats),Rn=(0,ge.L)(JSON.stringify({version:2,heartbeats:Zt}));return it._heartbeatsCache.lastSentHeartbeatDate=Ye,mn.length>0?(it._heartbeatsCache.heartbeats=mn,yield it._storage.overwrite(it._heartbeatsCache)):(it._heartbeatsCache.heartbeats=[],it._storage.overwrite(it._heartbeatsCache)),Rn})()}}function ai(){return(new Date).toISOString().substring(0,10)}class qn{constructor(it){this.app=it,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ge.hl)()&&(0,ge.eu)().then(()=>!0).catch(()=>!1)})()}read(){var it=this;return(0,g.Z)(function*(){return(yield it._canUseIndexedDBPromise)&&(yield function Kn(ze){return Gn.apply(this,arguments)}(it.app))||{heartbeats:[]}})()}overwrite(it){var Ye=this;return(0,g.Z)(function*(){var Zt;if(yield Ye._canUseIndexedDBPromise){const Rn=yield Ye.read();return fi(Ye.app,{lastSentHeartbeatDate:null!==(Zt=it.lastSentHeartbeatDate)&&void 0!==Zt?Zt:Rn.lastSentHeartbeatDate,heartbeats:it.heartbeats})}})()}add(it){var Ye=this;return(0,g.Z)(function*(){var Zt;if(yield Ye._canUseIndexedDBPromise){const Rn=yield Ye.read();return fi(Ye.app,{lastSentHeartbeatDate:null!==(Zt=it.lastSentHeartbeatDate)&&void 0!==Zt?Zt:Rn.lastSentHeartbeatDate,heartbeats:[...Rn.heartbeats,...it.heartbeats]})}})()}}function ct(ze){return(0,ge.L)(JSON.stringify({version:2,heartbeats:ze})).length}!function qe(ze){He(new i.wA("platform-logger",it=>new Ee(it),"PRIVATE")),He(new i.wA("heartbeat",it=>new or(it),"PRIVATE")),Ni(Me,"0.7.31",ze),Ni(Me,"0.7.31","esm2017"),Ni("fire-js","")}("")},4859:(Sn,Ct,Q)=>{Q.d(Ct,{H0:()=>Me,wA:()=>se,zt:()=>Ke});var g=Q(5861),i=Q(2090);class se{constructor(Re,Se,Ge){this.name=Re,this.instanceFactory=Se,this.type=Ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Re){return this.instantiationMode=Re,this}setMultipleInstances(Re){return this.multipleInstances=Re,this}setServiceProps(Re){return this.serviceProps=Re,this}setInstanceCreatedCallback(Re){return this.onInstanceCreated=Re,this}}const ge="[DEFAULT]";class Ke{constructor(Re,Se){this.name=Re,this.container=Se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Re){const Se=this.normalizeInstanceIdentifier(Re);if(!this.instancesDeferred.has(Se)){const Ge=new i.BH;if(this.instancesDeferred.set(Se,Ge),this.isInitialized(Se)||this.shouldAutoInitialize())try{const kt=this.getOrInitializeService({instanceIdentifier:Se});kt&&Ge.resolve(kt)}catch{}}return this.instancesDeferred.get(Se).promise}getImmediate(Re){var Se;const Ge=this.normalizeInstanceIdentifier(Re?.identifier),kt=null!==(Se=Re?.optional)&&void 0!==Se&&Se;if(!this.isInitialized(Ge)&&!this.shouldAutoInitialize()){if(kt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ge})}catch(dt){if(kt)return null;throw dt}}getComponent(){return this.component}setComponent(Re){if(Re.name!==this.name)throw Error(`Mismatching Component ${Re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Re,this.shouldAutoInitialize()){if(function Oe(rt){return"EAGER"===rt.instantiationMode}(Re))try{this.getOrInitializeService({instanceIdentifier:ge})}catch{}for(const[Se,Ge]of this.instancesDeferred.entries()){const kt=this.normalizeInstanceIdentifier(Se);try{const dt=this.getOrInitializeService({instanceIdentifier:kt});Ge.resolve(dt)}catch{}}}}clearInstance(Re=ge){this.instancesDeferred.delete(Re),this.instancesOptions.delete(Re),this.instances.delete(Re)}delete(){var Re=this;return(0,g.Z)(function*(){const Se=Array.from(Re.instances.values());yield Promise.all([...Se.filter(Ge=>"INTERNAL"in Ge).map(Ge=>Ge.INTERNAL.delete()),...Se.filter(Ge=>"_delete"in Ge).map(Ge=>Ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Re=ge){return this.instances.has(Re)}getOptions(Re=ge){return this.instancesOptions.get(Re)||{}}initialize(Re={}){const{options:Se={}}=Re,Ge=this.normalizeInstanceIdentifier(Re.instanceIdentifier);if(this.isInitialized(Ge))throw Error(`${this.name}(${Ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const kt=this.getOrInitializeService({instanceIdentifier:Ge,options:Se});for(const[dt,wt]of this.instancesDeferred.entries())Ge===this.normalizeInstanceIdentifier(dt)&&wt.resolve(kt);return kt}onInit(Re,Se){var Ge;const kt=this.normalizeInstanceIdentifier(Se),dt=null!==(Ge=this.onInitCallbacks.get(kt))&&void 0!==Ge?Ge:new Set;dt.add(Re),this.onInitCallbacks.set(kt,dt);const wt=this.instances.get(kt);return wt&&Re(wt,kt),()=>{dt.delete(Re)}}invokeOnInitCallbacks(Re,Se){const Ge=this.onInitCallbacks.get(Se);if(Ge)for(const kt of Ge)try{kt(Re,Se)}catch{}}getOrInitializeService({instanceIdentifier:Re,options:Se={}}){let Ge=this.instances.get(Re);if(!Ge&&this.component&&(Ge=this.component.instanceFactory(this.container,{instanceIdentifier:(rt=Re,rt===ge?void 0:rt),options:Se}),this.instances.set(Re,Ge),this.instancesOptions.set(Re,Se),this.invokeOnInitCallbacks(Ge,Re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Re,Ge)}catch{}var rt;return Ge||null}normalizeInstanceIdentifier(Re=ge){return this.component?this.component.multipleInstances?Re:ge:Re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(Re){this.name=Re,this.providers=new Map}addComponent(Re){const Se=this.getProvider(Re.name);if(Se.isComponentSet())throw new Error(`Component ${Re.name} has already been registered with ${this.name}`);Se.setComponent(Re)}addOrOverwriteComponent(Re){this.getProvider(Re.name).isComponentSet()&&this.providers.delete(Re.name),this.addComponent(Re)}getProvider(Re){if(this.providers.has(Re))return this.providers.get(Re);const Se=new Ke(Re,this);return this.providers.set(Re,Se),Se}getProviders(){return Array.from(this.providers.values())}}},1877:(Sn,Ct,Q)=>{Q.d(Ct,{Am:()=>rt,Ub:()=>Me,Yd:()=>Oe,in:()=>i});const g=[];var i=(()=>{return(Re=i||(i={}))[Re.DEBUG=0]="DEBUG",Re[Re.VERBOSE=1]="VERBOSE",Re[Re.INFO=2]="INFO",Re[Re.WARN=3]="WARN",Re[Re.ERROR=4]="ERROR",Re[Re.SILENT=5]="SILENT",i;var Re})();const se={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},ge=i.INFO,Ke={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},Ee=(Re,Se,...Ge)=>{if(Se<Re.logLevel)return;const kt=(new Date).toISOString(),dt=Ke[Se];if(!dt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Se})`);console[dt](`[${kt}]  ${Re.name}:`,...Ge)};class Oe{constructor(Se){this.name=Se,this._logLevel=ge,this._logHandler=Ee,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(Se){if(!(Se in i))throw new TypeError(`Invalid value "${Se}" assigned to \`logLevel\``);this._logLevel=Se}setLogLevel(Se){this._logLevel="string"==typeof Se?se[Se]:Se}get logHandler(){return this._logHandler}set logHandler(Se){if("function"!=typeof Se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Se}get userLogHandler(){return this._userLogHandler}set userLogHandler(Se){this._userLogHandler=Se}debug(...Se){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...Se),this._logHandler(this,i.DEBUG,...Se)}log(...Se){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...Se),this._logHandler(this,i.VERBOSE,...Se)}info(...Se){this._userLogHandler&&this._userLogHandler(this,i.INFO,...Se),this._logHandler(this,i.INFO,...Se)}warn(...Se){this._userLogHandler&&this._userLogHandler(this,i.WARN,...Se),this._logHandler(this,i.WARN,...Se)}error(...Se){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...Se),this._logHandler(this,i.ERROR,...Se)}}function Me(Re){g.forEach(Se=>{Se.setLogLevel(Re)})}function rt(Re,Se){for(const Ge of g){let kt=null;Se&&Se.level&&(kt=se[Se.level]),Ge.userLogHandler=null===Re?null:(dt,wt,...Wt)=>{const Dt=Wt.map(bt=>{if(null==bt)return null;if("string"==typeof bt)return bt;if("number"==typeof bt||"boolean"==typeof bt)return bt.toString();if(bt instanceof Error)return bt.message;try{return JSON.stringify(bt)}catch{return null}}).filter(bt=>bt).join(" ");wt>=(kt??dt.logLevel)&&Re({level:i[wt].toLowerCase(),message:Dt,args:Wt,type:dt.name})}}}},8766:(Sn,Ct,Q)=>{Q.d(Ct,{Lj:()=>Be,X3:()=>qt});var g=Q(5861);let se,ge;const Oe=new WeakMap,Me=new WeakMap,rt=new WeakMap,Re=new WeakMap,Se=new WeakMap;let dt={get(ee,pt,Ue){if(ee instanceof IDBTransaction){if("done"===pt)return Me.get(ee);if("objectStoreNames"===pt)return ee.objectStoreNames||rt.get(ee);if("store"===pt)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return bt(ee[pt])},set:(ee,pt,Ue)=>(ee[pt]=Ue,!0),has:(ee,pt)=>ee instanceof IDBTransaction&&("done"===pt||"store"===pt)||pt in ee};function Dt(ee){return"function"==typeof ee?function Wt(ee){return ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ee)?function(...pt){return ee.apply(ot(this),pt),bt(Oe.get(this))}:function(...pt){return bt(ee.apply(ot(this),pt))}:function(pt,...Ue){const st=ee.call(ot(this),pt,...Ue);return rt.set(st,pt.sort?pt.sort():[pt]),bt(st)}}(ee):(ee instanceof IDBTransaction&&function kt(ee){if(Me.has(ee))return;const pt=new Promise((Ue,st)=>{const Et=()=>{ee.removeEventListener("complete",yt),ee.removeEventListener("error",Qt),ee.removeEventListener("abort",Qt)},yt=()=>{Ue(),Et()},Qt=()=>{st(ee.error||new DOMException("AbortError","AbortError")),Et()};ee.addEventListener("complete",yt),ee.addEventListener("error",Qt),ee.addEventListener("abort",Qt)});Me.set(ee,pt)}(ee),((ee,pt)=>pt.some(Ue=>ee instanceof Ue))(ee,function Ke(){return se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ee,dt):ee)}function bt(ee){if(ee instanceof IDBRequest)return function Ge(ee){const pt=new Promise((Ue,st)=>{const Et=()=>{ee.removeEventListener("success",yt),ee.removeEventListener("error",Qt)},yt=()=>{Ue(bt(ee.result)),Et()},Qt=()=>{st(ee.error),Et()};ee.addEventListener("success",yt),ee.addEventListener("error",Qt)});return pt.then(Ue=>{Ue instanceof IDBCursor&&Oe.set(Ue,ee)}).catch(()=>{}),Se.set(pt,ee),pt}(ee);if(Re.has(ee))return Re.get(ee);const pt=Dt(ee);return pt!==ee&&(Re.set(ee,pt),Se.set(pt,ee)),pt}const ot=ee=>Se.get(ee);function qt(ee,pt,{blocked:Ue,upgrade:st,blocking:Et,terminated:yt}={}){const Qt=indexedDB.open(ee,pt),rn=bt(Qt);return st&&Qt.addEventListener("upgradeneeded",gn=>{st(bt(Qt.result),gn.oldVersion,gn.newVersion,bt(Qt.transaction))}),Ue&&Qt.addEventListener("blocked",()=>Ue()),rn.then(gn=>{yt&&gn.addEventListener("close",()=>yt()),Et&&gn.addEventListener("versionchange",()=>Et())}).catch(()=>{}),rn}function Be(ee,{blocked:pt}={}){const Ue=indexedDB.deleteDatabase(ee);return pt&&Ue.addEventListener("blocked",()=>pt()),bt(Ue).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],Xe=new Map;function xe(ee,pt){if(!(ee instanceof IDBDatabase)||pt in ee||"string"!=typeof pt)return;if(Xe.get(pt))return Xe.get(pt);const Ue=pt.replace(/FromIndex$/,""),st=pt!==Ue,Et=nt.includes(Ue);if(!(Ue in(st?IDBIndex:IDBObjectStore).prototype)||!Et&&!we.includes(Ue))return;const yt=function(){var Qt=(0,g.Z)(function*(rn,...gn){const kn=this.transaction(rn,Et?"readwrite":"readonly");let Pn=kn.store;return st&&(Pn=Pn.index(gn.shift())),(yield Promise.all([Pn[Ue](...gn),Et&&kn.done]))[0]});return function(gn){return Qt.apply(this,arguments)}}();return Xe.set(pt,yt),yt}!function wt(ee){dt=ee(dt)}(ee=>({...ee,get:(pt,Ue,st)=>xe(pt,Ue)||ee.get(pt,Ue,st),has:(pt,Ue)=>!!xe(pt,Ue)||ee.has(pt,Ue)}))},7185:(Sn,Ct,Q)=>{Q.d(Ct,{Rh:()=>kn,_W:()=>Qt});var g=Q(4650),i=Q(7340),se=Q(7579),ge=Q(6895),Ke=Q(1481);const Ee=["toast-component",""];function Oe(xt,Ut){if(1&xt){const He=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){g.CHM(He);const un=g.oxw();return g.KtG(un.remove())}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function Me(xt,Ut){if(1&xt&&(g.ynx(0),g._uU(1),g.BQk()),2&xt){const He=g.oxw(2);g.xp6(1),g.hij("[",He.duplicatesCount+1,"]")}}function rt(xt,Ut){if(1&xt&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,Me,2,1,"ng-container",4),g.qZA()),2&xt){const He=g.oxw();g.Tol(He.options.titleClass),g.uIk("aria-label",He.title),g.xp6(1),g.hij(" ",He.title," "),g.xp6(1),g.Q6J("ngIf",He.duplicatesCount)}}function Re(xt,Ut){if(1&xt&&g._UZ(0,"div",7),2&xt){const He=g.oxw();g.Tol(He.options.messageClass),g.Q6J("innerHTML",He.message,g.oJD)}}function Se(xt,Ut){if(1&xt&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&xt){const He=g.oxw();g.Tol(He.options.messageClass),g.uIk("aria-label",He.message),g.xp6(1),g.hij(" ",He.message," ")}}function Ge(xt,Ut){if(1&xt&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&xt){const He=g.oxw();g.xp6(1),g.Udp("width",He.width+"%")}}class Be{constructor(Ut,He){this.component=Ut,this.injector=He}attach(Ut,He){return this._attachedHost=Ut,Ut.attach(this,He)}detach(){const Ut=this._attachedHost;if(Ut)return this._attachedHost=void 0,Ut.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Ut){this._attachedHost=Ut}}class nt{constructor(Ut,He,vt,un,Hn,Wi){this.toastId=Ut,this.config=He,this.message=vt,this.title=un,this.toastType=Hn,this.toastRef=Wi,this._onTap=new se.x,this._onAction=new se.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Ut){this._onAction.next(Ut)}onAction(){return this._onAction.asObservable()}}const xe=new g.OlP("ToastConfig");class ee{constructor(Ut){this._overlayRef=Ut,this.duplicatesCount=0,this._afterClosed=new se.x,this._activate=new se.x,this._manualClose=new se.x,this._resetTimeout=new se.x,this._countDuplicate=new se.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Ut,He){Ut&&this._resetTimeout.next(),He&&this._countDuplicate.next(++this.duplicatesCount)}}class pt{constructor(Ut,He){this._toastPackage=Ut,this._parentInjector=He}get(Ut,He,vt){return Ut===nt?this._toastPackage:this._parentInjector.get(Ut,He,vt)}}class Ue extends class we{attach(Ut,He){return this._attachedPortal=Ut,this.attachComponentPortal(Ut,He)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Ut){this._disposeFn=Ut}}{constructor(Ut,He,vt){super(),this._hostDomElement=Ut,this._componentFactoryResolver=He,this._appRef=vt}attachComponentPortal(Ut,He){const vt=this._componentFactoryResolver.resolveComponentFactory(Ut.component);let un;return un=vt.create(Ut.injector),this._appRef.attachView(un.hostView),this.setDisposeFn(()=>{this._appRef.detachView(un.hostView),un.destroy()}),He?this._hostDomElement.insertBefore(this._getComponentRootNode(un),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(un)),un}_getComponentRootNode(Ut){return Ut.hostView.rootNodes[0]}}class st{constructor(Ut){this._portalHost=Ut}attach(Ut,He=!0){return this._portalHost.attach(Ut,He)}detach(){return this._portalHost.detach()}}let Et=(()=>{class xt{constructor(He){this._document=He}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const He=this._document.createElement("div");He.classList.add("overlay-container"),He.setAttribute("aria-live","polite"),this._document.body.appendChild(He),this._containerElement=He}}return xt.\u0275fac=function(He){return new(He||xt)(g.LFG(ge.K0))},xt.\u0275prov=g.Yz7({token:xt,factory:xt.\u0275fac,providedIn:"root"}),xt})(),yt=(()=>{class xt{constructor(He,vt,un,Hn){this._overlayContainer=He,this._componentFactoryResolver=vt,this._appRef=un,this._document=Hn,this._paneElements=new Map}create(He,vt){return this._createOverlayRef(this.getPaneElement(He,vt))}getPaneElement(He="",vt){return this._paneElements.get(vt)||this._paneElements.set(vt,{}),this._paneElements.get(vt)[He]||(this._paneElements.get(vt)[He]=this._createPaneElement(He,vt)),this._paneElements.get(vt)[He]}_createPaneElement(He,vt){const un=this._document.createElement("div");return un.id="toast-container",un.classList.add(He),un.classList.add("toast-container"),vt?vt.getContainerElement().appendChild(un):this._overlayContainer.getContainerElement().appendChild(un),un}_createPortalHost(He){return new Ue(He,this._componentFactoryResolver,this._appRef)}_createOverlayRef(He){return new st(this._createPortalHost(He))}}return xt.\u0275fac=function(He){return new(He||xt)(g.LFG(Et),g.LFG(g._Vd),g.LFG(g.z2F),g.LFG(ge.K0))},xt.\u0275prov=g.Yz7({token:xt,factory:xt.\u0275fac,providedIn:"root"}),xt})(),Qt=(()=>{class xt{constructor(He,vt,un,Hn,Wi){this.overlay=vt,this._injector=un,this.sanitizer=Hn,this.ngZone=Wi,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...He.default,...He.config},He.config.iconClasses&&(this.toastrConfig.iconClasses={...He.default.iconClasses,...He.config.iconClasses})}show(He,vt,un={},Hn=""){return this._preBuildNotification(Hn,He,vt,this.applyConfig(un))}success(He,vt,un={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",He,vt,this.applyConfig(un))}error(He,vt,un={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",He,vt,this.applyConfig(un))}info(He,vt,un={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",He,vt,this.applyConfig(un))}warning(He,vt,un={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",He,vt,this.applyConfig(un))}clear(He){for(const vt of this.toasts)if(void 0!==He){if(vt.toastId===He)return void vt.toastRef.manualClose()}else vt.toastRef.manualClose()}remove(He){const vt=this._findToast(He);if(!vt||(vt.activeToast.toastRef.close(),this.toasts.splice(vt.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const un=this.toasts[this.currentlyActive].toastRef;un.isInactive()||(this.currentlyActive=this.currentlyActive+1,un.activate())}return!0}findDuplicate(He="",vt="",un,Hn){const{includeTitleDuplicates:Wi}=this.toastrConfig;for(const Ci of this.toasts){const Ei=Wi&&Ci.title===He;if((!Wi||Ei)&&Ci.message===vt)return Ci.toastRef.onDuplicate(un,Hn),Ci}return null}applyConfig(He={}){return{...this.toastrConfig,...He}}_findToast(He){for(let vt=0;vt<this.toasts.length;vt++)if(this.toasts[vt].toastId===He)return{index:vt,activeToast:this.toasts[vt]};return null}_preBuildNotification(He,vt,un,Hn){return Hn.onActivateTick?this.ngZone.run(()=>this._buildNotification(He,vt,un,Hn)):this._buildNotification(He,vt,un,Hn)}_buildNotification(He,vt,un,Hn){if(!Hn.toastComponent)throw new Error("toastComponent required");const Wi=this.findDuplicate(un,vt,this.toastrConfig.resetTimeoutOnDuplicate&&Hn.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&un||vt)&&this.toastrConfig.preventDuplicates&&null!==Wi)return Wi;this.previousToastMessage=vt;let Ci=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Ci=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Ei=this.overlay.create(Hn.positionClass,this.overlayContainer);this.index=this.index+1;let Zi=vt;vt&&Hn.enableHtml&&(Zi=this.sanitizer.sanitize(g.q3G.HTML,vt));const oi=new ee(Ei),Ki=new nt(this.index,Hn,Zi,un,He,oi),Ui=new pt(Ki,this._injector),yi=new Be(Hn.toastComponent,Ui),Jt=Ei.attach(yi,this.toastrConfig.newestOnTop);oi.componentInstance=Jt.instance;const Ni={toastId:this.index,title:un||"",message:vt||"",toastRef:oi,onShown:oi.afterActivate(),onHidden:oi.afterClosed(),onTap:Ki.onTap(),onAction:Ki.onAction(),portal:Jt};return Ci||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Ni.toastRef.activate()})),this.toasts.push(Ni),Ni}}return xt.\u0275fac=function(He){return new(He||xt)(g.LFG(xe),g.LFG(yt),g.LFG(g.zs3),g.LFG(Ke.H7),g.LFG(g.R0b))},xt.\u0275prov=g.Yz7({token:xt,factory:xt.\u0275fac,providedIn:"root"}),xt})();const gn={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class xt{constructor(He,vt,un){this.toastrService=He,this.toastPackage=vt,this.ngZone=un,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=vt.message,this.title=vt.title,this.options=vt.config,this.originalTimeout=vt.config.timeOut,this.toastClasses=`${vt.toastType} ${vt.config.toastClass}`,this.sub=vt.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=vt.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=vt.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=vt.toastRef.countDuplicate().subscribe(Hn=>{this.duplicatesCount=Hn})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const He=(new Date).getTime();this.width=(this.hideTime-He)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(He,vt){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(He),vt)):this.timeout=setTimeout(()=>He(),vt)}outsideInterval(He,vt){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(He),vt)):this.intervalId=setInterval(()=>He(),vt)}runInsideAngular(He){this.ngZone?this.ngZone.run(()=>He()):He()}}return xt.\u0275fac=function(He){return new(He||xt)(g.Y36(Qt),g.Y36(nt),g.Y36(g.R0b))},xt.\u0275cmp=g.Xpm({type:xt,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(He,vt){1&He&&g.NdJ("click",function(){return vt.tapToast()})("mouseenter",function(){return vt.stickAround()})("mouseleave",function(){return vt.delayedHideToast()}),2&He&&(g.d8E("@flyInOut",vt.state),g.Tol(vt.toastClasses),g.Udp("display",vt.displayStyle))},attrs:Ee,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(He,vt){1&He&&(g.YNc(0,Oe,3,0,"button",0),g.YNc(1,rt,3,5,"div",1),g.YNc(2,Re,1,3,"div",2),g.YNc(3,Se,2,4,"div",3),g.YNc(4,Ge,2,2,"div",4)),2&He&&(g.Q6J("ngIf",vt.options.closeButton),g.xp6(1),g.Q6J("ngIf",vt.title),g.xp6(1),g.Q6J("ngIf",vt.message&&vt.options.enableHtml),g.xp6(1),g.Q6J("ngIf",vt.message&&!vt.options.enableHtml),g.xp6(1),g.Q6J("ngIf",vt.options.progressBar))},dependencies:[ge.O5],encapsulation:2,data:{animation:[(0,i.X$)("flyInOut",[(0,i.SB)("inactive",(0,i.oB)({opacity:0})),(0,i.SB)("active",(0,i.oB)({opacity:1})),(0,i.SB)("removed",(0,i.oB)({opacity:0})),(0,i.eR)("inactive => active",(0,i.jt)("{{ easeTime }}ms {{ easing }}")),(0,i.eR)("active => removed",(0,i.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),xt})()};let kn=(()=>{class xt{static forRoot(He={}){return{ngModule:xt,providers:[{provide:xe,useValue:{default:gn,config:He}}]}}}return xt.\u0275fac=function(He){return new(He||xt)},xt.\u0275mod=g.oAB({type:xt}),xt.\u0275inj=g.cJS({imports:[ge.ez]}),xt})()},805:(Sn,Ct,Q)=>{Q.d(Ct,{$_:()=>bt,F0:()=>dt,b4:()=>Oe,h4:()=>Dt,iZ:()=>Se,jx:()=>ot,m8:()=>qt,ws:()=>Me});var g=Q(4650),i=Q(7579),se=Q(982),ge=Q(6895);const Ke=["*"];let Ee=(()=>{class we{}return we.STARTS_WITH="startsWith",we.CONTAINS="contains",we.NOT_CONTAINS="notContains",we.ENDS_WITH="endsWith",we.EQUALS="equals",we.NOT_EQUALS="notEquals",we.IN="in",we.LESS_THAN="lt",we.LESS_THAN_OR_EQUAL_TO="lte",we.GREATER_THAN="gt",we.GREATER_THAN_OR_EQUAL_TO="gte",we.BETWEEN="between",we.IS="is",we.IS_NOT="isNot",we.BEFORE="before",we.AFTER="after",we.DATE_IS="dateIs",we.DATE_IS_NOT="dateIsNot",we.DATE_BEFORE="dateBefore",we.DATE_AFTER="dateAfter",we})(),Oe=(()=>{class we{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[Ee.STARTS_WITH,Ee.CONTAINS,Ee.NOT_CONTAINS,Ee.ENDS_WITH,Ee.EQUALS,Ee.NOT_EQUALS],numeric:[Ee.EQUALS,Ee.NOT_EQUALS,Ee.LESS_THAN,Ee.LESS_THAN_OR_EQUAL_TO,Ee.GREATER_THAN,Ee.GREATER_THAN_OR_EQUAL_TO],date:[Ee.DATE_IS,Ee.DATE_IS_NOT,Ee.DATE_BEFORE,Ee.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new i.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(Xe){return this.translation[Xe]}setTranslation(Xe){this.translation={...this.translation,...Xe},this.translationSource.next(this.translation)}}return we.\u0275fac=function(Xe){return new(Xe||we)},we.\u0275prov=g.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),Me=(()=>{class we{}return we.STARTS_WITH="startsWith",we.CONTAINS="contains",we.NOT_CONTAINS="notContains",we.ENDS_WITH="endsWith",we.EQUALS="equals",we.NOT_EQUALS="notEquals",we.NO_FILTER="noFilter",we.LT="lt",we.LTE="lte",we.GT="gt",we.GTE="gte",we.IS="is",we.IS_NOT="isNot",we.BEFORE="before",we.AFTER="after",we.CLEAR="clear",we.APPLY="apply",we.MATCH_ALL="matchAll",we.MATCH_ANY="matchAny",we.ADD_RULE="addRule",we.REMOVE_RULE="removeRule",we.ACCEPT="accept",we.REJECT="reject",we.CHOOSE="choose",we.UPLOAD="upload",we.CANCEL="cancel",we.DAY_NAMES="dayNames",we.DAY_NAMES_SHORT="dayNamesShort",we.DAY_NAMES_MIN="dayNamesMin",we.MONTH_NAMES="monthNames",we.MONTH_NAMES_SHORT="monthNamesShort",we.FIRST_DAY_OF_WEEK="firstDayOfWeek",we.TODAY="today",we.WEEK_HEADER="weekHeader",we.WEAK="weak",we.MEDIUM="medium",we.STRONG="strong",we.PASSWORD_PROMPT="passwordPrompt",we.EMPTY_MESSAGE="emptyMessage",we.EMPTY_FILTER_MESSAGE="emptyFilterMessage",we})(),Se=(()=>{class we{constructor(){this.filters={startsWith:(Xe,xe,ee)=>{if(null==xe||""===xe.trim())return!0;if(null==Xe)return!1;let pt=se.gb.removeAccents(xe.toString()).toLocaleLowerCase(ee);return se.gb.removeAccents(Xe.toString()).toLocaleLowerCase(ee).slice(0,pt.length)===pt},contains:(Xe,xe,ee)=>{if(null==xe||"string"==typeof xe&&""===xe.trim())return!0;if(null==Xe)return!1;let pt=se.gb.removeAccents(xe.toString()).toLocaleLowerCase(ee);return-1!==se.gb.removeAccents(Xe.toString()).toLocaleLowerCase(ee).indexOf(pt)},notContains:(Xe,xe,ee)=>{if(null==xe||"string"==typeof xe&&""===xe.trim())return!0;if(null==Xe)return!1;let pt=se.gb.removeAccents(xe.toString()).toLocaleLowerCase(ee);return-1===se.gb.removeAccents(Xe.toString()).toLocaleLowerCase(ee).indexOf(pt)},endsWith:(Xe,xe,ee)=>{if(null==xe||""===xe.trim())return!0;if(null==Xe)return!1;let pt=se.gb.removeAccents(xe.toString()).toLocaleLowerCase(ee),Ue=se.gb.removeAccents(Xe.toString()).toLocaleLowerCase(ee);return-1!==Ue.indexOf(pt,Ue.length-pt.length)},equals:(Xe,xe,ee)=>null==xe||"string"==typeof xe&&""===xe.trim()||null!=Xe&&(Xe.getTime&&xe.getTime?Xe.getTime()===xe.getTime():se.gb.removeAccents(Xe.toString()).toLocaleLowerCase(ee)==se.gb.removeAccents(xe.toString()).toLocaleLowerCase(ee)),notEquals:(Xe,xe,ee)=>!(null==xe||"string"==typeof xe&&""===xe.trim()||null!=Xe&&(Xe.getTime&&xe.getTime?Xe.getTime()===xe.getTime():se.gb.removeAccents(Xe.toString()).toLocaleLowerCase(ee)==se.gb.removeAccents(xe.toString()).toLocaleLowerCase(ee))),in:(Xe,xe)=>{if(null==xe||0===xe.length)return!0;for(let ee=0;ee<xe.length;ee++)if(se.gb.equals(Xe,xe[ee]))return!0;return!1},between:(Xe,xe)=>null==xe||null==xe[0]||null==xe[1]||null!=Xe&&(Xe.getTime?xe[0].getTime()<=Xe.getTime()&&Xe.getTime()<=xe[1].getTime():xe[0]<=Xe&&Xe<=xe[1]),lt:(Xe,xe,ee)=>null==xe||null!=Xe&&(Xe.getTime&&xe.getTime?Xe.getTime()<xe.getTime():Xe<xe),lte:(Xe,xe,ee)=>null==xe||null!=Xe&&(Xe.getTime&&xe.getTime?Xe.getTime()<=xe.getTime():Xe<=xe),gt:(Xe,xe,ee)=>null==xe||null!=Xe&&(Xe.getTime&&xe.getTime?Xe.getTime()>xe.getTime():Xe>xe),gte:(Xe,xe,ee)=>null==xe||null!=Xe&&(Xe.getTime&&xe.getTime?Xe.getTime()>=xe.getTime():Xe>=xe),is:(Xe,xe,ee)=>this.filters.equals(Xe,xe,ee),isNot:(Xe,xe,ee)=>this.filters.notEquals(Xe,xe,ee),before:(Xe,xe,ee)=>this.filters.lt(Xe,xe,ee),after:(Xe,xe,ee)=>this.filters.gt(Xe,xe,ee),dateIs:(Xe,xe)=>null==xe||null!=Xe&&Xe.toDateString()===xe.toDateString(),dateIsNot:(Xe,xe)=>null==xe||null!=Xe&&Xe.toDateString()!==xe.toDateString(),dateBefore:(Xe,xe)=>null==xe||null!=Xe&&Xe.getTime()<xe.getTime(),dateAfter:(Xe,xe)=>null==xe||null!=Xe&&Xe.getTime()>xe.getTime()}}filter(Xe,xe,ee,pt,Ue){let st=[];if(Xe)for(let Et of Xe)for(let yt of xe){let Qt=se.gb.resolveFieldData(Et,yt);if(this.filters[pt](Qt,ee,Ue)){st.push(Et);break}}return st}register(Xe,xe){this.filters[Xe]=xe}}return we.\u0275fac=function(Xe){return new(Xe||we)},we.\u0275prov=g.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),dt=(()=>{class we{constructor(){this.clickSource=new i.x,this.clickObservable=this.clickSource.asObservable()}add(Xe){Xe&&this.clickSource.next(Xe)}}return we.\u0275fac=function(Xe){return new(Xe||we)},we.\u0275prov=g.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),Dt=(()=>{class we{}return we.\u0275fac=function(Xe){return new(Xe||we)},we.\u0275cmp=g.Xpm({type:we,selectors:[["p-header"]],ngContentSelectors:Ke,decls:1,vars:0,template:function(Xe,xe){1&Xe&&(g.F$t(),g.Hsn(0))},encapsulation:2}),we})(),bt=(()=>{class we{}return we.\u0275fac=function(Xe){return new(Xe||we)},we.\u0275cmp=g.Xpm({type:we,selectors:[["p-footer"]],ngContentSelectors:Ke,decls:1,vars:0,template:function(Xe,xe){1&Xe&&(g.F$t(),g.Hsn(0))},encapsulation:2}),we})(),ot=(()=>{class we{constructor(Xe){this.template=Xe}getType(){return this.name}}return we.\u0275fac=function(Xe){return new(Xe||we)(g.Y36(g.Rgc))},we.\u0275dir=g.lG2({type:we,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),we})(),qt=(()=>{class we{}return we.\u0275fac=function(Xe){return new(Xe||we)},we.\u0275mod=g.oAB({type:we}),we.\u0275inj=g.cJS({imports:[ge.ez]}),we})()},1740:(Sn,Ct,Q)=>{Q.d(Ct,{j:()=>Ke,o:()=>ge});var g=Q(4650),i=Q(6895),se=Q(4006);let ge=(()=>{class Ee{constructor(Me,rt,Re){this.el=Me,this.ngModel=rt,this.cd=Re}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(Me){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return Ee.\u0275fac=function(Me){return new(Me||Ee)(g.Y36(g.SBq),g.Y36(se.On,8),g.Y36(g.sBO))},Ee.\u0275dir=g.lG2({type:Ee,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(Me,rt){1&Me&&g.NdJ("input",function(Se){return rt.onInput(Se)}),2&Me&&g.ekj("p-filled",rt.filled)}}),Ee})(),Ke=(()=>{class Ee{}return Ee.\u0275fac=function(Me){return new(Me||Ee)},Ee.\u0275mod=g.oAB({type:Ee}),Ee.\u0275inj=g.cJS({imports:[i.ez]}),Ee})()},982:(Sn,Ct,Q)=>{Q.d(Ct,{P9:()=>Ke,Th:()=>se,gb:()=>g});class g{static equals(Oe,Me,rt){return rt?this.resolveFieldData(Oe,rt)===this.resolveFieldData(Me,rt):this.equalsByValue(Oe,Me)}static equalsByValue(Oe,Me){if(Oe===Me)return!0;if(Oe&&Me&&"object"==typeof Oe&&"object"==typeof Me){var Se,Ge,kt,rt=Array.isArray(Oe),Re=Array.isArray(Me);if(rt&&Re){if((Ge=Oe.length)!=Me.length)return!1;for(Se=Ge;0!=Se--;)if(!this.equalsByValue(Oe[Se],Me[Se]))return!1;return!0}if(rt!=Re)return!1;var dt=Oe instanceof Date,wt=Me instanceof Date;if(dt!=wt)return!1;if(dt&&wt)return Oe.getTime()==Me.getTime();var Wt=Oe instanceof RegExp,Dt=Me instanceof RegExp;if(Wt!=Dt)return!1;if(Wt&&Dt)return Oe.toString()==Me.toString();var bt=Object.keys(Oe);if((Ge=bt.length)!==Object.keys(Me).length)return!1;for(Se=Ge;0!=Se--;)if(!Object.prototype.hasOwnProperty.call(Me,bt[Se]))return!1;for(Se=Ge;0!=Se--;)if(!this.equalsByValue(Oe[kt=bt[Se]],Me[kt]))return!1;return!0}return Oe!=Oe&&Me!=Me}static resolveFieldData(Oe,Me){if(Oe&&Me){if(this.isFunction(Me))return Me(Oe);if(-1==Me.indexOf("."))return Oe[Me];{let rt=Me.split("."),Re=Oe;for(let Se=0,Ge=rt.length;Se<Ge;++Se){if(null==Re)return null;Re=Re[rt[Se]]}return Re}}return null}static isFunction(Oe){return!!(Oe&&Oe.constructor&&Oe.call&&Oe.apply)}static reorderArray(Oe,Me,rt){Oe&&Me!==rt&&(rt>=Oe.length&&(rt%=Oe.length,Me%=Oe.length),Oe.splice(rt,0,Oe.splice(Me,1)[0]))}static insertIntoOrderedArray(Oe,Me,rt,Re){if(rt.length>0){let Se=!1;for(let Ge=0;Ge<rt.length;Ge++)if(this.findIndexInList(rt[Ge],Re)>Me){rt.splice(Ge,0,Oe),Se=!0;break}Se||rt.push(Oe)}else rt.push(Oe)}static findIndexInList(Oe,Me){let rt=-1;if(Me)for(let Re=0;Re<Me.length;Re++)if(Me[Re]==Oe){rt=Re;break}return rt}static contains(Oe,Me){if(null!=Oe&&Me&&Me.length)for(let rt of Me)if(this.equals(Oe,rt))return!0;return!1}static removeAccents(Oe){return Oe&&Oe.search(/[\xC0-\xFF]/g)>-1&&(Oe=Oe.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),Oe}static isEmpty(Oe){return null==Oe||""===Oe||Array.isArray(Oe)&&0===Oe.length||!(Oe instanceof Date)&&"object"==typeof Oe&&0===Object.keys(Oe).length}static isNotEmpty(Oe){return!this.isEmpty(Oe)}}var i=0;function se(){return"pr_id_"+ ++i}var Ke=function ge(){let Ee=[];const Re=Se=>Se&&parseInt(Se.style.zIndex,10)||0;return{get:Re,set:(Se,Ge,kt)=>{Ge&&(Ge.style.zIndex=String(((Se,Ge)=>{let kt=Ee.length>0?Ee[Ee.length-1]:{key:Se,value:Ge},dt=kt.value+(kt.key===Se?0:Ge)+1;return Ee.push({key:Se,value:dt}),dt})(Se,kt)))},clear:Se=>{Se&&((Se=>{Ee=Ee.filter(Ge=>Ge.value!==Se)})(Re(Se)),Se.style.zIndex="")},getCurrent:()=>Ee.length>0?Ee[Ee.length-1].value:0}}()},5861:(Sn,Ct,Q)=>{function g(se,ge,Ke,Ee,Oe,Me,rt){try{var Re=se[Me](rt),Se=Re.value}catch(Ge){return void Ke(Ge)}Re.done?ge(Se):Promise.resolve(Se).then(Ee,Oe)}function i(se){return function(){var ge=this,Ke=arguments;return new Promise(function(Ee,Oe){var Me=se.apply(ge,Ke);function rt(Se){g(Me,Ee,Oe,rt,Re,"next",Se)}function Re(Se){g(Me,Ee,Oe,rt,Re,"throw",Se)}rt(void 0)})}}Q.d(Ct,{Z:()=>i})}},Sn=>{Sn(Sn.s=6427)}]);