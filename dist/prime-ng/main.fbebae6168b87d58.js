"use strict";(self.webpackChunkPrimeNG=self.webpackChunkPrimeNG||[]).push([[179],{440:(In,Et,K)=>{K.d(Et,{nm:()=>Ws});var m=K(5813);K(4650),K(5867);var Be=K(5861),ve=K(9681),nt=K(4859),Qe=K(2090),De=K(1877);const Q=new Map,ft={activated:!1,tokenObservers:[]},Ve={initialized:!1,enabled:!1};function it(pt){return Q.get(pt)||ft}function bt(pt,ut){Q.set(pt,ut)}function yt(){return Ve}class ci{constructor(ut,It,Ot,Zt,en){if(this.operation=ut,this.retryPolicy=It,this.getWaitDuration=Ot,this.lowerBound=Zt,this.upperBound=en,this.pending=null,this.nextErrorWaitInterval=Zt,Zt>en)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ut){var It=this;return(0,Be.Z)(function*(){It.stop();try{It.pending=new Qe.BH,yield function Bn(pt){return new Promise(ut=>{setTimeout(ut,pt)})}(It.getNextRun(ut)),It.pending.resolve(),yield It.pending.promise,It.pending=new Qe.BH,yield It.operation(),It.pending.resolve(),yield It.pending.promise,It.process(!0).catch(()=>{})}catch(Ot){It.retryPolicy(Ot)?It.process(!1).catch(()=>{}):It.stop()}})()}getNextRun(ut){if(ut)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const It=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),It}}}const Vt=new Qe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _t(pt){if(!it(pt).activated)throw Vt.create("use-before-activation",{appName:pt.name})}function Gi(pt,ut){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,Be.Z)(function*({url:pt,body:ut},It){var Ot,Zt;const en={"Content-Type":"application/json"},si=It.getImmediate({optional:!0});if(si){const gi=yield si.getHeartbeatsHeader();gi&&(en["X-Firebase-Client"]=gi)}const ui={method:"POST",body:JSON.stringify(ut),headers:en};let ar,ro;try{ar=yield fetch(pt,ui)}catch(gi){throw Vt.create("fetch-network-error",{originalErrorMessage:null===(Ot=gi)||void 0===Ot?void 0:Ot.message})}if(200!==ar.status)throw Vt.create("fetch-status-error",{httpStatus:ar.status});try{ro=yield ar.json()}catch(gi){throw Vt.create("fetch-parse-error",{originalErrorMessage:null===(Zt=gi)||void 0===Zt?void 0:Zt.message})}const Fs=ro.ttl.match(/^([\d.]+)(s)$/);if(!Fs||!Fs[2]||isNaN(Number(Fs[1])))throw Vt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ro.ttl}`});const as=1e3*Number(Fs[1]),vr=Date.now();return{token:ro.token,expireTimeMillis:vr+as,issuedAtTimeMillis:vr}})).apply(this,arguments)}function ai(pt,ut){const{projectId:It,appId:Ot,apiKey:Zt}=pt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${It}/apps/${Ot}:exchangeDebugToken?key=${Zt}`,body:{debug_token:ut}}}const vi="firebase-app-check-store";let Ni=null;function Vi(){return Ni||(Ni=new Promise((pt,ut)=>{var It;try{const Ot=indexedDB.open("firebase-app-check-database",1);Ot.onsuccess=Zt=>{pt(Zt.target.result)},Ot.onerror=Zt=>{var en;ut(Vt.create("storage-open",{originalErrorMessage:null===(en=Zt.target.error)||void 0===en?void 0:en.message}))},Ot.onupgradeneeded=Zt=>{0===Zt.oldVersion&&Zt.target.result.createObjectStore(vi,{keyPath:"compositeKey"})}}catch(Ot){ut(Vt.create("storage-open",{originalErrorMessage:null===(It=Ot)||void 0===It?void 0:It.message}))}}),Ni)}function Qi(){return(Qi=(0,Be.Z)(function*(pt,ut){const Ot=(yield Vi()).transaction(vi,"readwrite"),en=Ot.objectStore(vi).put({compositeKey:pt,value:ut});return new Promise((si,ui)=>{en.onsuccess=ar=>{si()},Ot.onerror=ar=>{var ro;ui(Vt.create("storage-set",{originalErrorMessage:null===(ro=ar.target.error)||void 0===ro?void 0:ro.message}))}})})).apply(this,arguments)}const Dr=new De.Yd("@firebase/app-check");function ii(pt,ut){return(0,Qe.hl)()?function Kr(pt,ut){return function _r(pt,ut){return Qi.apply(this,arguments)}(function fi(pt){return`${pt.options.appId}-${pt.name}`}(pt),ut)}(pt,ut).catch(It=>{Dr.warn(`Failed to write token to IndexedDB. Error: ${It}`)}):Promise.resolve()}function gs(){return yt().enabled}function qn(){return ot.apply(this,arguments)}function ot(){return(ot=(0,Be.Z)(function*(){const pt=yt();if(pt.enabled&&pt.token)return pt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const je={error:"UNKNOWN_ERROR"};function et(pt){return Qe.US.encodeString(JSON.stringify(pt),!1)}function qe(pt){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,Be.Z)(function*(pt,ut=!1){const It=pt.app;_t(It);const Ot=it(It);let en,Zt=Ot.token;if(!Zt){const ar=yield Ot.cachedTokenPromise;ar&&mt(ar)&&(Zt=ar)}if(!ut&&Zt&&mt(Zt))return{token:Zt.token};let ui,si=!1;if(gs()){Ot.exchangeTokenPromise||(Ot.exchangeTokenPromise=Gi(ai(It,yield qn()),pt.heartbeatServiceProvider).then(ro=>(Ot.exchangeTokenPromise=void 0,ro)),si=!0);const ar=yield Ot.exchangeTokenPromise;return yield ii(It,ar),bt(It,Object.assign(Object.assign({},Ot),{token:ar})),{token:ar.token}}try{Ot.exchangeTokenPromise||(Ot.exchangeTokenPromise=Ot.provider.getToken().then(ar=>(Ot.exchangeTokenPromise=void 0,ar)),si=!0),Zt=yield Ot.exchangeTokenPromise}catch(ar){"appCheck/throttled"===ar.code?Dr.warn(ar.message):Dr.error(ar),en=ar}return Zt?(ui={token:Zt.token},bt(It,Object.assign(Object.assign({},Ot),{token:Zt})),yield ii(It,Zt)):ui=ze(en),si&&kr(It,ui),ui})).apply(this,arguments)}function xn(pt,ut){const It=it(pt),Ot=It.tokenObservers.filter(Zt=>Zt.next!==ut);0===Ot.length&&It.tokenRefresher&&It.tokenRefresher.isRunning()&&It.tokenRefresher.stop(),bt(pt,Object.assign(Object.assign({},It),{tokenObservers:Ot}))}function Bi(pt){const{app:ut}=pt,It=it(ut);let Ot=It.tokenRefresher;Ot||(Ot=function Ji(pt){const{app:ut}=pt;return new ci((0,Be.Z)(function*(){let Ot;if(Ot=it(ut).token?yield qe(pt,!0):yield qe(pt),Ot.error)throw Ot.error}),()=>!0,()=>{const It=it(ut);if(It.token){let Ot=It.token.issuedAtTimeMillis+.5*(It.token.expireTimeMillis-It.token.issuedAtTimeMillis)+3e5;return Ot=Math.min(Ot,It.token.expireTimeMillis-3e5),Math.max(0,Ot-Date.now())}return 0},3e4,96e4)}(pt),bt(ut,Object.assign(Object.assign({},It),{tokenRefresher:Ot}))),!Ot.isRunning()&&It.isTokenAutoRefreshEnabled&&Ot.start()}function kr(pt,ut){const It=it(pt).tokenObservers;for(const Ot of It)try{"EXTERNAL"===Ot.type&&null!=ut.error?Ot.error(ut.error):Ot.next(ut)}catch{}}function mt(pt){return pt.expireTimeMillis-Date.now()>0}function ze(pt){return{token:et(je),error:pt}}class Xe{constructor(ut,It){this.app=ut,this.heartbeatServiceProvider=It}_delete(){const{tokenObservers:ut}=it(this.app);for(const It of ut)xn(this.app,It.next);return Promise.resolve()}}const ks="app-check-internal";!function Es(){(0,ve._registerComponent)(new nt.wA("app-check",pt=>function jt(pt,ut){return new Xe(pt,ut)}(pt.getProvider("app").getImmediate(),pt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((pt,ut,It)=>{pt.getProvider(ks).initialize()})),(0,ve._registerComponent)(new nt.wA(ks,pt=>function gn(pt){return{getToken:ut=>qe(pt,ut),addTokenListener:ut=>function fn(pt,ut,It,Ot){const{app:Zt}=pt,en=it(Zt),si={next:It,error:Ot,type:ut};if(bt(Zt,Object.assign(Object.assign({},en),{tokenObservers:[...en.tokenObservers,si]})),en.token&&mt(en.token)){const ui=en.token;Promise.resolve().then(()=>{It({token:ui.token}),Bi(pt)}).catch(()=>{})}en.cachedTokenPromise.then(()=>Bi(pt))}(pt,"INTERNAL",ut),removeTokenListener:ut=>xn(pt.app,ut)}}(pt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ve.registerVersion)("@firebase/app-check","0.5.12")}();class Ws{constructor(){return(0,m.vb)("app-check")}}typeof window<"u"&&window},1205:(In,Et,K)=>{K.d(Et,{zQ:()=>Yt,ww:()=>on,rT:()=>Ve,f7:()=>bt,L6:()=>Q,_Q:()=>ft,lh:()=>it,Qv:()=>De,nw:()=>yt});var m=K(4650),a=K(7579),re=K(9646),Ee=K(9751),We=K(8996),Ae=K(6451),Re=K(5363),xe=K(3900),tt=K(4004),Me=K(6063);class Ie extends a.x{constructor(On=1/0,Nn=1/0,$t=Me.l){super(),this._bufferSize=On,this._windowTime=Nn,this._timestampProvider=$t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Nn===1/0,this._bufferSize=Math.max(1,On),this._windowTime=Math.max(1,Nn)}next(On){const{isStopped:Nn,_buffer:$t,_infiniteTimeWindow:ci,_timestampProvider:Bn,_windowTime:St}=this;Nn||($t.push(On),!ci&&$t.push(Bn.now()+St)),this._trimBuffer(),super.next(On)}_subscribe(On){this._throwIfClosed(),this._trimBuffer();const Nn=this._innerSubscribe(On),{_infiniteTimeWindow:$t,_buffer:ci}=this,Bn=ci.slice();for(let St=0;St<Bn.length&&!On.closed;St+=$t?1:2)On.next(Bn[St]);return this._checkFinalizedStatuses(On),Nn}_trimBuffer(){const{_bufferSize:On,_timestampProvider:Nn,_buffer:$t,_infiniteTimeWindow:ci}=this,Bn=(ci?1:2)*On;if(On<1/0&&Bn<$t.length&&$t.splice(0,$t.length-Bn),!ci){const St=Nn.now();let Vt=0;for(let Ue=1;Ue<$t.length&&$t[Ue]<=St;Ue+=2)Vt=Ue;Vt&&$t.splice(0,Vt+1)}}}var Ge=K(3099);function Mt(pn,On,Nn){let $t,ci=!1;return pn&&"object"==typeof pn?({bufferSize:$t=1/0,windowTime:On=1/0,refCount:ci=!1,scheduler:Nn}=pn):$t=pn??1/0,(0,Ge.B)({connector:()=>new Ie($t,On,Nn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ci})}var ct=K(590),wt=K(576);function Wt(pn,On){return(0,wt.m)(On)?(0,xe.w)(()=>pn,On):(0,xe.w)(()=>pn)}var Dt=K(9468),vt=K(9300),rt=K(5813),qt=K(2011),Be=K(6895),ve=K(440),nt=K(127);const De=new m.OlP("angularfire2.auth.use-emulator"),Q=new m.OlP("angularfire2.auth.settings"),ft=new m.OlP("angularfire2.auth.tenant-id"),Ve=new m.OlP("angularfire2.auth.langugage-code"),it=new m.OlP("angularfire2.auth.use-device-language"),bt=new m.OlP("angularfire.auth.persistence"),yt=(pn,On,Nn,$t,ci,Bn,St,Vt)=>(0,qt.cc)(`${pn.name}.auth`,"AngularFireAuth",pn.name,()=>{const Ue=On.runOutsideAngular(()=>pn.auth());if(Nn&&Ue.useEmulator(...Nn),$t&&(Ue.tenantId=$t),Ue.languageCode=ci,Bn&&Ue.useDeviceLanguage(),St)for(const[_t,ln]of Object.entries(St))Ue.settings[_t]=ln;return Vt&&Ue.setPersistence(Vt),Ue},[Nn,$t,ci,Bn,St,Vt]);let Yt=(()=>{class pn{constructor(Nn,$t,ci,Bn,St,Vt,Ue,_t,ln,Hn,Gi,Ei){const bi=new a.x,zi=(0,re.of)(void 0).pipe((0,Re.Q)(St.outsideAngular),(0,xe.w)(()=>Bn.runOutsideAngular(()=>Promise.resolve().then(K.bind(K,5881)))),(0,tt.U)(()=>(0,qt.on)(Nn,Bn,$t)),(0,tt.U)(ai=>yt(ai,Bn,Vt,_t,ln,Hn,Ue,Gi)),Mt({bufferSize:1,refCount:!1}));if((0,Be.PM)(ci))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,re.of)(null);else{zi.pipe((0,ct.P)()).subscribe();const Hi=zi.pipe((0,xe.w)(Qt=>Qt.getRedirectResult().then(Ni=>Ni,()=>null)),rt.iC,Mt({bufferSize:1,refCount:!1})),Li=zi.pipe((0,xe.w)(Qt=>new Ee.y(Ni=>({unsubscribe:Bn.runOutsideAngular(()=>Qt.onAuthStateChanged(Vi=>Ni.next(Vi),Vi=>Ni.error(Vi),()=>Ni.complete()))})))),vi=zi.pipe((0,xe.w)(Qt=>new Ee.y(Ni=>({unsubscribe:Bn.runOutsideAngular(()=>Qt.onIdTokenChanged(Vi=>Ni.next(Vi),Vi=>Ni.error(Vi),()=>Ni.complete()))}))));this.authState=Hi.pipe(Wt(Li),(0,Dt.R)(St.outsideAngular),(0,Re.Q)(St.insideAngular)),this.user=Hi.pipe(Wt(vi),(0,Dt.R)(St.outsideAngular),(0,Re.Q)(St.insideAngular)),this.idToken=this.user.pipe((0,xe.w)(Qt=>Qt?(0,We.D)(Qt.getIdToken()):(0,re.of)(null))),this.idTokenResult=this.user.pipe((0,xe.w)(Qt=>Qt?(0,We.D)(Qt.getIdTokenResult()):(0,re.of)(null))),this.credential=(0,Ae.T)(Hi,bi,this.authState.pipe((0,vt.h)(Qt=>!Qt))).pipe((0,tt.U)(Qt=>Qt?.user?Qt:null),(0,Dt.R)(St.outsideAngular),(0,Re.Q)(St.insideAngular))}return(0,qt.pX)(this,zi,Bn,{spy:{apply:(ai,Hi,Li)=>{(ai.startsWith("signIn")||ai.startsWith("createUser"))&&Li.then(vi=>bi.next(vi))}}})}}return pn.\u0275fac=function(Nn){return new(Nn||pn)(m.LFG(qt.Dh),m.LFG(qt.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(rt.HU),m.LFG(De,8),m.LFG(Q,8),m.LFG(ft,8),m.LFG(Ve,8),m.LFG(it,8),m.LFG(bt,8),m.LFG(ve.nm,8))},pn.\u0275prov=m.Yz7({token:pn,factory:pn.\u0275fac,providedIn:"any"}),pn})(),on=(()=>{class pn{constructor(){nt.Z.registerVersion("angularfire",rt.q4.full,"auth-compat")}}return pn.\u0275fac=function(Nn){return new(Nn||pn)},pn.\u0275mod=m.oAB({type:pn}),pn.\u0275inj=m.cJS({providers:[Yt]}),pn})()},7471:(In,Et,K)=>{K.d(Et,{KQ:()=>If,JS:()=>Up});var m=K(4650),a=K(4986),re=K(9751),Ee=K(9646),We=K(6451),Ae=K(4004),Re=K(3099),xe=K(3900),tt=K(5026),Me=K(1884),Ie=K(4482),Ge=K(5403),Mt=K(8421),ct=K(4671),wt=K(5032),Wt=K(7669),rt=K(5813),qt=K(2011),ve=(K(5881),K(3942)),nt=K(4859),Qe=K(5861),De=K(9681),Q=K(2090),ft=K(1877);const Ve="@firebase/database";let bt="";function yt(h){bt=h}class Yt{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,Q.Pz)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,Q.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class on{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,Q.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const pn=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const u=window[h];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Yt(u)}}catch{}return new on},On=pn("localStorage"),Nn=pn("sessionStorage"),$t=new ft.Yd("@firebase/database"),ci=function(){let h=1;return function(){return h++}}(),Bn=function(h){const u=(0,Q.dS)(h),c=new Q.gQ;c.update(u);const y=c.digest();return Q.US.encodeByteArray(y)},St=function(...h){let u="";for(let c=0;c<h.length;c++){const y=h[c];Array.isArray(y)||y&&"object"==typeof y&&"number"==typeof y.length?u+=St.apply(null,y):u+="object"==typeof y?(0,Q.Pz)(y):y,u+=" "}return u};let Vt=null,Ue=!0;const _t=function(h,u){(0,Q.hu)(!u||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?($t.logLevel=ft.in.VERBOSE,Vt=$t.log.bind($t),u&&Nn.set("logging_enabled",!0)):"function"==typeof h?Vt=h:(Vt=null,Nn.remove("logging_enabled"))},ln=function(...h){if(!0===Ue&&(Ue=!1,null===Vt&&!0===Nn.get("logging_enabled")&&_t(!0)),Vt){const u=St.apply(null,h);Vt(u)}},Hn=function(h){return function(...u){ln(h,...u)}},Gi=function(...h){const u="FIREBASE INTERNAL ERROR: "+St(...h);$t.error(u)},Ei=function(...h){const u=`FIREBASE FATAL ERROR: ${St(...h)}`;throw $t.error(u),new Error(u)},bi=function(...h){const u="FIREBASE WARNING: "+St(...h);$t.warn(u)},ai=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Li="[MIN_NAME]",vi="[MAX_NAME]",Qt=function(h,u){if(h===u)return 0;if(h===Li||u===vi)return-1;if(u===Li||h===vi)return 1;{const c=An(h),y=An(u);return null!==c?null!==y?c-y==0?h.length-u.length:c-y:-1:null!==y?1:h<u?-1:1}},Ni=function(h,u){return h===u?0:h<u?-1:1},Vi=function(h,u){if(u&&h in u)return u[h];throw new Error("Missing required key ("+h+") in object: "+(0,Q.Pz)(u))},Yi=function(h){if("object"!=typeof h||null===h)return(0,Q.Pz)(h);const u=[];for(const y in h)u.push(y);u.sort();let c="{";for(let y=0;y<u.length;y++)0!==y&&(c+=","),c+=(0,Q.Pz)(u[y]),c+=":",c+=Yi(h[u[y]]);return c+="}",c},Kr=function(h,u){const c=h.length;if(c<=u)return[h];const y=[];for(let x=0;x<c;x+=u)y.push(h.substring(x,x+u>c?c:x+u));return y};function sr(h,u){for(const c in h)h.hasOwnProperty(c)&&u(c,h[c])}const Tr=function(h){(0,Q.hu)(!ai(h),"Invalid JSON number");const y=1023;let x,U,te,me,Oe;0===h?(U=0,te=0,x=1/h==-1/0?1:0):(x=h<0,(h=Math.abs(h))>=Math.pow(2,1-y)?(me=Math.min(Math.floor(Math.log(h)/Math.LN2),y),U=me+y,te=Math.round(h*Math.pow(2,52-me)-Math.pow(2,52))):(U=0,te=Math.round(h/Math.pow(2,-1074))));const Ye=[];for(Oe=52;Oe;Oe-=1)Ye.push(te%2?1:0),te=Math.floor(te/2);for(Oe=11;Oe;Oe-=1)Ye.push(U%2?1:0),U=Math.floor(U/2);Ye.push(x?1:0),Ye.reverse();const Gt=Ye.join("");let zt="";for(Oe=0;Oe<64;Oe+=8){let nn=parseInt(Gt.substr(Oe,8),2).toString(16);1===nn.length&&(nn="0"+nn),zt+=nn}return zt.toLowerCase()},$n=new RegExp("^-?(0*)\\d{1,10}$"),fi=-2147483648,Dr=2147483647,An=function(h){if($n.test(h)){const u=Number(h);if(u>=fi&&u<=Dr)return u}return null},Ui=function(h){try{h()}catch(u){setTimeout(()=>{throw bi("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},or=function(h,u){const c=setTimeout(h,u);return"object"==typeof c&&c.unref&&c.unref(),c};class li{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=c?.getImmediate({optional:!0}),this.appCheck||c?.get().then(y=>this.appCheck=y)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,y)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,y):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(y=>y.addTokenListener(u))}notifyForInvalidToken(){bi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class gs{constructor(u,c,y){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(x=>this.auth_=x)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(ln("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,y)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,y):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bi(u)}}let qn=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const Kt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ji="websocket",kr="long_polling";class mt{constructor(u,c,y,x,U=!1,te="",me=!1){this.secure=c,this.namespace=y,this.webSocketOnly=x,this.nodeAdmin=U,this.persistenceKey=te,this.includeNamespaceInQueryParams=me,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=On.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&On.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Xe(h,u,c){let y;if((0,Q.hu)("string"==typeof u,"typeof type must == string"),(0,Q.hu)("object"==typeof c,"typeof params must == object"),u===Ji)y=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(u!==kr)throw new Error("Unknown connection type: "+u);y=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function ze(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const x=[];return sr(c,(U,te)=>{x.push(U+"="+te)}),y+x.join("&")}class jt{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,Q.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,Q.p$)(this.counters_)}}const gn={},Gn={};function Zn(h){const u=h.toString();return gn[u]||(gn[u]=new jt),gn[u]}class Le{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const y=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let x=0;x<y.length;++x)y[x]&&Ui(()=>{this.onMessage_(y[x])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ki{constructor(u,c,y,x,U,te,me){this.connId=u,this.repoInfo=c,this.applicationId=y,this.appCheckToken=x,this.authToken=U,this.transportSessionId=te,this.lastSessionId=me,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hn(u),this.stats_=Zn(c),this.urlFn=Oe=>(this.appCheckToken&&(Oe.ac=this.appCheckToken),Xe(c,kr,Oe))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new Le(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,Q.Yr)()||"complete"===document.readyState)h();else{let u=!1;const c=function(){document.body?u||(u=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new po((...U)=>{const[te,me,Oe,Ye,Gt]=U;if(this.incrementIncomingBytes_(U),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===te)this.id=me,this.password=Oe;else{if("close"!==te)throw new Error("Unrecognized command received: "+te);me?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(me,()=>{this.onClosed_()})):this.onClosed_()}},(...U)=>{const[te,me]=U;this.incrementIncomingBytes_(U),this.myPacketOrderer.handleResponse(te,me)},()=>{this.onClosed_()},this.urlFn);const y={start:"t"};y.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(y.cb=this.scriptTagHolder.uniqueCallbackIdentifier),y.v="5",this.transportSessionId&&(y.s=this.transportSessionId),this.lastSessionId&&(y.ls=this.lastSessionId),this.applicationId&&(y.p=this.applicationId),this.appCheckToken&&(y.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Kt.test(location.hostname)&&(y.r="f");const x=this.urlFn(y);this.log_("Connecting via long-poll to "+x),this.scriptTagHolder.addTag(x,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ki.forceAllow_=!0}static forceDisallow(){ki.forceDisallow_=!0}static isAvailable(){return!((0,Q.Yr)()||!ki.forceAllow_&&(ki.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,Q.Pz)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const y=(0,Q.h$)(c),x=Kr(y,1840);for(let U=0;U<x.length;U++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,x.length,x[U]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,Q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const y={dframe:"t"};y.id=u,y.pw=c,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,Q.Pz)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class po{constructor(u,c,y,x){if(this.onDisconnect=y,this.urlFn=x,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Q.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=ci(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=po.createIFrame_();let U="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(U='<script>document.domain="'+document.domain+'";<\/script>');const te="<html><body>"+U+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(te),this.myIFrame.doc.close()}catch(me){ln("frame writing exception"),me.stack&&ln(me.stack),ln(me)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||ln("No IE domain setting required")}catch{const y=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),y="",x=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){const te=this.pendingSegs.shift();y=y+"&seg"+x+"="+te.seg+"&ts"+x+"="+te.ts+"&d"+x+"="+te.d,x++}return c+=y,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,y){this.pendingSegs.push({seg:u,ts:c,d:y}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const y=()=>{this.outstandingRequests.delete(c),this.newRequest_()},x=setTimeout(y,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(x),y()})}addTag(u,c){(0,Q.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const y=this.myIFrame.doc.createElement("script");y.type="text/javascript",y.async=!0,y.src=u,y.onload=y.onreadystatechange=function(){const x=y.readyState;(!x||"loaded"===x||"complete"===x)&&(y.onload=y.onreadystatechange=null,y.parentNode&&y.parentNode.removeChild(y),c())},y.onerror=()=>{ln("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(y)}catch{}},Math.floor(1))}}let ks=null;typeof MozWebSocket<"u"?ks=MozWebSocket:typeof WebSocket<"u"&&(ks=WebSocket);let Es=(()=>{class h{constructor(c,y,x,U,te,me,Oe){this.connId=c,this.applicationId=x,this.appCheckToken=U,this.authToken=te,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hn(this.connId),this.stats_=Zn(y),this.connURL=h.connectionURL_(y,me,Oe,U,x),this.nodeAdmin=y.nodeAdmin}static connectionURL_(c,y,x,U,te){const me={v:"5"};return!(0,Q.Yr)()&&typeof location<"u"&&location.hostname&&Kt.test(location.hostname)&&(me.r="f"),y&&(me.s=y),x&&(me.ls=x),U&&(me.ac=U),te&&(me.p=te),Xe(c,Ji,me)}open(c,y){this.onDisconnect=y,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,On.set("previous_websocket_failure",!0);try{let x;if((0,Q.Yr)()){x={headers:{"User-Agent":`Firebase/5/${bt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(x.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(x.headers["X-Firebase-AppCheck"]=this.appCheckToken);const te=process.env,me=0===this.connURL.indexOf("wss://")?te.HTTPS_PROXY||te.https_proxy:te.HTTP_PROXY||te.http_proxy;me&&(x.proxy={origin:me})}this.mySock=new ks(this.connURL,[],x)}catch(x){this.log_("Error instantiating WebSocket.");const U=x.message||x.data;return U&&this.log_(U),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=x=>{this.handleIncomingFrame(x)},this.mySock.onerror=x=>{this.log_("WebSocket error.  Closing connection.");const U=x.message||x.data;U&&this.log_(U),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if(typeof navigator<"u"&&navigator.userAgent){const x=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);x&&x.length>1&&parseFloat(x[1])<4.4&&(c=!0)}return!c&&null!==ks&&!h.forceDisallow_}static previouslyFailed(){return On.isInMemoryStorage||!0===On.get("previous_websocket_failure")}markConnectionHealthy(){On.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const y=this.frames.join("");this.frames=null;const x=(0,Q.cI)(y);this.onMessage(x)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,Q.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const y=Number(c);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const y=c.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{const x=this.extractFrameCount_(y);null!==x&&this.appendFrame_(x)}}send(c){this.resetKeepAlive();const y=(0,Q.Pz)(c);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);const x=Kr(y,16384);x.length>1&&this.sendString_(String(x.length));for(let U=0;U<x.length;U++)this.sendString_(x[U])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),zs=(()=>{class h{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[ki,Es]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const y=Es&&Es.isAvailable();let x=y&&!Es.previouslyFailed();if(c.webSocketOnly&&(y||bi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),x=!0),x)this.transports_=[Es];else{const U=this.transports_=[];for(const te of h.ALL_TRANSPORTS)te&&te.isAvailable()&&U.push(te);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class ia{constructor(u,c,y,x,U,te,me,Oe,Ye,Gt){this.id=u,this.repoInfo_=c,this.applicationId_=y,this.appCheckToken_=x,this.authToken_=U,this.onMessage_=te,this.onReady_=me,this.onDisconnect_=Oe,this.onKill_=Ye,this.lastSessionId=Gt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hn("c:"+this.id+":"),this.transportManager_=new zs(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),y=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,y)},Math.floor(0));const x=u.healthyTimeout||0;x>0&&(this.healthyTimeout_=or(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(x)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=Vi("t",u),y=Vi("d",u);if("c"===c)this.onSecondaryControl_(y);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(y)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=Vi("t",u),y=Vi("d",u);"c"===c?this.onControl_(y):"d"===c&&this.onDataMessage_(y)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=Vi("t",u);if("d"in u){const y=u.d;if("h"===c)this.onHandshake_(y);else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let x=0;x<this.pendingDataMessages.length;++x)this.onDataMessage_(this.pendingDataMessages[x]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(y):"r"===c?this.onReset_(y):"e"===c?Gi("Server Error: "+y):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gi("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,y=u.v,x=u.h;this.sessionId=u.s,this.repoInfo_.host=x,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==y&&bi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),y=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,y),or(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):or(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(On.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class io{put(u,c,y,x){}merge(u,c,y,x){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,y){}onDisconnectMerge(u,c,y){}onDisconnectCancel(u,c){}reportStats(u){}}class Ks{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,Q.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const y=[...this.listeners_[u]];for(let x=0;x<y.length;x++)y[x].callback.apply(y[x].context,c)}}on(u,c,y){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:y});const x=this.getInitialEvent(u);x&&c.apply(y,x)}off(u,c,y){this.validateEventType_(u);const x=this.listeners_[u]||[];for(let U=0;U<x.length;U++)if(x[U].callback===c&&(!y||y===x[U].context))return void x.splice(U,1)}validateEventType_(u){(0,Q.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class pt extends Ks{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pt}getInitialEvent(u){return(0,Q.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class Ot{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let y=0;for(let x=0;x<this.pieces_.length;x++)this.pieces_[x].length>0&&(this.pieces_[y]=this.pieces_[x],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function Zt(){return new Ot("")}function en(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function si(h){return h.pieces_.length-h.pieceNum_}function ui(h){let u=h.pieceNum_;return u<h.pieces_.length&&u++,new Ot(h.pieces_,u)}function ar(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function Fs(h,u=0){return h.pieces_.slice(h.pieceNum_+u)}function as(h){if(h.pieceNum_>=h.pieces_.length)return null;const u=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)u.push(h.pieces_[c]);return new Ot(u,0)}function vr(h,u){const c=[];for(let y=h.pieceNum_;y<h.pieces_.length;y++)c.push(h.pieces_[y]);if(u instanceof Ot)for(let y=u.pieceNum_;y<u.pieces_.length;y++)c.push(u.pieces_[y]);else{const y=u.split("/");for(let x=0;x<y.length;x++)y[x].length>0&&c.push(y[x])}return new Ot(c,0)}function gi(h){return h.pieceNum_>=h.pieces_.length}function Fr(h,u){const c=en(h),y=en(u);if(null===c)return u;if(c===y)return Fr(ui(h),ui(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+h+")")}function Eo(h,u){const c=Fs(h,0),y=Fs(u,0);for(let x=0;x<c.length&&x<y.length;x++){const U=Qt(c[x],y[x]);if(0!==U)return U}return c.length===y.length?0:c.length<y.length?-1:1}function bo(h,u){if(si(h)!==si(u))return!1;for(let c=h.pieceNum_,y=u.pieceNum_;c<=h.pieces_.length;c++,y++)if(h.pieces_[c]!==u.pieces_[y])return!1;return!0}function wr(h,u){let c=h.pieceNum_,y=u.pieceNum_;if(si(h)>si(u))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==u.pieces_[y])return!1;++c,++y}return!0}class qs{constructor(u,c){this.errorPrefix_=c,this.parts_=Fs(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let y=0;y<this.parts_.length;y++)this.byteLength_+=(0,Q.ug)(this.parts_[y]);No(this)}}function No(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Yr(h))}function Yr(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class Na extends Ks{constructor(){let u,c;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(c="visibilitychange",u="hidden"):typeof document.mozHidden<"u"?(c="mozvisibilitychange",u="mozHidden"):typeof document.msHidden<"u"?(c="msvisibilitychange",u="msHidden"):typeof document.webkitHidden<"u"&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const y=!document[u];y!==this.visible_&&(this.visible_=y,this.trigger("visible",y))},!1)}static getInstance(){return new Na}getInitialEvent(u){return(0,Q.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const oo=1e3;let Rr,ls=(()=>{class h extends io{constructor(c,y,x,U,te,me,Oe,Ye){if(super(),this.repoInfo_=c,this.applicationId_=y,this.onDataUpdate_=x,this.onConnectStatus_=U,this.onServerInfoUpdate_=te,this.authTokenProvider_=me,this.appCheckTokenProvider_=Oe,this.authOverride_=Ye,this.id=h.nextPersistentConnectionId_++,this.log_=Hn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=oo,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ye&&!(0,Q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Na.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&pt.getInstance().on("online",this.onOnline_,this)}sendRequest(c,y,x){const U=++this.requestNumber_,te={r:U,a:c,b:y};this.log_((0,Q.Pz)(te)),(0,Q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(te),x&&(this.requestCBHash_[U]=x)}get(c){this.initConnection_();const y=new Q.BH,x={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:x,onComplete:me=>{const Oe=me.d;"ok"===me.s?y.resolve(Oe):y.reject(Oe)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),y.promise}listen(c,y,x,U){this.initConnection_();const te=c._queryIdentifier,me=c._path.toString();this.log_("Listen called for "+me+" "+te),this.listens.has(me)||this.listens.set(me,new Map),(0,Q.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Q.hu)(!this.listens.get(me).has(te),"listen() called twice for same path/queryId.");const Oe={onComplete:U,hashFn:y,query:c,tag:x};this.listens.get(me).set(te,Oe),this.connected_&&this.sendListen_(Oe)}sendGet_(c){const y=this.outstandingGets_[c];this.sendRequest("g",y.request,x=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),y.onComplete&&y.onComplete(x)})}sendListen_(c){const y=c.query,x=y._path.toString(),U=y._queryIdentifier;this.log_("Listen on "+x+" for "+U);const te={p:x};c.tag&&(te.q=y._queryObject,te.t=c.tag),te.h=c.hashFn(),this.sendRequest("q",te,Oe=>{const Ye=Oe.d,Gt=Oe.s;h.warnOnListenWarnings_(Ye,y),(this.listens.get(x)&&this.listens.get(x).get(U))===c&&(this.log_("listen response",Oe),"ok"!==Gt&&this.removeListen_(x,U),c.onComplete&&c.onComplete(Gt,Ye))})}static warnOnListenWarnings_(c,y){if(c&&"object"==typeof c&&(0,Q.r3)(c,"w")){const x=(0,Q.DV)(c,"w");if(Array.isArray(x)&&~x.indexOf("no_index")){const U='".indexOn": "'+y._queryParams.getIndex().toString()+'"',te=y._path.toString();bi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${U} at ${te} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,Q.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,y=(0,Q.w9)(c)?"auth":"gauth",x={cred:c};null===this.authOverride_?x.noauth=!0:"object"==typeof this.authOverride_&&(x.authvar=this.authOverride_),this.sendRequest(y,x,U=>{const te=U.s,me=U.d||"error";this.authToken_===c&&("ok"===te?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(te,me))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const y=c.s,x=c.d||"error";"ok"===y?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(y,x)})}unlisten(c,y){const x=c._path.toString(),U=c._queryIdentifier;this.log_("Unlisten called for "+x+" "+U),(0,Q.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(x,U)&&this.connected_&&this.sendUnlisten_(x,U,c._queryObject,y)}sendUnlisten_(c,y,x,U){this.log_("Unlisten on "+c+" for "+y);const te={p:c};U&&(te.q=x,te.t=U),this.sendRequest("n",te)}onDisconnectPut(c,y,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,y,x):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:y,onComplete:x})}onDisconnectMerge(c,y,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,y,x):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:y,onComplete:x})}onDisconnectCancel(c,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,y):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:y})}sendOnDisconnect_(c,y,x,U){const te={p:y,d:x};this.log_("onDisconnect "+c,te),this.sendRequest(c,te,me=>{U&&setTimeout(()=>{U(me.s,me.d)},Math.floor(0))})}put(c,y,x,U){this.putInternal("p",c,y,x,U)}merge(c,y,x,U){this.putInternal("m",c,y,x,U)}putInternal(c,y,x,U,te){this.initConnection_();const me={p:y,d:x};void 0!==te&&(me.h=te),this.outstandingPuts_.push({action:c,request:me,onComplete:U}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)}sendPut_(c){const y=this.outstandingPuts_[c].action,x=this.outstandingPuts_[c].request,U=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(y,x,te=>{this.log_(y+" response",te),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),U&&U(te.s,te.d)})}reportStats(c){if(this.connected_){const y={c};this.log_("reportStats",y),this.sendRequest("s",y,x=>{"ok"!==x.s&&this.log_("reportStats","Error sending stats: "+x.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,Q.Pz)(c));const y=c.r,x=this.requestCBHash_[y];x&&(delete this.requestCBHash_[y],x(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,y){this.log_("handleServerMessage",c,y),"d"===c?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===c?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===c?this.onListenRevoked_(y.p,y.q):"ac"===c?this.onAuthRevoked_(y.s,y.d):"apc"===c?this.onAppCheckRevoked_(y.s,y.d):"sd"===c?this.onSecurityDebugPacket_(y):Gi("Unrecognized action received from server: "+(0,Q.Pz)(c)+"\nAre you using the latest client?")}onReady_(c,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,Q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=oo,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=oo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=oo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let y=Math.max(0,this.reconnectDelay_-c);y=Math.random()*y,this.log_("Trying to reconnect in "+y+"ms"),this.scheduleConnect_(y),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,Qe.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const y=c.onDataMessage_.bind(c),x=c.onReady_.bind(c),U=c.onRealtimeDisconnect_.bind(c),te=c.id+":"+h.nextConnectionId_++,me=c.lastSessionId;let Oe=!1,Ye=null;const Gt=function(){Ye?Ye.close():(Oe=!0,U())};c.realtime_={close:Gt,sendRequest:function(Jn){(0,Q.hu)(Ye,"sendRequest call when we're not connected not allowed."),Ye.sendRequest(Jn)}};const nn=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Jn,Ti]=yield Promise.all([c.authTokenProvider_.getToken(nn),c.appCheckTokenProvider_.getToken(nn)]);Oe?ln("getToken() completed but was canceled"):(ln("getToken() completed. Creating connection."),c.authToken_=Jn&&Jn.accessToken,c.appCheckToken_=Ti&&Ti.token,Ye=new ia(te,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,y,x,U,Zr=>{bi(Zr+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},me))}catch(Jn){c.log_("Failed to get token: "+Jn),Oe||(c.repoInfo_.nodeAdmin&&bi(Jn),Gt())}}})()}interrupt(c){ln("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){ln("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,Q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=oo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const y=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const y=this.outstandingPuts_[c];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,y){let x;x=y?y.map(te=>Yi(te)).join("$"):"default";const U=this.removeListen_(c,x);U&&U.onComplete&&U.onComplete("permission_denied")}removeListen_(c,y){const x=new Ot(c).toString();let U;if(this.listens.has(x)){const te=this.listens.get(x);U=te.get(y),te.delete(y),0===te.size&&this.listens.delete(x)}else U=void 0;return U}onAuthRevoked_(c,y){ln("Auth token revoked: "+c+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,y){ln("App check token revoked: "+c+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const y of c.values())this.sendListen_(y);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let y="js";(0,Q.Yr)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+y+"."+bt.replace(/\./g,"-")]=1,(0,Q.uI)()?c["framework.cordova"]=1:(0,Q.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=pt.getInstance().currentlyOnline();return(0,Q.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class Ai{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new Ai(u,c)}}class go{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const y=new Ai(Li,u),x=new Ai(Li,c);return 0!==this.compare(y,x)}minPost(){return Ai.MIN}}class Po extends go{static get __EMPTY_NODE(){return Rr}static set __EMPTY_NODE(u){Rr=u}compare(u,c){return Qt(u.name,c.name)}isDefinedOn(u){throw(0,Q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return Ai.MIN}maxPost(){return new Ai(vi,Rr)}makePost(u,c){return(0,Q.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new Ai(u,Rr)}toString(){return".key"}}const lo=new Po;class mo{constructor(u,c,y,x,U=null){this.isReverse_=x,this.resultGenerator_=U,this.nodeStack_=[];let te=1;for(;!u.isEmpty();)if(te=c?y(u.key,c):1,x&&(te*=-1),te<0)u=this.isReverse_?u.left:u.right;else{if(0===te){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let da,lr=(()=>{class h{constructor(c,y,x,U,te){this.key=c,this.value=y,this.color=x??h.RED,this.left=U??us.EMPTY_NODE,this.right=te??us.EMPTY_NODE}copy(c,y,x,U,te){return new h(c??this.key,y??this.value,x??this.color,U??this.left,te??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,y,x){let U=this;const te=x(c,U.key);return U=te<0?U.copy(null,null,null,U.left.insert(c,y,x),null):0===te?U.copy(null,y,null,null,null):U.copy(null,null,null,null,U.right.insert(c,y,x)),U.fixUp_()}removeMin_(){if(this.left.isEmpty())return us.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,y){let x,U;if(x=this,y(c,x.key)<0)!x.left.isEmpty()&&!x.left.isRed_()&&!x.left.left.isRed_()&&(x=x.moveRedLeft_()),x=x.copy(null,null,null,x.left.remove(c,y),null);else{if(x.left.isRed_()&&(x=x.rotateRight_()),!x.right.isEmpty()&&!x.right.isRed_()&&!x.right.left.isRed_()&&(x=x.moveRedRight_()),0===y(c,x.key)){if(x.right.isEmpty())return us.EMPTY_NODE;U=x.right.min_(),x=x.copy(U.key,U.value,null,null,x.right.removeMin_())}x=x.copy(null,null,null,null,x.right.remove(c,y))}return x.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,y)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class us{constructor(u,c=us.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new us(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,lr.BLACK,null,null))}remove(u){return new us(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,lr.BLACK,null,null))}get(u){let c,y=this.root_;for(;!y.isEmpty();){if(c=this.comparator_(u,y.key),0===c)return y.value;c<0?y=y.left:c>0&&(y=y.right)}return null}getPredecessorKey(u){let c,y=this.root_,x=null;for(;!y.isEmpty();){if(c=this.comparator_(u,y.key),0===c){if(y.left.isEmpty())return x?x.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}c<0?y=y.left:c>0&&(x=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new mo(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new mo(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new mo(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new mo(this.root_,null,this.comparator_,!0,u)}}function Ls(h,u){return Qt(h.name,u.name)}function Zi(h,u){return Qt(h,u)}us.EMPTY_NODE=new class _o{copy(u,c,y,x,U){return this}insert(u,c,y){return new lr(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Vo=function(h){return"number"==typeof h?"number:"+Tr(h):"string:"+h},Gr=function(h){if(h.isLeafNode()){const u=h.val();(0,Q.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,Q.r3)(u,".sv"),"Priority must be a string or number.")}else(0,Q.hu)(h===da||h.isEmpty(),"priority of unexpected type.");(0,Q.hu)(h===da||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ha,Ii,Ta,ur=(()=>{class h{constructor(c,y=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=y,this.lazyHash_=null,(0,Q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Gr(this.priorityNode_)}static set __childrenNodeConstructor(c){ha=c}static get __childrenNodeConstructor(){return ha}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return gi(c)?this:".priority"===en(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,y){return null}updateImmediateChild(c,y){return".priority"===c?this.updatePriority(y):y.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,y).updatePriority(this.priorityNode_)}updateChild(c,y){const x=en(c);return null===x?y:y.isEmpty()&&".priority"!==x?this:((0,Q.hu)(".priority"!==x||1===si(c),".priority must be the last token in a path"),this.updateImmediateChild(x,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(ui(c),y)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,y){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Vo(this.priorityNode_.val())+":");const y=typeof this.value_;c+=y+":",c+="number"===y?Tr(this.value_):this.value_,this.lazyHash_=Bn(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,Q.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const y=typeof c.value_,x=typeof this.value_,U=h.VALUE_TYPE_ORDER.indexOf(y),te=h.VALUE_TYPE_ORDER.indexOf(x);return(0,Q.hu)(U>=0,"Unknown leaf type: "+y),(0,Q.hu)(te>=0,"Unknown leaf type: "+x),U===te?"object"===x?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:te-U}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const y=c;return this.value_===y.value_&&this.priorityNode_.equals(y.priorityNode_)}return!1}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const Er=new class _l extends go{compare(u,c){const y=u.node.getPriority(),x=c.node.getPriority(),U=y.compareTo(x);return 0===U?Qt(u.name,c.name):U}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return Ai.MIN}maxPost(){return new Ai(vi,new ur("[PRIORITY-POST]",Ta))}makePost(u,c){const y=Ii(u);return new Ai(c,new ur("[PRIORITY-POST]",y))}toString(){return".priority"}},Co=Math.log(2);class To{constructor(u){this.count=parseInt(Math.log(u+1)/Co,10),this.current_=this.count-1;const x=(U=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&x}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const Vs=function(h,u,c,y){h.sort(u);const x=function(Oe,Ye){const Gt=Ye-Oe;let zt,nn;if(0===Gt)return null;if(1===Gt)return zt=h[Oe],nn=c?c(zt):zt,new lr(nn,zt.node,lr.BLACK,null,null);{const Jn=parseInt(Gt/2,10)+Oe,Ti=x(Oe,Jn),Zr=x(Jn+1,Ye);return zt=h[Jn],nn=c?c(zt):zt,new lr(nn,zt.node,lr.BLACK,Ti,Zr)}},me=function(Oe){let Ye=null,Gt=null,zt=h.length;const nn=function(Ti,Zr){const za=zt-Ti,Sl=zt;zt-=Ti;const Su=x(za+1,Sl),Au=h[za],Cf=c?c(Au):Au;Jn(new lr(Cf,Au.node,Zr,null,Su))},Jn=function(Ti){Ye?(Ye.left=Ti,Ye=Ti):(Gt=Ti,Ye=Ti)};for(let Ti=0;Ti<Oe.count;++Ti){const Zr=Oe.nextBitIsOne(),za=Math.pow(2,Oe.count-(Ti+1));Zr?nn(za,lr.BLACK):(nn(za,lr.BLACK),nn(za,lr.RED))}return Gt}(new To(h.length));return new us(y||u,me)};let Jt;const Xn={};class Zs{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,Q.hu)(Xn&&Er,"ChildrenNode.ts has not been loaded"),Jt=Jt||new Zs({".priority":Xn},{".priority":Er}),Jt}get(u){const c=(0,Q.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof us?c:null}hasIndex(u){return(0,Q.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,Q.hu)(u!==lo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const y=[];let x=!1;const U=c.getIterator(Ai.Wrap);let me,te=U.getNext();for(;te;)x=x||u.isDefinedOn(te.node),y.push(te),te=U.getNext();me=x?Vs(y,u.getCompare()):Xn;const Oe=u.toString(),Ye=Object.assign({},this.indexSet_);Ye[Oe]=u;const Gt=Object.assign({},this.indexes_);return Gt[Oe]=me,new Zs(Gt,Ye)}addToIndexes(u,c){const y=(0,Q.UI)(this.indexes_,(x,U)=>{const te=(0,Q.DV)(this.indexSet_,U);if((0,Q.hu)(te,"Missing index implementation for "+U),x===Xn){if(te.isDefinedOn(u.node)){const me=[],Oe=c.getIterator(Ai.Wrap);let Ye=Oe.getNext();for(;Ye;)Ye.name!==u.name&&me.push(Ye),Ye=Oe.getNext();return me.push(u),Vs(me,te.getCompare())}return Xn}{const me=c.get(u.name);let Oe=x;return me&&(Oe=Oe.remove(new Ai(u.name,me))),Oe.insert(u,u.node)}});return new Zs(y,this.indexSet_)}removeFromIndexes(u,c){const y=(0,Q.UI)(this.indexes_,x=>{if(x===Xn)return x;{const U=c.get(u.name);return U?x.remove(new Ai(u.name,U)):x}});return new Zs(y,this.indexSet_)}}let ms,Wn=(()=>{class h{constructor(c,y,x){this.children_=c,this.priorityNode_=y,this.indexMap_=x,this.lazyHash_=null,this.priorityNode_&&Gr(this.priorityNode_),this.children_.isEmpty()&&(0,Q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ms||(ms=new h(new us(Zi),null,Zs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ms}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const y=this.children_.get(c);return null===y?ms:y}}getChild(c){const y=en(c);return null===y?this:this.getImmediateChild(y).getChild(ui(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,y){if((0,Q.hu)(y,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(y);{const x=new Ai(c,y);let U,te;y.isEmpty()?(U=this.children_.remove(c),te=this.indexMap_.removeFromIndexes(x,this.children_)):(U=this.children_.insert(c,y),te=this.indexMap_.addToIndexes(x,this.children_));const me=U.isEmpty()?ms:this.priorityNode_;return new h(U,me,te)}}updateChild(c,y){const x=en(c);if(null===x)return y;{(0,Q.hu)(".priority"!==en(c)||1===si(c),".priority must be the last token in a path");const U=this.getImmediateChild(x).updateChild(ui(c),y);return this.updateImmediateChild(x,U)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const y={};let x=0,U=0,te=!0;if(this.forEachChild(Er,(me,Oe)=>{y[me]=Oe.val(c),x++,te&&h.INTEGER_REGEXP_.test(me)?U=Math.max(U,Number(me)):te=!1}),!c&&te&&U<2*x){const me=[];for(const Oe in y)me[Oe]=y[Oe];return me}return c&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Vo(this.getPriority().val())+":"),this.forEachChild(Er,(y,x)=>{const U=x.hash();""!==U&&(c+=":"+y+":"+U)}),this.lazyHash_=""===c?"":Bn(c)}return this.lazyHash_}getPredecessorChildName(c,y,x){const U=this.resolveIndex_(x);if(U){const te=U.getPredecessorKey(new Ai(c,y));return te?te.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const y=this.resolveIndex_(c);if(y){const x=y.minKey();return x&&x.name}return this.children_.minKey()}getFirstChild(c){const y=this.getFirstChildName(c);return y?new Ai(y,this.children_.get(y)):null}getLastChildName(c){const y=this.resolveIndex_(c);if(y){const x=y.maxKey();return x&&x.name}return this.children_.maxKey()}getLastChild(c){const y=this.getLastChildName(c);return y?new Ai(y,this.children_.get(y)):null}forEachChild(c,y){const x=this.resolveIndex_(c);return x?x.inorderTraversal(U=>y(U.name,U.node)):this.children_.inorderTraversal(y)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,y){const x=this.resolveIndex_(y);if(x)return x.getIteratorFrom(c,U=>U);{const U=this.children_.getIteratorFrom(c.name,Ai.Wrap);let te=U.peek();for(;null!=te&&y.compare(te,c)<0;)U.getNext(),te=U.peek();return U}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,y){const x=this.resolveIndex_(y);if(x)return x.getReverseIteratorFrom(c,U=>U);{const U=this.children_.getReverseIteratorFrom(c.name,Ai.Wrap);let te=U.peek();for(;null!=te&&y.compare(te,c)>0;)U.getNext(),te=U.peek();return U}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===Y?-1:0}withIndex(c){if(c===lo||this.indexMap_.hasIndex(c))return this;{const y=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,y)}}isIndexed(c){return c===lo||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const y=c;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){const x=this.getIterator(Er),U=y.getIterator(Er);let te=x.getNext(),me=U.getNext();for(;te&&me;){if(te.name!==me.name||!te.node.equals(me.node))return!1;te=x.getNext(),me=U.getNext()}return null===te&&null===me}return!1}return!1}}resolveIndex_(c){return c===lo?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const Y=new class ee extends Wn{constructor(){super(new us(Zi),Wn.EMPTY_NODE,Zs.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return Wn.EMPTY_NODE}isEmpty(){return!1}};function fe(h,u=null){if(null===h)return Wn.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(u=h[".priority"]),(0,Q.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new ur(h,fe(u));if(h instanceof Array){let c=Wn.EMPTY_NODE;return sr(h,(y,x)=>{if((0,Q.r3)(h,y)&&"."!==y.substring(0,1)){const U=fe(x);(U.isLeafNode()||!U.isEmpty())&&(c=c.updateImmediateChild(y,U))}}),c.updatePriority(fe(u))}{const c=[];let y=!1;if(sr(h,(te,me)=>{if("."!==te.substring(0,1)){const Oe=fe(me);Oe.isEmpty()||(y=y||!Oe.getPriority().isEmpty(),c.push(new Ai(te,Oe)))}}),0===c.length)return Wn.EMPTY_NODE;const U=Vs(c,Ls,te=>te.name,Zi);if(y){const te=Vs(c,Er.getCompare());return new Wn(U,fe(u),new Zs({".priority":te},{".priority":Er}))}return new Wn(U,fe(u),Zs.Default)}}Object.defineProperties(Ai,{MIN:{value:new Ai(Li,Wn.EMPTY_NODE)},MAX:{value:new Ai(vi,Y)}}),Po.__EMPTY_NODE=Wn.EMPTY_NODE,ur.__childrenNodeConstructor=Wn,function fr(h){da=h}(Y),function Uo(h){Ta=h}(Y),function xl(h){Ii=h}(fe);class Pt extends go{constructor(u){super(),this.indexPath_=u,(0,Q.hu)(!gi(u)&&".priority"!==en(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const y=this.extractChild(u.node),x=this.extractChild(c.node),U=y.compareTo(x);return 0===U?Qt(u.name,c.name):U}makePost(u,c){const y=fe(u),x=Wn.EMPTY_NODE.updateChild(this.indexPath_,y);return new Ai(c,x)}maxPost(){const u=Wn.EMPTY_NODE.updateChild(this.indexPath_,Y);return new Ai(vi,u)}toString(){return Fs(this.indexPath_,0).join("/")}}const Lr=new class Fn extends go{compare(u,c){const y=u.node.compareTo(c.node);return 0===y?Qt(u.name,c.name):y}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return Ai.MIN}maxPost(){return Ai.MAX}makePost(u,c){const y=fe(u);return new Ai(c,y)}toString(){return".value"}},Ys="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fa=function(){let h=0;const u=[];return function(c){const y=c===h;let x;h=c;const U=new Array(8);for(x=7;x>=0;x--)U[x]=Ys.charAt(c%64),c=Math.floor(c/64);(0,Q.hu)(0===c,"Cannot push at time == 0");let te=U.join("");if(y){for(x=11;x>=0&&63===u[x];x--)u[x]=0;u[x]++}else for(x=0;x<12;x++)u[x]=Math.floor(64*Math.random());for(x=0;x<12;x++)te+=Ys.charAt(u[x]);return(0,Q.hu)(20===te.length,"nextPushId: Length should be 20."),te}}(),el=function(h){if(h===""+Dr)return"-";const u=An(h);if(null!=u)return""+(u+1);const c=new Array(h.length);for(let te=0;te<c.length;te++)c[te]=h.charAt(te);if(c.length<786)return c.push("-"),c.join("");let y=c.length-1;for(;y>=0&&"z"===c[y];)y--;if(-1===y)return vi;const U=Ys.charAt(Ys.indexOf(c[y])+1);return c[y]=U,c.slice(0,y+1).join("")},Bo=function(h){if(h===""+fi)return Li;const u=An(h);if(null!=u)return""+(u-1);const c=new Array(h.length);for(let y=0;y<c.length;y++)c[y]=h.charAt(y);return"-"===c[c.length-1]?1===c.length?""+Dr:(delete c[c.length-1],c.join("")):(c[c.length-1]=Ys.charAt(Ys.indexOf(c[c.length-1])-1),c.join("")+"z".repeat(786-c.length))};function Pa(h){return{type:"value",snapshotNode:h}}function ra(h,u){return{type:"child_added",snapshotNode:u,childName:h}}function Da(h,u){return{type:"child_removed",snapshotNode:u,childName:h}}function Sa(h,u,c){return{type:"child_changed",snapshotNode:u,childName:h,oldSnap:c}}class pa{constructor(u){this.index_=u}updateChild(u,c,y,x,U,te){(0,Q.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const me=u.getImmediateChild(c);return me.getChild(x).equals(y.getChild(x))&&me.isEmpty()===y.isEmpty()||(null!=te&&(y.isEmpty()?u.hasChild(c)?te.trackChildChange(Da(c,me)):(0,Q.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):me.isEmpty()?te.trackChildChange(ra(c,y)):te.trackChildChange(Sa(c,y,me))),u.isLeafNode()&&y.isEmpty())?u:u.updateImmediateChild(c,y).withIndex(this.index_)}updateFullNode(u,c,y){return null!=y&&(u.isLeafNode()||u.forEachChild(Er,(x,U)=>{c.hasChild(x)||y.trackChildChange(Da(x,U))}),c.isLeafNode()||c.forEachChild(Er,(x,U)=>{if(u.hasChild(x)){const te=u.getImmediateChild(x);te.equals(U)||y.trackChildChange(Sa(x,U,te))}else y.trackChildChange(ra(x,U))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?Wn.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ho{constructor(u){this.indexedFilter_=new pa(u.getIndex()),this.index_=u.getIndex(),this.startPost_=Ho.getStartPost_(u),this.endPost_=Ho.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,c,y,x,U,te){return this.matches(new Ai(c,y))||(y=Wn.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,y,x,U,te)}updateFullNode(u,c,y){c.isLeafNode()&&(c=Wn.EMPTY_NODE);let x=c.withIndex(this.index_);x=x.updatePriority(Wn.EMPTY_NODE);const U=this;return c.forEachChild(Er,(te,me)=>{U.matches(new Ai(te,me))||(x=x.updateImmediateChild(te,Wn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,x,y)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class is{constructor(u){this.rangedFilter_=new Ho(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,c,y,x,U,te){return this.rangedFilter_.matches(new Ai(c,y))||(y=Wn.EMPTY_NODE),u.getImmediateChild(c).equals(y)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,y,x,U,te):this.fullLimitUpdateChild_(u,c,y,U,te)}updateFullNode(u,c,y){let x;if(c.isLeafNode()||c.isEmpty())x=Wn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let U;x=Wn.EMPTY_NODE.withIndex(this.index_),U=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let te=0;for(;U.hasNext()&&te<this.limit_;){const me=U.getNext();let Oe;if(Oe=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),me)<=0:this.index_.compare(me,this.rangedFilter_.getEndPost())<=0,!Oe)break;x=x.updateImmediateChild(me.name,me.node),te++}}else{let U,te,me,Oe;if(x=c.withIndex(this.index_),x=x.updatePriority(Wn.EMPTY_NODE),this.reverse_){Oe=x.getReverseIterator(this.index_),U=this.rangedFilter_.getEndPost(),te=this.rangedFilter_.getStartPost();const zt=this.index_.getCompare();me=(nn,Jn)=>zt(Jn,nn)}else Oe=x.getIterator(this.index_),U=this.rangedFilter_.getStartPost(),te=this.rangedFilter_.getEndPost(),me=this.index_.getCompare();let Ye=0,Gt=!1;for(;Oe.hasNext();){const zt=Oe.getNext();!Gt&&me(U,zt)<=0&&(Gt=!0),Gt&&Ye<this.limit_&&me(zt,te)<=0?Ye++:x=x.updateImmediateChild(zt.name,Wn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,x,y)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,y,x,U){let te;if(this.reverse_){const zt=this.index_.getCompare();te=(nn,Jn)=>zt(Jn,nn)}else te=this.index_.getCompare();const me=u;(0,Q.hu)(me.numChildren()===this.limit_,"");const Oe=new Ai(c,y),Ye=this.reverse_?me.getFirstChild(this.index_):me.getLastChild(this.index_),Gt=this.rangedFilter_.matches(Oe);if(me.hasChild(c)){const zt=me.getImmediateChild(c);let nn=x.getChildAfterChild(this.index_,Ye,this.reverse_);for(;null!=nn&&(nn.name===c||me.hasChild(nn.name));)nn=x.getChildAfterChild(this.index_,nn,this.reverse_);const Jn=null==nn?1:te(nn,Oe);if(Gt&&!y.isEmpty()&&Jn>=0)return U?.trackChildChange(Sa(c,y,zt)),me.updateImmediateChild(c,y);{U?.trackChildChange(Da(c,zt));const Zr=me.updateImmediateChild(c,Wn.EMPTY_NODE);return null!=nn&&this.rangedFilter_.matches(nn)?(U?.trackChildChange(ra(nn.name,nn.node)),Zr.updateImmediateChild(nn.name,nn.node)):Zr}}return y.isEmpty()?u:Gt&&te(Ye,Oe)>=0?(null!=U&&(U.trackChildChange(Da(Ye.name,Ye.node)),U.trackChildChange(ra(c,y))),me.updateImmediateChild(c,y).updateImmediateChild(Ye.name,Wn.EMPTY_NODE)):u}}class qo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Er}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Li}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Er}copy(){const u=new qo;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function qa(h,u,c){const y=h.copy();return y.startSet_=!0,void 0===u&&(u=null),y.indexStartValue_=u,null!=c?(y.startNameSet_=!0,y.indexStartName_=c):(y.startNameSet_=!1,y.indexStartName_=""),y}function B(h,u,c){const y=h.copy();return y.endSet_=!0,void 0===u&&(u=null),y.indexEndValue_=u,void 0!==c?(y.endNameSet_=!0,y.indexEndName_=c):(y.endNameSet_=!1,y.indexEndName_=""),y}function W(h,u){const c=h.copy();return c.index_=u,c}function ge(h){const u={};if(h.isDefault())return u;let c;return h.index_===Er?c="$priority":h.index_===Lr?c="$value":h.index_===lo?c="$key":((0,Q.hu)(h.index_ instanceof Pt,"Unrecognized index type!"),c=h.index_.toString()),u.orderBy=(0,Q.Pz)(c),h.startSet_&&(u.startAt=(0,Q.Pz)(h.indexStartValue_),h.startNameSet_&&(u.startAt+=","+(0,Q.Pz)(h.indexStartName_))),h.endSet_&&(u.endAt=(0,Q.Pz)(h.indexEndValue_),h.endNameSet_&&(u.endAt+=","+(0,Q.Pz)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?u.limitToFirst=h.limit_:u.limitToLast=h.limit_),u}function $e(h){const u={};if(h.startSet_&&(u.sp=h.indexStartValue_,h.startNameSet_&&(u.sn=h.indexStartName_)),h.endSet_&&(u.ep=h.indexEndValue_,h.endNameSet_&&(u.en=h.indexEndName_)),h.limitSet_){u.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),u.vf=c}return h.index_!==Er&&(u.i=h.index_.toString()),u}class xt extends io{constructor(u,c,y,x){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=y,this.appCheckTokenProvider_=x,this.log_=Hn("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,Q.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,y,x){const U=u._path.toString();this.log_("Listen called for "+U+" "+u._queryIdentifier);const te=xt.getListenId_(u,y),me={};this.listens_[te]=me;const Oe=ge(u._queryParams);this.restRequest_(U+".json",Oe,(Ye,Gt)=>{let zt=Gt;if(404===Ye&&(zt=null,Ye=null),null===Ye&&this.onDataUpdate_(U,zt,!1,y),(0,Q.DV)(this.listens_,te)===me){let nn;nn=Ye?401===Ye?"permission_denied":"rest_error:"+Ye:"ok",x(nn,null)}})}unlisten(u,c){const y=xt.getListenId_(u,c);delete this.listens_[y]}get(u){const c=ge(u._queryParams),y=u._path.toString(),x=new Q.BH;return this.restRequest_(y+".json",c,(U,te)=>{let me=te;404===U&&(me=null,U=null),null===U?(this.onDataUpdate_(y,me,!1,null),x.resolve(me)):x.reject(new Error(me))}),x.promise}refreshAuthToken(u){}restRequest_(u,c={},y){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([x,U])=>{x&&x.accessToken&&(c.auth=x.accessToken),U&&U.token&&(c.ac=U.token);const te=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,Q.xO)(c);this.log_("Sending REST request for "+te);const me=new XMLHttpRequest;me.onreadystatechange=()=>{if(y&&4===me.readyState){this.log_("REST Response for "+te+" received. status:",me.status,"response:",me.responseText);let Oe=null;if(me.status>=200&&me.status<300){try{Oe=(0,Q.cI)(me.responseText)}catch{bi("Failed to parse JSON response for "+te+": "+me.responseText)}y(null,Oe)}else 401!==me.status&&404!==me.status&&bi("Got unsuccessful REST response for "+te+" Status: "+me.status),y(me.status);y=null}},me.open("GET",te,!0),me.send()})}}class Bt{constructor(){this.rootNode_=Wn.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function Pn(){return{value:null,children:new Map}}function Wi(h,u,c){if(gi(u))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(u,c);else{const y=en(u);h.children.has(y)||h.children.set(y,Pn()),Wi(h.children.get(y),u=ui(u),c)}}function cr(h,u){if(gi(u))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(Er,(y,x)=>{Wi(h,new Ot(y),x)}),cr(h,u)}}if(h.children.size>0){const c=en(u);return u=ui(u),h.children.has(c)&&cr(h.children.get(c),u)&&h.children.delete(c),0===h.children.size}return!0}function tr(h,u,c){null!==h.value?c(u,h.value):function Ki(h,u){h.children.forEach((c,y)=>{u(y,c)})}(h,(y,x)=>{tr(x,new Ot(u.toString()+"/"+y),c)})}class Us{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&sr(this.last_,(y,x)=>{c[y]=c[y]-x}),this.last_=u,c}}class ga{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new Us(u);const y=1e4+2e4*Math.random();or(this.reportStats_.bind(this),Math.floor(y))}reportStats_(){const u=this.statsListener_.get(),c={};let y=!1;sr(u,(x,U)=>{U>0&&(0,Q.r3)(this.statsToReport_,x)&&(c[x]=U,y=!0)}),y&&this.server_.reportStats(c),or(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var xr=(()=>{return(h=xr||(xr={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",xr;var h})();function Qs(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Zo{constructor(u,c,y){this.path=u,this.affectedTree=c,this.revert=y,this.type=xr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(gi(this.path)){if(null!=this.affectedTree.value)return(0,Q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Ot(u));return new Zo(Zt(),c,this.revert)}}return(0,Q.hu)(en(this.path)===u,"operationForChild called for unrelated child."),new Zo(ui(this.path),this.affectedTree,this.revert)}}class _a{constructor(u,c){this.source=u,this.path=c,this.type=xr.LISTEN_COMPLETE}operationForChild(u){return gi(this.path)?new _a(this.source,Zt()):new _a(this.source,ui(this.path))}}class Vr{constructor(u,c,y){this.source=u,this.path=c,this.snap=y,this.type=xr.OVERWRITE}operationForChild(u){return gi(this.path)?new Vr(this.source,Zt(),this.snap.getImmediateChild(u)):new Vr(this.source,ui(this.path),this.snap)}}class ka{constructor(u,c,y){this.source=u,this.path=c,this.children=y,this.type=xr.MERGE}operationForChild(u){if(gi(this.path)){const c=this.children.subtree(new Ot(u));return c.isEmpty()?null:c.value?new Vr(this.source,Zt(),c.value):new ka(this.source,Zt(),c)}return(0,Q.hu)(en(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new ka(this.source,ui(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Fa{constructor(u,c,y){this.node_=u,this.fullyInitialized_=c,this.filtered_=y}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(gi(u))return this.isFullyInitialized()&&!this.filtered_;const c=en(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class jo{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function La(h,u,c,y,x,U){const te=y.filter(me=>me.type===c);te.sort((me,Oe)=>function we(h,u,c){if(null==u.childName||null==c.childName)throw(0,Q.g5)("Should only compare child_ events.");const y=new Ai(u.childName,u.snapshotNode),x=new Ai(c.childName,c.snapshotNode);return h.index_.compare(y,x)}(h,me,Oe)),te.forEach(me=>{const Oe=function L(h,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,h.index_)),u}(h,me,U);x.forEach(Ye=>{Ye.respondsTo(me.type)&&u.push(Ye.createEvent(Oe,h.query_))})})}function p(h,u){return{eventCache:h,serverCache:u}}function M(h,u,c,y){return p(new Fa(u,c,y),h.serverCache)}function ie(h,u,c,y){return p(h.eventCache,new Fa(u,c,y))}function ce(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function lt(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let Ht;class wn{constructor(u,c=(()=>(Ht||(Ht=new us(Ni)),Ht))()){this.value=u,this.children=c}static fromObject(u){let c=new wn(null);return sr(u,(y,x)=>{c=c.set(new Ot(y),x)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:Zt(),value:this.value};if(gi(u))return null;{const y=en(u),x=this.children.get(y);if(null!==x){const U=x.findRootMostMatchingPathAndValue(ui(u),c);return null!=U?{path:vr(new Ot(y),U.path),value:U.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(gi(u))return this;{const c=en(u),y=this.children.get(c);return null!==y?y.subtree(ui(u)):new wn(null)}}set(u,c){if(gi(u))return new wn(c,this.children);{const y=en(u),U=(this.children.get(y)||new wn(null)).set(ui(u),c),te=this.children.insert(y,U);return new wn(this.value,te)}}remove(u){if(gi(u))return this.children.isEmpty()?new wn(null):new wn(null,this.children);{const c=en(u),y=this.children.get(c);if(y){const x=y.remove(ui(u));let U;return U=x.isEmpty()?this.children.remove(c):this.children.insert(c,x),null===this.value&&U.isEmpty()?new wn(null):new wn(this.value,U)}return this}}get(u){if(gi(u))return this.value;{const c=en(u),y=this.children.get(c);return y?y.get(ui(u)):null}}setTree(u,c){if(gi(u))return c;{const y=en(u),U=(this.children.get(y)||new wn(null)).setTree(ui(u),c);let te;return te=U.isEmpty()?this.children.remove(y):this.children.insert(y,U),new wn(this.value,te)}}fold(u){return this.fold_(Zt(),u)}fold_(u,c){const y={};return this.children.inorderTraversal((x,U)=>{y[x]=U.fold_(vr(u,x),c)}),c(u,this.value,y)}findOnPath(u,c){return this.findOnPath_(u,Zt(),c)}findOnPath_(u,c,y){const x=!!this.value&&y(c,this.value);if(x)return x;if(gi(u))return null;{const U=en(u),te=this.children.get(U);return te?te.findOnPath_(ui(u),vr(c,U),y):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,Zt(),c)}foreachOnPath_(u,c,y){if(gi(u))return this;{this.value&&y(c,this.value);const x=en(u),U=this.children.get(x);return U?U.foreachOnPath_(ui(u),vr(c,x),y):new wn(null)}}foreach(u){this.foreach_(Zt(),u)}foreach_(u,c){this.children.inorderTraversal((y,x)=>{x.foreach_(vr(u,y),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,y)=>{y.value&&u(c,y.value)})}}class Mn{constructor(u){this.writeTree_=u}static empty(){return new Mn(new wn(null))}}function pr(h,u,c){if(gi(u))return new Mn(new wn(c));{const y=h.writeTree_.findRootMostValueAndPath(u);if(null!=y){const x=y.path;let U=y.value;const te=Fr(x,u);return U=U.updateChild(te,c),new Mn(h.writeTree_.set(x,U))}{const x=new wn(c),U=h.writeTree_.setTree(u,x);return new Mn(U)}}}function qr(h,u,c){let y=h;return sr(c,(x,U)=>{y=pr(y,vr(u,x),U)}),y}function mi(h,u){if(gi(u))return Mn.empty();{const c=h.writeTree_.setTree(u,new wn(null));return new Mn(c)}}function Ss(h,u){return null!=Mr(h,u)}function Mr(h,u){const c=h.writeTree_.findRootMostValueAndPath(u);return null!=c?h.writeTree_.get(c.path).getChild(Fr(c.path,u)):null}function Ir(h){const u=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(Er,(y,x)=>{u.push(new Ai(y,x))}):h.writeTree_.children.inorderTraversal((y,x)=>{null!=x.value&&u.push(new Ai(y,x.value))}),u}function oi(h,u){if(gi(u))return h;{const c=Mr(h,u);return new Mn(null!=c?new wn(c):h.writeTree_.subtree(u))}}function hs(h){return h.writeTree_.isEmpty()}function ys(h,u){return As(Zt(),h.writeTree_,u)}function As(h,u,c){if(null!=u.value)return c.updateChild(h,u.value);{let y=null;return u.children.inorderTraversal((x,U)=>{".priority"===x?((0,Q.hu)(null!==U.value,"Priority writes must always be leaf nodes"),y=U.value):c=As(vr(h,x),U,c)}),!c.getChild(h).isEmpty()&&null!==y&&(c=c.updateChild(vr(h,".priority"),y)),c}}function ko(h,u){return Oi(u,h)}function Vn(h,u){if(h.snap)return wr(h.path,u);for(const c in h.children)if(h.children.hasOwnProperty(c)&&wr(vr(h.path,c),u))return!0;return!1}function vo(h){return h.visible}function Tn(h,u,c){let y=Mn.empty();for(let x=0;x<h.length;++x){const U=h[x];if(u(U)){const te=U.path;let me;if(U.snap)wr(c,te)?(me=Fr(c,te),y=pr(y,me,U.snap)):wr(te,c)&&(me=Fr(te,c),y=pr(y,Zt(),U.snap.getChild(me)));else{if(!U.children)throw(0,Q.g5)("WriteRecord should have .snap or .children");if(wr(c,te))me=Fr(c,te),y=qr(y,me,U.children);else if(wr(te,c))if(me=Fr(te,c),gi(me))y=qr(y,Zt(),U.children);else{const Oe=(0,Q.DV)(U.children,en(me));if(Oe){const Ye=Oe.getChild(ui(me));y=pr(y,Zt(),Ye)}}}}}return y}function Ut(h,u,c,y,x){if(y||x){const U=oi(h.visibleWrites,u);return!x&&hs(U)?c:x||null!=c||Ss(U,Zt())?ys(Tn(h.allWrites,function(Ye){return(Ye.visible||x)&&(!y||!~y.indexOf(Ye.writeId))&&(wr(Ye.path,u)||wr(u,Ye.path))},u),c||Wn.EMPTY_NODE):null}{const U=Mr(h.visibleWrites,u);if(null!=U)return U;{const te=oi(h.visibleWrites,u);return hs(te)?c:null!=c||Ss(te,Zt())?ys(te,c||Wn.EMPTY_NODE):null}}}function Vl(h,u,c,y){return Ut(h.writeTree,h.treePath,u,c,y)}function nl(h,u){return function an(h,u,c){let y=Wn.EMPTY_NODE;const x=Mr(h.visibleWrites,u);if(x)return x.isLeafNode()||x.forEachChild(Er,(U,te)=>{y=y.updateImmediateChild(U,te)}),y;if(c){const U=oi(h.visibleWrites,u);return c.forEachChild(Er,(te,me)=>{const Oe=ys(oi(U,new Ot(te)),me);y=y.updateImmediateChild(te,Oe)}),Ir(U).forEach(te=>{y=y.updateImmediateChild(te.name,te.node)}),y}return Ir(oi(h.visibleWrites,u)).forEach(te=>{y=y.updateImmediateChild(te.name,te.node)}),y}(h.writeTree,h.treePath,u)}function ya(h,u,c,y){return function Js(h,u,c,y,x){(0,Q.hu)(y||x,"Either existingEventSnap or existingServerSnap must exist");const U=vr(u,c);if(Ss(h.visibleWrites,U))return null;{const te=oi(h.visibleWrites,U);return hs(te)?x.getChild(c):ys(te,x.getChild(c))}}(h.writeTree,h.treePath,u,c,y)}function Bs(h,u){return function lu(h,u){return Mr(h.visibleWrites,u)}(h.writeTree,vr(h.treePath,u))}function Ya(h,u,c){return function yl(h,u,c,y){const x=vr(u,c),U=Mr(h.visibleWrites,x);return null!=U?U:y.isCompleteForChild(c)?ys(oi(h.visibleWrites,x),y.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,u,c)}function Yo(h,u){return Oi(vr(h.treePath,u),h.writeTree)}function Oi(h,u){return{treePath:h,writeTree:u}}class $o{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,y=u.childName;(0,Q.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,Q.hu)(".priority"!==y,"Only non-priority child changes can be tracked.");const x=this.changeMap.get(y);if(x){const U=x.type;if("child_added"===c&&"child_removed"===U)this.changeMap.set(y,Sa(y,u.snapshotNode,x.snapshotNode));else if("child_removed"===c&&"child_added"===U)this.changeMap.delete(y);else if("child_removed"===c&&"child_changed"===U)this.changeMap.set(y,Da(y,x.oldSnap));else if("child_changed"===c&&"child_added"===U)this.changeMap.set(y,ra(y,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==U)throw(0,Q.g5)("Illegal combination of changes: "+u+" occurred after "+x);this.changeMap.set(y,Sa(y,u.snapshotNode,x.oldSnap))}}else this.changeMap.set(y,u)}getChanges(){return Array.from(this.changeMap.values())}}const Xr=new class va{getCompleteChild(u){return null}getChildAfterChild(u,c,y){return null}};class Sn{constructor(u,c,y=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=y}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const y=null!=this.optCompleteServerCache_?new Fa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ya(this.writes_,u,y)}}getChildAfterChild(u,c,y){const x=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lt(this.viewCache_),U=function Va(h,u,c,y,x,U){return function uu(h,u,c,y,x,U,te){let me;const Oe=oi(h.visibleWrites,u),Ye=Mr(Oe,Zt());if(null!=Ye)me=Ye;else{if(null==c)return[];me=ys(Oe,c)}if(me=me.withIndex(te),me.isEmpty()||me.isLeafNode())return[];{const Gt=[],zt=te.getCompare(),nn=U?me.getReverseIteratorFrom(y,te):me.getIteratorFrom(y,te);let Jn=nn.getNext();for(;Jn&&Gt.length<x;)0!==zt(Jn,y)&&Gt.push(Jn),Jn=nn.getNext();return Gt}}(h.writeTree,h.treePath,u,c,y,x,U)}(this.writes_,x,c,1,y,u);return 0===U.length?null:U[0]}}function En(h,u,c,y,x,U){const te=u.eventCache;if(null!=Bs(y,c))return u;{let me,Oe;if(gi(c))if((0,Q.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Ye=lt(u),zt=nl(y,Ye instanceof Wn?Ye:Wn.EMPTY_NODE);me=h.filter.updateFullNode(u.eventCache.getNode(),zt,U)}else{const Ye=Vl(y,lt(u));me=h.filter.updateFullNode(u.eventCache.getNode(),Ye,U)}else{const Ye=en(c);if(".priority"===Ye){(0,Q.hu)(1===si(c),"Can't have a priority with additional path components");const Gt=te.getNode();Oe=u.serverCache.getNode();const zt=ya(y,c,Gt,Oe);me=null!=zt?h.filter.updatePriority(Gt,zt):te.getNode()}else{const Gt=ui(c);let zt;if(te.isCompleteForChild(Ye)){Oe=u.serverCache.getNode();const nn=ya(y,c,te.getNode(),Oe);zt=null!=nn?te.getNode().getImmediateChild(Ye).updateChild(Gt,nn):te.getNode().getImmediateChild(Ye)}else zt=Ya(y,Ye,u.serverCache);me=null!=zt?h.filter.updateChild(te.getNode(),Ye,zt,Gt,x,U):te.getNode()}}return M(u,me,te.isFullyInitialized()||gi(c),h.filter.filtersNodes())}}function dl(h,u,c,y,x,U,te,me){const Oe=u.serverCache;let Ye;const Gt=te?h.filter:h.filter.getIndexedFilter();if(gi(c))Ye=Gt.updateFullNode(Oe.getNode(),y,null);else if(Gt.filtersNodes()&&!Oe.isFiltered()){const Jn=Oe.getNode().updateChild(c,y);Ye=Gt.updateFullNode(Oe.getNode(),Jn,null)}else{const Jn=en(c);if(!Oe.isCompleteForPath(c)&&si(c)>1)return u;const Ti=ui(c),za=Oe.getNode().getImmediateChild(Jn).updateChild(Ti,y);Ye=".priority"===Jn?Gt.updatePriority(Oe.getNode(),za):Gt.updateChild(Oe.getNode(),Jn,za,Ti,Xr,null)}const zt=ie(u,Ye,Oe.isFullyInitialized()||gi(c),Gt.filtersNodes());return En(h,zt,c,x,new Sn(x,zt,U),me)}function Qo(h,u,c,y,x,U,te){const me=u.eventCache;let Oe,Ye;const Gt=new Sn(x,u,U);if(gi(c))Ye=h.filter.updateFullNode(u.eventCache.getNode(),y,te),Oe=M(u,Ye,!0,h.filter.filtersNodes());else{const zt=en(c);if(".priority"===zt)Ye=h.filter.updatePriority(u.eventCache.getNode(),y),Oe=M(u,Ye,me.isFullyInitialized(),me.isFiltered());else{const nn=ui(c),Jn=me.getNode().getImmediateChild(zt);let Ti;if(gi(nn))Ti=y;else{const Zr=Gt.getCompleteChild(zt);Ti=null!=Zr?".priority"===ar(nn)&&Zr.getChild(as(nn)).isEmpty()?Zr:Zr.updateChild(nn,y):Wn.EMPTY_NODE}Oe=Jn.equals(Ti)?u:M(u,h.filter.updateChild(me.getNode(),zt,Ti,nn,Gt,te),me.isFullyInitialized(),h.filter.filtersNodes())}}return Oe}function Ua(h,u){return h.eventCache.isCompleteForChild(u)}function Zl(h,u,c){return c.foreach((y,x)=>{u=u.updateChild(y,x)}),u}function Xs(h,u,c,y,x,U,te,me){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Ye,Oe=u;Ye=gi(c)?y:new wn(null).setTree(c,y);const Gt=u.serverCache.getNode();return Ye.children.inorderTraversal((zt,nn)=>{if(Gt.hasChild(zt)){const Ti=Zl(0,u.serverCache.getNode().getImmediateChild(zt),nn);Oe=dl(h,Oe,new Ot(zt),Ti,x,U,te,me)}}),Ye.children.inorderTraversal((zt,nn)=>{const Jn=!u.serverCache.isCompleteForChild(zt)&&null===nn.value;if(!Gt.hasChild(zt)&&!Jn){const Zr=Zl(0,u.serverCache.getNode().getImmediateChild(zt),nn);Oe=dl(h,Oe,new Ot(zt),Zr,x,U,te,me)}}),Oe}class Wr{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const y=this.query_._queryParams,x=new pa(y.getIndex()),U=function ul(h){return h.loadsAllData()?new pa(h.getIndex()):h.hasLimit()?new is(h):new Ho(h)}(y);this.processor_=function ql(h){return{filter:h}}(U);const te=c.serverCache,me=c.eventCache,Oe=x.updateFullNode(Wn.EMPTY_NODE,te.getNode(),null),Ye=U.updateFullNode(Wn.EMPTY_NODE,me.getNode(),null),Gt=new Fa(Oe,te.isFullyInitialized(),x.filtersNodes()),zt=new Fa(Ye,me.isFullyInitialized(),U.filtersNodes());this.viewCache_=p(zt,Gt),this.eventGenerator_=new jo(this.query_)}get query(){return this.query_}}function Ol(h,u){const c=lt(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!gi(u)&&!c.getImmediateChild(en(u)).isEmpty())?c.getChild(u):null}function Fo(h){return 0===h.eventRegistrations_.length}function C(h,u,c){const y=[];if(c){(0,Q.hu)(null==u,"A cancel should cancel all event registrations.");const x=h.query._path;h.eventRegistrations_.forEach(U=>{const te=U.createCancelEvent(c,x);te&&y.push(te)})}if(u){let x=[];for(let U=0;U<h.eventRegistrations_.length;++U){const te=h.eventRegistrations_[U];if(te.matches(u)){if(u.hasAnyCallback()){x=x.concat(h.eventRegistrations_.slice(U+1));break}}else x.push(te)}h.eventRegistrations_=x}else h.eventRegistrations_=[];return y}function R(h,u,c,y){u.type===xr.MERGE&&null!==u.source.queryId&&((0,Q.hu)(lt(h.viewCache_),"We should always have a full cache before handling merges"),(0,Q.hu)(ce(h.viewCache_),"Missing event cache, even though we have a server cache"));const x=h.viewCache_,U=function Uu(h,u,c,y,x){const U=new $o;let te,me;if(c.type===xr.OVERWRITE){const Ye=c;Ye.source.fromUser?te=Qo(h,u,Ye.path,Ye.snap,y,x,U):((0,Q.hu)(Ye.source.fromServer,"Unknown source."),me=Ye.source.tagged||u.serverCache.isFiltered()&&!gi(Ye.path),te=dl(h,u,Ye.path,Ye.snap,y,x,me,U))}else if(c.type===xr.MERGE){const Ye=c;Ye.source.fromUser?te=function Mu(h,u,c,y,x,U,te){let me=u;return y.foreach((Oe,Ye)=>{const Gt=vr(c,Oe);Ua(u,en(Gt))&&(me=Qo(h,me,Gt,Ye,x,U,te))}),y.foreach((Oe,Ye)=>{const Gt=vr(c,Oe);Ua(u,en(Gt))||(me=Qo(h,me,Gt,Ye,x,U,te))}),me}(h,u,Ye.path,Ye.children,y,x,U):((0,Q.hu)(Ye.source.fromServer,"Unknown source."),me=Ye.source.tagged||u.serverCache.isFiltered(),te=Xs(h,u,Ye.path,Ye.children,y,x,me,U))}else if(c.type===xr.ACK_USER_WRITE){const Ye=c;te=Ye.revert?function vl(h,u,c,y,x,U){let te;if(null!=Bs(y,c))return u;{const me=new Sn(y,u,x),Oe=u.eventCache.getNode();let Ye;if(gi(c)||".priority"===en(c)){let Gt;if(u.serverCache.isFullyInitialized())Gt=Vl(y,lt(u));else{const zt=u.serverCache.getNode();(0,Q.hu)(zt instanceof Wn,"serverChildren would be complete if leaf node"),Gt=nl(y,zt)}Ye=h.filter.updateFullNode(Oe,Gt,U)}else{const Gt=en(c);let zt=Ya(y,Gt,u.serverCache);null==zt&&u.serverCache.isCompleteForChild(Gt)&&(zt=Oe.getImmediateChild(Gt)),Ye=null!=zt?h.filter.updateChild(Oe,Gt,zt,ui(c),me,U):u.eventCache.getNode().hasChild(Gt)?h.filter.updateChild(Oe,Gt,Wn.EMPTY_NODE,ui(c),me,U):Oe,Ye.isEmpty()&&u.serverCache.isFullyInitialized()&&(te=Vl(y,lt(u)),te.isLeafNode()&&(Ye=h.filter.updateFullNode(Ye,te,U)))}return te=u.serverCache.isFullyInitialized()||null!=Bs(y,Zt()),M(u,Ye,te,h.filter.filtersNodes())}}(h,u,Ye.path,y,x,U):function il(h,u,c,y,x,U,te){if(null!=Bs(x,c))return u;const me=u.serverCache.isFiltered(),Oe=u.serverCache;if(null!=y.value){if(gi(c)&&Oe.isFullyInitialized()||Oe.isCompleteForPath(c))return dl(h,u,c,Oe.getNode().getChild(c),x,U,me,te);if(gi(c)){let Ye=new wn(null);return Oe.getNode().forEachChild(lo,(Gt,zt)=>{Ye=Ye.set(new Ot(Gt),zt)}),Xs(h,u,c,Ye,x,U,me,te)}return u}{let Ye=new wn(null);return y.foreach((Gt,zt)=>{const nn=vr(c,Gt);Oe.isCompleteForPath(nn)&&(Ye=Ye.set(Gt,Oe.getNode().getChild(nn)))}),Xs(h,u,c,Ye,x,U,me,te)}}(h,u,Ye.path,Ye.affectedTree,y,x,U)}else{if(c.type!==xr.LISTEN_COMPLETE)throw(0,Q.g5)("Unknown operation type: "+c.type);te=function Ml(h,u,c,y,x){const U=u.serverCache;return En(h,ie(u,U.getNode(),U.isFullyInitialized()||gi(c),U.isFiltered()),c,y,Xr,x)}(h,u,c.path,y,U)}const Oe=U.getChanges();return function Hs(h,u,c){const y=u.eventCache;if(y.isFullyInitialized()){const x=y.getNode().isLeafNode()||y.getNode().isEmpty(),U=ce(h);(c.length>0||!h.eventCache.isFullyInitialized()||x&&!y.getNode().equals(U)||!y.getNode().getPriority().equals(U.getPriority()))&&c.push(Pa(ce(u)))}}(u,te,Oe),{viewCache:te,changes:Oe}}(h.processor_,x,u,c,y);return function Sr(h,u){(0,Q.hu)(u.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,Q.hu)(u.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,U.viewCache),(0,Q.hu)(U.viewCache.serverCache.isFullyInitialized()||!x.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=U.viewCache,V(h,U.changes,U.viewCache.eventCache.getNode(),null)}function V(h,u,c,y){return function Fl(h,u,c,y){const x=[],U=[];return u.forEach(te=>{"child_changed"===te.type&&h.index_.indexedValueChanged(te.oldSnap,te.snapshotNode)&&U.push(function sa(h,u){return{type:"child_moved",snapshotNode:u,childName:h}}(te.childName,te.snapshotNode))}),La(h,x,"child_removed",u,y,c),La(h,x,"child_added",u,y,c),La(h,x,"child_moved",U,y,c),La(h,x,"child_changed",u,y,c),La(h,x,"value",u,y,c),x}(h.eventGenerator_,u,c,y?[y]:h.eventRegistrations_)}let J,er;class pe{constructor(){this.views=new Map}}function Cn(h,u,c,y){const x=u.source.queryId;if(null!==x){const U=h.views.get(x);return(0,Q.hu)(null!=U,"SyncTree gave us an op for an invalid query."),R(U,u,c,y)}{let U=[];for(const te of h.views.values())U=U.concat(R(te,u,c,y));return U}}function ji(h,u,c,y,x){const te=h.views.get(u._queryIdentifier);if(!te){let me=Vl(c,x?y:null),Oe=!1;me?Oe=!0:y instanceof Wn?(me=nl(c,y),Oe=!1):(me=Wn.EMPTY_NODE,Oe=!1);const Ye=p(new Fa(me,Oe,!1),new Fa(y,x,!1));return new Wr(u,Ye)}return te}function fs(h){const u=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function jr(h,u){let c=null;for(const y of h.views.values())c=c||Ol(y,u);return c}function Ja(h,u){return u._queryParams.loadsAllData()?$r(h):h.views.get(u._queryIdentifier)}function Nr(h,u){return null!=Ja(h,u)}function Jo(h){return null!=$r(h)}function $r(h){for(const u of h.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let Go=1;class wl{constructor(u){this.listenProvider_=u,this.syncPointTree_=new wn(null),this.pendingWriteTree_=function Ll(){return{visibleWrites:Mn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uo(h,u,c,y,x){return function dn(h,u,c,y,x){(0,Q.hu)(y>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===x&&(x=!0),h.allWrites.push({path:u,snap:c,writeId:y,visible:x}),x&&(h.visibleWrites=pr(h.visibleWrites,u,c)),h.lastWriteId=y}(h.pendingWriteTree_,u,c,y,x),x?At(h,new Vr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function aa(h,u,c=!1){const y=function oa(h,u){for(let c=0;c<h.allWrites.length;c++){const y=h.allWrites[c];if(y.writeId===u)return y}return null}(h.pendingWriteTree_,u);if(function tl(h,u){const c=h.allWrites.findIndex(me=>me.writeId===u);(0,Q.hu)(c>=0,"removeWrite called with nonexistent writeId.");const y=h.allWrites[c];h.allWrites.splice(c,1);let x=y.visible,U=!1,te=h.allWrites.length-1;for(;x&&te>=0;){const me=h.allWrites[te];me.visible&&(te>=c&&Vn(me,y.path)?x=!1:wr(y.path,me.path)&&(U=!0)),te--}return!!x&&(U?(function Ln(h){h.visibleWrites=Tn(h.allWrites,vo,Zt()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(y.snap?h.visibleWrites=mi(h.visibleWrites,y.path):sr(y.children,Oe=>{h.visibleWrites=mi(h.visibleWrites,vr(y.path,Oe))}),!0))}(h.pendingWriteTree_,u)){let U=new wn(null);return null!=y.snap?U=U.set(Zt(),!0):sr(y.children,te=>{U=U.set(new Ot(te),!0)}),At(h,new Zo(y.path,U,c))}return[]}function es(h,u,c){return At(h,new Vr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function El(h,u,c,y,x=!1){const U=u._path,te=h.syncPointTree_.get(U);let me=[];if(te&&("default"===u._queryIdentifier||Nr(te,u))){const Oe=function $i(h,u,c,y){const x=u._queryIdentifier,U=[];let te=[];const me=Jo(h);if("default"===x)for(const[Oe,Ye]of h.views.entries())te=te.concat(C(Ye,c,y)),Fo(Ye)&&(h.views.delete(Oe),Ye.query._queryParams.loadsAllData()||U.push(Ye.query));else{const Oe=h.views.get(x);Oe&&(te=te.concat(C(Oe,c,y)),Fo(Oe)&&(h.views.delete(x),Oe.query._queryParams.loadsAllData()||U.push(Oe.query)))}return me&&!Jo(h)&&U.push(new(function Ze(){return(0,Q.hu)(J,"Reference.ts has not been loaded"),J}())(u._repo,u._path)),{removed:U,events:te}}(te,u,c,y);(function Lt(h){return 0===h.views.size})(te)&&(h.syncPointTree_=h.syncPointTree_.remove(U));const Ye=Oe.removed;if(me=Oe.events,!x){const Gt=-1!==Ye.findIndex(nn=>nn._queryParams.loadsAllData()),zt=h.syncPointTree_.findOnPath(U,(nn,Jn)=>Jo(Jn));if(Gt&&!zt){const nn=h.syncPointTree_.subtree(U);if(!nn.isEmpty()){const Jn=function zo(h){return h.fold((u,c,y)=>{if(c&&Jo(c))return[$r(c)];{let x=[];return c&&(x=fs(c)),sr(y,(U,te)=>{x=x.concat(te)}),x}})}(nn);for(let Ti=0;Ti<Jn.length;++Ti){const Zr=Jn[Ti],za=Zr.query,Sl=ri(h,Zr);h.listenProvider_.startListening(xa(za),di(h,za),Sl.hashFn,Sl.onComplete)}}}!zt&&Ye.length>0&&!y&&(Gt?h.listenProvider_.stopListening(xa(u),null):Ye.forEach(nn=>{const Jn=h.queryToTagMap.get(Pi(nn));h.listenProvider_.stopListening(xa(nn),Jn)}))}!function sl(h,u){for(let c=0;c<u.length;++c){const y=u[c];if(!y._queryParams.loadsAllData()){const x=Pi(y),U=h.queryToTagMap.get(x);h.queryToTagMap.delete(x),h.tagToQueryMap.delete(U)}}}(h,Ye)}return me}function z(h,u,c,y){const x=Yn(h,y);if(null!=x){const U=ps(x),te=U.path,me=U.queryId,Oe=Fr(te,u);return ho(h,te,new Vr(Qs(me),Oe,c))}return[]}function de(h,u,c,y=!1){const x=u._path;let U=null,te=!1;h.syncPointTree_.foreachOnPath(x,(nn,Jn)=>{const Ti=Fr(nn,x);U=U||jr(Jn,Ti),te=te||Jo(Jn)});let Oe,me=h.syncPointTree_.get(x);me?(te=te||Jo(me),U=U||jr(me,Zt())):(me=new pe,h.syncPointTree_=h.syncPointTree_.set(x,me)),null!=U?Oe=!0:(Oe=!1,U=Wn.EMPTY_NODE,h.syncPointTree_.subtree(x).foreachChild((Jn,Ti)=>{const Zr=jr(Ti,Zt());Zr&&(U=U.updateImmediateChild(Jn,Zr))}));const Ye=Nr(me,u);if(!Ye&&!u._queryParams.loadsAllData()){const nn=Pi(u);(0,Q.hu)(!h.queryToTagMap.has(nn),"View does not exist, but we have a tag");const Jn=function Ba(){return Go++}();h.queryToTagMap.set(nn,Jn),h.tagToQueryMap.set(Jn,nn)}let zt=function Kn(h,u,c,y,x,U){const te=ji(h,u,y,x,U);return h.views.has(u._queryIdentifier)||h.views.set(u._queryIdentifier,te),function rl(h,u){h.eventRegistrations_.push(u)}(te,c),function D(h,u){const c=h.viewCache_.eventCache,y=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(Er,(U,te)=>{y.push(ra(U,te))}),c.isFullyInitialized()&&y.push(Pa(c.getNode())),V(h,y,c.getNode(),u)}(te,c)}(me,u,c,ko(h.pendingWriteTree_,x),U,Oe);if(!Ye&&!te&&!y){const nn=Ja(me,u);zt=zt.concat(function Ha(h,u,c){const y=u._path,x=di(h,u),U=ri(h,c),te=h.listenProvider_.startListening(xa(u),x,U.hashFn,U.onComplete),me=h.syncPointTree_.subtree(y);if(x)(0,Q.hu)(!Jo(me.value),"If we're adding a query, it shouldn't be shadowed");else{const Oe=me.fold((Ye,Gt,zt)=>{if(!gi(Ye)&&Gt&&Jo(Gt))return[$r(Gt).query];{let nn=[];return Gt&&(nn=nn.concat(fs(Gt).map(Jn=>Jn.query))),sr(zt,(Jn,Ti)=>{nn=nn.concat(Ti)}),nn}});for(let Ye=0;Ye<Oe.length;++Ye){const Gt=Oe[Ye];h.listenProvider_.stopListening(xa(Gt),di(h,Gt))}}return te}(h,u,nn))}return zt}function He(h,u,c){const x=h.pendingWriteTree_,U=h.syncPointTree_.findOnPath(u,(te,me)=>{const Ye=jr(me,Fr(te,u));if(Ye)return Ye});return Ut(x,u,U,c,!0)}function At(h,u){return un(u,h.syncPointTree_,null,ko(h.pendingWriteTree_,Zt()))}function un(h,u,c,y){if(gi(h.path))return mn(h,u,c,y);{const x=u.get(Zt());null==c&&null!=x&&(c=jr(x,Zt()));let U=[];const te=en(h.path),me=h.operationForChild(te),Oe=u.children.get(te);if(Oe&&me){const Ye=c?c.getImmediateChild(te):null,Gt=Yo(y,te);U=U.concat(un(me,Oe,Ye,Gt))}return x&&(U=U.concat(Cn(x,h,y,c))),U}}function mn(h,u,c,y){const x=u.get(Zt());null==c&&null!=x&&(c=jr(x,Zt()));let U=[];return u.children.inorderTraversal((te,me)=>{const Oe=c?c.getImmediateChild(te):null,Ye=Yo(y,te),Gt=h.operationForChild(te);Gt&&(U=U.concat(mn(Gt,me,Oe,Ye)))}),x&&(U=U.concat(Cn(x,h,y,c))),U}function ri(h,u){const c=u.query,y=di(h,c);return{hashFn:()=>(function Do(h){return h.viewCache_.serverCache.getNode()}(u)||Wn.EMPTY_NODE).hash(),onComplete:x=>{if("ok"===x)return y?function co(h,u,c){const y=Yn(h,c);if(y){const x=ps(y),U=x.path,te=x.queryId,me=Fr(U,u);return ho(h,U,new _a(Qs(te),me))}return[]}(h,c._path,y):function iu(h,u){return At(h,new _a({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(h,c._path);{const U=function zn(h,u){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const y=new Error(h+" at "+u._path.toString()+": "+c);return y.code=h.toUpperCase(),y}(x,c);return El(h,c,null,U)}}}}function di(h,u){const c=Pi(u);return h.queryToTagMap.get(c)}function Pi(h){return h._path.toString()+"$"+h._queryIdentifier}function Yn(h,u){return h.tagToQueryMap.get(u)}function ps(h){const u=h.indexOf("$");return(0,Q.hu)(-1!==u&&u<h.length-1,"Bad queryKey."),{queryId:h.substr(u+1),path:new Ot(h.substr(0,u))}}function ho(h,u,c){const y=h.syncPointTree_.get(u);return(0,Q.hu)(y,"Missing sync point for query tag that we're tracking"),Cn(y,c,ko(h.pendingWriteTree_,u),null)}function xa(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function Bl(){return(0,Q.hu)(er,"Reference.ts has not been loaded"),er}())(h._repo,h._path):h}class ol{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new ol(c)}node(){return this.node_}}class ja{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=vr(this.path_,u);return new ja(this.syncTree_,c)}node(){return He(this.syncTree_,this.path_)}}const cu=function(h,u,c){return h&&"object"==typeof h?((0,Q.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?rd(h[".sv"],u,c):"object"==typeof h[".sv"]?Bu(h[".sv"],u):void(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},rd=function(h,u,c){if("timestamp"===h)return c.timestamp;(0,Q.hu)(!1,"Unexpected server value: "+h)},Bu=function(h,u,c){h.hasOwnProperty("increment")||(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const y=h.increment;"number"!=typeof y&&(0,Q.hu)(!1,"Unexpected increment value: "+y);const x=u.node();if((0,Q.hu)(null!==x&&typeof x<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!x.isLeafNode())return y;const te=x.getValue();return"number"!=typeof te?y:te+y},mu=function(h,u,c,y){return jl(u,new ja(c,h),y)},Xo=function(h,u,c){return jl(h,new ol(u),c)};function jl(h,u,c){const y=h.getPriority().val(),x=cu(y,u.getImmediateChild(".priority"),c);let U;if(h.isLeafNode()){const te=h,me=cu(te.getValue(),u,c);return me!==te.getValue()||x!==te.getPriority().val()?new ur(me,fe(x)):h}{const te=h;return U=te,x!==te.getPriority().val()&&(U=U.updatePriority(new ur(x))),te.forEachChild(Er,(me,Oe)=>{const Ye=jl(Oe,u.getImmediateChild(me),c);Ye!==Oe&&(U=U.updateImmediateChild(me,Ye))}),U}}class bs{constructor(u="",c=null,y={children:{},childCount:0}){this.name=u,this.parent=c,this.node=y}}function Ou(h,u){let c=u instanceof Ot?u:new Ot(u),y=h,x=en(c);for(;null!==x;){const U=(0,Q.DV)(y.node.children,x)||{children:{},childCount:0};y=new bs(x,y,U),c=ui(c),x=en(c)}return y}function he(h){return h.node.value}function j(h,u){h.node.value=u,ei(h)}function G(h){return h.node.childCount>0}function Je(h,u){sr(h.node.children,(c,y)=>{u(new bs(c,h,y))})}function Nt(h,u,c,y){c&&!y&&u(h),Je(h,x=>{Nt(x,u,!0,y)}),c&&y&&u(h)}function Ci(h){return new Ot(null===h.parent?h.name:Ci(h.parent)+"/"+h.name)}function ei(h){null!==h.parent&&function xs(h,u,c){const y=function ye(h){return void 0===he(h)&&!G(h)}(c),x=(0,Q.r3)(h.node.children,u);y&&x?(delete h.node.children[u],h.node.childCount--,ei(h)):!y&&!x&&(h.node.children[u]=c.node,h.node.childCount++,ei(h))}(h.parent,h.name,h)}const ea=/[\[\].#$\/\u0000-\u001F\u007F]/,$l=/[\[\].#$\u0000-\u001F\u007F]/,al=10485760,$a=function(h){return"string"==typeof h&&0!==h.length&&!ea.test(h)},bl=function(h){return"string"==typeof h&&0!==h.length&&!$l.test(h)},Ql=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!ai(h)||h&&"object"==typeof h&&(0,Q.r3)(h,".sv")},So=function(h,u,c,y){y&&void 0===u||la((0,Q.gK)(h,"value"),u,c)},la=function(h,u,c){const y=c instanceof Ot?new qs(c,h):c;if(void 0===u)throw new Error(h+"contains undefined "+Yr(y));if("function"==typeof u)throw new Error(h+"contains a function "+Yr(y)+" with contents = "+u.toString());if(ai(u))throw new Error(h+"contains "+u.toString()+" "+Yr(y));if("string"==typeof u&&u.length>al/3&&(0,Q.ug)(u)>al)throw new Error(h+"contains a string greater than "+al+" utf8 bytes "+Yr(y)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let x=!1,U=!1;if(sr(u,(te,me)=>{if(".value"===te)x=!0;else if(".priority"!==te&&".sv"!==te&&(U=!0,!$a(te)))throw new Error(h+" contains an invalid key ("+te+") "+Yr(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function so(h,u){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(u),h.byteLength_+=(0,Q.ug)(u),No(h)})(y,te),la(h,me,y),function Ra(h){const u=h.parts_.pop();h.byteLength_-=(0,Q.ug)(u),h.parts_.length>0&&(h.byteLength_-=1)}(y)}),x&&U)throw new Error(h+' contains ".value" child '+Yr(y)+" in addition to actual children.")}},rc=function(h,u,c,y){if(y&&void 0===u)return;const x=(0,Q.gK)(h,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(x+" must be an object containing the children to replace.");const U=[];sr(u,(te,me)=>{const Oe=new Ot(te);if(la(x,me,vr(c,Oe)),".priority"===ar(Oe)&&!Ql(me))throw new Error(x+"contains an invalid value for '"+Oe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");U.push(Oe)}),function(h,u){let c,y;for(c=0;c<u.length;c++){y=u[c];const U=Fs(y);for(let te=0;te<U.length;te++)if((".priority"!==U[te]||te!==U.length-1)&&!$a(U[te]))throw new Error(h+"contains an invalid key ("+U[te]+") in path "+y.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(Eo);let x=null;for(c=0;c<u.length;c++){if(y=u[c],null!==x&&wr(x,y))throw new Error(h+"contains a path "+x.toString()+" that is ancestor of another path "+y.toString());x=y}}(x,U)},Hu=function(h,u,c){if(!c||void 0!==u){if(ai(u))throw new Error((0,Q.gK)(h,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ql(u))throw new Error((0,Q.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},hl=function(h,u,c,y){if(!(y&&void 0===c||$a(c)))throw new Error((0,Q.gK)(h,u)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},du=function(h,u,c,y){if(!(y&&void 0===c||bl(c)))throw new Error((0,Q.gK)(h,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},wa=function(h,u){if(".info"===en(u))throw new Error(h+" failed = Can't modify data under /.info/")},sc=function(h,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!$a(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),bl(h)}(c))throw new Error((0,Q.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Uc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ru(h,u){let c=null;for(let y=0;y<u.length;y++){const x=u[y],U=x.getPath();null!==c&&!bo(U,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:U}),c.events.push(x)}c&&h.eventLists_.push(c)}function _u(h,u,c){Ru(h,c),N(h,y=>bo(y,u))}function js(h,u,c){Ru(h,c),N(h,y=>wr(y,u)||wr(u,y))}function N(h,u){h.recursionDepth_++;let c=!0;for(let y=0;y<h.eventLists_.length;y++){const x=h.eventLists_[y];x&&(u(x.path)?(w(h.eventLists_[y]),h.eventLists_[y]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function w(h){for(let u=0;u<h.events.length;u++){const c=h.events[u];if(null!==c){h.events[u]=null;const y=c.getEventRunner();Vt&&ln("event: "+c.toString()),Ui(y)}}}const b="repo_interrupt";class ue{constructor(u,c,y,x){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=y,this.appCheckProvider_=x,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Uc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pn(),this.transactionQueueTree_=new bs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Tt(h){const c=h.infoData_.getNode(new Ot(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function sn(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:Tt(h)})}function kn(h,u,c,y,x){h.dataUpdateCount++;const U=new Ot(u);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(u,c):c;let te=[];if(x)if(y){const Oe=(0,Q.UI)(c,Ye=>fe(Ye));te=function X(h,u,c,y){const x=Yn(h,y);if(x){const U=ps(x),te=U.path,me=U.queryId,Oe=Fr(te,u),Ye=wn.fromObject(c);return ho(h,te,new ka(Qs(me),Oe,Ye))}return[]}(h.serverSyncTree_,U,Oe,x)}else{const Oe=fe(c);te=z(h.serverSyncTree_,U,Oe,x)}else if(y){const Oe=(0,Q.UI)(c,Ye=>fe(Ye));te=function Aa(h,u,c){const y=wn.fromObject(c);return At(h,new ka({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,y))}(h.serverSyncTree_,U,Oe)}else{const Oe=fe(c);te=es(h.serverSyncTree_,U,Oe)}let me=U;te.length>0&&(me=eo(h,U)),js(h.eventQueue_,me,te)}function _i(h,u){Is(h,"connected",u),!1===u&&function Gl(h){fu(h,"onDisconnectEvents");const u=sn(h),c=Pn();tr(h.onDisconnect_,Zt(),(x,U)=>{const te=mu(x,U,h.serverSyncTree_,u);Wi(c,x,te)});let y=[];tr(c,Zt(),(x,U)=>{y=y.concat(es(h.serverSyncTree_,x,U));const te=ae(h,x);eo(h,te)}),h.onDisconnect_=Pn(),js(h.eventQueue_,Zt(),y)}(h)}function Is(h,u,c){const y=new Ot("/.info/"+u),x=fe(c);h.infoData_.updateSnapshot(y,x);const U=es(h.infoSyncTree_,y,x);js(h.eventQueue_,y,U)}function fl(h){return h.nextWriteId_++}function ru(h,u,c,y,x){fu(h,"set",{path:u.toString(),value:c,priority:y});const U=sn(h),te=fe(c,y),me=He(h.serverSyncTree_,u),Oe=Xo(te,me,U),Ye=fl(h),Gt=uo(h.serverSyncTree_,u,Oe,Ye,!0);Ru(h.eventQueue_,Gt),h.server_.put(u.toString(),te.val(!0),(nn,Jn)=>{const Ti="ok"===nn;Ti||bi("set at "+u+" failed: "+nn);const Zr=aa(h.serverSyncTree_,Ye,!Ti);js(h.eventQueue_,u,Zr),vs(0,x,nn,Jn)});const zt=ae(h,u);eo(h,zt),js(h.eventQueue_,zt,[])}function ju(h,u,c){h.server_.onDisconnectCancel(u.toString(),(y,x)=>{"ok"===y&&cr(h.onDisconnect_,u),vs(0,c,y,x)})}function zl(h,u,c,y){const x=fe(c);h.server_.onDisconnectPut(u.toString(),x.val(!0),(U,te)=>{"ok"===U&&Wi(h.onDisconnect_,u,x),vs(0,y,U,te)})}function Pu(h,u,c){let y;y=".info"===en(u._path)?El(h.infoSyncTree_,u,c):El(h.serverSyncTree_,u,c),_u(h.eventQueue_,u._path,y)}function yu(h){h.persistentConnection_&&h.persistentConnection_.interrupt(b)}function fu(h,...u){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),ln(c,...u)}function vs(h,u,c,y){u&&Ui(()=>{if("ok"===c)u(null);else{const x=(c||"error").toUpperCase();let U=x;y&&(U+=": "+y);const te=new Error(U);te.code=x,u(te)}})}function zu(h,u,c){return He(h.serverSyncTree_,u,c)||Wn.EMPTY_NODE}function Wu(h,u=h.transactionQueueTree_){if(u||q(h,u),he(u)){const c=E(h,u);(0,Q.hu)(c.length>0,"Sending zero length transaction queue"),c.every(x=>0===x.status)&&function lh(h,u,c){const y=c.map(Ye=>Ye.currentWriteId),x=zu(h,u,y);let U=x;const te=x.hash();for(let Ye=0;Ye<c.length;Ye++){const Gt=c[Ye];(0,Q.hu)(0===Gt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Gt.status=1,Gt.retryCount++;const zt=Fr(u,Gt.path);U=U.updateChild(zt,Gt.currentOutputSnapshotRaw)}const me=U.val(!0),Oe=u;h.server_.put(Oe.toString(),me,Ye=>{fu(h,"transaction put response",{path:Oe.toString(),status:Ye});let Gt=[];if("ok"===Ye){const zt=[];for(let nn=0;nn<c.length;nn++)c[nn].status=2,Gt=Gt.concat(aa(h.serverSyncTree_,c[nn].currentWriteId)),c[nn].onComplete&&zt.push(()=>c[nn].onComplete(null,!0,c[nn].currentOutputSnapshotResolved)),c[nn].unwatcher();q(h,Ou(h.transactionQueueTree_,u)),Wu(h,h.transactionQueueTree_),js(h.eventQueue_,u,Gt);for(let nn=0;nn<zt.length;nn++)Ui(zt[nn])}else{if("datastale"===Ye)for(let zt=0;zt<c.length;zt++)c[zt].status=3===c[zt].status?4:0;else{bi("transaction at "+Oe.toString()+" failed: "+Ye);for(let zt=0;zt<c.length;zt++)c[zt].status=4,c[zt].abortReason=Ye}eo(h,u)}},te)}(h,Ci(u),c)}else G(u)&&Je(u,c=>{Wu(h,c)})}function eo(h,u){const c=g(h,u),y=Ci(c);return function S(h,u,c){if(0===u.length)return;const y=[];let x=[];const te=u.filter(me=>0===me.status).map(me=>me.currentWriteId);for(let me=0;me<u.length;me++){const Oe=u[me],Ye=Fr(c,Oe.path);let zt,Gt=!1;if((0,Q.hu)(null!==Ye,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Oe.status)Gt=!0,zt=Oe.abortReason,x=x.concat(aa(h.serverSyncTree_,Oe.currentWriteId,!0));else if(0===Oe.status)if(Oe.retryCount>=25)Gt=!0,zt="maxretry",x=x.concat(aa(h.serverSyncTree_,Oe.currentWriteId,!0));else{const nn=zu(h,Oe.path,te);Oe.currentInputSnapshot=nn;const Jn=u[me].update(nn.val());if(void 0!==Jn){la("transaction failed: Data returned ",Jn,Oe.path);let Ti=fe(Jn);"object"==typeof Jn&&null!=Jn&&(0,Q.r3)(Jn,".priority")||(Ti=Ti.updatePriority(nn.getPriority()));const za=Oe.currentWriteId,Sl=sn(h),Su=Xo(Ti,nn,Sl);Oe.currentOutputSnapshotRaw=Ti,Oe.currentOutputSnapshotResolved=Su,Oe.currentWriteId=fl(h),te.splice(te.indexOf(za),1),x=x.concat(uo(h.serverSyncTree_,Oe.path,Su,Oe.currentWriteId,Oe.applyLocally)),x=x.concat(aa(h.serverSyncTree_,za,!0))}else Gt=!0,zt="nodata",x=x.concat(aa(h.serverSyncTree_,Oe.currentWriteId,!0))}js(h.eventQueue_,c,x),x=[],Gt&&(u[me].status=2,setTimeout(u[me].unwatcher,Math.floor(0)),u[me].onComplete&&y.push("nodata"===zt?()=>u[me].onComplete(null,!1,u[me].currentInputSnapshot):()=>u[me].onComplete(new Error(zt),!1,null)))}q(h,h.transactionQueueTree_);for(let me=0;me<y.length;me++)Ui(y[me]);Wu(h,h.transactionQueueTree_)}(h,E(h,c),y),y}function g(h,u){let c,y=h.transactionQueueTree_;for(c=en(u);null!==c&&void 0===he(y);)y=Ou(y,c),c=en(u=ui(u));return y}function E(h,u){const c=[];return O(h,u,c),c.sort((y,x)=>y.order-x.order),c}function O(h,u,c){const y=he(u);if(y)for(let x=0;x<y.length;x++)c.push(y[x]);Je(u,x=>{O(h,x,c)})}function q(h,u){const c=he(u);if(c){let y=0;for(let x=0;x<c.length;x++)2!==c[x].status&&(c[y]=c[x],y++);c.length=y,j(u,c.length>0?c:void 0)}Je(u,y=>{q(h,y)})}function ae(h,u){const c=Ci(g(h,u)),y=Ou(h.transactionQueueTree_,u);return function _n(h,u,c){let y=c?h:h.parent;for(;null!==y;){if(u(y))return!0;y=y.parent}}(y,x=>{Te(h,x)}),Te(h,y),Nt(y,x=>{Te(h,x)}),c}function Te(h,u){const c=he(u);if(c){const y=[];let x=[],U=-1;for(let te=0;te<c.length;te++)3===c[te].status||(1===c[te].status?((0,Q.hu)(U===te-1,"All SENT items should be at beginning of queue."),U=te,c[te].status=3,c[te].abortReason="set"):((0,Q.hu)(0===c[te].status,"Unexpected transaction status in abort"),c[te].unwatcher(),x=x.concat(aa(h.serverSyncTree_,c[te].currentWriteId,!0)),c[te].onComplete&&y.push(c[te].onComplete.bind(null,new Error("set"),!1,null))));-1===U?j(u,void 0):c.length=U+1,js(h.eventQueue_,Ci(u),x);for(let te=0;te<y.length;te++)Ui(y[te])}}const Ft=function(h,u){const c=tn(h),y=c.namespace;return"firebase.com"===c.domain&&Ei(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==c.domain&&Ei("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&bi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new mt(c.host,c.secure,y,"ws"===c.scheme||"wss"===c.scheme,u,"",y!==c.subdomain),path:new Ot(c.pathString)}},tn=function(h){let u="",c="",y="",x="",U="",te=!0,me="https",Oe=443;if("string"==typeof h){let Ye=h.indexOf("//");Ye>=0&&(me=h.substring(0,Ye-1),h=h.substring(Ye+2));let Gt=h.indexOf("/");-1===Gt&&(Gt=h.length);let zt=h.indexOf("?");-1===zt&&(zt=h.length),u=h.substring(0,Math.min(Gt,zt)),Gt<zt&&(x=function Fe(h){let u="";const c=h.split("/");for(let y=0;y<c.length;y++)if(c[y].length>0){let x=c[y];try{x=decodeURIComponent(x.replace(/\+/g," "))}catch{}u+="/"+x}return u}(h.substring(Gt,zt)));const nn=function at(h){const u={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const y=c.split("=");2===y.length?u[decodeURIComponent(y[0])]=decodeURIComponent(y[1]):bi(`Invalid query segment '${c}' in query '${h}'`)}return u}(h.substring(Math.min(h.length,zt)));Ye=u.indexOf(":"),Ye>=0?(te="https"===me||"wss"===me,Oe=parseInt(u.substring(Ye+1),10)):Ye=u.length;const Jn=u.slice(0,Ye);if("localhost"===Jn.toLowerCase())c="localhost";else if(Jn.split(".").length<=2)c=Jn;else{const Ti=u.indexOf(".");y=u.substring(0,Ti).toLowerCase(),c=u.substring(Ti+1),U=y}"ns"in nn&&(U=nn.ns)}return{host:u,port:Oe,domain:c,subdomain:y,secure:te,scheme:me,pathString:x,namespace:U}};class Xt{constructor(u,c,y,x){this.eventType=u,this.eventRegistration=c,this.snapshot=y,this.prevName=x}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Q.Pz)(this.snapshot.exportVal())}}class pi{constructor(u,c,y){this.eventRegistration=u,this.error=c,this.path=y}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class yi{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,Q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class Un{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new Q.BH;return ju(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){wa("OnDisconnect.remove",this._path);const u=new Q.BH;return zl(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){wa("OnDisconnect.set",this._path),So("OnDisconnect.set",u,this._path,!1);const c=new Q.BH;return zl(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){wa("OnDisconnect.setWithPriority",this._path),So("OnDisconnect.setWithPriority",u,this._path,!1),Hu("OnDisconnect.setWithPriority",c,!1);const y=new Q.BH;return function Ec(h,u,c,y,x){const U=fe(c,y);h.server_.onDisconnectPut(u.toString(),U.val(!0),(te,me)=>{"ok"===te&&Wi(h.onDisconnect_,u,U),vs(0,x,te,me)})}(this._repo,this._path,u,c,y.wrapCallback(()=>{})),y.promise}update(u){wa("OnDisconnect.update",this._path),rc("OnDisconnect.update",u,this._path,!1);const c=new Q.BH;return function $u(h,u,c,y){if((0,Q.xb)(c))return ln("onDisconnect().update() called with empty data.  Don't do anything."),void vs(0,y,"ok",void 0);h.server_.onDisconnectMerge(u.toString(),c,(x,U)=>{"ok"===x&&sr(c,(te,me)=>{const Oe=fe(me);Wi(h.onDisconnect_,vr(u,te),Oe)}),vs(0,y,x,U)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class ti{constructor(u,c,y,x){this._repo=u,this._path=c,this._queryParams=y,this._orderByCalled=x}get key(){return gi(this._path)?null:ar(this._path)}get ref(){return new hr(this._repo,this._path)}get _queryIdentifier(){const u=$e(this._queryParams),c=Yi(u);return"{}"===c?"default":c}get _queryObject(){return $e(this._queryParams)}isEqual(u){if(!((u=(0,Q.m9)(u))instanceof ti))return!1;const c=this._repo===u._repo,y=bo(this._path,u._path);return c&&y&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ro(h){let u="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(u+="/"+encodeURIComponent(String(h.pieces_[c])));return u||"/"}(this._path)}}function hi(h,u){if(!0===h._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function gr(h){let u=null,c=null;if(h.hasStart()&&(u=h.getIndexStartValue()),h.hasEnd()&&(c=h.getIndexEndValue()),h.getIndex()===lo){const y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",x="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Li)throw new Error(y);if("string"!=typeof u)throw new Error(x)}if(h.hasEnd()){if(h.getIndexEndName()!==vi)throw new Error(y);if("string"!=typeof c)throw new Error(x)}}else if(h.getIndex()===Er){if(null!=u&&!Ql(u)||null!=c&&!Ql(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Q.hu)(h.getIndex()instanceof Pt||h.getIndex()===Lr,"unknown index type."),null!=u&&"object"==typeof u||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ts(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class hr extends ti{constructor(u,c){super(u,c,new qo,!1)}get parent(){const u=as(this._path);return null===u?null:new hr(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class nr{constructor(u,c,y){this._node=u,this.ref=c,this._index=y}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new Ot(u),y=Ao(this.ref,u);return new nr(this._node.getChild(c),y,Er)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(y,x)=>u(new nr(x,Ao(this.ref,y),Er)))}hasChild(u){const c=new Ot(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Tl(h,u){return(h=(0,Q.m9)(h))._checkNotDeleted("ref"),void 0!==u?Ao(h._root,u):h._root}function Wo(h,u){(h=(0,Q.m9)(h))._checkNotDeleted("refFromURL");const c=Ft(u,h._repo.repoInfo_.nodeAdmin);sc("refFromURL",c);const y=c.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&y.host!==h._repo.repoInfo_.host&&Ei("refFromURL: Host name does not match the current database: (found "+y.host+" but expected "+h._repo.repoInfo_.host+")"),Tl(h,c.path.toString())}function Ao(h,u){return null===en((h=(0,Q.m9)(h))._path)?(c=u,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),du("child","path",c,!1)):du("child","path",u,!1),new hr(h._repo,vr(h._path,u));var c}function wu(h,u){h=(0,Q.m9)(h),wa("set",h._path),So("set",u,h._path,!1);const c=new Q.BH;return ru(h._repo,h._path,u,null,c.wrapCallback(()=>{})),c.promise}function Ku(h,u){rc("update",u,h._path,!1);const c=new Q.BH;return function Nu(h,u,c,y){fu(h,"update",{path:u.toString(),value:c});let x=!0;const U=sn(h),te={};if(sr(c,(me,Oe)=>{x=!1,te[me]=mu(vr(u,me),fe(Oe),h.serverSyncTree_,U)}),x)ln("update() called with empty data.  Don't do anything."),vs(0,y,"ok",void 0);else{const me=fl(h),Oe=function Yl(h,u,c,y){!function Hr(h,u,c,y){(0,Q.hu)(y>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:u,children:c,writeId:y,visible:!0}),h.visibleWrites=qr(h.visibleWrites,u,c),h.lastWriteId=y}(h.pendingWriteTree_,u,c,y);const x=wn.fromObject(c);return At(h,new ka({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,x))}(h.serverSyncTree_,u,te,me);Ru(h.eventQueue_,Oe),h.server_.merge(u.toString(),c,(Ye,Gt)=>{const zt="ok"===Ye;zt||bi("update at "+u+" failed: "+Ye);const nn=aa(h.serverSyncTree_,me,!zt),Jn=nn.length>0?eo(h,u):u;js(h.eventQueue_,Jn,nn),vs(0,y,Ye,Gt)}),sr(c,Ye=>{const Gt=ae(h,vr(u,Ye));eo(h,Gt)}),js(h.eventQueue_,u,[])}}(h._repo,h._path,u,c.wrapCallback(()=>{})),c.promise}function ac(h){h=(0,Q.m9)(h);const u=new yi(()=>{}),c=new Qn(u);return function hu(h,u,c){const y=function gt(h,u){const c=u._path;let y=null;h.syncPointTree_.foreachOnPath(c,(Ye,Gt)=>{const zt=Fr(Ye,c);y=y||jr(Gt,zt)});let x=h.syncPointTree_.get(c);x?y=y||jr(x,Zt()):(x=new pe,h.syncPointTree_=h.syncPointTree_.set(c,x));const U=null!=y,te=U?new Fa(y,!0,!1):null;return function Qa(h){return ce(h.viewCache_)}(ji(x,u,ko(h.pendingWriteTree_,u._path),U?te.getNode():Wn.EMPTY_NODE,U))}(h.serverSyncTree_,u);return null!=y?Promise.resolve(y):h.server_.get(u).then(x=>{const U=fe(x).withIndex(u._queryParams.getIndex());let te;if(de(h.serverSyncTree_,u,c,!0),u._queryParams.loadsAllData())te=es(h.serverSyncTree_,u._path,U);else{const me=di(h.serverSyncTree_,u);te=z(h.serverSyncTree_,u._path,U,me)}return js(h.eventQueue_,u._path,te),El(h.serverSyncTree_,u,c,null,!0),U},x=>(fu(h,"get for query "+(0,Q.Pz)(u)+" failed: "+x),Promise.reject(new Error(x))))}(h._repo,h,c).then(y=>new nr(y,new hr(h._repo,h._path),h._queryParams.getIndex()))}class Qn{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const y=c._queryParams.getIndex();return new Xt("value",this,new nr(u.snapshotNode,new hr(c._repo,c._path),y))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new pi(this,u,c):null}matches(u){return u instanceof Qn&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ri{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new pi(this,u,c):null}createEvent(u,c){(0,Q.hu)(null!=u.childName,"Child events should have a childName.");const y=Ao(new hr(c._repo,c._path),u.childName),x=c._queryParams.getIndex();return new Xt(u.type,this,new nr(u.snapshotNode,y,x),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof Ri&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Fi(h,u,c,y,x){let U;if("object"==typeof y&&(U=void 0,x=y),"function"==typeof y&&(U=y),x&&x.onlyOnce){const Oe=c,Ye=(Gt,zt)=>{Pu(h._repo,h,me),Oe(Gt,zt)};Ye.userCallback=c.userCallback,Ye.context=c.context,c=Ye}const te=new yi(c,U||void 0),me="value"===u?new Qn(te):new Ri(u,te);return function oc(h,u,c){let y;y=".info"===en(u._path)?de(h.infoSyncTree_,u,c):de(h.serverSyncTree_,u,c),_u(h.eventQueue_,u._path,y)}(h._repo,h,me),()=>Pu(h._repo,h,me)}function ns(h,u,c,y){return Fi(h,"value",u,c,y)}function Ma(h,u,c,y){return Fi(h,"child_added",u,c,y)}function Xl(h,u,c,y){return Fi(h,"child_changed",u,c,y)}function Ga(h,u,c,y){return Fi(h,"child_moved",u,c,y)}function Eu(h,u,c,y){return Fi(h,"child_removed",u,c,y)}function fo(h,u,c){let y=null;const x=c?new yi(c):null;"value"===u?y=new Qn(x):u&&(y=new Ri(u,x)),Pu(h._repo,h,y)}class Wl{}class Pd extends Wl{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){So("endAt",this._value,u._path,!0);const c=B(u._queryParams,this._value,this._key);if(ts(c),gr(c),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ti(u._repo,u._path,c,u._orderByCalled)}}class bu extends Wl{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){So("endBefore",this._value,u._path,!1);const c=function oe(h,u,c){let y,x;return h.index_===lo?("string"==typeof u&&(u=Bo(u)),x=B(h,u,c)):(y=null==c?Li:Bo(c),x=B(h,u,y)),x.endBeforeSet_=!0,x}(u._queryParams,this._value,this._key);if(ts(c),gr(c),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ti(u._repo,u._path,c,u._orderByCalled)}}class Iu extends Wl{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){So("startAt",this._value,u._path,!0);const c=qa(u._queryParams,this._value,this._key);if(ts(c),gr(c),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ti(u._repo,u._path,c,u._orderByCalled)}}class cf extends Wl{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){So("startAfter",this._value,u._path,!1);const c=function cl(h,u,c){let y;if(h.index_===lo)"string"==typeof u&&(u=el(u)),y=qa(h,u,c);else{let x;x=null==c?vi:el(c),y=qa(h,u,x)}return y.startAfterSet_=!0,y}(u._queryParams,this._value,this._key);if(ts(c),gr(c),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ti(u._repo,u._path,c,u._orderByCalled)}}class qu extends Wl{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ti(u._repo,u._path,function Ka(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="l",c}(u._queryParams,this._limit),u._orderByCalled)}}class bc extends Wl{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ti(u._repo,u._path,function kl(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="r",c}(u._queryParams,this._limit),u._orderByCalled)}}class Sp extends Wl{constructor(u){super(),this._path=u}_apply(u){hi(u,"orderByChild");const c=new Ot(this._path);if(gi(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const y=new Pt(c),x=W(u._queryParams,y);return gr(x),new ti(u._repo,u._path,x,!0)}}class Hc extends Wl{_apply(u){hi(u,"orderByKey");const c=W(u._queryParams,lo);return gr(c),new ti(u._repo,u._path,c,!0)}}class Ap extends Wl{_apply(u){hi(u,"orderByPriority");const c=W(u._queryParams,Er);return gr(c),new ti(u._repo,u._path,c,!0)}}class ch extends Wl{_apply(u){hi(u,"orderByValue");const c=W(u._queryParams,Lr);return gr(c),new ti(u._repo,u._path,c,!0)}}class hh extends Wl{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){if(So("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Pd(this._value,this._key)._apply(new Iu(this._value,this._key)._apply(u))}}function Cu(h,...u){let c=(0,Q.m9)(h);for(const y of u)c=y._apply(c);return c}(function Ne(h){(0,Q.hu)(!J,"__referenceConstructor has already been defined"),J=h})(hr),function Ul(h){(0,Q.hu)(!er,"__referenceConstructor has already been defined"),er=h}(hr);const Ic={};function xp(h,u,c,y,x){let U=y||h.options.databaseURL;void 0===U&&(h.options.projectId||Ei("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ln("Using default host for project ",h.options.projectId),U=`${h.options.projectId}-default-rtdb.firebaseio.com`);let Oe,Ye,te=Ft(U,x),me=te.repoInfo;typeof process<"u"&&process.env&&(Ye=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ye?(Oe=!0,U=`http://${Ye}?ns=${me.namespace}`,te=Ft(U,x),me=te.repoInfo):Oe=!te.repoInfo.secure;const Gt=x&&Oe?new qn(qn.OWNER):new gs(h.name,h.options,u);sc("Invalid Firebase Database URL",te),gi(te.path)||Ei("Database URL must point to the root of a Firebase Database (not including a child path).");const zt=function Mp(h,u,c,y){let x=Ic[u.name];x||(x={},Ic[u.name]=x);let U=x[h.toURLString()];return U&&Ei("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),U=new ue(h,false,c,y),x[h.toURLString()]=U,U}(me,h,Gt,new li(h.name,c));return new sm(zt,h)}class sm{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Se(h,u,c){if(h.stats_=Zn(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new xt(h.repoInfo_,(y,x,U,te)=>{kn(h,y,x,U,te)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>_i(h,!0),0);else{if(typeof c<"u"&&null!==c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Q.Pz)(c)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}h.persistentConnection_=new ls(h.repoInfo_,u,(y,x,U,te)=>{kn(h,y,x,U,te)},y=>{_i(h,y)},y=>{!function Cr(h,u){sr(u,(c,y)=>{Is(h,c,y)})}(h,y)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(y=>{h.server_.refreshAuthToken(y)}),h.appCheckProvider_.addTokenChangeListener(y=>{h.server_.refreshAppCheckToken(y.token)}),h.statsReporter_=function Pe(h,u){const c=h.toString();return Gn[c]||(Gn[c]=u()),Gn[c]}(h.repoInfo_,()=>new ga(h.stats_,h.server_)),h.infoData_=new Bt,h.infoSyncTree_=new wl({startListening:(y,x,U,te)=>{let me=[];const Oe=h.infoData_.getNode(y._path);return Oe.isEmpty()||(me=es(h.infoSyncTree_,y._path,Oe),setTimeout(()=>{te("ok")},0)),me},stopListening:()=>{}}),Is(h,"connected",!1),h.serverSyncTree_=new wl({startListening:(y,x,U,te)=>(h.server_.listen(y,U,x,(me,Oe)=>{const Ye=te(me,Oe);js(h.eventQueue_,y._path,Ye)}),[]),stopListening:(y,x)=>{h.server_.unlisten(y,x)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new hr(this._repo,Zt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function rm(h,u){const c=Ic[u];(!c||c[h.key]!==h)&&Ei(`Database ${u}(${h.repoInfo_}) has already been deleted.`),yu(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&Ei("Cannot call "+u+" on a deleted database.")}}function gh(){zs.IS_TRANSPORT_INITIALIZED&&bi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Tu(){gh(),ki.forceDisallow()}function kd(){gh(),Es.forceDisallow(),ki.forceAllow()}function Op(h,u){_t(h,u)}const od={".sv":"timestamp"};class Pp{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ls.prototype.simpleListen=function(h,u){this.sendRequest("q",{p:h},u)},ls.prototype.echo=function(h,u){this.sendRequest("echo",{d:h},u)},function yh(h){yt(De.SDK_VERSION),(0,De._registerComponent)(new nt.wA("database",(u,{instanceIdentifier:c})=>xp(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,De.registerVersion)(Ve,"0.13.5",h),(0,De.registerVersion)(Ve,"0.13.5","esm2017")}();const vh=new ft.Yd("@firebase/database-compat"),_f=function(h){vh.warn("FIREBASE WARNING: "+h)};class wh{constructor(u){this._delegate=u}cancel(u){(0,Q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Q.Wj)("OnDisconnect.cancel","onComplete",u,!0);const c=this._delegate.cancel();return u&&c.then(()=>u(null),y=>u(y)),c}remove(u){(0,Q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Q.Wj)("OnDisconnect.remove","onComplete",u,!0);const c=this._delegate.remove();return u&&c.then(()=>u(null),y=>u(y)),c}set(u,c){(0,Q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Q.Wj)("OnDisconnect.set","onComplete",c,!0);const y=this._delegate.set(u);return c&&y.then(()=>c(null),x=>c(x)),y}setWithPriority(u,c,y){(0,Q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Q.Wj)("OnDisconnect.setWithPriority","onComplete",y,!0);const x=this._delegate.setWithPriority(u,c);return y&&x.then(()=>y(null),U=>y(U)),x}update(u,c){if((0,Q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const x={};for(let U=0;U<u.length;++U)x[""+U]=u[U];u=x,_f("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Q.Wj)("OnDisconnect.update","onComplete",c,!0);const y=this._delegate.update(u);return c&&y.then(()=>c(null),x=>c(x)),y}}class vf{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return(0,Q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class lc{constructor(u,c){this._database=u,this._delegate=c}val(){return(0,Q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,Q.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),du("DataSnapshot.child","path",u,!1),new lc(this._database,this._delegate.child(u))}hasChild(u){return(0,Q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),du("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,Q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,Q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Q.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(c=>u(new lc(this._database,c)))}hasChildren(){return(0,Q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Q.Dv)("DataSnapshot.ref",0,0,arguments.length),new $s(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ms{constructor(u,c){this.database=u,this._delegate=c}on(u,c,y,x){var U;(0,Q.Dv)("Query.on",2,4,arguments.length),(0,Q.Wj)("Query.on","callback",c,!1);const te=Ms.getCancelAndContextArgs_("Query.on",y,x),me=(Ye,Gt)=>{c.call(te.context,new lc(this.database,Ye),Gt)};me.userCallback=c,me.context=te.context;const Oe=null===(U=te.cancel)||void 0===U?void 0:U.bind(te.context);switch(u){case"value":return ns(this._delegate,me,Oe),c;case"child_added":return Ma(this._delegate,me,Oe),c;case"child_removed":return Eu(this._delegate,me,Oe),c;case"child_changed":return Xl(this._delegate,me,Oe),c;case"child_moved":return Ga(this._delegate,me,Oe),c;default:throw new Error((0,Q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,c,y){if((0,Q.Dv)("Query.off",0,3,arguments.length),function(h,u,c){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,Q.Wj)("Query.off","callback",c,!0),(0,Q.lb)("Query.off","context",y,!0),c){const x=()=>{};x.userCallback=c,x.context=y,fo(this._delegate,u,x)}else fo(this._delegate,u)}get(){return ac(this._delegate).then(u=>new lc(this.database,u))}once(u,c,y,x){(0,Q.Dv)("Query.once",1,4,arguments.length),(0,Q.Wj)("Query.once","callback",c,!0);const U=Ms.getCancelAndContextArgs_("Query.once",y,x),te=new Q.BH,me=(Ye,Gt)=>{const zt=new lc(this.database,Ye);c&&c.call(U.context,zt,Gt),te.resolve(zt)};me.userCallback=c,me.context=U.context;const Oe=Ye=>{U.cancel&&U.cancel.call(U.context,Ye),te.reject(Ye)};switch(u){case"value":ns(this._delegate,me,Oe,{onlyOnce:!0});break;case"child_added":Ma(this._delegate,me,Oe,{onlyOnce:!0});break;case"child_removed":Eu(this._delegate,me,Oe,{onlyOnce:!0});break;case"child_changed":Xl(this._delegate,me,Oe,{onlyOnce:!0});break;case"child_moved":Ga(this._delegate,me,Oe,{onlyOnce:!0});break;default:throw new Error((0,Q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return te.promise}limitToFirst(u){return(0,Q.Dv)("Query.limitToFirst",1,1,arguments.length),new Ms(this.database,Cu(this._delegate,function hf(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new qu(h)}(u)))}limitToLast(u){return(0,Q.Dv)("Query.limitToLast",1,1,arguments.length),new Ms(this.database,Cu(this._delegate,function Bc(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new bc(h)}(u)))}orderByChild(u){return(0,Q.Dv)("Query.orderByChild",1,1,arguments.length),new Ms(this.database,Cu(this._delegate,function im(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return du("orderByChild","path",h,!1),new Sp(h)}(u)))}orderByKey(){return(0,Q.Dv)("Query.orderByKey",0,0,arguments.length),new Ms(this.database,Cu(this._delegate,function uh(){return new Hc}()))}orderByPriority(){return(0,Q.Dv)("Query.orderByPriority",0,0,arguments.length),new Ms(this.database,Cu(this._delegate,function ff(){return new Ap}()))}orderByValue(){return(0,Q.Dv)("Query.orderByValue",0,0,arguments.length),new Ms(this.database,Cu(this._delegate,function dh(){return new ch}()))}startAt(u=null,c){return(0,Q.Dv)("Query.startAt",0,2,arguments.length),new Ms(this.database,Cu(this._delegate,function Kl(h=null,u){return hl("startAt","key",u,!0),new Iu(h,u)}(u,c)))}startAfter(u=null,c){return(0,Q.Dv)("Query.startAfter",0,2,arguments.length),new Ms(this.database,Cu(this._delegate,function df(h,u){return hl("startAfter","key",u,!0),new cf(h,u)}(u,c)))}endAt(u=null,c){return(0,Q.Dv)("Query.endAt",0,2,arguments.length),new Ms(this.database,Cu(this._delegate,function rs(h,u){return hl("endAt","key",u,!0),new Pd(h,u)}(u,c)))}endBefore(u=null,c){return(0,Q.Dv)("Query.endBefore",0,2,arguments.length),new Ms(this.database,Cu(this._delegate,function Rl(h,u){return hl("endBefore","key",u,!0),new bu(h,u)}(u,c)))}equalTo(u,c){return(0,Q.Dv)("Query.equalTo",1,2,arguments.length),new Ms(this.database,Cu(this._delegate,function pf(h,u){return hl("equalTo","key",u,!0),new hh(h,u)}(u,c)))}toString(){return(0,Q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,Q.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof Ms))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,c,y){const x={cancel:void 0,context:void 0};if(c&&y)x.cancel=c,(0,Q.Wj)(u,"cancel",x.cancel,!0),x.context=y,(0,Q.lb)(u,"context",x.context,!0);else if(c)if("object"==typeof c&&null!==c)x.context=c;else{if("function"!=typeof c)throw new Error((0,Q.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");x.cancel=c}return x}get ref(){return new $s(this.database,new hr(this._delegate._repo,this._delegate._path))}}class $s extends Ms{constructor(u,c){super(u,new ti(c._repo,c._path,new qo,!1)),this.database=u,this._delegate=c}getKey(){return(0,Q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,Q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new $s(this.database,Ao(this._delegate,u))}getParent(){(0,Q.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new $s(this.database,u):null}getRoot(){return(0,Q.Dv)("Reference.root",0,0,arguments.length),new $s(this.database,this._delegate.root)}set(u,c){(0,Q.Dv)("Reference.set",1,2,arguments.length),(0,Q.Wj)("Reference.set","onComplete",c,!0);const y=wu(this._delegate,u);return c&&y.then(()=>c(null),x=>c(x)),y}update(u,c){if((0,Q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const x={};for(let U=0;U<u.length;++U)x[""+U]=u[U];u=x,_f("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wa("Reference.update",this._delegate._path),(0,Q.Wj)("Reference.update","onComplete",c,!0);const y=Ku(this._delegate,u);return c&&y.then(()=>c(null),x=>c(x)),y}setWithPriority(u,c,y){(0,Q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Q.Wj)("Reference.setWithPriority","onComplete",y,!0);const x=function su(h,u,c){if(wa("setWithPriority",h._path),So("setWithPriority",u,h._path,!1),Hu("setWithPriority",c,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const y=new Q.BH;return ru(h._repo,h._path,u,c,y.wrapCallback(()=>{})),y.promise}(this._delegate,u,c);return y&&x.then(()=>y(null),U=>y(U)),x}remove(u){(0,Q.Dv)("Reference.remove",0,1,arguments.length),(0,Q.Wj)("Reference.remove","onComplete",u,!0);const c=function vu(h){return wa("remove",h._path),wu(h,null)}(this._delegate);return u&&c.then(()=>u(null),y=>u(y)),c}transaction(u,c,y){(0,Q.Dv)("Reference.transaction",1,3,arguments.length),(0,Q.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,Q.Wj)("Reference.transaction","onComplete",c,!0),function(h,u,c,y){if(void 0!==c&&"boolean"!=typeof c)throw new Error((0,Q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,y);const x=function mf(h,u,c){var y;if(h=(0,Q.m9)(h),wa("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const x=null===(y=c?.applyLocally)||void 0===y||y,U=new Q.BH,me=ns(h,()=>{});return function Gu(h,u,c,y,x,U){fu(h,"transaction on "+u);const te={path:u,update:c,onComplete:y,status:null,order:ci(),applyLocally:U,retryCount:0,unwatcher:x,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},me=zu(h,u,void 0);te.currentInputSnapshot=me;const Oe=te.update(me.val());if(void 0===Oe)te.unwatcher(),te.currentOutputSnapshotRaw=null,te.currentOutputSnapshotResolved=null,te.onComplete&&te.onComplete(null,!1,te.currentInputSnapshot);else{la("transaction failed: Data returned ",Oe,te.path),te.status=0;const Ye=Ou(h.transactionQueueTree_,u),Gt=he(Ye)||[];let zt;Gt.push(te),j(Ye,Gt),"object"==typeof Oe&&null!==Oe&&(0,Q.r3)(Oe,".priority")?(zt=(0,Q.DV)(Oe,".priority"),(0,Q.hu)(Ql(zt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):zt=(He(h.serverSyncTree_,u)||Wn.EMPTY_NODE).getPriority().val();const nn=sn(h),Jn=fe(Oe,zt),Ti=Xo(Jn,me,nn);te.currentOutputSnapshotRaw=Jn,te.currentOutputSnapshotResolved=Ti,te.currentWriteId=fl(h);const Zr=uo(h.serverSyncTree_,u,Ti,te.currentWriteId,te.applyLocally);js(h.eventQueue_,u,Zr),Wu(h,h.transactionQueueTree_)}}(h._repo,h._path,u,(Oe,Ye,Gt)=>{let zt=null;Oe?U.reject(Oe):(zt=new nr(Gt,new hr(h._repo,h._path),Er),U.resolve(new Pp(Ye,zt)))},me,x),U.promise}(this._delegate,u,{applyLocally:y}).then(U=>new vf(U.committed,new lc(this.database,U.snapshot)));return c&&x.then(U=>c(null,U.committed,U.snapshot),U=>c(U,!1,null)),x}setPriority(u,c){(0,Q.Dv)("Reference.setPriority",1,2,arguments.length),(0,Q.Wj)("Reference.setPriority","onComplete",c,!0);const y=function Jl(h,u){h=(0,Q.m9)(h),wa("setPriority",h._path),Hu("setPriority",u,!1);const c=new Q.BH;return ru(h._repo,vr(h._path,".priority"),u,null,c.wrapCallback(()=>{})),c.promise}(this._delegate,u);return c&&y.then(()=>c(null),x=>c(x)),y}push(u,c){(0,Q.Dv)("Reference.push",0,2,arguments.length),(0,Q.Wj)("Reference.push","onComplete",c,!0);const y=function xi(h,u){h=(0,Q.m9)(h),wa("push",h._path),So("push",u,h._path,!0);const c=Tt(h._repo),y=fa(c),x=Ao(h,y),U=Ao(h,y);let te;return te=null!=u?wu(U,u).then(()=>U):Promise.resolve(U),x.then=te.then.bind(te),x.catch=te.then.bind(te,void 0),x}(this._delegate,u),x=y.then(te=>new $s(this.database,te));c&&x.then(()=>c(null),te=>c(te));const U=new $s(this.database,y);return U.then=x.then.bind(x),U.catch=x.catch.bind(x,void 0),U}onDisconnect(){return wa("Reference.onDisconnect",this._delegate._path),new wh(new Un(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uc{constructor(u,c){this._delegate=u,this.app=c,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Tu,forceLongPolling:kd}}useEmulator(u,c,y={}){!function mh(h,u,c,y={}){(h=(0,Q.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&Ei("Cannot call useEmulator() after instance has already been initialized.");const x=h._repoInternal;let U;if(x.repoInfo_.nodeAdmin)y.mockUserToken&&Ei('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),U=new qn(qn.OWNER);else if(y.mockUserToken){const te="string"==typeof y.mockUserToken?y.mockUserToken:(0,Q.Sg)(y.mockUserToken,h.app.options.projectId);U=new qn(te)}!function ph(h,u,c,y){h.repoInfo_=new mt(`${u}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams),y&&(h.authTokenProvider_=y)}(x,u,c,U)}(this._delegate,u,c,y)}ref(u){if((0,Q.Dv)("database.ref",0,1,arguments.length),u instanceof $s){const c=Wo(this._delegate,u.toString());return new $s(this,c)}{const c=Tl(this._delegate,u);return new $s(this,c)}}refFromURL(u){(0,Q.Dv)("database.refFromURL",1,1,arguments.length);const y=Wo(this._delegate,u);return new $s(this,y)}goOffline(){return(0,Q.Dv)("database.goOffline",0,0,arguments.length),function gf(h){(h=(0,Q.m9)(h))._checkNotDeleted("goOffline"),yu(h._repo)}(this._delegate)}goOnline(){return(0,Q.Dv)("database.goOnline",0,0,arguments.length),function _h(h){(h=(0,Q.m9)(h))._checkNotDeleted("goOnline"),function sd(h){h.persistentConnection_&&h.persistentConnection_.resume(b)}(h._repo)}(this._delegate)}}uc.ServerValue={TIMESTAMP:function Rp(){return od}(),increment:h=>function Np(h){return{".sv":{increment:h}}}(h)};var pl=Object.freeze({__proto__:null,initStandalone:function ad({app:h,url:u,version:c,customAuthImpl:y,namespace:x,nodeAdmin:U=!1}){yt(c);const te=new nt.zt("auth-internal",new nt.H0("database-standalone"));return te.setComponent(new nt.wA("auth-internal",()=>y,"PRIVATE")),{instance:new uc(xp(h,te,void 0,u,U),h),namespace:x}}});const pu=uc.ServerValue;!function Ld(h){h.INTERNAL.registerComponent(new nt.wA("database-compat",(u,{instanceIdentifier:c})=>{const y=u.getProvider("app-compat").getImmediate(),x=u.getProvider("database").getImmediate({identifier:c});return new uc(x,y)},"PUBLIC").setServiceProps({Reference:$s,Query:Ms,Database:uc,DataSnapshot:lc,enableLogging:Op,INTERNAL:pl,ServerValue:pu}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.2.5")}(ve.Z);var cc=K(1205),wf=K(440),ld=K(127);function hc(h){return null==h}function Tc(h){return"function"==typeof h.set}function Eh(h,u){return Tc(u)?u:h.ref(u)}function Vd(h,u){if(function Cc(h){return"string"==typeof h}(h))return u.stringCase();if(Tc(h))return u.firebaseCase();if(function dc(h){return"function"==typeof h.exportVal}(h))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function Dc(h,u,c="on",y=a.z){return new re.y(x=>{let U=null;return U=h[c](u,(te,me)=>{y.schedule(()=>{x.next({snapshot:te,prevKey:me})}),"once"===c&&y.schedule(()=>x.complete())},te=>{y.schedule(()=>x.error(te))}),"on"===c?{unsubscribe(){null!=U&&h.off(u,U)}}:{unsubscribe(){}}}).pipe((0,Ae.U)(x=>{const{snapshot:U,prevKey:te}=x;let me=null;return U.exists()&&(me=U.key),{type:u,payload:U,prevKey:te,key:me}}),(0,Re.B)())}function bh(h,u){const c=h.length;for(let y=0;y<c;y++)if(h[y].payload.key===u)return y;return-1}function ku(h,u){const{payload:c,prevKey:y,key:x}=u,U=bh(h,x),te=function $c(h,u){if(hc(u))return 0;{const c=bh(h,u);return-1===c?h.length:c+1}}(h,y);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let me=null;u.payload.forEach(Oe=>{const Ye={payload:Oe,type:"value",prevKey:me,key:Oe.key};return me=Oe.key,h=[...h,Ye],!1})}return h;case"child_added":if(U>-1){const me=h[U-1];(me&&me.key||null)!==y&&(h=h.filter(Oe=>Oe.payload.key!==c.key)).splice(te,0,u)}else{if(null==y)return[u,...h];(h=h.slice()).splice(te,0,u)}return h;case"child_removed":return h.filter(me=>me.payload.key!==c.key);case"child_changed":return h.map(me=>me.payload.key===x?u:me);case"child_moved":if(U>-1){const me=h.splice(U,1)[0];return(h=h.slice()).splice(te,0,me),h}return h;default:return h}}function Ih(h){return(hc(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function ud(h,u,c){return function Ef(h,u,c){return Dc(h,"value","once",c).pipe((0,xe.w)(y=>{const x=[(0,Ee.of)(y)];return u.forEach(U=>x.push(Dc(h,U,"on",c))),(0,We.T)(...x).pipe((0,tt.R)(ku,[]))}),(0,Me.x)())}(h,u=Ih(u),c)}function cd(h,u,c){const y=(u=Ih(u)).map(x=>Dc(h,x,"on",c));return(0,We.T)(...y)}function Du(h,u){return function(y,x){return Vd(y,{stringCase:()=>h.child(y)[u](x),firebaseCase:()=>y[u](x),snapshotCase:()=>y.ref[u](x)})}}function Ch(h){return function(c){return c?Vd(c,{stringCase:()=>h.child(c).remove(),firebaseCase:()=>c.remove(),snapshotCase:()=>c.ref.remove()}):h.remove()}}function zc(h,u){return function(){return Dc(h,"value","on",u)}}const Sc=new m.OlP("angularfire2.realtimeDatabaseURL"),Wc=new m.OlP("angularfire2.database.use-emulator");let If=(()=>{class h{constructor(c,y,x,U,te,me,Oe,Ye,Gt,zt,nn,Jn,Ti,Zr,za){this.schedulers=me;const Sl=Oe,Su=(0,qt.on)(c,te,y);Ye&&(0,cc.nw)(Su,te,Gt,nn,Jn,Ti,zt,Zr),this.database=(0,qt.cc)(`${Su.name}.database.${x}`,"AngularFireDatabase",Su.name,()=>{const Au=te.runOutsideAngular(()=>Su.database(x||void 0));return Sl&&Au.useEmulator(...Sl),Au},[Sl])}list(c,y){const x=this.schedulers.ngZone.runOutsideAngular(()=>Eh(this.database,c));let U=x;return y&&(U=y(x)),function Th(h,u){const c=u.schedulers.outsideAngular,y=u.schedulers.ngZone.run(()=>h.ref);return{query:h,update:Du(y,"update"),set:Du(y,"set"),push:x=>y.push(x),remove:Ch(y),snapshotChanges:x=>ud(h,x,c).pipe(rt.iC),stateChanges:x=>cd(h,x,c).pipe(rt.iC),auditTrail:x=>function Gc(h,u,c){return function Vp(h,u,c){return function bf(h,u){return Dc(h,"value","on",u).pipe((0,Ae.U)(c=>{let y;return c.payload.forEach(x=>(y=x.key,!1)),{data:c,lastKeyToLoad:y}}))}(h,c).pipe(function Dt(...h){const u=(0,Wt.jO)(h);return(0,Ie.e)((c,y)=>{const x=h.length,U=new Array(x);let te=h.map(()=>!1),me=!1;for(let Oe=0;Oe<x;Oe++)(0,Mt.Xf)(h[Oe]).subscribe((0,Ge.x)(y,Ye=>{U[Oe]=Ye,!me&&!te[Oe]&&(te[Oe]=!0,(me=te.every(ct.y))&&(te=null))},wt.Z));c.subscribe((0,Ge.x)(y,Oe=>{if(me){const Ye=[Oe,...U];y.next(u?u(...Ye):Ye)}}))})}(u),(0,Ae.U)(([x,U])=>{const te=x.lastKeyToLoad,me=U.map(Oe=>Oe.key);return{actions:U,lastKeyToLoad:te,loadedKeys:me}}),function vt(h){return(0,Ie.e)((u,c)=>{let y=!1,x=0;u.subscribe((0,Ge.x)(c,U=>(y||(y=!h(U,x++)))&&c.next(U)))})}(x=>-1===x.loadedKeys.indexOf(x.lastKeyToLoad)),(0,Ae.U)(x=>x.actions))}(h,cd(h,u).pipe((0,tt.R)((x,U)=>[...x,U],[])),c)}(h,x,c).pipe(rt.iC),valueChanges:(x,U)=>ud(h,x,c).pipe((0,Ae.U)(me=>me.map(Oe=>U&&U.idField?Object.assign(Object.assign({},Oe.payload.val()),{[U.idField]:Oe.key}):Oe.payload.val())),rt.iC)}}(U,this)}object(c){return function fc(h,u){return{query:h,snapshotChanges:()=>zc(h,u.schedulers.outsideAngular)().pipe(rt.iC),update:c=>h.ref.update(c),set:c=>h.ref.set(c),remove:()=>h.ref.remove(),valueChanges:()=>zc(h,u.schedulers.outsideAngular)().pipe(rt.iC,(0,Ae.U)(y=>y.payload.exists()?y.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Eh(this.database,c)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(c){return new(c||h)(m.LFG(qt.Dh),m.LFG(qt.xv,8),m.LFG(Sc,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(rt.HU),m.LFG(Wc,8),m.LFG(cc.zQ,8),m.LFG(cc.Qv,8),m.LFG(cc.L6,8),m.LFG(cc._Q,8),m.LFG(cc.rT,8),m.LFG(cc.lh,8),m.LFG(cc.f7,8),m.LFG(wf.nm,8))},h.\u0275prov=m.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),Up=(()=>{class h{constructor(){ld.Z.registerVersion("angularfire",rt.q4.full,"rtdb-compat")}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=m.oAB({type:h}),h.\u0275inj=m.cJS({providers:[If]}),h})()},7407:(In,Et,K)=>{K.d(Et,{ST:()=>sf,yb:()=>Xa});var m=K(4650),a=K(4986),re=K(9751),Ee=K(8996),We=K(9646),Ae=K(5813),Re=K(8675),xe=K(4482),tt=K(5403);function Me(){return(0,xe.e)((r,e)=>{let t,o=!1;r.subscribe((0,tt.x)(e,d=>{const _=t;t=d,o&&e.next([_,d]),o=!0}))})}var Q,Ie=K(4004),Ge=K(5026),Mt=K(1884),ct=K(9300),wt=K(2011),Wt=K(6895),vt=(K(5881),K(3942)),rt=K(5861),qt=K(9681),Be=K(4859),ve=K(1877),nt=K(2090),Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},De={},ft=ft||{},Ve=Qe||self;function it(){}function bt(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function yt(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var on="closure_uid_"+(1e9*Math.random()>>>0),pn=0;function On(r,e,t){return r.call.apply(r.bind,arguments)}function Nn(r,e,t){if(!r)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),r.apply(e,d)}}return function(){return r.apply(e,arguments)}}function $t(r,e,t){return($t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?On:Nn).apply(null,arguments)}function ci(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),r.apply(this,o)}}function Bn(r,e){function t(){}t.prototype=e.prototype,r.Z=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.Vb=function(o,d,_){for(var I=Array(arguments.length-2),k=2;k<arguments.length;k++)I[k-2]=arguments[k];return e.prototype[d].apply(o,I)}}function St(){this.s=this.s,this.o=this.o}var Ue={};St.prototype.s=!1,St.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var r=function Yt(r){return Object.prototype.hasOwnProperty.call(r,on)&&r[on]||(r[on]=++pn)}(this);delete Ue[r]}},St.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _t=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1},ln=Array.prototype.forEach?function(r,e,t){Array.prototype.forEach.call(r,e,t)}:function(r,e,t){const o=r.length,d="string"==typeof r?r.split(""):r;for(let _=0;_<o;_++)_ in d&&e.call(t,d[_],_,r)};function Gi(r){return Array.prototype.concat.apply([],arguments)}function Ei(r){const e=r.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=r[o];return t}return[]}function bi(r){return/^[\s\xa0]*$/.test(r)}var Li,zi=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function ai(r,e){return-1!=r.indexOf(e)}function Hi(r,e){return r<e?-1:r>e?1:0}e:{var vi=Ve.navigator;if(vi){var Qt=vi.userAgent;if(Qt){Li=Qt;break e}}Li=""}function Ni(r,e,t){for(const o in r)e.call(t,r[o],o,r)}function Vi(r){const e={};for(const t in r)e[t]=r[t];return e}var Yi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kr(r,e){let t,o;for(let d=1;d<arguments.length;d++){for(t in o=arguments[d],o)r[t]=o[t];for(let _=0;_<Yi.length;_++)t=Yi[_],Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}}function sr(r){return sr[" "](r),r}sr[" "]=it;var Ui,r,_r=ai(Li,"Opera"),Qi=ai(Li,"Trident")||ai(Li,"MSIE"),zn=ai(Li,"Edge"),$n=zn||Qi,fi=ai(Li,"Gecko")&&!(ai(Li.toLowerCase(),"webkit")&&!ai(Li,"Edge"))&&!(ai(Li,"Trident")||ai(Li,"MSIE"))&&!ai(Li,"Edge"),Dr=ai(Li.toLowerCase(),"webkit")&&!ai(Li,"Edge");function An(){var r=Ve.document;return r?r.documentMode:void 0}e:{var ii="",or=(r=Li,fi?/rv:([^\);]+)(\)|;)/.exec(r):zn?/Edge\/([\d\.]+)/.exec(r):Qi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Dr?/WebKit\/(\S+)/.exec(r):_r?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(or&&(ii=or?or[1]:""),Qi){var li=An();if(null!=li&&li>parseFloat(ii)){Ui=String(li);break e}}Ui=ii}var gs={};var je=Ve.document&&Qi&&(An()||parseInt(Ui,10))||void 0,et=function(){if(!Ve.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Ve.addEventListener("test",it,e),Ve.removeEventListener("test",it,e)}catch{}return r}();function qe(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}function Kt(r,e){if(qe.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,o=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(fi){e:{try{sr(e.nodeName);var d=!0;break e}catch{}d=!1}d||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:fn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Kt.Z.h.call(this)}}qe.prototype.h=function(){this.defaultPrevented=!0},Bn(Kt,qe);var fn={2:"touch",3:"pen",4:"mouse"};Kt.prototype.h=function(){Kt.Z.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var xn="closure_listenable_"+(1e6*Math.random()|0),Bi=0;function Ji(r,e,t,o,d){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=d,this.key=++Bi,this.ca=this.fa=!1}function kr(r){r.ca=!0,r.listener=null,r.proxy=null,r.src=null,r.ia=null}function mt(r){this.src=r,this.g={},this.h=0}function ze(r,e){var t=e.type;if(t in r.g){var _,o=r.g[t],d=_t(o,e);(_=0<=d)&&Array.prototype.splice.call(o,d,1),_&&(kr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Xe(r,e,t,o){for(var d=0;d<r.length;++d){var _=r[d];if(!_.ca&&_.listener==e&&_.capture==!!t&&_.ia==o)return d}return-1}mt.prototype.add=function(r,e,t,o,d){var _=r.toString();(r=this.g[_])||(r=this.g[_]=[],this.h++);var I=Xe(r,e,o,d);return-1<I?(e=r[I],t||(e.fa=!1)):((e=new Ji(e,this.src,_,!!o,d)).fa=t,r.push(e)),e};var jt="closure_lm_"+(1e6*Math.random()|0),gn={};function Gn(r,e,t,o,d){if(o&&o.once)return Le(r,e,t,o,d);if(Array.isArray(e)){for(var _=0;_<e.length;_++)Gn(r,e[_],t,o,d);return null}return t=dr(t),r&&r[xn]?r.N(e,t,yt(o)?!!o.capture:!!o,d):Zn(r,e,t,!1,o,d)}function Zn(r,e,t,o,d,_){if(!e)throw Error("Invalid event type");var I=yt(d)?!!d.capture:!!d,k=wi(r);if(k||(r[jt]=k=new mt(r)),(t=k.add(e,t,o,I,_)).proxy)return t;if(o=function Pe(){var e=vn;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=o,o.src=r,o.listener=t,r.addEventListener)et||(d=I),void 0===d&&(d=!1),r.addEventListener(e.toString(),o,d);else if(r.attachEvent)r.attachEvent(Ct(e.toString()),o);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(o)}return t}function Le(r,e,t,o,d){if(Array.isArray(e)){for(var _=0;_<e.length;_++)Le(r,e[_],t,o,d);return null}return t=dr(t),r&&r[xn]?r.O(e,t,yt(o)?!!o.capture:!!o,d):Zn(r,e,t,!0,o,d)}function Ce(r,e,t,o,d){if(Array.isArray(e))for(var _=0;_<e.length;_++)Ce(r,e[_],t,o,d);else o=yt(o)?!!o.capture:!!o,t=dr(t),r&&r[xn]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Xe(_=r.g[e],t,o,d))&&(kr(_[t]),Array.prototype.splice.call(_,t,1),0==_.length&&(delete r.g[e],r.h--))):r&&(r=wi(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Xe(e,t,o,d)),(t=-1<r?e[r]:null)&&dt(t))}function dt(r){if("number"!=typeof r&&r&&!r.ca){var e=r.src;if(e&&e[xn])ze(e.i,r);else{var t=r.type,o=r.proxy;e.removeEventListener?e.removeEventListener(t,o,r.capture):e.detachEvent?e.detachEvent(Ct(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=wi(e))?(ze(t,r),0==t.h&&(t.src=null,e[jt]=null)):kr(r)}}}function Ct(r){return r in gn?gn[r]:gn[r]="on"+r}function vn(r,e){if(r.ca)r=!0;else{e=new Kt(e,this);var t=r.listener,o=r.ia||r.src;r.fa&&dt(r),r=t.call(o,e)}return r}function wi(r){return(r=r[jt])instanceof mt?r:null}var Di="__closure_events_fn_"+(1e9*Math.random()>>>0);function dr(r){return"function"==typeof r?r:(r[Di]||(r[Di]=function(e){return r.handleEvent(e)}),r[Di])}function yr(){St.call(this),this.i=new mt(this),this.P=this,this.I=null}function bn(r,e){var t,o=r.I;if(o)for(t=[];o;o=o.I)t.push(o);if(r=r.P,o=e.type||e,"string"==typeof e)e=new qe(e,r);else if(e instanceof qe)e.target=e.target||r;else{var d=e;Kr(e=new qe(o,r),d)}if(d=!0,t)for(var _=t.length-1;0<=_;_--){var I=e.g=t[_];d=Ns(I,o,!0,e)&&d}if(d=Ns(I=e.g=r,o,!0,e)&&d,d=Ns(I,o,!1,e)&&d,t)for(_=0;_<t.length;_++)d=Ns(I=e.g=t[_],o,!1,e)&&d}function Ns(r,e,t,o){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,_=0;_<e.length;++_){var I=e[_];if(I&&!I.ca&&I.capture==t){var k=I.listener,ne=I.ia||I.src;I.fa&&ze(r.i,I),d=!1!==k.call(ne,o)&&d}}return d&&!o.defaultPrevented}Bn(yr,St),yr.prototype[xn]=!0,yr.prototype.removeEventListener=function(r,e,t,o){Ce(this,r,e,t,o)},yr.prototype.M=function(){if(yr.Z.M.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],o=0;o<t.length;o++)kr(t[o]);delete r.g[e],r.h--}}this.I=null},yr.prototype.N=function(r,e,t,o){return this.i.add(String(r),e,!1,t,o)},yr.prototype.O=function(r,e,t,o){return this.i.add(String(r),e,!0,t,o)};var ws=Ve.JSON.stringify;function na(){var r=ba;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var ki,Ar=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new ss,r=>r.reset());class ss{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function no(r){Ve.setTimeout(()=>{throw r},0)}function Ps(r,e){ki||function po(){var r=Ve.Promise.resolve(void 0);ki=function(){r.then(ks)}}(),Xi||(ki(),Xi=!0),ba.add(r,e)}var Xi=!1,ba=new class to{constructor(){this.h=this.g=null}add(e,t){const o=Ar.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function ks(){for(var r;r=na();){try{r.h.call(r.g)}catch(t){no(t)}var e=Ar;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Xi=!1}function Es(r,e){yr.call(this),this.h=r||1,this.g=e||Ve,this.j=$t(this.kb,this),this.l=Date.now()}function zs(r){r.da=!1,r.S&&(r.g.clearTimeout(r.S),r.S=null)}function Ts(r,e,t){if("function"==typeof r)t&&(r=$t(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=$t(r.handleEvent,r)}return 2147483647<Number(e)?-1:Ve.setTimeout(r,e||0)}function Ws(r){r.g=Ts(()=>{r.g=null,r.i&&(r.i=!1,Ws(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Bn(Es,yr),(Q=Es.prototype).da=!1,Q.S=null,Q.kb=function(){if(this.da){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-r):(this.S&&(this.g.clearTimeout(this.S),this.S=null),bn(this,"tick"),this.da&&(zs(this),this.start()))}},Q.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Q.M=function(){Es.Z.M.call(this),zs(this),delete this.g};class Ds extends St{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ws(this)}M(){super.M(),this.g&&(Ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Or(r){St.call(this),this.h=r,this.g={}}Bn(Or,St);var Mo=[];function qi(r,e,t,o){Array.isArray(t)||(t&&(Mo[0]=t.toString()),t=Mo);for(var d=0;d<t.length;d++){var _=Gn(e,t[d],o||r.handleEvent,!1,r.h||r);if(!_)break;r.g[_.key]=_}}function Ur(r){Ni(r.g,function(e,t){this.g.hasOwnProperty(t)&&dt(e)},r),r.g={}}function Oo(){this.g=!0}function os(r,e,t,o){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ll(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var o=t[r];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var _=d[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var I=1;I<d.length;I++)d[I]=""}}}return ws(t)}catch{return e}}(r,t)+(o?" "+o:"")})}Or.prototype.M=function(){Or.Z.M.call(this),Ur(this)},Or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Oo.prototype.Aa=function(){this.g=!1},Oo.prototype.info=function(){};var Ro={},ia=null;function io(){return ia=ia||new yr}function Ks(r){qe.call(this,Ro.Ma,r)}function pt(r){const e=io();bn(e,new Ks(e,r))}function ut(r,e){qe.call(this,Ro.STAT_EVENT,r),this.stat=e}function It(r){const e=io();bn(e,new ut(e,r))}function Ot(r,e){qe.call(this,Ro.Na,r),this.size=e}function Zt(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Ve.setTimeout(function(){r()},e)}Ro.Ma="serverreachability",Bn(Ks,qe),Ro.STAT_EVENT="statevent",Bn(ut,qe),Ro.Na="timingevent",Bn(Ot,qe);var en={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},si={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ui(){}function ro(){}ui.prototype.h=null;var gi,Fs={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function as(){qe.call(this,"d")}function vr(){qe.call(this,"c")}function Fr(){}function Eo(r,e,t,o){this.l=r,this.j=e,this.m=t,this.X=o||1,this.V=new Or(this),this.P=wr,this.W=new Es(r=$n?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bo}function bo(){this.i=null,this.g="",this.h=!1}Bn(as,qe),Bn(vr,qe),Bn(Fr,ui),Fr.prototype.g=function(){return new XMLHttpRequest},Fr.prototype.i=function(){return{}},gi=new Fr;var wr=45e3,qs={},so={};function Ra(r,e,t){r.K=1,r.v=Vo(_o(e)),r.s=t,r.U=!0,No(r,null)}function No(r,e){r.F=Date.now(),Ca(r),r.A=_o(r.v);var t=r.A,o=r.X;Array.isArray(o)||(o=[String(o)]),Zs(t.h,"t",o),r.C=0,t=r.l.H,r.h=new bo,r.g=L(r.l,t?e:null,!r.s),0<r.O&&(r.L=new Ds($t(r.Ia,r,r.g),r.O)),qi(r.V,r.g,"readystatechange",r.gb),e=r.H?Vi(r.H):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ea(r.A,r.u,r.s,e)):(r.u="GET",r.g.ea(r.A,r.u,null,e)),pt(1),function Ia(r,e,t,o,d,_){r.info(function(){if(r.g)if(_)for(var I="",k=_.split("&"),ne=0;ne<k.length;ne++){var le=k[ne].split("=");if(1<le.length){var be=le[0];le=le[1];var st=be.split("_");I=2<=st.length&&"type"==st[1]?I+(be+"=")+le+"&":I+(be+"=redacted&")}}else I=null;else I=_;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+t+"\n"+I})}(r.j,r.u,r.A,r.m,r.X,r.s)}function Yr(r){return!!r.g&&"GET"==r.u&&2!=r.K&&r.l.Ba}function Na(r,e,t){let d,o=!0;for(;!r.I&&r.C<t.length;){if(d=oo(r,t),d==so){4==e&&(r.o=4,It(14),o=!1),os(r.j,r.m,null,"[Incomplete Response]");break}if(d==qs){r.o=4,It(15),os(r.j,r.m,t,"[Invalid Chunk]"),o=!1;break}os(r.j,r.m,d,null),Jr(r,d)}Yr(r)&&d!=so&&d!=qs&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,It(16),o=!1),r.i=r.i&&o,o?0<t.length&&!r.aa&&(r.aa=!0,(e=r.l).g==r&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zo(e),e.L=!0,It(11))):(os(r.j,r.m,t,"[Invalid Chunked Response]"),Io(r),Br(r))}function oo(r,e){var t=r.C,o=e.indexOf("\n",t);return-1==o?so:(t=Number(e.substring(t,o)),isNaN(t)?qs:(o+=1)+t>e.length?so:(e=e.substr(o,t),r.C=o+t,e))}function Ca(r){r.Y=Date.now()+r.P,Qr(r,r.P)}function Qr(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Zt($t(r.eb,r),e)}function ao(r){r.B&&(Ve.clearTimeout(r.B),r.B=null)}function Br(r){0==r.l.G||r.I||ka(r.l,r)}function Io(r){ao(r);var e=r.L;e&&"function"==typeof e.na&&e.na(),r.L=null,zs(r.W),Ur(r.V),r.g&&(e=r.g,r.g=null,e.abort(),e.na())}function Jr(r,e){try{var t=r.l;if(0!=t.G&&(t.g==r||Fn(t.i,r)))if(t.I=r.N,!r.J&&Fn(t.i,r)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<r.F))break e;Vr(t),Ki(t)}Qs(t),It(18)}}else t.ta=d[1],0<t.ta-t.U&&37500>d[2]&&t.N&&0==t.A&&!t.v&&(t.v=Zt($t(t.ab,t),6e3));if(1>=Pt(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else jo(t,11)}else if((r.J||t.g==r)&&Vr(t),!bi(e))for(d=t.Ca.g.parse(e),e=0;e<d.length;e++){let le=d[e];if(t.U=le[0],le=le[1],2==t.G)if("c"==le[0]){t.J=le[1],t.la=le[2];const be=le[3];null!=be&&(t.ma=be,t.h.info("VER="+t.ma));const st=le[4];null!=st&&(t.za=st,t.h.info("SVER="+t.za));const kt=le[5];null!=kt&&"number"==typeof kt&&0<kt&&(t.K=o=1.5*kt,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const rn=r.g;if(rn){const cn=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cn){var _=o.i;!_.g&&(ai(cn,"spdy")||ai(cn,"quic")||ai(cn,"h2"))&&(_.j=_.l,_.g=new Set,_.h&&(Lr(_,_.h),_.h=null))}if(o.D){const jn=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;jn&&(o.sa=jn,fr(o.F,o.D,jn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-r.F,t.h.info("Handshake RTT: "+t.O+"ms"));var I=r;if((o=t).oa=La(o,o.H?o.la:null,o.W),I.J){Ys(o.i,I);var k=I,ne=o.K;ne&&k.setTimeout(ne),k.B&&(ao(k),Ca(k)),o.g=I}else yo(o);0<t.l.length&&ds(t)}else"stop"!=le[0]&&"close"!=le[0]||jo(t,7);else 3==t.G&&("stop"==le[0]||"close"==le[0]?"stop"==le[0]?jo(t,7):tr(t):"noop"!=le[0]&&t.j&&t.j.wa(le),t.A=0)}pt(4)}catch{}}function Ai(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(bt(r)||"string"==typeof r)ln(r,e,void 0);else{if(r.T&&"function"==typeof r.T)var t=r.T();else if(r.R&&"function"==typeof r.R)t=void 0;else if(bt(r)||"string"==typeof r){t=[];for(var o=r.length,d=0;d<o;d++)t.push(d)}else for(d in t=[],o=0,r)t[o++]=d;o=function ls(r){if(r.R&&"function"==typeof r.R)return r.R();if("string"==typeof r)return r.split("");if(bt(r)){for(var e=[],t=r.length,o=0;o<t;o++)e.push(r[o]);return e}for(o in e=[],t=0,r)e[t++]=r[o];return e}(r),d=o.length;for(var _=0;_<d;_++)e.call(void 0,o[_],t&&t[_],r)}}function go(r,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(r)if(r instanceof go)for(t=r.T(),o=0;o<t.length;o++)this.set(t[o],r.get(t[o]));else for(o in r)this.set(o,r[o])}function Rr(r){if(r.i!=r.g.length){for(var e=0,t=0;e<r.g.length;){var o=r.g[e];Po(r.h,o)&&(r.g[t++]=o),e++}r.g.length=t}if(r.i!=r.g.length){var d={};for(t=e=0;e<r.g.length;)Po(d,o=r.g[e])||(r.g[t++]=o,d[o]=1),e++;r.g.length=t}}function Po(r,e){return Object.prototype.hasOwnProperty.call(r,e)}(Q=Eo.prototype).setTimeout=function(r){this.P=r},Q.gb=function(r){r=r.target;const e=this.L;e&&3==$e(r)?e.l():this.Ia(r)},Q.Ia=function(r){try{if(r==this.g)e:{const be=$e(this.g);var e=this.g.Da();const st=this.g.ba();if(!(3>be)&&(3!=be||$n||this.g&&(this.h.h||this.g.ga()||xt(this.g)))){this.I||4!=be||7==e||pt(8==e||0>=st?3:2),ao(this);var t=this.g.ba();this.N=t;t:if(Yr(this)){var o=xt(this.g);r="";var d=o.length,_=4==$e(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Io(this),Br(this);var I="";break t}this.h.i=new Ve.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,r+=this.h.i.decode(o[e],{stream:_&&e==d-1});o.splice(0,d),this.h.g+=r,this.C=0,I=this.h.g}else I=this.g.ga();if(this.i=200==t,function Ko(r,e,t,o,d,_,I){r.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+_+" "+I})}(this.j,this.u,this.A,this.m,this.X,be,t),this.i){if(this.$&&!this.J){t:{if(this.g){var k,ne=this.g;if((k=ne.g?ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bi(k)){var le=k;break t}}le=null}if(!(t=le)){this.i=!1,this.o=3,It(12),Io(this),Br(this);break e}os(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Jr(this,t)}this.U?(Na(this,be,I),$n&&this.i&&3==be&&(qi(this.V,this.W,"tick",this.fb),this.W.start())):(os(this.j,this.m,I,null),Jr(this,I)),4==be&&Io(this),this.i&&!this.I&&(4==be?ka(this.l,this):(this.i=!1,Ca(this)))}else 400==t&&0<I.indexOf("Unknown SID")?(this.o=3,It(12)):(this.o=0,It(13)),Io(this),Br(this)}}}catch{}},Q.fb=function(){if(this.g){var r=$e(this.g),e=this.g.ga();this.C<e.length&&(ao(this),Na(this,r,e),this.i&&4!=r&&Ca(this))}},Q.cancel=function(){this.I=!0,Io(this)},Q.eb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function ca(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pt(3),It(17)),Io(this),this.o=2,Br(this)):Qr(this,this.Y-r)},(Q=go.prototype).R=function(){Rr(this);for(var r=[],e=0;e<this.g.length;e++)r.push(this.h[this.g[e]]);return r},Q.T=function(){return Rr(this),this.g.concat()},Q.get=function(r,e){return Po(this.h,r)?this.h[r]:e},Q.set=function(r,e){Po(this.h,r)||(this.i++,this.g.push(r)),this.h[r]=e},Q.forEach=function(r,e){for(var t=this.T(),o=0;o<t.length;o++){var d=t[o],_=this.get(d);r.call(e,_,d,this)}};var lo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lr(r,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,r instanceof lr){this.g=void 0!==e?e:r.g,us(this,r.j),this.s=r.s,Ls(this,r.i),Zi(this,r.m),this.l=r.l,e=r.h;var t=new To;t.i=e.i,e.g&&(t.g=new go(e.g),t.h=e.h),da(this,t),this.o=r.o}else r&&(t=String(r).match(lo))?(this.g=!!e,us(this,t[1]||"",!0),this.s=ur(t[2]||""),Ls(this,t[3]||"",!0),Zi(this,t[4]),this.l=ur(t[5]||"",!0),da(this,t[6]||"",!0),this.o=ur(t[7]||"")):(this.g=!!e,this.h=new To(null,this.g))}function _o(r){return new lr(r)}function us(r,e,t){r.j=t?ur(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Ls(r,e,t){r.i=t?ur(e,!0):e}function Zi(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function da(r,e,t){e instanceof To?(r.h=e,function Wn(r,e){e&&!r.j&&(Vs(r),r.i=null,r.g.forEach(function(t,o){var d=o.toLowerCase();o!=d&&(Jt(this,o),Zs(this,d,t))},r)),r.j=e}(r.h,r.g)):(t||(e=Ii(e,Er)),r.h=new To(e,r.g))}function fr(r,e,t){r.h.set(e,t)}function Vo(r){return fr(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function ur(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Ii(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,Ta),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Ta(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}lr.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Ii(e,xl,!0),":");var t=this.i;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Ii(e,xl,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&r.push("/"),r.push(Ii(t,"/"==t.charAt(0)?_l:Uo,!0))),(t=this.h.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Ii(t,Co)),r.join("")};var xl=/[#\/\?@]/g,Uo=/[#\?:]/g,_l=/[#\?]/g,Er=/[#\?@]/g,Co=/#/g;function To(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Vs(r){r.g||(r.g=new go,r.h=0,r.i&&function mo(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var o=r[t].indexOf("="),d=null;if(0<=o){var _=r[t].substring(0,o);d=r[t].substring(o+1)}else _=r[t];e(_,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Jt(r,e){Vs(r),e=ms(r,e),Po(r.g.h,e)&&(r.i=null,r.h-=r.g.get(e).length,Po((r=r.g).h,e)&&(delete r.h[e],r.i--,r.g.length>2*r.i&&Rr(r)))}function Xn(r,e){return Vs(r),e=ms(r,e),Po(r.g.h,e)}function Zs(r,e,t){Jt(r,e),0<t.length&&(r.i=null,r.g.set(ms(r,e),Ei(t)),r.h+=t.length)}function ms(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Y(r){this.l=r||$,r=Ve.PerformanceNavigationTiming?0<(r=Ve.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Ve.g&&Ve.g.Ea&&Ve.g.Ea()&&Ve.g.Ea().Zb),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Q=To.prototype).add=function(r,e){Vs(this),this.i=null,r=ms(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},Q.forEach=function(r,e){Vs(this),this.g.forEach(function(t,o){ln(t,function(d){r.call(e,d,o,this)},this)},this)},Q.T=function(){Vs(this);for(var r=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var d=r[o],_=0;_<d.length;_++)t.push(e[o]);return t},Q.R=function(r){Vs(this);var e=[];if("string"==typeof r)Xn(this,r)&&(e=Gi(e,this.g.get(ms(this,r))));else{r=this.g.R();for(var t=0;t<r.length;t++)e=Gi(e,r[t])}return e},Q.set=function(r,e){return Vs(this),this.i=null,Xn(this,r=ms(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},Q.get=function(r,e){return r&&0<(r=this.R(r)).length?String(r[0]):e},Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var r=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],d=encodeURIComponent(String(o));o=this.R(o);for(var _=0;_<o.length;_++){var I=d;""!==o[_]&&(I+="="+encodeURIComponent(String(o[_]))),r.push(I)}}return this.i=r.join("&")};var $=10;function fe(r){return!!r.h||!!r.g&&r.g.size>=r.j}function Pt(r){return r.h?1:r.g?r.g.size:0}function Fn(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Lr(r,e){r.g?r.g.add(e):r.h=e}function Ys(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function cs(r){if(null!=r.h)return r.i.concat(r.h.D);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.D);return e}return Ei(r.i)}function zr(){}function _s(){this.g=new zr}function fa(r,e,t){const o=t||"";try{Ai(r,function(d,_){let I=d;yt(d)&&(I=ws(d)),e.push(o+_+"="+encodeURIComponent(I))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function Bo(r,e,t,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch{}}function Pa(r){this.l=r.$b||null,this.j=r.ib||!1}function ra(r,e){yr.call(this),this.D=r,this.u=e,this.m=void 0,this.readyState=Da,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Y.prototype.cancel=function(){if(this.i=cs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},zr.prototype.stringify=function(r){return Ve.JSON.stringify(r,void 0)},zr.prototype.parse=function(r){return Ve.JSON.parse(r,void 0)},Bn(Pa,ui),Pa.prototype.g=function(){return new ra(this.l,this.j)},Pa.prototype.i=function(r){return function(){return r}}({}),Bn(ra,yr);var Da=0;function Sa(r){r.j.read().then(r.Sa.bind(r)).catch(r.ha.bind(r))}function sa(r){r.readyState=4,r.l=null,r.j=null,r.A=null,pa(r)}function pa(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Q=ra.prototype).open=function(r,e){if(this.readyState!=Da)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,pa(this)},Q.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.D||Ve).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sa(this)),this.readyState=Da},Q.Va=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,pa(this)),this.g&&(this.readyState=3,pa(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ve.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sa(this)}else r.text().then(this.Ua.bind(this),this.ha.bind(this))},Q.Sa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?sa(this):pa(this),3==this.readyState&&Sa(this)}},Q.Ua=function(r){this.g&&(this.response=this.responseText=r,sa(this))},Q.Ta=function(r){this.g&&(this.response=r,sa(this))},Q.ha=function(){this.g&&sa(this)},Q.setRequestHeader=function(r,e){this.v.append(r,e)},Q.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Q.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var Ho=Ve.JSON.parse;function is(r){yr.call(this),this.headers=new go,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qo,this.K=this.L=!1}Bn(is,yr);var qo="",ul=/^https?$/i,Ka=["POST","PUT"];function qa(r){return"content-type"==r.toLowerCase()}function cl(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,B(r),W(r)}function B(r){r.D||(r.D=!0,bn(r,"complete"),bn(r,"error"))}function oe(r){if(r.h&&typeof ft<"u"&&(!r.C[1]||4!=$e(r)||2!=r.ba()))if(r.v&&4==$e(r))Ts(r.Fa,0,r);else if(bn(r,"readystatechange"),4==$e(r)){r.h=!1;try{const k=r.ba();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===k){var d=String(r.H).match(lo)[1]||null;if(!d&&Ve.self&&Ve.self.location){var _=Ve.self.location.protocol;d=_.substr(0,_.length-1)}o=!ul.test(d?d.toLowerCase():"")}t=o}if(t)bn(r,"complete"),bn(r,"success");else{r.m=6;try{var I=2<$e(r)?r.g.statusText:""}catch{I=""}r.j=I+" ["+r.ba()+"]",B(r)}}finally{W(r)}}}function W(r,e){if(r.g){ge(r);const t=r.g,o=r.C[0]?it:null;r.g=null,r.C=null,e||bn(r,"ready");try{t.onreadystatechange=o}catch{}}}function ge(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(Ve.clearTimeout(r.A),r.A=null)}function $e(r){return r.g?r.g.readyState:0}function xt(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case qo:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function Pn(r,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function Bt(r){let e="";return Ni(r,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):fr(r,e,t))}function Wi(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function cr(r){this.za=0,this.l=[],this.h=new Oo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wi("failFast",!1,r),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wi("baseRetryDelayMs",5e3,r),this.$a=Wi("retryDelaySeedMs",1e4,r),this.Ya=Wi("forwardChannelMaxRetries",2,r),this.ra=Wi("forwardChannelRequestTimeoutMs",2e4,r),this.qa=r&&r.xmlHttpFactory||void 0,this.Ba=r&&r.Yb||!1,this.K=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.J="",this.i=new Y(r&&r.concurrentRequestLimit),this.Ca=new _s,this.ja=r&&r.fastHandshake||!1,this.Ra=r&&r.Wb||!1,r&&r.Aa&&this.h.Aa(),r&&r.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&r&&r.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!r||!1!==r.Xb}function tr(r){if(Us(r),3==r.G){var e=r.V++,t=_o(r.F);fr(t,"SID",r.J),fr(t,"RID",e),fr(t,"TYPE","terminate"),xr(r,t),(e=new Eo(r,r.h,e,void 0)).K=2,e.v=Vo(_o(t)),t=!1,Ve.navigator&&Ve.navigator.sendBeacon&&(t=Ve.navigator.sendBeacon(e.v.toString(),"")),!t&&Ve.Image&&((new Image).src=e.v,t=!0),t||(e.g=L(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ca(e)}Fl(r)}function Ki(r){r.g&&(Zo(r),r.g.cancel(),r.g=null)}function Us(r){Ki(r),r.u&&(Ve.clearTimeout(r.u),r.u=null),Vr(r),r.i.cancel(),r.m&&("number"==typeof r.m&&Ve.clearTimeout(r.m),r.m=null)}function br(r,e){r.l.push(new class{constructor(r,e){this.h=r,this.g=e}}(r.Za++,e)),3==r.G&&ds(r)}function ds(r){fe(r.i)||r.m||(r.m=!0,Ps(r.Ha,r),r.C=0)}function ga(r,e){var t;t=e?e.m:r.V++;const o=_o(r.F);fr(o,"SID",r.J),fr(o,"RID",t),fr(o,"AID",r.U),xr(r,o),r.o&&r.s&&Pn(o,r.o,r.s),t=new Eo(r,r.h,t,r.C+1),null===r.o&&(t.H=r.s),e&&(r.l=e.D.concat(r.l)),e=ma(r,t,1e3),t.setTimeout(Math.round(.5*r.ra)+Math.round(.5*r.ra*Math.random())),Lr(r.i,t),Ra(t,o,e)}function xr(r,e){r.j&&Ai({},function(t,o){fr(e,o,t)})}function ma(r,e,t){t=Math.min(r.l.length,t);var o=r.j?$t(r.j.Oa,r.j,r):null;e:{var d=r.l;let _=-1;for(;;){const I=["count="+t];-1==_?0<t?(_=d[0].h,I.push("ofs="+_)):_=0:I.push("ofs="+_);let k=!0;for(let ne=0;ne<t;ne++){let le=d[ne].h;const be=d[ne].g;if(le-=_,0>le)_=Math.max(0,d[ne].h-100),k=!1;else try{fa(be,I,"req"+le+"_")}catch{o&&o(be)}}if(k){o=I.join("&");break e}}}return r=r.l.splice(0,t),e.D=r,o}function yo(r){r.g||r.u||(r.Y=1,Ps(r.Ga,r),r.A=0)}function Qs(r){return!(r.g||r.u||3<=r.A||(r.Y++,r.u=Zt($t(r.Ga,r),Fa(r,r.A)),r.A++,0))}function Zo(r){null!=r.B&&(Ve.clearTimeout(r.B),r.B=null)}function _a(r){r.g=new Eo(r,r.h,"rpc",r.Y),null===r.o&&(r.g.H=r.s),r.g.O=0;var e=_o(r.oa);fr(e,"RID","rpc"),fr(e,"SID",r.J),fr(e,"CI",r.N?"0":"1"),fr(e,"AID",r.U),xr(r,e),fr(e,"TYPE","xmlhttp"),r.o&&r.s&&Pn(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.la,t.K=1,t.v=Vo(_o(e)),t.s=null,t.U=!0,No(t,r)}function Vr(r){null!=r.v&&(Ve.clearTimeout(r.v),r.v=null)}function ka(r,e){var t=null;if(r.g==e){Vr(r),Zo(r),r.g=null;var o=2}else{if(!Fn(r.i,e))return;t=e.D,Ys(r.i,e),o=1}if(r.I=e.N,0!=r.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=r.C;bn(o=io(),new Ot(o,t,e,d)),ds(r)}else yo(r);else if(3==(d=e.o)||0==d&&0<r.I||!(1==o&&function Za(r,e){return!(Pt(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.l=e.D.concat(r.l),0):1==r.G||2==r.G||r.C>=(r.Xa?0:r.Ya)||(r.m=Zt($t(r.Ha,r,e),Fa(r,r.C)),r.C++,0)))}(r,e)||2==o&&Qs(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),d){case 1:jo(r,5);break;case 4:jo(r,10);break;case 3:jo(r,6);break;default:jo(r,2)}}function Fa(r,e){let t=r.Pa+Math.floor(Math.random()*r.$a);return r.j||(t*=2),t*e}function jo(r,e){if(r.h.info("Error code "+e),2==e){var t=null;r.j&&(t=null);var o=$t(r.jb,r);t||(t=new lr("//www.google.com/images/cleardot.gif"),Ve.location&&"http"==Ve.location.protocol||us(t,"https"),Vo(t)),function el(r,e){const t=new Oo;if(Ve.Image){const o=new Image;o.onload=ci(Bo,t,o,"TestLoadImage: loaded",!0,e),o.onerror=ci(Bo,t,o,"TestLoadImage: error",!1,e),o.onabort=ci(Bo,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=ci(Bo,t,o,"TestLoadImage: timeout",!1,e),Ve.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=r}else e(!1)}(t.toString(),o)}else It(2);r.G=0,r.j&&r.j.va(e),Fl(r),Us(r)}function Fl(r){r.G=0,r.I=-1,r.j&&((0!=cs(r.i).length||0!=r.l.length)&&(r.i.i.length=0,Ei(r.l),r.l.length=0),r.j.ua())}function La(r,e,t){let o=function Gr(r){return r instanceof lr?_o(r):new lr(r,void 0)}(t);if(""!=o.i)e&&Ls(o,e+"."+o.i),Zi(o,o.m);else{const d=Ve.location;o=function ha(r,e,t,o){var d=new lr(null,void 0);return r&&us(d,r),e&&Ls(d,e),t&&Zi(d,t),o&&(d.l=o),d}(d.protocol,e?e+"."+d.hostname:d.hostname,+d.port,t)}return r.aa&&Ni(r.aa,function(d,_){fr(o,_,d)}),t=r.sa,(e=r.D)&&t&&fr(o,e,t),fr(o,"VER",r.ma),xr(r,o),o}function L(r,e,t){if(e&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new is(t&&r.Ba&&!r.qa?new Pa({ib:!0}):r.qa)).L=r.H,e}function we(){}function p(){if(Qi&&!(10<=Number(je)))throw Error("Environmental error: no available transport.")}function M(r,e){yr.call(this),this.g=new cr(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(r?r["X-WebChannel-Client-Profile"]=e.ya:r={"X-WebChannel-Client-Profile":e.ya}),this.g.P=r,(r=e&&e.httpHeadersOverwriteParam)&&!bi(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bi(e)&&(this.g.D=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new lt(this)}function ie(r){as.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function ce(){vr.call(this),this.status=1}function lt(r){this.g=r}(Q=is.prototype).ea=function(r,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);e=e?e.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():gi.g(),this.C=function ar(r){return r.h||(r.h=r.i())}(this.u?this.u:gi),this.g.onreadystatechange=$t(this.Fa,this);try{this.F=!0,this.g.open(e,String(r),!0),this.F=!1}catch(_){return void cl(this,_)}r=t||"";const d=new go(this.headers);o&&Ai(o,function(_,I){d.set(I,_)}),o=function Hn(r){e:{var e=qa;const t=r.length,o="string"==typeof r?r.split(""):r;for(let d=0;d<t;d++)if(d in o&&e.call(void 0,o[d],d,r)){e=d;break e}e=-1}return 0>e?null:"string"==typeof r?r.charAt(e):r[e]}(d.T()),t=Ve.FormData&&r instanceof Ve.FormData,!(0<=_t(Ka,e))||o||t||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(_,I){this.g.setRequestHeader(I,_)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ge(this),0<this.B&&((this.K=function kl(r){return Qi&&function qn(){return function Tr(r){var e=gs;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=r(9)}(function(){let r=0;const e=zi(String(Ui)).split("."),t=zi("9").split("."),o=Math.max(e.length,t.length);for(let I=0;0==r&&I<o;I++){var d=e[I]||"",_=t[I]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==d[0].length&&0==_[0].length)break;r=Hi(0==d[1].length?0:parseInt(d[1],10),0==_[1].length?0:parseInt(_[1],10))||Hi(0==d[2].length,0==_[2].length)||Hi(d[2],_[2]),d=d[3],_=_[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.pa,this)):this.A=Ts(this.pa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(_){cl(this,_)}},Q.pa=function(){typeof ft<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bn(this,"timeout"),this.abort(8))},Q.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,bn(this,"complete"),bn(this,"abort"),W(this))},Q.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),W(this,!0)),is.Z.M.call(this)},Q.Fa=function(){this.s||(this.F||this.v||this.l?oe(this):this.cb())},Q.cb=function(){oe(this)},Q.ba=function(){try{return 2<$e(this)?this.g.status:-1}catch{return-1}},Q.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Q.Qa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),Ho(e)}},Q.Da=function(){return this.m},Q.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Q=cr.prototype).ma=8,Q.G=1,Q.hb=function(r){try{this.h.info("Origin Trials invoked: "+r)}catch{}},Q.Ha=function(r){if(this.m)if(this.m=null,1==this.G){if(!r){this.V=Math.floor(1e5*Math.random()),r=this.V++;const d=new Eo(this,this.h,r,void 0);let _=this.s;if(this.P&&(_?(_=Vi(_),Kr(_,this.P)):_=this.P),null===this.o&&(d.H=_),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ma(this,d,e),fr(t=_o(this.F),"RID",r),fr(t,"CVER",22),this.D&&fr(t,"X-HTTP-Session-Id",this.D),xr(this,t),this.o&&_&&Pn(t,this.o,_),Lr(this.i,d),this.Ra&&fr(t,"TYPE","init"),this.ja?(fr(t,"$req",e),fr(t,"SID","null"),d.$=!0,Ra(d,t,null)):Ra(d,t,e),this.G=2}}else 3==this.G&&(r?ga(this,r):0==this.l.length||fe(this.i)||ga(this))},Q.Ga=function(){if(this.u=null,_a(this),this.$&&!(this.L||null==this.g||0>=this.O)){var r=2*this.O;this.h.info("BP detection timer enabled: "+r),this.B=Zt($t(this.bb,this),r)}},Q.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,It(10),Ki(this),_a(this))},Q.ab=function(){null!=this.v&&(this.v=null,Ki(this),Qs(this),It(19))},Q.jb=function(r){r?(this.h.info("Successfully pinged google.com"),It(2)):(this.h.info("Failed to ping google.com"),It(1))},(Q=we.prototype).xa=function(){},Q.wa=function(){},Q.va=function(){},Q.ua=function(){},Q.Oa=function(){},p.prototype.g=function(r,e){return new M(r,e)},Bn(M,yr),M.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var r=this.g,e=this.l,t=this.h||void 0;r.Wa&&(r.h.info("Origin Trials enabled."),Ps($t(r.hb,r,e))),It(0),r.W=e,r.aa=t||{},r.N=r.X,r.F=La(r,null,r.W),ds(r)},M.prototype.close=function(){tr(this.g)},M.prototype.u=function(r){if("string"==typeof r){var e={};e.__data__=r,br(this.g,e)}else this.v?((e={}).__data__=ws(r),br(this.g,e)):br(this.g,r)},M.prototype.M=function(){this.g.j=null,delete this.j,tr(this.g),delete this.g,M.Z.M.call(this)},Bn(ie,as),Bn(ce,vr),Bn(lt,we),lt.prototype.xa=function(){bn(this.g,"a")},lt.prototype.wa=function(r){bn(this.g,new ie(r))},lt.prototype.va=function(r){bn(this.g,new ce(r))},lt.prototype.ua=function(){bn(this.g,"b")},p.prototype.createWebChannel=p.prototype.g,M.prototype.send=M.prototype.u,M.prototype.open=M.prototype.m,M.prototype.close=M.prototype.close,en.NO_ERROR=0,en.TIMEOUT=8,en.HTTP_ERROR=6,si.COMPLETE="complete",ro.EventType=Fs,Fs.OPEN="a",Fs.CLOSE="b",Fs.ERROR="c",Fs.MESSAGE="d",yr.prototype.listen=yr.prototype.N,is.prototype.listenOnce=is.prototype.O,is.prototype.getLastError=is.prototype.La,is.prototype.getLastErrorCode=is.prototype.Da,is.prototype.getStatus=is.prototype.ba,is.prototype.getResponseJson=is.prototype.Qa,is.prototype.getResponseText=is.prototype.ga,is.prototype.send=is.prototype.ea;var Ht=De.createWebChannelTransport=function(){return new p},Rn=De.getStatEventTarget=function(){return io()},wn=De.ErrorCode=en,Mn=De.EventType=si,pr=De.Event=Ro,qr=De.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},mi=De.FetchXmlHttpFactory=Pa,Ss=De.WebChannel=ro,Mr=De.XhrIo=is;const Ir="@firebase/firestore";class oi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let hs="9.9.2";const ys=new ve.Yd("@firebase/firestore");function As(){return ys.logLevel}function dn(r,...e){if(ys.logLevel<=ve.in.DEBUG){const t=e.map(tl);ys.debug(`Firestore (${hs}): ${r}`,...t)}}function Hr(r,...e){if(ys.logLevel<=ve.in.ERROR){const t=e.map(tl);ys.error(`Firestore (${hs}): ${r}`,...t)}}function oa(r,...e){if(ys.logLevel<=ve.in.WARN){const t=e.map(tl);ys.warn(`Firestore (${hs}): ${r}`,...t)}}function tl(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Vn(r="Unexpected state"){const e=`FIRESTORE (${hs}) INTERNAL ASSERTION FAILED: `+r;throw Hr(e),new Error(e)}function Ln(r,e){r||Vn()}function Tn(r,e){return r}const Ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class an extends nt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Js{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class yl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(oi.UNAUTHENTICATED))}shutdown(){}}class uu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ll{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let d=this.i;const _=le=>this.i!==d?(d=this.i,t(le)):Promise.resolve();let I=new Js;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new Js,e.enqueueRetryable(()=>_(this.currentUser))};const k=()=>{const le=I;e.enqueueRetryable((0,rt.Z)(function*(){yield le.promise,yield _(o.currentUser)}))},ne=le=>{dn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=le,this.auth.addAuthTokenListener(this.o),k()};this.t.onInit(le=>ne(le)),setTimeout(()=>{if(!this.auth){const le=this.t.getImmediate({optional:!0});le?ne(le):(dn("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new Js)}},0),k()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(dn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ln("string"==typeof o.accessToken),new yl(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ln(null===e||"string"==typeof e),new oi(e)}}class Vl{constructor(e,t,o){this.type="FirstParty",this.user=oi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const d=e.auth.getAuthHeaderValueForFirstParty([]);d&&this.headers.set("Authorization",d),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class nl{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new Vl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ya{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bs{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=_=>{null!=_.error&&dn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const I=_.token!==this.p;return this.p=_.token,dn("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?t(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>o(_))};const d=_=>{dn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.g.onInit(_=>d(_)),setTimeout(()=>{if(!this.appCheck){const _=this.g.getImmediate({optional:!0});_?d(_):dn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ln("string"==typeof t.token),this.p=t.token,new ya(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ya(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<r;o++)t[o]=Math.floor(256*Math.random());return t}class Yo{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=Ya(40);for(let _=0;_<d.length;++_)o.length<20&&d[_]<t&&(o+=e.charAt(d[_]%e.length))}return o}}function Oi(r,e){return r<e?-1:r>e?1:0}function $o(r,e,t){return r.length===e.length&&r.every((o,d)=>t(o,e[d]))}function va(r){return r+"\0"}class Xr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new an(Ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new an(Ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new an(Ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new an(Ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xr.fromMillis(Date.now())}static fromDate(e){return Xr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Xr(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oi(this.nanoseconds,e.nanoseconds):Oi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Sn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Sn(e)}static min(){return new Sn(new Xr(0,0))}static max(){return new Sn(new Xr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ql{constructor(e,t,o){void 0===t?t=0:t>e.length&&Vn(),void 0===o?o=e.length-t:o>e.length-t&&Vn(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===ql.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ql?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let d=0;d<o;d++){const _=e.get(d),I=t.get(d);if(_<I)return-1;if(_>I)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Sr extends ql{construct(e,t,o){return new Sr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new an(Ut.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(d=>d.length>0))}return new Sr(t)}static emptyPath(){return new Sr([])}}const Uu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hs extends ql{construct(e,t,o){return new Hs(e,t,o)}static isValidIdentifier(e){return Uu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hs(["__name__"])}static fromServerFormat(e){const t=[];let o="",d=0;const _=()=>{if(0===o.length)throw new an(Ut.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let I=!1;for(;d<e.length;){const k=e[d];if("\\"===k){if(d+1===e.length)throw new an(Ut.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const ne=e[d+1];if("\\"!==ne&&"."!==ne&&"`"!==ne)throw new an(Ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=ne,d+=2}else"`"===k?(I=!I,d++):"."!==k||I?(o+=k,d++):(_(),d++)}if(_(),I)throw new an(Ut.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hs(t)}static emptyPath(){return new Hs([])}}class En{constructor(e){this.path=e}static fromPath(e){return new En(Sr.fromString(e))}static fromName(e){return new En(Sr.fromString(e).popFirst(5))}static empty(){return new En(Sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Sr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Sr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new En(new Sr(e.slice()))}}class dl{constructor(e,t,o,d){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=d}}function Qo(r){return r.fields.find(e=>2===e.kind)}function Ua(r){return r.fields.filter(e=>2!==e.kind)}dl.UNKNOWN_ID=-1;class Zl{constructor(e,t){this.fieldPath=e,this.kind=t}}class il{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new il(0,Wr.min())}}function Ml(r,e){const t=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,d=Sn.fromTimestamp(1e9===o?new Xr(t+1,0):new Xr(t,o));return new Wr(d,En.empty(),e)}function vl(r){return new Wr(r.readTime,r.key,-1)}class Wr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Wr(Sn.min(),En.empty(),-1)}static max(){return new Wr(Sn.max(),En.empty(),-1)}}function Do(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=En.comparator(r.documentKey,e.documentKey),0!==t?t:Oi(r.largestBatchId,e.largestBatchId))}const Qa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ol{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Fo(r){return rl.apply(this,arguments)}function rl(){return rl=(0,rt.Z)(function*(r){if(r.code!==Ut.FAILED_PRECONDITION||r.message!==Qa)throw r;dn("LocalStore","Unexpectedly lost primary lease")}),rl.apply(this,arguments)}class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new C((o,d)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(o,d)},this.catchCallback=_=>{this.wrapFailure(t,_).next(o,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof C?t:C.resolve(t)}catch(t){return C.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):C.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):C.reject(t)}static resolve(e){return new C((t,o)=>{t(e)})}static reject(e){return new C((t,o)=>{o(e)})}static waitFor(e){return new C((t,o)=>{let d=0,_=0,I=!1;e.forEach(k=>{++d,k.next(()=>{++_,I&&_===d&&t()},ne=>o(ne))}),I=!0,_===d&&t()})}static or(e){let t=C.resolve(!1);for(const o of e)t=t.next(d=>d?C.resolve(d):o());return t}static forEach(e,t){const o=[];return e.forEach((d,_)=>{o.push(t.call(this,d,_))}),this.waitFor(o)}static mapArray(e,t){return new C((o,d)=>{const _=e.length,I=new Array(_);let k=0;for(let ne=0;ne<_;ne++){const le=ne;t(e[le]).next(be=>{I[le]=be,++k,k===_&&o(I)},be=>d(be))}})}static doWhile(e,t){return new C((o,d)=>{const _=()=>{!0===e()?t().next(()=>{_()},d):o()};_()})}}class R{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Js,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new J(e,t.error)):this.T.resolve()},this.transaction.onerror=o=>{const d=Cn(o.target.error);this.T.reject(new J(e,d))}}static open(e,t,o,d){try{return new R(t,e.transaction(d,o))}catch(_){throw new J(t,_)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(dn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ne(t)}}class D{constructor(e,t,o){this.name=e,this.version=t,this.P=o,12.2===D.v((0,nt.z$)())&&Hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return dn("SimpleDb","Removing database:",e),Ze(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,nt.hl)())return!1;if(D.S())return!0;const e=(0,nt.z$)(),t=D.v(e),o=0<t&&t<10,d=D.D(e),_=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||_)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static D(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}k(e){var t=this;return(0,rt.Z)(function*(){return t.db||(dn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,d)=>{const _=indexedDB.open(t.name,t.version);_.onsuccess=I=>{o(I.target.result)},_.onblocked=()=>{d(new J(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=I=>{const k=I.target.error;d("VersionError"===k.name?new an(Ut.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===k.name?new an(Ut.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+k):new J(e,k))},_.onupgradeneeded=I=>{dn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',I.oldVersion),t.P.M(I.target.result,_.transaction,I.oldVersion,t.version).next(()=>{dn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=o=>t.O(o)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,d){var _=this;return(0,rt.Z)(function*(){const I="readonly"===t;let k=0;for(;;){++k;try{_.db=yield _.k(e);const ne=R.open(_.db,e,I?"readonly":"readwrite",o),le=d(ne).next(be=>(ne.R(),be)).catch(be=>(ne.abort(be),C.reject(be))).toPromise();return le.catch(()=>{}),yield ne.A,le}catch(ne){const le=ne,be="FirebaseError"!==le.name&&k<3;if(dn("SimpleDb","Transaction failed with error:",le.message,"Retrying:",be),_.close(),!be)return Promise.reject(le)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class V{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Ze(this.$.delete())}}class J extends an{constructor(e,t){super(Ut.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pe(r){return"IndexedDbTransactionError"===r.name}class Ne{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(dn("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(dn("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Ze(o)}add(e){return dn("SimpleDb","ADD",this.store.name,e,e),Ze(this.store.add(e))}get(e){return Ze(this.store.get(e)).next(t=>(void 0===t&&(t=null),dn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return dn("SimpleDb","DELETE",this.store.name,e),Ze(this.store.delete(e))}count(){return dn("SimpleDb","COUNT",this.store.name),Ze(this.store.count())}K(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const d=this.cursor(o),_=[];return this.G(d,(I,k)=>{_.push(k)}).next(()=>_)}{const d=this.store.getAll(o.range);return new C((_,I)=>{d.onerror=k=>{I(k.target.error)},d.onsuccess=k=>{_(k.target.result)}})}}j(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new C((d,_)=>{o.onerror=I=>{_(I.target.error)},o.onsuccess=I=>{d(I.target.result)}})}W(e,t){dn("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.H=!1;const d=this.cursor(o);return this.G(d,(_,I,k)=>k.delete())}J(e,t){let o;t?o=e:(o={},t=e);const d=this.cursor(o);return this.G(d,t)}Y(e){const t=this.cursor({});return new C((o,d)=>{t.onerror=_=>{const I=Cn(_.target.error);d(I)},t.onsuccess=_=>{const I=_.target.result;I?e(I.primaryKey,I.value).next(k=>{k?I.continue():o()}):o()}})}G(e,t){const o=[];return new C((d,_)=>{e.onerror=I=>{_(I.target.error)},e.onsuccess=I=>{const k=I.target.result;if(!k)return void d();const ne=new V(k),le=t(k.primaryKey,k.value,ne);if(le instanceof C){const be=le.catch(st=>(ne.done(),C.reject(st)));o.push(be)}ne.isDone?d():null===ne.U?k.continue():k.continue(ne.U)}}).next(()=>C.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.H?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ze(r){return new C((e,t)=>{r.onsuccess=o=>{e(o.target.result)},r.onerror=o=>{const d=Cn(o.target.error);t(d)}})}let Lt=!1;function Cn(r){const e=D.v((0,nt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const o=new an("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lt||(Lt=!0,setTimeout(()=>{throw o},0)),o}}return r}class ji{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;dn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,rt.Z)(function*(){t.task=null;try{dn("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(o){pe(o)?dn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Fo(o)}yield t.Z(1)}))}}class Kn{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,rt.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.et(o,e))})()}et(e,t){const o=new Set;let d=t,_=!0;return C.doWhile(()=>!0===_&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(I=>{if(null!==I&&!o.has(I))return dn("IndexBackiller",`Processing collection: ${I}`),this.nt(e,I,d).next(k=>{d-=k,o.add(I)});_=!1})).next(()=>t-d)}nt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,o).next(_=>{const I=_.changes;return this.localStore.indexManager.updateIndexEntries(e,I).next(()=>this.st(d,_)).next(k=>(dn("IndexBackiller",`Updating offset: ${k}`),this.localStore.indexManager.updateCollectionGroup(e,t,k))).next(()=>I.size)}))}st(e,t){let o=e;return t.changes.forEach((d,_)=>{const I=vl(_);Do(I,o)>0&&(o=I)}),new Wr(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class $i{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.it(o),this.rt=o=>t.writeSequenceNumber(o))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function fs(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function jr(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ja(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}$i.ot=-1;class Nr{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new Nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new Nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return t+o.left.size;d<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jo(this.root,e,this.comparator,!0)}}class Jo{constructor(e,t,o,d){this.isReverse=d,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=t?o(e.key,t):1,t&&d&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,o,d,_){this.key=e,this.value=t,this.color=o??$r.RED,this.left=d??$r.EMPTY,this.right=_??$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,d,_){return new $r(e??this.key,t??this.value,o??this.color,d??this.left,_??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let d=this;const _=o(e,d.key);return d=_<0?d.copy(null,null,null,d.left.insert(e,t,o),null):0===_?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return $r.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Vn();const e=this.left.check();if(e!==this.right.check())throw Vn();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw Vn()}get value(){throw Vn()}get color(){throw Vn()}get left(){throw Vn()}get right(){throw Vn()}copy(r,e,t,o,d){return this}insert(r,e,t){return new $r(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class er{constructor(e){this.comparator=e,this.data=new Nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ul(this.data.getIterator())}getIteratorFrom(e){return new Ul(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof er)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,_=o.getNext().key;if(0!==this.comparator(d,_))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new er(this.comparator);return t.data=e,t}}class Ul{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bl(r){return r.hasNext()?r.getNext():void 0}class Go{constructor(e){this.fields=e,e.sort(Hs.comparator)}static empty(){return new Go([])}unionWith(e){let t=new er(Hs.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new Go(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class uo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new uo(t)}static fromUint8Array(e){const t=function(o){let d="";for(let _=0;_<o.length;++_)d+=String.fromCharCode(o[_]);return d}(e);return new uo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}uo.EMPTY_BYTE_STRING=new uo("");const Yl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(r){if(Ln(!!r),"string"==typeof r){let e=0;const t=Yl.exec(r);if(Ln(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:es(r.seconds),nanos:es(r.nanos)}}function es(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function Aa(r){return"string"==typeof r?uo.fromBase64String(r):uo.fromUint8Array(r)}function iu(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function co(r){const e=r.mapValue.fields.__previous_value__;return iu(e)?co(e):e}function El(r){const e=aa(r.mapValue.fields.__local_write_time__.timestampValue);return new Xr(e.seconds,e.nanos)}class z{constructor(e,t,o,d,_,I,k,ne){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=d,this.ssl=_,this.forceLongPolling=I,this.autoDetectLongPolling=k,this.useFetchStreams=ne}}class X{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new X("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof X&&e.projectId===this.projectId&&e.database===this.database}}function de(r){return null==r}function He(r){return 0===r&&1/r==-1/0}function gt(r){return"number"==typeof r&&Number.isInteger(r)&&!He(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const At={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},un={nullValue:"NULL_VALUE"};function mn(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?iu(r)?4:Hl(r)?9007199254740991:10:Vn()}function ri(r,e){if(r===e)return!0;const t=mn(r);if(t!==mn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return El(r).isEqual(El(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const _=aa(o.timestampValue),I=aa(d.timestampValue);return _.seconds===I.seconds&&_.nanos===I.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return d=e,Aa(r.bytesValue).isEqual(Aa(d.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,d){return es(o.geoPointValue.latitude)===es(d.geoPointValue.latitude)&&es(o.geoPointValue.longitude)===es(d.geoPointValue.longitude)}(r,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return es(o.integerValue)===es(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const _=es(o.doubleValue),I=es(d.doubleValue);return _===I?He(_)===He(I):isNaN(_)&&isNaN(I)}return!1}(r,e);case 9:return $o(r.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:return function(o,d){const _=o.mapValue.fields||{},I=d.mapValue.fields||{};if(fs(_)!==fs(I))return!1;for(const k in _)if(_.hasOwnProperty(k)&&(void 0===I[k]||!ri(_[k],I[k])))return!1;return!0}(r,e);default:return Vn()}var d}function di(r,e){return void 0!==(r.values||[]).find(t=>ri(t,e))}function Pi(r,e){if(r===e)return 0;const t=mn(r),o=mn(e);if(t!==o)return Oi(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oi(r.booleanValue,e.booleanValue);case 2:return function(d,_){const I=es(d.integerValue||d.doubleValue),k=es(_.integerValue||_.doubleValue);return I<k?-1:I>k?1:I===k?0:isNaN(I)?isNaN(k)?0:-1:1}(r,e);case 3:return Yn(r.timestampValue,e.timestampValue);case 4:return Yn(El(r),El(e));case 5:return Oi(r.stringValue,e.stringValue);case 6:return function(d,_){const I=Aa(d),k=Aa(_);return I.compareTo(k)}(r.bytesValue,e.bytesValue);case 7:return function(d,_){const I=d.split("/"),k=_.split("/");for(let ne=0;ne<I.length&&ne<k.length;ne++){const le=Oi(I[ne],k[ne]);if(0!==le)return le}return Oi(I.length,k.length)}(r.referenceValue,e.referenceValue);case 8:return function(d,_){const I=Oi(es(d.latitude),es(_.latitude));return 0!==I?I:Oi(es(d.longitude),es(_.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(d,_){const I=d.values||[],k=_.values||[];for(let ne=0;ne<I.length&&ne<k.length;++ne){const le=Pi(I[ne],k[ne]);if(le)return le}return Oi(I.length,k.length)}(r.arrayValue,e.arrayValue);case 10:return function(d,_){if(d===At.mapValue&&_===At.mapValue)return 0;if(d===At.mapValue)return 1;if(_===At.mapValue)return-1;const I=d.fields||{},k=Object.keys(I),ne=_.fields||{},le=Object.keys(ne);k.sort(),le.sort();for(let be=0;be<k.length&&be<le.length;++be){const st=Oi(k[be],le[be]);if(0!==st)return st;const kt=Pi(I[k[be]],ne[le[be]]);if(0!==kt)return kt}return Oi(k.length,le.length)}(r.mapValue,e.mapValue);default:throw Vn()}}function Yn(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Oi(r,e);const t=aa(r),o=aa(e),d=Oi(t.seconds,o.seconds);return 0!==d?d:Oi(t.nanos,o.nanos)}function ps(r){return ho(r)}function ho(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(o){const d=aa(o);return`time(${d.seconds},${d.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?Aa(r.bytesValue).toBase64():"referenceValue"in r?En.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(o){let d="[",_=!0;for(const I of o.values||[])_?_=!1:d+=",",d+=ho(I);return d+"]"}(r.arrayValue):"mapValue"in r?function(o){const d=Object.keys(o.fields||{}).sort();let _="{",I=!0;for(const k of d)I?I=!1:_+=",",_+=`${k}:${ho(o.fields[k])}`;return _+"}"}(r.mapValue):Vn();var e}function zo(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function xa(r){return!!r&&"integerValue"in r}function sl(r){return!!r&&"arrayValue"in r}function Ba(r){return!!r&&"nullValue"in r}function Ha(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ol(r){return!!r&&"mapValue"in r}function ja(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return jr(r.mapValue.fields,(t,o)=>e.mapValue.fields[t]=ja(o)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ja(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Hl(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function cu(r){return"nullValue"in r?un:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?zo(X.empty(),En.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Vn()}function rd(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?zo(X.empty(),En.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?At:Vn()}function Bu(r,e){const t=Pi(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function mu(r,e){const t=Pi(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Xo{constructor(e){this.value=e}static empty(){return new Xo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!ol(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ja(t)}setAll(e){let t=Hs.emptyPath(),o={},d=[];e.forEach((I,k)=>{if(!t.isImmediateParentOf(k)){const ne=this.getFieldsMap(t);this.applyChanges(ne,o,d),o={},d=[],t=k.popLast()}I?o[k.lastSegment()]=ja(I):d.push(k.lastSegment())});const _=this.getFieldsMap(t);this.applyChanges(_,o,d)}delete(e){const t=this.field(e.popLast());ol(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=t.mapValue.fields[e.get(o)];ol(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,o){jr(t,(d,_)=>e[d]=_);for(const d of o)delete e[d]}clone(){return new Xo(ja(this.value))}}function jl(r){const e=[];return jr(r.fields,(t,o)=>{const d=new Hs([t]);if(ol(o)){const _=jl(o.mapValue).fields;if(0===_.length)e.push(d);else for(const I of _)e.push(d.child(I))}else e.push(d)}),new Go(e)}class bs{constructor(e,t,o,d,_,I){this.key=e,this.documentType=t,this.version=o,this.readTime=d,this.data=_,this.documentState=I}static newInvalidDocument(e){return new bs(e,0,Sn.min(),Sn.min(),Xo.empty(),0)}static newFoundDocument(e,t,o){return new bs(e,1,t,Sn.min(),o,0)}static newNoDocument(e,t){return new bs(e,2,t,Sn.min(),Xo.empty(),0)}static newUnknownDocument(e,t){return new bs(e,3,t,Sn.min(),Xo.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bs(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ou{constructor(e,t=null,o=[],d=[],_=null,I=null,k=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=d,this.limit=_,this.startAt=I,this.endAt=k,this.ut=null}}function he(r,e=null,t=[],o=[],d=null,_=null,I=null){return new Ou(r,e,t,o,d,_,I)}function j(r){const e=Tn(r);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(d=o).field.canonicalString()+d.op.toString()+ps(d.value);var d}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),de(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>ps(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>ps(o)).join(",")),e.ut=t}return e.ut}function ye(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<r.orderBy.length;d++)if(!ic(r.orderBy[d],e.orderBy[d]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let d=0;d<r.filters.length;d++)if((t=r.filters[d]).op!==(o=e.filters[d]).op||!t.field.isEqual(o.field)||!ri(t.value,o.value))return!1;var t,o;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Hu(r.startAt,e.startAt)&&Hu(r.endAt,e.endAt)}function Je(r){return En.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Nt(r,e){return r.filters.filter(t=>t instanceof ei&&t.field.isEqual(e))}function _n(r,e,t){let o=un,d=!0;for(const _ of Nt(r,e)){let I=un,k=!0;switch(_.op){case"<":case"<=":I=cu(_.value);break;case"==":case"in":case">=":I=_.value;break;case">":I=_.value,k=!1;break;case"!=":case"not-in":I=un}Bu({value:o,inclusive:d},{value:I,inclusive:k})<0&&(o=I,d=k)}if(null!==t)for(let _=0;_<r.orderBy.length;++_)if(r.orderBy[_].field.isEqual(e)){const I=t.position[_];Bu({value:o,inclusive:d},{value:I,inclusive:t.inclusive})<0&&(o=I,d=t.inclusive);break}return{value:o,inclusive:d}}function Ci(r,e,t){let o=At,d=!0;for(const _ of Nt(r,e)){let I=At,k=!0;switch(_.op){case">=":case">":I=rd(_.value),k=!1;break;case"==":case"in":case"<=":I=_.value;break;case"<":I=_.value,k=!1;break;case"!=":case"not-in":I=At}mu({value:o,inclusive:d},{value:I,inclusive:k})>0&&(o=I,d=k)}if(null!==t)for(let _=0;_<r.orderBy.length;++_)if(r.orderBy[_].field.isEqual(e)){const I=t.position[_];mu({value:o,inclusive:d},{value:I,inclusive:t.inclusive})>0&&(o=I,d=t.inclusive);break}return{value:o,inclusive:d}}class ei extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,o):new xs(e,t,o):"array-contains"===t?new $a(e,o):"in"===t?new bl(e,o):"not-in"===t?new Il(e,o):"array-contains-any"===t?new Ql(e,o):new ei(e,t,o)}static ct(e,t,o){return"in"===t?new ea(e,o):new $l(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Pi(t,this.value)):null!==t&&mn(this.value)===mn(t)&&this.at(Pi(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vn()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class xs extends ei{constructor(e,t,o){super(e,t,o),this.key=En.fromName(o.referenceValue)}matches(e){const t=En.comparator(e.key,this.key);return this.at(t)}}class ea extends ei{constructor(e,t){super(e,"in",t),this.keys=al(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $l extends ei{constructor(e,t){super(e,"not-in",t),this.keys=al(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function al(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>En.fromName(o.referenceValue))}class $a extends ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sl(t)&&di(t.arrayValue,this.value)}}class bl extends ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&di(this.value.arrayValue,t)}}class Il extends ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(di(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!di(this.value.arrayValue,t)}}class Ql extends ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>di(this.value.arrayValue,o))}}class So{constructor(e,t){this.position=e,this.inclusive=t}}class la{constructor(e,t="asc"){this.field=e,this.dir=t}}function ic(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}function rc(r,e,t){let o=0;for(let d=0;d<r.position.length;d++){const _=e[d],I=r.position[d];if(o=_.field.isKeyField()?En.comparator(En.fromName(I.referenceValue),t.key):Pi(I,t.data.field(_.field)),"desc"===_.dir&&(o*=-1),0!==o)break}return o}function Hu(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ri(r.position[t],e.position[t]))return!1;return!0}class hl{constructor(e,t=null,o=[],d=[],_=null,I="F",k=null,ne=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=d,this.limit=_,this.limitType=I,this.startAt=k,this.endAt=ne,this.lt=null,this.ft=null}}function du(r,e,t,o,d,_,I,k){return new hl(r,e,t,o,d,_,I,k)}function Cl(r){return new hl(r)}function wa(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function sc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function Uc(r){for(const e of r.filters)if(e.ht())return e.field;return null}function Ru(r){return null!==r.collectionGroup}function _u(r){const e=Tn(r);if(null===e.lt){e.lt=[];const t=Uc(e),o=sc(e);if(null!==t&&null===o)t.isKeyField()||e.lt.push(new la(t)),e.lt.push(new la(Hs.keyField(),"asc"));else{let d=!1;for(const _ of e.explicitOrderBy)e.lt.push(_),_.field.isKeyField()&&(d=!0);if(!d){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new la(Hs.keyField(),_))}}}return e.lt}function js(r){const e=Tn(r);if(!e.ft)if("F"===e.limitType)e.ft=he(e.path,e.collectionGroup,_u(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const _ of _u(e))t.push(new la(_.field,"desc"===_.dir?"asc":"desc"));const o=e.endAt?new So(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new So(e.startAt.position,e.startAt.inclusive):null;e.ft=he(e.path,e.collectionGroup,t,e.filters,e.limit,o,d)}return e.ft}function N(r,e,t){return new hl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function w(r,e){return ye(js(r),js(e))&&r.limitType===e.limitType}function b(r){return`${j(js(r))}|lt:${r.limitType}`}function F(r){return`Query(target=${function G(r){let e=r.path.canonicalString();return null!==r.collectionGroup&&(e+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(e+=`, filters: [${r.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${ps(o.value)}`;var o}).join(", ")}]`),de(r.limit)||(e+=", limit: "+r.limit),r.orderBy.length>0&&(e+=`, orderBy: [${r.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),r.startAt&&(e+=", startAt: ",e+=r.startAt.inclusive?"b:":"a:",e+=r.startAt.position.map(t=>ps(t)).join(",")),r.endAt&&(e+=", endAt: ",e+=r.endAt.inclusive?"a:":"b:",e+=r.endAt.position.map(t=>ps(t)).join(",")),`Target(${e})`}(js(r))}; limitType=${r.limitType})`}function ue(r,e){return e.isFoundDocument()&&function(t,o){const d=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):En.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(r,e)&&function(t,o){for(const d of t.explicitOrderBy)if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(r,e)&&function(t,o){for(const d of t.filters)if(!d.matches(o))return!1;return!0}(r,e)&&(o=e,!((t=r).startAt&&!function(d,_,I){const k=rc(d,_,I);return d.inclusive?k<=0:k<0}(t.startAt,_u(t),o)||t.endAt&&!function(d,_,I){const k=rc(d,_,I);return d.inclusive?k>=0:k>0}(t.endAt,_u(t),o)));var t,o}function Se(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Tt(r){return(e,t)=>{let o=!1;for(const d of _u(r)){const _=sn(d,e,t);if(0!==_)return _;o=o||d.field.isKeyField()}return 0}}function sn(r,e,t){const o=r.field.isKeyField()?En.comparator(e.key,t.key):function(d,_,I){const k=_.data.field(d),ne=I.data.field(d);return null!==k&&null!==ne?Pi(k,ne):Vn()}(r.field,e,t);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return Vn()}}function kn(r,e){if(r.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:He(e)?"-0":e}}function _i(r){return{integerValue:""+r}}function Cr(r,e){return gt(e)?_i(e):kn(r,e)}class Is{constructor(){this._=void 0}}function fl(r,e,t){return r instanceof Nu?function(o,d){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(_.fields.__previous_value__=d),{mapValue:_}}(t,e):r instanceof Gl?ju(r,e):r instanceof zl?Ec(r,e):function(o,d){const _=ru(o,d),I=oc(_)+oc(o._t);return xa(_)&&xa(o._t)?_i(I):kn(o.wt,I)}(r,e)}function hu(r,e,t){return r instanceof Gl?ju(r,e):r instanceof zl?Ec(r,e):t}function ru(r,e){return r instanceof $u?xa(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Nu extends Is{}class Gl extends Is{constructor(e){super(),this.elements=e}}function ju(r,e){const t=Pu(e);for(const o of r.elements)t.some(d=>ri(d,o))||t.push(o);return{arrayValue:{values:t}}}class zl extends Is{constructor(e){super(),this.elements=e}}function Ec(r,e){let t=Pu(e);for(const o of r.elements)t=t.filter(d=>!ri(d,o));return{arrayValue:{values:t}}}class $u extends Is{constructor(e,t){super(),this.wt=e,this._t=t}}function oc(r){return es(r.integerValue||r.doubleValue)}function Pu(r){return sl(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class yu{constructor(e,t){this.field=e,this.transform=t}}class fu{constructor(e,t){this.version=e,this.transformResults=t}}class vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vs}static exists(e){return new vs(void 0,e)}static updateTime(e){return new vs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class zu{}function Wu(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new Fe(r.key,vs.none()):new E(r.key,r.data,vs.none());{const t=r.data,o=Xo.empty();let d=new er(Hs.comparator);for(let _ of e.fields)if(!d.has(_)){let I=t.field(_);null===I&&_.length>1&&(_=_.popLast(),I=t.field(_)),null===I?o.delete(_):o.set(_,I),d=d.add(_)}return new O(r.key,o,new Go(d.toArray()),vs.none())}}function lh(r,e,t){r instanceof E?function(o,d,_){const I=o.value.clone(),k=ae(o.fieldTransforms,d,_.transformResults);I.setAll(k),d.convertToFoundDocument(_.version,I).setHasCommittedMutations()}(r,e,t):r instanceof O?function(o,d,_){if(!Gu(o.precondition,d))return void d.convertToUnknownDocument(_.version);const I=ae(o.fieldTransforms,d,_.transformResults),k=d.data;k.setAll(q(o)),k.setAll(I),d.convertToFoundDocument(_.version,k).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function eo(r,e,t,o){return r instanceof E?function(d,_,I,k){if(!Gu(d.precondition,_))return I;const ne=d.value.clone(),le=Te(d.fieldTransforms,k,_);return ne.setAll(le),_.convertToFoundDocument(_.version,ne).setHasLocalMutations(),null}(r,e,t,o):r instanceof O?function(d,_,I,k){if(!Gu(d.precondition,_))return I;const ne=Te(d.fieldTransforms,k,_),le=_.data;return le.setAll(q(d)),le.setAll(ne),_.convertToFoundDocument(_.version,le).setHasLocalMutations(),null===I?null:I.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(be=>be.field))}(r,e,t,o):(I=t,Gu(r.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):I);var _,I}function S(r,e){let t=null;for(const o of r.fieldTransforms){const d=e.data.field(o.field),_=ru(o.transform,d||null);null!=_&&(null===t&&(t=Xo.empty()),t.set(o.field,_))}return t||null}function g(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===o||t&&o&&$o(t,o,(d,_)=>function sd(r,e){return r.field.isEqual(e.field)&&(o=e.transform,(t=r.transform)instanceof Gl&&o instanceof Gl||t instanceof zl&&o instanceof zl?$o(t.elements,o.elements,ri):t instanceof $u&&o instanceof $u?ri(t._t,o._t):t instanceof Nu&&o instanceof Nu);var t,o}(d,_))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,o}class E extends zu{constructor(e,t,o,d=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class O extends zu{constructor(e,t,o,d,_=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=d,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function q(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=r.data.field(t);e.set(t,o)}}),e}function ae(r,e,t){const o=new Map;Ln(r.length===t.length);for(let d=0;d<t.length;d++){const _=r[d],I=_.transform,k=e.data.field(_.field);o.set(_.field,hu(I,k,t[d]))}return o}function Te(r,e,t){const o=new Map;for(const d of r){const _=d.transform,I=t.data.field(d.field);o.set(d.field,fl(_,I,e))}return o}class Fe extends zu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class at extends zu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ft{constructor(e){this.count=e}}var tn,Xt;function pi(r){switch(r){default:return Vn();case Ut.CANCELLED:case Ut.UNKNOWN:case Ut.DEADLINE_EXCEEDED:case Ut.RESOURCE_EXHAUSTED:case Ut.INTERNAL:case Ut.UNAVAILABLE:case Ut.UNAUTHENTICATED:return!1;case Ut.INVALID_ARGUMENT:case Ut.NOT_FOUND:case Ut.ALREADY_EXISTS:case Ut.PERMISSION_DENIED:case Ut.FAILED_PRECONDITION:case Ut.ABORTED:case Ut.OUT_OF_RANGE:case Ut.UNIMPLEMENTED:case Ut.DATA_LOSS:return!0}}function yi(r){if(void 0===r)return Hr("GRPC error has no .code"),Ut.UNKNOWN;switch(r){case tn.OK:return Ut.OK;case tn.CANCELLED:return Ut.CANCELLED;case tn.UNKNOWN:return Ut.UNKNOWN;case tn.DEADLINE_EXCEEDED:return Ut.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return Ut.RESOURCE_EXHAUSTED;case tn.INTERNAL:return Ut.INTERNAL;case tn.UNAVAILABLE:return Ut.UNAVAILABLE;case tn.UNAUTHENTICATED:return Ut.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return Ut.INVALID_ARGUMENT;case tn.NOT_FOUND:return Ut.NOT_FOUND;case tn.ALREADY_EXISTS:return Ut.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return Ut.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return Ut.FAILED_PRECONDITION;case tn.ABORTED:return Ut.ABORTED;case tn.OUT_OF_RANGE:return Ut.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return Ut.UNIMPLEMENTED;case tn.DATA_LOSS:return Ut.DATA_LOSS;default:return Vn()}}(Xt=tn||(tn={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class Un{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[d,_]of o)if(this.equalsFn(d,e))return _}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0===d)return this.inner[o]=[[e,t]],void this.innerSize++;for(let _=0;_<d.length;_++)if(this.equalsFn(d[_][0],e))return void(d[_]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[t]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,(t,o)=>{for(const[d,_]of o)e(d,_)})}isEmpty(){return Ja(this.inner)}size(){return this.innerSize}}const ti=new Nr(En.comparator);function hi(){return ti}const gr=new Nr(En.comparator);function ts(...r){let e=gr;for(const t of r)e=e.insert(t.key,t);return e}function hr(r){let e=gr;return r.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function nr(){return Wo()}function Tl(){return Wo()}function Wo(){return new Un(r=>r.toString(),(r,e)=>r.isEqual(e))}const Ao=new Nr(En.comparator),Dl=new er(En.comparator);function xi(...r){let e=Dl;for(const t of r)e=e.add(t);return e}const vu=new er(Oi);function wu(){return vu}class Jl{constructor(e,t,o,d,_){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,t)),new Jl(Sn.min(),o,wu(),hi(),xi())}}class su{constructor(e,t,o,d,_){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,t){return new su(uo.EMPTY_BYTE_STRING,t,xi(),xi(),xi())}}class Ku{constructor(e,t,o,d){this.gt=e,this.removedTargetIds=t,this.key=o,this.yt=d}}class ac{constructor(e,t){this.targetId=e,this.It=t}}class Qn{constructor(e,t,o=uo.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=d}}class Ri{constructor(){this.Tt=0,this.Et=Ma(),this.At=uo.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=xi(),t=xi(),o=xi();return this.Et.forEach((d,_)=>{switch(_){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:o=o.add(d);break;default:Vn()}}),new su(this.At,this.Rt,e,t,o)}Dt(){this.bt=!1,this.Et=Ma()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class Fi{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=hi(),this.Bt=ns(),this.Lt=new er(Oi)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const o=this.Qt(t);switch(e.state){case 0:this.jt(t)&&o.Vt(e.resumeToken);break;case 1:o.kt(),o.Pt||o.Dt(),o.Vt(e.resumeToken);break;case 2:o.kt(),o.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(o.Mt(),o.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),o.Vt(e.resumeToken));break;default:Vn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((o,d)=>{this.jt(d)&&t(d)})}zt(e){const t=e.targetId,o=e.It.count,d=this.Ht(t);if(d){const _=d.target;if(Je(_))if(0===o){const I=new En(_.path);this.Kt(t,I,bs.newNoDocument(I,Sn.min()))}else Ln(1===o);else this.Jt(t)!==o&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((_,I)=>{const k=this.Ht(I);if(k){if(_.current&&Je(k.target)){const ne=new En(k.target.path);null!==this.$t.get(ne)||this.Xt(I,ne)||this.Kt(I,ne,bs.newNoDocument(ne,e))}_.vt&&(t.set(I,_.St()),_.Dt())}});let o=xi();this.Bt.forEach((_,I)=>{let k=!0;I.forEachWhile(ne=>{const le=this.Ht(ne);return!le||2===le.purpose||(k=!1,!1)}),k&&(o=o.add(_))}),this.$t.forEach((_,I)=>I.setReadTime(e));const d=new Jl(e,t,this.Lt,this.$t,o);return this.$t=hi(),this.Bt=ns(),this.Lt=new er(Oi),d}qt(e,t){if(!this.jt(e))return;const o=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,o),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,o){if(!this.jt(e))return;const d=this.Qt(e);this.Xt(e,t)?d.Ct(t,1):d.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),o&&(this.$t=this.$t.insert(t,o))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Ri,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new er(Oi),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||dn("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new Ri),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function ns(){return new Nr(En.comparator)}function Ma(){return new Nr(En.comparator)}const Xl={asc:"ASCENDING",desc:"DESCENDING"},Ga={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Eu{constructor(e,t){this.databaseId=e,this.dt=t}}function fo(r,e){return r.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wl(r,e){return r.dt?e.toBase64():e.toUint8Array()}function Pd(r,e){return fo(r,e.toTimestamp())}function rs(r){return Ln(!!r),Sn.fromTimestamp(function(e){const t=aa(e);return new Xr(t.seconds,t.nanos)}(r))}function bu(r,e){return(t=r,new Sr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Rl(r){const e=Sr.fromString(r);return Ln(Mp(e)),e}function Iu(r,e){return bu(r.databaseId,e.path)}function Kl(r,e){const t=Rl(e);if(t.get(1)!==r.databaseId.projectId)throw new an(Ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new an(Ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new En(hf(t))}function cf(r,e){return bu(r.databaseId,e)}function df(r){const e=Rl(r);return 4===e.length?Sr.emptyPath():hf(e)}function qu(r){return new Sr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function hf(r){return Ln(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function bc(r,e,t){return{name:Iu(r,e),fields:t.value.mapValue.fields}}function Bc(r,e,t){const o=Kl(r,e.name),d=rs(e.updateTime),_=new Xo({mapValue:{fields:e.fields}}),I=bs.newFoundDocument(o,d,_);return t&&I.setHasCommittedMutations(),t?I.setHasCommittedMutations():I}function Hc(r,e){let t;if(e instanceof E)t={update:bc(r,e.key,e.value)};else if(e instanceof Fe)t={delete:Iu(r,e.key)};else if(e instanceof O)t={update:bc(r,e.key,e.data),updateMask:rm(e.fieldMask)};else{if(!(e instanceof at))return Vn();t={verify:Iu(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(d,_){const I=_.transform;if(I instanceof Nu)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof Gl)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof zl)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof $u)return{fieldPath:_.field.canonicalString(),increment:I._t};throw Vn()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:Pd(r,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:Vn()),t;var d}function uh(r,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?vs.updateTime(rs(d.updateTime)):void 0!==d.exists?vs.exists(d.exists):vs.none():vs.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(_,I){let k=null;"setToServerValue"in I?(Ln("REQUEST_TIME"===I.setToServerValue),k=new Nu):"appendMissingElements"in I?k=new Gl(I.appendMissingElements.values||[]):"removeAllFromArray"in I?k=new zl(I.removeAllFromArray.values||[]):"increment"in I?k=new $u(_,I.increment):Vn();const ne=Hs.fromServerFormat(I.fieldPath);return new yu(ne,k)}(r,d)):[];var d;if(e.update){const d=Kl(r,e.update.name),_=new Xo({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new Go((e.updateMask.fieldPaths||[]).map(le=>Hs.fromServerFormat(le)));return new O(d,_,I,t,o)}return new E(d,_,t,o)}if(e.delete){const d=Kl(r,e.delete);return new Fe(d,t)}if(e.verify){const d=Kl(r,e.verify);return new at(d,t)}return Vn()}function ff(r,e){return{documents:[cf(r,e.path)]}}function ch(r,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=cf(r,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=cf(r,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function(ne){if(0===ne.length)return;const le=ne.map(be=>function(st){if("=="===st.op){if(Ha(st.value))return{unaryFilter:{field:Ic(st.field),op:"IS_NAN"}};if(Ba(st.value))return{unaryFilter:{field:Ic(st.field),op:"IS_NULL"}}}else if("!="===st.op){if(Ha(st.value))return{unaryFilter:{field:Ic(st.field),op:"IS_NOT_NAN"}};if(Ba(st.value))return{unaryFilter:{field:Ic(st.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ic(st.field),op:fh(st.op),value:st.value}}}(be));return 1===le.length?le[0]:{compositeFilter:{op:"AND",filters:le}}}(e.filters);d&&(t.structuredQuery.where=d);const _=function(ne){if(0!==ne.length)return ne.map(le=>{return{field:Ic((be=le).field),direction:Cu(be.dir)};var be})}(e.orderBy);_&&(t.structuredQuery.orderBy=_);const I=(le=e.limit,r.dt||de(le)?le:{value:le});var le,k,ne;return null!==I&&(t.structuredQuery.limit=I),e.startAt&&(t.structuredQuery.startAt={before:(k=e.startAt).inclusive,values:k.position}),e.endAt&&(t.structuredQuery.endAt={before:!(ne=e.endAt).inclusive,values:ne.position}),t}function dh(r){let e=df(r.parent);const t=r.structuredQuery,o=t.from?t.from.length:0;let d=null;if(o>0){Ln(1===o);const be=t.from[0];be.allDescendants?d=be.collectionId:e=e.child(be.collectionId)}let _=[];t.where&&(_=pf(t.where));let I=[];t.orderBy&&(I=t.orderBy.map(be=>{return new la(jc((st=be).field),function(kt){switch(kt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(st.direction));var st}));let k=null;t.limit&&(k=function(be){let st;return st="object"==typeof be?be.value:be,de(st)?null:st}(t.limit));let ne=null;var be;t.startAt&&(ne=new So((be=t.startAt).values||[],!!be.before));let le=null;return t.endAt&&(le=function(be){return new So(be.values||[],!be.before)}(t.endAt)),du(e,d,I,_,k,"F",ne,le)}function pf(r){return r?void 0!==r.unaryFilter?[xp(r)]:void 0!==r.fieldFilter?[ph(r)]:void 0!==r.compositeFilter?r.compositeFilter.filters.map(e=>pf(e)).reduce((e,t)=>e.concat(t)):Vn():[]}function Cu(r){return Xl[r]}function fh(r){return Ga[r]}function Ic(r){return{fieldPath:r.canonicalString()}}function jc(r){return Hs.fromServerFormat(r.fieldPath)}function ph(r){return ei.create(jc(r.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vn()}}(r.fieldFilter.op),r.fieldFilter.value)}function xp(r){switch(r.unaryFilter.op){case"IS_NAN":const e=jc(r.unaryFilter.field);return ei.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=jc(r.unaryFilter.field);return ei.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=jc(r.unaryFilter.field);return ei.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=jc(r.unaryFilter.field);return ei.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Vn()}}function rm(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Mp(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}function eu(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=gh(e)),e=sm(r.get(t),e);return gh(e)}function sm(r,e){let t=e;const o=r.length;for(let d=0;d<o;d++){const _=r.charAt(d);switch(_){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=_}}return t}function gh(r){return r+"\x01\x01"}function Tu(r){const e=r.length;if(Ln(e>=2),2===e)return Ln("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Sr.emptyPath();const t=e-2,o=[];let d="";for(let _=0;_<e;){const I=r.indexOf("\x01",_);switch((I<0||I>t)&&Vn(),r.charAt(I+1)){case"\x01":const k=r.substring(_,I);let ne;0===d.length?ne=k:(d+=k,ne=d,d=""),o.push(ne);break;case"\x10":d+=r.substring(_,I),d+="\0";break;case"\x11":d+=r.substring(_,I+1);break;default:Vn()}_=I+2}return new Sr(o)}const kd=["userId","batchId"];function Fd(r,e){return[r,eu(e)]}function mh(r,e,t){return[r,eu(e),t]}const gf={},_h=["prefixPath","collectionGroup","readTime","documentId"],Op=["prefixPath","collectionGroup","documentId"],yh=["collectionGroup","readTime","prefixPath","documentId"],od=["canonicalId","targetId"],Rp=["targetId","path"],Np=["path","targetId"],Pp=["collectionId","parent"],mf=["indexId","uid"],om=["uid","sequenceNumber"],am=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kp=["indexId","uid","orderedDocumentKey"],Fp=["userId","collectionPath","documentId"],vh=["userId","collectionPath","largestBatchId"],_f=["userId","collectionGroup","largestBatchId"],yf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Lp=[...yf,"documentOverlays"],wh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vf=wh,lc=[...vf,"indexConfiguration","indexState","indexEntries"];class Ms extends Ol{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function $s(r,e){const t=Tn(r);return D.N(t.ee,e)}class uc{constructor(e,t,o,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const _=this.mutations[d];_.key.isEqual(e.key)&&lh(_,e,o[d])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=eo(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=eo(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Tl();return this.mutations.forEach(d=>{const _=e.get(d.key),I=_.overlayedDocument;let k=this.applyToLocalView(I,_.mutatedFields);k=t.has(d.key)?null:k;const ne=Wu(I,k);null!==ne&&o.set(d.key,ne),I.isValidDocument()||I.convertToNoDocument(Sn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xi())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,(t,o)=>g(t,o))&&$o(this.baseMutations,e.baseMutations,(t,o)=>g(t,o))}}class ad{constructor(e,t,o,d){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=d}static from(e,t,o){Ln(e.mutations.length===o.length);let d=Ao;const _=e.mutations;for(let I=0;I<_.length;I++)d=d.insert(_[I].key,o[I].version);return new ad(e,t,o,d)}}class pl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class pu{constructor(e,t,o,d,_=Sn.min(),I=Sn.min(),k=uo.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=k}withSequenceNumber(e){return new pu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new pu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ld{constructor(e){this.ne=e}}function wf(r,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ld(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Iu(d=r.ne,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:fo(d,_.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Cc(e.version)};else{if(!e.isUnknownDocument())return Vn();o.unknownDocument={path:t.path.toArray(),version:Cc(e.version)}}var d,_;return o}function ld(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Cc(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function dc(r){const e=new Xr(r.seconds,r.nanoseconds);return Sn.fromTimestamp(e)}function hc(r,e){const t=(e.baseMutations||[]).map(_=>uh(r.ne,_));for(let _=0;_<e.mutations.length-1;++_){const I=e.mutations[_];_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(I.updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_)}const o=e.mutations.map(_=>uh(r.ne,_)),d=Xr.fromMillis(e.localWriteTimeMs);return new uc(e.batchId,d,t,o)}function Tc(r){const e=dc(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?dc(r.lastLimboFreeSnapshotVersion):Sn.min();let o;var d;return void 0!==r.query.documents?(Ln(1===(d=r.query).documents.length),o=js(Cl(df(d.documents[0])))):o=js(dh(r.query)),new pu(o,r.targetId,0,r.lastListenSequenceNumber,e,t,uo.fromBase64String(r.resumeToken))}function Eh(r,e){const t=Cc(e.snapshotVersion),o=Cc(e.lastLimboFreeSnapshotVersion);let d;d=Je(e.target)?ff(r.ne,e.target):ch(r.ne,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:j(e.target),readTime:t,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function Vd(r){const e=dh({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?N(e,e.limit,"L"):e}function Dc(r,e){return new pl(e.largestBatchId,uh(r.ne,e.overlayMutation))}function Ef(r,e){const t=e.path.lastSegment();return[r,eu(e.path.popLast()),t]}function bh(r,e,t,o){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Cc(o.readTime),documentKey:eu(o.documentKey.path),largestBatchId:o.largestBatchId}}class $c{getBundleMetadata(e,t){return ku(e).get(t).next(o=>{if(o)return{id:(d=o).bundleId,createTime:dc(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return ku(e).put({bundleId:(o=t).id,createTime:Cc(rs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Ih(e).get(t).next(o=>{if(o)return{name:(d=o).name,query:Vd(d.bundledQuery),readTime:dc(d.readTime)};var d})}saveNamedQuery(e,t){return Ih(e).put({name:(o=t).name,readTime:Cc(rs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function ku(r){return $s(r,"bundles")}function Ih(r){return $s(r,"namedQueries")}class ud{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new ud(e,t.uid||"")}getOverlay(e,t){return cd(e).get(Ef(this.userId,t)).next(o=>o?Dc(this.wt,o):null)}getOverlays(e,t){const o=nr();return C.forEach(t,d=>this.getOverlay(e,d).next(_=>{null!==_&&o.set(d,_)})).next(()=>o)}saveOverlays(e,t,o){const d=[];return o.forEach((_,I)=>{const k=new pl(t,I);d.push(this.ie(e,k))}),C.waitFor(d)}removeOverlaysForBatchId(e,t,o){const d=new Set;t.forEach(I=>d.add(eu(I.getCollectionPath())));const _=[];return d.forEach(I=>{const k=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);_.push(cd(e).W("collectionPathOverlayIndex",k))}),C.waitFor(_)}getOverlaysForCollection(e,t,o){const d=nr(),_=eu(t),I=IDBKeyRange.bound([this.userId,_,o],[this.userId,_,Number.POSITIVE_INFINITY],!0);return cd(e).K("collectionPathOverlayIndex",I).next(k=>{for(const ne of k){const le=Dc(this.wt,ne);d.set(le.getKey(),le)}return d})}getOverlaysForCollectionGroup(e,t,o,d){const _=nr();let I;const k=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cd(e).J({index:"collectionGroupOverlayIndex",range:k},(ne,le,be)=>{const st=Dc(this.wt,le);_.size()<d||st.largestBatchId===I?(_.set(st.getKey(),st),I=st.largestBatchId):be.done()}).next(()=>_)}ie(e,t){return cd(e).put(function(o,d,_){const[I,k,ne]=Ef(d,_.mutation.key);return{userId:d,collectionPath:k,documentId:ne,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Hc(o.ne,_.mutation)}}(this.wt,this.userId,t))}}function cd(r){return $s(r,"documentOverlays")}class Gc{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(es(e.integerValue));else if("doubleValue"in e){const o=es(e.doubleValue);isNaN(o)?this.ce(t,13):(this.ce(t,15),He(o)?t.ae(0):t.ae(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ce(t,20),"string"==typeof o?t.he(o):(t.he(`${o.seconds||""}`),t.ae(o.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Aa(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ce(t,45),t.ae(o.latitude||0),t.ae(o.longitude||0)}else"mapValue"in e?Hl(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Vn()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const o=e.fields||{};this.ce(t,55);for(const d of Object.keys(o))this.le(d,t),this.oe(o[d],t)}me(e,t){const o=e.values||[];this.ce(t,50);for(const d of o)this.oe(d,t)}_e(e,t){this.ce(t,37),En.fromName(e).path.forEach(o=>{this.ce(t,60),this.ge(o,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function bf(r){if(0===r)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function Vp(r){const e=64-function(t){let o=0;for(let d=0;d<8;++d){const _=bf(255&t[d]);if(o+=_,8!==_)break}return o}(r);return Math.ceil(e/8)}Gc.ye=new Gc;class Du{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ie(o.value),o=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ie(o);else if(o<2048)this.Ie(960|o>>>6),this.Ie(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o);else{const d=t.codePointAt(0);this.Ie(240|d>>>18),this.Ie(128|63&d>>>12),this.Ie(128|63&d>>>6),this.Ie(128|63&d)}}this.Te()}Pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const d=t.codePointAt(0);this.Ae(240|d>>>18),this.Ae(128|63&d>>>12),this.Ae(128|63&d>>>6),this.Ae(128|63&d)}}this.Re()}ve(e){const t=this.Ve(e),o=Vp(t);this.Se(1+o),this.buffer[this.position++]=255&o;for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=255&t[d]}De(e){const t=this.Ve(e),o=Vp(t);this.Se(1+o),this.buffer[this.position++]=~(255&o);for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(d){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,d,!1),new Uint8Array(_.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let d=1;d<t.length;++d)t[d]^=o?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class Ch{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class Th{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class zc{constructor(){this.Oe=new Du,this.Fe=new Ch(this.Oe),this.$e=new Th(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class fc{constructor(e,t,o,d){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=d}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new fc(this.indexId,this.documentKey,this.arrayValue,o)}}function Sc(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=Wc(r.arrayValue,e.arrayValue),0!==t?t:(t=Wc(r.directionalValue,e.directionalValue),0!==t?t:En.comparator(r.documentKey,e.documentKey)))}function Wc(r,e){for(let t=0;t<r.length&&t<e.length;++t){const o=r[t]-e[t];if(0!==o)return o}return r.length-e.length}class If{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const o=t;o.ht()?this.Ke=o:this.qe.push(o)}}Ge(e){const t=Qo(e);if(void 0!==t&&!this.Qe(t))return!1;const o=Ua(e);let d=0,_=0;for(;d<o.length&&this.Qe(o[d]);++d);if(d===o.length)return!0;if(void 0!==this.Ke){const I=o[d];if(!this.je(this.Ke,I)||!this.We(this.Ue[_++],I))return!1;++d}for(;d<o.length;++d){const I=o[d];if(_>=this.Ue.length||!this.We(this.Ue[_++],I))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Up{constructor(){this.ze=new h}addToCollectionParentIndex(e,t){return this.ze.add(t),C.resolve()}getCollectionParents(e,t){return C.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return C.resolve()}deleteFieldIndex(e,t){return C.resolve()}getDocumentsMatchingTarget(e,t){return C.resolve(null)}getIndexType(e,t){return C.resolve(0)}getFieldIndexes(e,t){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,t){return C.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,t){return C.resolve(Wr.min())}updateCollectionGroup(e,t,o){return C.resolve()}updateIndexEntries(e,t){return C.resolve()}}class h{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t]||new er(Sr.comparator),_=!d.has(o);return this.index[t]=d.add(o),_}has(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t];return d&&d.has(o)}getEntries(e){return(this.index[e]||new er(Sr.comparator)).toArray()}}const u=new Uint8Array(0);class c{constructor(e,t){this.user=e,this.databaseId=t,this.He=new h,this.Je=new Un(o=>j(o),(o,d)=>ye(o,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const o=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const _={collectionId:o,parent:eu(d)};return y(e).put(_)}return C.resolve()}getCollectionParents(e,t){const o=[],d=IDBKeyRange.bound([t,""],[va(t),""],!1,!0);return y(e).K(d).next(_=>{for(const I of _){if(I.collectionId!==t)break;o.push(Tu(I.parent))}return o})}addFieldIndex(e,t){const o=U(e),d={indexId:(I=t).indexId,collectionGroup:I.collectionGroup,fields:I.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var I;delete d.indexId;const _=o.add(d);if(t.indexState){const I=te(e);return _.next(k=>{I.put(bh(k,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return _.next()}deleteFieldIndex(e,t){const o=U(e),d=te(e),_=x(e);return o.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=x(e);let d=!0;const _=new Map;return C.forEach(this.Ye(t),I=>this.Xe(e,I).next(k=>{d&&(d=!!k),_.set(I,k)})).next(()=>{if(d){let I=xi();const k=[];return C.forEach(_,(ne,le)=>{var be;dn("IndexedDbIndexManager",`Using index ${be=ne,`id=${be.indexId}|cg=${be.collectionGroup}|f=${be.fields.map(wo=>`${wo.fieldPath}:${wo.kind}`).join(",")}`} to execute ${j(t)}`);const st=function(wo,ta){const Cs=Qo(ta);if(void 0===Cs)return null;for(const xo of Nt(wo,Cs.fieldPath))switch(xo.op){case"array-contains-any":return xo.value.arrayValue.values||[];case"array-contains":return[xo.value]}return null}(le,ne),kt=function(wo,ta){const Cs=new Map;for(const xo of Ua(ta))for(const Al of Nt(wo,xo.fieldPath))switch(Al.op){case"==":case"in":Cs.set(xo.fieldPath.canonicalString(),Al.value);break;case"not-in":case"!=":return Cs.set(xo.fieldPath.canonicalString(),Al.value),Array.from(Cs.values())}return null}(le,ne),rn=function(wo,ta){const Cs=[];let xo=!0;for(const Al of Ua(ta)){const af=0===Al.kind?_n(wo,Al.fieldPath,wo.startAt):Ci(wo,Al.fieldPath,wo.startAt);Cs.push(af.value),xo&&(xo=af.inclusive)}return new So(Cs,xo)}(le,ne),cn=function(wo,ta){const Cs=[];let xo=!0;for(const Al of Ua(ta)){const af=0===Al.kind?Ci(wo,Al.fieldPath,wo.endAt):_n(wo,Al.fieldPath,wo.endAt);Cs.push(af.value),xo&&(xo=af.inclusive)}return new So(Cs,xo)}(le,ne),jn=this.Ze(ne,le,rn),Mi=this.Ze(ne,le,cn),Rs=this.tn(ne,le,kt),Lo=this.en(ne.indexId,st,jn,rn.inclusive,Mi,cn.inclusive,Rs);return C.forEach(Lo,wo=>o.j(wo,t.limit).next(ta=>{ta.forEach(Cs=>{const xo=En.fromSegments(Cs.documentKey);I.has(xo)||(I=I.add(xo),k.push(xo))})}))}).next(()=>k)}return C.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,o,d,_,I,k){const ne=(null!=t?t.length:1)*Math.max(o.length,_.length),le=ne/(null!=t?t.length:1),be=[];for(let st=0;st<ne;++st){const kt=t?this.nn(t[st/le]):u,rn=this.sn(e,kt,o[st%le],d),cn=this.rn(e,kt,_[st%le],I),jn=k.map(Mi=>this.sn(e,kt,Mi,!0));be.push(...this.createRange(rn,cn,jn))}return be}sn(e,t,o,d){const _=new fc(e,En.empty(),t,o);return d?_:_.Le()}rn(e,t,o,d){const _=new fc(e,En.empty(),t,o);return d?_.Le():_}Xe(e,t){const o=new If(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(_=>{let I=null;for(const k of _)o.Ge(k)&&(!I||k.fields.length>I.fields.length)&&(I=k);return I})}getIndexType(e,t){let o=2;return C.forEach(this.Ye(t),d=>this.Xe(e,d).next(_=>{_?0!==o&&_.fields.length<function(I){let k=new er(Hs.comparator),ne=!1;for(const le of I.filters){const be=le;be.field.isKeyField()||("array-contains"===be.op||"array-contains-any"===be.op?ne=!0:k=k.add(be.field))}for(const le of I.orderBy)le.field.isKeyField()||(k=k.add(le.field));return k.size+(ne?1:0)}(d)&&(o=1):o=0})).next(()=>o)}on(e,t){const o=new zc;for(const d of Ua(e)){const _=t.data.field(d.fieldPath);if(null==_)return null;const I=o.Be(d.kind);Gc.ye.re(_,I)}return o.Me()}nn(e){const t=new zc;return Gc.ye.re(e,t.Be(0)),t.Me()}un(e,t){const o=new zc;return Gc.ye.re(zo(this.databaseId,t),o.Be(function(d){const _=Ua(d);return 0===_.length?0:_[_.length-1].kind}(e))),o.Me()}tn(e,t,o){if(null===o)return[];let d=[];d.push(new zc);let _=0;for(const I of Ua(e)){const k=o[_++];for(const ne of d)if(this.cn(t,I.fieldPath)&&sl(k))d=this.an(d,I,k);else{const le=ne.Be(I.kind);Gc.ye.re(k,le)}}return this.hn(d)}Ze(e,t,o){return this.tn(e,t,o.position)}hn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Me();return t}an(e,t,o){const d=[...e],_=[];for(const I of o.arrayValue.values||[])for(const k of d){const ne=new zc;ne.seed(k.Me()),Gc.ye.re(I,ne.Be(t.kind)),_.push(ne)}return _}cn(e,t){return!!e.filters.find(o=>o instanceof ei&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=U(e),d=te(e);return(t?o.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.K()).next(_=>{const I=[];return C.forEach(_,k=>d.get([k.indexId,this.uid]).next(ne=>{I.push(function(le,be){const st=be?new il(be.sequenceNumber,new Wr(dc(be.readTime),new En(Tu(be.documentKey)),be.largestBatchId)):il.empty(),kt=le.fields.map(([rn,cn])=>new Zl(Hs.fromServerFormat(rn),cn));return new dl(le.indexId,le.collectionGroup,kt,st)}(k,ne))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,d)=>{const _=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==_?_:Oi(o.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const d=U(e),_=te(e);return this.ln(e).next(I=>d.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(k=>C.forEach(k,ne=>_.put(bh(ne.indexId,this.user,I,o)))))}updateIndexEntries(e,t){const o=new Map;return C.forEach(t,(d,_)=>{const I=o.get(d.collectionGroup);return(I?C.resolve(I):this.getFieldIndexes(e,d.collectionGroup)).next(k=>(o.set(d.collectionGroup,k),C.forEach(k,ne=>this.fn(e,d,ne).next(le=>{const be=this.dn(_,ne);return le.isEqual(be)?C.resolve():this._n(e,_,ne,le,be)}))))})}wn(e,t,o,d){return x(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.un(o,t.key),documentKey:t.key.path.toArray()})}mn(e,t,o,d){return x(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.un(o,t.key),t.key.path.toArray()])}fn(e,t,o){const d=x(e);let _=new er(Sc);return d.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.un(o,t)])},(I,k)=>{_=_.add(new fc(o.indexId,t,k.arrayValue,k.directionalValue))}).next(()=>_)}dn(e,t){let o=new er(Sc);const d=this.on(t,e);if(null==d)return o;const _=Qo(t);if(null!=_){const I=e.data.field(_.fieldPath);if(sl(I))for(const k of I.arrayValue.values||[])o=o.add(new fc(t.indexId,e.key,this.nn(k),d))}else o=o.add(new fc(t.indexId,e.key,u,d));return o}_n(e,t,o,d,_){dn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const I=[];return function(k,ne,le,be,st){const kt=k.getIterator(),rn=ne.getIterator();let cn=Bl(kt),jn=Bl(rn);for(;cn||jn;){let Mi=!1,Rs=!1;if(cn&&jn){const Lo=le(cn,jn);Lo<0?Rs=!0:Lo>0&&(Mi=!0)}else null!=cn?Rs=!0:Mi=!0;Mi?(be(jn),jn=Bl(rn)):Rs?(st(cn),cn=Bl(kt)):(cn=Bl(kt),jn=Bl(rn))}}(d,_,Sc,k=>{I.push(this.wn(e,t,o,k))},k=>{I.push(this.mn(e,t,o,k))}),C.waitFor(I)}ln(e){let t=1;return te(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,_)=>{_.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((I,k)=>Sc(I,k)).filter((I,k,ne)=>!k||0!==Sc(I,ne[k-1]));const d=[];d.push(e);for(const I of o){const k=Sc(I,e),ne=Sc(I,t);if(0===k)d[0]=e.Le();else if(k>0&&ne<0)d.push(I),d.push(I.Le());else if(ne>0)break}d.push(t);const _=[];for(let I=0;I<d.length;I+=2)_.push(IDBKeyRange.bound([d[I].indexId,this.uid,d[I].arrayValue,d[I].directionalValue,u,[]],[d[I+1].indexId,this.uid,d[I+1].arrayValue,d[I+1].directionalValue,u,[]]));return _}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(me)}getMinOffset(e,t){return C.mapArray(this.Ye(t),o=>this.Xe(e,o).next(d=>d||Vn())).next(me)}}function y(r){return $s(r,"collectionParents")}function x(r){return $s(r,"indexEntries")}function U(r){return $s(r,"indexConfiguration")}function te(r){return $s(r,"indexState")}function me(r){Ln(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<r.length;o++){const d=r[o].indexState.offset;Do(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new Wr(e.readTime,e.documentKey,t)}const Oe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ye{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Ye(e,Ye.DEFAULT_COLLECTION_PERCENTILE,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gt(r,e,t){const o=r.store("mutations"),d=r.store("documentMutations"),_=[],I=IDBKeyRange.only(t.batchId);let k=0;const ne=o.J({range:I},(be,st,kt)=>(k++,kt.delete()));_.push(ne.next(()=>{Ln(1===k)}));const le=[];for(const be of t.mutations){const st=mh(e,be.key.path,t.batchId);_.push(d.delete(st)),le.push(be.key)}return C.waitFor(_).next(()=>le)}function zt(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Vn();e=r.noDocument}return JSON.stringify(e).length}Ye.DEFAULT_COLLECTION_PERCENTILE=10,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ye.DEFAULT=new Ye(41943040,Ye.DEFAULT_COLLECTION_PERCENTILE,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ye.DISABLED=new Ye(-1,0,0);class nn{constructor(e,t,o,d){this.userId=e,this.wt=t,this.indexManager=o,this.referenceDelegate=d,this.gn={}}static se(e,t,o,d){Ln(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new nn(_,t,o,d)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ti(e).J({index:"userMutationsIndex",range:o},(d,_,I)=>{t=!1,I.done()}).next(()=>t)}addMutationBatch(e,t,o,d){const _=Zr(e),I=Ti(e);return I.add({}).next(k=>{Ln("number"==typeof k);const ne=new uc(k,t,o,d),le=function(kt,rn,cn){const jn=cn.baseMutations.map(Rs=>Hc(kt.ne,Rs)),Mi=cn.mutations.map(Rs=>Hc(kt.ne,Rs));return{userId:rn,batchId:cn.batchId,localWriteTimeMs:cn.localWriteTime.toMillis(),baseMutations:jn,mutations:Mi}}(this.wt,this.userId,ne),be=[];let st=new er((kt,rn)=>Oi(kt.canonicalString(),rn.canonicalString()));for(const kt of d){const rn=mh(this.userId,kt.key.path,k);st=st.add(kt.key.path.popLast()),be.push(I.put(le)),be.push(_.put(rn,gf))}return st.forEach(kt=>{be.push(this.indexManager.addToCollectionParentIndex(e,kt))}),e.addOnCommittedListener(()=>{this.gn[k]=ne.keys()}),C.waitFor(be).next(()=>ne)})}lookupMutationBatch(e,t){return Ti(e).get(t).next(o=>o?(Ln(o.userId===this.userId),hc(this.wt,o)):null)}yn(e,t){return this.gn[t]?C.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const d=o.keys();return this.gn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,d=IDBKeyRange.lowerBound([this.userId,o]);let _=null;return Ti(e).J({index:"userMutationsIndex",range:d},(I,k,ne)=>{k.userId===this.userId&&(Ln(k.batchId>=o),_=hc(this.wt,k)),ne.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ti(e).J({index:"userMutationsIndex",range:t,reverse:!0},(d,_,I)=>{o=_.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ti(e).K("userMutationsIndex",t).next(o=>o.map(d=>hc(this.wt,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Fd(this.userId,t.path),d=IDBKeyRange.lowerBound(o),_=[];return Zr(e).J({range:d},(I,k,ne)=>{const[le,be,st]=I,kt=Tu(be);if(le===this.userId&&t.path.isEqual(kt))return Ti(e).get(st).next(rn=>{if(!rn)throw Vn();Ln(rn.userId===this.userId),_.push(hc(this.wt,rn))});ne.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new er(Oi);const d=[];return t.forEach(_=>{const I=Fd(this.userId,_.path),k=IDBKeyRange.lowerBound(I),ne=Zr(e).J({range:k},(le,be,st)=>{const[kt,rn,cn]=le,jn=Tu(rn);kt===this.userId&&_.path.isEqual(jn)?o=o.add(cn):st.done()});d.push(ne)}),C.waitFor(d).next(()=>this.pn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1,_=Fd(this.userId,o),I=IDBKeyRange.lowerBound(_);let k=new er(Oi);return Zr(e).J({range:I},(ne,le,be)=>{const[st,kt,rn]=ne,cn=Tu(kt);st===this.userId&&o.isPrefixOf(cn)?cn.length===d&&(k=k.add(rn)):be.done()}).next(()=>this.pn(e,k))}pn(e,t){const o=[],d=[];return t.forEach(_=>{d.push(Ti(e).get(_).next(I=>{if(null===I)throw Vn();Ln(I.userId===this.userId),o.push(hc(this.wt,I))}))}),C.waitFor(d).next(()=>o)}removeMutationBatch(e,t){return Gt(e.ee,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),C.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return C.resolve();const o=IDBKeyRange.lowerBound([this.userId]),d=[];return Zr(e).J({range:o},(_,I,k)=>{if(_[0]===this.userId){const ne=Tu(_[1]);d.push(ne)}else k.done()}).next(()=>{Ln(0===d.length)})})}containsKey(e,t){return Jn(e,this.userId,t)}Tn(e){return za(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Jn(r,e,t){const o=Fd(e,t.path),d=o[1],_=IDBKeyRange.lowerBound(o);let I=!1;return Zr(r).J({range:_,H:!0},(k,ne,le)=>{const[be,st,kt]=k;be===e&&st===d&&(I=!0),le.done()}).next(()=>I)}function Ti(r){return $s(r,"mutations")}function Zr(r){return $s(r,"documentMutations")}function za(r){return $s(r,"mutationQueues")}class Sl{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Sl(0)}static Rn(){return new Sl(-1)}}class Su{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const o=new Sl(t.highestTargetId);return t.highestTargetId=o.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Sn.fromTimestamp(new Xr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.bn(e).next(d=>(d.highestListenSequenceNumber=t,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.Pn(e,d)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(o=>(o.targetCount+=1,this.Vn(t,o),this.Pn(e,o))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Au(e).delete(t.targetId)).next(()=>this.bn(e)).next(o=>(Ln(o.targetCount>0),o.targetCount-=1,this.Pn(e,o)))}removeTargets(e,t,o){let d=0;const _=[];return Au(e).J((I,k)=>{const ne=Tc(k);ne.sequenceNumber<=t&&null===o.get(ne.targetId)&&(d++,_.push(this.removeTargetData(e,ne)))}).next(()=>C.waitFor(_)).next(()=>d)}forEachTarget(e,t){return Au(e).J((o,d)=>{const _=Tc(d);t(_)})}bn(e){return Cf(e).get("targetGlobalKey").next(t=>(Ln(null!==t),t))}Pn(e,t){return Cf(e).put("targetGlobalKey",t)}vn(e,t){return Au(e).put(Eh(this.wt,t))}Vn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=j(t),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let _=null;return Au(e).J({range:d,index:"queryTargetsIndex"},(I,k,ne)=>{const le=Tc(k);ye(t,le.target)&&(_=le,ne.done())}).next(()=>_)}addMatchingKeys(e,t,o){const d=[],_=Ac(e);return t.forEach(I=>{const k=eu(I.path);d.push(_.put({targetId:o,path:k})),d.push(this.referenceDelegate.addReference(e,o,I))}),C.waitFor(d)}removeMatchingKeys(e,t,o){const d=Ac(e);return C.forEach(t,_=>{const I=eu(_.path);return C.waitFor([d.delete([o,I]),this.referenceDelegate.removeReference(e,o,_)])})}removeMatchingKeysForTargetId(e,t){const o=Ac(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),d=Ac(e);let _=xi();return d.J({range:o,H:!0},(I,k,ne)=>{const le=Tu(I[1]),be=new En(le);_=_.add(be)}).next(()=>_)}containsKey(e,t){const o=eu(t.path),d=IDBKeyRange.bound([o],[va(o)],!1,!0);let _=0;return Ac(e).J({index:"documentTargetsIndex",H:!0,range:d},([I,k],ne,le)=>{0!==I&&(_++,le.done())}).next(()=>_>0)}te(e,t){return Au(e).get(t).next(o=>o?Tc(o):null)}}function Au(r){return $s(r,"targets")}function Cf(r){return $s(r,"targetGlobal")}function Ac(r){return $s(r,"targetDocuments")}function Bp([r,e],[t,o]){const d=Oi(r,t);return 0===d?Oi(e,o):d}class dd{constructor(e){this.Sn=e,this.buffer=new er(Bp),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Bp(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lm{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;dn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,rt.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){pe(o)?dn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Fo(o)}yield t.kn(3e5)}))}}class um{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return C.resolve($i.ot);const o=new dd(t);return this.Mn.forEachTarget(e,d=>o.xn(d.sequenceNumber)).next(()=>this.Mn.Fn(e,d=>o.xn(d))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Mn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(dn("LruGarbageCollector","Garbage collection skipped; disabled"),C.resolve(Oe)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(dn("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Oe):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let o,d,_,I,k,ne,le;const be=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(st=>(st>this.params.maximumSequenceNumbersToCollect?(dn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${st}`),d=this.params.maximumSequenceNumbersToCollect):d=st,I=Date.now(),this.nthSequenceNumber(e,d))).next(st=>(o=st,k=Date.now(),this.removeTargets(e,o,t))).next(st=>(_=st,ne=Date.now(),this.removeOrphanedDocuments(e,o))).next(st=>(le=Date.now(),As()<=ve.in.DEBUG&&dn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-be}ms\n\tDetermined least recently used ${d} in `+(k-I)+`ms\n\tRemoved ${_} targets in `+(ne-k)+`ms\n\tRemoved ${st} documents in `+(le-ne)+`ms\nTotal Duration: ${le-be}ms`),C.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:_,documentsRemoved:st})))}}class uy{constructor(e,t){this.db=e,this.garbageCollector=new um(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(d=>o+d))}Bn(e){let t=0;return this.Fn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(o,d)=>t(d))}addReference(e,t,o){return Hp(e,o)}removeReference(e,t,o){return Hp(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Hp(e,t)}Un(e,t){return function(o,d){let _=!1;return za(o).Y(I=>Jn(o,I,d).next(k=>(k&&(_=!0),C.resolve(!k)))).next(()=>_)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let _=0;return this.Ln(e,(I,k)=>{if(k<=t){const ne=this.Un(e,I).next(le=>{if(!le)return _++,o.getEntry(e,I).next(()=>(o.removeEntry(I,Sn.min()),Ac(e).delete([0,eu(I.path)])))});d.push(ne)}}).next(()=>C.waitFor(d)).next(()=>o.apply(e)).next(()=>_)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Hp(e,t)}Ln(e,t){const o=Ac(e);let d,_=$i.ot;return o.J({index:"documentTargetsIndex"},([I,k],{path:ne,sequenceNumber:le})=>{0===I?(_!==$i.ot&&t(new En(Tu(d)),_),_=le,d=ne):_=$i.ot}).next(()=>{_!==$i.ot&&t(new En(Tu(d)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hp(r,e){return Ac(r).put((o=r.currentSequenceNumber,{targetId:0,path:eu(e.path),sequenceNumber:o}));var o}class Dh{constructor(){this.changes=new Un(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?C.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cy{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return xc(e).put(o)}removeEntry(e,t,o){return xc(e).delete(function(d,_){const I=d.path.toArray();return[I.slice(0,I.length-2),I[I.length-2],ld(_),I[I.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.qn(e,o)))}getEntry(e,t){let o=bs.newInvalidDocument(t);return xc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ud(t))},(d,_)=>{o=this.Kn(t,_)}).next(()=>o)}Gn(e,t){let o={size:0,document:bs.newInvalidDocument(t)};return xc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ud(t))},(d,_)=>{o={document:this.Kn(t,_),size:zt(_)}}).next(()=>o)}getEntries(e,t){let o=hi();return this.Qn(e,t,(d,_)=>{const I=this.Kn(d,_);o=o.insert(d,I)}).next(()=>o)}jn(e,t){let o=hi(),d=new Nr(En.comparator);return this.Qn(e,t,(_,I)=>{const k=this.Kn(_,I);o=o.insert(_,k),d=d.insert(_,zt(I))}).next(()=>({documents:o,Wn:d}))}Qn(e,t,o){if(t.isEmpty())return C.resolve();let d=new er(Ah);t.forEach(ne=>d=d.add(ne));const _=IDBKeyRange.bound(Ud(d.first()),Ud(d.last())),I=d.getIterator();let k=I.getNext();return xc(e).J({index:"documentKeyIndex",range:_},(ne,le,be)=>{const st=En.fromSegments([...le.prefixPath,le.collectionGroup,le.documentId]);for(;k&&Ah(k,st)<0;)o(k,null),k=I.getNext();k&&k.isEqual(st)&&(o(k,le),k=I.hasNext()?I.getNext():null),k?be.q(Ud(k)):be.done()}).next(()=>{for(;k;)o(k,null),k=I.hasNext()?I.getNext():null})}getAllFromCollection(e,t,o){const d=[t.popLast().toArray(),t.lastSegment(),ld(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],_=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xc(e).K(IDBKeyRange.bound(d,_,!0)).next(I=>{let k=hi();for(const ne of I){const le=this.Kn(En.fromSegments(ne.prefixPath.concat(ne.collectionGroup,ne.documentId)),ne);k=k.insert(le.key,le)}return k})}getAllFromCollectionGroup(e,t,o,d){let _=hi();const I=Sh(t,o),k=Sh(t,Wr.max());return xc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,k,!0)},(ne,le,be)=>{const st=this.Kn(En.fromSegments(le.prefixPath.concat(le.collectionGroup,le.documentId)),le);_=_.insert(st.key,st),_.size===d&&be.done()}).next(()=>_)}newChangeBuffer(e){return new cm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $p(e).get("remoteDocumentGlobalKey").next(t=>(Ln(!!t),t))}qn(e,t){return $p(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const o=function cc(r,e){let t;if(e.document)t=Bc(r.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=En.fromSegments(e.noDocument.path),d=dc(e.noDocument.readTime);t=bs.newNoDocument(o,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Vn();{const o=En.fromSegments(e.unknownDocument.path),d=dc(e.unknownDocument.version);t=bs.newUnknownDocument(o,d)}}return e.readTime&&t.setReadTime(function(o){const d=new Xr(o[0],o[1]);return Sn.fromTimestamp(d)}(e.readTime)),t}(this.wt,t);if(!o.isNoDocument()||!o.version.isEqual(Sn.min()))return o}return bs.newInvalidDocument(e)}}function jp(r){return new cy(r)}class cm extends Dh{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Un(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const t=[];let o=0,d=new er((_,I)=>Oi(_.canonicalString(),I.canonicalString()));return this.changes.forEach((_,I)=>{const k=this.Hn.get(_);if(t.push(this.zn.removeEntry(e,_,k.readTime)),I.isValidDocument()){const ne=wf(this.zn.wt,I);d=d.add(_.path.popLast()),o+=zt(ne)-k.size,t.push(this.zn.addEntry(e,_,ne))}else if(o-=k.size,this.trackRemovals){const ne=wf(this.zn.wt,I.convertToNoDocument(Sn.min()));t.push(this.zn.addEntry(e,_,ne))}}),d.forEach(_=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,_))}),t.push(this.zn.updateMetadata(e,o)),C.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(o=>(this.Hn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:o,Wn:d})=>(d.forEach((_,I)=>{this.Hn.set(_,{size:I,readTime:o.get(_).readTime})}),o))}}function $p(r){return $s(r,"remoteDocumentGlobal")}function xc(r){return $s(r,"remoteDocumentsV14")}function Ud(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Sh(r,e){const t=e.documentKey.path.toArray();return[r,ld(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ah(r,e){const t=r.path.toArray(),o=e.path.toArray();let d=0;for(let _=0;_<t.length-2&&_<o.length-2;++_)if(d=Oi(t[_],o[_]),d)return d;return d=Oi(t.length,o.length),d||(d=Oi(t[t.length-2],o[o.length-2]),d||Oi(t[t.length-1],o[o.length-1]))}class dm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Tf{constructor(e,t,o,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=d}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(o=d,this.getBaseDocument(e,t,o))).next(d=>(null!==o&&eo(o.mutation,d,Go.empty(),Xr.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,xi()).next(()=>o))}getLocalViewOfDocuments(e,t,o=xi()){const d=nr();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,o).next(_=>{let I=ts();return _.forEach((k,ne)=>{I=I.insert(k,ne.overlayedDocument)}),I}))}getOverlayedDocuments(e,t){const o=nr();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,xi()))}populateOverlays(e,t,o){const d=[];return o.forEach(_=>{t.has(_)||d.push(_)}),this.documentOverlayCache.getOverlays(e,d).next(_=>{_.forEach((I,k)=>{t.set(I,k)})})}computeViews(e,t,o,d){let _=hi();const I=Wo(),k=Wo();return t.forEach((ne,le)=>{const be=o.get(le.key);d.has(le.key)&&(void 0===be||be.mutation instanceof O)?_=_.insert(le.key,le):void 0!==be&&(I.set(le.key,be.mutation.getFieldMask()),eo(be.mutation,le,be.mutation.getFieldMask(),Xr.now()))}),this.recalculateAndSaveOverlays(e,_).next(ne=>(ne.forEach((le,be)=>I.set(le,be)),t.forEach((le,be)=>{var st;return k.set(le,new dm(be,null!==(st=I.get(le))&&void 0!==st?st:null))}),k))}recalculateAndSaveOverlays(e,t){const o=Wo();let d=new Nr((I,k)=>I-k),_=xi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(I=>{for(const k of I)k.keys().forEach(ne=>{const le=t.get(ne);if(null===le)return;let be=o.get(ne)||Go.empty();be=k.applyToLocalView(le,be),o.set(ne,be);const st=(d.get(k.batchId)||xi()).add(ne);d=d.insert(k.batchId,st)})}).next(()=>{const I=[],k=d.getReverseIterator();for(;k.hasNext();){const ne=k.getNext(),le=ne.key,be=ne.value,st=Tl();be.forEach(kt=>{if(!_.has(kt)){const rn=Wu(t.get(kt),o.get(kt));null!==rn&&st.set(kt,rn),_=_.add(kt)}}),I.push(this.documentOverlayCache.saveOverlays(e,le,st))}return C.waitFor(I)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return En.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ru(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var d}getNextDocuments(e,t,o,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,d).next(_=>{const I=d-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,d-_.size):C.resolve(nr());let k=-1,ne=_;return I.next(le=>C.forEach(le,(be,st)=>(k<st.largestBatchId&&(k=st.largestBatchId),_.get(be)?C.resolve():this.getBaseDocument(e,be,st).next(kt=>{ne=ne.insert(be,kt)}))).next(()=>this.populateOverlays(e,le,_)).next(()=>this.computeViews(e,ne,le,xi())).next(be=>({batchId:k,changes:hr(be)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new En(t)).next(o=>{let d=ts();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const d=t.collectionGroup;let _=ts();return this.indexManager.getCollectionParents(e,d).next(I=>C.forEach(I,k=>{const ne=(le=t,be=k.child(d),new hl(be,null,le.explicitOrderBy.slice(),le.filters.slice(),le.limit,le.limitType,le.startAt,le.endAt));var le,be;return this.getDocumentsMatchingCollectionQuery(e,ne,o).next(le=>{le.forEach((be,st)=>{_=_.insert(be,st)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,t,o){let d;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(_=>(d=_,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(_=>{_.forEach((k,ne)=>{const le=ne.getKey();null===d.get(le)&&(d=d.insert(le,bs.newInvalidDocument(le)))});let I=ts();return d.forEach((k,ne)=>{const le=_.get(k);void 0!==le&&eo(le.mutation,ne,Go.empty(),Xr.now()),ue(t,ne)&&(I=I.insert(k,ne))}),I})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):C.resolve(bs.newInvalidDocument(t))}}class hm{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return C.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var o;return this.Jn.set(t.id,{id:(o=t).id,version:o.version,createTime:rs(o.createTime)}),C.resolve()}getNamedQuery(e,t){return C.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(o=t).name,query:Vd(o.bundledQuery),readTime:rs(o.readTime)}),C.resolve();var o}}class Gp{constructor(){this.overlays=new Nr(En.comparator),this.Xn=new Map}getOverlay(e,t){return C.resolve(this.overlays.get(t))}getOverlays(e,t){const o=nr();return C.forEach(t,d=>this.getOverlay(e,d).next(_=>{null!==_&&o.set(d,_)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((d,_)=>{this.ie(e,t,_)}),C.resolve()}removeOverlaysForBatchId(e,t,o){const d=this.Xn.get(o);return void 0!==d&&(d.forEach(_=>this.overlays=this.overlays.remove(_)),this.Xn.delete(o)),C.resolve()}getOverlaysForCollection(e,t,o){const d=nr(),_=t.length+1,I=new En(t.child("")),k=this.overlays.getIteratorFrom(I);for(;k.hasNext();){const ne=k.getNext().value,le=ne.getKey();if(!t.isPrefixOf(le.path))break;le.path.length===_&&ne.largestBatchId>o&&d.set(ne.getKey(),ne)}return C.resolve(d)}getOverlaysForCollectionGroup(e,t,o,d){let _=new Nr((le,be)=>le-be);const I=this.overlays.getIterator();for(;I.hasNext();){const le=I.getNext().value;if(le.getKey().getCollectionGroup()===t&&le.largestBatchId>o){let be=_.get(le.largestBatchId);null===be&&(be=nr(),_=_.insert(le.largestBatchId,be)),be.set(le.getKey(),le)}}const k=nr(),ne=_.getIterator();for(;ne.hasNext()&&(ne.getNext().value.forEach((le,be)=>k.set(le,be)),!(k.size()>=d)););return C.resolve(k)}ie(e,t,o){const d=this.overlays.get(o.key);if(null!==d){const I=this.Xn.get(d.largestBatchId).delete(o.key);this.Xn.set(d.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new pl(t,o));let _=this.Xn.get(t);void 0===_&&(_=xi(),this.Xn.set(t,_)),this.Xn.set(t,_.add(o.key))}}class hd{constructor(){this.Zn=new er(Nl.ts),this.es=new er(Nl.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const o=new Nl(e,t);this.Zn=this.Zn.add(o),this.es=this.es.add(o)}ss(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.rs(new Nl(e,t))}os(e,t){e.forEach(o=>this.removeReference(o,t))}us(e){const t=new En(new Sr([])),o=new Nl(t,e),d=new Nl(t,e+1),_=[];return this.es.forEachInRange([o,d],I=>{this.rs(I),_.push(I.key)}),_}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new En(new Sr([])),o=new Nl(t,e),d=new Nl(t,e+1);let _=xi();return this.es.forEachInRange([o,d],I=>{_=_.add(I.key)}),_}containsKey(e){const t=new Nl(e,0),o=this.Zn.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Nl{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return En.comparator(e.key,t.key)||Oi(e.ls,t.ls)}static ns(e,t){return Oi(e.ls,t.ls)||En.comparator(e.key,t.key)}}class fm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new er(Nl.ts)}checkEmpty(e){return C.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,d){const _=this.fs;this.fs++;const I=new uc(_,t,o,d);this.mutationQueue.push(I);for(const k of d)this.ds=this.ds.add(new Nl(k.key,_)),this.indexManager.addToCollectionParentIndex(e,k.key.path.popLast());return C.resolve(I)}lookupMutationBatch(e,t){return C.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.ws(t+1),_=d<0?0:d;return C.resolve(this.mutationQueue.length>_?this.mutationQueue[_]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Nl(t,0),d=new Nl(t,Number.POSITIVE_INFINITY),_=[];return this.ds.forEachInRange([o,d],I=>{const k=this._s(I.ls);_.push(k)}),C.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new er(Oi);return t.forEach(d=>{const _=new Nl(d,0),I=new Nl(d,Number.POSITIVE_INFINITY);this.ds.forEachInRange([_,I],k=>{o=o.add(k.ls)})}),C.resolve(this.gs(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1;let _=o;En.isDocumentKey(_)||(_=_.child(""));const I=new Nl(new En(_),0);let k=new er(Oi);return this.ds.forEachWhile(ne=>{const le=ne.key.path;return!!o.isPrefixOf(le)&&(le.length===d&&(k=k.add(ne.ls)),!0)},I),C.resolve(this.gs(k))}gs(e){const t=[];return e.forEach(o=>{const d=this._s(o);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){Ln(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let o=this.ds;return C.forEach(t.mutations,d=>{const _=new Nl(d.key,t.batchId);return o=o.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.ds=o})}In(e){}containsKey(e,t){const o=new Nl(t,0),d=this.ds.firstAfterOrEqual(o);return C.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return C.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class dy{constructor(e){this.ps=e,this.docs=new Nr(En.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,d=this.docs.get(o),_=d?d.size:0,I=this.ps(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:I}),this.size+=I-_,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return C.resolve(o?o.document.mutableCopy():bs.newInvalidDocument(t))}getEntries(e,t){let o=hi();return t.forEach(d=>{const _=this.docs.get(d);o=o.insert(d,_?_.document.mutableCopy():bs.newInvalidDocument(d))}),C.resolve(o)}getAllFromCollection(e,t,o){let d=hi();const _=new En(t.child("")),I=this.docs.getIteratorFrom(_);for(;I.hasNext();){const{key:k,value:{document:ne}}=I.getNext();if(!t.isPrefixOf(k.path))break;k.path.length>t.length+1||Do(vl(ne),o)<=0||(d=d.insert(ne.key,ne.mutableCopy()))}return C.resolve(d)}getAllFromCollectionGroup(e,t,o,d){Vn()}Is(e,t){return C.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new hy(this)}getSize(e){return C.resolve(this.size)}}class hy extends Dh{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?t.push(this.zn.addEntry(e,d)):this.zn.removeEntry(o)}),C.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class pm{constructor(e){this.persistence=e,this.Ts=new Un(t=>j(t),ye),this.lastRemoteSnapshotVersion=Sn.min(),this.highestTargetId=0,this.Es=0,this.As=new hd,this.targetCount=0,this.Rs=Sl.An()}forEachTarget(e,t){return this.Ts.forEach((o,d)=>t(d)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Es&&(this.Es=t),C.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Sl(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,C.resolve()}updateTargetData(e,t){return this.vn(t),C.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,t,o){let d=0;const _=[];return this.Ts.forEach((I,k)=>{k.sequenceNumber<=t&&null===o.get(k.targetId)&&(this.Ts.delete(I),_.push(this.removeMatchingKeysForTargetId(e,k.targetId)),d++)}),C.waitFor(_).next(()=>d)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,t){const o=this.Ts.get(t)||null;return C.resolve(o)}addMatchingKeys(e,t,o){return this.As.ss(t,o),C.resolve()}removeMatchingKeys(e,t,o){this.As.os(t,o);const d=this.persistence.referenceDelegate,_=[];return d&&t.forEach(I=>{_.push(d.markPotentiallyOrphaned(e,I))}),C.waitFor(_)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),C.resolve()}getMatchingKeysForTargetId(e,t){const o=this.As.hs(t);return C.resolve(o)}containsKey(e,t){return C.resolve(this.As.containsKey(t))}}class Df{constructor(e,t){this.bs={},this.overlays={},this.Ps=new $i(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new pm(this),this.indexManager=new Up,this.remoteDocumentCache=new dy(o=>this.referenceDelegate.Ss(o)),this.wt=new Ld(t),this.Ds=new hm(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.bs[e.toKey()];return o||(o=new fm(t,this.referenceDelegate),this.bs[e.toKey()]=o),o}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,o){dn("MemoryPersistence","Starting transaction:",e);const d=new gm(this.Ps.next());return this.referenceDelegate.Cs(),o(d).next(_=>this.referenceDelegate.xs(d).next(()=>_)).toPromise().then(_=>(d.raiseOnCommittedEvent(),_))}Ns(e,t){return C.or(Object.values(this.bs).map(o=>()=>o.containsKey(e,t)))}}class gm extends Ol{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.ks=new hd,this.Ms=null}static Os(e){return new zp(e)}get Fs(){if(this.Ms)return this.Ms;throw Vn()}addReference(e,t,o){return this.ks.addReference(o,t),this.Fs.delete(o.toString()),C.resolve()}removeReference(e,t,o){return this.ks.removeReference(o,t),this.Fs.add(o.toString()),C.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),C.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(d=>this.Fs.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(_=>this.Fs.add(_.toString()))}).next(()=>o.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Fs,o=>{const d=En.fromPath(o);return this.$s(e,d).next(_=>{_||t.removeEntry(d,Sn.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(o=>{o?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return C.or([()=>C.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class mm{constructor(e){this.wt=e}M(e,t,o,d){const _=new R("createOrUpgrade",t);var k;o<1&&d>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kd,{unique:!0}),k.createObjectStore("documentMutations"),_m(e),function(k){k.createObjectStore("remoteDocuments")}(e));let I=C.resolve();return o<3&&d>=3&&(0!==o&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),_m(e)),I=I.next(()=>function(k){const ne=k.store("targetGlobal"),le={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Sn.min().toTimestamp(),targetCount:0};return ne.put("targetGlobalKey",le)}(_))),o<4&&d>=4&&(0!==o&&(I=I.next(()=>function(k,ne){return ne.store("mutations").K().next(le=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kd,{unique:!0});const be=ne.store("mutations"),st=le.map(kt=>be.put(kt));return C.waitFor(st)})}(e,_))),I=I.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&d>=5&&(I=I.next(()=>this.Bs(_))),o<6&&d>=6&&(I=I.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(_)))),o<7&&d>=7&&(I=I.next(()=>this.Us(_))),o<8&&d>=8&&(I=I.next(()=>this.qs(e,_))),o<9&&d>=9&&(I=I.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&d>=10&&(I=I.next(()=>this.Ks(_))),o<11&&d>=11&&(I=I.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&d>=12&&(I=I.next(()=>{!function(k){const ne=k.createObjectStore("documentOverlays",{keyPath:Fp});ne.createIndex("collectionPathOverlayIndex",vh,{unique:!1}),ne.createIndex("collectionGroupOverlayIndex",_f,{unique:!1})}(e)})),o<13&&d>=13&&(I=I.next(()=>function(k){const ne=k.createObjectStore("remoteDocumentsV14",{keyPath:_h});ne.createIndex("documentKeyIndex",Op),ne.createIndex("collectionGroupIndex",yh)}(e)).next(()=>this.Gs(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(I=I.next(()=>this.Qs(e,_))),o<15&&d>=15&&(I=I.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:mf}).createIndex("sequenceNumberIndex",om,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:am}).createIndex("documentKeyIndex",kp,{unique:!1})}(e))),I}Ls(e){let t=0;return e.store("remoteDocuments").J((o,d)=>{t+=zt(d)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Bs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.K().next(d=>C.forEach(d,_=>{const I=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return o.K("userMutationsIndex",I).next(k=>C.forEach(k,ne=>{Ln(ne.userId===_.userId);const le=hc(this.wt,ne);return Gt(e,_.userId,le).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const _=[];return o.J((I,k)=>{const ne=new Sr(I),le=[0,eu(ne)];_.push(t.get(le).next(be=>be?C.resolve():t.put({targetId:0,path:eu(ne),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>C.waitFor(_))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:Pp});const o=t.store("collectionParents"),d=new h,_=I=>{if(d.add(I)){const k=I.lastSegment(),ne=I.popLast();return o.put({collectionId:k,parent:eu(ne)})}};return t.store("remoteDocuments").J({H:!0},(I,k)=>{const ne=new Sr(I);return _(ne.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([I,k,ne],le)=>{const be=Tu(k);return _(be.popLast())}))}Ks(e){const t=e.store("targets");return t.J((o,d)=>{const _=Tc(d),I=Eh(this.wt,_);return t.put(I)})}Gs(e,t){const o=t.store("remoteDocuments"),d=[];return o.J((_,I)=>{const k=t.store("remoteDocumentsV14"),ne=(le=I,le.document?new En(Sr.fromString(le.document.name).popFirst(5)):le.noDocument?En.fromSegments(le.noDocument.path):le.unknownDocument?En.fromSegments(le.unknownDocument.path):Vn()).path.toArray();var le;const be={prefixPath:ne.slice(0,ne.length-2),collectionGroup:ne[ne.length-2],documentId:ne[ne.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};d.push(k.put(be))}).next(()=>C.waitFor(d))}Qs(e,t){const o=t.store("mutations"),d=jp(this.wt),_=new Df(zp.Os,this.wt.ne);return o.K().next(I=>{const k=new Map;return I.forEach(ne=>{var le;let be=null!==(le=k.get(ne.userId))&&void 0!==le?le:xi();hc(this.wt,ne).keys().forEach(st=>be=be.add(st)),k.set(ne.userId,be)}),C.forEach(k,(ne,le)=>{const be=new oi(le),st=ud.se(this.wt,be),kt=_.getIndexManager(be),rn=nn.se(be,this.wt,kt,_.referenceDelegate);return new Tf(d,rn,st,kt).recalculateAndSaveOverlaysForDocumentKeys(new Ms(t,$i.ot),ne).next()})})}}function _m(r){r.createObjectStore("targetDocuments",{keyPath:Rp}).createIndex("documentTargetsIndex",Np,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",od,{unique:!0}),r.createObjectStore("targetGlobal")}const Sf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wp{constructor(e,t,o,d,_,I,k,ne,le,be,st=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.js=_,this.window=I,this.document=k,this.Ws=le,this.zs=be,this.Hs=st,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=kt=>Promise.resolve(),!Wp.V())throw new an(Ut.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uy(this,d),this.ei=t+"main",this.wt=new Ld(ne),this.ni=new D(this.ei,this.Hs,new mm(this.wt)),this.Vs=new Su(this.referenceDelegate,this.wt),this.remoteDocumentCache=jp(this.wt),this.Ds=new $c,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===be&&Hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new an(Ut.FAILED_PRECONDITION,Sf);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new $i(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var o=(0,rt.Z)(function*(d){if(t.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,rt.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,rt.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(pe(e))return dn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return dn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return xh(e).get("owner").next(t=>C.resolve(this.di(t)))}_i(e){return gu(e).delete(this.clientId)}wi(){var e=this;return(0,rt.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=$s(o,"clientMetadata");return d.K().next(_=>{const I=e.gi(_,18e5),k=_.filter(ne=>-1===I.indexOf(ne));return C.forEach(k,ne=>d.delete(ne.clientId)).next(()=>k)})}).catch(()=>[]);if(e.si)for(const o of t)e.si.removeItem(e.yi(o.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?C.resolve(!0):xh(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new an(Ut.FAILED_PRECONDITION,Sf);return!1}}return!(!this.networkEnabled||!this.inForeground)||gu(e).K().next(o=>void 0===this.gi(o,5e3).find(d=>{if(this.clientId!==d.clientId){const I=!this.inForeground&&d.inForeground,k=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||I&&k)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&dn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,rt.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Ms(t,$i.ot);return e.li(o).next(()=>e._i(o))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(o=>this.mi(o.updateTimeMs,t)&&!this.pi(o.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>gu(e).K().next(t=>this.gi(t,18e5).map(o=>o.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return nn.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new c(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return ud.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,o){dn("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",_=15===(I=this.Hs)?lc:14===I?vf:13===I?wh:12===I?Lp:11===I?yf:void Vn();var I;let k;return this.ni.runTransaction(e,d,_,ne=>(k=new Ms(ne,this.Ps?this.Ps.next():$i.ot),"readwrite-primary"===t?this.ai(k).next(le=>!!le||this.hi(k)).next(le=>{if(!le)throw Hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new an(Ut.FAILED_PRECONDITION,Qa);return o(k)}).next(le=>this.fi(k).next(()=>le)):this.bi(k).next(()=>o(k)))).then(ne=>(k.raiseOnCommittedEvent(),ne))}bi(e){return xh(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new an(Ut.FAILED_PRECONDITION,Sf)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xh(e).put("owner",t)}static V(){return D.V()}li(e){const t=xh(e);return t.get("owner").next(o=>this.di(o)?(dn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):C.resolve())}mi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Hr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,nt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const o=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return dn("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Hr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Hr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xh(r){return $s(r,"owner")}function gu(r){return $s(r,"clientMetadata")}function Kp(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Af{constructor(e,t,o,d){this.targetId=e,this.fromCache=t,this.Pi=o,this.vi=d}static Vi(e,t){let o=xi(),d=xi();for(const _ of t.docChanges)switch(_.type){case 0:o=o.add(_.doc.key);break;case 1:d=d.add(_.doc.key)}return new Af(e,t.fromCache,o,d)}}class ym{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,o,d){return this.Ci(e,t).next(_=>_||this.xi(e,t,d,o)).next(_=>_||this.Ni(e,t))}Ci(e,t){if(wa(t))return C.resolve(null);let o=js(t);return this.indexManager.getIndexType(e,o).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=N(t,null,"F"),o=js(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(_=>{const I=xi(..._);return this.Di.getDocuments(e,I).next(k=>this.indexManager.getMinOffset(e,o).next(ne=>{const le=this.ki(t,k);return this.Mi(t,le,I,ne.readTime)?this.Ci(e,N(t,null,"F")):this.Oi(e,le,t,ne)}))})))}xi(e,t,o,d){return wa(t)||d.isEqual(Sn.min())?this.Ni(e,t):this.Di.getDocuments(e,o).next(_=>{const I=this.ki(t,_);return this.Mi(t,I,o,d)?this.Ni(e,t):(As()<=ve.in.DEBUG&&dn("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),F(t)),this.Oi(e,I,t,Ml(d,-1)))})}ki(e,t){let o=new er(Tt(e));return t.forEach((d,_)=>{ue(e,_)&&(o=o.add(_))}),o}Mi(e,t,o,d){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const _="F"===e.limitType?t.last():t.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(d)>0)}Ni(e,t){return As()<=ve.in.DEBUG&&dn("QueryEngine","Using full collection scan to execute query:",F(t)),this.Di.getDocumentsMatchingQuery(e,t,Wr.min())}Oi(e,t,o,d){return this.Di.getDocumentsMatchingQuery(e,o,d).next(_=>(t.forEach(I=>{_=_.insert(I.key,I)}),_))}}class fy{constructor(e,t,o,d){this.persistence=e,this.Fi=t,this.wt=d,this.$i=new Nr(Oi),this.Bi=new Un(_=>j(_),ye),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(o)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tf(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function vm(r,e,t,o){return new fy(r,e,t,o)}function wm(r,e){return xf.apply(this,arguments)}function xf(){return xf=(0,rt.Z)(function*(r,e){const t=Tn(r);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let d;return t.mutationQueue.getAllMutationBatches(o).next(_=>(d=_,t.qi(e),t.mutationQueue.getAllMutationBatches(o))).next(_=>{const I=[],k=[];let ne=xi();for(const le of d){I.push(le.batchId);for(const be of le.mutations)ne=ne.add(be.key)}for(const le of _){k.push(le.batchId);for(const be of le.mutations)ne=ne.add(be.key)}return t.localDocuments.getDocuments(o,ne).next(le=>({Ki:le,removedBatchIds:I,addedBatchIds:k}))})})}),xf.apply(this,arguments)}function py(r,e){const t=Tn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),_=t.Ui.newChangeBuffer({trackRemovals:!0});return function(I,k,ne,le){const be=ne.batch,st=be.keys();let kt=C.resolve();return st.forEach(rn=>{kt=kt.next(()=>le.getEntry(k,rn)).next(cn=>{const jn=ne.docVersions.get(rn);Ln(null!==jn),cn.version.compareTo(jn)<0&&(be.applyToRemoteDocument(cn,ne),cn.isValidDocument()&&(cn.setReadTime(ne.commitVersion),le.addEntry(cn)))})}),kt.next(()=>I.mutationQueue.removeMutationBatch(k,be))}(t,o,e,_).next(()=>_.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(I){let k=xi();for(let ne=0;ne<I.mutationResults.length;++ne)I.mutationResults[ne].transformResults.length>0&&(k=k.add(I.batch.mutations[ne].key));return k}(e))).next(()=>t.localDocuments.getDocuments(o,d))})}function Em(r){const e=Tn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function gy(r,e){const t=Tn(r),o=e.snapshotVersion;let d=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const I=t.Ui.newChangeBuffer({trackRemovals:!0});d=t.$i;const k=[];e.targetChanges.forEach((be,st)=>{const kt=d.get(st);if(!kt)return;k.push(t.Vs.removeMatchingKeys(_,be.removedDocuments,st).next(()=>t.Vs.addMatchingKeys(_,be.addedDocuments,st)));let rn=kt.withSequenceNumber(_.currentSequenceNumber);var cn,jn,Mi;e.targetMismatches.has(st)?rn=rn.withResumeToken(uo.EMPTY_BYTE_STRING,Sn.min()).withLastLimboFreeSnapshotVersion(Sn.min()):be.resumeToken.approximateByteSize()>0&&(rn=rn.withResumeToken(be.resumeToken,o)),d=d.insert(st,rn),jn=rn,Mi=be,(0===(cn=kt).resumeToken.approximateByteSize()||jn.snapshotVersion.toMicroseconds()-cn.snapshotVersion.toMicroseconds()>=3e8||Mi.addedDocuments.size+Mi.modifiedDocuments.size+Mi.removedDocuments.size>0)&&k.push(t.Vs.updateTargetData(_,rn))});let ne=hi(),le=xi();if(e.documentUpdates.forEach(be=>{e.resolvedLimboDocuments.has(be)&&k.push(t.persistence.referenceDelegate.updateLimboDocument(_,be))}),k.push(Pr(_,I,e.documentUpdates).next(be=>{ne=be.Gi,le=be.Qi})),!o.isEqual(Sn.min())){const be=t.Vs.getLastRemoteSnapshotVersion(_).next(st=>t.Vs.setTargetsMetadata(_,_.currentSequenceNumber,o));k.push(be)}return C.waitFor(k).next(()=>I.apply(_)).next(()=>t.localDocuments.getLocalViewOfDocuments(_,ne,le)).next(()=>ne)}).then(_=>(t.$i=d,_))}function Pr(r,e,t){let o=xi(),d=xi();return t.forEach(_=>o=o.add(_)),e.getEntries(r,o).next(_=>{let I=hi();return t.forEach((k,ne)=>{const le=_.get(k);ne.isFoundDocument()!==le.isFoundDocument()&&(d=d.add(k)),ne.isNoDocument()&&ne.version.isEqual(Sn.min())?(e.removeEntry(k,ne.readTime),I=I.insert(k,ne)):!le.isValidDocument()||ne.version.compareTo(le.version)>0||0===ne.version.compareTo(le.version)&&le.hasPendingWrites?(e.addEntry(ne),I=I.insert(k,ne)):dn("LocalStore","Ignoring outdated watch update for ",k,". Current version:",le.version," Watch version:",ne.version)}),{Gi:I,Qi:d}})}function bm(r,e){const t=Tn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function fd(r,e){const t=Tn(r);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return t.Vs.getTargetData(o,e).next(_=>_?(d=_,C.resolve(d)):t.Vs.allocateTargetId(o).next(I=>(d=new pu(e,I,0,o.currentSequenceNumber),t.Vs.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=t.$i.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.$i=t.$i.insert(o.targetId,o),t.Bi.set(e,o.targetId)),o})}function pd(r,e,t){return qp.apply(this,arguments)}function qp(){return qp=(0,rt.Z)(function*(r,e,t){const o=Tn(r),d=o.$i.get(e),_=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",_,I=>o.persistence.referenceDelegate.removeTarget(I,d)))}catch(I){if(!pe(I))throw I;dn("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.$i=o.$i.remove(e),o.Bi.delete(d.target)}),qp.apply(this,arguments)}function Mf(r,e,t){const o=Tn(r);let d=Sn.min(),_=xi();return o.persistence.runTransaction("Execute query","readonly",I=>function(k,ne,le){const be=Tn(k),st=be.Bi.get(le);return void 0!==st?C.resolve(be.$i.get(st)):be.Vs.getTargetData(ne,le)}(o,I,js(e)).next(k=>{if(k)return d=k.lastLimboFreeSnapshotVersion,o.Vs.getMatchingKeysForTargetId(I,k.targetId).next(ne=>{_=ne})}).next(()=>o.Fi.getDocumentsMatchingQuery(I,e,t?d:Sn.min(),t?_:xi())).next(k=>(Yp(o,Se(e),k),{documents:k,ji:_})))}function Zp(r,e){const t=Tn(r),o=Tn(t.Vs),d=t.$i.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",_=>o.te(_,e).next(I=>I?I.target:null))}function Im(r,e){const t=Tn(r),o=t.Li.get(e)||Sn.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Ui.getAllFromCollectionGroup(d,e,Ml(o,-1),Number.MAX_SAFE_INTEGER)).then(d=>(Yp(t,e,d),d))}function Yp(r,e,t){let o=Sn.min();t.forEach((d,_)=>{_.readTime.compareTo(o)>0&&(o=_.readTime)}),r.Li.set(e,o)}function Qp(){return Qp=(0,rt.Z)(function*(r,e,t,o){const d=Tn(r);let _=xi(),I=hi();for(const le of t){const be=e.Wi(le.metadata.name);le.document&&(_=_.add(be));const st=e.zi(le);st.setReadTime(e.Hi(le.metadata.readTime)),I=I.insert(be,st)}const k=d.Ui.newChangeBuffer({trackRemovals:!0}),ne=yield fd(d,(le=o,js(Cl(Sr.fromString(`__bundle__/docs/${le}`)))));var le;return d.persistence.runTransaction("Apply bundle documents","readwrite",le=>Pr(le,k,I).next(be=>(k.apply(le),be)).next(be=>d.Vs.removeMatchingKeysForTargetId(le,ne.targetId).next(()=>d.Vs.addMatchingKeys(le,_,ne.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(le,be.Gi,be.Qi)).next(()=>be.Gi)))}),Qp.apply(this,arguments)}function o0(r,e){return Of.apply(this,arguments)}function Of(){return Of=(0,rt.Z)(function*(r,e,t=xi()){const o=yield fd(r,js(Vd(e.bundledQuery))),d=Tn(r);return d.persistence.runTransaction("Save named query","readwrite",_=>{const I=rs(e.readTime);if(o.snapshotVersion.compareTo(I)>=0)return d.Ds.saveNamedQuery(_,e);const k=o.withResumeToken(uo.EMPTY_BYTE_STRING,I);return d.$i=d.$i.insert(k.targetId,k),d.Vs.updateTargetData(_,k).next(()=>d.Vs.removeMatchingKeysForTargetId(_,o.targetId)).next(()=>d.Vs.addMatchingKeys(_,t,o.targetId)).next(()=>d.Ds.saveNamedQuery(_,e))})}),Of.apply(this,arguments)}function Jp(r,e){return`firestore_clients_${r}_${e}`}function Kc(r,e,t){let o=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Xp(r,e){return`firestore_targets_${r}_${e}`}class Bd{constructor(e,t,o,d){this.user=e,this.batchId=t,this.state=o,this.error=d}static Ji(e,t,o){const d=JSON.parse(o);let _,I="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return I&&d.error&&(I="string"==typeof d.error.message&&"string"==typeof d.error.code,I&&(_=new an(d.error.code,d.error.message))),I?new Bd(e,t,d.state,_):(Hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gd{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Ji(e,t){const o=JSON.parse(t);let d,_="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return _&&o.error&&(_="string"==typeof o.error.message&&"string"==typeof o.error.code,_&&(d=new an(o.error.code,o.error.message))),_?new gd(e,o.state,d):(Hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const o=JSON.parse(t);let d="object"==typeof o&&o.activeTargetIds instanceof Array,_=wu();for(let I=0;d&&I<o.activeTargetIds.length;++I)d=gt(o.activeTargetIds[I]),_=_.add(o.activeTargetIds[I]);return d?new Rf(e,_):(Hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Cm{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Cm(t.clientId,t.onlineState):(Hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Tm{constructor(){this.activeTargetIds=wu()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dm{constructor(e,t,o,d,_){this.window=e,this.js=t,this.persistenceKey=o,this.tr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Nr(Oi),this.started=!1,this.ir=[];const I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.rr=Jp(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Tm),this.cr=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,rt.Z)(function*(){const t=yield e.syncEngine.Ri();for(const d of t){if(d===e.tr)continue;const _=e.getItem(Jp(e.persistenceKey,d));if(_){const I=Rf.Ji(d,_);I&&(e.sr=e.sr.insert(I.clientId,I))}}e._r();const o=e.storage.getItem(e.lr);if(o){const d=e.wr(o);d&&e.mr(d)}for(const d of e.ir)e.nr(d);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((o,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,o){this.yr(e,t,o),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Xp(this.persistenceKey,e));if(o){const d=gd.Ji(e,o);d&&(t=d.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xp(this.persistenceKey,e))}updateQueryState(e,t,o){this.Tr(e,t,o)}handleUserChange(e,t,o){t.forEach(d=>{this.pr(d)}),this.currentUser=e,o.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return dn("SharedClientState","READ",e,t),t}setItem(e,t){dn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){dn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(dn("SharedClientState","EVENT",o.key,o.newValue),o.key===this.rr)return void Hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,rt.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const d=t.Rr(o.key);return t.br(d,null)}{const d=t.Pr(o.key,o.newValue);if(d)return t.br(d.clientId,d)}}else if(t.ar.test(o.key)){if(null!==o.newValue){const d=t.vr(o.key,o.newValue);if(d)return t.Vr(d)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const d=t.Sr(o.key,o.newValue);if(d)return t.Dr(d)}}else if(o.key===t.lr){if(null!==o.newValue){const d=t.wr(o.newValue);if(d)return t.mr(d)}}else if(o.key===t.ur){const d=function(_){let I=$i.ot;if(null!=_)try{const k=JSON.parse(_);Ln("number"==typeof k),I=k}catch(k){Hr("SharedClientState","Failed to read sequence number from WebStorage",k)}return I}(o.newValue);d!==$i.ot&&t.sequenceNumberHandler(d)}else if(o.key===t.dr){const d=t.Cr(o.newValue);yield Promise.all(d.map(_=>t.syncEngine.Nr(_)))}}else t.ir.push(o)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,o){const d=new Bd(this.currentUser,e,t,o),_=Kc(this.persistenceKey,this.currentUser,e);this.setItem(_,d.Yi())}pr(e){const t=Kc(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,o){const d=Xp(this.persistenceKey,e),_=new gd(e,t,o);this.setItem(d,_.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const o=this.Rr(e);return Rf.Ji(o,t)}vr(e,t){const o=this.ar.exec(e),d=Number(o[1]);return Bd.Ji(new oi(void 0!==o[2]?o[2]:null),d,t)}Sr(e,t){const o=this.hr.exec(e),d=Number(o[1]);return gd.Ji(d,t)}wr(e){return Cm.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,rt.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);dn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const o=t?this.sr.insert(e,t):this.sr.remove(e),d=this.gr(this.sr),_=this.gr(o),I=[],k=[];return _.forEach(ne=>{d.has(ne)||I.push(ne)}),d.forEach(ne=>{_.has(ne)||k.push(ne)}),this.syncEngine.Or(I,k).then(()=>{this.sr=o})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=wu();return e.forEach((o,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class Sm{constructor(){this.Fr=new Tm,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,o){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Tm,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Am{Br(e){}shutdown(){}}class _y{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){dn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){dn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Hd{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class vy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,o,d,_){const I=this.oo(e,t);dn("RestConnection","Sending: ",I,o);const k={};return this.uo(k,d,_),this.co(e,I,k,o).then(ne=>(dn("RestConnection","Received: ",ne),ne),ne=>{throw oa("RestConnection",`${e} failed with error: `,ne,"url: ",I,"request:",o),ne})}ao(e,t,o,d,_,I){return this.ro(e,t,o,d,_)}uo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+hs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,_)=>e[_]=d),o&&o.headers.forEach((d,_)=>e[_]=d)}oo(e,t){return`${this.so}/v1/${t}:${yy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,d){return new Promise((_,I)=>{const k=new Mr;k.listenOnce(Mn.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case wn.NO_ERROR:const le=k.getResponseJson();dn("Connection","XHR received:",JSON.stringify(le)),_(le);break;case wn.TIMEOUT:dn("Connection",'RPC "'+e+'" timed out'),I(new an(Ut.DEADLINE_EXCEEDED,"Request time out"));break;case wn.HTTP_ERROR:const be=k.getStatus();if(dn("Connection",'RPC "'+e+'" failed with status:',be,"response text:",k.getResponseText()),be>0){const st=k.getResponseJson().error;if(st&&st.status&&st.message){const kt=function(rn){const cn=rn.toLowerCase().replace(/_/g,"-");return Object.values(Ut).indexOf(cn)>=0?cn:Ut.UNKNOWN}(st.status);I(new an(kt,st.message))}else I(new an(Ut.UNKNOWN,"Server responded with status "+k.getStatus()))}else I(new an(Ut.UNAVAILABLE,"Connection failed."));break;default:Vn()}}finally{dn("Connection",'RPC "'+e+'" completed.')}});const ne=JSON.stringify(d);k.send(t,"POST",ne,o,15)})}ho(e,t,o){const d=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=Ht(),I=Rn(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(k.xmlHttpFactory=new mi({})),this.uo(k.initMessageHeaders,t,o),(0,nt.uI)()||(0,nt.b$)()||(0,nt.d)()||(0,nt.w1)()||(0,nt.Mn)()||(0,nt.ru)()||(k.httpHeadersOverwriteParam="$httpHeaders");const ne=d.join("");dn("Connection","Creating WebChannel: "+ne,k);const le=_.createWebChannel(ne,k);let be=!1,st=!1;const kt=new Hd({jr:cn=>{st?dn("Connection","Not sending because WebChannel is closed:",cn):(be||(dn("Connection","Opening WebChannel transport."),le.open(),be=!0),dn("Connection","WebChannel sending:",cn),le.send(cn))},Wr:()=>le.close()}),rn=(cn,jn,Mi)=>{cn.listen(jn,Rs=>{try{Mi(Rs)}catch(Lo){setTimeout(()=>{throw Lo},0)}})};return rn(le,Ss.EventType.OPEN,()=>{st||dn("Connection","WebChannel transport opened.")}),rn(le,Ss.EventType.CLOSE,()=>{st||(st=!0,dn("Connection","WebChannel transport closed"),kt.eo())}),rn(le,Ss.EventType.ERROR,cn=>{st||(st=!0,oa("Connection","WebChannel transport errored:",cn),kt.eo(new an(Ut.UNAVAILABLE,"The operation could not be completed")))}),rn(le,Ss.EventType.MESSAGE,cn=>{var jn;if(!st){const Mi=cn.data[0];Ln(!!Mi);const Rs=Mi,Lo=Rs.error||(null===(jn=Rs[0])||void 0===jn?void 0:jn.error);if(Lo){dn("Connection","WebChannel received error:",Lo);const wo=Lo.status;let ta=function(xo){const Al=tn[xo];if(void 0!==Al)return yi(Al)}(wo),Cs=Lo.message;void 0===ta&&(ta=Ut.INTERNAL,Cs="Unknown error status: "+wo+" with message "+Lo.message),st=!0,kt.eo(new an(ta,Cs)),le.close()}else dn("Connection","WebChannel received:",Mi),kt.no(Mi)}}),rn(I,pr.STAT_EVENT,cn=>{cn.stat===qr.PROXY?dn("Connection","Detected buffering proxy"):cn.stat===qr.NOPROXY&&dn("Connection","Detected no buffering proxy")}),setTimeout(()=>{kt.Zr()},0),kt}}function eg(){return typeof window<"u"?window:null}function md(){return typeof document<"u"?document:null}function Mh(r){return new Eu(r,!0)}class Nf{constructor(e,t,o=1e3,d=1.5,_=6e4){this.js=e,this.timerId=t,this.lo=o,this.fo=d,this._o=_,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),o=Math.max(0,Date.now()-this.yo),d=Math.max(0,t-o);d>0&&dn("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,d,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class xm{constructor(e,t,o,d,_,I,k,ne){this.js=e,this.Ao=o,this.Ro=d,this.bo=_,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=k,this.listener=ne,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Nf(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,rt.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,rt.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var o=this;return(0,rt.Z)(function*(){o.Fo(),o.$o(),o.So.cancel(),o.Po++,4!==e?o.So.reset():t&&t.code===Ut.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),o.So.po()):t&&t.code===Ut.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Bo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.Po===t&&this.Uo(o,d)},o=>{e(()=>{const d=new an(Ut.UNKNOWN,"Fetching auth token failed: "+o.message);return this.qo(d)})})}Uo(e,t){const o=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{o(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(d=>{o(()=>this.qo(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}xo(){var e=this;this.state=5,this.So.Io((0,rt.Z)(function*(){e.state=0,e.start()}))}qo(e){return dn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(dn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wy extends xm{constructor(e,t,o,d,_,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,d,I),this.wt=_}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function im(r,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(ne=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===ne?1:"REMOVE"===ne?2:"CURRENT"===ne?3:"RESET"===ne?4:Vn(),d=e.targetChange.targetIds||[],_=function(ne,le){return ne.dt?(Ln(void 0===le||"string"==typeof le),uo.fromBase64String(le||"")):(Ln(void 0===le||le instanceof Uint8Array),uo.fromUint8Array(le||new Uint8Array))}(r,e.targetChange.resumeToken),I=e.targetChange.cause,k=I&&function(ne){const le=void 0===ne.code?Ut.UNKNOWN:yi(ne.code);return new an(le,ne.message||"")}(I);t=new Qn(o,d,_,k||null)}else if("documentChange"in e){const o=e.documentChange,d=Kl(r,o.document.name),_=rs(o.document.updateTime),I=new Xo({mapValue:{fields:o.document.fields}}),k=bs.newFoundDocument(d,_,I);t=new Ku(o.targetIds||[],o.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const o=e.documentDelete,d=Kl(r,o.document),_=o.readTime?rs(o.readTime):Sn.min(),I=bs.newNoDocument(d,_);t=new Ku([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,d=Kl(r,o.document);t=new Ku([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return Vn();{const o=e.filter,_=new Ft(o.count||0);t=new ac(o.targetId,_)}}var ne;return t}(this.wt,e),o=function(d){if(!("targetChange"in d))return Sn.min();const _=d.targetChange;return _.targetIds&&_.targetIds.length?Sn.min():_.readTime?rs(_.readTime):Sn.min()}(e);return this.listener.Go(t,o)}Qo(e){const t={};t.database=qu(this.wt),t.addTarget=function(d,_){let I;const k=_.target;return I=Je(k)?{documents:ff(d,k)}:{query:ch(d,k)},I.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?I.resumeToken=Wl(d,_.resumeToken):_.snapshotVersion.compareTo(Sn.min())>0&&(I.readTime=fo(d,_.snapshotVersion.toTimestamp())),I}(this.wt,e);const o=function hh(r,e){const t=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Vn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Oo(t)}jo(e){const t={};t.database=qu(this.wt),t.removeTarget=e,this.Oo(t)}}class Ey extends xm{constructor(e,t,o,d,_,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,d,I),this.wt=_,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ln(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function Ap(r,e){return r&&r.length>0?(Ln(void 0!==e),r.map(t=>function(o,d){let _=rs(o.updateTime?o.updateTime:d);return _.isEqual(Sn.min())&&(_=rs(d)),new fu(_,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=rs(e.commitTime);return this.listener.Jo(o,t)}return Ln(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=qu(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Hc(this.wt,o))};this.Oo(t)}}class by extends class{}{constructor(e,t,o,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.wt=d,this.Zo=!1}tu(){if(this.Zo)throw new an(Ut.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,_])=>this.bo.ro(e,t,o,d,_)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new an(Ut.UNKNOWN,d.toString())})}ao(e,t,o,d){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,I])=>this.bo.ao(e,t,o,_,I,d)).catch(_=>{throw"FirebaseError"===_.name?(_.code===Ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new an(Ut.UNKNOWN,_.toString())})}terminate(){this.Zo=!0}}class Iy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Hr(t),this.su=!1):dn("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Mm{constructor(e,t,o,d,_){var I=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=_,this.du.Br(k=>{o.enqueueAndForget((0,rt.Z)(function*(){var ne;Mc(I)&&(dn("RemoteStore","Restarting streams for network reachability change."),yield(ne=(0,rt.Z)(function*(le){const be=Tn(le);be.lu.add(4),yield _d(be),be._u.set("Unknown"),be.lu.delete(4),yield Oh(be)}),function(le){return ne.apply(this,arguments)})(I))}))}),this._u=new Iy(o,d)}}function Oh(r){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,rt.Z)(function*(r){if(Mc(r))for(const e of r.fu)yield e(!0)}),Pf.apply(this,arguments)}function _d(r){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,rt.Z)(function*(r){for(const e of r.fu)yield e(!1)}),Rh.apply(this,arguments)}function tg(r,e){const t=Tn(r);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),kf(t)?qc(t):jd(t).Co()&&ng(t,e))}function yd(r,e){const t=Tn(r),o=jd(t);t.hu.delete(e),o.Co()&&Cy(t,e),0===t.hu.size&&(o.Co()?o.ko():Mc(t)&&t._u.set("Unknown"))}function ng(r,e){r.wu.Nt(e.targetId),jd(r).Qo(e)}function Cy(r,e){r.wu.Nt(e),jd(r).jo(e)}function qc(r){r.wu=new Fi({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),te:e=>r.hu.get(e)||null}),jd(r).start(),r._u.iu()}function kf(r){return Mc(r)&&!jd(r).Do()&&r.hu.size>0}function Mc(r){return 0===Tn(r).lu.size}function Nh(r){r.wu=void 0}function Zu(r){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,rt.Z)(function*(r){r.hu.forEach((e,t)=>{ng(r,e)})}),Ff.apply(this,arguments)}function Ty(r,e){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,rt.Z)(function*(r,e){Nh(r),kf(r)?(r._u.uu(e),qc(r)):r._u.set("Unknown")}),Ph.apply(this,arguments)}function Oc(r,e,t){return kh.apply(this,arguments)}function kh(){return kh=(0,rt.Z)(function*(r,e,t){if(r._u.set("Online"),e instanceof Qn&&2===e.state&&e.cause)try{yield(o=(0,rt.Z)(function*(d,_){const I=_.cause;for(const k of _.targetIds)d.hu.has(k)&&(yield d.remoteSyncer.rejectListen(k,I),d.hu.delete(k),d.wu.removeTarget(k))}),function(d,_){return o.apply(this,arguments)})(r,e)}catch(o){dn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Fh(r,o)}else if(e instanceof Ku?r.wu.Ut(e):e instanceof ac?r.wu.zt(e):r.wu.Gt(e),!t.isEqual(Sn.min()))try{const o=yield Em(r.localStore);t.compareTo(o)>=0&&(yield function(d,_){const I=d.wu.Yt(_);return I.targetChanges.forEach((k,ne)=>{if(k.resumeToken.approximateByteSize()>0){const le=d.hu.get(ne);le&&d.hu.set(ne,le.withResumeToken(k.resumeToken,_))}}),I.targetMismatches.forEach(k=>{const ne=d.hu.get(k);if(!ne)return;d.hu.set(k,ne.withResumeToken(uo.EMPTY_BYTE_STRING,ne.snapshotVersion)),Cy(d,k);const le=new pu(ne.target,k,1,ne.sequenceNumber);ng(d,le)}),d.remoteSyncer.applyRemoteEvent(I)}(r,t))}catch(o){dn("RemoteStore","Failed to raise snapshot:",o),yield Fh(r,o)}var o}),kh.apply(this,arguments)}function Fh(r,e,t){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,rt.Z)(function*(r,e,t){if(!pe(e))throw e;r.lu.add(1),yield _d(r),r._u.set("Offline"),t||(t=()=>Em(r.localStore)),r.asyncQueue.enqueueRetryable((0,rt.Z)(function*(){dn("RemoteStore","Retrying IndexedDB access"),yield t(),r.lu.delete(1),yield Oh(r)}))}),Lh.apply(this,arguments)}function Dy(r,e){return e().catch(t=>Fh(r,t,e))}function vd(r){return Om.apply(this,arguments)}function Om(){return Om=(0,rt.Z)(function*(r){const e=Tn(r),t=pc(e);let o=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;Lf(e);)try{const d=yield bm(e.localStore,o);if(null===d){0===e.au.length&&t.ko();break}o=d.batchId,Vf(e,d)}catch(d){yield Fh(e,d)}Uf(e)&&Bf(e)}),Om.apply(this,arguments)}function Lf(r){return Mc(r)&&r.au.length<10}function Vf(r,e){r.au.push(e);const t=pc(r);t.Co()&&t.zo&&t.Ho(e.mutations)}function Uf(r){return Mc(r)&&!pc(r).Do()&&r.au.length>0}function Bf(r){pc(r).start()}function ig(r){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,rt.Z)(function*(r){pc(r).Xo()}),Rm.apply(this,arguments)}function Sy(r){return rg.apply(this,arguments)}function rg(){return rg=(0,rt.Z)(function*(r){const e=pc(r);for(const t of r.au)e.Ho(t.mutations)}),rg.apply(this,arguments)}function Ay(r,e,t){return sg.apply(this,arguments)}function sg(){return sg=(0,rt.Z)(function*(r,e,t){const o=r.au.shift(),d=ad.from(o,e,t);yield Dy(r,()=>r.remoteSyncer.applySuccessfulWrite(d)),yield vd(r)}),sg.apply(this,arguments)}function Nm(r,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,rt.Z)(function*(r,e){var t;e&&pc(r).zo&&(yield(t=(0,rt.Z)(function*(o,d){if(pi(_=d.code)&&_!==Ut.ABORTED){const I=o.au.shift();pc(o).No(),yield Dy(o,()=>o.remoteSyncer.rejectFailedWrite(I.batchId,d)),yield vd(o)}var _}),function(o,d){return t.apply(this,arguments)})(r,e)),Uf(r)&&Bf(r)}),Pm.apply(this,arguments)}function km(r,e){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,rt.Z)(function*(r,e){const t=Tn(r);t.asyncQueue.verifyOperationInProgress(),dn("RemoteStore","RemoteStore received new credentials");const o=Mc(t);t.lu.add(3),yield _d(t),o&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Oh(t)}),Fm.apply(this,arguments)}function Hf(r,e){return jf.apply(this,arguments)}function jf(){return jf=(0,rt.Z)(function*(r,e){const t=Tn(r);e?(t.lu.delete(2),yield Oh(t)):e||(t.lu.add(2),yield _d(t),t._u.set("Unknown"))}),jf.apply(this,arguments)}function jd(r){return r.mu||(r.mu=function(e,t,o){const d=Tn(e);return d.tu(),new wy(t,d.bo,d.authCredentials,d.appCheckCredentials,d.wt,o)}(r.datastore,r.asyncQueue,{zr:Zu.bind(null,r),Jr:Ty.bind(null,r),Go:Oc.bind(null,r)}),r.fu.push(function(){var e=(0,rt.Z)(function*(t){t?(r.mu.No(),kf(r)?qc(r):r._u.set("Unknown")):(yield r.mu.stop(),Nh(r))});return function(t){return e.apply(this,arguments)}}())),r.mu}function pc(r){return r.gu||(r.gu=function(e,t,o){const d=Tn(e);return d.tu(),new Ey(t,d.bo,d.authCredentials,d.appCheckCredentials,d.wt,o)}(r.datastore,r.asyncQueue,{zr:ig.bind(null,r),Jr:Nm.bind(null,r),Yo:Sy.bind(null,r),Jo:Ay.bind(null,r)}),r.fu.push(function(){var e=(0,rt.Z)(function*(t){t?(r.gu.No(),yield vd(r)):(yield r.gu.stop(),r.au.length>0&&(dn("RemoteStore",`Stopping write stream with ${r.au.length} pending writes`),r.au=[]))});return function(t){return e.apply(this,arguments)}}())),r.gu}class Lm{constructor(e,t,o,d,_){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=d,this.removalCallback=_,this.deferred=new Js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(e,t,o,d,_){const I=Date.now()+o,k=new Lm(e,t,I,d,_);return k.start(o),k}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new an(Ut.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vh(r,e){if(Hr("AsyncQueue",`${e}: ${r}`),pe(r))return new an(Ut.UNAVAILABLE,`${e}: ${r}`);throw r}class Uh{constructor(e){this.comparator=e?(t,o)=>e(t,o)||En.comparator(t.key,o.key):(t,o)=>En.comparator(t.key,o.key),this.keyedMap=ts(),this.sortedSet=new Nr(this.comparator)}static emptySet(e){return new Uh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,_=o.getNext().key;if(!d.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Uh;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class xy{constructor(){this.yu=new Nr(En.comparator)}track(e){const t=e.doc.key,o=this.yu.get(t);o?0!==e.type&&3===o.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==o.type?this.yu=this.yu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.yu=this.yu.remove(t):1===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Vn():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Bh{constructor(e,t,o,d,_,I,k,ne){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=_,this.fromCache=I,this.syncStateChanged=k,this.excludesMetadataChanges=ne}static fromInitialDocuments(e,t,o,d){const _=[];return t.forEach(I=>{_.push({type:0,doc:I})}),new Bh(e,t,Uh.emptySet(t),_,o,d,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&w(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==o[d].type||!t[d].doc.isEqual(o[d].doc))return!1;return!0}}class a0{constructor(){this.Iu=void 0,this.listeners=[]}}class l0{constructor(){this.queries=new Un(e=>b(e),w),this.onlineState="Unknown",this.Tu=new Set}}function Vm(r,e){return Um.apply(this,arguments)}function Um(){return Um=(0,rt.Z)(function*(r,e){const t=Tn(r),o=e.query;let d=!1,_=t.queries.get(o);if(_||(d=!0,_=new a0),d)try{_.Iu=yield t.onListen(o)}catch(I){const k=Vh(I,`Initialization of query '${F(e.query)}' failed`);return void e.onError(k)}t.queries.set(o,_),_.listeners.push(e),e.Eu(t.onlineState),_.Iu&&e.Au(_.Iu)&&$f(t)}),Um.apply(this,arguments)}function Bm(r,e){return gc.apply(this,arguments)}function gc(){return gc=(0,rt.Z)(function*(r,e){const t=Tn(r),o=e.query;let d=!1;const _=t.queries.get(o);if(_){const I=_.listeners.indexOf(e);I>=0&&(_.listeners.splice(I,1),d=0===_.listeners.length)}if(d)return t.queries.delete(o),t.onUnlisten(o)}),gc.apply(this,arguments)}function og(r,e){const t=Tn(r);let o=!1;for(const d of e){const I=t.queries.get(d.query);if(I){for(const k of I.listeners)k.Au(d)&&(o=!0);I.Iu=d}}o&&$f(t)}function My(r,e,t){const o=Tn(r),d=o.queries.get(e);if(d)for(const _ of d.listeners)_.onError(t);o.queries.delete(e)}function $f(r){r.Tu.forEach(e=>{e.next()})}class Hh{constructor(e,t,o){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=o||{}}Au(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new Bh(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Bh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Hm{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Gf{constructor(e){this.wt=e}Wi(e){return Kl(this.wt,e)}zi(e){return e.metadata.exists?Bc(this.wt,e.document,!1):bs.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return rs(e)}}class Oy{constructor(e,t,o){this.xu=e,this.localStore=t,this.wt=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Rc(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Sr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,o=new Gf(this.wt);for(const d of e)if(d.metadata.queries){const _=o.Wi(d.metadata.name);for(const I of d.metadata.queries){const k=(t.get(I)||xi()).add(_);t.set(I,k)}}return t}complete(){var e=this;return(0,rt.Z)(function*(){const t=yield function my(r,e,t,o){return Qp.apply(this,arguments)}(e.localStore,new Gf(e.wt),e.documents,e.xu.id),o=e.ku(e.documents);for(const d of e.queries)yield o0(e.localStore,d,o.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function Rc(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class ag{constructor(e){this.key=e}}class jm{constructor(e){this.key=e}}class $m{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=xi(),this.mutatedKeys=xi(),this.Lu=Tt(e),this.Uu=new Uh(this.Lu)}get qu(){return this.Fu}Ku(e,t){const o=t?t.Gu:new xy,d=t?t.Uu:this.Uu;let _=t?t.mutatedKeys:this.mutatedKeys,I=d,k=!1;const ne="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,le="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((be,st)=>{const kt=d.get(be),rn=ue(this.query,st)?st:null,cn=!!kt&&this.mutatedKeys.has(kt.key),jn=!!rn&&(rn.hasLocalMutations||this.mutatedKeys.has(rn.key)&&rn.hasCommittedMutations);let Mi=!1;kt&&rn?kt.data.isEqual(rn.data)?cn!==jn&&(o.track({type:3,doc:rn}),Mi=!0):this.Qu(kt,rn)||(o.track({type:2,doc:rn}),Mi=!0,(ne&&this.Lu(rn,ne)>0||le&&this.Lu(rn,le)<0)&&(k=!0)):!kt&&rn?(o.track({type:0,doc:rn}),Mi=!0):kt&&!rn&&(o.track({type:1,doc:kt}),Mi=!0,(ne||le)&&(k=!0)),Mi&&(rn?(I=I.add(rn),_=jn?_.add(be):_.delete(be)):(I=I.delete(be),_=_.delete(be)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const be="F"===this.query.limitType?I.last():I.first();I=I.delete(be.key),_=_.delete(be.key),o.track({type:1,doc:be})}return{Uu:I,Gu:o,Mi:k,mutatedKeys:_}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const d=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const _=e.Gu.pu();_.sort((le,be)=>function(st,kt){const rn=cn=>{switch(cn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vn()}};return rn(st)-rn(kt)}(le.type,be.type)||this.Lu(le.doc,be.doc)),this.ju(o);const I=t?this.Wu():[],k=0===this.Bu.size&&this.current?1:0,ne=k!==this.$u;return this.$u=k,0!==_.length||ne?{snapshot:new Bh(this.query,e.Uu,d,_,e.mutatedKeys,0===k,ne,!1),zu:I}:{zu:I}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new xy,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=xi(),this.Uu.forEach(o=>{this.Hu(o.key)&&(this.Bu=this.Bu.add(o.key))});const t=[];return e.forEach(o=>{this.Bu.has(o)||t.push(new jm(o))}),this.Bu.forEach(o=>{e.has(o)||t.push(new ag(o))}),t}Ju(e){this.Fu=e.ji,this.Bu=xi();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Bh.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Gm{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Ry{constructor(e){this.key=e,this.Xu=!1}}class Ny{constructor(e,t,o,d,_,I){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=d,this.currentUser=_,this.maxConcurrentLimboResolutions=I,this.Zu={},this.tc=new Un(k=>b(k),w),this.ec=new Map,this.nc=new Set,this.sc=new Nr(En.comparator),this.ic=new Map,this.rc=new hd,this.oc={},this.uc=new Map,this.cc=Sl.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function zf(r,e){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,rt.Z)(function*(r,e){const t=yg(r);let o,d;const _=t.tc.get(e);if(_)o=_.targetId,t.sharedClientState.addLocalQueryTarget(o),d=_.view.Yu();else{const I=yield fd(t.localStore,js(e));t.isPrimaryClient&&tg(t.remoteStore,I);const k=t.sharedClientState.addLocalQueryTarget(I.targetId);o=I.targetId,d=yield jh(t,e,o,"current"===k)}return d}),Zc.apply(this,arguments)}function jh(r,e,t,o){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,rt.Z)(function*(r,e,t,o){r.hc=(be,st,kt)=>{return(rn=(0,rt.Z)(function*(cn,jn,Mi,Rs){let Lo=jn.view.Ku(Mi);Lo.Mi&&(Lo=yield Mf(cn.localStore,jn.query,!1).then(({documents:Cs})=>jn.view.Ku(Cs,Lo)));const wo=Rs&&Rs.targetChanges.get(jn.targetId),ta=jn.view.applyChanges(Lo,cn.isPrimaryClient,wo);return dg(cn,jn.targetId,ta.zu),ta.snapshot}),function(cn,jn,Mi,Rs){return rn.apply(this,arguments)})(r,be,st,kt);var rn};const d=yield Mf(r.localStore,e,!0),_=new $m(e,d.ji),I=_.Ku(d.documents),k=su.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==r.onlineState),ne=_.applyChanges(I,r.isPrimaryClient,k);dg(r,t,ne.zu);const le=new Gm(e,t,_);return r.tc.set(e,le),r.ec.has(t)?r.ec.get(t).push(e):r.ec.set(t,[e]),ne.snapshot}),Yc.apply(this,arguments)}function Wf(r,e){return wd.apply(this,arguments)}function wd(){return wd=(0,rt.Z)(function*(r,e){const t=Tn(r),o=t.tc.get(e),d=t.ec.get(o.targetId);if(d.length>1)return t.ec.set(o.targetId,d.filter(_=>!w(_,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield pd(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),yd(t.remoteStore,o.targetId),Pl(t,o.targetId)}).catch(Fo))):(Pl(t,o.targetId),yield pd(t.localStore,o.targetId,!0))}),wd.apply(this,arguments)}function Kf(){return Kf=(0,rt.Z)(function*(r,e,t){const o=Wh(r);try{const d=yield function(_,I){const k=Tn(_),ne=Xr.now(),le=I.reduce((kt,rn)=>kt.add(rn.key),xi());let be,st;return k.persistence.runTransaction("Locally write mutations","readwrite",kt=>{let rn=hi(),cn=xi();return k.Ui.getEntries(kt,le).next(jn=>{rn=jn,rn.forEach((Mi,Rs)=>{Rs.isValidDocument()||(cn=cn.add(Mi))})}).next(()=>k.localDocuments.getOverlayedDocuments(kt,rn)).next(jn=>{be=jn;const Mi=[];for(const Rs of I){const Lo=S(Rs,be.get(Rs.key).overlayedDocument);null!=Lo&&Mi.push(new O(Rs.key,Lo,jl(Lo.value.mapValue),vs.exists(!0)))}return k.mutationQueue.addMutationBatch(kt,ne,Mi,I)}).next(jn=>{st=jn;const Mi=jn.applyToLocalDocumentSet(be,cn);return k.documentOverlayCache.saveOverlays(kt,jn.batchId,Mi)})}).then(()=>({batchId:st.batchId,changes:hr(be)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(_,I,k){let ne=_.oc[_.currentUser.toKey()];ne||(ne=new Nr(Oi)),ne=ne.insert(I,k),_.oc[_.currentUser.toKey()]=ne}(o,d.batchId,t),yield Yu(o,d.changes),yield vd(o.remoteStore)}catch(d){const _=Vh(d,"Failed to persist write");t.reject(_)}}),Kf.apply(this,arguments)}function lg(r,e){return $h.apply(this,arguments)}function $h(){return $h=(0,rt.Z)(function*(r,e){const t=Tn(r);try{const o=yield gy(t.localStore,e);e.targetChanges.forEach((d,_)=>{const I=t.ic.get(_);I&&(Ln(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?I.Xu=!0:d.modifiedDocuments.size>0?Ln(I.Xu):d.removedDocuments.size>0&&(Ln(I.Xu),I.Xu=!1))}),yield Yu(t,o,e)}catch(o){yield Fo(o)}}),$h.apply(this,arguments)}function qf(r,e,t){const o=Tn(r);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const d=[];o.tc.forEach((_,I)=>{const k=I.view.Eu(e);k.snapshot&&d.push(k.snapshot)}),function(_,I){const k=Tn(_);k.onlineState=I;let ne=!1;k.queries.forEach((le,be)=>{for(const st of be.listeners)st.Eu(I)&&(ne=!0)}),ne&&$f(k)}(o.eventManager,e),d.length&&o.Zu.Go(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function zm(r,e,t){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,rt.Z)(function*(r,e,t){const o=Tn(r);o.sharedClientState.updateQueryState(e,"rejected",t);const d=o.ic.get(e),_=d&&d.key;if(_){let I=new Nr(En.comparator);I=I.insert(_,bs.newNoDocument(_,Sn.min()));const k=xi().add(_),ne=new Jl(Sn.min(),new Map,new er(Oi),I,k);yield lg(o,ne),o.sc=o.sc.remove(_),o.ic.delete(e),hg(o)}else yield pd(o.localStore,e,!1).then(()=>Pl(o,e,t)).catch(Fo)}),Gh.apply(this,arguments)}function ky(r,e){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,rt.Z)(function*(r,e){const t=Tn(r),o=e.batch.batchId;try{const d=yield py(t.localStore,e);ug(t,o,null),Qf(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Yu(t,d)}catch(d){yield Fo(d)}}),Wm.apply(this,arguments)}function Fy(r,e,t){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,rt.Z)(function*(r,e,t){const o=Tn(r);try{const d=yield function(_,I){const k=Tn(_);return k.persistence.runTransaction("Reject batch","readwrite-primary",ne=>{let le;return k.mutationQueue.lookupMutationBatch(ne,I).next(be=>(Ln(null!==be),le=be.keys(),k.mutationQueue.removeMutationBatch(ne,be))).next(()=>k.mutationQueue.performConsistencyCheck(ne)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(ne,le,I)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(ne,le)).next(()=>k.localDocuments.getDocuments(ne,le))})}(o.localStore,e);ug(o,e,t),Qf(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Yu(o,d)}catch(d){yield Fo(d)}}),Zf.apply(this,arguments)}function Yf(){return Yf=(0,rt.Z)(function*(r,e){const t=Tn(r);Mc(t.remoteStore)||dn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(_){const I=Tn(_);return I.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>I.mutationQueue.getHighestUnacknowledgedBatchId(k))}(t.localStore);if(-1===o)return void e.resolve();const d=t.uc.get(o)||[];d.push(e),t.uc.set(o,d)}catch(o){const d=Vh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),Yf.apply(this,arguments)}function Qf(r,e){(r.uc.get(e)||[]).forEach(t=>{t.resolve()}),r.uc.delete(e)}function ug(r,e,t){const o=Tn(r);let d=o.oc[o.currentUser.toKey()];if(d){const _=d.get(e);_&&(t?_.reject(t):_.resolve(),d=d.remove(e)),o.oc[o.currentUser.toKey()]=d}}function Pl(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.ec.get(e))r.tc.delete(o),t&&r.Zu.lc(o,t);r.ec.delete(e),r.isPrimaryClient&&r.rc.us(e).forEach(o=>{r.rc.containsKey(o)||cg(r,o)})}function cg(r,e){r.nc.delete(e.path.canonicalString());const t=r.sc.get(e);null!==t&&(yd(r.remoteStore,t),r.sc=r.sc.remove(e),r.ic.delete(t),hg(r))}function dg(r,e,t){for(const o of t)o instanceof ag?(r.rc.addReference(o.key,e),u0(r,o)):o instanceof jm?(dn("SyncEngine","Document no longer in limbo: "+o.key),r.rc.removeReference(o.key,e),r.rc.containsKey(o.key)||cg(r,o.key)):Vn()}function u0(r,e){const t=e.key,o=t.path.canonicalString();r.sc.get(t)||r.nc.has(o)||(dn("SyncEngine","New document in limbo: "+t),r.nc.add(o),hg(r))}function hg(r){for(;r.nc.size>0&&r.sc.size<r.maxConcurrentLimboResolutions;){const e=r.nc.values().next().value;r.nc.delete(e);const t=new En(Sr.fromString(e)),o=r.cc.next();r.ic.set(o,new Ry(t)),r.sc=r.sc.insert(t,o),tg(r.remoteStore,new pu(js(Cl(t.path)),o,2,$i.ot))}}function Yu(r,e,t){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,rt.Z)(function*(r,e,t){const o=Tn(r),d=[],_=[],I=[];var k;o.tc.isEmpty()||(o.tc.forEach((k,ne)=>{I.push(o.hc(ne,e,t).then(le=>{if(le){o.isPrimaryClient&&o.sharedClientState.updateQueryState(ne.targetId,le.fromCache?"not-current":"current"),d.push(le);const be=Af.Vi(ne.targetId,le);_.push(be)}}))}),yield Promise.all(I),o.Zu.Go(d),yield(k=(0,rt.Z)(function*(ne,le){const be=Tn(ne);try{yield be.persistence.runTransaction("notifyLocalViewChanges","readwrite",st=>C.forEach(le,kt=>C.forEach(kt.Pi,rn=>be.persistence.referenceDelegate.addReference(st,kt.targetId,rn)).next(()=>C.forEach(kt.vi,rn=>be.persistence.referenceDelegate.removeReference(st,kt.targetId,rn)))))}catch(st){if(!pe(st))throw st;dn("LocalStore","Failed to update sequence numbers: "+st)}for(const st of le){const kt=st.targetId;if(!st.fromCache){const rn=be.$i.get(kt),jn=rn.withLastLimboFreeSnapshotVersion(rn.snapshotVersion);be.$i=be.$i.insert(kt,jn)}}}),function(ne,le){return k.apply(this,arguments)})(o.localStore,_))}),Jf.apply(this,arguments)}function Vy(r,e){return fg.apply(this,arguments)}function fg(){return fg=(0,rt.Z)(function*(r,e){const t=Tn(r);if(!t.currentUser.isEqual(e)){dn("SyncEngine","User change. New user:",e.toKey());const o=yield wm(t.localStore,e);t.currentUser=e,(d=t).uc.forEach(I=>{I.forEach(k=>{k.reject(new an(Ut.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.uc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Yu(t,o.Ki)}var d}),fg.apply(this,arguments)}function Uy(r,e){const t=Tn(r),o=t.ic.get(e);if(o&&o.Xu)return xi().add(o.key);{let d=xi();const _=t.ec.get(e);if(!_)return d;for(const I of _){const k=t.tc.get(I);d=d.unionWith(k.view.qu)}return d}}function Km(r,e){return pg.apply(this,arguments)}function pg(){return pg=(0,rt.Z)(function*(r,e){const t=Tn(r),o=yield Mf(t.localStore,e.query,!0),d=e.view.Ju(o);return t.isPrimaryClient&&dg(t,e.targetId,d.zu),d}),pg.apply(this,arguments)}function qm(r,e){return gg.apply(this,arguments)}function gg(){return gg=(0,rt.Z)(function*(r,e){const t=Tn(r);return Im(t.localStore,e).then(o=>Yu(t,o))}),gg.apply(this,arguments)}function By(r,e,t,o){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,rt.Z)(function*(r,e,t,o){const d=Tn(r),_=yield function(I,k){const ne=Tn(I),le=Tn(ne.mutationQueue);return ne.persistence.runTransaction("Lookup mutation documents","readonly",be=>le.yn(be,k).next(st=>st?ne.localDocuments.getDocuments(be,st):C.resolve(null)))}(d.localStore,e);var k;null!==_?("pending"===t?yield vd(d.remoteStore):"acknowledged"===t||"rejected"===t?(ug(d,e,o||null),Qf(d,e),k=e,Tn(Tn(d.localStore).mutationQueue).In(k)):Vn(),yield Yu(d,_)):dn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Xf.apply(this,arguments)}function mg(){return mg=(0,rt.Z)(function*(r,e){const t=Tn(r);if(yg(t),Wh(t),!0===e&&!0!==t.ac){const o=t.sharedClientState.getAllActiveQueryTargets(),d=yield Qu(t,o.toArray());t.ac=!0,yield Hf(t.remoteStore,!0);for(const _ of d)tg(t.remoteStore,_)}else if(!1===e&&!1!==t.ac){const o=[];let d=Promise.resolve();t.ec.forEach((_,I)=>{t.sharedClientState.isLocalQueryTarget(I)?o.push(I):d=d.then(()=>(Pl(t,I),pd(t.localStore,I,!0))),yd(t.remoteStore,I)}),yield d,yield Qu(t,o),function(_){const I=Tn(_);I.ic.forEach((k,ne)=>{yd(I.remoteStore,ne)}),I.rc.cs(),I.ic=new Map,I.sc=new Nr(En.comparator)}(t),t.ac=!1,yield Hf(t.remoteStore,!1)}}),mg.apply(this,arguments)}function Qu(r,e,t){return zh.apply(this,arguments)}function zh(){return zh=(0,rt.Z)(function*(r,e,t){const o=Tn(r),d=[],_=[];for(const I of e){let k;const ne=o.ec.get(I);if(ne&&0!==ne.length){k=yield fd(o.localStore,js(ne[0]));for(const le of ne){const be=o.tc.get(le),st=yield Km(o,be);st.snapshot&&_.push(st.snapshot)}}else{const le=yield Zp(o.localStore,I);k=yield fd(o.localStore,le),yield jh(o,Ym(le),I,!1)}d.push(k)}return o.Zu.Go(_),d}),zh.apply(this,arguments)}function Ym(r){return du(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Hy(r){const e=Tn(r);return Tn(Tn(e.localStore).persistence).Ri()}function c0(r,e,t,o){return ep.apply(this,arguments)}function ep(){return ep=(0,rt.Z)(function*(r,e,t,o){const d=Tn(r);if(d.ac)return void dn("SyncEngine","Ignoring unexpected query state notification.");const _=d.ec.get(e);if(_&&_.length>0)switch(t){case"current":case"not-current":{const I=yield Im(d.localStore,Se(_[0])),k=Jl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Yu(d,I,k);break}case"rejected":yield pd(d.localStore,e,!0),Pl(d,e,o);break;default:Vn()}}),ep.apply(this,arguments)}function jy(r,e,t){return _g.apply(this,arguments)}function _g(){return _g=(0,rt.Z)(function*(r,e,t){const o=yg(r);if(o.ac){for(const d of e){if(o.ec.has(d)){dn("SyncEngine","Adding an already active target "+d);continue}const _=yield Zp(o.localStore,d),I=yield fd(o.localStore,_);yield jh(o,Ym(_),I.targetId,!1),tg(o.remoteStore,I)}for(const d of t)o.ec.has(d)&&(yield pd(o.localStore,d,!1).then(()=>{yd(o.remoteStore,d),Pl(o,d)}).catch(Fo))}}),_g.apply(this,arguments)}function yg(r){const e=Tn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=lg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zm.bind(null,e),e.Zu.Go=og.bind(null,e.eventManager),e.Zu.lc=My.bind(null,e.eventManager),e}function Wh(r){const e=Tn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ky.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fy.bind(null,e),e}class Qm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,rt.Z)(function*(){t.wt=Mh(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return vm(this.persistence,new ym,e.initialUser,this.wt)}_c(e){return new Df(zp.Os,this.wt)}dc(e){return new Sm}terminate(){var e=this;return(0,rt.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Kh extends Qm{constructor(e,t,o){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,rt.Z)(function*(){yield t().call(o,e),yield o.yc.initialize(o,e),yield Wh(o.yc.syncEngine),yield vd(o.yc.remoteStore),yield o.persistence.ci(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return vm(this.persistence,new ym,e.initialUser,this.wt)}mc(e,t){return new lm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const o=new Kn(t,this.persistence);return new ji(e.asyncQueue,o)}_c(e){const t=Kp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ye.withCacheSize(this.cacheSizeBytes):Ye.DEFAULT;return new Wp(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,eg(),md(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Sm}}class vg extends Kh{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,rt.Z)(function*(){yield t().call(o,e);const d=o.yc.syncEngine;o.sharedClientState instanceof Dm&&(o.sharedClientState.syncEngine={kr:By.bind(null,d),Mr:c0.bind(null,d),Or:jy.bind(null,d),Ri:Hy.bind(null,d),Nr:qm.bind(null,d)},yield o.sharedClientState.start()),yield o.persistence.ci(function(){var _=(0,rt.Z)(function*(I){yield function Zm(r,e){return mg.apply(this,arguments)}(o.yc.syncEngine,I),o.gcScheduler&&(I&&!o.gcScheduler.started?o.gcScheduler.start():I||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(I&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():I||o.indexBackfillerScheduler.stop())});return function(I){return _.apply(this,arguments)}}())})()}dc(e){const t=eg();if(!Dm.V(t))throw new an(Ut.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Kp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dm(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class wg{initialize(e,t){var o=this;return(0,rt.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>qf(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=Vy.bind(null,o.syncEngine),yield Hf(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new l0}createDatastore(e){const t=Mh(e.databaseInfo.databaseId),o=new vy(e.databaseInfo);return new by(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,d=e.asyncQueue,_=k=>qf(this.syncEngine,k,0),I=_y.V()?new _y:new Am,new Mm(t,o,d,_,I);var t,o,d,_,I}createSyncEngine(e,t){return function(o,d,_,I,k,ne,le){const be=new Ny(o,d,_,I,k,ne);return le&&(be.ac=!0),be}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,rt.Z)(function*(t){const o=Tn(t);dn("RemoteStore","RemoteStore shutting down."),o.lu.add(5),yield _d(o),o.du.shutdown(),o._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function tp(r,e=10240){let t=0;return{read:()=>(0,rt.Z)(function*(){if(t<r.byteLength){const o={value:r.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,rt.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class qh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class d0{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Js,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(o=>{o&&o.Cu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,rt.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,rt.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,rt.Z)(function*(){const t=yield e.bc();if(null===t)return null;const o=e.Ac.decode(t),d=Number(o);isNaN(d)&&e.Pc(`length string (${o}) is not valid number`);const _=yield e.vc(d);return new Hm(JSON.parse(_),t.length+d)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,rt.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}vc(e){var t=this;return(0,rt.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const o=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,rt.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class h0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,rt.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new an(Ut.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(d=(0,rt.Z)(function*(_,I){const k=Tn(_),ne=qu(k.wt)+"/documents",le={documents:I.map(rn=>Iu(k.wt,rn))},be=yield k.ao("BatchGetDocuments",ne,le,I.length),st=new Map;be.forEach(rn=>{const cn=function Sp(r,e){return"found"in e?function(t,o){Ln(!!o.found);const d=Kl(t,o.found.name),_=rs(o.found.updateTime),I=new Xo({mapValue:{fields:o.found.fields}});return bs.newFoundDocument(d,_,I)}(r,e):"missing"in e?function(t,o){Ln(!!o.missing),Ln(!!o.readTime);const d=Kl(t,o.missing),_=rs(o.readTime);return bs.newNoDocument(d,_)}(r,e):Vn()}(k.wt,rn);st.set(cn.key.toString(),cn)});const kt=[];return I.forEach(rn=>{const cn=st.get(rn.toString());Ln(!!cn),kt.push(cn)}),kt}),function(_,I){return d.apply(this,arguments)})(t.datastore,e);var d;return o.forEach(d=>t.recordVersion(d)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fe(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,rt.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,d)=>{const _=En.fromPath(d);e.mutations.push(new at(_,e.precondition(_)))}),yield(o=(0,rt.Z)(function*(d,_){const I=Tn(d),k=qu(I.wt)+"/documents",ne={writes:_.map(le=>Hc(I.wt,le))};yield I.ro("Commit",k,ne)}),function(d,_){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Vn();t=Sn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new an(Ut.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?vs.updateTime(t):vs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Sn.min()))throw new an(Ut.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vs.updateTime(t)}return vs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Eg{constructor(e,t,o,d,_){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=d,this.deferred=_,this.Dc=o.maxAttempts,this.So=new Nf(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,rt.Z)(function*(){const t=new h0(e.datastore),o=e.xc(t);o&&o.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(_=>{e.Nc(_)}))}).catch(d=>{e.Nc(d)})}))}xc(e){try{const t=this.updateFunction(e);return!de(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!pi(t)}return!1}}class f0{constructor(e,t,o,d){var _=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=d,this.user=oi.UNAUTHENTICATED,this.clientId=Yo.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,rt.Z)(function*(k){dn("FirestoreClient","Received user=",k.uid),yield _.authCredentialListener(k),_.user=k});return function(k){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(dn("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,rt.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new an(Ut.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,rt.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const d=Vh(o,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function bg(r,e){return np.apply(this,arguments)}function np(){return np=(0,rt.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),dn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let o=t.initialUser;r.setCredentialChangeListener(function(){var d=(0,rt.Z)(function*(_){o.isEqual(_)||(yield wm(e.localStore,_),o=_)});return function(_){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r.offlineComponents=e}),np.apply(this,arguments)}function Ig(r,e){return ip.apply(this,arguments)}function ip(){return ip=(0,rt.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield Zh(r);dn("FirestoreClient","Initializing OnlineComponentProvider");const o=yield r.getConfiguration();yield e.initialize(t,o),r.setCredentialChangeListener(d=>km(e.remoteStore,d)),r.setAppCheckTokenChangeListener((d,_)=>km(e.remoteStore,_)),r.onlineComponents=e}),ip.apply(this,arguments)}function Zh(r){return Ju.apply(this,arguments)}function Ju(){return Ju=(0,rt.Z)(function*(r){return r.offlineComponents||(dn("FirestoreClient","Using default OfflineComponentProvider"),yield bg(r,new Qm)),r.offlineComponents}),Ju.apply(this,arguments)}function Ed(r){return $d.apply(this,arguments)}function $d(){return $d=(0,rt.Z)(function*(r){return r.onlineComponents||(dn("FirestoreClient","Using default OnlineComponentProvider"),yield Ig(r,new wg)),r.onlineComponents}),$d.apply(this,arguments)}function Gd(r){return Zh(r).then(e=>e.persistence)}function rp(r){return Zh(r).then(e=>e.localStore)}function sp(r){return Ed(r).then(e=>e.remoteStore)}function op(r){return Ed(r).then(e=>e.syncEngine)}function zd(r){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,rt.Z)(function*(r){const e=yield Ed(r),t=e.eventManager;return t.onListen=zf.bind(null,e.syncEngine),t.onUnlisten=Wf.bind(null,e.syncEngine),t}),Cg.apply(this,arguments)}function Jm(r,e,t={}){const o=new Js;return r.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function(d,_,I,k,ne){const le=new qh({next:st=>{_.enqueueAndForget(()=>Bm(d,be));const kt=st.docs.has(I);!kt&&st.fromCache?ne.reject(new an(Ut.UNAVAILABLE,"Failed to get document because the client is offline.")):kt&&st.fromCache&&k&&"server"===k.source?ne.reject(new an(Ut.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ne.resolve(st)},error:st=>ne.reject(st)}),be=new Hh(Cl(I.path),le,{includeMetadataChanges:!0,Du:!0});return Vm(d,be)}(yield zd(r),r.asyncQueue,e,t,o)})),o.promise}function Xm(r,e,t={}){const o=new Js;return r.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function(d,_,I,k,ne){const le=new qh({next:st=>{_.enqueueAndForget(()=>Bm(d,be)),st.fromCache&&"server"===k.source?ne.reject(new an(Ut.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):ne.resolve(st)},error:st=>ne.reject(st)}),be=new Hh(I,le,{includeMetadataChanges:!0,Du:!0});return Vm(d,be)}(yield zd(r),r.asyncQueue,e,t,o)})),o.promise}const ap=new Map;function Tg(r,e,t){if(!t)throw new an(Ut.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function lp(r,e,t,o){if(!0===e&&!0===o)throw new an(Ut.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function t_(r){if(!En.isDocumentKey(r))throw new an(Ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function n_(r){if(En.isDocumentKey(r))throw new an(Ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function up(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Vn()}function Os(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new an(Ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=up(r);throw new an(Ut.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function i_(r,e){if(e<=0)throw new an(Ut.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class r_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new an(Ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new an(Ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,lp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qc{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r_({}),this._settingsFrozen=!1,e instanceof X?this._databaseId=e:(this._app=e,this._databaseId=function(d){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new an(Ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new X(d.options.projectId)}(e))}get app(){if(!this._app)throw new an(Ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new an(Ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new lu;switch(t.type){case"gapi":const o=t.client;return Ln(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new nl(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new an(Ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ap.get(e);t&&(dn("ComponentProvider","Removing Datastore"),ap.delete(e),t.terminate())}(this),Promise.resolve()}}class Oa{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oa(this.firestore,e,this._key)}}class gl{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new gl(this.firestore,e,this._query)}}class mc extends gl{constructor(e,t,o){super(e,t,Cl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oa(this.firestore,null,new En(e))}withConverter(e){return new mc(this.firestore,e,this._path)}}function s_(r,e,...t){if(r=(0,nt.m9)(r),Tg("collection","path",e),r instanceof Qc){const o=Sr.fromString(e,...t);return n_(o),new mc(r,null,o)}{if(!(r instanceof Oa||r instanceof mc))throw new an(Ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Sr.fromString(e,...t));return n_(o),new mc(r.firestore,null,o)}}function cp(r,e,...t){if(r=(0,nt.m9)(r),1===arguments.length&&(e=Yo.I()),Tg("doc","path",e),r instanceof Qc){const o=Sr.fromString(e,...t);return t_(o),new Oa(r,null,new En(o))}{if(!(r instanceof Oa||r instanceof mc))throw new an(Ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Sr.fromString(e,...t));return t_(o),new Oa(r.firestore,r instanceof mc?r.converter:null,new En(o))}}function Xu(r,e){return r=(0,nt.m9)(r),e=(0,nt.m9)(e),(r instanceof Oa||r instanceof mc)&&(e instanceof Oa||e instanceof mc)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Wd(r,e){return r=(0,nt.m9)(r),e=(0,nt.m9)(e),r instanceof gl&&e instanceof gl&&r.firestore===e.firestore&&w(r._query,e._query)&&r.converter===e.converter}class tu{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Nf(this,"async_queue_retry"),this.Kc=()=>{const t=md();t&&dn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=md();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=md();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Js;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,rt.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!pe(t))throw t;dn("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(o=>{throw this.Bc=o,this.Lc=!1,Hr("INTERNAL UNHANDLED ERROR: ",function(_){let I=_.message||"";return _.stack&&(I=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),I}(o)),o}).then(o=>(this.Lc=!1,o))));return this.Mc=t,t}enqueueAfterDelay(e,t,o){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const d=Lm.createAndSchedule(this,e,t,o,_=>this.Wc(_));return this.$c.push(d),d}Gc(){this.Bc&&Vn()}verifyOperationInProgress(){}zc(){var e=this;return(0,rt.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Nc(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(r)}class dp{constructor(){this._progressObserver={},this._taskCompletionResolver=new Js,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ua extends Qc{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new tu,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Id(this),this._firestoreClient.terminate()}}function Ea(r){return r._firestoreClient||Id(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Id(r){var e;const t=r._freezeSettings(),o=(_=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new z(r._databaseId,_,r._persistenceKey,(k=t).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,k.useFetchStreams));var _,k;r._firestoreClient=new f0(r._authCredentials,r._appCheckCredentials,r._queue,o)}function Cd(r,e,t){const o=new Js;return r.asyncQueue.enqueue((0,rt.Z)(function*(){try{yield bg(r,t),yield Ig(r,e),o.resolve()}catch(d){const _=d;if(!("FirebaseError"===(I=_).name?I.code===Ut.FAILED_PRECONDITION||I.code===Ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&I instanceof DOMException)||22===I.code||20===I.code||11===I.code))throw _;oa("Error enabling offline persistence. Falling back to persistence disabled: "+_),o.reject(_)}var I})).then(()=>o.promise)}function Sg(r){if(r._initialized||r._terminated)throw new an(Ut.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _c{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new an(Ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ec{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ec(uo.fromBase64String(e))}catch(t){throw new an(Ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ec(uo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Td{constructor(e){this._methodName=e}}class hp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new an(Ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new an(Ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oi(this._lat,e._lat)||Oi(this._long,e._long)}}const c_=/^__.*__$/;class Yy{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new O(e,this.data,this.fieldMask,t,this.fieldTransforms):new E(e,this.data,t,this.fieldTransforms)}}class Ag{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new O(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fp(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vn()}}class Qd{constructor(e,t,o,d,_,I){this.settings=e,this.databaseId=t,this.wt=o,this.ignoreUndefinedProperties=d,void 0===_&&this.Xc(),this.fieldTransforms=_||[],this.fieldMask=I||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Qd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ta({path:o,na:!1});return d.sa(e),d}ia(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ta({path:o,na:!1});return d.Xc(),d}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return yp(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(fp(this.Zc)&&c_.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Qy{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=o||Mh(e)}aa(e,t,o,d=!1){return new Qd({Zc:e,methodName:t,ca:o,path:Hs.emptyPath(),na:!1,ua:d},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function yc(r){const e=r._freezeSettings(),t=Mh(r._databaseId);return new Qy(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Dd(r,e,t,o,d,_={}){const I=r.aa(_.merge||_.mergeFields?2:0,e,t,d);mp("Data must be an object, but it was:",I,o);const k=Og(o,I);let ne,le;if(_.merge)ne=new Go(I.fieldMask),le=I.fieldTransforms;else if(_.mergeFields){const be=[];for(const st of _.mergeFields){const kt=_p(e,st,t);if(!I.contains(kt))throw new an(Ut.INVALID_ARGUMENT,`Field '${kt}' is specified in your field mask but missing from your input data.`);Rg(be,kt)||be.push(kt)}ne=new Go(be),le=I.fieldTransforms.filter(st=>ne.covers(st.field))}else ne=null,le=I.fieldTransforms;return new Yy(new Xo(k),ne,le)}class Sd extends Td{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sd}}function d_(r,e,t){return new Qd({Zc:3,ca:e.settings.ca,methodName:r._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Jd extends Td{_toFieldTransform(e){return new yu(e.path,new Nu)}isEqual(e){return e instanceof Jd}}class pp extends Td{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=d_(this,e,!0),o=this.ha.map(_=>Pc(_,t)),d=new Gl(o);return new yu(e.path,d)}isEqual(e){return this===e}}class xg extends Td{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=d_(this,e,!0),o=this.ha.map(_=>Pc(_,t)),d=new zl(o);return new yu(e.path,d)}isEqual(e){return this===e}}class h_ extends Td{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new $u(e.wt,Cr(e.wt,this.la));return new yu(e.path,t)}isEqual(e){return this===e}}function Xh(r,e,t,o){const d=r.aa(1,e,t);mp("Data must be an object, but it was:",d,o);const _=[],I=Xo.empty();jr(o,(ne,le)=>{const be=ef(e,ne,t);le=(0,nt.m9)(le);const st=d.ia(be);if(le instanceof Sd)_.push(be);else{const kt=Pc(le,st);null!=kt&&(_.push(be),I.set(be,kt))}});const k=new Go(_);return new Ag(I,k,d.fieldTransforms)}function gp(r,e,t,o,d,_){const I=r.aa(1,e,t),k=[_p(e,o,t)],ne=[d];if(_.length%2!=0)throw new an(Ut.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let kt=0;kt<_.length;kt+=2)k.push(_p(e,_[kt])),ne.push(_[kt+1]);const le=[],be=Xo.empty();for(let kt=k.length-1;kt>=0;--kt)if(!Rg(le,k[kt])){const rn=k[kt];let cn=ne[kt];cn=(0,nt.m9)(cn);const jn=I.ia(rn);if(cn instanceof Sd)le.push(rn);else{const Mi=Pc(cn,jn);null!=Mi&&(le.push(rn),be.set(rn,Mi))}}const st=new Go(le);return new Ag(be,st,I.fieldTransforms)}function Mg(r,e,t,o=!1){return Pc(t,r.aa(o?4:3,e))}function Pc(r,e){if(f_(r=(0,nt.m9)(r)))return mp("Unsupported field value:",e,r),Og(r,e);if(r instanceof Td)return function(t,o){if(!fp(o.Zc))throw o.oa(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.oa(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,o){const d=[];let _=0;for(const I of t){let k=Pc(I,o.ra(_));null==k&&(k={nullValue:"NULL_VALUE"}),d.push(k),_++}return{arrayValue:{values:d}}}(r,e)}return function(t,o){if(null===(t=(0,nt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Cr(o.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Xr.fromDate(t);return{timestampValue:fo(o.wt,d)}}if(t instanceof Xr){const d=new Xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:fo(o.wt,d)}}if(t instanceof hp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ec)return{bytesValue:Wl(o.wt,t._byteString)};if(t instanceof Oa){const d=o.databaseId,_=t.firestore._databaseId;if(!_.isEqual(d))throw o.oa(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:bu(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.oa(`Unsupported field value: ${up(t)}`)}(r,e)}function Og(r,e){const t={};return Ja(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(r,(o,d)=>{const _=Pc(d,e.ea(o));null!=_&&(t[o]=_)}),{mapValue:{fields:t}}}function f_(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Xr||r instanceof hp||r instanceof ec||r instanceof Oa||r instanceof Td)}function mp(r,e,t){if(!f_(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=up(t);throw e.oa("an object"===o?r+" a custom object":r+" "+o)}var o}function _p(r,e,t){if((e=(0,nt.m9)(e))instanceof _c)return e._internalPath;if("string"==typeof e)return ef(r,e);throw yp("Field path arguments must be of type string or ",r,!1,void 0,t)}const p_=new RegExp("[~\\*/\\[\\]]");function ef(r,e,t){if(e.search(p_)>=0)throw yp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new _c(...e.split("."))._internalPath}catch{throw yp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function yp(r,e,t,o,d){const _=o&&!o.isEmpty(),I=void 0!==d;let k=`Function ${e}() called with invalid data`;t&&(k+=" (via `toFirestore()`)"),k+=". ";let ne="";return(_||I)&&(ne+=" (found",_&&(ne+=` in field ${o}`),I&&(ne+=` in document ${d}`),ne+=")"),new an(Ut.INVALID_ARGUMENT,k+r+ne)}function Rg(r,e){return r.some(t=>t.isEqual(e))}class Xd{constructor(e,t,o,d,_){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=d,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new Oa(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ng(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ad("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ng extends Xd{data(){return super.data()}}function Ad(r,e){return"string"==typeof e?ef(r,e):e instanceof _c?e._internalPath:e._delegate._internalPath}class Jc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vc extends Xd{constructor(e,t,o,d,_,I){super(e,t,o,d,I),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Ad("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class eh extends vc{data(e={}){return super.data(e)}}class kc{constructor(e,t,o,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new Jc(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new eh(this._firestore,this._userDataWriter,o.key,o,new Jc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new an(Ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let _=0;return o._snapshot.docChanges.map(I=>({type:"added",doc:new eh(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Jc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:_++}))}{let _=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(I=>d||3!==I.type).map(I=>{const k=new eh(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Jc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter);let ne=-1,le=-1;return 0!==I.type&&(ne=_.indexOf(I.doc.key),_=_.delete(I.doc.key)),1!==I.type&&(_=_.add(I.doc),le=_.indexOf(I.doc.key)),{type:g_(I.type),doc:k,oldIndex:ne,newIndex:le}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function g_(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vn()}}function Pg(r,e){return r instanceof vc&&e instanceof vc?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof kc&&e instanceof kc&&r._firestore===e._firestore&&Wd(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}function kg(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new an(Ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class th{}function xd(r,...e){for(const t of e)r=t._apply(r);return r}class Jy extends th{constructor(e,t,o){super(),this.fa=e,this.da=t,this._a=o,this.type="where"}_apply(e){const t=yc(e.firestore),o=function(d,_,I,k,ne,le,be){let st;if(ne.isKeyField()){if("array-contains"===le||"array-contains-any"===le)throw new an(Ut.INVALID_ARGUMENT,`Invalid Query. You can't perform '${le}' queries on documentId().`);if("in"===le||"not-in"===le){Lg(be,le);const rn=[];for(const cn of be)rn.push(b_(k,d,cn));st={arrayValue:{values:rn}}}else st=b_(k,d,be)}else"in"!==le&&"not-in"!==le&&"array-contains-any"!==le||Lg(be,le),st=Mg(I,"where",be,"in"===le||"not-in"===le);const kt=ei.create(ne,le,st);return function(rn,cn){if(cn.ht()){const Mi=Uc(rn);if(null!==Mi&&!Mi.isEqual(cn.field))throw new an(Ut.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Mi.toString()}' and '${cn.field.toString()}'`);const Rs=sc(rn);null!==Rs&&I_(0,cn.field,Rs)}const jn=function(Mi,Rs){for(const Lo of Mi.filters)if(Rs.indexOf(Lo.op)>=0)return Lo.op;return null}(rn,function(Mi){switch(Mi){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(cn.op));if(null!==jn)throw new an(Ut.INVALID_ARGUMENT,jn===cn.op?`Invalid query. You cannot use more than one '${cn.op.toString()}' filter.`:`Invalid query. You cannot use '${cn.op.toString()}' filters with '${jn.toString()}' filters.`)}(d,kt),kt}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new gl(e.firestore,e.converter,function(d,_){const I=d.filters.concat([_]);return new hl(d.path,d.collectionGroup,d.explicitOrderBy.slice(),I,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,o))}}class m_ extends th{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(o,d,_){if(null!==o.startAt)throw new an(Ut.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new an(Ut.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new la(d,_);return function(k,ne){if(null===sc(k)){const le=Uc(k);null!==le&&I_(0,le,ne.field)}}(o,I),I}(e._query,this.fa,this.wa);return new gl(e.firestore,e.converter,function(o,d){const _=o.explicitOrderBy.concat([d]);return new hl(o.path,o.collectionGroup,_,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ml extends th{constructor(e,t,o){super(),this.type=e,this.ma=t,this.ga=o}_apply(e){return new gl(e.firestore,e.converter,N(e._query,this.ma,this.ga))}}class y_ extends th{constructor(e,t,o){super(),this.type=e,this.ya=t,this.pa=o}_apply(e){const t=E_(e,this.type,this.ya,this.pa);return new gl(e.firestore,e.converter,(d=t,new hl((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}class Fg extends th{constructor(e,t,o){super(),this.type=e,this.ya=t,this.pa=o}_apply(e){const t=E_(e,this.type,this.ya,this.pa);return new gl(e.firestore,e.converter,(d=t,new hl((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function E_(r,e,t,o){if(t[0]=(0,nt.m9)(t[0]),t[0]instanceof Xd)return function(d,_,I,k,ne){if(!k)throw new an(Ut.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const le=[];for(const be of _u(d))if(be.field.isKeyField())le.push(zo(_,k.key));else{const st=k.data.field(be.field);if(iu(st))throw new an(Ut.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+be.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===st){const kt=be.field.canonicalString();throw new an(Ut.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${kt}' (used as the orderBy) does not exist.`)}le.push(st)}return new So(le,ne)}(r._query,r.firestore._databaseId,e,t[0]._document,o);{const d=yc(r.firestore);return function(_,I,k,ne,le,be){const st=_.explicitOrderBy;if(le.length>st.length)throw new an(Ut.INVALID_ARGUMENT,`Too many arguments provided to ${ne}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const kt=[];for(let rn=0;rn<le.length;rn++){const cn=le[rn];if(st[rn].field.isKeyField()){if("string"!=typeof cn)throw new an(Ut.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${ne}(), but got a ${typeof cn}`);if(!Ru(_)&&-1!==cn.indexOf("/"))throw new an(Ut.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${ne}() must be a plain document ID, but '${cn}' contains a slash.`);const jn=_.path.child(Sr.fromString(cn));if(!En.isDocumentKey(jn))throw new an(Ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${ne}() must result in a valid document path, but '${jn}' is not because it contains an odd number of segments.`);const Mi=new En(jn);kt.push(zo(I,Mi))}else{const jn=Mg(k,ne,cn);kt.push(jn)}}return new So(kt,be)}(r._query,r.firestore._databaseId,d,e,t,o)}}function b_(r,e,t){if("string"==typeof(t=(0,nt.m9)(t))){if(""===t)throw new an(Ut.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ru(e)&&-1!==t.indexOf("/"))throw new an(Ut.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Sr.fromString(t));if(!En.isDocumentKey(o))throw new an(Ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return zo(r,new En(o))}if(t instanceof Oa)return zo(r,t._key);throw new an(Ut.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${up(t)}.`)}function Lg(r,e){if(!Array.isArray(r)||0===r.length)throw new an(Ut.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(r.length>10)throw new an(Ut.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function I_(r,e,t){if(!t.isEqual(e))throw new an(Ut.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const C_={maxAttempts:5};class T_{convertValue(e,t="none"){switch(mn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return es(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Vn()}}convertObject(e,t){const o={};return jr(e.fields,(d,_)=>{o[d]=this.convertValue(_,t)}),o}convertGeoPoint(e){return new hp(es(e.latitude),es(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=co(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=aa(e);return new Xr(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Sr.fromString(e);Ln(Mp(o));const d=new X(o.get(1),o.get(3)),_=new En(o.popFirst(5));return d.isEqual(t)||Hr(`Document ${_} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),_}}function ih(r,e,t){let o;return o=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,o}class Vg extends T_{constructor(e){super(),this.firestore=e}convertBytes(e){return new ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oa(this.firestore,null,t)}}class Lu{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yc(e)}set(e,t,o){this._verifyNotCommitted();const d=Xc(e,this._firestore),_=ih(d.converter,t,o),I=Dd(this._dataReader,"WriteBatch.set",d._key,_,null!==d.converter,o);return this._mutations.push(I.toMutation(d._key,vs.none())),this}update(e,t,o,...d){this._verifyNotCommitted();const _=Xc(e,this._firestore);let I;return I="string"==typeof(t=(0,nt.m9)(t))||t instanceof _c?gp(this._dataReader,"WriteBatch.update",_._key,t,o,d):Xh(this._dataReader,"WriteBatch.update",_._key,t),this._mutations.push(I.toMutation(_._key,vs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xc(e,this._firestore);return this._mutations=this._mutations.concat(new Fe(t._key,vs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new an(Ut.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xc(r,e){if((r=(0,nt.m9)(r)).firestore!==e)throw new an(Ut.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class nu extends T_{constructor(e){super(),this.firestore=e}convertBytes(e){return new ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oa(this.firestore,null,t)}}function x_(r,e,t){r=Os(r,Oa);const o=Os(r.firestore,ua),d=ih(r.converter,e,t);return Md(o,[Dd(yc(o),"setDoc",r._key,d,null!==r.converter,t).toMutation(r._key,vs.none())])}function M_(r,e,t,...o){r=Os(r,Oa);const d=Os(r.firestore,ua),_=yc(d);let I;return I="string"==typeof(e=(0,nt.m9)(e))||e instanceof _c?gp(_,"updateDoc",r._key,e,t,o):Xh(_,"updateDoc",r._key,e),Md(d,[I.toMutation(r._key,vs.exists(!0))])}function rh(r,...e){var t,o,d;r=(0,nt.m9)(r);let _={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||Nc(e[I])||(_=e[I],I++);const k={includeMetadataChanges:_.includeMetadataChanges};if(Nc(e[I])){const st=e[I];e[I]=null===(t=st.next)||void 0===t?void 0:t.bind(st),e[I+1]=null===(o=st.error)||void 0===o?void 0:o.bind(st),e[I+2]=null===(d=st.complete)||void 0===d?void 0:d.bind(st)}let ne,le,be;if(r instanceof Oa)le=Os(r.firestore,ua),be=Cl(r._key.path),ne={next:st=>{e[I]&&e[I](Bg(le,r,st))},error:e[I+1],complete:e[I+2]};else{const st=Os(r,gl);le=Os(st.firestore,ua),be=st._query;const kt=new nu(le);ne={next:rn=>{e[I]&&e[I](new kc(le,kt,st,rn))},error:e[I+1],complete:e[I+2]},kg(r._query)}return function(st,kt,rn,cn){const jn=new qh(cn),Mi=new Hh(kt,jn,rn);return st.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return Vm(yield zd(st),Mi)})),()=>{jn.Tc(),st.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return Bm(yield zd(st),Mi)}))}}(Ea(le),be,k,ne)}function Md(r,e){return function(t,o){const d=new Js;return t.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function Py(r,e,t){return Kf.apply(this,arguments)}(yield op(t),o,d)})),d.promise}(Ea(r),e)}function Bg(r,e,t){const o=t.docs.get(e._key),d=new nu(r);return new vc(r,d,e._key,o,new Jc(t.hasPendingWrites,t.fromCache),e.converter)}class O_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yc(e)}get(e){const t=Xc(e,this._firestore),o=new Vg(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return Vn();const _=d[0];if(_.isFoundDocument())return new Xd(this._firestore,o,_.key,_,t.converter);if(_.isNoDocument())return new Xd(this._firestore,o,t._key,null,t.converter);throw Vn()})}set(e,t,o){const d=Xc(e,this._firestore),_=ih(d.converter,t,o),I=Dd(this._dataReader,"Transaction.set",d._key,_,null!==d.converter,o);return this._transaction.set(d._key,I),this}update(e,t,o,...d){const _=Xc(e,this._firestore);let I;return I="string"==typeof(t=(0,nt.m9)(t))||t instanceof _c?gp(this._dataReader,"Transaction.update",_._key,t,o,d):Xh(this._dataReader,"Transaction.update",_._key,t),this._transaction.update(_._key,I),this}delete(e){const t=Xc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xc(e,this._firestore),o=new nu(this._firestore);return super.get(e).then(d=>new vc(this._firestore,o,t._key,d._document,new Jc(!1,!1),t.converter))}}function wp(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new an("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function Gg(){if(typeof Uint8Array>"u")throw new an("unimplemented","Uint8Arrays are not available in this environment.")}function zg(){if(!function wl(){return typeof atob<"u"}())throw new an("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){hs=qt.SDK_VERSION,(0,qt._registerComponent)(new Be.wA("firestore",(t,{options:o})=>{const d=t.getProvider("app").getImmediate(),_=new ua(d,new Ll(t.getProvider("auth-internal")),new Bs(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),_._setSettings(o),_},"PUBLIC")),(0,qt.registerVersion)(Ir,"3.4.14",r),(0,qt.registerVersion)(Ir,"3.4.14","esm2017")}();class sh{constructor(e){this._delegate=e}static fromBase64String(e){return zg(),new sh(ec.fromBase64String(e))}static fromUint8Array(e){return Gg(),new sh(ec.fromUint8Array(e))}toBase64(){return zg(),this._delegate.toBase64()}toUint8Array(){return Gg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Wg(r){return function av(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(r,["next","error","complete"])}class lv{enableIndexedDbPersistence(e,t){return function Kd(r,e){Sg(r=Os(r,ua));const t=Ea(r),o=r._freezeSettings(),d=new wg;return Cd(t,d,new Kh(d,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function qd(r){Sg(r=Os(r,ua));const e=Ea(r),t=r._freezeSettings(),o=new wg;return Cd(e,o,new vg(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Zd(r){if(r._initialized&&!r._terminated)throw new an(Ut.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Js;return r._queue.enqueueAndForgetEvenWhileRestricted((0,rt.Z)(function*(){try{yield(t=(0,rt.Z)(function*(o){if(!D.V())return Promise.resolve();const d=o+"main";yield D.delete(d)}),function(o){return t.apply(this,arguments)})(Kp(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class V_{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof X||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&oa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function bd(r,e,t,o={}){var d;const _=(r=Os(r,Qc))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&oa("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let I,k;if("string"==typeof o.mockUserToken)I=o.mockUserToken,k=oi.MOCK_USER;else{I=(0,nt.Sg)(o.mockUserToken,null===(d=r._app)||void 0===d?void 0:d.options.projectId);const ne=o.mockUserToken.sub||o.mockUserToken.user_id;if(!ne)throw new an(Ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new oi(ne)}r._authCredentials=new uu(new yl(I,k))}}(this._delegate,e,t,o)}enableNetwork(){return function o_(r){return function Yh(r){return r.asyncQueue.enqueue((0,rt.Z)(function*(){const e=yield Gd(r),t=yield sp(r);return e.setNetworkEnabled(!0),function(o){const d=Tn(o);return d.lu.delete(0),Oh(d)}(t)}))}(Ea(r=Os(r,ua)))}(this._delegate)}disableNetwork(){return function a_(r){return function Gy(r){return r.asyncQueue.enqueue((0,rt.Z)(function*(){const e=yield Gd(r),t=yield sp(r);return e.setNetworkEnabled(!1),(o=(0,rt.Z)(function*(d){const _=Tn(d);_.lu.add(0),yield _d(_),_._u.set("Offline")}),function(d){return o.apply(this,arguments)})(t);var o}))}(Ea(r=Os(r,ua)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,lp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Yd(r){return function(e){const t=new Js;return e.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function Ly(r,e){return Yf.apply(this,arguments)}(yield op(e),t)})),t.promise}(Ea(r=Os(r,ua)))}(this._delegate)}onSnapshotsInSync(e){return function sv(r,e){return function zy(r,e){const t=new qh(e);return r.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return o=yield zd(r),d=t,Tn(o).Tu.add(d),void d.next();var o,d})),()=>{t.Tc(),r.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return o=yield zd(r),d=t,void Tn(o).Tu.delete(d);var o,d}))}}(Ea(r=Os(r,ua)),Nc(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new an("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rd(this,s_(this._delegate,e))}catch(t){throw ou(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vu(this,cp(this._delegate,e))}catch(t){throw ou(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new au(this,function Dg(r,e){if(r=Os(r,Qc),Tg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new an(Ut.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gl(r,null,(t=e,new hl(Sr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ou(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function R_(r,e,t){r=Os(r,ua);const o=Object.assign(Object.assign({},C_),t);return function(d){if(d.maxAttempts<1)throw new an(Ut.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function Wy(r,e,t){const o=new Js;return r.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){const d=yield(_=r,Ed(_).then(I=>I.datastore));var _;new Eg(r.asyncQueue,d,t,e,o).run()})),o.promise}(Ea(r),d=>e(new O_(r,d)),o)}(this._delegate,t=>e(new U_(this,t)))}batch(){return Ea(this._delegate),new B_(new Lu(this._delegate,e=>Md(this._delegate,e)))}loadBundle(e){return function l_(r,e){const t=Ea(r=Os(r,ua)),o=new dp;return function Ky(r,e,t,o){const d=function(_,I){let k;return k="string"==typeof _?(new TextEncoder).encode(_):_,ne=function(ne,le){if(ne instanceof Uint8Array)return tp(ne,void 0);if(ne instanceof ArrayBuffer)return tp(new Uint8Array(ne),void 0);if(ne instanceof ReadableStream)return ne.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new d0(ne,I);var ne}(t,Mh(e));r.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){!function $y(r,e,t){const o=Tn(r);var d;(d=(0,rt.Z)(function*(_,I,k){try{const ne=yield I.getMetadata();if(yield function(kt,rn){const cn=Tn(kt),jn=rs(rn.createTime);return cn.persistence.runTransaction("hasNewerBundle","readonly",Mi=>cn.Ds.getBundleMetadata(Mi,rn.id)).then(Mi=>!!Mi&&Mi.createTime.compareTo(jn)>=0)}(_.localStore,ne))return yield I.close(),k._completeWith({taskState:"Success",documentsLoaded:(kt=ne).totalDocuments,bytesLoaded:kt.totalBytes,totalDocuments:kt.totalDocuments,totalBytes:kt.totalBytes}),Promise.resolve(new Set);k._updateProgress(Rc(ne));const le=new Oy(ne,_.localStore,I.wt);let be=yield I.fc();for(;be;){const kt=yield le.Nu(be);kt&&k._updateProgress(kt),be=yield I.fc()}const st=yield le.complete();return yield Yu(_,st.Ou,void 0),yield function(kt,rn){const cn=Tn(kt);return cn.persistence.runTransaction("Save bundle","readwrite",jn=>cn.Ds.saveBundleMetadata(jn,rn))}(_.localStore,ne),k._completeWith(st.progress),Promise.resolve(st.Mu)}catch(ne){return oa("SyncEngine",`Loading bundle failed with ${ne}`),k._failWith(ne),Promise.resolve(new Set)}var kt}),function(_,I,k){return d.apply(this,arguments)})(o,e,t).then(d=>{o.sharedClientState.notifyBundleLoaded(d)})}(yield op(r),d,o)}))}(t,r._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function u_(r,e){return function e_(r,e){return r.asyncQueue.enqueue((0,rt.Z)(function*(){return function(t,o){const d=Tn(t);return d.persistence.runTransaction("Get named query","readonly",_=>d.Ds.getNamedQuery(_,o))}(yield rp(r),e)}))}(Ea(r=Os(r,ua)),e).then(t=>t?new gl(r,null,t.query):null)}(this._delegate,e).then(t=>t?new au(this,t):null)}}class Ep extends T_{constructor(e){super(),this.firestore=e}convertBytes(e){return new sh(new ec(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Vu.forKey(t,this.firestore,null)}}class U_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ep(e)}get(e){const t=ed(e);return this._delegate.get(t).then(o=>new tf(this._firestore,new vc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const d=ed(e);return o?(wp("Transaction.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const _=ed(e);return 2===arguments.length?this._delegate.update(_,t):this._delegate.update(_,t,o,...d),this}delete(e){const t=ed(e);return this._delegate.delete(t),this}}class B_{constructor(e){this._delegate=e}set(e,t,o){const d=ed(e);return o?(wp("WriteBatch.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const _=ed(e);return 2===arguments.length?this._delegate.update(_,t):this._delegate.update(_,t,o,...d),this}delete(e){const t=ed(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Od{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new eh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new nf(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Od.INSTANCES;let d=o.get(e);d||(d=new WeakMap,o.set(e,d));let _=d.get(t);return _||(_=new Od(e,new Ep(e),t),d.set(t,_)),_}}Od.INSTANCES=new WeakMap;class Vu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ep(e)}static forPath(e,t,o){if(e.length%2!=0)throw new an("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vu(t,new Oa(t._delegate,o,new En(e)))}static forKey(e,t,o){return new Vu(t,new Oa(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Rd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rd(this.firestore,s_(this._delegate,e))}catch(t){throw ou(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nt.m9)(e))instanceof Oa&&Xu(this._delegate,e)}set(e,t){t=wp("DocumentReference.set",t);try{return t?x_(this._delegate,e,t):x_(this._delegate,e)}catch(o){throw ou(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?M_(this._delegate,e):M_(this._delegate,e,t,...o)}catch(d){throw ou(d,"updateDoc()","DocumentReference.update()")}}delete(){return function rv(r){return Md(Os(r.firestore,ua),[new Fe(r._key,vs.none())])}(this._delegate)}onSnapshot(...e){const t=H_(e),o=j_(e,d=>new tf(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return rh(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function tc(r){r=Os(r,Oa);const e=Os(r.firestore,ua),t=Ea(e),o=new nu(e);return function p0(r,e){const t=new Js;return r.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return(o=(0,rt.Z)(function*(d,_,I){try{const k=yield function(ne,le){const be=Tn(ne);return be.persistence.runTransaction("read document","readonly",st=>be.localDocuments.getDocument(st,le))}(d,_);k.isFoundDocument()?I.resolve(k):k.isNoDocument()?I.resolve(null):I.reject(new an(Ut.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const ne=Vh(k,`Failed to get document '${_} from cache`);I.reject(ne)}}),function(d,_,I){return o.apply(this,arguments)})(yield rp(r),e,t);var o})),t.promise}(t,r._key).then(d=>new vc(e,o,r._key,d,new Jc(null!==d&&d.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===e?.source?function nc(r){r=Os(r,Oa);const e=Os(r.firestore,ua);return Jm(Ea(e),r._key,{source:"server"}).then(t=>Bg(e,r,t))}(this._delegate):function D_(r){r=Os(r,Oa);const e=Os(r.firestore,ua);return Jm(Ea(e),r._key).then(t=>Bg(e,r,t))}(this._delegate),t.then(o=>new tf(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Vu(this.firestore,this._delegate.withConverter(e?Od.getInstance(this.firestore,e):null))}}function ou(r,e,t){return r.message=r.message.replace(e,t),r}function H_(r){for(const e of r)if("object"==typeof e&&!Wg(e))return e;return{}}function j_(r,e){var t,o;let d;return d=Wg(r[0])?r[0]:Wg(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:_=>{d.next&&d.next(e(_))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(o=d.complete)||void 0===o?void 0:o.bind(d)}}class tf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Pg(this._delegate,e._delegate)}}class nf extends tf{data(e){const t=this._delegate.data(e);return function vo(r,e){r||Vn()}(void 0!==t),t}}class au{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ep(e)}where(e,t,o){try{return new au(this.firestore,xd(this._delegate,function Xy(r,e,t){const o=e,d=Ad("where",r);return new Jy(d,o,t)}(e,t,o)))}catch(d){throw ou(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new au(this.firestore,xd(this._delegate,function ev(r,e="asc"){const t=e,o=Ad("orderBy",r);return new m_(o,t)}(e,t)))}catch(o){throw ou(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new au(this.firestore,xd(this._delegate,function __(r){return i_("limit",r),new ml("limit",r,"F")}(e)))}catch(t){throw ou(t,"limit()","Query.limit()")}}limitToLast(e){try{return new au(this.firestore,xd(this._delegate,function tv(r){return i_("limitToLast",r),new ml("limitToLast",r,"L")}(e)))}catch(t){throw ou(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new au(this.firestore,xd(this._delegate,function v_(...r){return new y_("startAt",r,!0)}(...e)))}catch(t){throw ou(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new au(this.firestore,xd(this._delegate,function nv(...r){return new y_("startAfter",r,!1)}(...e)))}catch(t){throw ou(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new au(this.firestore,xd(this._delegate,function w_(...r){return new Fg("endBefore",r,!1)}(...e)))}catch(t){throw ou(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new au(this.firestore,xd(this._delegate,function nh(...r){return new Fg("endAt",r,!0)}(...e)))}catch(t){throw ou(t,"endAt()","Query.endAt()")}}isEqual(e){return Wd(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function A_(r){r=Os(r,gl);const e=Os(r.firestore,ua),t=Ea(e),o=new nu(e);return function g0(r,e){const t=new Js;return r.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return(o=(0,rt.Z)(function*(d,_,I){try{const k=yield Mf(d,_,!0),ne=new $m(_,k.ji),le=ne.Ku(k.documents),be=ne.applyChanges(le,!1);I.resolve(be.snapshot)}catch(k){const ne=Vh(k,`Failed to execute query '${_} against cache`);I.reject(ne)}}),function(d,_,I){return o.apply(this,arguments)})(yield rp(r),e,t);var o})),t.promise}(t,r._query).then(d=>new kc(e,o,r,d))}(this._delegate):"server"===e?.source?function iv(r){r=Os(r,gl);const e=Os(r.firestore,ua),t=Ea(e),o=new nu(e);return Xm(t,r._query,{source:"server"}).then(d=>new kc(e,o,r,d))}(this._delegate):function S_(r){r=Os(r,gl);const e=Os(r.firestore,ua),t=Ea(e),o=new nu(e);return kg(r._query),Xm(t,r._query).then(d=>new kc(e,o,r,d))}(this._delegate),t.then(o=>new Kg(this.firestore,new kc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=H_(e),o=j_(e,d=>new Kg(this.firestore,new kc(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return rh(this._delegate,t,o)}withConverter(e){return new au(this.firestore,this._delegate.withConverter(e?Od.getInstance(this.firestore,e):null))}}class cv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new nf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new au(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new nf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cv(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new nf(this._firestore,o))})}isEqual(e){return Pg(this._delegate,e._delegate)}}class Rd extends au{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vu(this.firestore,e):null}doc(e){try{return new Vu(this.firestore,void 0===e?cp(this._delegate):cp(this._delegate,e))}catch(t){throw ou(t,"doc()","CollectionReference.doc()")}}add(e){return function Ug(r,e){const t=Os(r.firestore,ua),o=cp(r),d=ih(r.converter,e);return Md(t,[Dd(yc(r.firestore),"addDoc",o._key,d,null!==r.converter,{}).toMutation(o._key,vs.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Vu(this.firestore,t))}isEqual(e){return Xu(this._delegate,e._delegate)}withConverter(e){return new Rd(this.firestore,this._delegate.withConverter(e?Od.getInstance(this.firestore,e):null))}}function ed(r){return Os(r,Oa)}class bp{constructor(...e){this._delegate=new _c(...e)}static documentId(){return new bp(Hs.keyField().canonicalString())}isEqual(e){return(e=(0,nt.m9)(e))instanceof _c&&this._delegate._internalPath.isEqual(e._internalPath)}}class td{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ov(){return new Jd("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new td(e)}static delete(){const e=function vp(){return new Sd("deleteField")}();return e._methodName="FieldValue.delete",new td(e)}static arrayUnion(...e){const t=function N_(...r){return new pp("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new td(t)}static arrayRemove(...e){const t=function P_(...r){return new xg("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new td(t)}static increment(e){const t=function Hg(r){return new h_("increment",r)}(e);return t._methodName="FieldValue.increment",new td(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $_={Firestore:V_,GeoPoint:hp,Timestamp:Xr,Blob:sh,Transaction:U_,WriteBatch:B_,DocumentReference:Vu,DocumentSnapshot:tf,Query:au,QueryDocumentSnapshot:nf,QuerySnapshot:Kg,CollectionReference:Rd,FieldPath:bp,FieldValue:td,setLogLevel:function uv(r){!function ko(r){ys.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function z_(r){(function G_(r,e){r.INTERNAL.registerComponent(new Be.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(o,d)},"PUBLIC").setServiceProps(Object.assign({},$_)))})(r,(e,t)=>new V_(e,t,new lv)),r.registerVersion("@firebase/firestore-compat","0.1.23")}(vt.Z);var Fc=K(1205),W_=K(440),K_=K(127);function nd(r,e){return function qg(r,e=a.z){return new re.y(t=>{let o;return null!=e?e.schedule(()=>{o=r.onSnapshot({includeMetadataChanges:!0},t)}):o=r.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(r,e)}function Zg(r,e){return nd(r,e).pipe((0,Ie.U)(t=>({payload:t,type:"query"})))}function Lc(r,e){return Zg(r,e).pipe((0,Re.O)(void 0),Me(),(0,Ie.U)(([t,o])=>{const d=o.payload.docChanges(),_=d.map(I=>({type:I.type,payload:I}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((I,k)=>{const ne=d.find(be=>be.doc.ref.isEqual(I.ref)),le=t?.payload.docs.find(be=>be.ref.isEqual(I.ref));ne&&JSON.stringify(ne.doc.metadata)===JSON.stringify(I.metadata)||!ne&&le&&JSON.stringify(le.metadata)===JSON.stringify(I.metadata)||_.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:I}})}),_}))}function hv(r,e,t){return Lc(r,t).pipe((0,Ge.R)((o,d)=>function Yg(r,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(r=function Z_(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return q_(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return q_(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return q_(r,e.oldIndex,1)}return r}(r,o))}),r}(o,d.map(_=>_.payload),e),[]),(0,Mt.x)(),(0,Ie.U)(o=>o.map(d=>({type:d.type,payload:d}))))}function q_(r,e,t,...o){const d=r.slice();return d.splice(e,t,...o),d}function Qg(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class fv{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=Lc(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ie.U)(o=>o.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,Re.O)(void 0),Me(),(0,ct.h)(([o,d])=>d.length>0||!o),(0,Ie.U)(([o,d])=>d),Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ge.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Qg(e);return hv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return Zg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ie.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Ae.iC)}get(e){return(0,Ee.D)(this.query.get(e)).pipe(Ae.iC)}add(e){return this.ref.add(e)}doc(e){return new ir(this.ref.doc(e),this.afs)}}class ir{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:d,query:_}=rf(o,t);return new fv(d,_,this.afs)}snapshotChanges(){return function dv(r,e){return nd(r,e).pipe((0,Re.O)(void 0),Me(),(0,Ie.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ie.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ee.D)(this.ref.get(e)).pipe(Ae.iC)}}class pv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Lc(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ie.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,ct.h)(t=>t.length>0),Ae.iC):Lc(this.query,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ge.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Qg(e);return hv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return Zg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ie.U)(o=>o.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),Ae.iC)}get(e){return(0,Ee.D)(this.query.get(e)).pipe(Ae.iC)}}const Y_=new m.OlP("angularfire2.enableFirestorePersistence"),Q_=new m.OlP("angularfire2.firestore.persistenceSettings"),oh=new m.OlP("angularfire2.firestore.settings"),gv=new m.OlP("angularfire2.firestore.use-emulator");function rf(r,e=(t=>t)){return{query:e(r),ref:r}}let sf=(()=>{class r{constructor(t,o,d,_,I,k,ne,le,be,st,kt,rn,cn,jn,Mi,Rs,Lo){this.schedulers=ne;const wo=(0,wt.on)(t,k,o),ta=be;st&&(0,Fc.nw)(wo,k,kt,cn,jn,Mi,rn,Rs),[this.firestore,this.persistenceEnabled$]=(0,wt.cc)(`${wo.name}.firestore`,"AngularFirestore",wo.name,()=>{const Cs=k.runOutsideAngular(()=>wo.firestore());if(_&&Cs.settings(_),ta&&Cs.useEmulator(...ta),d&&!(0,Wt.PM)(I)){const xo=()=>{try{return(0,Ee.D)(Cs.enablePersistence(le||void 0).then(()=>!0,()=>!1))}catch(Al){return typeof console<"u"&&console.warn(Al),(0,We.of)(!1)}};return[Cs,k.runOutsideAngular(xo)]}return[Cs,(0,We.of)(!1)]},[_,ta,d])}collection(t,o){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:_,query:I}=rf(d,o),k=this.schedulers.ngZone.run(()=>_);return new fv(k,I,this)}collectionGroup(t,o){const d=o||(I=>I),_=this.firestore.collectionGroup(t);return new pv(d(_),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>o);return new ir(d,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(m.LFG(wt.Dh),m.LFG(wt.xv,8),m.LFG(Y_,8),m.LFG(oh,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ae.HU),m.LFG(Q_,8),m.LFG(gv,8),m.LFG(Fc.zQ,8),m.LFG(Fc.Qv,8),m.LFG(Fc.L6,8),m.LFG(Fc._Q,8),m.LFG(Fc.rT,8),m.LFG(Fc.lh,8),m.LFG(Fc.f7,8),m.LFG(W_.nm,8))},r.\u0275prov=m.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),Xa=(()=>{class r{constructor(){K_.Z.registerVersion("angularfire",Ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:Y_,useValue:!0},{provide:Q_,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=m.oAB({type:r}),r.\u0275inj=m.cJS({providers:[sf]}),r})()},2011:(In,Et,K)=>{K.d(Et,{Dh:()=>xe,GT:()=>Ae,cc:()=>ct,hO:()=>Mt,on:()=>Me,pX:()=>We,xv:()=>tt});var m=K(4650),a=K(127),re=K(5813);In=K.hmd(In);const Ee=["ngOnDestroy"],We=(vt,rt,qt,Be={})=>new Proxy(vt,{get:(ve,nt)=>qt.runOutsideAngular(()=>{var Qe;if(vt[nt])return!(null===(Qe=Be?.spy)||void 0===Qe)&&Qe.get&&Be.spy.get(nt,vt[nt]),vt[nt];if(Ee.indexOf(nt)>-1)return()=>{};const De=rt.toPromise().then(Q=>{const ft=Q&&Q[nt];return"function"==typeof ft?ft.bind(Q):ft&&ft.then?ft.then(Ve=>qt.run(()=>Ve)):qt.run(()=>ft)});return new Proxy(()=>{},{get:(Q,ft)=>De[ft],apply:(Q,ft,Ve)=>De.then(it=>{var bt;const yt=it&&it(...Ve);return!(null===(bt=Be?.spy)||void 0===bt)&&bt.apply&&Be.spy.apply(nt,Ve,yt),yt})})})}),Ae=(vt,rt)=>{rt.forEach(qt=>{Object.getOwnPropertyNames(qt.prototype||qt).forEach(Be=>{Object.defineProperty(vt.prototype,Be,Object.getOwnPropertyDescriptor(qt.prototype||qt,Be))})})};class Re{constructor(rt){return rt}}const xe=new m.OlP("angularfire2.app.options"),tt=new m.OlP("angularfire2.app.name");function Me(vt,rt,qt){const ve="object"==typeof qt&&qt||{};ve.name=ve.name||"string"==typeof qt&&qt||"[DEFAULT]";const Qe=a.Z.apps.filter(De=>De&&De.name===ve.name)[0]||rt.runOutsideAngular(()=>a.Z.initializeApp(vt,ve));try{JSON.stringify(vt)!==JSON.stringify(Qe.options)&&Ie("error",`${Qe.name} Firebase App already initialized with different options${In.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Re(Qe)}const Ie=(vt,...rt)=>{(0,m.X6Q)()&&typeof console<"u"&&console[vt](...rt)},Ge={provide:Re,useFactory:Me,deps:[xe,m.R0b,[new m.FiY,tt]]};let Mt=(()=>{class vt{constructor(qt){a.Z.registerVersion("angularfire",re.q4.full,"core"),a.Z.registerVersion("angularfire",re.q4.full,"app-compat"),a.Z.registerVersion("angular",m.q4F.full,qt.toString())}static initializeApp(qt,Be){return{ngModule:vt,providers:[{provide:xe,useValue:qt},{provide:tt,useValue:Be}]}}}return vt.\u0275fac=function(qt){return new(qt||vt)(m.LFG(m.Lbi))},vt.\u0275mod=m.oAB({type:vt}),vt.\u0275inj=m.cJS({providers:[Ge]}),vt})();function ct(vt,rt,qt,Be,ve){const[,nt,Qe]=globalThis.\u0275AngularfireInstanceCache.find(De=>De[0]===vt)||[];if(nt)return function wt(vt,rt){try{return vt.toString()===rt.toString()}catch{return vt===rt}}(ve,Qe)||(Dt("error",`${rt} was already initialized on the ${qt} Firebase App with different settings.${Wt?" You may need to reload as Firebase is not HMR aware.":""}`),Dt("warn",{is:ve,was:Qe})),nt;{const De=Be();return globalThis.\u0275AngularfireInstanceCache.push([vt,De,ve]),De}}const Wt=!!In.hot,Dt=(vt,...rt)=>{(0,m.X6Q)()&&typeof console<"u"&&console[vt](...rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(In,Et,K)=>{K.d(Et,{q4:()=>Ne,iC:()=>Aa,fc:()=>aa,HU:()=>Go,vb:()=>$r,JM:()=>Jo});var m=K(4650),a=K(5867),re=K(5861),Ee=K(9681),We=K(2090),Ae=K(4859),Re=K(1877),xe=K(8766);const tt="@firebase/installations",Me="0.5.12",Ge=`w:${Me}`,Mt="FIS_v2",rt=new We.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function qt(z){return z instanceof We.ZR&&z.code.includes("request-failed")}function Be({projectId:z}){return`https://firebaseinstallations.googleapis.com/v1/projects/${z}/installations`}function ve(z){return{token:z.token,requestStatus:2,expiresIn:it(z.expiresIn),creationTime:Date.now()}}function nt(z,X){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,re.Z)(function*(z,X){const He=(yield X.json()).error;return rt.create("request-failed",{requestName:z,serverCode:He.code,serverMessage:He.message,serverStatus:He.status})})).apply(this,arguments)}function De({apiKey:z}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":z})}function Q(z,{refreshToken:X}){const de=De(z);return de.append("Authorization",function bt(z){return`${Mt} ${z}`}(X)),de}function ft(z){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,re.Z)(function*(z){const X=yield z();return X.status>=500&&X.status<600?z():X})).apply(this,arguments)}function it(z){return Number(z.replace("s","000"))}function yt(z,X){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,re.Z)(function*({appConfig:z,heartbeatServiceProvider:X},{fid:de}){const He=Be(z),gt=De(z),At=X.getImmediate({optional:!0});if(At){const di=yield At.getHeartbeatsHeader();di&&gt.append("x-firebase-client",di)}const mn={method:"POST",headers:gt,body:JSON.stringify({fid:de,authVersion:Mt,appId:z.appId,sdkVersion:Ge})},ri=yield ft(()=>fetch(He,mn));if(ri.ok){const di=yield ri.json();return{fid:di.fid||de,registrationStatus:2,refreshToken:di.refreshToken,authToken:ve(di.authToken)}}throw yield nt("Create Installation",ri)})).apply(this,arguments)}function on(z){return new Promise(X=>{setTimeout(X,z)})}const On=/^[cdef][\w-]{21}$/;function $t(){try{const z=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(z),z[0]=112+z[0]%16;const de=function ci(z){return function pn(z){return btoa(String.fromCharCode(...z)).replace(/\+/g,"-").replace(/\//g,"_")}(z).substr(0,22)}(z);return On.test(de)?de:""}catch{return""}}function Bn(z){return`${z.appName}!${z.appId}`}const St=new Map;function Vt(z,X){const de=Bn(z);ln(de,X),function Hn(z,X){const de=function Ei(){return!Gi&&"BroadcastChannel"in self&&(Gi=new BroadcastChannel("[Firebase] FID Change"),Gi.onmessage=z=>{ln(z.data.key,z.data.fid)}),Gi}();de&&de.postMessage({key:z,fid:X}),function bi(){0===St.size&&Gi&&(Gi.close(),Gi=null)}()}(de,X)}function ln(z,X){const de=St.get(z);if(de)for(const He of de)He(X)}let Gi=null;const Hi="firebase-installations-store";let Li=null;function vi(){return Li||(Li=(0,xe.X3)("firebase-installations-database",1,{upgrade:(z,X)=>{0===X&&z.createObjectStore(Hi)}})),Li}function Qt(z,X){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,re.Z)(function*(z,X){const de=Bn(z),gt=(yield vi()).transaction(Hi,"readwrite"),At=gt.objectStore(Hi),un=yield At.get(de);return yield At.put(X,de),yield gt.done,(!un||un.fid!==X.fid)&&Vt(z,X.fid),X})).apply(this,arguments)}function Vi(z){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,re.Z)(function*(z){const X=Bn(z),He=(yield vi()).transaction(Hi,"readwrite");yield He.objectStore(Hi).delete(X),yield He.done})).apply(this,arguments)}function Kr(z,X){return sr.apply(this,arguments)}function sr(){return(sr=(0,re.Z)(function*(z,X){const de=Bn(z),gt=(yield vi()).transaction(Hi,"readwrite"),At=gt.objectStore(Hi),un=yield At.get(de),mn=X(un);return void 0===mn?yield At.delete(de):yield At.put(mn,de),yield gt.done,mn&&(!un||un.fid!==mn.fid)&&Vt(z,mn.fid),mn})).apply(this,arguments)}function Tr(z){return _r.apply(this,arguments)}function _r(){return(_r=(0,re.Z)(function*(z){let X;const de=yield Kr(z.appConfig,He=>{const gt=Qi(He),At=zn(z,gt);return X=At.registrationPromise,At.installationEntry});return""===de.fid?{installationEntry:yield X}:{installationEntry:de,registrationPromise:X}})).apply(this,arguments)}function Qi(z){return ii(z||{fid:$t(),registrationStatus:0})}function zn(z,X){if(0===X.registrationStatus){if(!navigator.onLine)return{installationEntry:X,registrationPromise:Promise.reject(rt.create("app-offline"))};const de={fid:X.fid,registrationStatus:1,registrationTime:Date.now()},He=function $n(z,X){return fi.apply(this,arguments)}(z,de);return{installationEntry:de,registrationPromise:He}}return 1===X.registrationStatus?{installationEntry:X,registrationPromise:Dr(z)}:{installationEntry:X}}function fi(){return(fi=(0,re.Z)(function*(z,X){try{const de=yield yt(z,X);return Qt(z.appConfig,de)}catch(de){throw qt(de)&&409===de.customData.serverCode?yield Vi(z.appConfig):yield Qt(z.appConfig,{fid:X.fid,registrationStatus:0}),de}})).apply(this,arguments)}function Dr(z){return An.apply(this,arguments)}function An(){return(An=(0,re.Z)(function*(z){let X=yield Ui(z.appConfig);for(;1===X.registrationStatus;)yield on(100),X=yield Ui(z.appConfig);if(0===X.registrationStatus){const{installationEntry:de,registrationPromise:He}=yield Tr(z);return He||de}return X})).apply(this,arguments)}function Ui(z){return Kr(z,X=>{if(!X)throw rt.create("installation-not-found");return ii(X)})}function ii(z){return function or(z){return 1===z.registrationStatus&&z.registrationTime+1e4<Date.now()}(z)?{fid:z.fid,registrationStatus:0}:z}function li(z,X){return gs.apply(this,arguments)}function gs(){return(gs=(0,re.Z)(function*({appConfig:z,heartbeatServiceProvider:X},de){const He=qn(z,de),gt=Q(z,de),At=X.getImmediate({optional:!0});if(At){const di=yield At.getHeartbeatsHeader();di&&gt.append("x-firebase-client",di)}const mn={method:"POST",headers:gt,body:JSON.stringify({installation:{sdkVersion:Ge,appId:z.appId}})},ri=yield ft(()=>fetch(He,mn));if(ri.ok)return ve(yield ri.json());throw yield nt("Generate Auth Token",ri)})).apply(this,arguments)}function qn(z,{fid:X}){return`${Be(z)}/${X}/authTokens:generate`}function ot(z){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,re.Z)(function*(z,X=!1){let de;const He=yield Kr(z.appConfig,At=>{if(!xn(At))throw rt.create("not-registered");const un=At.authToken;if(!X&&Bi(un))return At;if(1===un.requestStatus)return de=je(z,X),At;{if(!navigator.onLine)throw rt.create("app-offline");const mn=kr(At);return de=Kt(z,mn),mn}});return de?yield de:He.authToken})).apply(this,arguments)}function je(z,X){return et.apply(this,arguments)}function et(){return(et=(0,re.Z)(function*(z,X){let de=yield qe(z.appConfig);for(;1===de.authToken.requestStatus;)yield on(100),de=yield qe(z.appConfig);const He=de.authToken;return 0===He.requestStatus?ot(z,X):He})).apply(this,arguments)}function qe(z){return Kr(z,X=>{if(!xn(X))throw rt.create("not-registered");return function mt(z){return 1===z.requestStatus&&z.requestTime+1e4<Date.now()}(X.authToken)?Object.assign(Object.assign({},X),{authToken:{requestStatus:0}}):X})}function Kt(z,X){return fn.apply(this,arguments)}function fn(){return(fn=(0,re.Z)(function*(z,X){try{const de=yield li(z,X),He=Object.assign(Object.assign({},X),{authToken:de});return yield Qt(z.appConfig,He),de}catch(de){if(!qt(de)||401!==de.customData.serverCode&&404!==de.customData.serverCode){const He=Object.assign(Object.assign({},X),{authToken:{requestStatus:0}});yield Qt(z.appConfig,He)}else yield Vi(z.appConfig);throw de}})).apply(this,arguments)}function xn(z){return void 0!==z&&2===z.registrationStatus}function Bi(z){return 2===z.requestStatus&&!function Ji(z){const X=Date.now();return X<z.creationTime||z.creationTime+z.expiresIn<X+36e5}(z)}function kr(z){const X={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},z),{authToken:X})}function Xe(){return(Xe=(0,re.Z)(function*(z){const X=z,{installationEntry:de,registrationPromise:He}=yield Tr(X);return He?He.catch(console.error):ot(X).catch(console.error),de.fid})).apply(this,arguments)}function gn(){return(gn=(0,re.Z)(function*(z,X=!1){const de=z;return yield Gn(de),(yield ot(de,X)).token})).apply(this,arguments)}function Gn(z){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,re.Z)(function*(z){const{registrationPromise:X}=yield Tr(z);X&&(yield X)})).apply(this,arguments)}function dr(z){return rt.create("missing-app-config-values",{valueName:z})}const yr="installations",Ns=z=>{const X=z.getProvider("app").getImmediate(),de=function Di(z){if(!z||!z.options)throw dr("App Configuration");if(!z.name)throw dr("App Name");const X=["projectId","apiKey","appId"];for(const de of X)if(!z.options[de])throw dr(de);return{appName:z.name,projectId:z.options.projectId,apiKey:z.options.apiKey,appId:z.options.appId}}(X);return{app:X,appConfig:de,heartbeatServiceProvider:(0,Ee._getProvider)(X,"heartbeat"),_delete:()=>Promise.resolve()}},ws=z=>{const X=z.getProvider("app").getImmediate(),de=(0,Ee._getProvider)(X,yr).getImmediate();return{getId:()=>function ze(z){return Xe.apply(this,arguments)}(de),getToken:gt=>function jt(z){return gn.apply(this,arguments)}(de,gt)}};(function na(){(0,Ee._registerComponent)(new Ae.wA(yr,Ns,"PUBLIC")),(0,Ee._registerComponent)(new Ae.wA("installations-internal",ws,"PRIVATE"))})(),(0,Ee.registerVersion)(tt,Me),(0,Ee.registerVersion)(tt,Me,"esm2017");const to="@firebase/remote-config",ki=new We.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ro{constructor(X,de,He,gt){this.client=X,this.storage=de,this.storageCache=He,this.logger=gt}isCachedDataFresh(X,de){if(!de)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const He=Date.now()-de,gt=He<=X;return this.logger.debug(`Config fetch cache check. Cache age millis: ${He}. Cache max age millis (minimumFetchIntervalMillis setting): ${X}. Is cache hit: ${gt}.`),gt}fetch(X){var de=this;return(0,re.Z)(function*(){const[He,gt]=yield Promise.all([de.storage.getLastSuccessfulFetchTimestampMillis(),de.storage.getLastSuccessfulFetchResponse()]);if(gt&&de.isCachedDataFresh(X.cacheMaxAgeMillis,He))return gt;X.eTag=gt&&gt.eTag;const At=yield de.client.fetch(X),un=[de.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===At.status&&un.push(de.storage.setLastSuccessfulFetchResponse(At)),yield Promise.all(un),At})()}}function ia(z=navigator){return z.languages&&z.languages[0]||z.language}class io{constructor(X,de,He,gt,At,un){this.firebaseInstallations=X,this.sdkVersion=de,this.namespace=He,this.projectId=gt,this.apiKey=At,this.appId=un}fetch(X){var de=this;return(0,re.Z)(function*(){var He,gt,At;const[un,mn]=yield Promise.all([de.firebaseInstallations.getId(),de.firebaseInstallations.getToken()]),di=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${de.projectId}/namespaces/${de.namespace}:fetch?key=${de.apiKey}`,Pi={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":X.eTag||"*"},Yn={sdk_version:de.sdkVersion,app_instance_id:un,app_instance_id_token:mn,app_id:de.appId,language_code:ia()},ps={method:"POST",headers:Pi,body:JSON.stringify(Yn)},ho=fetch(di,ps),zo=new Promise((ja,Hl)=>{X.signal.addEventListener(()=>{const cu=new Error("The operation was aborted.");cu.name="AbortError",Hl(cu)})});let xa;try{yield Promise.race([ho,zo]),xa=yield ho}catch(ja){let Hl="fetch-client-network";throw"AbortError"===(null===(He=ja)||void 0===He?void 0:He.name)&&(Hl="fetch-timeout"),ki.create(Hl,{originalErrorMessage:null===(gt=ja)||void 0===gt?void 0:gt.message})}let sl=xa.status;const Ba=xa.headers.get("ETag")||void 0;let Ha,ol;if(200===xa.status){let ja;try{ja=yield xa.json()}catch(Hl){throw ki.create("fetch-client-parse",{originalErrorMessage:null===(At=Hl)||void 0===At?void 0:At.message})}Ha=ja.entries,ol=ja.state}if("INSTANCE_STATE_UNSPECIFIED"===ol?sl=500:"NO_CHANGE"===ol?sl=304:("NO_TEMPLATE"===ol||"EMPTY_CONFIG"===ol)&&(Ha={}),304!==sl&&200!==sl)throw ki.create("fetch-status",{httpStatus:sl});return{status:sl,eTag:Ba,config:Ha}})()}}class ut{constructor(X,de){this.client=X,this.storage=de}fetch(X){var de=this;return(0,re.Z)(function*(){const He=(yield de.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return de.attemptFetch(X,He)})()}attemptFetch(X,{throttleEndTimeMillis:de,backoffCount:He}){var gt=this;return(0,re.Z)(function*(){yield function Ks(z,X){return new Promise((de,He)=>{const gt=Math.max(X-Date.now(),0),At=setTimeout(de,gt);z.addEventListener(()=>{clearTimeout(At),He(ki.create("fetch-throttle",{throttleEndTimeMillis:X}))})})}(X.signal,de);try{const At=yield gt.client.fetch(X);return yield gt.storage.deleteThrottleMetadata(),At}catch(At){if(!function pt(z){if(!(z instanceof We.ZR&&z.customData))return!1;const X=Number(z.customData.httpStatus);return 429===X||500===X||503===X||504===X}(At))throw At;const un={throttleEndTimeMillis:Date.now()+(0,We.$s)(He),backoffCount:He+1};return yield gt.storage.setThrottleMetadata(un),gt.attemptFetch(X,un)}})()}}class Zt{constructor(X,de,He,gt,At){this.app=X,this._client=de,this._storageCache=He,this._storage=gt,this._logger=At,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function en(z,X){var de;const He=z.target.error||void 0;return ki.create(X,{originalErrorMessage:He&&(null===(de=He)||void 0===de?void 0:de.message)})}const si="app_namespace_store";class Fs{constructor(X,de,He,gt=function ro(){return new Promise((z,X)=>{var de;try{const He=indexedDB.open("firebase_remote_config",1);He.onerror=gt=>{X(en(gt,"storage-open"))},He.onsuccess=gt=>{z(gt.target.result)},He.onupgradeneeded=gt=>{0===gt.oldVersion&&gt.target.result.createObjectStore(si,{keyPath:"compositeKey"})}}catch(He){X(ki.create("storage-open",{originalErrorMessage:null===(de=He)||void 0===de?void 0:de.message}))}})}()){this.appId=X,this.appName=de,this.namespace=He,this.openDbPromise=gt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(X){return this.set("last_fetch_status",X)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(X){return this.set("last_successful_fetch_timestamp_millis",X)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(X){return this.set("last_successful_fetch_response",X)}getActiveConfig(){return this.get("active_config")}setActiveConfig(X){return this.set("active_config",X)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(X){return this.set("active_config_etag",X)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(X){return this.set("throttle_metadata",X)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(X){var de=this;return(0,re.Z)(function*(){const He=yield de.openDbPromise;return new Promise((gt,At)=>{var un;const ri=He.transaction([si],"readonly").objectStore(si),di=de.createCompositeKey(X);try{const Pi=ri.get(di);Pi.onerror=Yn=>{At(en(Yn,"storage-get"))},Pi.onsuccess=Yn=>{const ps=Yn.target.result;gt(ps?ps.value:void 0)}}catch(Pi){At(ki.create("storage-get",{originalErrorMessage:null===(un=Pi)||void 0===un?void 0:un.message}))}})})()}set(X,de){var He=this;return(0,re.Z)(function*(){const gt=yield He.openDbPromise;return new Promise((At,un)=>{var mn;const di=gt.transaction([si],"readwrite").objectStore(si),Pi=He.createCompositeKey(X);try{const Yn=di.put({compositeKey:Pi,value:de});Yn.onerror=ps=>{un(en(ps,"storage-set"))},Yn.onsuccess=()=>{At()}}catch(Yn){un(ki.create("storage-set",{originalErrorMessage:null===(mn=Yn)||void 0===mn?void 0:mn.message}))}})})()}delete(X){var de=this;return(0,re.Z)(function*(){const He=yield de.openDbPromise;return new Promise((gt,At)=>{var un;const ri=He.transaction([si],"readwrite").objectStore(si),di=de.createCompositeKey(X);try{const Pi=ri.delete(di);Pi.onerror=Yn=>{At(en(Yn,"storage-delete"))},Pi.onsuccess=()=>{gt()}}catch(Pi){At(ki.create("storage-delete",{originalErrorMessage:null===(un=Pi)||void 0===un?void 0:un.message}))}})})()}createCompositeKey(X){return[this.appId,this.appName,this.namespace,X].join()}}class as{constructor(X){this.storage=X}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var X=this;return(0,re.Z)(function*(){const de=X.storage.getLastFetchStatus(),He=X.storage.getLastSuccessfulFetchTimestampMillis(),gt=X.storage.getActiveConfig(),At=yield de;At&&(X.lastFetchStatus=At);const un=yield He;un&&(X.lastSuccessfulFetchTimestampMillis=un);const mn=yield gt;mn&&(X.activeConfig=mn)})()}setLastFetchStatus(X){return this.lastFetchStatus=X,this.storage.setLastFetchStatus(X)}setLastSuccessfulFetchTimestampMillis(X){return this.lastSuccessfulFetchTimestampMillis=X,this.storage.setLastSuccessfulFetchTimestampMillis(X)}setActiveConfig(X){return this.activeConfig=X,this.storage.setActiveConfig(X)}}function Eo(){return bo.apply(this,arguments)}function bo(){return(bo=(0,re.Z)(function*(){if(!(0,We.hl)())return!1;try{return yield(0,We.eu)()}catch{return!1}})).apply(this,arguments)}!function vr(){(0,Ee._registerComponent)(new Ae.wA("remote-config",function z(X,{instanceIdentifier:de}){const He=X.getProvider("app").getImmediate(),gt=X.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ki.create("registration-window");if(!(0,We.hl)())throw ki.create("indexed-db-unavailable");const{projectId:At,apiKey:un,appId:mn}=He.options;if(!At)throw ki.create("registration-project-id");if(!un)throw ki.create("registration-api-key");if(!mn)throw ki.create("registration-app-id");const ri=new Fs(mn,He.name,de=de||"firebase"),di=new as(ri),Pi=new Re.Yd(to);Pi.logLevel=Re.in.ERROR;const Yn=new io(gt,Ee.SDK_VERSION,de,At,un,mn),ps=new ut(Yn,ri),ho=new Ro(ps,ri,di,Pi),zo=new Zt(He,ho,di,ri,Pi);return function Or(z){const X=(0,We.m9)(z);X._initializePromise||(X._initializePromise=X._storageCache.loadFromStorage().then(()=>{X._isInitializationComplete=!0}))}(zo),zo},"PUBLIC").setMultipleInstances(!0)),(0,Ee.registerVersion)(to,"0.3.11"),(0,Ee.registerVersion)(to,"0.3.11","esm2017")}();const wr="/firebase-messaging-sw.js",qs="/firebase-cloud-messaging-push-scope",so="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",No="google.c.a.c_id",Yr="google.c.a.c_l",Na="google.c.a.ts",oo="google.c.a.e";var Qr=(()=>{return(z=Qr||(Qr={})).PUSH_RECEIVED="push-received",z.NOTIFICATION_CLICKED="notification-clicked",Qr;var z})();function ao(z){const X=new Uint8Array(z);return btoa(String.fromCharCode(...X)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Br(z){const de=(z+"=".repeat((4-z.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),He=atob(de),gt=new Uint8Array(He.length);for(let At=0;At<He.length;++At)gt[At]=He.charCodeAt(At);return gt}const Io="fcm_token_details_db",ls="fcm_token_object_Store";function Ai(z){return go.apply(this,arguments)}function go(){return go=(0,re.Z)(function*(z){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(At=>At.name).includes(Io))return null;let X=null;return(yield(0,xe.X3)(Io,5,{upgrade:(He=(0,re.Z)(function*(gt,At,un,mn){var ri;if(At<2||!gt.objectStoreNames.contains(ls))return;const di=mn.objectStore(ls),Pi=yield di.index("fcmSenderId").get(z);if(yield di.clear(),Pi)if(2===At){const Yn=Pi;if(!Yn.auth||!Yn.p256dh||!Yn.endpoint)return;X={token:Yn.fcmToken,createTime:null!==(ri=Yn.createTime)&&void 0!==ri?ri:Date.now(),subscriptionOptions:{auth:Yn.auth,p256dh:Yn.p256dh,endpoint:Yn.endpoint,swScope:Yn.swScope,vapidKey:"string"==typeof Yn.vapidKey?Yn.vapidKey:ao(Yn.vapidKey)}}}else if(3===At){const Yn=Pi;X={token:Yn.fcmToken,createTime:Yn.createTime,subscriptionOptions:{auth:ao(Yn.auth),p256dh:ao(Yn.p256dh),endpoint:Yn.endpoint,swScope:Yn.swScope,vapidKey:ao(Yn.vapidKey)}}}else if(4===At){const Yn=Pi;X={token:Yn.fcmToken,createTime:Yn.createTime,subscriptionOptions:{auth:ao(Yn.auth),p256dh:ao(Yn.p256dh),endpoint:Yn.endpoint,swScope:Yn.swScope,vapidKey:ao(Yn.vapidKey)}}}}),function(At,un,mn,ri){return He.apply(this,arguments)})})).close(),yield(0,xe.Lj)(Io),yield(0,xe.Lj)("fcm_vapid_details_db"),yield(0,xe.Lj)("undefined"),Rr(X)?X:null;var He}),go.apply(this,arguments)}function Rr(z){if(!z||!z.subscriptionOptions)return!1;const{subscriptionOptions:X}=z;return"number"==typeof z.createTime&&z.createTime>0&&"string"==typeof z.token&&z.token.length>0&&"string"==typeof X.auth&&X.auth.length>0&&"string"==typeof X.p256dh&&X.p256dh.length>0&&"string"==typeof X.endpoint&&X.endpoint.length>0&&"string"==typeof X.swScope&&X.swScope.length>0&&"string"==typeof X.vapidKey&&X.vapidKey.length>0}const mo="firebase-messaging-store";let lr=null;function _o(){return lr||(lr=(0,xe.X3)("firebase-messaging-database",1,{upgrade:(z,X)=>{0===X&&z.createObjectStore(mo)}})),lr}function us(z){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,re.Z)(function*(z){const X=Gr(z),He=yield(yield _o()).transaction(mo).objectStore(mo).get(X);if(He)return He;{const gt=yield Ai(z.appConfig.senderId);if(gt)return yield Zi(z,gt),gt}})).apply(this,arguments)}function Zi(z,X){return da.apply(this,arguments)}function da(){return(da=(0,re.Z)(function*(z,X){const de=Gr(z),gt=(yield _o()).transaction(mo,"readwrite");return yield gt.objectStore(mo).put(X,de),yield gt.done,X})).apply(this,arguments)}function fr(z){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,re.Z)(function*(z){const X=Gr(z),He=(yield _o()).transaction(mo,"readwrite");yield He.objectStore(mo).delete(X),yield He.done})).apply(this,arguments)}function Gr({appConfig:z}){return z.appId}const ur=new We.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ii(z,X){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,re.Z)(function*(z,X){var de;const He=yield To(z),gt=Jt(X),At={method:"POST",headers:He,body:JSON.stringify(gt)};let un;try{un=yield(yield fetch(Co(z.appConfig),At)).json()}catch(mn){throw ur.create("token-subscribe-failed",{errorInfo:null===(de=mn)||void 0===de?void 0:de.toString()})}if(un.error)throw ur.create("token-subscribe-failed",{errorInfo:un.error.message});if(!un.token)throw ur.create("token-subscribe-no-token");return un.token})).apply(this,arguments)}function xl(z,X){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,re.Z)(function*(z,X){var de;const He=yield To(z),gt=Jt(X.subscriptionOptions),At={method:"PATCH",headers:He,body:JSON.stringify(gt)};let un;try{un=yield(yield fetch(`${Co(z.appConfig)}/${X.token}`,At)).json()}catch(mn){throw ur.create("token-update-failed",{errorInfo:null===(de=mn)||void 0===de?void 0:de.toString()})}if(un.error)throw ur.create("token-update-failed",{errorInfo:un.error.message});if(!un.token)throw ur.create("token-update-no-token");return un.token})).apply(this,arguments)}function _l(z,X){return Er.apply(this,arguments)}function Er(){return(Er=(0,re.Z)(function*(z,X){var de;const gt={method:"DELETE",headers:yield To(z)};try{const un=yield(yield fetch(`${Co(z.appConfig)}/${X}`,gt)).json();if(un.error)throw ur.create("token-unsubscribe-failed",{errorInfo:un.error.message})}catch(At){throw ur.create("token-unsubscribe-failed",{errorInfo:null===(de=At)||void 0===de?void 0:de.toString()})}})).apply(this,arguments)}function Co({projectId:z}){return`https://fcmregistrations.googleapis.com/v1/projects/${z}/registrations`}function To(z){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,re.Z)(function*({appConfig:z,installations:X}){const de=yield X.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":z.apiKey,"x-goog-firebase-installations-auth":`FIS ${de}`})})).apply(this,arguments)}function Jt({p256dh:z,auth:X,endpoint:de,vapidKey:He}){const gt={web:{endpoint:de,auth:X,p256dh:z}};return He!==so&&(gt.web.applicationPubKey=He),gt}const Xn=6048e5;function Zs(z){return ms.apply(this,arguments)}function ms(){return(ms=(0,re.Z)(function*(z){const X=yield Fn(z.swRegistration,z.vapidKey),de={vapidKey:z.vapidKey,swScope:z.swRegistration.scope,endpoint:X.endpoint,auth:ao(X.getKey("auth")),p256dh:ao(X.getKey("p256dh"))},He=yield us(z.firebaseDependencies);if(He){if(Ys(He.subscriptionOptions,de))return Date.now()>=He.createTime+Xn?Y(z,{token:He.token,createTime:Date.now(),subscriptionOptions:de}):He.token;try{yield _l(z.firebaseDependencies,He.token)}catch(gt){console.warn(gt)}return fe(z.firebaseDependencies,de)}return fe(z.firebaseDependencies,de)})).apply(this,arguments)}function Wn(z){return ee.apply(this,arguments)}function ee(){return(ee=(0,re.Z)(function*(z){const X=yield us(z.firebaseDependencies);X&&(yield _l(z.firebaseDependencies,X.token),yield fr(z.firebaseDependencies));const de=yield z.swRegistration.pushManager.getSubscription();return!de||de.unsubscribe()})).apply(this,arguments)}function Y(z,X){return $.apply(this,arguments)}function $(){return($=(0,re.Z)(function*(z,X){try{const de=yield xl(z.firebaseDependencies,X),He=Object.assign(Object.assign({},X),{token:de,createTime:Date.now()});return yield Zi(z.firebaseDependencies,He),de}catch(de){throw yield Wn(z),de}})).apply(this,arguments)}function fe(z,X){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,re.Z)(function*(z,X){const He={token:yield Ii(z,X),createTime:Date.now(),subscriptionOptions:X};return yield Zi(z,He),He.token})).apply(this,arguments)}function Fn(z,X){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,re.Z)(function*(z,X){return(yield z.pushManager.getSubscription())||z.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Br(X)})})).apply(this,arguments)}function Ys(z,X){return X.vapidKey===z.vapidKey&&X.endpoint===z.endpoint&&X.auth===z.auth&&X.p256dh===z.p256dh}function cs(z){const X={from:z.from,collapseKey:z.collapse_key,messageId:z.fcmMessageId};return function zr(z,X){if(!X.notification)return;z.notification={};const de=X.notification.title;de&&(z.notification.title=de);const He=X.notification.body;He&&(z.notification.body=He);const gt=X.notification.image;gt&&(z.notification.image=gt)}(X,z),function _s(z,X){!X.data||(z.data=X.data)}(X,z),function fa(z,X){var de,He,gt,At,un;if(!(X.fcmOptions||null!==(de=X.notification)&&void 0!==de&&de.click_action))return;z.fcmOptions={};const mn=null!==(gt=null===(He=X.fcmOptions)||void 0===He?void 0:He.link)&&void 0!==gt?gt:null===(At=X.notification)||void 0===At?void 0:At.click_action;mn&&(z.fcmOptions.link=mn);const ri=null===(un=X.fcmOptions)||void 0===un?void 0:un.analytics_label;ri&&(z.fcmOptions.analyticsLabel=ri)}(X,z),X}function el(z){return"object"==typeof z&&!!z&&No in z}function Bo(z,X){const de=[];for(let He=0;He<z.length;He++)de.push(z.charAt(He)),He<X.length&&de.push(X.charAt(He));return de.join("")}function ra(z){return ur.create("missing-app-config-values",{valueName:z})}Bo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Bo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Da{constructor(X,de,He){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const gt=function Pa(z){if(!z||!z.options)throw ra("App Configuration Object");if(!z.name)throw ra("App Name");const X=["projectId","apiKey","appId","messagingSenderId"],{options:de}=z;for(const He of X)if(!de[He])throw ra(He);return{appName:z.name,projectId:de.projectId,apiKey:de.apiKey,appId:de.appId,senderId:de.messagingSenderId}}(X);this.firebaseDependencies={app:X,appConfig:gt,installations:de,analyticsProvider:He}}_delete(){return Promise.resolve()}}function Sa(z){return sa.apply(this,arguments)}function sa(){return(sa=(0,re.Z)(function*(z){var X;try{z.swRegistration=yield navigator.serviceWorker.register(wr,{scope:qs}),z.swRegistration.update().catch(()=>{})}catch(de){throw ur.create("failed-service-worker-registration",{browserErrorMessage:null===(X=de)||void 0===X?void 0:X.message})}})).apply(this,arguments)}function pa(z,X){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,re.Z)(function*(z,X){if(!X&&!z.swRegistration&&(yield Sa(z)),X||!z.swRegistration){if(!(X instanceof ServiceWorkerRegistration))throw ur.create("invalid-sw-registration");z.swRegistration=X}})).apply(this,arguments)}function is(z,X){return qo.apply(this,arguments)}function qo(){return(qo=(0,re.Z)(function*(z,X){X?z.vapidKey=X:z.vapidKey||(z.vapidKey=so)})).apply(this,arguments)}function Ka(){return(Ka=(0,re.Z)(function*(z,X){if(!navigator)throw ur.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ur.create("permission-blocked");return yield is(z,X?.vapidKey),yield pa(z,X?.serviceWorkerRegistration),Zs(z)})).apply(this,arguments)}function kl(z,X,de){return qa.apply(this,arguments)}function qa(){return(qa=(0,re.Z)(function*(z,X,de){const He=cl(X);(yield z.firebaseDependencies.analyticsProvider.get()).logEvent(He,{message_id:de[No],message_name:de[Yr],message_time:de[Na],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function cl(z){switch(z){case Qr.NOTIFICATION_CLICKED:return"notification_open";case Qr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function oe(){return(oe=(0,re.Z)(function*(z,X){const de=X.data;if(!de.isFirebaseMessaging)return;z.onMessageHandler&&de.messageType===Qr.PUSH_RECEIVED&&("function"==typeof z.onMessageHandler?z.onMessageHandler(cs(de)):z.onMessageHandler.next(cs(de)));const He=de.data;el(He)&&"1"===He[oo]&&(yield kl(z,de.messageType,He))})).apply(this,arguments)}const W="@firebase/messaging",$e=z=>{const X=new Da(z.getProvider("app").getImmediate(),z.getProvider("installations-internal").getImmediate(),z.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",de=>function B(z,X){return oe.apply(this,arguments)}(X,de)),X},xt=z=>{const X=z.getProvider("messaging").getImmediate();return{getToken:He=>function ul(z,X){return Ka.apply(this,arguments)}(X,He)}};function Pn(){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,re.Z)(function*(){try{yield(0,We.eu)()}catch{return!1}return typeof window<"u"&&(0,We.hl)()&&(0,We.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bt(){(0,Ee._registerComponent)(new Ae.wA("messaging",$e,"PUBLIC")),(0,Ee._registerComponent)(new Ae.wA("messaging-internal",xt,"PRIVATE")),(0,Ee.registerVersion)(W,"0.9.16"),(0,Ee.registerVersion)(W,"0.9.16","esm2017")}();const xr="analytics",ma="firebase_id",Zo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_a="https://www.googletagmanager.com/gtag/js",Vr=new Re.Yd("@firebase/analytics");function ka(z){return Promise.all(z.map(X=>X.catch(de=>de)))}function Fa(z,X){const de=document.createElement("script");de.src=`${_a}?l=${z}&id=${X}`,de.async=!0,document.head.appendChild(de)}function Fl(z,X,de,He,gt,At){return La.apply(this,arguments)}function La(){return(La=(0,re.Z)(function*(z,X,de,He,gt,At){const un=He[gt];try{if(un)yield X[un];else{const ri=(yield ka(de)).find(di=>di.measurementId===gt);ri&&(yield X[ri.appId])}}catch(mn){Vr.error(mn)}z("config",gt,At)})).apply(this,arguments)}function L(z,X,de,He,gt){return we.apply(this,arguments)}function we(){return(we=(0,re.Z)(function*(z,X,de,He,gt){try{let At=[];if(gt&&gt.send_to){let un=gt.send_to;Array.isArray(un)||(un=[un]);const mn=yield ka(de);for(const ri of un){const di=mn.find(Yn=>Yn.measurementId===ri),Pi=di&&X[di.appId];if(!Pi){At=[];break}At.push(Pi)}}0===At.length&&(At=Object.values(X)),yield Promise.all(At),z("event",He,gt||{})}catch(At){Vr.error(At)}})).apply(this,arguments)}function ie(){const z=window.document.getElementsByTagName("script");for(const X of Object.values(z))if(X.src&&X.src.includes(_a))return X;return null}const lt=new We.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Mn=new class wn{constructor(X={},de=1e3){this.throttleMetadata=X,this.intervalMillis=de}getThrottleMetadata(X){return this.throttleMetadata[X]}setThrottleMetadata(X,de){this.throttleMetadata[X]=de}deleteThrottleMetadata(X){delete this.throttleMetadata[X]}};function pr(z){return new Headers({Accept:"application/json","x-goog-api-key":z})}function qr(z){return mi.apply(this,arguments)}function mi(){return(mi=(0,re.Z)(function*(z){var X;const{appId:de,apiKey:He}=z,gt={method:"GET",headers:pr(He)},At=Zo.replace("{app-id}",de),un=yield fetch(At,gt);if(200!==un.status&&304!==un.status){let mn="";try{const ri=yield un.json();null!==(X=ri.error)&&void 0!==X&&X.message&&(mn=ri.error.message)}catch{}throw lt.create("config-fetch-failed",{httpStatus:un.status,responseMessage:mn})}return un.json()})).apply(this,arguments)}function Ss(z){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,re.Z)(function*(z,X=Mn,de){const{appId:He,apiKey:gt,measurementId:At}=z.options;if(!He)throw lt.create("no-app-id");if(!gt){if(At)return{measurementId:At,appId:He};throw lt.create("no-api-key")}const un=X.getThrottleMetadata(He)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mn=new As;return setTimeout((0,re.Z)(function*(){mn.abort()}),void 0!==de?de:6e4),Ir({appId:He,apiKey:gt,measurementId:At},un,mn,X)})).apply(this,arguments)}function Ir(z,X,de){return oi.apply(this,arguments)}function oi(){return(oi=(0,re.Z)(function*(z,{throttleEndTimeMillis:X,backoffCount:de},He,gt=Mn){var At,un;const{appId:mn,measurementId:ri}=z;try{yield hs(He,X)}catch(di){if(ri)return Vr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ri} provided in the "measurementId" field in the local Firebase config. [${null===(At=di)||void 0===At?void 0:At.message}]`),{appId:mn,measurementId:ri};throw di}try{const di=yield qr(z);return gt.deleteThrottleMetadata(mn),di}catch(di){const Pi=di;if(!ys(Pi)){if(gt.deleteThrottleMetadata(mn),ri)return Vr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ri} provided in the "measurementId" field in the local Firebase config. [${Pi?.message}]`),{appId:mn,measurementId:ri};throw di}const Yn=503===Number(null===(un=Pi?.customData)||void 0===un?void 0:un.httpStatus)?(0,We.$s)(de,gt.intervalMillis,30):(0,We.$s)(de,gt.intervalMillis),ps={throttleEndTimeMillis:Date.now()+Yn,backoffCount:de+1};return gt.setThrottleMetadata(mn,ps),Vr.debug(`Calling attemptFetch again in ${Yn} millis`),Ir(z,ps,He,gt)}})).apply(this,arguments)}function hs(z,X){return new Promise((de,He)=>{const gt=Math.max(X-Date.now(),0),At=setTimeout(de,gt);z.addEventListener(()=>{clearTimeout(At),He(lt.create("fetch-throttle",{throttleEndTimeMillis:X}))})})}function ys(z){if(!(z instanceof We.ZR&&z.customData))return!1;const X=Number(z.customData.httpStatus);return 429===X||500===X||503===X||504===X}class As{constructor(){this.listeners=[]}addEventListener(X){this.listeners.push(X)}abort(){this.listeners.forEach(X=>X())}}let ko,Js;function Hr(){return(Hr=(0,re.Z)(function*(z,X,de,He,gt){if(gt&&gt.global)z("event",de,He);else{const At=yield X;z("event",de,Object.assign(Object.assign({},He),{send_to:At}))}})).apply(this,arguments)}function yl(z){Js=z}function lu(z){ko=z}function uu(){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,re.Z)(function*(){var z;if(!(0,We.hl)())return Vr.warn(lt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,We.eu)()}catch(X){return Vr.warn(lt.create("indexeddb-unavailable",{errorInfo:null===(z=X)||void 0===z?void 0:z.toString()}).message),!1}return!0})).apply(this,arguments)}function nl(){return(nl=(0,re.Z)(function*(z,X,de,He,gt,At,un){var mn;const ri=Ss(z);ri.then(ho=>{de[ho.measurementId]=ho.appId,z.options.measurementId&&ho.measurementId!==z.options.measurementId&&Vr.warn(`The measurement ID in the local Firebase config (${z.options.measurementId}) does not match the measurement ID fetched from the server (${ho.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ho=>Vr.error(ho)),X.push(ri);const di=uu().then(ho=>{if(ho)return He.getId()}),[Pi,Yn]=yield Promise.all([ri,di]);ie()||Fa(At,Pi.measurementId),Js&&(gt("consent","default",Js),yl(void 0)),gt("js",new Date);const ps=null!==(mn=un?.config)&&void 0!==mn?mn:{};return ps.origin="firebase",ps.update=!0,null!=Yn&&(ps[ma]=Yn),gt("config",Pi.measurementId,ps),ko&&(gt("set",ko),lu(void 0)),Pi.measurementId})).apply(this,arguments)}class ya{constructor(X){this.app=X}_delete(){return delete Bs[this.app.options.appId],Promise.resolve()}}let Bs={},Va=[];const Ya={};let $o,va,Yo="dataLayer",Xr=!1;function Sr(z,X,de){!function ql(){const z=[];if((0,We.ru)()&&z.push("This is a browser extension environment."),(0,We.zI)()||z.push("Cookies are not available."),z.length>0){const X=z.map((He,gt)=>`(${gt+1}) ${He}`).join(" "),de=lt.create("invalid-analytics-context",{errorInfo:X});Vr.warn(de.message)}}();const He=z.options.appId;if(!He)throw lt.create("no-app-id");if(!z.options.apiKey){if(!z.options.measurementId)throw lt.create("no-api-key");Vr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${z.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Bs[He])throw lt.create("already-exists",{id:He});if(!Xr){!function jo(z){let X=[];Array.isArray(window[z])?X=window[z]:window[z]=X}(Yo);const{wrappedGtag:At,gtagCore:un}=function M(z,X,de,He,gt){let At=function(...un){window[He].push(arguments)};return window[gt]&&"function"==typeof window[gt]&&(At=window[gt]),window[gt]=function p(z,X,de,He){function At(){return(At=(0,re.Z)(function*(un,mn,ri){try{"event"===un?yield L(z,X,de,mn,ri):"config"===un?yield Fl(z,X,de,He,mn,ri):"consent"===un?z("consent","update",ri):z("set",mn)}catch(di){Vr.error(di)}})).apply(this,arguments)}return function gt(un,mn,ri){return At.apply(this,arguments)}}(At,z,X,de),{gtagCore:At,wrappedGtag:window[gt]}}(Bs,Va,Ya,Yo,"gtag");va=At,$o=un,Xr=!0}return Bs[He]=function Vl(z,X,de,He,gt,At,un){return nl.apply(this,arguments)}(z,Va,Ya,X,$o,Yo,de),new ya(z)}function En(){return dl.apply(this,arguments)}function dl(){return(dl=(0,re.Z)(function*(){if((0,We.ru)()||!(0,We.zI)()||!(0,We.hl)())return!1;try{return yield(0,We.eu)()}catch{return!1}})).apply(this,arguments)}const vl="@firebase/analytics";!function Do(){(0,Ee._registerComponent)(new Ae.wA(xr,(X,{options:de})=>Sr(X.getProvider("app").getImmediate(),X.getProvider("installations-internal").getImmediate(),de),"PUBLIC")),(0,Ee._registerComponent)(new Ae.wA("analytics-internal",function z(X){try{const de=X.getProvider(xr).getImmediate();return{logEvent:(He,gt,At)=>function il(z,X,de,He){z=(0,We.m9)(z),function dn(z,X,de,He,gt){return Hr.apply(this,arguments)}(va,Bs[z.app.options.appId],X,de,He).catch(gt=>Vr.error(gt))}(de,He,gt,At)}}catch(de){throw lt.create("interop-component-reg-failed",{reason:de})}},"PRIVATE")),(0,Ee.registerVersion)(vl,"0.8.0"),(0,Ee.registerVersion)(vl,"0.8.0","esm2017")}();var Qa=K(4408),Fo=K(7565);const C=new class rl extends Fo.v{}(class Ol extends Qa.o{constructor(X,de){super(X,de),this.scheduler=X,this.work=de}schedule(X,de=0){return de>0?super.schedule(X,de):(this.delay=de,this.state=X,this.scheduler.flush(this),this)}execute(X,de){return de>0||this.closed?super.execute(X,de):this._execute(X,de)}requestAsyncId(X,de,He=0){return null!=He&&He>0||null==He&&this.delay>0?super.requestAsyncId(X,de,He):X.flush(this)}});var D=K(4986),V=K(8505),J=K(5363),pe=K(9468);const Ne=new m.GfV("7.4.1"),Ze="__angularfire_symbol__analyticsIsSupportedValue",Lt="__angularfire_symbol__analyticsIsSupported",Cn="__angularfire_symbol__remoteConfigIsSupportedValue",ji="__angularfire_symbol__remoteConfigIsSupported",Kn="__angularfire_symbol__messagingIsSupportedValue",$i="__angularfire_symbol__messagingIsSupported";function Jo(z,X,de){if(X){if(1===X.length)return X[0];const At=X.filter(un=>un.app===de);if(1===At.length)return At[0]}return de.container.getProvider(z).getImmediate({optional:!0})}globalThis[Lt]||(globalThis[Lt]=En().then(z=>globalThis[Ze]=z).catch(()=>globalThis[Ze]=!1)),globalThis[$i]||(globalThis[$i]=Pn().then(z=>globalThis[Kn]=z).catch(()=>globalThis[Kn]=!1)),globalThis[ji]||(globalThis[ji]=Eo().then(z=>globalThis[Cn]=z).catch(()=>globalThis[Cn]=!1));const $r=(z,X)=>{const de=X?[X]:(0,a.C6)(),He=[];return de.forEach(gt=>{gt.container.getProvider(z).instances.forEach(un=>{He.includes(un)||He.push(un)})}),He};function er(){}class Ul{constructor(X,de=C){this.zone=X,this.delegate=de}now(){return this.delegate.now()}schedule(X,de,He){const gt=this.zone;return this.delegate.schedule(function(un){gt.runGuarded(()=>{X.apply(this,[un])})},de,He)}}class Bl{constructor(X){this.zone=X,this.task=null}call(X,de){const He=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",er,{},er,er)),de.pipe((0,V.b)({next:He,complete:He,error:He})).subscribe(X).add(He)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Go=(()=>{class z{constructor(de){this.ngZone=de,this.outsideAngular=de.runOutsideAngular(()=>new Ul(Zone.current)),this.insideAngular=de.run(()=>new Ul(Zone.current,D.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return z.\u0275fac=function(de){return new(de||z)(m.LFG(m.R0b))},z.\u0275prov=m.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})();function wl(){const z=globalThis.\u0275AngularFireScheduler;if(!z)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return z}function aa(z){return z.pipe((0,J.Q)(wl().outsideAngular))}function Aa(z){return wl(),function iu(z){return function(de){return(de=de.lift(new Bl(z.ngZone))).pipe((0,pe.R)(z.outsideAngular),(0,J.Q)(z.insideAngular))}}(wl())(z)}},6457:(In,Et,K)=>{K.d(Et,{$:()=>Co,A:()=>Ie,B:()=>ct,G:()=>ws,H:()=>no,J:()=>ut,L:()=>Bi,M:()=>bo,N:()=>Ra,P:()=>D,Q:()=>No,R:()=>Zl,T:()=>Yr,U:()=>so,V:()=>Qr,W:()=>ao,X:()=>Ai,Y:()=>ha,Z:()=>Ii,_:()=>xl,a:()=>Rn,a0:()=>Zs,a1:()=>Wn,a2:()=>Y,a3:()=>fe,a4:()=>Fn,a5:()=>Ys,a6:()=>zr,a7:()=>_s,a8:()=>el,a9:()=>Bo,aA:()=>ho,aB:()=>ri,aC:()=>aa,aD:()=>Yl,aE:()=>bn,aI:()=>pr,aL:()=>oo,aa:()=>Sa,ab:()=>pa,ac:()=>is,af:()=>kl,ag:()=>cl,ah:()=>B,ak:()=>mo,al:()=>tr,an:()=>_a,ao:()=>La,ap:()=>Ce,aq:()=>ft,ar:()=>Le,as:()=>Gn,at:()=>qt,au:()=>So,av:()=>Ba,aw:()=>Be,ax:()=>De,ay:()=>it,az:()=>Ji,b:()=>lt,c:()=>Kn,d:()=>Ja,e:()=>fs,f:()=>iu,g:()=>He,h:()=>z,i:()=>Ll,j:()=>un,k:()=>Hu,l:()=>Wr,m:()=>Cl,o:()=>xe,r:()=>Qa,s:()=>Ml,u:()=>C});var m=K(5861),a=K(2090),re=K(9681),Ee=K(655),We=K(1877),Ae=K(4859);const xe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ct=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},wt=function Mt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Wt=new a.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vt=new We.Yd("@firebase/auth");function rt(N,...w){vt.logLevel<=We.in.ERROR&&vt.error(`Auth (${re.SDK_VERSION}): ${N}`,...w)}function qt(N,...w){throw Qe(N,...w)}function Be(N,...w){return Qe(N,...w)}function ve(N,w,b){const F=Object.assign(Object.assign({},wt()),{[w]:b});return new a.LL("auth","Firebase",F).create(w,{appName:N.name})}function nt(N,w,b){if(!(w instanceof b))throw b.name!==w.constructor.name&&qt(N,"argument-error"),ve(N,"argument-error",`Type of ${w.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qe(N,...w){if("string"!=typeof N){const b=w[0],F=[...w.slice(1)];return F[0]&&(F[0].appName=N.name),N._errorFactory.create(b,...F)}return Wt.create(N,...w)}function De(N,w,...b){if(!N)throw Qe(w,...b)}function Q(N){const w="INTERNAL ASSERTION FAILED: "+N;throw rt(w),new Error(w)}function ft(N,w){N||Q(w)}const Ve=new Map;function it(N){ft(N instanceof Function,"Expected a class definition");let w=Ve.get(N);return w?(ft(w instanceof N,"Instance stored in cache mismatched with class"),w):(w=new N,Ve.set(N,w),w)}function Yt(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.href)||""}function on(){return"http:"===pn()||"https:"===pn()}function pn(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.protocol)||null}class $t{constructor(w,b){this.shortDelay=w,this.longDelay=b,ft(b>w,"Short delay should be less than long delay!"),this.isMobile=(0,a.uI)()||(0,a.b$)()}get(){return function On(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(on()||(0,a.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ci(N,w){ft(N.emulator,"Emulator should always be set here");const{url:b}=N.emulator;return w?`${b}${w.startsWith("/")?w.slice(1):w}`:b}class Bn{static initialize(w,b,F){this.fetchImpl=w,b&&(this.headersImpl=b),F&&(this.responseImpl=F)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const St={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vt=new $t(3e4,6e4);function Ue(N,w){return N.tenantId&&!w.tenantId?Object.assign(Object.assign({},w),{tenantId:N.tenantId}):w}function _t(N,w,b,F){return ln.apply(this,arguments)}function ln(){return(ln=(0,m.Z)(function*(N,w,b,F,ue={}){return Hn(N,ue,(0,m.Z)(function*(){let Se={},Tt={};F&&("GET"===w?Tt=F:Se={body:JSON.stringify(F)});const sn=(0,a.xO)(Object.assign({key:N.config.apiKey},Tt)).slice(1),kn=yield N._getAdditionalHeaders();return kn["Content-Type"]="application/json",N.languageCode&&(kn["X-Firebase-Locale"]=N.languageCode),Bn.fetch()(zi(N,N.config.apiHost,b,sn),Object.assign({method:w,headers:kn,referrerPolicy:"no-referrer"},Se))}))})).apply(this,arguments)}function Hn(N,w,b){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,m.Z)(function*(N,w,b){N._canInitEmulator=!1;const F=Object.assign(Object.assign({},St),w);try{const ue=new ai(N),Se=yield Promise.race([b(),ue.promise]);ue.clearNetworkTimeout();const Tt=yield Se.json();if("needConfirmation"in Tt)throw Hi(N,"account-exists-with-different-credential",Tt);if(Se.ok&&!("errorMessage"in Tt))return Tt;{const sn=Se.ok?Tt.errorMessage:Tt.error.message,[kn,_i]=sn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===kn)throw Hi(N,"credential-already-in-use",Tt);if("EMAIL_EXISTS"===kn)throw Hi(N,"email-already-in-use",Tt);if("USER_DISABLED"===kn)throw Hi(N,"user-disabled",Tt);const Cr=F[kn]||kn.toLowerCase().replace(/[_\s]+/g,"-");if(_i)throw ve(N,Cr,_i);qt(N,Cr)}}catch(ue){if(ue instanceof a.ZR)throw ue;qt(N,"network-request-failed")}})).apply(this,arguments)}function Ei(N,w,b,F){return bi.apply(this,arguments)}function bi(){return(bi=(0,m.Z)(function*(N,w,b,F,ue={}){const Se=yield _t(N,w,b,F,ue);return"mfaPendingCredential"in Se&&qt(N,"multi-factor-auth-required",{_serverResponse:Se}),Se})).apply(this,arguments)}function zi(N,w,b,F){const ue=`${w}${b}?${F}`;return N.config.emulator?ci(N.config,ue):`${N.config.apiScheme}://${ue}`}class ai{constructor(w){this.auth=w,this.timer=null,this.promise=new Promise((b,F)=>{this.timer=setTimeout(()=>F(Be(this.auth,"network-request-failed")),Vt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hi(N,w,b){const F={appName:N.name};b.email&&(F.email=b.email),b.phoneNumber&&(F.phoneNumber=b.phoneNumber);const ue=Be(N,w,F);return ue.customData._tokenResponse=b,ue}function vi(){return(vi=(0,m.Z)(function*(N,w){return _t(N,"POST","/v1/accounts:delete",w)})).apply(this,arguments)}function Qt(N,w){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,m.Z)(function*(N,w){return _t(N,"POST","/v1/accounts:update",w)})).apply(this,arguments)}function Vi(N,w){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,m.Z)(function*(N,w){return _t(N,"POST","/v1/accounts:lookup",w)})).apply(this,arguments)}function Kr(N){if(N)try{const w=new Date(Number(N));if(!isNaN(w.getTime()))return w.toUTCString()}catch{}}function _r(){return(_r=(0,m.Z)(function*(N,w=!1){const b=(0,a.m9)(N),F=yield b.getIdToken(w),ue=zn(F);De(ue&&ue.exp&&ue.auth_time&&ue.iat,b.auth,"internal-error");const Se="object"==typeof ue.firebase?ue.firebase:void 0,Tt=Se?.sign_in_provider;return{claims:ue,token:F,authTime:Kr(Qi(ue.auth_time)),issuedAtTime:Kr(Qi(ue.iat)),expirationTime:Kr(Qi(ue.exp)),signInProvider:Tt||null,signInSecondFactor:Se?.sign_in_second_factor||null}})).apply(this,arguments)}function Qi(N){return 1e3*Number(N)}function zn(N){var w;const[b,F,ue]=N.split(".");if(void 0===b||void 0===F||void 0===ue)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const Se=(0,a.tV)(F);return Se?JSON.parse(Se):(rt("Failed to decode base64 JWT payload"),null)}catch(Se){return rt("Caught error parsing JWT payload as JSON",null===(w=Se)||void 0===w?void 0:w.toString()),null}}function fi(N,w){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,m.Z)(function*(N,w,b=!1){if(b)return w;try{return yield w}catch(F){throw F instanceof a.ZR&&An(F)&&N.auth.currentUser===N&&(yield N.auth.signOut()),F}})).apply(this,arguments)}function An({code:N}){return"auth/user-disabled"===N||"auth/user-token-expired"===N}class Ui{constructor(w){this.user=w,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(w){var b;if(w){const F=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),F}{this.errorBackoff=3e4;const ue=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,ue)}}schedule(w=!1){var b=this;if(!this.isRunning)return;const F=this.getInterval(w);this.timerId=setTimeout((0,m.Z)(function*(){yield b.iteration()}),F)}iteration(){var w=this;return(0,m.Z)(function*(){var b;try{yield w.user.getIdToken(!0)}catch(F){return void("auth/network-request-failed"===(null===(b=F)||void 0===b?void 0:b.code)&&w.schedule(!0))}w.schedule()})()}}class ii{constructor(w,b){this.createdAt=w,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kr(this.lastLoginAt),this.creationTime=Kr(this.createdAt)}_copy(w){this.createdAt=w.createdAt,this.lastLoginAt=w.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function or(N){return li.apply(this,arguments)}function li(){return(li=(0,m.Z)(function*(N){var w;const b=N.auth,F=yield N.getIdToken(),ue=yield fi(N,Vi(b,{idToken:F}));De(ue?.users.length,b,"internal-error");const Se=ue.users[0];N._notifyReloadListener(Se);const Tt=null!==(w=Se.providerUserInfo)&&void 0!==w&&w.length?Ke(Se.providerUserInfo):[],sn=ot(N.providerData,Tt),Cr=!!N.isAnonymous&&!(N.email&&Se.passwordHash||sn?.length),Is={uid:Se.localId,displayName:Se.displayName||null,photoURL:Se.photoUrl||null,email:Se.email||null,emailVerified:Se.emailVerified||!1,phoneNumber:Se.phoneNumber||null,tenantId:Se.tenantId||null,providerData:sn,metadata:new ii(Se.createdAt,Se.lastLoginAt),isAnonymous:Cr};Object.assign(N,Is)})).apply(this,arguments)}function qn(){return(qn=(0,m.Z)(function*(N){const w=(0,a.m9)(N);yield or(w),yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)})).apply(this,arguments)}function ot(N,w){return[...N.filter(F=>!w.some(ue=>ue.providerId===F.providerId)),...w]}function Ke(N){return N.map(w=>{var{providerId:b}=w,F=(0,Ee._T)(w,["providerId"]);return{providerId:b,uid:F.rawId||"",displayName:F.displayName||null,email:F.email||null,phoneNumber:F.phoneNumber||null,photoURL:F.photoUrl||null}})}function et(){return(et=(0,m.Z)(function*(N,w){const b=yield Hn(N,{},(0,m.Z)(function*(){const F=(0,a.xO)({grant_type:"refresh_token",refresh_token:w}).slice(1),{tokenApiHost:ue,apiKey:Se}=N.config,Tt=zi(N,ue,"/v1/token",`key=${Se}`),sn=yield N._getAdditionalHeaders();return sn["Content-Type"]="application/x-www-form-urlencoded",Bn.fetch()(Tt,{method:"POST",headers:sn,body:F})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class qe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(w){De(w.idToken,"internal-error"),De(typeof w.idToken<"u","internal-error"),De(typeof w.refreshToken<"u","internal-error");const b="expiresIn"in w&&typeof w.expiresIn<"u"?Number(w.expiresIn):function $n(N){const w=zn(N);return De(w,"internal-error"),De(typeof w.exp<"u","internal-error"),De(typeof w.iat<"u","internal-error"),Number(w.exp)-Number(w.iat)}(w.idToken);this.updateTokensAndExpiration(w.idToken,w.refreshToken,b)}getToken(w,b=!1){var F=this;return(0,m.Z)(function*(){return De(!F.accessToken||F.refreshToken,w,"user-token-expired"),b||!F.accessToken||F.isExpired?F.refreshToken?(yield F.refresh(w,F.refreshToken),F.accessToken):null:F.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(w,b){var F=this;return(0,m.Z)(function*(){const{accessToken:ue,refreshToken:Se,expiresIn:Tt}=yield function je(N,w){return et.apply(this,arguments)}(w,b);F.updateTokensAndExpiration(ue,Se,Number(Tt))})()}updateTokensAndExpiration(w,b,F){this.refreshToken=b||null,this.accessToken=w||null,this.expirationTime=Date.now()+1e3*F}static fromJSON(w,b){const{refreshToken:F,accessToken:ue,expirationTime:Se}=b,Tt=new qe;return F&&(De("string"==typeof F,"internal-error",{appName:w}),Tt.refreshToken=F),ue&&(De("string"==typeof ue,"internal-error",{appName:w}),Tt.accessToken=ue),Se&&(De("number"==typeof Se,"internal-error",{appName:w}),Tt.expirationTime=Se),Tt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(w){this.accessToken=w.accessToken,this.refreshToken=w.refreshToken,this.expirationTime=w.expirationTime}_clone(){return Object.assign(new qe,this.toJSON())}_performRefresh(){return Q("not implemented")}}function Kt(N,w){De("string"==typeof N||typeof N>"u","internal-error",{appName:w})}class fn{constructor(w){var{uid:b,auth:F,stsTokenManager:ue}=w,Se=(0,Ee._T)(w,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ui(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=F,this.stsTokenManager=ue,this.accessToken=ue.accessToken,this.displayName=Se.displayName||null,this.email=Se.email||null,this.emailVerified=Se.emailVerified||!1,this.phoneNumber=Se.phoneNumber||null,this.photoURL=Se.photoURL||null,this.isAnonymous=Se.isAnonymous||!1,this.tenantId=Se.tenantId||null,this.providerData=Se.providerData?[...Se.providerData]:[],this.metadata=new ii(Se.createdAt||void 0,Se.lastLoginAt||void 0)}getIdToken(w){var b=this;return(0,m.Z)(function*(){const F=yield fi(b,b.stsTokenManager.getToken(b.auth,w));return De(F,b.auth,"internal-error"),b.accessToken!==F&&(b.accessToken=F,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),F})()}getIdTokenResult(w){return function Tr(N){return _r.apply(this,arguments)}(this,w)}reload(){return function gs(N){return qn.apply(this,arguments)}(this)}_assign(w){this!==w&&(De(this.uid===w.uid,this.auth,"internal-error"),this.displayName=w.displayName,this.photoURL=w.photoURL,this.email=w.email,this.emailVerified=w.emailVerified,this.phoneNumber=w.phoneNumber,this.isAnonymous=w.isAnonymous,this.tenantId=w.tenantId,this.providerData=w.providerData.map(b=>Object.assign({},b)),this.metadata._copy(w.metadata),this.stsTokenManager._assign(w.stsTokenManager))}_clone(w){return new fn(Object.assign(Object.assign({},this),{auth:w,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(w){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=w,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(w){this.reloadListener?this.reloadListener(w):this.reloadUserInfo=w}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(w,b=!1){var F=this;return(0,m.Z)(function*(){let ue=!1;w.idToken&&w.idToken!==F.stsTokenManager.accessToken&&(F.stsTokenManager.updateFromServerResponse(w),ue=!0),b&&(yield or(F)),yield F.auth._persistUserIfCurrent(F),ue&&F.auth._notifyListenersIfCurrent(F)})()}delete(){var w=this;return(0,m.Z)(function*(){const b=yield w.getIdToken();return yield fi(w,function Li(N,w){return vi.apply(this,arguments)}(w.auth,{idToken:b})),w.stsTokenManager.clearRefreshToken(),w.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(w=>Object.assign({},w)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(w,b){var F,ue,Se,Tt,sn,kn,_i,Cr;const Is=null!==(F=b.displayName)&&void 0!==F?F:void 0,fl=null!==(ue=b.email)&&void 0!==ue?ue:void 0,hu=null!==(Se=b.phoneNumber)&&void 0!==Se?Se:void 0,ru=null!==(Tt=b.photoURL)&&void 0!==Tt?Tt:void 0,Nu=null!==(sn=b.tenantId)&&void 0!==sn?sn:void 0,Gl=null!==(kn=b._redirectEventId)&&void 0!==kn?kn:void 0,ju=null!==(_i=b.createdAt)&&void 0!==_i?_i:void 0,zl=null!==(Cr=b.lastLoginAt)&&void 0!==Cr?Cr:void 0,{uid:Ec,emailVerified:$u,isAnonymous:oc,providerData:Pu,stsTokenManager:yu}=b;De(Ec&&yu,w,"internal-error");const sd=qe.fromJSON(this.name,yu);De("string"==typeof Ec,w,"internal-error"),Kt(Is,w.name),Kt(fl,w.name),De("boolean"==typeof $u,w,"internal-error"),De("boolean"==typeof oc,w,"internal-error"),Kt(hu,w.name),Kt(ru,w.name),Kt(Nu,w.name),Kt(Gl,w.name),Kt(ju,w.name),Kt(zl,w.name);const fu=new fn({uid:Ec,auth:w,email:fl,emailVerified:$u,displayName:Is,isAnonymous:oc,photoURL:ru,phoneNumber:hu,tenantId:Nu,stsTokenManager:sd,createdAt:ju,lastLoginAt:zl});return Pu&&Array.isArray(Pu)&&(fu.providerData=Pu.map(vs=>Object.assign({},vs))),Gl&&(fu._redirectEventId=Gl),fu}static _fromIdTokenResponse(w,b,F=!1){return(0,m.Z)(function*(){const ue=new qe;ue.updateFromServerResponse(b);const Se=new fn({uid:b.localId,auth:w,stsTokenManager:ue,isAnonymous:F});return yield or(Se),Se})()}}const Bi=(()=>{class N{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(b,F){var ue=this;return(0,m.Z)(function*(){ue.storage[b]=F})()}_get(b){var F=this;return(0,m.Z)(function*(){const ue=F.storage[b];return void 0===ue?null:ue})()}_remove(b){var F=this;return(0,m.Z)(function*(){delete F.storage[b]})()}_addListener(b,F){}_removeListener(b,F){}}return N.type="NONE",N})();function Ji(N,w,b){return`firebase:${N}:${w}:${b}`}class kr{constructor(w,b,F){this.persistence=w,this.auth=b,this.userKey=F;const{config:ue,name:Se}=this.auth;this.fullUserKey=Ji(this.userKey,ue.apiKey,Se),this.fullPersistenceKey=Ji("persistence",ue.apiKey,Se),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(w){return this.persistence._set(this.fullUserKey,w.toJSON())}getCurrentUser(){var w=this;return(0,m.Z)(function*(){const b=yield w.persistence._get(w.fullUserKey);return b?fn._fromJSON(w.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(w){var b=this;return(0,m.Z)(function*(){if(b.persistence===w)return;const F=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=w,F?b.setCurrentUser(F):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(w,b,F="authUser"){return(0,m.Z)(function*(){if(!b.length)return new kr(it(Bi),w,F);const ue=(yield Promise.all(b.map(function(){var _i=(0,m.Z)(function*(Cr){if(yield Cr._isAvailable())return Cr});return function(Cr){return _i.apply(this,arguments)}}()))).filter(_i=>_i);let Se=ue[0]||it(Bi);const Tt=Ji(F,w.config.apiKey,w.name);let sn=null;for(const _i of b)try{const Cr=yield _i._get(Tt);if(Cr){const Is=fn._fromJSON(w,Cr);_i!==Se&&(sn=Is),Se=_i;break}}catch{}const kn=ue.filter(_i=>_i._shouldAllowMigration);return Se._shouldAllowMigration&&kn.length?(Se=kn[0],sn&&(yield Se._set(Tt,sn.toJSON())),yield Promise.all(b.map(function(){var _i=(0,m.Z)(function*(Cr){if(Cr!==Se)try{yield Cr._remove(Tt)}catch{}});return function(Cr){return _i.apply(this,arguments)}}())),new kr(Se,w,F)):new kr(Se,w,F)})()}}function mt(N){const w=N.toLowerCase();if(w.includes("opera/")||w.includes("opr/")||w.includes("opios/"))return"Opera";if(gn(w))return"IEMobile";if(w.includes("msie")||w.includes("trident/"))return"IE";if(w.includes("edge/"))return"Edge";if(ze(w))return"Firefox";if(w.includes("silk/"))return"Silk";if(Zn(w))return"Blackberry";if(Pe(w))return"Webos";if(Xe(w))return"Safari";if((w.includes("chrome/")||jt(w))&&!w.includes("edge/"))return"Chrome";if(Gn(w))return"Android";{const F=N.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===F?.length)return F[1]}return"Other"}function ze(N=(0,a.z$)()){return/firefox\//i.test(N)}function Xe(N=(0,a.z$)()){const w=N.toLowerCase();return w.includes("safari/")&&!w.includes("chrome/")&&!w.includes("crios/")&&!w.includes("android")}function jt(N=(0,a.z$)()){return/crios\//i.test(N)}function gn(N=(0,a.z$)()){return/iemobile/i.test(N)}function Gn(N=(0,a.z$)()){return/android/i.test(N)}function Zn(N=(0,a.z$)()){return/blackberry/i.test(N)}function Pe(N=(0,a.z$)()){return/webos/i.test(N)}function Le(N=(0,a.z$)()){return/iphone|ipad|ipod/i.test(N)||/macintosh/i.test(N)&&/mobile/i.test(N)}function Ce(N=(0,a.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(N)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(N)}function vn(N=(0,a.z$)()){return Le(N)||Gn(N)||Pe(N)||Zn(N)||/windows phone/i.test(N)||gn(N)}function Di(N,w=[]){let b;switch(N){case"Browser":b=mt((0,a.z$)());break;case"Worker":b=`${mt((0,a.z$)())}-${N}`;break;default:b=N}const F=w.length?w.join(","):"FirebaseCore-web";return`${b}/JsCore/${re.SDK_VERSION}/${F}`}class dr{constructor(w){this.auth=w,this.queue=[]}pushCallback(w,b){const F=Se=>new Promise((Tt,sn)=>{try{Tt(w(Se))}catch(kn){sn(kn)}});F.onAbort=b,this.queue.push(F);const ue=this.queue.length-1;return()=>{this.queue[ue]=()=>Promise.resolve()}}runMiddleware(w){var b=this;return(0,m.Z)(function*(){var F;if(b.auth.currentUser===w)return;const ue=[];try{for(const Se of b.queue)yield Se(w),Se.onAbort&&ue.push(Se.onAbort)}catch(Se){ue.reverse();for(const Tt of ue)try{Tt()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:null===(F=Se)||void 0===F?void 0:F.message})}})()}}class yr{constructor(w,b,F){this.app=w,this.heartbeatServiceProvider=b,this.config=F,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ns(this),this.idTokenSubscription=new Ns(this),this.beforeStateQueue=new dr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=w.name,this.clientVersion=F.sdkClientVersion}_initializeWithPersistence(w,b){var F=this;return b&&(this._popupRedirectResolver=it(b)),this._initializationPromise=this.queue((0,m.Z)(function*(){var ue,Se;if(!F._deleted&&(F.persistenceManager=yield kr.create(F,w),!F._deleted)){if(null!==(ue=F._popupRedirectResolver)&&void 0!==ue&&ue._shouldInitProactively)try{yield F._popupRedirectResolver._initialize(F)}catch{}yield F.initializeCurrentUser(b),F.lastNotifiedUid=(null===(Se=F.currentUser)||void 0===Se?void 0:Se.uid)||null,!F._deleted&&(F._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var w=this;return(0,m.Z)(function*(){if(w._deleted)return;const b=yield w.assertedPersistence.getCurrentUser();if(w.currentUser||b){if(w.currentUser&&b&&w.currentUser.uid===b.uid)return w._currentUser._assign(b),void(yield w.currentUser.getIdToken());yield w._updateCurrentUser(b,!0)}})()}initializeCurrentUser(w){var b=this;return(0,m.Z)(function*(){var F;const ue=yield b.assertedPersistence.getCurrentUser();let Se=ue,Tt=!1;if(w&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const sn=null===(F=b.redirectUser)||void 0===F?void 0:F._redirectEventId,kn=Se?._redirectEventId,_i=yield b.tryRedirectSignIn(w);(!sn||sn===kn)&&_i?.user&&(Se=_i.user,Tt=!0)}if(!Se)return b.directlySetCurrentUser(null);if(!Se._redirectEventId){if(Tt)try{yield b.beforeStateQueue.runMiddleware(Se)}catch(sn){Se=ue,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(sn))}return Se?b.reloadAndSetCurrentUserOrClear(Se):b.directlySetCurrentUser(null)}return De(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===Se._redirectEventId?b.directlySetCurrentUser(Se):b.reloadAndSetCurrentUserOrClear(Se)})()}tryRedirectSignIn(w){var b=this;return(0,m.Z)(function*(){let F=null;try{F=yield b._popupRedirectResolver._completeRedirectFn(b,w,!0)}catch{yield b._setRedirectUser(null)}return F})()}reloadAndSetCurrentUserOrClear(w){var b=this;return(0,m.Z)(function*(){var F;try{yield or(w)}catch(ue){if("auth/network-request-failed"!==(null===(F=ue)||void 0===F?void 0:F.code))return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(w)})()}useDeviceLanguage(){this.languageCode=function Nn(){if(typeof navigator>"u")return null;const N=navigator;return N.languages&&N.languages[0]||N.language||null}()}_delete(){var w=this;return(0,m.Z)(function*(){w._deleted=!0})()}updateCurrentUser(w){var b=this;return(0,m.Z)(function*(){const F=w?(0,a.m9)(w):null;return F&&De(F.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(F&&F._clone(b))})()}_updateCurrentUser(w,b=!1){var F=this;return(0,m.Z)(function*(){if(!F._deleted)return w&&De(F.tenantId===w.tenantId,F,"tenant-id-mismatch"),b||(yield F.beforeStateQueue.runMiddleware(w)),F.queue((0,m.Z)(function*(){yield F.directlySetCurrentUser(w),F.notifyAuthListeners()}))})()}signOut(){var w=this;return(0,m.Z)(function*(){return yield w.beforeStateQueue.runMiddleware(null),(w.redirectPersistenceManager||w._popupRedirectResolver)&&(yield w._setRedirectUser(null)),w._updateCurrentUser(null,!0)})()}setPersistence(w){var b=this;return this.queue((0,m.Z)(function*(){yield b.assertedPersistence.setPersistence(it(w))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(w){this._errorFactory=new a.LL("auth","Firebase",w())}onAuthStateChanged(w,b,F){return this.registerStateListener(this.authStateSubscription,w,b,F)}beforeAuthStateChanged(w,b){return this.beforeStateQueue.pushCallback(w,b)}onIdTokenChanged(w,b,F){return this.registerStateListener(this.idTokenSubscription,w,b,F)}toJSON(){var w;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(w=this._currentUser)||void 0===w?void 0:w.toJSON()}}_setRedirectUser(w,b){var F=this;return(0,m.Z)(function*(){const ue=yield F.getOrInitRedirectPersistenceManager(b);return null===w?ue.removeCurrentUser():ue.setCurrentUser(w)})()}getOrInitRedirectPersistenceManager(w){var b=this;return(0,m.Z)(function*(){if(!b.redirectPersistenceManager){const F=w&&it(w)||b._popupRedirectResolver;De(F,b,"argument-error"),b.redirectPersistenceManager=yield kr.create(b,[it(F._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(w){var b=this;return(0,m.Z)(function*(){var F,ue;return b._isInitialized&&(yield b.queue((0,m.Z)(function*(){}))),(null===(F=b._currentUser)||void 0===F?void 0:F._redirectEventId)===w?b._currentUser:(null===(ue=b.redirectUser)||void 0===ue?void 0:ue._redirectEventId)===w?b.redirectUser:null})()}_persistUserIfCurrent(w){var b=this;return(0,m.Z)(function*(){if(w===b.currentUser)return b.queue((0,m.Z)(function*(){return b.directlySetCurrentUser(w)}))})()}_notifyListenersIfCurrent(w){w===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var w,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const F=null!==(b=null===(w=this.currentUser)||void 0===w?void 0:w.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==F&&(this.lastNotifiedUid=F,this.authStateSubscription.next(this.currentUser))}registerStateListener(w,b,F,ue){if(this._deleted)return()=>{};const Se="function"==typeof b?b:b.next.bind(b),Tt=this._isInitialized?Promise.resolve():this._initializationPromise;return De(Tt,this,"internal-error"),Tt.then(()=>Se(this.currentUser)),"function"==typeof b?w.addObserver(b,F,ue):w.addObserver(b)}directlySetCurrentUser(w){var b=this;return(0,m.Z)(function*(){b.currentUser&&b.currentUser!==w&&(b._currentUser._stopProactiveRefresh(),w&&b.isProactiveRefreshEnabled&&w._startProactiveRefresh()),b.currentUser=w,w?yield b.assertedPersistence.setCurrentUser(w):yield b.assertedPersistence.removeCurrentUser()})()}queue(w){return this.operations=this.operations.then(w,w),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(w){!w||this.frameworks.includes(w)||(this.frameworks.push(w),this.frameworks.sort(),this.clientVersion=Di(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var w=this;return(0,m.Z)(function*(){var b;const F={"X-Client-Version":w.clientVersion};w.app.options.appId&&(F["X-Firebase-gmpid"]=w.app.options.appId);const ue=yield null===(b=w.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();return ue&&(F["X-Firebase-Client"]=ue),F})()}}function bn(N){return(0,a.m9)(N)}class Ns{constructor(w){this.auth=w,this.observer=null,this.addObserver=(0,a.ne)(b=>this.observer=b)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ws(N,w,b){const F=bn(N);De(F._canInitEmulator,F,"emulator-config-failed"),De(/^https?:\/\//.test(w),F,"invalid-emulator-scheme");const ue=!!b?.disableWarnings,Se=na(w),{host:Tt,port:sn}=function to(N){const w=na(N),b=/(\/\/)?([^?#/]+)/.exec(N.substr(w.length));if(!b)return{host:"",port:null};const F=b[2].split("@").pop()||"",ue=/^(\[[^\]]+\])(:|$)/.exec(F);if(ue){const Se=ue[1];return{host:Se,port:Ar(F.substr(Se.length+1))}}{const[Se,Tt]=F.split(":");return{host:Se,port:Ar(Tt)}}}(w);F.config.emulator={url:`${Se}//${Tt}${null===sn?"":`:${sn}`}/`},F.settings.appVerificationDisabledForTesting=!0,F.emulatorConfig=Object.freeze({host:Tt,port:sn,protocol:Se.replace(":",""),options:Object.freeze({disableWarnings:ue})}),ue||function ss(){function N(){const w=document.createElement("p"),b=w.style;w.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",w.classList.add("firebase-emulator-warning"),document.body.appendChild(w)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",N):N())}()}function na(N){const w=N.indexOf(":");return w<0?"":N.substr(0,w+1)}function Ar(N){if(!N)return null;const w=Number(N);return isNaN(w)?null:w}class no{constructor(w,b){this.providerId=w,this.signInMethod=b}toJSON(){return Q("not implemented")}_getIdTokenResponse(w){return Q("not implemented")}_linkToIdToken(w,b){return Q("not implemented")}_getReauthenticationResolver(w){return Q("not implemented")}}function Ps(N,w){return ki.apply(this,arguments)}function ki(){return(ki=(0,m.Z)(function*(N,w){return _t(N,"POST","/v1/accounts:resetPassword",Ue(N,w))})).apply(this,arguments)}function po(N,w){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,m.Z)(function*(N,w){return _t(N,"POST","/v1/accounts:update",w)})).apply(this,arguments)}function ba(N,w){return ks.apply(this,arguments)}function ks(){return(ks=(0,m.Z)(function*(N,w){return _t(N,"POST","/v1/accounts:update",Ue(N,w))})).apply(this,arguments)}function zs(){return(zs=(0,m.Z)(function*(N,w){return Ei(N,"POST","/v1/accounts:signInWithPassword",Ue(N,w))})).apply(this,arguments)}function Ts(N,w){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,m.Z)(function*(N,w){return _t(N,"POST","/v1/accounts:sendOobCode",Ue(N,w))})).apply(this,arguments)}function Ds(N,w){return Or.apply(this,arguments)}function Or(){return(Or=(0,m.Z)(function*(N,w){return Ts(N,w)})).apply(this,arguments)}function Mo(N,w){return qi.apply(this,arguments)}function qi(){return(qi=(0,m.Z)(function*(N,w){return Ts(N,w)})).apply(this,arguments)}function Ur(N,w){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,m.Z)(function*(N,w){return Ts(N,w)})).apply(this,arguments)}function Ia(N,w){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,m.Z)(function*(N,w){return Ts(N,w)})).apply(this,arguments)}function ca(){return(ca=(0,m.Z)(function*(N,w){return Ei(N,"POST","/v1/accounts:signInWithEmailLink",Ue(N,w))})).apply(this,arguments)}function Ro(){return(Ro=(0,m.Z)(function*(N,w){return Ei(N,"POST","/v1/accounts:signInWithEmailLink",Ue(N,w))})).apply(this,arguments)}class ia extends no{constructor(w,b,F,ue=null){super("password",F),this._email=w,this._password=b,this._tenantId=ue}static _fromEmailAndPassword(w,b){return new ia(w,b,"password")}static _fromEmailAndCode(w,b,F=null){return new ia(w,b,"emailLink",F)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(w){const b="string"==typeof w?JSON.parse(w):w;if(b?.email&&b?.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(w){var b=this;return(0,m.Z)(function*(){switch(b.signInMethod){case"password":return function Es(N,w){return zs.apply(this,arguments)}(w,{returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function os(N,w){return ca.apply(this,arguments)}(w,{email:b._email,oobCode:b._password});default:qt(w,"internal-error")}})()}_linkToIdToken(w,b){var F=this;return(0,m.Z)(function*(){switch(F.signInMethod){case"password":return po(w,{idToken:b,returnSecureToken:!0,email:F._email,password:F._password});case"emailLink":return function ll(N,w){return Ro.apply(this,arguments)}(w,{idToken:b,email:F._email,oobCode:F._password});default:qt(w,"internal-error")}})()}_getReauthenticationResolver(w){return this._getIdTokenResponse(w)}}function io(N,w){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,m.Z)(function*(N,w){return Ei(N,"POST","/v1/accounts:signInWithIdp",Ue(N,w))})).apply(this,arguments)}class ut extends no{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(w){const b=new ut(w.providerId,w.signInMethod);return w.idToken||w.accessToken?(w.idToken&&(b.idToken=w.idToken),w.accessToken&&(b.accessToken=w.accessToken),w.nonce&&!w.pendingToken&&(b.nonce=w.nonce),w.pendingToken&&(b.pendingToken=w.pendingToken)):w.oauthToken&&w.oauthTokenSecret?(b.accessToken=w.oauthToken,b.secret=w.oauthTokenSecret):qt("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(w){const b="string"==typeof w?JSON.parse(w):w,{providerId:F,signInMethod:ue}=b,Se=(0,Ee._T)(b,["providerId","signInMethod"]);if(!F||!ue)return null;const Tt=new ut(F,ue);return Tt.idToken=Se.idToken||void 0,Tt.accessToken=Se.accessToken||void 0,Tt.secret=Se.secret,Tt.nonce=Se.nonce,Tt.pendingToken=Se.pendingToken||null,Tt}_getIdTokenResponse(w){return io(w,this.buildRequest())}_linkToIdToken(w,b){const F=this.buildRequest();return F.idToken=b,io(w,F)}_getReauthenticationResolver(w){const b=this.buildRequest();return b.autoCreate=!1,io(w,b)}buildRequest(){const w={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)w.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),w.postBody=(0,a.xO)(b)}return w}}function It(N,w){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,m.Z)(function*(N,w){return _t(N,"POST","/v1/accounts:sendVerificationCode",Ue(N,w))})).apply(this,arguments)}function en(){return(en=(0,m.Z)(function*(N,w){return Ei(N,"POST","/v1/accounts:signInWithPhoneNumber",Ue(N,w))})).apply(this,arguments)}function ui(){return(ui=(0,m.Z)(function*(N,w){const b=yield Ei(N,"POST","/v1/accounts:signInWithPhoneNumber",Ue(N,w));if(b.temporaryProof)throw Hi(N,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const ar={USER_NOT_FOUND:"user-not-found"};function Fs(){return(Fs=(0,m.Z)(function*(N,w){return Ei(N,"POST","/v1/accounts:signInWithPhoneNumber",Ue(N,Object.assign(Object.assign({},w),{operation:"REAUTH"})),ar)})).apply(this,arguments)}class as extends no{constructor(w){super("phone","phone"),this.params=w}static _fromVerification(w,b){return new as({verificationId:w,verificationCode:b})}static _fromTokenResponse(w,b){return new as({phoneNumber:w,temporaryProof:b})}_getIdTokenResponse(w){return function Zt(N,w){return en.apply(this,arguments)}(w,this._makeVerificationRequest())}_linkToIdToken(w,b){return function si(N,w){return ui.apply(this,arguments)}(w,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(w){return function ro(N,w){return Fs.apply(this,arguments)}(w,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:w,phoneNumber:b,verificationId:F,verificationCode:ue}=this.params;return w&&b?{temporaryProof:w,phoneNumber:b}:{sessionInfo:F,code:ue}}toJSON(){const w={providerId:this.providerId};return this.params.phoneNumber&&(w.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(w.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(w.verificationCode=this.params.verificationCode),this.params.verificationId&&(w.verificationId=this.params.verificationId),w}static fromJSON(w){"string"==typeof w&&(w=JSON.parse(w));const{verificationId:b,verificationCode:F,phoneNumber:ue,temporaryProof:Se}=w;return F||b||ue||Se?new as({verificationId:b,verificationCode:F,phoneNumber:ue,temporaryProof:Se}):null}}class Fr{constructor(w){var b,F,ue,Se,Tt,sn;const kn=(0,a.zd)((0,a.pd)(w)),_i=null!==(b=kn.apiKey)&&void 0!==b?b:null,Cr=null!==(F=kn.oobCode)&&void 0!==F?F:null,Is=function vr(N){switch(N){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ue=kn.mode)&&void 0!==ue?ue:null);De(_i&&Cr&&Is,"argument-error"),this.apiKey=_i,this.operation=Is,this.code=Cr,this.continueUrl=null!==(Se=kn.continueUrl)&&void 0!==Se?Se:null,this.languageCode=null!==(Tt=kn.languageCode)&&void 0!==Tt?Tt:null,this.tenantId=null!==(sn=kn.tenantId)&&void 0!==sn?sn:null}static parseLink(w){const b=function gi(N){const w=(0,a.zd)((0,a.pd)(N)).link,b=w?(0,a.zd)((0,a.pd)(w)).deep_link_id:null,F=(0,a.zd)((0,a.pd)(N)).deep_link_id;return(F?(0,a.zd)((0,a.pd)(F)).link:null)||F||b||w||N}(w);try{return new Fr(b)}catch{return null}}}let bo=(()=>{class N{constructor(){this.providerId=N.PROVIDER_ID}static credential(b,F){return ia._fromEmailAndPassword(b,F)}static credentialWithLink(b,F){const ue=Fr.parseLink(F);return De(ue,"argument-error"),ia._fromEmailAndCode(b,ue.code,ue.tenantId)}}return N.PROVIDER_ID="password",N.EMAIL_PASSWORD_SIGN_IN_METHOD="password",N.EMAIL_LINK_SIGN_IN_METHOD="emailLink",N})();class wr{constructor(w){this.providerId=w,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(w){this.defaultLanguageCode=w}setCustomParameters(w){return this.customParameters=w,this}getCustomParameters(){return this.customParameters}}class qs extends wr{constructor(){super(...arguments),this.scopes=[]}addScope(w){return this.scopes.includes(w)||this.scopes.push(w),this}getScopes(){return[...this.scopes]}}class so extends qs{static credentialFromJSON(w){const b="string"==typeof w?JSON.parse(w):w;return De("providerId"in b&&"signInMethod"in b,"argument-error"),ut._fromParams(b)}credential(w){return this._credential(Object.assign(Object.assign({},w),{nonce:w.rawNonce}))}_credential(w){return De(w.idToken||w.accessToken,"argument-error"),ut._fromParams(Object.assign(Object.assign({},w),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(w){return so.oauthCredentialFromTaggedObject(w)}static credentialFromError(w){return so.oauthCredentialFromTaggedObject(w.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:b,oauthAccessToken:F,oauthTokenSecret:ue,pendingToken:Se,nonce:Tt,providerId:sn}=w;if(!F&&!ue&&!b&&!Se||!sn)return null;try{return new so(sn)._credential({idToken:b,accessToken:F,nonce:Tt,pendingToken:Se})}catch{return null}}}let Ra=(()=>{class N extends qs{constructor(){super("facebook.com")}static credential(b){return ut._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return N.credentialFromTaggedObject(b)}static credentialFromError(b){return N.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return N.credential(b.oauthAccessToken)}catch{return null}}}return N.FACEBOOK_SIGN_IN_METHOD="facebook.com",N.PROVIDER_ID="facebook.com",N})(),No=(()=>{class N extends qs{constructor(){super("google.com"),this.addScope("profile")}static credential(b,F){return ut._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:F})}static credentialFromResult(b){return N.credentialFromTaggedObject(b)}static credentialFromError(b){return N.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:F,oauthAccessToken:ue}=b;if(!F&&!ue)return null;try{return N.credential(F,ue)}catch{return null}}}return N.GOOGLE_SIGN_IN_METHOD="google.com",N.PROVIDER_ID="google.com",N})(),Yr=(()=>{class N extends qs{constructor(){super("github.com")}static credential(b){return ut._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return N.credentialFromTaggedObject(b)}static credentialFromError(b){return N.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return N.credential(b.oauthAccessToken)}catch{return null}}}return N.GITHUB_SIGN_IN_METHOD="github.com",N.PROVIDER_ID="github.com",N})();class oo extends no{constructor(w,b){super(w,w),this.pendingToken=b}_getIdTokenResponse(w){return io(w,this.buildRequest())}_linkToIdToken(w,b){const F=this.buildRequest();return F.idToken=b,io(w,F)}_getReauthenticationResolver(w){const b=this.buildRequest();return b.autoCreate=!1,io(w,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(w){const b="string"==typeof w?JSON.parse(w):w,{providerId:F,signInMethod:ue,pendingToken:Se}=b;return F&&ue&&Se&&F===ue?new oo(F,Se):null}static _create(w,b){return new oo(w,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qr extends wr{constructor(w){De(w.startsWith("saml."),"argument-error"),super(w)}static credentialFromResult(w){return Qr.samlCredentialFromTaggedObject(w)}static credentialFromError(w){return Qr.samlCredentialFromTaggedObject(w.customData||{})}static credentialFromJSON(w){const b=oo.fromJSON(w);return De(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{pendingToken:b,providerId:F}=w;if(!b||!F)return null;try{return oo._create(F,b)}catch{return null}}}let ao=(()=>{class N extends qs{constructor(){super("twitter.com")}static credential(b,F){return ut._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:F})}static credentialFromResult(b){return N.credentialFromTaggedObject(b)}static credentialFromError(b){return N.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:F,oauthTokenSecret:ue}=b;if(!F||!ue)return null;try{return N.credential(F,ue)}catch{return null}}}return N.TWITTER_SIGN_IN_METHOD="twitter.com",N.PROVIDER_ID="twitter.com",N})();function Br(N,w){return Io.apply(this,arguments)}function Io(){return(Io=(0,m.Z)(function*(N,w){return Ei(N,"POST","/v1/accounts:signUp",Ue(N,w))})).apply(this,arguments)}class Jr{constructor(w){this.user=w.user,this.providerId=w.providerId,this._tokenResponse=w._tokenResponse,this.operationType=w.operationType}static _fromIdTokenResponse(w,b,F,ue=!1){return(0,m.Z)(function*(){const Se=yield fn._fromIdTokenResponse(w,F,ue),Tt=ls(F);return new Jr({user:Se,providerId:Tt,_tokenResponse:F,operationType:b})})()}static _forOperation(w,b,F){return(0,m.Z)(function*(){yield w._updateTokensIfNecessary(F,!0);const ue=ls(F);return new Jr({user:w,providerId:ue,_tokenResponse:F,operationType:b})})()}}function ls(N){return N.providerId?N.providerId:"phoneNumber"in N?"phone":null}function Ai(N){return go.apply(this,arguments)}function go(){return(go=(0,m.Z)(function*(N){var w;const b=bn(N);if(yield b._initializationPromise,null!==(w=b.currentUser)&&void 0!==w&&w.isAnonymous)return new Jr({user:b.currentUser,providerId:null,operationType:"signIn"});const F=yield Br(b,{returnSecureToken:!0}),ue=yield Jr._fromIdTokenResponse(b,"signIn",F,!0);return yield b._updateCurrentUser(ue.user),ue})).apply(this,arguments)}class Rr extends a.ZR{constructor(w,b,F,ue){var Se;super(b.code,b.message),this.operationType=F,this.user=ue,Object.setPrototypeOf(this,Rr.prototype),this.customData={appName:w.name,tenantId:null!==(Se=w.tenantId)&&void 0!==Se?Se:void 0,_serverResponse:b.customData._serverResponse,operationType:F}}static _fromErrorAndOperation(w,b,F,ue){return new Rr(w,b,F,ue)}}function Po(N,w,b,F){return("reauthenticate"===w?b._getReauthenticationResolver(N):b._getIdTokenResponse(N)).catch(Se=>{throw"auth/multi-factor-auth-required"===Se.code?Rr._fromErrorAndOperation(N,Se,w,F):Se})}function lo(N){return new Set(N.map(({providerId:w})=>w).filter(w=>!!w))}function mo(N,w){return lr.apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(N,w){const b=(0,a.m9)(N);yield Ls(!0,b,w);const{providerUserInfo:F}=yield Qt(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[w]}),ue=lo(F||[]);return b.providerData=b.providerData.filter(Se=>ue.has(Se.providerId)),ue.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b})).apply(this,arguments)}function _o(N,w){return us.apply(this,arguments)}function us(){return(us=(0,m.Z)(function*(N,w,b=!1){const F=yield fi(N,w._linkToIdToken(N.auth,yield N.getIdToken()),b);return Jr._forOperation(N,"link",F)})).apply(this,arguments)}function Ls(N,w,b){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,m.Z)(function*(N,w,b){yield or(w);const ue=!1===N?"provider-already-linked":"no-such-provider";De(lo(w.providerData).has(b)===N,w.auth,ue)})).apply(this,arguments)}function da(N,w){return fr.apply(this,arguments)}function fr(){return(fr=(0,m.Z)(function*(N,w,b=!1){var F;const{auth:ue}=N,Se="reauthenticate";try{const Tt=yield fi(N,Po(ue,Se,w,N),b);De(Tt.idToken,ue,"internal-error");const sn=zn(Tt.idToken);De(sn,ue,"internal-error");const{sub:kn}=sn;return De(N.uid===kn,ue,"user-mismatch"),Jr._forOperation(N,Se,Tt)}catch(Tt){throw"auth/user-not-found"===(null===(F=Tt)||void 0===F?void 0:F.code)&&qt(ue,"user-mismatch"),Tt}})).apply(this,arguments)}function Vo(N,w){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,m.Z)(function*(N,w,b=!1){const F="signIn",ue=yield Po(N,F,w),Se=yield Jr._fromIdTokenResponse(N,F,ue);return b||(yield N._updateCurrentUser(Se.user)),Se})).apply(this,arguments)}function ha(N,w){return ur.apply(this,arguments)}function ur(){return(ur=(0,m.Z)(function*(N,w){return Vo(bn(N),w)})).apply(this,arguments)}function Ii(N,w){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,m.Z)(function*(N,w){const b=(0,a.m9)(N);return yield Ls(!1,b,w.providerId),_o(b,w)})).apply(this,arguments)}function xl(N,w){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,m.Z)(function*(N,w){return da((0,a.m9)(N),w)})).apply(this,arguments)}function _l(N,w){return Er.apply(this,arguments)}function Er(){return(Er=(0,m.Z)(function*(N,w){return Ei(N,"POST","/v1/accounts:signInWithCustomToken",Ue(N,w))})).apply(this,arguments)}function Co(N,w){return To.apply(this,arguments)}function To(){return(To=(0,m.Z)(function*(N,w){const b=bn(N),F=yield _l(b,{token:w,returnSecureToken:!0}),ue=yield Jr._fromIdTokenResponse(b,"signIn",F);return yield b._updateCurrentUser(ue.user),ue})).apply(this,arguments)}class Vs{constructor(w,b){this.factorId=w,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(w,b){return"phoneInfo"in b?Jt._fromServerResponse(w,b):qt(w,"internal-error")}}class Jt extends Vs{constructor(w){super("phone",w),this.phoneNumber=w.phoneInfo}static _fromServerResponse(w,b){return new Jt(b)}}function Xn(N,w,b){var F;De((null===(F=b.url)||void 0===F?void 0:F.length)>0,N,"invalid-continue-uri"),De(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,N,"invalid-dynamic-link-domain"),w.continueUrl=b.url,w.dynamicLinkDomain=b.dynamicLinkDomain,w.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(De(b.iOS.bundleId.length>0,N,"missing-ios-bundle-id"),w.iOSBundleId=b.iOS.bundleId),b.android&&(De(b.android.packageName.length>0,N,"missing-android-pkg-name"),w.androidInstallApp=b.android.installApp,w.androidMinimumVersionCode=b.android.minimumVersion,w.androidPackageName=b.android.packageName)}function Zs(N,w,b){return ms.apply(this,arguments)}function ms(){return(ms=(0,m.Z)(function*(N,w,b){const F=(0,a.m9)(N),ue={requestType:"PASSWORD_RESET",email:w};b&&Xn(F,ue,b),yield Mo(F,ue)})).apply(this,arguments)}function Wn(N,w,b){return ee.apply(this,arguments)}function ee(){return(ee=(0,m.Z)(function*(N,w,b){yield Ps((0,a.m9)(N),{oobCode:w,newPassword:b})})).apply(this,arguments)}function Y(N,w){return $.apply(this,arguments)}function $(){return($=(0,m.Z)(function*(N,w){yield ba((0,a.m9)(N),{oobCode:w})})).apply(this,arguments)}function fe(N,w){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,m.Z)(function*(N,w){const b=(0,a.m9)(N),F=yield Ps(b,{oobCode:w}),ue=F.requestType;switch(De(ue,b,"internal-error"),ue){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(F.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(F.mfaInfo,b,"internal-error");default:De(F.email,b,"internal-error")}let Se=null;return F.mfaInfo&&(Se=Vs._fromServerResponse(bn(b),F.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===F.requestType?F.newEmail:F.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===F.requestType?F.email:F.newEmail)||null,multiFactorInfo:Se},operation:ue}})).apply(this,arguments)}function Fn(N,w){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,m.Z)(function*(N,w){const{data:b}=yield fe((0,a.m9)(N),w);return b.email})).apply(this,arguments)}function Ys(N,w,b){return cs.apply(this,arguments)}function cs(){return(cs=(0,m.Z)(function*(N,w,b){const F=bn(N),ue=yield Br(F,{returnSecureToken:!0,email:w,password:b}),Se=yield Jr._fromIdTokenResponse(F,"signIn",ue);return yield F._updateCurrentUser(Se.user),Se})).apply(this,arguments)}function zr(N,w,b){return ha((0,a.m9)(N),bo.credential(w,b))}function _s(N,w,b){return fa.apply(this,arguments)}function fa(){return(fa=(0,m.Z)(function*(N,w,b){const F=(0,a.m9)(N),ue={requestType:"EMAIL_SIGNIN",email:w};De(b.handleCodeInApp,F,"argument-error"),b&&Xn(F,ue,b),yield Ur(F,ue)})).apply(this,arguments)}function el(N,w){return"EMAIL_SIGNIN"===Fr.parseLink(w)?.operation}function Bo(N,w,b){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,m.Z)(function*(N,w,b){const F=(0,a.m9)(N),ue=bo.credentialWithLink(w,b||Yt());return De(ue._tenantId===(F.tenantId||null),F,"tenant-id-mismatch"),ha(F,ue)})).apply(this,arguments)}function ra(N,w){return Da.apply(this,arguments)}function Da(){return(Da=(0,m.Z)(function*(N,w){return _t(N,"POST","/v1/accounts:createAuthUri",Ue(N,w))})).apply(this,arguments)}function Sa(N,w){return sa.apply(this,arguments)}function sa(){return(sa=(0,m.Z)(function*(N,w){const F={identifier:w,continueUri:on()?Yt():"http://localhost"},{signinMethods:ue}=yield ra((0,a.m9)(N),F);return ue||[]})).apply(this,arguments)}function pa(N,w){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,m.Z)(function*(N,w){const b=(0,a.m9)(N),ue={requestType:"VERIFY_EMAIL",idToken:yield N.getIdToken()};w&&Xn(b.auth,ue,w);const{email:Se}=yield Ds(b.auth,ue);Se!==N.email&&(yield N.reload())})).apply(this,arguments)}function is(N,w,b){return qo.apply(this,arguments)}function qo(){return(qo=(0,m.Z)(function*(N,w,b){const F=(0,a.m9)(N),Se={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield N.getIdToken(),newEmail:w};b&&Xn(F.auth,Se,b);const{email:Tt}=yield Ia(F.auth,Se);Tt!==N.email&&(yield N.reload())})).apply(this,arguments)}function ul(N,w){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,m.Z)(function*(N,w){return _t(N,"POST","/v1/accounts:update",w)})).apply(this,arguments)}function kl(N,w){return qa.apply(this,arguments)}function qa(){return(qa=(0,m.Z)(function*(N,{displayName:w,photoURL:b}){if(void 0===w&&void 0===b)return;const F=(0,a.m9)(N),Se={idToken:yield F.getIdToken(),displayName:w,photoUrl:b,returnSecureToken:!0},Tt=yield fi(F,ul(F.auth,Se));F.displayName=Tt.displayName||null,F.photoURL=Tt.photoUrl||null;const sn=F.providerData.find(({providerId:kn})=>"password"===kn);sn&&(sn.displayName=F.displayName,sn.photoURL=F.photoURL),yield F._updateTokensIfNecessary(Tt)})).apply(this,arguments)}function cl(N,w){return oe((0,a.m9)(N),w,null)}function B(N,w){return oe((0,a.m9)(N),null,w)}function oe(N,w,b){return W.apply(this,arguments)}function W(){return(W=(0,m.Z)(function*(N,w,b){const{auth:F}=N,Se={idToken:yield N.getIdToken(),returnSecureToken:!0};w&&(Se.email=w),b&&(Se.password=b);const Tt=yield fi(N,po(F,Se));yield N._updateTokensIfNecessary(Tt,!0)})).apply(this,arguments)}class $e{constructor(w,b,F={}){this.isNewUser=w,this.providerId=b,this.profile=F}}class xt extends $e{constructor(w,b,F,ue){super(w,b,F),this.username=ue}}class Bt extends $e{constructor(w,b){super(w,"facebook.com",b)}}class Pn extends xt{constructor(w,b){super(w,"github.com",b,"string"==typeof b?.login?b?.login:null)}}class Wi extends $e{constructor(w,b){super(w,"google.com",b)}}class cr extends xt{constructor(w,b,F){super(w,"twitter.com",b,F)}}function tr(N){const{user:w,_tokenResponse:b}=N;return w.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function ge(N){var w,b;if(!N)return null;const{providerId:F}=N,ue=N.rawUserInfo?JSON.parse(N.rawUserInfo):{},Se=N.isNewUser||"identitytoolkit#SignupNewUserResponse"===N.kind;if(!F&&N?.idToken){const Tt=null===(b=null===(w=zn(N.idToken))||void 0===w?void 0:w.firebase)||void 0===b?void 0:b.sign_in_provider;if(Tt)return new $e(Se,"anonymous"!==Tt&&"custom"!==Tt?Tt:null)}if(!F)return null;switch(F){case"facebook.com":return new Bt(Se,ue);case"github.com":return new Pn(Se,ue);case"google.com":return new Wi(Se,ue);case"twitter.com":return new cr(Se,ue,N.screenName||null);case"custom":case"anonymous":return new $e(Se,null);default:return new $e(Se,F,ue)}}(b)}class Qs{constructor(w,b){this.type=w,this.credential=b}static _fromIdtoken(w){return new Qs("enroll",w)}static _fromMfaPendingCredential(w){return new Qs("signin",w)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(w){var b,F;if(w?.multiFactorSession){if(null!==(b=w.multiFactorSession)&&void 0!==b&&b.pendingCredential)return Qs._fromMfaPendingCredential(w.multiFactorSession.pendingCredential);if(null!==(F=w.multiFactorSession)&&void 0!==F&&F.idToken)return Qs._fromIdtoken(w.multiFactorSession.idToken)}return null}}class Zo{constructor(w,b,F){this.session=w,this.hints=b,this.signInResolver=F}static _fromError(w,b){const F=bn(w),ue=b.customData._serverResponse,Se=(ue.mfaInfo||[]).map(sn=>Vs._fromServerResponse(F,sn));De(ue.mfaPendingCredential,F,"internal-error");const Tt=Qs._fromMfaPendingCredential(ue.mfaPendingCredential);return new Zo(Tt,Se,function(){var sn=(0,m.Z)(function*(kn){const _i=yield kn._process(F,Tt);delete ue.mfaInfo,delete ue.mfaPendingCredential;const Cr=Object.assign(Object.assign({},ue),{idToken:_i.idToken,refreshToken:_i.refreshToken});switch(b.operationType){case"signIn":const Is=yield Jr._fromIdTokenResponse(F,b.operationType,Cr);return yield F._updateCurrentUser(Is.user),Is;case"reauthenticate":return De(b.user,F,"internal-error"),Jr._forOperation(b.user,b.operationType,Cr);default:qt(F,"internal-error")}});return function(kn){return sn.apply(this,arguments)}}())}resolveSignIn(w){var b=this;return(0,m.Z)(function*(){return b.signInResolver(w)})()}}function _a(N,w){var b;const F=(0,a.m9)(N),ue=w;return De(w.customData.operationType,F,"argument-error"),De(null===(b=ue.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,F,"argument-error"),Zo._fromError(F,ue)}function Vr(N,w){return _t(N,"POST","/v2/accounts/mfaEnrollment:start",Ue(N,w))}class jo{constructor(w){this.user=w,this.enrolledFactors=[],w._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(F=>Vs._fromServerResponse(w.auth,F)))})}static _fromUser(w){return new jo(w)}getSession(){var w=this;return(0,m.Z)(function*(){return Qs._fromIdtoken(yield w.user.getIdToken())})()}enroll(w,b){var F=this;return(0,m.Z)(function*(){const ue=w,Se=yield F.getSession(),Tt=yield fi(F.user,ue._process(F.user.auth,Se,b));return yield F.user._updateTokensIfNecessary(Tt),F.user.reload()})()}unenroll(w){var b=this;return(0,m.Z)(function*(){var F;const ue="string"==typeof w?w:w.uid,Se=yield b.user.getIdToken(),Tt=yield fi(b.user,function Fa(N,w){return _t(N,"POST","/v2/accounts/mfaEnrollment:withdraw",Ue(N,w))}(b.user.auth,{idToken:Se,mfaEnrollmentId:ue}));b.enrolledFactors=b.enrolledFactors.filter(({uid:sn})=>sn!==ue),yield b.user._updateTokensIfNecessary(Tt);try{yield b.user.reload()}catch(sn){if("auth/user-token-expired"!==(null===(F=sn)||void 0===F?void 0:F.code))throw sn}})()}}const Fl=new WeakMap;function La(N){const w=(0,a.m9)(N);return Fl.has(w)||Fl.set(w,jo._fromUser(w)),Fl.get(w)}const L="__sak";class we{constructor(w,b){this.storageRetriever=w,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(L,"1"),this.storage.removeItem(L),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(w,b){return this.storage.setItem(w,JSON.stringify(b)),Promise.resolve()}_get(w){const b=this.storage.getItem(w);return Promise.resolve(b?JSON.parse(b):null)}_remove(w){return this.storage.removeItem(w),Promise.resolve()}get storage(){return this.storageRetriever()}}const lt=(()=>{class N extends we{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,F)=>this.onStorageEvent(b,F),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function p(){const N=(0,a.z$)();return Xe(N)||Le(N)}()&&function wi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vn(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const F of Object.keys(this.listeners)){const ue=this.storage.getItem(F),Se=this.localCache[F];ue!==Se&&b(F,Se,ue)}}onStorageEvent(b,F=!1){if(!b.key)return void this.forAllChangedKeys((sn,kn,_i)=>{this.notifyListeners(sn,_i)});const ue=b.key;if(F?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const sn=this.storage.getItem(ue);if(b.newValue!==sn)null!==b.newValue?this.storage.setItem(ue,b.newValue):this.storage.removeItem(ue);else if(this.localCache[ue]===b.newValue&&!F)return}const Se=()=>{const sn=this.storage.getItem(ue);!F&&this.localCache[ue]===sn||this.notifyListeners(ue,sn)},Tt=this.storage.getItem(ue);!function Ct(){return(0,a.w1)()&&10===document.documentMode}()||Tt===b.newValue||b.newValue===b.oldValue?Se():setTimeout(Se,10)}notifyListeners(b,F){this.localCache[b]=F;const ue=this.listeners[b];if(ue)for(const Se of Array.from(ue))Se(F&&JSON.parse(F))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,F,ue)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:F,newValue:ue}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,F){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(F)}_removeListener(b,F){this.listeners[b]&&(this.listeners[b].delete(F),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,F){var ue=()=>super._set,Se=this;return(0,m.Z)(function*(){yield ue().call(Se,b,F),Se.localCache[b]=JSON.stringify(F)})()}_get(b){var F=()=>super._get,ue=this;return(0,m.Z)(function*(){const Se=yield F().call(ue,b);return ue.localCache[b]=JSON.stringify(Se),Se})()}_remove(b){var F=()=>super._remove,ue=this;return(0,m.Z)(function*(){yield F().call(ue,b),delete ue.localCache[b]})()}}return N.type="LOCAL",N})(),Rn=(()=>{class N extends we{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,F){}_removeListener(b,F){}}return N.type="SESSION",N})();let Mn=(()=>{class N{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const F=this.receivers.find(Se=>Se.isListeningto(b));if(F)return F;const ue=new N(b);return this.receivers.push(ue),ue}isListeningto(b){return this.eventTarget===b}handleEvent(b){var F=this;return(0,m.Z)(function*(){const ue=b,{eventId:Se,eventType:Tt,data:sn}=ue.data,kn=F.handlersMap[Tt];if(!kn?.size)return;ue.ports[0].postMessage({status:"ack",eventId:Se,eventType:Tt});const _i=Array.from(kn).map(function(){var Is=(0,m.Z)(function*(fl){return fl(ue.origin,sn)});return function(fl){return Is.apply(this,arguments)}}()),Cr=yield function wn(N){return Promise.all(N.map(function(){var w=(0,m.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(F){return{fulfilled:!1,reason:F}}});return function(b){return w.apply(this,arguments)}}()))}(_i);ue.ports[0].postMessage({status:"done",eventId:Se,eventType:Tt,response:Cr})})()}_subscribe(b,F){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(F)}_unsubscribe(b,F){this.handlersMap[b]&&F&&this.handlersMap[b].delete(F),(!F||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return N.receivers=[],N})();function pr(N="",w=10){let b="";for(let F=0;F<w;F++)b+=Math.floor(10*Math.random());return N+b}class qr{constructor(w){this.target=w,this.handlers=new Set}removeMessageHandler(w){w.messageChannel&&(w.messageChannel.port1.removeEventListener("message",w.onMessage),w.messageChannel.port1.close()),this.handlers.delete(w)}_send(w,b,F=50){var ue=this;return(0,m.Z)(function*(){const Se=typeof MessageChannel<"u"?new MessageChannel:null;if(!Se)throw new Error("connection_unavailable");let Tt,sn;return new Promise((kn,_i)=>{const Cr=pr("",20);Se.port1.start();const Is=setTimeout(()=>{_i(new Error("unsupported_event"))},F);sn={messageChannel:Se,onMessage(fl){const hu=fl;if(hu.data.eventId===Cr)switch(hu.data.status){case"ack":clearTimeout(Is),Tt=setTimeout(()=>{_i(new Error("timeout"))},3e3);break;case"done":clearTimeout(Tt),kn(hu.data.response);break;default:clearTimeout(Is),clearTimeout(Tt),_i(new Error("invalid_response"))}}},ue.handlers.add(sn),Se.port1.addEventListener("message",sn.onMessage),ue.target.postMessage({eventType:w,eventId:Cr,data:b},[Se.port2])}).finally(()=>{sn&&ue.removeMessageHandler(sn)})})()}}function mi(){return window}function Mr(){return typeof mi().WorkerGlobalScope<"u"&&"function"==typeof mi().importScripts}function oi(){return(oi=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const As="firebaseLocalStorageDb",dn="firebaseLocalStorage",Hr="fbase_key";class oa{constructor(w){this.request=w}toPromise(){return new Promise((w,b)=>{this.request.addEventListener("success",()=>{w(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function tl(N,w){return N.transaction([dn],w?"readwrite":"readonly").objectStore(dn)}function Ln(){const N=indexedDB.open(As,1);return new Promise((w,b)=>{N.addEventListener("error",()=>{b(N.error)}),N.addEventListener("upgradeneeded",()=>{const F=N.result;try{F.createObjectStore(dn,{keyPath:Hr})}catch(ue){b(ue)}}),N.addEventListener("success",(0,m.Z)(function*(){const F=N.result;F.objectStoreNames.contains(dn)?w(F):(F.close(),yield function Vn(){const N=indexedDB.deleteDatabase(As);return new oa(N).toPromise()}(),w(yield Ln()))}))})}function vo(N,w,b){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,m.Z)(function*(N,w,b){const F=tl(N,!0).put({[Hr]:w,value:b});return new oa(F).toPromise()})).apply(this,arguments)}function an(){return(an=(0,m.Z)(function*(N,w){const b=tl(N,!1).get(w),F=yield new oa(b).toPromise();return void 0===F?null:F.value})).apply(this,arguments)}function Js(N,w){const b=tl(N,!0).delete(w);return new oa(b).toPromise()}const Ll=(()=>{class N{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,m.Z)(function*(){return b.db||(b.db=yield Ln()),b.db})()}_withRetries(b){var F=this;return(0,m.Z)(function*(){let ue=0;for(;;)try{const Se=yield F._openDb();return yield b(Se)}catch(Se){if(ue++>3)throw Se;F.db&&(F.db.close(),F.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,m.Z)(function*(){return Mr()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,m.Z)(function*(){b.receiver=Mn._getInstance(function ys(){return Mr()?self:null}()),b.receiver._subscribe("keyChanged",function(){var F=(0,m.Z)(function*(ue,Se){return{keyProcessed:(yield b._poll()).includes(Se.key)}});return function(ue,Se){return F.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var F=(0,m.Z)(function*(ue,Se){return["keyChanged"]});return function(ue,Se){return F.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,m.Z)(function*(){var F,ue;if(b.activeServiceWorker=yield function Ir(){return oi.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new qr(b.activeServiceWorker);const Se=yield b.sender._send("ping",{},800);!Se||(null===(F=Se[0])||void 0===F?void 0:F.fulfilled)&&(null===(ue=Se[0])||void 0===ue?void 0:ue.value.includes("keyChanged"))&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var F=this;return(0,m.Z)(function*(){if(F.sender&&F.activeServiceWorker&&function hs(){var N;return(null===(N=navigator?.serviceWorker)||void 0===N?void 0:N.controller)||null}()===F.activeServiceWorker)try{yield F.sender._send("keyChanged",{key:b},F.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const b=yield Ln();return yield vo(b,L,"1"),yield Js(b,L),!0}catch{}return!1})()}_withPendingWrite(b){var F=this;return(0,m.Z)(function*(){F.pendingWrites++;try{yield b()}finally{F.pendingWrites--}})()}_set(b,F){var ue=this;return(0,m.Z)(function*(){return ue._withPendingWrite((0,m.Z)(function*(){return yield ue._withRetries(Se=>vo(Se,b,F)),ue.localCache[b]=F,ue.notifyServiceWorker(b)}))})()}_get(b){var F=this;return(0,m.Z)(function*(){const ue=yield F._withRetries(Se=>function Ut(N,w){return an.apply(this,arguments)}(Se,b));return F.localCache[b]=ue,ue})()}_remove(b){var F=this;return(0,m.Z)(function*(){return F._withPendingWrite((0,m.Z)(function*(){return yield F._withRetries(ue=>Js(ue,b)),delete F.localCache[b],F.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,m.Z)(function*(){const F=yield b._withRetries(Tt=>{const sn=tl(Tt,!1).getAll();return new oa(sn).toPromise()});if(!F)return[];if(0!==b.pendingWrites)return[];const ue=[],Se=new Set;for(const{fbase_key:Tt,value:sn}of F)Se.add(Tt),JSON.stringify(b.localCache[Tt])!==JSON.stringify(sn)&&(b.notifyListeners(Tt,sn),ue.push(Tt));for(const Tt of Object.keys(b.localCache))b.localCache[Tt]&&!Se.has(Tt)&&(b.notifyListeners(Tt,null),ue.push(Tt));return ue})()}notifyListeners(b,F){this.localCache[b]=F;const ue=this.listeners[b];if(ue)for(const Se of Array.from(ue))Se(F)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,F){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(F)}_removeListener(b,F){this.listeners[b]&&(this.listeners[b].delete(F),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return N.type="LOCAL",N})();function Vl(N,w){return _t(N,"POST","/v2/accounts/mfaSignIn:start",Ue(N,w))}function Bs(){return(Bs=(0,m.Z)(function*(N){return(yield _t(N,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ya(N){return new Promise((w,b)=>{const F=document.createElement("script");F.setAttribute("src",N),F.onload=w,F.onerror=ue=>{const Se=Be("internal-error");Se.customData=ue,b(Se)},F.type="text/javascript",F.charset="UTF-8",function Va(){var N,w;return null!==(w=null===(N=document.getElementsByTagName("head"))||void 0===N?void 0:N[0])&&void 0!==w?w:document}().appendChild(F)})}function Yo(N){return`__${N}${Math.floor(1e6*Math.random())}`}const va=1e12;class Xr{constructor(w){this.auth=w,this.counter=va,this._widgets=new Map}render(w,b){const F=this.counter;return this._widgets.set(F,new Sn(w,this.auth.name,b||{})),this.counter++,F}reset(w){var b;const F=w||va;null===(b=this._widgets.get(F))||void 0===b||b.delete(),this._widgets.delete(F)}getResponse(w){var b;return(null===(b=this._widgets.get(w||va))||void 0===b?void 0:b.getResponse())||""}execute(w){var b=this;return(0,m.Z)(function*(){var F;return null===(F=b._widgets.get(w||va))||void 0===F||F.execute(),""})()}}class Sn{constructor(w,b,F){this.params=F,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ue="string"==typeof w?document.getElementById(w):w;De(ue,"argument-error",{appName:b}),this.container=ue,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ql(N){const w=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let F=0;F<N;F++)w.push(b.charAt(Math.floor(Math.random()*b.length)));return w.join("")}(50);const{callback:w,"expired-callback":b}=this.params;if(w)try{w(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sr=Yo("rcb"),Uu=new $t(3e4,6e4);class En{constructor(){var w;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(w=mi().grecaptcha)||void 0===w||!w.render)}load(w,b=""){return De(function dl(N){return N.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(N)}(b),w,"argument-error"),this.shouldResolveImmediately(b)?Promise.resolve(mi().grecaptcha):new Promise((F,ue)=>{const Se=mi().setTimeout(()=>{ue(Be(w,"network-request-failed"))},Uu.get());mi()[Sr]=()=>{mi().clearTimeout(Se),delete mi()[Sr];const sn=mi().grecaptcha;if(!sn)return void ue(Be(w,"internal-error"));const kn=sn.render;sn.render=(_i,Cr)=>{const Is=kn(_i,Cr);return this.counter++,Is},this.hostLanguage=b,F(sn)},Ya(`https://www.google.com/recaptcha/api.js??${(0,a.xO)({onload:Sr,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(Se),ue(Be(w,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(w){var b;return!(null===(b=mi().grecaptcha)||void 0===b||!b.render)&&(w===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Qo{load(w){return(0,m.Z)(function*(){return new Xr(w)})()}clearedOneInstance(){}}const Ua="recaptcha",Mu={theme:"light",type:"image"};class Zl{constructor(w,b=Object.assign({},Mu),F){this.parameters=b,this.type=Ua,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(F),this.isInvisible="invisible"===this.parameters.size,De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const ue="string"==typeof w?document.getElementById(w):w;De(ue,this.auth,"argument-error"),this.container=ue,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qo:new En,this.validateStartingState()}verify(){var w=this;return(0,m.Z)(function*(){w.assertNotDestroyed();const b=yield w.render(),F=w.getAssertedRecaptcha();return F.getResponse(b)||new Promise(Se=>{const Tt=sn=>{!sn||(w.tokenChangeListeners.delete(Tt),Se(sn))};w.tokenChangeListeners.add(Tt),w.isInvisible&&F.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(w){return Promise.reject(w)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(w=>{throw this.renderPromise=null,w})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(w=>{this.container.removeChild(w)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(w){return b=>{if(this.tokenChangeListeners.forEach(F=>F(b)),"function"==typeof w)w(b);else if("string"==typeof w){const F=mi()[w];"function"==typeof F&&F(b)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var w=this;return(0,m.Z)(function*(){if(yield w.init(),!w.widgetId){let b=w.container;if(!w.isInvisible){const F=document.createElement("div");b.appendChild(F),b=F}w.widgetId=w.getAssertedRecaptcha().render(b,w.parameters)}return w.widgetId})()}init(){var w=this;return(0,m.Z)(function*(){De(on()&&!Mr(),w.auth,"internal-error"),yield function Xs(){let N=null;return new Promise(w=>{"complete"!==document.readyState?(N=()=>w(),window.addEventListener("load",N)):w()}).catch(w=>{throw N&&window.removeEventListener("load",N),w})}(),w.recaptcha=yield w._recaptchaLoader.load(w.auth,w.auth.languageCode||void 0);const b=yield function ya(N){return Bs.apply(this,arguments)}(w.auth);De(b,w.auth,"internal-error"),w.parameters.sitekey=b})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class il{constructor(w,b){this.verificationId=w,this.onConfirmation=b}confirm(w){const b=as._fromVerification(this.verificationId,w);return this.onConfirmation(b)}}function Ml(N,w,b){return vl.apply(this,arguments)}function vl(){return(vl=(0,m.Z)(function*(N,w,b){const F=bn(N),ue=yield Fo(F,w,(0,a.m9)(b));return new il(ue,Se=>ha(F,Se))})).apply(this,arguments)}function Wr(N,w,b){return Do.apply(this,arguments)}function Do(){return(Do=(0,m.Z)(function*(N,w,b){const F=(0,a.m9)(N);yield Ls(!1,F,"phone");const ue=yield Fo(F.auth,w,(0,a.m9)(b));return new il(ue,Se=>Ii(F,Se))})).apply(this,arguments)}function Qa(N,w,b){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,m.Z)(function*(N,w,b){const F=(0,a.m9)(N),ue=yield Fo(F.auth,w,(0,a.m9)(b));return new il(ue,Se=>xl(F,Se))})).apply(this,arguments)}function Fo(N,w,b){return rl.apply(this,arguments)}function rl(){return(rl=(0,m.Z)(function*(N,w,b){var F;const ue=yield b.verify();try{let Se;if(De("string"==typeof ue,N,"argument-error"),De(b.type===Ua,N,"argument-error"),Se="string"==typeof w?{phoneNumber:w}:w,"session"in Se){const Tt=Se.session;if("phoneNumber"in Se)return De("enroll"===Tt.type,N,"internal-error"),(yield Vr(N,{idToken:Tt.credential,phoneEnrollmentInfo:{phoneNumber:Se.phoneNumber,recaptchaToken:ue}})).phoneSessionInfo.sessionInfo;{De("signin"===Tt.type,N,"internal-error");const sn=(null===(F=Se.multiFactorHint)||void 0===F?void 0:F.uid)||Se.multiFactorUid;return De(sn,N,"missing-multi-factor-info"),(yield Vl(N,{mfaPendingCredential:Tt.credential,mfaEnrollmentId:sn,phoneSignInInfo:{recaptchaToken:ue}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Tt}=yield It(N,{phoneNumber:Se.phoneNumber,recaptchaToken:ue});return Tt}}finally{b._reset()}})).apply(this,arguments)}function C(N,w){return R.apply(this,arguments)}function R(){return(R=(0,m.Z)(function*(N,w){yield _o((0,a.m9)(N),w)})).apply(this,arguments)}let D=(()=>{class N{constructor(b){this.providerId=N.PROVIDER_ID,this.auth=bn(b)}verifyPhoneNumber(b,F){return Fo(this.auth,b,(0,a.m9)(F))}static credential(b,F){return as._fromVerification(b,F)}static credentialFromResult(b){return N.credentialFromTaggedObject(b)}static credentialFromError(b){return N.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:F,temporaryProof:ue}=b;return F&&ue?as._fromTokenResponse(F,ue):null}}return N.PROVIDER_ID="phone",N.PHONE_SIGN_IN_METHOD="phone",N})();function V(N,w){return w?it(w):(De(N._popupRedirectResolver,N,"argument-error"),N._popupRedirectResolver)}class J extends no{constructor(w){super("custom","custom"),this.params=w}_getIdTokenResponse(w){return io(w,this._buildIdpRequest())}_linkToIdToken(w,b){return io(w,this._buildIdpRequest(b))}_getReauthenticationResolver(w){return io(w,this._buildIdpRequest())}_buildIdpRequest(w){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return w&&(b.idToken=w),b}}function pe(N){return Vo(N.auth,new J(N),N.bypassAuthState)}function Ne(N){const{auth:w,user:b}=N;return De(b,w,"internal-error"),da(b,new J(N),N.bypassAuthState)}function Ze(N){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,m.Z)(function*(N){const{auth:w,user:b}=N;return De(b,w,"internal-error"),_o(b,new J(N),N.bypassAuthState)})).apply(this,arguments)}class Cn{constructor(w,b,F,ue,Se=!1){this.auth=w,this.resolver=F,this.user=ue,this.bypassAuthState=Se,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var w=this;return new Promise(function(){var b=(0,m.Z)(function*(F,ue){w.pendingPromise={resolve:F,reject:ue};try{w.eventManager=yield w.resolver._initialize(w.auth),yield w.onExecution(),w.eventManager.registerConsumer(w)}catch(Se){w.reject(Se)}});return function(F,ue){return b.apply(this,arguments)}}())}onAuthEvent(w){var b=this;return(0,m.Z)(function*(){const{urlResponse:F,sessionId:ue,postBody:Se,tenantId:Tt,error:sn,type:kn}=w;if(sn)return void b.reject(sn);const _i={auth:b.auth,requestUri:F,sessionId:ue,tenantId:Tt||void 0,postBody:Se||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(kn)(_i))}catch(Cr){b.reject(Cr)}})()}onError(w){this.reject(w)}getIdpTask(w){switch(w){case"signInViaPopup":case"signInViaRedirect":return pe;case"linkViaPopup":case"linkViaRedirect":return Ze;case"reauthViaPopup":case"reauthViaRedirect":return Ne;default:qt(this.auth,"internal-error")}}resolve(w){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(w),this.unregisterAndCleanUp()}reject(w){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(w),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ji=new $t(2e3,1e4);function Kn(N,w,b){return $i.apply(this,arguments)}function $i(){return($i=(0,m.Z)(function*(N,w,b){const F=bn(N);nt(N,w,wr);const ue=V(F,b);return new Jo(F,"signInViaPopup",w,ue).executeNotNull()})).apply(this,arguments)}function fs(N,w,b){return jr.apply(this,arguments)}function jr(){return(jr=(0,m.Z)(function*(N,w,b){const F=(0,a.m9)(N);nt(F.auth,w,wr);const ue=V(F.auth,b);return new Jo(F.auth,"reauthViaPopup",w,ue,F).executeNotNull()})).apply(this,arguments)}function Ja(N,w,b){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,m.Z)(function*(N,w,b){const F=(0,a.m9)(N);nt(F.auth,w,wr);const ue=V(F.auth,b);return new Jo(F.auth,"linkViaPopup",w,ue,F).executeNotNull()})).apply(this,arguments)}let Jo=(()=>{class N extends Cn{constructor(b,F,ue,Se,Tt){super(b,F,Se,Tt),this.provider=ue,this.authWindow=null,this.pollId=null,N.currentPopupAction&&N.currentPopupAction.cancel(),N.currentPopupAction=this}executeNotNull(){var b=this;return(0,m.Z)(function*(){const F=yield b.execute();return De(F,b.auth,"internal-error"),F})()}onExecution(){var b=this;return(0,m.Z)(function*(){ft(1===b.filter.length,"Popup operations only handle one event");const F=pr();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],F),b.authWindow.associatedEvent=F,b.resolver._originValidation(b.auth).catch(ue=>{b.reject(ue)}),b.resolver._isIframeWebStorageSupported(b.auth,ue=>{ue||b.reject(Be(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,N.currentPopupAction=null}pollUserCancellation(){const b=()=>{var F,ue;this.pollId=null!==(ue=null===(F=this.authWindow)||void 0===F?void 0:F.window)&&void 0!==ue&&ue.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(b,ji.get())};b()}}return N.currentPopupAction=null,N})();const er=new Map;class Ul extends Cn{constructor(w,b,F=!1){super(w,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,F),this.eventId=null}execute(){var w=()=>super.execute,b=this;return(0,m.Z)(function*(){let F=er.get(b.auth._key());if(!F){try{const Se=(yield function Bl(N,w){return Go.apply(this,arguments)}(b.resolver,b.auth))?yield w().call(b):null;F=()=>Promise.resolve(Se)}catch(ue){F=()=>Promise.reject(ue)}er.set(b.auth._key(),F)}return b.bypassAuthState||er.set(b.auth._key(),()=>Promise.resolve(null)),F()})()}onAuthEvent(w){var b=()=>super.onAuthEvent,F=this;return(0,m.Z)(function*(){if("signInViaRedirect"===w.type)return b().call(F,w);if("unknown"!==w.type){if(w.eventId){const ue=yield F.auth._redirectUserForId(w.eventId);if(ue)return F.user=ue,b().call(F,w);F.resolve(null)}}else F.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Go(){return(Go=(0,m.Z)(function*(N,w){const b=Aa(w),F=es(N);if(!(yield F._isAvailable()))return!1;const ue="true"===(yield F._get(b));return yield F._remove(b),ue})).apply(this,arguments)}function wl(N,w){return uo.apply(this,arguments)}function uo(){return(uo=(0,m.Z)(function*(N,w){return es(N)._set(Aa(w),"true")})).apply(this,arguments)}function Yl(){er.clear()}function aa(N,w){er.set(N._key(),w)}function es(N){return it(N._redirectPersistence)}function Aa(N){return Ji("pendingRedirect",N.config.apiKey,N.name)}function iu(N,w,b){return function co(N,w,b){return El.apply(this,arguments)}(N,w,b)}function El(){return(El=(0,m.Z)(function*(N,w,b){const F=bn(N);nt(N,w,wr);const ue=V(F,b);return yield wl(ue,F),ue._openRedirect(F,w,"signInViaRedirect")})).apply(this,arguments)}function z(N,w,b){return function X(N,w,b){return de.apply(this,arguments)}(N,w,b)}function de(){return(de=(0,m.Z)(function*(N,w,b){const F=(0,a.m9)(N);nt(F.auth,w,wr);const ue=V(F.auth,b);yield wl(ue,F.auth);const Se=yield Pi(F);return ue._openRedirect(F.auth,w,"reauthViaRedirect",Se)})).apply(this,arguments)}function He(N,w,b){return function gt(N,w,b){return At.apply(this,arguments)}(N,w,b)}function At(){return(At=(0,m.Z)(function*(N,w,b){const F=(0,a.m9)(N);nt(F.auth,w,wr);const ue=V(F.auth,b);yield Ls(!1,F,w.providerId),yield wl(ue,F.auth);const Se=yield Pi(F);return ue._openRedirect(F.auth,w,"linkViaRedirect",Se)})).apply(this,arguments)}function un(N,w){return mn.apply(this,arguments)}function mn(){return(mn=(0,m.Z)(function*(N,w){return yield bn(N)._initializationPromise,ri(N,w,!1)})).apply(this,arguments)}function ri(N,w){return di.apply(this,arguments)}function di(){return(di=(0,m.Z)(function*(N,w,b=!1){const F=bn(N),ue=V(F,w),Tt=yield new Ul(F,ue,b).execute();return Tt&&!b&&(delete Tt.user._redirectEventId,yield F._persistUserIfCurrent(Tt.user),yield F._setRedirectUser(null,w)),Tt})).apply(this,arguments)}function Pi(N){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,m.Z)(function*(N){const w=pr(`${N.uid}:::`);return N._redirectEventId=w,yield N.auth._setRedirectUser(N),yield N.auth._persistUserIfCurrent(N),w})).apply(this,arguments)}class ho{constructor(w){this.auth=w,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(w){this.consumers.add(w),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,w)&&(this.sendToConsumer(this.queuedRedirectEvent,w),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(w){this.consumers.delete(w)}onEvent(w){if(this.hasEventBeenHandled(w))return!1;let b=!1;return this.consumers.forEach(F=>{this.isEventForConsumer(w,F)&&(b=!0,this.sendToConsumer(w,F),this.saveEventToCache(w))}),this.hasHandledPotentialRedirect||!function sl(N){switch(N.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xa(N);default:return!1}}(w)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=w,b=!0)),b}sendToConsumer(w,b){var F;if(w.error&&!xa(w)){const ue=(null===(F=w.error.code)||void 0===F?void 0:F.split("auth/")[1])||"internal-error";b.onError(Be(this.auth,ue))}else b.onAuthEvent(w)}isEventForConsumer(w,b){const F=null===b.eventId||!!w.eventId&&w.eventId===b.eventId;return b.filter.includes(w.type)&&F}hasEventBeenHandled(w){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zo(w))}saveEventToCache(w){this.cachedEventUids.add(zo(w)),this.lastProcessedEventTime=Date.now()}}function zo(N){return[N.type,N.eventId,N.sessionId,N.tenantId].filter(w=>w).join("-")}function xa({type:N,error:w}){return"unknown"===N&&"auth/no-auth-event"===w?.code}function Ba(N){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,m.Z)(function*(N,w={}){return _t(N,"GET","/v1/projects",w)})).apply(this,arguments)}const ol=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ja=/^https?/;function cu(){return(cu=(0,m.Z)(function*(N){if(N.config.emulator)return;const{authorizedDomains:w}=yield Ba(N);for(const b of w)try{if(rd(b))return}catch{}qt(N,"unauthorized-domain")})).apply(this,arguments)}function rd(N){const w=Yt(),{protocol:b,hostname:F}=new URL(w);if(N.startsWith("chrome-extension://")){const Tt=new URL(N);return""===Tt.hostname&&""===F?"chrome-extension:"===b&&N.replace("chrome-extension://","")===w.replace("chrome-extension://",""):"chrome-extension:"===b&&Tt.hostname===F}if(!ja.test(b))return!1;if(ol.test(N))return F===N;const ue=N.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ue+"|"+ue+")$","i").test(F)}const Bu=new $t(3e4,6e4);function mu(){const N=mi().___jsl;if(N?.H)for(const w of Object.keys(N.H))if(N.H[w].r=N.H[w].r||[],N.H[w].L=N.H[w].L||[],N.H[w].r=[...N.H[w].L],N.CP)for(let b=0;b<N.CP.length;b++)N.CP[b]=null}let jl=null;function bs(N){return jl=jl||function Xo(N){return new Promise((w,b)=>{var F,ue,Se;function Tt(){mu(),gapi.load("gapi.iframes",{callback:()=>{w(gapi.iframes.getContext())},ontimeout:()=>{mu(),b(Be(N,"network-request-failed"))},timeout:Bu.get()})}if(null!==(ue=null===(F=mi().gapi)||void 0===F?void 0:F.iframes)&&void 0!==ue&&ue.Iframe)w(gapi.iframes.getContext());else{if(null===(Se=mi().gapi)||void 0===Se||!Se.load){const sn=Yo("iframefcb");return mi()[sn]=()=>{gapi.load?Tt():b(Be(N,"network-request-failed"))},Ya(`https://apis.google.com/js/api.js?onload=${sn}`).catch(kn=>b(kn))}Tt()}}).catch(w=>{throw jl=null,w})}(N),jl}const Ou=new $t(5e3,15e3),G={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ye=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Je(N){const w=N.config;De(w.authDomain,N,"auth-domain-config-required");const b=w.emulator?ci(w,"emulator/auth/iframe"):`https://${N.config.authDomain}/__/auth/iframe`,F={apiKey:w.apiKey,appName:N.name,v:re.SDK_VERSION},ue=ye.get(N.config.apiHost);ue&&(F.eid=ue);const Se=N._getFrameworks();return Se.length&&(F.fw=Se.join(",")),`${b}?${(0,a.xO)(F).slice(1)}`}function _n(){return _n=(0,m.Z)(function*(N){const w=yield bs(N),b=mi().gapi;return De(b,N,"internal-error"),w.open({where:document.body,url:Je(N),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G,dontclear:!0},F=>new Promise(function(){var ue=(0,m.Z)(function*(Se,Tt){yield F.restyle({setHideOnLeave:!1});const sn=Be(N,"network-request-failed"),kn=mi().setTimeout(()=>{Tt(sn)},Ou.get());function _i(){mi().clearTimeout(kn),Se(F)}F.ping(_i).then(_i,()=>{Tt(sn)})});return function(Se,Tt){return ue.apply(this,arguments)}}()))}),_n.apply(this,arguments)}const Ci={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class al{constructor(w){this.window=w,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function So(N,w,b,F,ue,Se){De(N.config.authDomain,N,"auth-domain-config-required"),De(N.config.apiKey,N,"invalid-api-key");const Tt={apiKey:N.config.apiKey,appName:N.name,authType:b,redirectUrl:F,v:re.SDK_VERSION,eventId:ue};if(w instanceof wr){w.setDefaultLanguage(N.languageCode),Tt.providerId=w.providerId||"",(0,a.xb)(w.getCustomParameters())||(Tt.customParameters=JSON.stringify(w.getCustomParameters()));for(const[kn,_i]of Object.entries(Se||{}))Tt[kn]=_i}if(w instanceof qs){const kn=w.getScopes().filter(_i=>""!==_i);kn.length>0&&(Tt.scopes=kn.join(","))}N.tenantId&&(Tt.tid=N.tenantId);const sn=Tt;for(const kn of Object.keys(sn))void 0===sn[kn]&&delete sn[kn];return`${function la({config:N}){return N.emulator?ci(N,"emulator/auth/handler"):`https://${N.authDomain}/__/auth/handler`}(N)}?${(0,a.xO)(sn).slice(1)}`}const ic="webStorageSupport",Hu=class rc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rn,this._completeRedirectFn=ri,this._overrideRedirectResult=aa}_openPopup(w,b,F,ue){var Se=this;return(0,m.Z)(function*(){var Tt;ft(null===(Tt=Se.eventManagers[w._key()])||void 0===Tt?void 0:Tt.manager,"_initialize() not called before _openPopup()");const sn=So(w,b,F,Yt(),ue);return function $a(N,w,b,F=500,ue=600){const Se=Math.max((window.screen.availHeight-ue)/2,0).toString(),Tt=Math.max((window.screen.availWidth-F)/2,0).toString();let sn="";const kn=Object.assign(Object.assign({},Ci),{width:F.toString(),height:ue.toString(),top:Se,left:Tt}),_i=(0,a.z$)().toLowerCase();b&&(sn=jt(_i)?"_blank":b),ze(_i)&&(w=w||"http://localhost",kn.scrollbars="yes");const Cr=Object.entries(kn).reduce((fl,[hu,ru])=>`${fl}${hu}=${ru},`,"");if(function dt(N=(0,a.z$)()){var w;return Le(N)&&!(null===(w=window.navigator)||void 0===w||!w.standalone)}(_i)&&"_self"!==sn)return function bl(N,w){const b=document.createElement("a");b.href=N,b.target=w;const F=document.createEvent("MouseEvent");F.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(F)}(w||"",sn),new al(null);const Is=window.open(w||"",sn,Cr);De(Is,N,"popup-blocked");try{Is.focus()}catch{}return new al(Is)}(w,sn,pr())})()}_openRedirect(w,b,F,ue){var Se=this;return(0,m.Z)(function*(){return yield Se._originValidation(w),function Ss(N){mi().location.href=N}(So(w,b,F,Yt(),ue)),new Promise(()=>{})})()}_initialize(w){const b=w._key();if(this.eventManagers[b]){const{manager:ue,promise:Se}=this.eventManagers[b];return ue?Promise.resolve(ue):(ft(Se,"If manager is not set, promise should be"),Se)}const F=this.initAndGetManager(w);return this.eventManagers[b]={promise:F},F.catch(()=>{delete this.eventManagers[b]}),F}initAndGetManager(w){var b=this;return(0,m.Z)(function*(){const F=yield function Nt(N){return _n.apply(this,arguments)}(w),ue=new ho(w);return F.register("authEvent",Se=>(De(Se?.authEvent,w,"invalid-auth-event"),{status:ue.onEvent(Se.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[w._key()]={manager:ue},b.iframes[w._key()]=F,ue})()}_isIframeWebStorageSupported(w,b){this.iframes[w._key()].send(ic,{type:ic},ue=>{var Se;const Tt=null===(Se=ue?.[0])||void 0===Se?void 0:Se[ic];void 0!==Tt&&b(!!Tt),qt(w,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(w){const b=w._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Hl(N){return cu.apply(this,arguments)}(w)),this.originValidationPromises[b]}get _shouldInitProactively(){return vn()||Xe()||Le()}};class du extends class hl{constructor(w){this.factorId=w}_process(w,b,F){switch(b.type){case"enroll":return this._finalizeEnroll(w,b.credential,F);case"signin":return this._finalizeSignIn(w,b.credential);default:return Q("unexpected MultiFactorSessionType")}}}{constructor(w){super("phone"),this.credential=w}static _fromCredential(w){return new du(w)}_finalizeEnroll(w,b,F){return function ka(N,w){return _t(N,"POST","/v2/accounts/mfaEnrollment:finalize",Ue(N,w))}(w,{idToken:b,displayName:F,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(w,b){return function nl(N,w){return _t(N,"POST","/v2/accounts/mfaSignIn:finalize",Ue(N,w))}(w,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Cl=(()=>{class N{constructor(){}static assertion(b){return du._fromCredential(b)}}return N.FACTOR_ID="phone",N})();var wa="@firebase/auth";class Uc{constructor(w){this.auth=w,this.internalListeners=new Map}getUid(){var w;return this.assertAuthConfigured(),(null===(w=this.auth.currentUser)||void 0===w?void 0:w.uid)||null}getToken(w){var b=this;return(0,m.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(w)}:null})()}addAuthTokenListener(w){if(this.assertAuthConfigured(),this.internalListeners.has(w))return;const b=this.auth.onIdTokenChanged(F=>{var ue;w((null===(ue=F)||void 0===ue?void 0:ue.stsTokenManager.accessToken)||null)});this.internalListeners.set(w,b),this.updateProactiveRefresh()}removeAuthTokenListener(w){this.assertAuthConfigured();const b=this.internalListeners.get(w);!b||(this.internalListeners.delete(w),b(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function _u(N){(0,re._registerComponent)(new Ae.wA("auth",(w,{options:b})=>{const F=w.getProvider("app").getImmediate(),ue=w.getProvider("heartbeat"),{apiKey:Se,authDomain:Tt}=F.options;return((sn,kn)=>{De(Se&&!Se.includes(":"),"invalid-api-key",{appName:sn.name}),De(!Tt?.includes(":"),"argument-error",{appName:sn.name});const _i={apiKey:Se,authDomain:Tt,clientPlatform:N,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Di(N)},Cr=new yr(sn,kn,_i);return function yt(N,w){const b=w?.persistence||[],F=(Array.isArray(b)?b:[b]).map(it);w?.errorMap&&N._updateErrorMap(w.errorMap),N._initializeWithPersistence(F,w?.popupRedirectResolver)}(Cr,b),Cr})(F,ue)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((w,b,F)=>{w.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new Ae.wA("auth-internal",w=>{const b=bn(w.getProvider("auth").getImmediate());return new Uc(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(wa,"0.20.5",function Ru(N){switch(N){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(N)),(0,re.registerVersion)(wa,"0.20.5","esm2017")}("Browser")},2090:(In,Et,K)=>{K.d(Et,{$s:()=>or,BH:()=>Mt,DV:()=>_t,Dv:()=>Kr,G6:()=>De,GJ:()=>Vt,L:()=>xe,LL:()=>Yt,Mn:()=>nt,Pz:()=>Nn,Sg:()=>ct,UG:()=>Dt,UI:()=>Hn,US:()=>Ae,Wj:()=>_r,Yr:()=>Qe,ZB:()=>Ie,ZR:()=>yt,b$:()=>qt,cI:()=>On,d:()=>Be,dS:()=>zn,eu:()=>ft,g5:()=>re,gK:()=>sr,gQ:()=>Li,h$:()=>Re,hl:()=>Q,hu:()=>a,jU:()=>vt,lb:()=>Qi,m9:()=>qn,ne:()=>vi,p$:()=>Me,pd:()=>Hi,r3:()=>Ue,ru:()=>rt,tV:()=>tt,uI:()=>Wt,ug:()=>$n,vZ:()=>Gi,w1:()=>ve,w9:()=>St,xO:()=>zi,xb:()=>ln,z$:()=>wt,zI:()=>Ve,zd:()=>ai});const a=function(ot,Ke){if(!ot)throw re(Ke)},re=function(ot){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ot)},Ee=function(ot){const Ke=[];let je=0;for(let et=0;et<ot.length;et++){let qe=ot.charCodeAt(et);qe<128?Ke[je++]=qe:qe<2048?(Ke[je++]=qe>>6|192,Ke[je++]=63&qe|128):55296==(64512&qe)&&et+1<ot.length&&56320==(64512&ot.charCodeAt(et+1))?(qe=65536+((1023&qe)<<10)+(1023&ot.charCodeAt(++et)),Ke[je++]=qe>>18|240,Ke[je++]=qe>>12&63|128,Ke[je++]=qe>>6&63|128,Ke[je++]=63&qe|128):(Ke[je++]=qe>>12|224,Ke[je++]=qe>>6&63|128,Ke[je++]=63&qe|128)}return Ke},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ot,Ke){if(!Array.isArray(ot))throw Error("encodeByteArray takes an array as a parameter");this.init_();const je=Ke?this.byteToCharMapWebSafe_:this.byteToCharMap_,et=[];for(let qe=0;qe<ot.length;qe+=3){const Kt=ot[qe],fn=qe+1<ot.length,xn=fn?ot[qe+1]:0,Bi=qe+2<ot.length,Ji=Bi?ot[qe+2]:0;let ze=(15&xn)<<2|Ji>>6,Xe=63&Ji;Bi||(Xe=64,fn||(ze=64)),et.push(je[Kt>>2],je[(3&Kt)<<4|xn>>4],je[ze],je[Xe])}return et.join("")},encodeString(ot,Ke){return this.HAS_NATIVE_SUPPORT&&!Ke?btoa(ot):this.encodeByteArray(Ee(ot),Ke)},decodeString(ot,Ke){return this.HAS_NATIVE_SUPPORT&&!Ke?atob(ot):function(ot){const Ke=[];let je=0,et=0;for(;je<ot.length;){const qe=ot[je++];if(qe<128)Ke[et++]=String.fromCharCode(qe);else if(qe>191&&qe<224){const Kt=ot[je++];Ke[et++]=String.fromCharCode((31&qe)<<6|63&Kt)}else if(qe>239&&qe<365){const Bi=((7&qe)<<18|(63&ot[je++])<<12|(63&ot[je++])<<6|63&ot[je++])-65536;Ke[et++]=String.fromCharCode(55296+(Bi>>10)),Ke[et++]=String.fromCharCode(56320+(1023&Bi))}else{const Kt=ot[je++],fn=ot[je++];Ke[et++]=String.fromCharCode((15&qe)<<12|(63&Kt)<<6|63&fn)}}return Ke.join("")}(this.decodeStringToByteArray(ot,Ke))},decodeStringToByteArray(ot,Ke){this.init_();const je=Ke?this.charToByteMapWebSafe_:this.charToByteMap_,et=[];for(let qe=0;qe<ot.length;){const Kt=je[ot.charAt(qe++)],xn=qe<ot.length?je[ot.charAt(qe)]:0;++qe;const Ji=qe<ot.length?je[ot.charAt(qe)]:64;++qe;const mt=qe<ot.length?je[ot.charAt(qe)]:64;if(++qe,null==Kt||null==xn||null==Ji||null==mt)throw Error();et.push(Kt<<2|xn>>4),64!==Ji&&(et.push(xn<<4&240|Ji>>2),64!==mt&&et.push(Ji<<6&192|mt))}return et},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ot=0;ot<this.ENCODED_VALS.length;ot++)this.byteToCharMap_[ot]=this.ENCODED_VALS.charAt(ot),this.charToByteMap_[this.byteToCharMap_[ot]]=ot,this.byteToCharMapWebSafe_[ot]=this.ENCODED_VALS_WEBSAFE.charAt(ot),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ot]]=ot,ot>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ot)]=ot,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ot)]=ot)}}},Re=function(ot){const Ke=Ee(ot);return Ae.encodeByteArray(Ke,!0)},xe=function(ot){return Re(ot).replace(/\./g,"")},tt=function(ot){try{return Ae.decodeString(ot,!0)}catch(Ke){console.error("base64Decode failed: ",Ke)}return null};function Me(ot){return Ie(void 0,ot)}function Ie(ot,Ke){if(!(Ke instanceof Object))return Ke;switch(Ke.constructor){case Date:return new Date(Ke.getTime());case Object:void 0===ot&&(ot={});break;case Array:ot=[];break;default:return Ke}for(const je in Ke)!Ke.hasOwnProperty(je)||!Ge(je)||(ot[je]=Ie(ot[je],Ke[je]));return ot}function Ge(ot){return"__proto__"!==ot}class Mt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ke,je)=>{this.resolve=Ke,this.reject=je})}wrapCallback(Ke){return(je,et)=>{je?this.reject(je):this.resolve(et),"function"==typeof Ke&&(this.promise.catch(()=>{}),1===Ke.length?Ke(je):Ke(je,et))}}}function ct(ot,Ke){if(ot.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const et=Ke||"demo-project",qe=ot.iat||0,Kt=ot.sub||ot.user_id;if(!Kt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const fn=Object.assign({iss:`https://securetoken.google.com/${et}`,aud:et,iat:qe,exp:qe+3600,auth_time:qe,sub:Kt,user_id:Kt,firebase:{sign_in_provider:"custom",identities:{}}},ot);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(fn)),""].join(".")}function wt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Wt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function Dt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function vt(){return"object"==typeof self&&self.self===self}function rt(){const ot="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ot&&void 0!==ot.id}function qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Be(){return wt().indexOf("Electron/")>=0}function ve(){const ot=wt();return ot.indexOf("MSIE ")>=0||ot.indexOf("Trident/")>=0}function nt(){return wt().indexOf("MSAppHost/")>=0}function Qe(){return!1}function De(){return!Dt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q(){return"object"==typeof indexedDB}function ft(){return new Promise((ot,Ke)=>{try{let je=!0;const et="validate-browser-context-for-indexeddb-analytics-module",qe=self.indexedDB.open(et);qe.onsuccess=()=>{qe.result.close(),je||self.indexedDB.deleteDatabase(et),ot(!0)},qe.onupgradeneeded=()=>{je=!1},qe.onerror=()=>{var Kt;Ke((null===(Kt=qe.error)||void 0===Kt?void 0:Kt.message)||"")}}catch(je){Ke(je)}})}function Ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class yt extends Error{constructor(Ke,je,et){super(je),this.code=Ke,this.customData=et,this.name="FirebaseError",Object.setPrototypeOf(this,yt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}}class Yt{constructor(Ke,je,et){this.service=Ke,this.serviceName=je,this.errors=et}create(Ke,...je){const et=je[0]||{},qe=`${this.service}/${Ke}`,Kt=this.errors[Ke],fn=Kt?function on(ot,Ke){return ot.replace(pn,(je,et)=>{const qe=Ke[et];return null!=qe?String(qe):`<${et}?>`})}(Kt,et):"Error";return new yt(qe,`${this.serviceName}: ${fn} (${qe}).`,et)}}const pn=/\{\$([^}]+)}/g;function On(ot){return JSON.parse(ot)}function Nn(ot){return JSON.stringify(ot)}const $t=function(ot){let Ke={},je={},et={},qe="";try{const Kt=ot.split(".");Ke=On(tt(Kt[0])||""),je=On(tt(Kt[1])||""),qe=Kt[2],et=je.d||{},delete je.d}catch{}return{header:Ke,claims:je,data:et,signature:qe}},St=function(ot){const je=$t(ot).claims;return!!je&&"object"==typeof je&&je.hasOwnProperty("iat")},Vt=function(ot){const Ke=$t(ot).claims;return"object"==typeof Ke&&!0===Ke.admin};function Ue(ot,Ke){return Object.prototype.hasOwnProperty.call(ot,Ke)}function _t(ot,Ke){if(Object.prototype.hasOwnProperty.call(ot,Ke))return ot[Ke]}function ln(ot){for(const Ke in ot)if(Object.prototype.hasOwnProperty.call(ot,Ke))return!1;return!0}function Hn(ot,Ke,je){const et={};for(const qe in ot)Object.prototype.hasOwnProperty.call(ot,qe)&&(et[qe]=Ke.call(je,ot[qe],qe,ot));return et}function Gi(ot,Ke){if(ot===Ke)return!0;const je=Object.keys(ot),et=Object.keys(Ke);for(const qe of je){if(!et.includes(qe))return!1;const Kt=ot[qe],fn=Ke[qe];if(Ei(Kt)&&Ei(fn)){if(!Gi(Kt,fn))return!1}else if(Kt!==fn)return!1}for(const qe of et)if(!je.includes(qe))return!1;return!0}function Ei(ot){return null!==ot&&"object"==typeof ot}function zi(ot){const Ke=[];for(const[je,et]of Object.entries(ot))Array.isArray(et)?et.forEach(qe=>{Ke.push(encodeURIComponent(je)+"="+encodeURIComponent(qe))}):Ke.push(encodeURIComponent(je)+"="+encodeURIComponent(et));return Ke.length?"&"+Ke.join("&"):""}function ai(ot){const Ke={};return ot.replace(/^\?/,"").split("&").forEach(et=>{if(et){const[qe,Kt]=et.split("=");Ke[decodeURIComponent(qe)]=decodeURIComponent(Kt)}}),Ke}function Hi(ot){const Ke=ot.indexOf("?");if(!Ke)return"";const je=ot.indexOf("#",Ke);return ot.substring(Ke,je>0?je:void 0)}class Li{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ke=1;Ke<this.blockSize;++Ke)this.pad_[Ke]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ke,je){je||(je=0);const et=this.W_;if("string"==typeof Ke)for(let mt=0;mt<16;mt++)et[mt]=Ke.charCodeAt(je)<<24|Ke.charCodeAt(je+1)<<16|Ke.charCodeAt(je+2)<<8|Ke.charCodeAt(je+3),je+=4;else for(let mt=0;mt<16;mt++)et[mt]=Ke[je]<<24|Ke[je+1]<<16|Ke[je+2]<<8|Ke[je+3],je+=4;for(let mt=16;mt<80;mt++){const ze=et[mt-3]^et[mt-8]^et[mt-14]^et[mt-16];et[mt]=4294967295&(ze<<1|ze>>>31)}let Ji,kr,qe=this.chain_[0],Kt=this.chain_[1],fn=this.chain_[2],xn=this.chain_[3],Bi=this.chain_[4];for(let mt=0;mt<80;mt++){mt<40?mt<20?(Ji=xn^Kt&(fn^xn),kr=1518500249):(Ji=Kt^fn^xn,kr=1859775393):mt<60?(Ji=Kt&fn|xn&(Kt|fn),kr=2400959708):(Ji=Kt^fn^xn,kr=3395469782);const ze=(qe<<5|qe>>>27)+Ji+Bi+kr+et[mt]&4294967295;Bi=xn,xn=fn,fn=4294967295&(Kt<<30|Kt>>>2),Kt=qe,qe=ze}this.chain_[0]=this.chain_[0]+qe&4294967295,this.chain_[1]=this.chain_[1]+Kt&4294967295,this.chain_[2]=this.chain_[2]+fn&4294967295,this.chain_[3]=this.chain_[3]+xn&4294967295,this.chain_[4]=this.chain_[4]+Bi&4294967295}update(Ke,je){if(null==Ke)return;void 0===je&&(je=Ke.length);const et=je-this.blockSize;let qe=0;const Kt=this.buf_;let fn=this.inbuf_;for(;qe<je;){if(0===fn)for(;qe<=et;)this.compress_(Ke,qe),qe+=this.blockSize;if("string"==typeof Ke){for(;qe<je;)if(Kt[fn]=Ke.charCodeAt(qe),++fn,++qe,fn===this.blockSize){this.compress_(Kt),fn=0;break}}else for(;qe<je;)if(Kt[fn]=Ke[qe],++fn,++qe,fn===this.blockSize){this.compress_(Kt),fn=0;break}}this.inbuf_=fn,this.total_+=je}digest(){const Ke=[];let je=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let qe=this.blockSize-1;qe>=56;qe--)this.buf_[qe]=255&je,je/=256;this.compress_(this.buf_);let et=0;for(let qe=0;qe<5;qe++)for(let Kt=24;Kt>=0;Kt-=8)Ke[et]=this.chain_[qe]>>Kt&255,++et;return Ke}}function vi(ot,Ke){const je=new Qt(ot,Ke);return je.subscribe.bind(je)}class Qt{constructor(Ke,je){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=je,this.task.then(()=>{Ke(this)}).catch(et=>{this.error(et)})}next(Ke){this.forEachObserver(je=>{je.next(Ke)})}error(Ke){this.forEachObserver(je=>{je.error(Ke)}),this.close(Ke)}complete(){this.forEachObserver(Ke=>{Ke.complete()}),this.close()}subscribe(Ke,je,et){let qe;if(void 0===Ke&&void 0===je&&void 0===et)throw new Error("Missing Observer.");qe=function Vi(ot,Ke){if("object"!=typeof ot||null===ot)return!1;for(const je of Ke)if(je in ot&&"function"==typeof ot[je])return!0;return!1}(Ke,["next","error","complete"])?Ke:{next:Ke,error:je,complete:et},void 0===qe.next&&(qe.next=Yi),void 0===qe.error&&(qe.error=Yi),void 0===qe.complete&&(qe.complete=Yi);const Kt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?qe.error(this.finalError):qe.complete()}catch{}}),this.observers.push(qe),Kt}unsubscribeOne(Ke){void 0===this.observers||void 0===this.observers[Ke]||(delete this.observers[Ke],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ke){if(!this.finalized)for(let je=0;je<this.observers.length;je++)this.sendOne(je,Ke)}sendOne(Ke,je){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ke])try{je(this.observers[Ke])}catch(et){typeof console<"u"&&console.error&&console.error(et)}})}close(Ke){this.finalized||(this.finalized=!0,void 0!==Ke&&(this.finalError=Ke),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yi(){}const Kr=function(ot,Ke,je,et){let qe;if(et<Ke?qe="at least "+Ke:et>je&&(qe=0===je?"none":"no more than "+je),qe)throw new Error(ot+" failed: Was called with "+et+(1===et?" argument.":" arguments.")+" Expects "+qe+".")};function sr(ot,Ke){return`${ot} failed: ${Ke} argument `}function _r(ot,Ke,je,et){if((!et||je)&&"function"!=typeof je)throw new Error(sr(ot,Ke)+"must be a valid function.")}function Qi(ot,Ke,je,et){if((!et||je)&&("object"!=typeof je||null===je))throw new Error(sr(ot,Ke)+"must be a valid context object.")}const zn=function(ot){const Ke=[];let je=0;for(let et=0;et<ot.length;et++){let qe=ot.charCodeAt(et);if(qe>=55296&&qe<=56319){const Kt=qe-55296;et++,a(et<ot.length,"Surrogate pair missing trail surrogate."),qe=65536+(Kt<<10)+(ot.charCodeAt(et)-56320)}qe<128?Ke[je++]=qe:qe<2048?(Ke[je++]=qe>>6|192,Ke[je++]=63&qe|128):qe<65536?(Ke[je++]=qe>>12|224,Ke[je++]=qe>>6&63|128,Ke[je++]=63&qe|128):(Ke[je++]=qe>>18|240,Ke[je++]=qe>>12&63|128,Ke[je++]=qe>>6&63|128,Ke[je++]=63&qe|128)}return Ke},$n=function(ot){let Ke=0;for(let je=0;je<ot.length;je++){const et=ot.charCodeAt(je);et<128?Ke++:et<2048?Ke+=2:et>=55296&&et<=56319?(Ke+=4,je++):Ke+=3}return Ke};function or(ot,Ke=1e3,je=2){const et=Ke*Math.pow(je,ot),qe=Math.round(.5*et*(Math.random()-.5)*2);return Math.min(144e5,et+qe)}function qn(ot){return ot&&ot._delegate?ot._delegate:ot}},5361:(In,Et,K)=>{K.r(Et),K.d(Et,{ComponentsModule:()=>La});var m=K(6895),a=K(4650),re=K(7340);let Ee=(()=>{class L{static addClass(p,M){p.classList?p.classList.add(M):p.className+=" "+M}static addMultipleClasses(p,M){if(p.classList){let ie=M.trim().split(" ");for(let ce=0;ce<ie.length;ce++)p.classList.add(ie[ce])}else{let ie=M.split(" ");for(let ce=0;ce<ie.length;ce++)p.className+=" "+ie[ce]}}static removeClass(p,M){p.classList?p.classList.remove(M):p.className=p.className.replace(new RegExp("(^|\\b)"+M.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(p,M){return p.classList?p.classList.contains(M):new RegExp("(^| )"+M+"( |$)","gi").test(p.className)}static siblings(p){return Array.prototype.filter.call(p.parentNode.children,function(M){return M!==p})}static find(p,M){return Array.from(p.querySelectorAll(M))}static findSingle(p,M){return p?p.querySelector(M):null}static index(p){let M=p.parentNode.childNodes,ie=0;for(var ce=0;ce<M.length;ce++){if(M[ce]==p)return ie;1==M[ce].nodeType&&ie++}return-1}static indexWithinGroup(p,M){let ie=p.parentNode?p.parentNode.childNodes:[],ce=0;for(var lt=0;lt<ie.length;lt++){if(ie[lt]==p)return ce;ie[lt].attributes&&ie[lt].attributes[M]&&1==ie[lt].nodeType&&ce++}return-1}static relativePosition(p,M){let ie=p.offsetParent?{width:p.offsetWidth,height:p.offsetHeight}:this.getHiddenElementDimensions(p);const ce=M.offsetHeight,lt=M.getBoundingClientRect(),Ht=this.getViewport();let Rn,wn;lt.top+ce+ie.height>Ht.height?(Rn=-1*ie.height,p.style.transformOrigin="bottom",lt.top+Rn<0&&(Rn=-1*lt.top)):(Rn=ce,p.style.transformOrigin="top"),wn=ie.width>Ht.width?-1*lt.left:lt.left+ie.width>Ht.width?-1*(lt.left+ie.width-Ht.width):0,p.style.top=Rn+"px",p.style.left=wn+"px"}static absolutePosition(p,M){let mi,Ss,ie=p.offsetParent?{width:p.offsetWidth,height:p.offsetHeight}:this.getHiddenElementDimensions(p),ce=ie.height,lt=ie.width,Ht=M.offsetHeight,Rn=M.offsetWidth,wn=M.getBoundingClientRect(),Mn=this.getWindowScrollTop(),pr=this.getWindowScrollLeft(),qr=this.getViewport();wn.top+Ht+ce>qr.height?(mi=wn.top+Mn-ce,p.style.transformOrigin="bottom",mi<0&&(mi=Mn)):(mi=Ht+wn.top+Mn,p.style.transformOrigin="top"),Ss=wn.left+lt>qr.width?Math.max(0,wn.left+pr+Rn-lt):wn.left+pr,p.style.top=mi+"px",p.style.left=Ss+"px"}static getParents(p,M=[]){return null===p.parentNode?M:this.getParents(p.parentNode,M.concat([p.parentNode]))}static getScrollableParents(p){let M=[];if(p){let ie=this.getParents(p);const ce=/(auto|scroll)/,lt=Ht=>{let Rn=window.getComputedStyle(Ht,null);return ce.test(Rn.getPropertyValue("overflow"))||ce.test(Rn.getPropertyValue("overflowX"))||ce.test(Rn.getPropertyValue("overflowY"))};for(let Ht of ie){let Rn=1===Ht.nodeType&&Ht.dataset.scrollselectors;if(Rn){let wn=Rn.split(",");for(let Mn of wn){let pr=this.findSingle(Ht,Mn);pr&&lt(pr)&&M.push(pr)}}9!==Ht.nodeType&&lt(Ht)&&M.push(Ht)}}return M}static getHiddenElementOuterHeight(p){p.style.visibility="hidden",p.style.display="block";let M=p.offsetHeight;return p.style.display="none",p.style.visibility="visible",M}static getHiddenElementOuterWidth(p){p.style.visibility="hidden",p.style.display="block";let M=p.offsetWidth;return p.style.display="none",p.style.visibility="visible",M}static getHiddenElementDimensions(p){let M={};return p.style.visibility="hidden",p.style.display="block",M.width=p.offsetWidth,M.height=p.offsetHeight,p.style.display="none",p.style.visibility="visible",M}static scrollInView(p,M){let ie=getComputedStyle(p).getPropertyValue("borderTopWidth"),ce=ie?parseFloat(ie):0,lt=getComputedStyle(p).getPropertyValue("paddingTop"),Ht=lt?parseFloat(lt):0,Rn=p.getBoundingClientRect(),Mn=M.getBoundingClientRect().top+document.body.scrollTop-(Rn.top+document.body.scrollTop)-ce-Ht,pr=p.scrollTop,qr=p.clientHeight,mi=this.getOuterHeight(M);Mn<0?p.scrollTop=pr+Mn:Mn+mi>qr&&(p.scrollTop=pr+Mn-qr+mi)}static fadeIn(p,M){p.style.opacity=0;let ie=+new Date,ce=0,lt=function(){ce=+p.style.opacity.replace(",",".")+((new Date).getTime()-ie)/M,p.style.opacity=ce,ie=+new Date,+ce<1&&(window.requestAnimationFrame&&requestAnimationFrame(lt)||setTimeout(lt,16))};lt()}static fadeOut(p,M){var ie=1,Ht=50/M;let Rn=setInterval(()=>{(ie-=Ht)<=0&&(ie=0,clearInterval(Rn)),p.style.opacity=ie},50)}static getWindowScrollTop(){let p=document.documentElement;return(window.pageYOffset||p.scrollTop)-(p.clientTop||0)}static getWindowScrollLeft(){let p=document.documentElement;return(window.pageXOffset||p.scrollLeft)-(p.clientLeft||0)}static matches(p,M){var ie=Element.prototype;return(ie.matches||ie.webkitMatchesSelector||ie.mozMatchesSelector||ie.msMatchesSelector||function(lt){return-1!==[].indexOf.call(document.querySelectorAll(lt),this)}).call(p,M)}static getOuterWidth(p,M){let ie=p.offsetWidth;if(M){let ce=getComputedStyle(p);ie+=parseFloat(ce.marginLeft)+parseFloat(ce.marginRight)}return ie}static getHorizontalPadding(p){let M=getComputedStyle(p);return parseFloat(M.paddingLeft)+parseFloat(M.paddingRight)}static getHorizontalMargin(p){let M=getComputedStyle(p);return parseFloat(M.marginLeft)+parseFloat(M.marginRight)}static innerWidth(p){let M=p.offsetWidth,ie=getComputedStyle(p);return M+=parseFloat(ie.paddingLeft)+parseFloat(ie.paddingRight),M}static width(p){let M=p.offsetWidth,ie=getComputedStyle(p);return M-=parseFloat(ie.paddingLeft)+parseFloat(ie.paddingRight),M}static getInnerHeight(p){let M=p.offsetHeight,ie=getComputedStyle(p);return M+=parseFloat(ie.paddingTop)+parseFloat(ie.paddingBottom),M}static getOuterHeight(p,M){let ie=p.offsetHeight;if(M){let ce=getComputedStyle(p);ie+=parseFloat(ce.marginTop)+parseFloat(ce.marginBottom)}return ie}static getHeight(p){let M=p.offsetHeight,ie=getComputedStyle(p);return M-=parseFloat(ie.paddingTop)+parseFloat(ie.paddingBottom)+parseFloat(ie.borderTopWidth)+parseFloat(ie.borderBottomWidth),M}static getWidth(p){let M=p.offsetWidth,ie=getComputedStyle(p);return M-=parseFloat(ie.paddingLeft)+parseFloat(ie.paddingRight)+parseFloat(ie.borderLeftWidth)+parseFloat(ie.borderRightWidth),M}static getViewport(){let p=window,M=document,ie=M.documentElement,ce=M.getElementsByTagName("body")[0];return{width:p.innerWidth||ie.clientWidth||ce.clientWidth,height:p.innerHeight||ie.clientHeight||ce.clientHeight}}static getOffset(p){var M=p.getBoundingClientRect();return{top:M.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:M.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(p,M){let ie=p.parentNode;if(!ie)throw"Can't replace element";return ie.replaceChild(M,p)}static getUserAgent(){return navigator.userAgent}static isIE(){var p=window.navigator.userAgent;return p.indexOf("MSIE ")>0||(p.indexOf("Trident/")>0?(p.indexOf("rv:"),!0):p.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(p,M){if(this.isElement(M))M.appendChild(p);else{if(!M.el||!M.el.nativeElement)throw"Cannot append "+M+" to "+p;M.el.nativeElement.appendChild(p)}}static removeChild(p,M){if(this.isElement(M))M.removeChild(p);else{if(!M.el||!M.el.nativeElement)throw"Cannot remove "+p+" from "+M;M.el.nativeElement.removeChild(p)}}static removeElement(p){"remove"in Element.prototype?p.remove():p.parentNode.removeChild(p)}static isElement(p){return"object"==typeof HTMLElement?p instanceof HTMLElement:p&&"object"==typeof p&&null!==p&&1===p.nodeType&&"string"==typeof p.nodeName}static calculateScrollbarWidth(p){if(p){let M=getComputedStyle(p);return p.offsetWidth-p.clientWidth-parseFloat(M.borderLeftWidth)-parseFloat(M.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let M=document.createElement("div");M.className="p-scrollbar-measure",document.body.appendChild(M);let ie=M.offsetWidth-M.clientWidth;return document.body.removeChild(M),this.calculatedScrollbarWidth=ie,ie}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let p=document.createElement("div");p.className="p-scrollbar-measure",document.body.appendChild(p);let M=p.offsetHeight-p.clientHeight;return document.body.removeChild(p),this.calculatedScrollbarWidth=M,M}static invokeElementMethod(p,M,ie){p[M].apply(p,ie)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let p=this.resolveUserAgent();this.browser={},p.browser&&(this.browser[p.browser]=!0,this.browser.version=p.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let p=navigator.userAgent.toLowerCase(),M=/(chrome)[ \/]([\w.]+)/.exec(p)||/(webkit)[ \/]([\w.]+)/.exec(p)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(p)||/(msie) ([\w.]+)/.exec(p)||p.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(p)||[];return{browser:M[1]||"",version:M[2]||"0"}}static isInteger(p){return Number.isInteger?Number.isInteger(p):"number"==typeof p&&isFinite(p)&&Math.floor(p)===p}static isHidden(p){return null===p.offsetParent}static getFocusableElements(p){let M=L.find(p,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),ie=[];for(let ce of M)"none"!=getComputedStyle(ce).display&&"hidden"!=getComputedStyle(ce).visibility&&ie.push(ce);return ie}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return L.zindex=1e3,L.calculatedScrollbarWidth=null,L.calculatedScrollbarHeight=null,L})();class We{constructor(we,p=(()=>{})){this.element=we,this.listener=p}bindScrollListener(){this.scrollableParents=Ee.getScrollableParents(this.element);for(let we=0;we<this.scrollableParents.length;we++)this.scrollableParents[we].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let we=0;we<this.scrollableParents.length;we++)this.scrollableParents[we].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}var Ae=K(805);let Re=(()=>{class L{constructor(p,M,ie){this.el=p,this.zone=M,this.config=ie}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(p){let M=this.getInk();if(!M||"none"===getComputedStyle(M,null).display)return;if(Ee.removeClass(M,"p-ink-active"),!Ee.getHeight(M)&&!Ee.getWidth(M)){let Ht=Math.max(Ee.getOuterWidth(this.el.nativeElement),Ee.getOuterHeight(this.el.nativeElement));M.style.height=Ht+"px",M.style.width=Ht+"px"}let ie=Ee.getOffset(this.el.nativeElement),ce=p.pageX-ie.left+document.body.scrollTop-Ee.getWidth(M)/2,lt=p.pageY-ie.top+document.body.scrollLeft-Ee.getHeight(M)/2;M.style.top=lt+"px",M.style.left=ce+"px",Ee.addClass(M,"p-ink-active")}getInk(){for(let p=0;p<this.el.nativeElement.children.length;p++)if(-1!==this.el.nativeElement.children[p].className.indexOf("p-ink"))return this.el.nativeElement.children[p];return null}resetInk(){let p=this.getInk();p&&Ee.removeClass(p,"p-ink-active")}onAnimationEnd(p){Ee.removeClass(p.currentTarget,"p-ink-active")}create(){let p=document.createElement("span");p.className="p-ink",this.el.nativeElement.appendChild(p),this.animationListener=this.onAnimationEnd.bind(this),p.addEventListener("animationend",this.animationListener)}remove(){let p=this.getInk();p&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),p.removeEventListener("animationend",this.animationListener),Ee.removeElement(p))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(Ae.b4,8))},L.\u0275dir=a.lG2({type:L,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),L})(),xe=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez]}),L})();(0,re.oQ)([(0,re.oB)({transform:"{{transform}}",opacity:0}),(0,re.jt)("{{transition}}")]),(0,re.oQ)([(0,re.jt)("{{transition}}",(0,re.oB)({transform:"{{transform}}",opacity:0}))]);let rt=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez,xe]}),L})();var qt=K(1211),Be=K(4006),ve=K(773),nt=K(1740);let yt=(()=>{class L{constructor(p){this.el=p,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,Ee.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let p=document.createElement("span");this.icon&&!this.label&&p.setAttribute("aria-hidden","true"),p.className="p-button-label",this.label?p.appendChild(document.createTextNode(this.label)):p.innerHTML="&nbsp;",this.el.nativeElement.appendChild(p),this.initialized=!0}getStyleClass(){let p="p-button p-component";return this.icon&&!this.label&&(p+=" p-button-icon-only"),this.loading&&(p+=" p-disabled p-button-loading",!this.icon&&this.label&&(p+=" p-button-loading-label-only")),p}setStyleClass(){let p=this.getStyleClass();this.el.nativeElement.className=p+" "+this._initialStyleClass}createIconEl(){let p=document.createElement("span");p.className="p-button-icon",p.setAttribute("aria-hidden","true");let M=this.label?"p-button-icon-"+this.iconPos:null;M&&Ee.addClass(p,M);let ie=this.getIconClass();ie&&Ee.addMultipleClasses(p,ie);let ce=Ee.findSingle(this.el.nativeElement,".p-button-label");ce?this.el.nativeElement.insertBefore(p,ce):this.el.nativeElement.appendChild(p)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let p=Ee.findSingle(this.el.nativeElement,".p-button-icon");p?p.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let p=Ee.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(p)}get label(){return this._label}set label(p){this._label=p,this.initialized&&(Ee.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(p){this._icon=p,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(p){this._loading=p,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(a.SBq))},L.\u0275dir=a.lG2({type:L,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),L})(),on=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez,xe]}),L})();function pn(L,we){1&L&&a.GkF(0)}function On(L,we){if(1&L&&(a.TgZ(0,"div",8),a.Hsn(1,1),a.YNc(2,pn,1,0,"ng-container",6),a.qZA()),2&L){const p=a.oxw();a.xp6(2),a.Q6J("ngTemplateOutlet",p.headerTemplate)}}function Nn(L,we){1&L&&a.GkF(0)}function $t(L,we){if(1&L&&(a.TgZ(0,"div",9),a._uU(1),a.YNc(2,Nn,1,0,"ng-container",6),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.hij(" ",p.header," "),a.xp6(1),a.Q6J("ngTemplateOutlet",p.titleTemplate)}}function ci(L,we){1&L&&a.GkF(0)}function Bn(L,we){if(1&L&&(a.TgZ(0,"div",10),a._uU(1),a.YNc(2,ci,1,0,"ng-container",6),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.hij(" ",p.subheader," "),a.xp6(1),a.Q6J("ngTemplateOutlet",p.subtitleTemplate)}}function St(L,we){1&L&&a.GkF(0)}function Vt(L,we){1&L&&a.GkF(0)}function Ue(L,we){if(1&L&&(a.TgZ(0,"div",11),a.Hsn(1,2),a.YNc(2,Vt,1,0,"ng-container",6),a.qZA()),2&L){const p=a.oxw();a.xp6(2),a.Q6J("ngTemplateOutlet",p.footerTemplate)}}const _t=["*",[["p-header"]],[["p-footer"]]],ln=["*","p-header","p-footer"];let Hn=(()=>{class L{constructor(p){this.el=p}ngAfterContentInit(){this.templates.forEach(p=>{switch(p.getType()){case"header":this.headerTemplate=p.template;break;case"title":this.titleTemplate=p.template;break;case"subtitle":this.subtitleTemplate=p.template;break;case"content":default:this.contentTemplate=p.template;break;case"footer":this.footerTemplate=p.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(a.SBq))},L.\u0275cmp=a.Xpm({type:L,selectors:[["p-card"]],contentQueries:function(p,M,ie){if(1&p&&(a.Suo(ie,Ae.h4,5),a.Suo(ie,Ae.$_,5),a.Suo(ie,Ae.jx,4)),2&p){let ce;a.iGM(ce=a.CRH())&&(M.headerFacet=ce.first),a.iGM(ce=a.CRH())&&(M.footerFacet=ce.first),a.iGM(ce=a.CRH())&&(M.templates=ce)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:ln,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(p,M){1&p&&(a.F$t(_t),a.TgZ(0,"div",0),a.YNc(1,On,3,1,"div",1),a.TgZ(2,"div",2),a.YNc(3,$t,3,2,"div",3),a.YNc(4,Bn,3,2,"div",4),a.TgZ(5,"div",5),a.Hsn(6),a.YNc(7,St,1,0,"ng-container",6),a.qZA(),a.YNc(8,Ue,3,1,"div",7),a.qZA()()),2&p&&(a.Tol(M.styleClass),a.Q6J("ngClass","p-card p-component")("ngStyle",M.style),a.xp6(1),a.Q6J("ngIf",M.headerFacet||M.headerTemplate),a.xp6(2),a.Q6J("ngIf",M.header||M.titleTemplate),a.xp6(1),a.Q6J("ngIf",M.subheader||M.subtitleTemplate),a.xp6(3),a.Q6J("ngTemplateOutlet",M.contentTemplate),a.xp6(1),a.Q6J("ngIf",M.footerFacet||M.footerTemplate))},dependencies:[m.mk,m.O5,m.tP,m.PC],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),L})(),Gi=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez,Ae.m8]}),L})();function Ei(L,we){1&L&&(a.TgZ(0,"span",19),a._uU(1,"Email is required"),a.qZA())}function bi(L,we){1&L&&(a.TgZ(0,"div",19),a._uU(1,"please enter valid Email"),a.qZA())}function zi(L,we){1&L&&(a.TgZ(0,"span",19),a._uU(1,"Password is required"),a.qZA())}function ai(L,we){1&L&&(a.TgZ(0,"div",19),a._uU(1,"please enter valid Password"),a.qZA())}const Hi=function(L){return{"is-invalid":L}};let Li=(()=>{class L{constructor(p,M){this.authService=p,this.fromBuilder=M,this.submitted=!1}ngOnInit(){this.registerForm=this.fromBuilder.group({email:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],password:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z0-9._%+-]")]]})}get f(){return this.registerForm.controls}Signin(){if(this.submitted=!0,this.registerForm.invalid)for(const p of Object.keys(this.registerForm.controls))this.registerForm.controls[p].markAsTouched();else this.authService.SignIn(this.registerForm.value.email,this.registerForm.value.password).then(p=>{p&&window.alert("signin success")}).catch(p=>{window.alert("Error"+p)})}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(ve.e),a.Y36(Be.qu))},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-sign-in"]],decls:47,vars:11,consts:[[1,"main"],[3,"formGroup","ngSubmit"],[1,"form-group"],["pButton","","type","button","label","SignIn with Google",1,"p-button-danger",3,"click"],[1,"pi","pi-google"],[1,"or"],[1,"p-input-icon-left"],[1,"pi","pi-envelope"],["type","text","pInputText","","placeholder","email","formControlName","email",1,"form-control",3,"ngClass"],["style","color: red;",4,"ngIf"],[1,"pi","pi-unlock"],["type","text","pInputText","","placeholder","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"form-conrol"],[1,"forgotPassword"],["routerLink","/forgot-password",1,"p-float-label"],["type","submit ",1,"btn","btn-primary"],[1,"redirectToLogin"],[1,"p-float-label"],["routerLink","/sign-up",1,"redirect"],[2,"color","red"]],template:function(p,M){1&p&&(a.TgZ(0,"div",0)(1,"form",1),a.NdJ("ngSubmit",function(){return M.Signin()}),a.TgZ(2,"p-card")(3,"div")(4,"h1"),a._uU(5,"Sign In"),a.qZA()(),a.TgZ(6,"div",2)(7,"button",3),a.NdJ("click",function(){return M.authService.GoogleAuth()}),a._UZ(8,"i",4),a._uU(9,"\xa0"),a.qZA(),a._uU(10,"\xa0 "),a.qZA(),a._UZ(11,"br"),a.TgZ(12,"div",5)(13,"h3"),a._uU(14,"-OR-"),a.qZA()(),a._UZ(15,"br"),a.TgZ(16,"div",2)(17,"span",6),a._UZ(18,"i",7)(19,"input",8),a.qZA(),a._UZ(20,"br"),a.YNc(21,Ei,2,0,"span",9),a.YNc(22,bi,2,0,"div",9),a.qZA(),a._UZ(23,"br"),a.TgZ(24,"div",2)(25,"span",6),a._UZ(26,"i",10)(27,"input",11),a.qZA(),a._UZ(28,"br"),a.YNc(29,zi,2,0,"span",9),a.YNc(30,ai,2,0,"div",9),a.qZA(),a._UZ(31,"br"),a.TgZ(32,"div",12)(33,"div",13)(34,"span",14),a._uU(35,"Forgot Password?"),a.qZA()()(),a._UZ(36,"br"),a.TgZ(37,"div")(38,"button",15),a._uU(39,"SignIn"),a.qZA()(),a._UZ(40,"br"),a.TgZ(41,"div",16)(42,"span",17),a._uU(43,"Don't have an account?"),a.TgZ(44,"span",18),a._uU(45," Sign Up"),a.qZA()()(),a._UZ(46,"br"),a.qZA()()()),2&p&&(a.xp6(1),a.Q6J("formGroup",M.registerForm),a.xp6(18),a.Q6J("ngClass",a.VKq(7,Hi,M.submitted&&M.f.email.errors)),a.xp6(2),a.Q6J("ngIf",!M.f.email.valid&&M.f.email.touched&&!(null!=M.f.email.errors&&M.f.email.errors.pattern)),a.xp6(1),a.Q6J("ngIf",null==M.f.email.errors?null:M.f.email.errors.pattern),a.xp6(5),a.Q6J("ngClass",a.VKq(9,Hi,M.submitted&&M.f.password.errors)),a.xp6(2),a.Q6J("ngIf",!M.f.password.valid&&M.f.password.touched&&!(null!=M.f.password.errors&&M.f.password.errors.pattern)),a.xp6(1),a.Q6J("ngIf",null==M.f.password.errors?null:M.f.password.errors.pattern))},dependencies:[m.mk,m.O5,qt.rH,nt.o,yt,Hn,Be._Y,Be.Fj,Be.JJ,Be.JL,Be.sg,Be.u],styles:[".main[_ngcontent-%COMP%]{height:900px;width:600px;margin-top:150px;margin-left:auto;margin-right:auto;display:block}.main[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;margin-left:auto;margin-right:auto;margin-top:20px}.main[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:30px;margin-left:200px;font-family:poppins;font-size:35px;font-weight:700}.main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:500px;text-align:center}.forgotPassword[_ngcontent-%COMP%]{margin-left:380px;color:#076199}.redirectToLogin[_ngcontent-%COMP%]{margin-top:30px;margin-left:50px}.redirect[_ngcontent-%COMP%]{color:#076199}.main[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.main[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:center;margin-top:1px}"]}),L})();function vi(L,we){1&L&&(a.TgZ(0,"span",22),a._uU(1,"Name is required"),a.qZA())}function Qt(L,we){1&L&&(a.TgZ(0,"div",22),a._uU(1,"Only alphabate allow "),a.qZA())}function Ni(L,we){1&L&&(a.TgZ(0,"div"),a._uU(1,"Name is required"),a.qZA())}function Vi(L,we){if(1&L&&(a.TgZ(0,"div",23),a.YNc(1,Ni,2,0,"div",24),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.f.displayName.errors.required)}}function Yi(L,we){1&L&&(a.TgZ(0,"span",22),a._uU(1,"Email is required"),a.qZA())}function Kr(L,we){1&L&&(a.TgZ(0,"div",22),a._uU(1,"please enter valid Email"),a.qZA())}function sr(L,we){1&L&&(a.TgZ(0,"span",22),a._uU(1,"Password is required"),a.qZA())}function Tr(L,we){1&L&&(a.TgZ(0,"div",22),a._uU(1,"please enter strong password "),a.qZA())}function _r(L,we){1&L&&(a.TgZ(0,"span",22),a._uU(1,"Mobile Number is required"),a.qZA())}function Qi(L,we){1&L&&(a.TgZ(0,"div",22),a._uU(1,"please enter 10 number "),a.qZA())}function zn(L,we){1&L&&(a.TgZ(0,"div"),a._uU(1,"Mobile Number is required"),a.qZA())}function $n(L,we){if(1&L&&(a.TgZ(0,"div",23),a.YNc(1,zn,2,0,"div",24),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.f.mobile.errors.required)}}function fi(L,we){1&L&&(a.TgZ(0,"span",22),a._uU(1,"photoURL is required"),a.qZA())}function Dr(L,we){1&L&&(a.TgZ(0,"div",22),a._uU(1,"please enter valid Password"),a.qZA())}const An=function(L){return{"is-invalid":L}};let Ui=(()=>{class L{constructor(p,M){this.authService=p,this.formBuilder=M,this.submitted=!1}ngOnInit(){this.registerForm=this.formBuilder.group({displayName:["",[Be.kI.required,Be.kI.pattern("[a-zA-Z ]*")]],email:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],photoURL:["",Be.kI.required],password:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z0-9._%+-]")]],mobile:["",[Be.kI.required,Be.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]]})}get f(){return this.registerForm.controls}onSubmit(){if(this.submitted=!0,this.registerForm.invalid){for(const M of Object.keys(this.registerForm.controls))this.registerForm.controls[M].markAsTouched();return}this.data=this.registerForm.value,console.log(this.data);let p=Math.floor(1e5+9e5*Math.random());console.log(p),this.data.userId=p,this.data.emailVerified=!0,this.authService.signUp(this.registerForm.value.email,this.registerForm.value.password).then(M=>{console.log(M),window.alert("Data saved")}).catch(M=>{window.alert(M)})}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(ve.e),a.Y36(Be.qu))},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-sign-up"]],decls:57,vars:28,consts:[[1,"container"],[1,"main"],[3,"formGroup","ngSubmit"],[1,"card"],[1,"form-group"],[1,"p-input-icon-left"],[1,"pi","pi-user"],["type","text","pInputText","","placeholder","Name","formControlName","displayName",1,"form-control",3,"ngClass"],["style","color: red;",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"pi","pi-envelope"],["type","email","pInputText","","placeholder","Email","formControlName","email",1,"form-control",3,"ngClass"],[1,"pi","pi-unlock"],["type","password","pInputText","","placeholder","Password","formControlName","password",1,"form-control",3,"ngClass"],[1,"pi","pi-mobile"],["type","text","pInputText","","placeholder","mobile Number","formControlName","mobile",1,"form-control",3,"ngClass"],[1,"pi","pi-image",2,"margin-left","2px","margin-right","20px"],["type","file","pInputText","","placeholder","image","formControlName","photoURL",1,"form-control",3,"ngClass"],["type","submit ",1,"btn","btn-danger"],[1,"redirectToLogin"],[1,"p-float-label"],["routerLink","/sign-in",1,"redirect"],[2,"color","red"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(p,M){1&p&&(a.TgZ(0,"div",0)(1,"div",1)(2,"form",2),a.NdJ("ngSubmit",function(){return M.onSubmit()}),a.TgZ(3,"p-card",3)(4,"div")(5,"h1"),a._uU(6,"Sign Up"),a.qZA()(),a.TgZ(7,"div",4)(8,"span",5),a._UZ(9,"i",6)(10,"input",7),a.qZA(),a._UZ(11,"br"),a.YNc(12,vi,2,0,"span",8),a.YNc(13,Qt,2,0,"div",8),a.YNc(14,Vi,2,1,"div",9),a.qZA(),a._UZ(15,"br"),a.TgZ(16,"div",4)(17,"span",5),a._UZ(18,"i",10)(19,"input",11),a.qZA(),a._UZ(20,"br"),a.YNc(21,Yi,2,0,"span",8),a.YNc(22,Kr,2,0,"div",8),a.qZA(),a._UZ(23,"br"),a.TgZ(24,"div",4)(25,"span",5),a._UZ(26,"i",12)(27,"input",13),a.qZA(),a.YNc(28,sr,2,0,"span",8),a.YNc(29,Tr,2,0,"div",8),a.qZA(),a._UZ(30,"br"),a.TgZ(31,"div",4)(32,"span",5),a._UZ(33,"i",14)(34,"input",15),a.qZA(),a._UZ(35,"br"),a.YNc(36,_r,2,0,"span",8),a.YNc(37,Qi,2,0,"div",8),a.YNc(38,$n,2,1,"div",9),a.qZA(),a._UZ(39,"br"),a.TgZ(40,"div",4)(41,"span",5),a._UZ(42,"i",16)(43,"input",17),a.qZA(),a._UZ(44,"br"),a.YNc(45,fi,2,0,"span",8),a.YNc(46,Dr,2,0,"div",8),a.qZA(),a._UZ(47,"br"),a.TgZ(48,"div")(49,"button",18),a._uU(50,"Submit"),a.qZA()(),a._UZ(51,"br"),a.TgZ(52,"div",19)(53,"span",20),a._uU(54,"Already have an account?"),a.TgZ(55,"span",21),a._uU(56," Sign In "),a.qZA()()()()()()()),2&p&&(a.xp6(2),a.Q6J("formGroup",M.registerForm),a.xp6(8),a.Q6J("ngClass",a.VKq(18,An,M.submitted&&M.f.displayName.errors)),a.xp6(2),a.Q6J("ngIf",M.f.displayName.touched&&!M.f.displayName.valid&&!(null!=M.f.displayName.errors&&M.f.displayName.errors.pattern)),a.xp6(1),a.Q6J("ngIf",null==M.f.displayName.errors?null:M.f.displayName.errors.pattern),a.xp6(1),a.Q6J("ngIf",M.submitted&&M.f.displayName.errors),a.xp6(5),a.Q6J("ngClass",a.VKq(20,An,M.submitted&&M.f.email.errors)),a.xp6(2),a.Q6J("ngIf",!M.f.email.valid&&M.f.email.touched&&!(null!=M.f.email.errors&&M.f.email.errors.pattern)),a.xp6(1),a.Q6J("ngIf",null==M.f.email.errors?null:M.f.email.errors.pattern),a.xp6(5),a.Q6J("ngClass",a.VKq(22,An,M.submitted&&M.f.password.errors)),a.xp6(1),a.Q6J("ngIf",M.f.password.touched&&!M.f.password.valid&&!(null!=M.f.password.errors&&M.f.password.errors.pattern)),a.xp6(1),a.Q6J("ngIf",null==M.f.password.errors?null:M.f.password.errors.pattern),a.xp6(5),a.Q6J("ngClass",a.VKq(24,An,M.submitted&&M.f.mobile.errors)),a.xp6(2),a.Q6J("ngIf",M.f.mobile.touched&&!M.f.mobile.valid&&!(null!=M.f.mobile.errors&&M.f.mobile.errors.pattern)),a.xp6(1),a.Q6J("ngIf",null==M.f.mobile.errors?null:M.f.mobile.errors.pattern),a.xp6(1),a.Q6J("ngIf",M.submitted&&M.f.mobile.errors),a.xp6(5),a.Q6J("ngClass",a.VKq(26,An,M.submitted&&M.f.photoURL.errors)),a.xp6(2),a.Q6J("ngIf",!M.f.photoURL.valid&&M.f.photoURL.touched&&!(null!=M.f.photoURL.errors&&M.f.photoURL.errors.pattern)),a.xp6(1),a.Q6J("ngIf",null==M.f.photoURL.errors?null:M.f.photoURL.errors.pattern))},dependencies:[m.mk,m.O5,qt.rH,nt.o,Hn,Be._Y,Be.Fj,Be.JJ,Be.JL,Be.sg,Be.u],styles:[".main[_ngcontent-%COMP%]{margin-top:120px;width:600px;height:1300px;margin-left:auto;margin-right:auto}.main[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;margin-top:20px}.main[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;margin-left:200px;font-family:poppins;font-size:35px;font-weight:700}.main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:500px;font-size:medium;margin-top:20px}.redirect[_ngcontent-%COMP%]{color:#076199;font-family:poppins}.redirectToLogin[_ngcontent-%COMP%]{margin-top:10px;font-family:poppins;text-align:center}.main[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:1px}"]}),L})();function ii(L,we){1&L&&(a.TgZ(0,"span",12),a._uU(1,"Email is required"),a.qZA())}function or(L,we){1&L&&(a.TgZ(0,"div",12),a._uU(1,"please enter valid Email"),a.qZA())}const li=function(L){return{"is-invalid":L}};let gs=(()=>{class L{constructor(p,M){this.authService=p,this.formBuilder=M,this.submitted=!1}ngOnInit(){this.registerForm=this.formBuilder.group({email:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]]})}get f(){return this.registerForm.controls}submit(){if(this.submitted=!0,this.registerForm.invalid)for(const p of Object.keys(this.registerForm.controls))this.registerForm.controls[p].markAsTouched()}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(ve.e),a.Y36(Be.qu))},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-forgot-password"]],decls:26,vars:6,consts:[[1,"main"],[3,"formGroup","ngSubmit"],[1,"heading"],[1,"form-group"],[1,"p-input-icon-left"],[1,"pi","pi-envelope"],["type","text","pInputText","","placeholder","email","formControlName","email",1,"form-control",3,"ngClass"],["style","color: red;",4,"ngIf"],["pButton","","type","submit","label","Submit","value","Reset Password",1,"p-button-primary",3,"click"],[1,"redirectToLogin"],[1,"p-float-label"],["routerLink","/sign-in",1,"redirect"],[2,"color","red"]],template:function(p,M){1&p&&(a.TgZ(0,"div",0)(1,"form",1),a.NdJ("ngSubmit",function(){return M.submit()}),a.TgZ(2,"p-card")(3,"div",2)(4,"h3"),a._uU(5,"Reset password"),a.qZA(),a.TgZ(6,"p"),a._uU(7,"Please enter your email address to request a password reset."),a.qZA()(),a.TgZ(8,"div",3)(9,"span",4),a._UZ(10,"i",5)(11,"input",6),a.qZA(),a._UZ(12,"br"),a.YNc(13,ii,2,0,"span",7),a.YNc(14,or,2,0,"div",7),a.qZA(),a._UZ(15,"br"),a.TgZ(16,"div")(17,"button",8),a.NdJ("click",function(){return M.authService.ForgotPassword(M.registerForm.value.email)}),a.qZA()(),a._UZ(18,"br"),a.TgZ(19,"div")(20,"div",9)(21,"span",10),a._uU(22,"Don't have an account?"),a.TgZ(23,"span",11),a._uU(24," Sign In"),a.qZA()()(),a._UZ(25,"br"),a.qZA()()()()),2&p&&(a.xp6(1),a.Q6J("formGroup",M.registerForm),a.xp6(10),a.Q6J("ngClass",a.VKq(4,li,M.submitted&&M.f.email.errors)),a.xp6(2),a.Q6J("ngIf",!M.f.email.valid&&M.f.email.touched&&!(null!=M.f.email.errors&&M.f.email.errors.pattern)),a.xp6(1),a.Q6J("ngIf",null==M.f.email.errors?null:M.f.email.errors.pattern))},dependencies:[m.mk,m.O5,qt.rH,nt.o,yt,Hn,Be._Y,Be.Fj,Be.JJ,Be.JL,Be.sg,Be.u],styles:[".main[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;margin-top:20px}.main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:500px;font-size:20px;margin-top:20px}.forgotPassword[_ngcontent-%COMP%]{margin-left:380px;color:#076199}.redirectToLogin[_ngcontent-%COMP%]{margin-left:100px;margin-top:1px}.redirect[_ngcontent-%COMP%]{color:#076199}.main[_ngcontent-%COMP%]{margin-top:150px;height:1000px;width:550px;margin-left:auto;margin-right:auto;display:block}.heading[_ngcontent-%COMP%]{text-align:center}.heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:30px;font-family:poppins;font-size:35px;font-weight:700;margin-top:10px}.heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:poppins;font-size:18px;margin-top:35px}.main[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:1px}"]}),L})();function qn(L,we){if(1&L&&(a.TgZ(0,"div",13)(1,"p",14),a._uU(2,"We have sent a confirmation email to "),a.TgZ(3,"strong"),a._uU(4),a.qZA(),a._uU(5,"."),a.qZA(),a.TgZ(6,"p",15),a._uU(7,"Please check your email and click on the link to verfiy your email address."),a.qZA()()),2&L){const p=we.ngIf;a.xp6(4),a.Oqu(p.email)}}let ot=(()=>{class L{constructor(p){this.authService=p}ngOnInit(){}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(ve.e))},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-verify-email"]],decls:17,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[2,"text-align","center","color","red","font-family","poppins","font-weight","bold","margin-top","100px","font-size","35px"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","../../../assets/images/email.png ","alt","positronX.io Logo",1,"brand-logo",2,"width","260px","height","250px","margin-left","900px","margin-top","20px","margin-bottom","30px"],["class","formGroup",4,"ngIf"],[1,"formGroup",2,"text-align","center"],["type","submit",1,"btn","btnPrimary",2,"font-size","25px","font-family","poppins","color","blue","margin-top","20px",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin",2,"text-align","center","margin-top","20px","font-size","20px","font-family","poppins"],[2,"font-size","20px","font-family","poppins"],["routerLink","/sign-in",1,"redirect",2,"color","rgb(7, 97, 153)","font-size","20px","font-family","poppins"],[1,"formGroup"],[1,"text-center",2,"margin-top","20px","font-size","25px","font-family","poppins"],[1,"text-center",2,"margin-top","20px","font-size","20px","font-family","poppins"]],template:function(p,M){1&p&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a._uU(4,"Thank You for Registering"),a.qZA(),a.TgZ(5,"a",4),a._UZ(6,"img",5),a.qZA(),a.YNc(7,qn,8,1,"div",6),a.TgZ(8,"div",7)(9,"button",8),a.NdJ("click",function(){return M.authService.SendVerificationMail()}),a._UZ(10,"i",9),a._uU(11," Resend Verification Email "),a.qZA()()(),a.TgZ(12,"div",10)(13,"span",11),a._uU(14,"Go back to?"),a.TgZ(15,"span",12),a._uU(16," Sign in"),a.qZA()()()()()),2&p&&(a.xp6(7),a.Q6J("ngIf",M.authService.data))},dependencies:[m.O5,qt.rH]}),L})(),Ke=(()=>{class L{constructor(p){this.authService=p}ngOnInit(){}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(ve.e))},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-dashboard"]],decls:24,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","../../../assets/images/logo.png.crdownload","alt","positronX.io Logo",1,"brand-logo"],[1,"nav-item"],["routerLink","/student-profile",1,"nav-link","active",2,"font-size","20px","color","white","margin-left","600px","margin-bottom","5px"],[1,"pi","pi-user","mt-5",2,"color","red","width","40px","height","30px","font-weight","bold"],["routerLink","/student-add",1,"nav-link","active",2,"font-size","20px","color","white","margin-bottom","5px","margin-left","50px"],[1,"pi","pi-user-plus","mt-5",2,"color","red","width","40px","height","30px","font-weight","bold"],[1,"nav-item",2,"margin-right","50px","font-size","20px","color","white","margin-left","50px","margin-top","20px","list-style","none"],["routerLink","/student-list",1,"nav-link",2,"margin-top","40px"],[1,"pi","pi-list",2,"color","red","width","40px","height","30px","font-weight","bold"],[1,"user-image"],[1,"nav-link",2,"font-size","20px","margin-right","50px","margin-top","35px","color","white",3,"click"],[1,"pi","pi-sign-out",2,"color","red","width","40px","height","30px","font-weight","bold"]],template:function(p,M){1&p&&(a.TgZ(0,"nav",0)(1,"a",1),a._UZ(2,"img",2),a.qZA(),a.TgZ(3,"ul")(4,"li",3)(5,"a",4),a._UZ(6,"i",5),a._uU(7,"User Profile "),a.qZA()()(),a.TgZ(8,"ul")(9,"li",3)(10,"a",6),a._UZ(11,"i",7),a._uU(12,"Add Student "),a.qZA()()(),a.TgZ(13,"ul")(14,"li",8)(15,"a",9),a._UZ(16,"i",10)(17,"span",11),a._uU(18," Student-list "),a.qZA()()(),a.TgZ(19,"ul")(20,"li",3)(21,"a",12),a.NdJ("click",function(){return M.authService.SignOut()}),a._UZ(22,"i",13),a._uU(23,"Log Out "),a.qZA()()()())},dependencies:[qt.yS],styles:[".brand-logo[_ngcontent-%COMP%]{width:80px;height:65px;margin-left:30px;border-radius:5px;margin-top:3px;margin-bottom:3px}"]}),L})(),je=(()=>{class L{constructor(p,M){this.authService=p,this.router=M}canActivate(p,M){return!0!==this.authService.isLoggedIn&&this.router.navigate(["/sign-in"]),!0}}return L.\u0275fac=function(p){return new(p||L)(a.LFG(ve.e),a.LFG(qt.F0))},L.\u0275prov=a.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();var et=K(7185);function qe(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"tr")(1,"th",10),a._uU(2),a.qZA(),a.TgZ(3,"th",10),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td"),a._uU(10),a.qZA(),a.TgZ(11,"td",11)(12,"div")(13,"button",12),a._uU(14,"Edit"),a.qZA(),a._uU(15,"\xa0 "),a.TgZ(16,"button",13),a.NdJ("click",function(){const ce=a.CHM(p).$implicit,lt=a.oxw();return a.KtG(lt.deleteStudent(ce))}),a._uU(17,"Delete"),a.qZA()()()()}if(2&L){const p=we.$implicit,M=we.index;a.xp6(2),a.Oqu(M+1),a.xp6(2),a.Oqu(p.$key),a.xp6(2),a.AsE("",p.firstName," ",p.lastName,""),a.xp6(2),a.Oqu(p.email),a.xp6(2),a.Oqu(p.mobileNumber),a.xp6(3),a.MGl("routerLink","/edit-student/",p.$key,"")}}function fn(L,we){if(1&L&&(a.TgZ(0,"div",1)(1,"div",9)(2,"div",10),a._UZ(3,"img",11),a.TgZ(4,"div",12)(5,"h1",13),a._uU(6,"Wel-Come :- "),a.TgZ(7,"strong"),a._uU(8),a.qZA()(),a.TgZ(9,"p"),a._uU(10,"User ID :- "),a.TgZ(11,"strong"),a._uU(12),a.qZA()(),a.TgZ(13,"p"),a._uU(14,"Email :- "),a.TgZ(15,"strong"),a._uU(16),a.qZA()(),a.TgZ(17,"p"),a._uU(18,"Email Verified :- "),a.TgZ(19,"strong"),a._uU(20),a.qZA()()()()()()),2&L){const p=we.ngIf;a.xp6(3),a.s9C("src",p.photoURL?p.photoURL:"/assets/dummy-user.png",a.LSH),a.s9C("alt",p.displayName),a.xp6(5),a.Oqu(p.displayName?p.displayName:"User"),a.xp6(4),a.Oqu(p.uid),a.xp6(4),a.Oqu(p.email),a.xp6(4),a.Oqu(p.emailVerified)}}function Bi(L,we){1&L&&(a.TgZ(0,"span",16),a._uU(1," First Name is required"),a.qZA())}function Ji(L,we){1&L&&(a.TgZ(0,"div"),a._uU(1,"First Name is required"),a.qZA())}function kr(L,we){if(1&L&&(a.TgZ(0,"div",17),a.YNc(1,Ji,2,0,"div",18),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.f.firstName.errors)}}function mt(L,we){1&L&&(a.TgZ(0,"span",16),a._uU(1," Last Name is required"),a.qZA())}function ze(L,we){1&L&&(a.TgZ(0,"div"),a._uU(1," Last Name is required"),a.qZA())}function Xe(L,we){if(1&L&&(a.TgZ(0,"div",17),a.YNc(1,ze,2,0,"div",18),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.f.lastName.errors)}}function jt(L,we){1&L&&(a.TgZ(0,"span",16),a._uU(1,"Email is required"),a.qZA())}function gn(L,we){1&L&&(a.TgZ(0,"div"),a._uU(1,"email is required"),a.qZA())}function Gn(L,we){if(1&L&&(a.TgZ(0,"div",17),a.YNc(1,gn,2,0,"div",18),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.f.email.errors)}}function Zn(L,we){1&L&&(a.TgZ(0,"span",16),a._uU(1,"Mobile Number is required"),a.qZA())}function Pe(L,we){1&L&&(a.TgZ(0,"div"),a._uU(1,"Mobile Number is required"),a.qZA())}function Le(L,we){if(1&L&&(a.TgZ(0,"div",17),a.YNc(1,Pe,2,0,"div",18),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.f.mobileNumber.errors)}}const Ce=function(L){return{"is-invalid":L}};function Ct(L,we){1&L&&(a.TgZ(0,"span",16),a._uU(1,"only alphabate allow"),a.qZA())}function vn(L,we){1&L&&(a.TgZ(0,"div"),a._uU(1,"Name is required"),a.qZA())}function wi(L,we){if(1&L&&(a.TgZ(0,"div",17),a.YNc(1,vn,2,0,"div",18),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.f.firstName.errors)}}function Di(L,we){1&L&&(a.TgZ(0,"span",16),a._uU(1,"Name is required"),a.qZA())}function dr(L,we){1&L&&(a.TgZ(0,"div"),a._uU(1,"Name is required"),a.qZA())}function yr(L,we){if(1&L&&(a.TgZ(0,"div",17),a.YNc(1,dr,2,0,"div",18),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.f.lastName.errors)}}function bn(L,we){1&L&&(a.TgZ(0,"div"),a._uU(1,"email is required"),a.qZA())}function Ns(L,we){if(1&L&&(a.TgZ(0,"div",17),a.YNc(1,bn,2,0,"div",18),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.f.email.errors)}}function ws(L,we){1&L&&(a.TgZ(0,"span",16),a._uU(1,"Mobile Number is required"),a.qZA())}function na(L,we){1&L&&(a.TgZ(0,"div"),a._uU(1,"Name is required"),a.qZA())}function to(L,we){if(1&L&&(a.TgZ(0,"div",17),a.YNc(1,na,2,0,"div",18),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.f.mobileNumber.errors)}}const Ar=function(L){return{"is-invalid":L}},Ps=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-up",component:Ui},{path:"sign-in",component:Li},{path:"forgot-password",component:gs},{path:"verify-email",component:ot},{path:"dashboard",canActivate:[je],component:Ke},{path:"student-list",component:(()=>{class L{constructor(p,M){this.authService=p,this.toastr=M,this.p=1,this.hideWhenNoStudent=!1,this.noData=!1,this.preLoader=!0,this.users=[]}ngOnInit(){this.dataState(),this.authService.GetStudentsList().snapshotChanges().subscribe(M=>{console.log(M),this.Student=[],M.forEach(ie=>{let ce=ie.payload.toJSON();ce.$key=ie.key,this.Student.push(ce)})})}dataState(){this.authService.GetStudentsList().valueChanges().subscribe(p=>{this.preLoader=!1,p.length<=0?(this.hideWhenNoStudent=!1,this.noData=!0):(this.hideWhenNoStudent=!0,this.noData=!1)})}deleteStudent(p){window.confirm("Are sure you want to delete this student ?")&&(this.authService.DeleteStudent(p.$key),this.toastr.success(p.firstName+" successfully deleted!"))}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(ve.e),a.Y36(et._W))},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-student-list"]],decls:27,vars:1,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["routerLink","/dashboard",1,"btn","btn-primary",2,"margin-right","100px","font-size","20px"],["routerLink","/student-add",1,"btn","btn-success",2,"margin-right","200px","font-size","20px"],[1,"pricing-header","mx-auto"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-center","action-block"],[1,"mr-2","btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(p,M){1&p&&(a.TgZ(0,"div",0)(1,"h2",1),a._uU(2,"Students List"),a.qZA(),a.TgZ(3,"div")(4,"a",2),a._uU(5,"Go Back"),a.qZA(),a.TgZ(6,"a",3),a._uU(7," Add Student "),a.qZA()()(),a.TgZ(8,"div",4)(9,"div",5)(10,"table",6)(11,"thead")(12,"tr")(13,"th",7),a._uU(14,"S.No. "),a.qZA(),a.TgZ(15,"th",7),a._uU(16,"Student Id"),a.qZA(),a.TgZ(17,"th",7),a._uU(18,"Student name"),a.qZA(),a.TgZ(19,"th",7),a._uU(20,"Email"),a.qZA(),a.TgZ(21,"th",7),a._uU(22,"Mobile number"),a.qZA(),a.TgZ(23,"th",8),a._uU(24,"Edit"),a.qZA()()(),a.TgZ(25,"tbody"),a.YNc(26,qe,18,7,"tr",9),a.qZA()()()()),2&p&&(a.xp6(26),a.Q6J("ngForOf",M.Student))},dependencies:[m.sg,qt.rH,qt.yS],styles:["*[_ngcontent-%COMP%]{font-family:poppins;font-weight:700;font-size:15px}.h2[_ngcontent-%COMP%]{margin-left:700px;font-size:50px;font-family:poppins;font-weight:700;color:brown}"]}),L})()},{path:"student-profile",component:(()=>{class L{constructor(p){this.authService=p}ngOnInit(){}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(ve.e))},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-student-profile"]],decls:10,vars:1,consts:[[1,"container"],[1,"row"],[2,"width","500px","height","500px","margin-top","100px","text-align","center"],[1,"col-md-12"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2",2,"color","red","margin-top","20px","font-family","poppins","font-weight","bolder"],["class","row",4,"ngIf"],[1,"col-md-12",2,"color","black","font-family","poppins"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"],[2,"color","blue","font-family","poopins"]],template:function(p,M){1&p&&(a.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"div",3)(4,"main",4)(5,"div",5)(6,"div",6)(7,"h1",7),a._uU(8,"User Profile"),a.qZA()(),a.YNc(9,fn,21,6,"div",8),a.qZA()()()()()()),2&p&&(a.xp6(9),a.Q6J("ngIf",M.authService.data))},dependencies:[m.O5,Hn],styles:[".main[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}"]}),L})()},{path:"student-add",component:(()=>{class L{constructor(p,M,ie,ce){this.authService=p,this.fb=M,this.toastr=ie,this.router=ce,this.submitted=!1}ngOnInit(){this.authService.GetStudentsList(),this.form()}form(){this.studentForm=this.fb.group({firstName:["",[Be.kI.required,Be.kI.pattern("[a-zA-Z ]*")]],email:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],lastName:["",[Be.kI.required,Be.kI.pattern("[a-zA-Z ]*")]],mobileNumber:["",[Be.kI.required,Be.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]]})}get f(){return this.studentForm.controls}ResetForm(){this.studentForm.reset()}submitStudentData(){if(this.submitted=!0,this.studentForm.invalid)for(const p of Object.keys(this.studentForm.controls))this.studentForm.controls[p].markAsTouched();else console.log(this.studentForm.value),this.authService.AddStudent(this.studentForm.value),console.log(this.studentForm.value),this.toastr.success(this.studentForm.controls.firstName.value+" successfully added!"),this.router.navigate(["/student-list"])}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(ve.e),a.Y36(Be.qu),a.Y36(et._W),a.Y36(qt.F0))},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-add-student"]],decls:40,vars:21,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],[1,"heading"],[1,"form-group"],[2,"margin-top","20px"],["type","text","placeholder","Please Enter First Name","formControlName","firstName",1,"form-control",2,"margin-top","10px",3,"ngClass"],["style","color: red;",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Please Enter Last Name","formControlName","lastName",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","text","placeholder","Please Enter Email","formControlName","email",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","text","placeholder","Please Enter Mobile number","formControlName","mobileNumber",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","reset","routerLink","/dashboard",1,"btn","btn-secondary","gap-right"],["type","submit",1,"btn","btn-primary"],[2,"color","red"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(p,M){1&p&&(a.TgZ(0,"div",0)(1,"p-card")(2,"div",1)(3,"div",2)(4,"div",3)(5,"form",4),a.NdJ("ngSubmit",function(){return M.submitStudentData()}),a.TgZ(6,"div",5)(7,"h1"),a._uU(8,"Student Registration"),a.qZA()(),a.TgZ(9,"div",6)(10,"label",7),a._uU(11,"First Name"),a.qZA(),a._UZ(12,"input",8),a.YNc(13,Bi,2,0,"span",9),a.YNc(14,kr,2,1,"div",10),a.qZA(),a.TgZ(15,"div",6)(16,"label",7),a._uU(17,"Last Name"),a.qZA(),a._UZ(18,"input",11),a.YNc(19,mt,2,0,"span",9),a.YNc(20,Xe,2,1,"div",10),a.qZA(),a.TgZ(21,"div",6)(22,"label",7),a._uU(23,"Email"),a.qZA(),a._UZ(24,"input",12),a.YNc(25,jt,2,0,"span",9),a.YNc(26,Gn,2,1,"div",10),a.qZA(),a.TgZ(27,"div",6)(28,"label",7),a._uU(29,"Mobile number"),a.qZA(),a._UZ(30,"input",13),a.YNc(31,Zn,2,0,"span",9),a.YNc(32,Le,2,1,"div",10),a.qZA(),a._UZ(33,"br"),a.TgZ(34,"div")(35,"button",14),a._uU(36," Go Back"),a.qZA(),a._uU(37,"\xa0 "),a.TgZ(38,"button",15),a._uU(39,"Register"),a.qZA()()()()()()()()),2&p&&(a.xp6(5),a.Q6J("formGroup",M.studentForm),a.xp6(7),a.Q6J("ngClass",a.VKq(13,Ce,M.submitted&&M.f.firstName.errors)),a.xp6(1),a.Q6J("ngIf",M.f.firstName.touched&&!M.f.firstName.valid&&!M.f.firstName.errors),a.xp6(1),a.Q6J("ngIf",M.submitted&&M.f.firstName.errors),a.xp6(4),a.Q6J("ngClass",a.VKq(15,Ce,M.submitted&&M.f.lastName.errors)),a.xp6(1),a.Q6J("ngIf",M.f.lastName.touched&&!M.f.lastName.valid&&!M.f.lastName.errors),a.xp6(1),a.Q6J("ngIf",M.submitted&&M.f.lastName.errors),a.xp6(4),a.Q6J("ngClass",a.VKq(17,Ce,M.submitted&&M.f.email.errors)),a.xp6(1),a.Q6J("ngIf",!M.f.email.valid&&M.f.email.touched&&!M.f.email.errors),a.xp6(1),a.Q6J("ngIf",M.submitted&&M.f.email.errors),a.xp6(4),a.Q6J("ngClass",a.VKq(19,Ce,M.submitted&&M.f.mobileNumber.errors)),a.xp6(1),a.Q6J("ngIf",M.f.mobileNumber.touched&&!M.f.mobileNumber.valid&&!M.f.mobileNumber.errors),a.xp6(1),a.Q6J("ngIf",M.submitted&&M.f.mobileNumber.errors))},dependencies:[m.mk,m.O5,qt.rH,Hn,Be._Y,Be.Fj,Be.JJ,Be.JL,Be.sg,Be.u],styles:[".main[_ngcontent-%COMP%]{width:700px;height:800px;margin:150px auto auto;font-size:17px;font-family:poppins;font-weight:700}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-top:30px;font-size:30px;font-family:poppins;font-weight:700}"]}),L})()},{path:"edit-student/:id",component:(()=>{class L{constructor(p,M,ie,ce,lt,Ht){this.atuhService=p,this.fb=M,this.location=ie,this.actRoute=ce,this.router=lt,this.toastr=Ht,this.submitted=!1}ngOnInit(){this.updateStudentData();const p=this.actRoute.snapshot.paramMap.get("id");this.atuhService.GetStudent(p).valueChanges().subscribe(M=>{console.log(M),this.editForm.setValue(M)})}updateStudentData(){this.editForm=this.fb.group({firstName:["",[Be.kI.required,Be.kI.pattern("[a-zA-Z ]*")]],email:["",[Be.kI.required,Be.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],lastName:["",[Be.kI.required,Be.kI.pattern("[a-zA-Z ]*")]],mobileNumber:["",[Be.kI.required,Be.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]]})}get f(){return this.editForm.controls}updateForm(){this.atuhService.UpdateStudent(this.editForm.value),this.toastr.success(this.editForm.controls.firstName.value+" updated successfully"),this.router.navigate(["/student-list"])}goBack(){this.location.back()}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(ve.e),a.Y36(Be.qu),a.Y36(m.Ye),a.Y36(qt.gz),a.Y36(qt.F0),a.Y36(et._W))},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-edit-student"]],decls:39,vars:20,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],[1,"heading"],[1,"form-group"],[2,"margin-top","20px"],["type","text","placeholder","Please Enter First Name","formControlName","firstName",1,"form-control",2,"margin-top","10px",3,"ngClass"],["style","color: red;",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Please Enter Last Name","formControlName","lastName",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","text","placeholder","Please Enter Email","formControlName","email",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","text","placeholder","Please Enter Mobile number","formControlName","mobileNumber",1,"form-control",2,"margin-top","10px",3,"ngClass"],["type","button",1,"btn","btn-secondary","gap-right",3,"click"],["type","submit",1,"btn","btn-primary"],[2,"color","red"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(p,M){1&p&&(a.TgZ(0,"div",0)(1,"div",1)(2,"p-card")(3,"div",2)(4,"div",3)(5,"form",4),a.NdJ("ngSubmit",function(){return M.updateForm()}),a.TgZ(6,"div",5)(7,"h1"),a._uU(8,"Edit Student Details"),a.qZA()(),a.TgZ(9,"div",6)(10,"label",7),a._uU(11,"First Name"),a.qZA(),a._UZ(12,"input",8),a.YNc(13,Ct,2,0,"span",9),a.YNc(14,wi,2,1,"div",10),a.qZA(),a.TgZ(15,"div",6)(16,"label",7),a._uU(17,"Last Name"),a.qZA(),a._UZ(18,"input",11),a.YNc(19,Di,2,0,"span",9),a.YNc(20,yr,2,1,"div",10),a.qZA(),a.TgZ(21,"div",6)(22,"label",7),a._uU(23,"Email"),a.qZA(),a._UZ(24,"input",12),a.YNc(25,Ns,2,1,"div",10),a.qZA(),a.TgZ(26,"div",6)(27,"label",7),a._uU(28,"Mobile number"),a.qZA(),a._UZ(29,"input",13),a.YNc(30,ws,2,0,"span",9),a.YNc(31,to,2,1,"div",10),a.qZA(),a._UZ(32,"br"),a.TgZ(33,"div")(34,"button",14),a.NdJ("click",function(){return M.goBack()}),a._uU(35,"Go Back"),a.qZA(),a._uU(36,"\xa0 "),a.TgZ(37,"button",15),a._uU(38,"Save"),a.qZA()()()()()()()()),2&p&&(a.xp6(5),a.Q6J("formGroup",M.editForm),a.xp6(7),a.Q6J("ngClass",a.VKq(12,Ar,M.submitted&&M.f.firstName.errors)),a.xp6(1),a.Q6J("ngIf",M.f.firstName.touched&&!M.f.firstName.valid&&!M.f.firstName.errors),a.xp6(1),a.Q6J("ngIf",M.submitted&&M.f.firstName.errors),a.xp6(4),a.Q6J("ngClass",a.VKq(14,Ar,M.submitted&&M.f.lastName.errors)),a.xp6(1),a.Q6J("ngIf",M.f.lastName.touched&&!M.f.lastName.valid&&!M.f.lastName.errors),a.xp6(1),a.Q6J("ngIf",M.submitted&&M.f.lastName.errors),a.xp6(4),a.Q6J("ngClass",a.VKq(16,Ar,M.submitted&&M.f.email.errors)),a.xp6(1),a.Q6J("ngIf",M.submitted&&M.f.email.errors),a.xp6(4),a.Q6J("ngClass",a.VKq(18,Ar,M.submitted&&M.f.mobileNumber.errors)),a.xp6(1),a.Q6J("ngIf",M.f.mobileNumber.touched&&!M.f.mobileNumber.valid&&!M.f.mobileNumber.errors),a.xp6(1),a.Q6J("ngIf",M.submitted&&M.f.mobileNumber.errors))},dependencies:[m.mk,m.O5,Hn,Be._Y,Be.Fj,Be.JJ,Be.JL,Be.sg,Be.u],styles:[".main[_ngcontent-%COMP%]{width:700px;height:800px;margin:150px auto auto;font-size:17px;font-family:poppins;font-weight:700}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-top:30px;font-size:30px;font-family:poppins;font-weight:700}"]}),L})()},{path:"delete-student",component:(()=>{class L{constructor(){}ngOnInit(){}}return L.\u0275fac=function(p){return new(p||L)},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-delete-student"]],decls:2,vars:0,template:function(p,M){1&p&&(a.TgZ(0,"p"),a._uU(1,"delete-student works!"),a.qZA())}}),L})()}];let ki=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[qt.Bz.forChild(Ps),qt.Bz]}),L})(),Ws=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez]}),L})(),Mo=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez]}),L})();var qi=K(982);let Ur=(()=>{class L{constructor(p,M,ie){this.el=p,this.zone=M,this.config=ie,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(p){this._disabled=p,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let p=this.getTarget(this.el.nativeElement);p.addEventListener("focus",this.focusListener),p.addEventListener("blur",this.blurListener)}})}ngOnChanges(p){p.tooltipPosition&&this.setOption({tooltipPosition:p.tooltipPosition.currentValue}),p.tooltipEvent&&this.setOption({tooltipEvent:p.tooltipEvent.currentValue}),p.appendTo&&this.setOption({appendTo:p.appendTo.currentValue}),p.positionStyle&&this.setOption({positionStyle:p.positionStyle.currentValue}),p.tooltipStyleClass&&this.setOption({tooltipStyleClass:p.tooltipStyleClass.currentValue}),p.tooltipZIndex&&this.setOption({tooltipZIndex:p.tooltipZIndex.currentValue}),p.escape&&this.setOption({escape:p.escape.currentValue}),p.showDelay&&this.setOption({showDelay:p.showDelay.currentValue}),p.hideDelay&&this.setOption({hideDelay:p.hideDelay.currentValue}),p.life&&this.setOption({life:p.life.currentValue}),p.positionTop&&this.setOption({positionTop:p.positionTop.currentValue}),p.positionLeft&&this.setOption({positionLeft:p.positionLeft.currentValue}),p.disabled&&this.setOption({disabled:p.disabled.currentValue}),p.text&&(this.setOption({tooltipLabel:p.text.currentValue}),this.active&&(p.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),p.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...p.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(p){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(p){this.deactivate()}onFocus(p){this.activate()}onBlur(p){this.deactivate()}onClick(p){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let p=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},p)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let p=document.createElement("div");p.className="p-tooltip-arrow",this.container.appendChild(p),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?Ee.appendChild(this.container,this.el.nativeElement):Ee.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),Ee.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?qi.P9.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&qi.P9.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let p=this.el.nativeElement.getBoundingClientRect();return{left:p.left+Ee.getWindowScrollLeft(),top:p.top+Ee.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let p=this.getHostOffset(),M=p.left+Ee.getOuterWidth(this.el.nativeElement),ie=p.top+(Ee.getOuterHeight(this.el.nativeElement)-Ee.getOuterHeight(this.container))/2;this.container.style.left=M+this.getOption("positionLeft")+"px",this.container.style.top=ie+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let p=this.getHostOffset(),M=p.left-Ee.getOuterWidth(this.container),ie=p.top+(Ee.getOuterHeight(this.el.nativeElement)-Ee.getOuterHeight(this.container))/2;this.container.style.left=M+this.getOption("positionLeft")+"px",this.container.style.top=ie+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let p=this.getHostOffset(),M=p.left+(Ee.getOuterWidth(this.el.nativeElement)-Ee.getOuterWidth(this.container))/2,ie=p.top-Ee.getOuterHeight(this.container);this.container.style.left=M+this.getOption("positionLeft")+"px",this.container.style.top=ie+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let p=this.getHostOffset(),M=p.left+(Ee.getOuterWidth(this.el.nativeElement)-Ee.getOuterWidth(this.container))/2,ie=p.top+Ee.getOuterHeight(this.el.nativeElement);this.container.style.left=M+this.getOption("positionLeft")+"px",this.container.style.top=ie+this.getOption("positionTop")+"px"}setOption(p){this._tooltipOptions={...this._tooltipOptions,...p}}getOption(p){return this._tooltipOptions[p]}getTarget(p){return Ee.hasClass(p,"p-inputwrapper")?Ee.findSingle(p,"input"):p}preAlign(p){this.container.style.left="-999px",this.container.style.top="-999px";let M="p-tooltip p-component p-tooltip-"+p;this.container.className=this.getOption("tooltipStyleClass")?M+" "+this.getOption("tooltipStyleClass"):M}isOutOfBounds(){let p=this.container.getBoundingClientRect(),M=p.top,ie=p.left,ce=Ee.getOuterWidth(this.container),lt=Ee.getOuterHeight(this.container),Ht=Ee.getViewport();return ie+ce>Ht.width||ie<0||M<0||M+lt>Ht.height}onWindowResize(p){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new We(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let p=this.getTarget(this.el.nativeElement);p.removeEventListener("focus",this.focusListener),p.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):Ee.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&qi.P9.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(Ae.b4))},L.\u0275dir=a.lG2({type:L,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[a.TTD]}),L})(),Oo=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez]}),L})();const Ia=["element"],Ko=["content"];function os(L,we){1&L&&a.GkF(0)}const ca=function(L,we){return{$implicit:L,options:we}};function ll(L,we){if(1&L&&(a.ynx(0),a.YNc(1,os,1,0,"ng-container",7),a.BQk()),2&L){const p=a.oxw(2);a.xp6(1),a.Q6J("ngTemplateOutlet",p.contentTemplate)("ngTemplateOutletContext",a.WLB(2,ca,p.loadedItems,p.getContentOptions()))}}function Ro(L,we){1&L&&a.GkF(0)}function ia(L,we){if(1&L&&(a.ynx(0),a.YNc(1,Ro,1,0,"ng-container",7),a.BQk()),2&L){const p=we.$implicit,M=we.index,ie=a.oxw(3);a.xp6(1),a.Q6J("ngTemplateOutlet",ie.itemTemplate)("ngTemplateOutletContext",a.WLB(2,ca,p,ie.getOptions(M)))}}const io=function(L){return{"p-scroller-loading":L}};function Ks(L,we){if(1&L&&(a.TgZ(0,"div",8,9),a.YNc(2,ia,2,5,"ng-container",10),a.qZA()),2&L){const p=a.oxw(2);a.Q6J("ngClass",a.VKq(4,io,p.d_loading))("ngStyle",p.contentStyle),a.xp6(2),a.Q6J("ngForOf",p.loadedItems)("ngForTrackBy",p._trackBy||p.index)}}function pt(L,we){if(1&L&&a._UZ(0,"div",11),2&L){const p=a.oxw(2);a.Q6J("ngStyle",p.spacerStyle)}}function ut(L,we){1&L&&a.GkF(0)}const It=function(L){return{numCols:L}},Ot=function(L){return{options:L}};function Zt(L,we){if(1&L&&(a.ynx(0),a.YNc(1,ut,1,0,"ng-container",7),a.BQk()),2&L){const p=we.index,M=a.oxw(4);a.xp6(1),a.Q6J("ngTemplateOutlet",M.loaderTemplate)("ngTemplateOutletContext",a.VKq(4,Ot,M.getLoaderOptions(p,M.both&&a.VKq(2,It,M._numItemsInViewport.cols))))}}function en(L,we){if(1&L&&(a.ynx(0),a.YNc(1,Zt,2,6,"ng-container",14),a.BQk()),2&L){const p=a.oxw(3);a.xp6(1),a.Q6J("ngForOf",p.loaderArr)}}function si(L,we){1&L&&a.GkF(0)}const ui=function(){return{styleClass:"p-scroller-loading-icon"}};function ar(L,we){if(1&L&&(a.ynx(0),a.YNc(1,si,1,0,"ng-container",7),a.BQk()),2&L){const p=a.oxw(4);a.xp6(1),a.Q6J("ngTemplateOutlet",p.loaderIconTemplate)("ngTemplateOutletContext",a.VKq(3,Ot,a.DdM(2,ui)))}}function ro(L,we){1&L&&a._UZ(0,"i",16)}function Fs(L,we){if(1&L&&(a.YNc(0,ar,2,5,"ng-container",0),a.YNc(1,ro,1,0,"ng-template",null,15,a.W1O)),2&L){const p=a.MAs(2),M=a.oxw(3);a.Q6J("ngIf",M.loaderIconTemplate)("ngIfElse",p)}}const as=function(L){return{"p-component-overlay":L}};function vr(L,we){if(1&L&&(a.TgZ(0,"div",12),a.YNc(1,en,2,1,"ng-container",0),a.YNc(2,Fs,3,2,"ng-template",null,13,a.W1O),a.qZA()),2&L){const p=a.MAs(3),M=a.oxw(2);a.Q6J("ngClass",a.VKq(3,as,!M.loaderTemplate)),a.xp6(1),a.Q6J("ngIf",M.loaderTemplate)("ngIfElse",p)}}const gi=function(L,we){return{"p-scroller":!0,"p-both-scroll":L,"p-horizontal-scroll":we}};function Fr(L,we){if(1&L){const p=a.EpF();a.ynx(0),a.TgZ(1,"div",2,3),a.NdJ("scroll",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onContainerScroll(ie))}),a.YNc(3,ll,2,5,"ng-container",0),a.YNc(4,Ks,3,6,"ng-template",null,4,a.W1O),a.YNc(6,pt,1,1,"div",5),a.YNc(7,vr,4,5,"div",6),a.qZA(),a.BQk()}if(2&L){const p=a.MAs(5),M=a.oxw();a.xp6(1),a.Tol(M._styleClass),a.Q6J("ngStyle",M._style)("ngClass",a.WLB(10,gi,M.both,M.horizontal)),a.uIk("id",M._id)("tabindex",M.tabindex),a.xp6(2),a.Q6J("ngIf",M.contentTemplate)("ngIfElse",p),a.xp6(3),a.Q6J("ngIf",M._showSpacer),a.xp6(1),a.Q6J("ngIf",!M.loaderDisabled&&M._showLoader&&M.d_loading)}}function Eo(L,we){1&L&&a.GkF(0)}const bo=function(L,we){return{rows:L,columns:we}};function wr(L,we){if(1&L&&(a.ynx(0),a.YNc(1,Eo,1,0,"ng-container",7),a.BQk()),2&L){const p=a.oxw(2);a.xp6(1),a.Q6J("ngTemplateOutlet",p.contentTemplate)("ngTemplateOutletContext",a.WLB(5,ca,p.items,a.WLB(2,bo,p._items,p.loadedColumns)))}}function qs(L,we){if(1&L&&(a.Hsn(0),a.YNc(1,wr,2,8,"ng-container",17)),2&L){const p=a.oxw();a.xp6(1),a.Q6J("ngIf",p.contentTemplate)}}const so=["*"];let Ra=(()=>{class L{constructor(p,M){this.cd=p,this.zone=M,this.onLazyLoad=new a.vpe,this.onScroll=new a.vpe,this.onScrollIndexChange=new a.vpe,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._delay=0,this._resizeDelay=10,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1,this._disabled||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}get id(){return this._id}set id(p){this._id=p}get style(){return this._style}set style(p){this._style=p}get styleClass(){return this._styleClass}set styleClass(p){this._styleClass=p}get tabindex(){return this._tabindex}set tabindex(p){this._tabindex=p}get items(){return this._items}set items(p){this._items=p}get itemSize(){return this._itemSize}set itemSize(p){this._itemSize=p}get scrollHeight(){return this._scrollHeight}set scrollHeight(p){this._scrollHeight=p}get scrollWidth(){return this._scrollWidth}set scrollWidth(p){this._scrollWidth=p}get orientation(){return this._orientation}set orientation(p){this._orientation=p}get delay(){return this._delay}set delay(p){this._delay=p}get resizeDelay(){return this._resizeDelay}set resizeDelay(p){this._resizeDelay=p}get lazy(){return this._lazy}set lazy(p){this._lazy=p}get disabled(){return this._disabled}set disabled(p){this._disabled=p}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(p){this._loaderDisabled=p}get columns(){return this._columns}set columns(p){this._columns=p}get showSpacer(){return this._showSpacer}set showSpacer(p){this._showSpacer=p}get showLoader(){return this._showLoader}set showLoader(p){this._showLoader=p}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(p){this._numToleratedItems=p}get loading(){return this._loading}set loading(p){this._loading=p}get autoSize(){return this._autoSize}set autoSize(p){this._autoSize=p}get trackBy(){return this._trackBy}set trackBy(p){this._trackBy=p}get options(){return this._options}set options(p){this._options=p,p&&"object"==typeof p&&Object.entries(p).forEach(([M,ie])=>this[`_${M}`]!==ie&&(this[`_${M}`]=ie))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this.first.rows,this.last.rows).map(p=>this._columns?p:p.slice(this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}ngOnInit(){this.setInitialState()}ngOnChanges(p){let M=!1;if(p.loading){const{previousValue:ie,currentValue:ce}=p.loading;this.lazy&&ie!==ce&&ce!==this.d_loading&&(this.d_loading=ce,M=!0)}if(this.initialized&&!M&&(p.items||p.itemSize||p.scrollHeight||p.scrollWidth)&&this.init(),p.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),p.numToleratedItems){const{previousValue:ie,currentValue:ce}=p.numToleratedItems;ie!==ce&&ce!==this.d_numToleratedItems&&(this.d_numToleratedItems=ce)}if(p.options){const{previousValue:ie,currentValue:ce}=p.options;this.lazy&&ie?.loading!==ce?.loading&&ce?.loading!==this.d_loading&&(this.d_loading=ce.loading),ie?.numToleratedItems!==ce?.numToleratedItems&&ce?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=ce.numToleratedItems)}}ngAfterContentInit(){this.templates.forEach(p=>{switch(p.getType()){case"content":this.contentTemplate=p.template;break;case"item":default:this.itemTemplate=p.template;break;case"loader":this.loaderTemplate=p.template;break;case"loadericon":this.loaderIconTemplate=p.template}})}ngAfterViewInit(){this.setContentEl(this.contentEl),this.init(),this.defaultWidth=Ee.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=Ee.getHeight(this.elementViewChild.nativeElement),this.initialized=!0}ngAfterViewChecked(){this.calculateAutoSize()}ngOnDestroy(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(p){this.contentEl=p||this.contentViewChild?.nativeElement||Ee.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems}getElementRef(){return this.elementViewChild}scrollTo(p){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(p)}scrollToIndex(p,M="auto"){const{numToleratedItems:ie}=this.calculateNumItems(),ce=this.getContentPosition(),lt=(wn=0,Mn)=>wn<=Mn?0:wn,Ht=(wn,Mn,pr)=>wn*Mn+pr,Rn=(wn=0,Mn=0)=>this.scrollTo({left:wn,top:Mn,behavior:M});if(this.both){const wn={rows:lt(p[0],ie[0]),cols:lt(p[1],ie[1])};(wn.rows!==this.first.rows||wn.cols!==this.first.cols)&&Rn(Ht(wn.cols,this._itemSize[1],ce.left),Ht(wn.rows,this._itemSize[0],ce.top))}else{const wn=lt(p,ie);wn!==this.first&&(this.horizontal?Rn(Ht(wn,this._itemSize,ce.left),0):Rn(0,Ht(wn,this._itemSize,ce.top)))}}scrollInView(p,M,ie="auto"){if(M){const{first:ce,viewport:lt}=this.getRenderedRange(),Ht=(Mn=0,pr=0)=>this.scrollTo({left:Mn,top:pr,behavior:ie}),wn="to-end"===M;if("to-start"===M){if(this.both)lt.first.rows-ce.rows>p[0]?Ht(lt.first.cols*this._itemSize[1],(lt.first.rows-1)*this._itemSize[0]):lt.first.cols-ce.cols>p[1]&&Ht((lt.first.cols-1)*this._itemSize[1],lt.first.rows*this._itemSize[0]);else if(lt.first-ce>p){const Mn=(lt.first-1)*this._itemSize;this.horizontal?Ht(Mn,0):Ht(0,Mn)}}else if(wn)if(this.both)lt.last.rows-ce.rows<=p[0]+1?Ht(lt.first.cols*this._itemSize[1],(lt.first.rows+1)*this._itemSize[0]):lt.last.cols-ce.cols<=p[1]+1&&Ht((lt.first.cols+1)*this._itemSize[1],lt.first.rows*this._itemSize[0]);else if(lt.last-ce<=p+1){const Mn=(lt.first+1)*this._itemSize;this.horizontal?Ht(Mn,0):Ht(0,Mn)}}else this.scrollToIndex(p,ie)}getRenderedRange(){const p=(ce,lt)=>Math.floor(ce/(lt||ce));let M=this.first,ie=0;if(this.elementViewChild?.nativeElement){const{scrollTop:ce,scrollLeft:lt}=this.elementViewChild.nativeElement;this.both?(M={rows:p(ce,this._itemSize[0]),cols:p(lt,this._itemSize[1])},ie={rows:M.rows+this.numItemsInViewport.rows,cols:M.cols+this.numItemsInViewport.cols}):(M=p(this.horizontal?lt:ce,this._itemSize),ie=M+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:M,last:ie}}}calculateNumItems(){const p=this.getContentPosition(),M=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-p.left:0,ie=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-p.top:0,ce=(wn,Mn)=>Math.ceil(wn/(Mn||wn)),lt=wn=>Math.ceil(wn/2),Ht=this.both?{rows:ce(ie,this._itemSize[0]),cols:ce(M,this._itemSize[1])}:ce(this.horizontal?M:ie,this._itemSize);return{numItemsInViewport:Ht,numToleratedItems:this.d_numToleratedItems||(this.both?[lt(Ht.rows),lt(Ht.cols)]:lt(Ht))}}calculateOptions(){const{numItemsInViewport:p,numToleratedItems:M}=this.calculateNumItems(),ie=(Ht,Rn,wn,Mn=!1)=>this.getLast(Ht+Rn+(Ht<wn?2:3)*wn,Mn),ce=this.first,lt=this.both?{rows:ie(this.first.rows,p.rows,M[0]),cols:ie(this.first.cols,p.cols,M[1],!0)}:ie(this.first,p,M);this.last=lt,this.numItemsInViewport=p,this.d_numToleratedItems=M,this.showLoader&&(this.loaderArr=this.both?Array.from({length:p.rows}).map(()=>Array.from({length:p.cols})):Array.from({length:p})),this._lazy&&this.handleEvents("onLazyLoad",{first:ce,last:lt})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:p,offsetHeight:M}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(p<this.defaultWidth?p:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(M<this.defaultHeight?M:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(p=0,M=!1){return this._items?Math.min(M?(this._columns||this._items[0]).length:this._items.length,p):0}getContentPosition(){if(this.contentEl){const p=getComputedStyle(this.contentEl),M=parseFloat(p.paddingLeft)+Math.max(parseFloat(p.left)||0,0),ie=parseFloat(p.paddingRight)+Math.max(parseFloat(p.right)||0,0),ce=parseFloat(p.paddingTop)+Math.max(parseFloat(p.top)||0,0),lt=parseFloat(p.paddingBottom)+Math.max(parseFloat(p.bottom)||0,0);return{left:M,right:ie,top:ce,bottom:lt,x:M+ie,y:ce+lt}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const p=this.elementViewChild.nativeElement.parentElement.parentElement,M=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||p.offsetWidth}px`,ie=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||p.offsetHeight}px`,ce=(lt,Ht)=>this.elementViewChild.nativeElement.style[lt]=Ht;this.both||this.horizontal?(ce("height",ie),ce("width",M)):ce("height",ie)}}setSpacerSize(){if(this._items){const p=this.getContentPosition(),M=(ie,ce,lt,Ht=0)=>this.spacerStyle={...this.spacerStyle,[`${ie}`]:(ce||[]).length*lt+Ht+"px"};this.both?(M("height",this._items,this._itemSize[0],p.y),M("width",this._columns||this._items[1],this._itemSize[1],p.x)):this.horizontal?M("width",this._columns||this._items,this._itemSize,p.x):M("height",this._items,this._itemSize,p.y)}}setContentPosition(p){if(this.contentEl){const M=p?p.first:this.first,ie=(lt,Ht)=>lt*Ht,ce=(lt=0,Ht=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${lt}px, ${Ht}px, 0)`};if(this.both)ce(ie(M.cols,this._itemSize[1]),ie(M.rows,this._itemSize[0]));else{const lt=ie(M,this._itemSize);this.horizontal?ce(lt,0):ce(0,lt)}}}onScrollPositionChange(p){const M=p.target,ie=this.getContentPosition(),ce=(Ir,oi)=>Ir?Ir>oi?Ir-oi:Ir:0,lt=(Ir,oi)=>Math.floor(Ir/(oi||Ir)),Ht=(Ir,oi,hs,ys,As,ko)=>Ir<=As?As:ko?hs-ys-As:oi+As-1,Rn=(Ir,oi,hs,ys,As,ko,dn)=>Ir<=ko?0:Math.max(0,dn?Ir<oi?hs:Ir-ko:Ir>oi?hs:Ir-2*ko),wn=(Ir,oi,hs,ys,As,ko=!1)=>{let dn=oi+ys+2*As;return Ir>=As&&(dn+=As+1),this.getLast(dn,ko)},Mn=ce(M.scrollTop,ie.top),pr=ce(M.scrollLeft,ie.left);let qr=this.both?{rows:0,cols:0}:0,mi=this.last,Ss=!1,Mr=this.lastScrollPos;if(this.both){const Ir=this.lastScrollPos.top<=Mn,oi=this.lastScrollPos.left<=pr,hs={rows:lt(Mn,this._itemSize[0]),cols:lt(pr,this._itemSize[1])},ys={rows:Ht(hs.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],Ir),cols:Ht(hs.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],oi)};qr={rows:Rn(hs.rows,ys.rows,this.first.rows,0,0,this.d_numToleratedItems[0],Ir),cols:Rn(hs.cols,ys.cols,this.first.cols,0,0,this.d_numToleratedItems[1],oi)},mi={rows:wn(hs.rows,qr.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:wn(hs.cols,qr.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},Ss=qr.rows!==this.first.rows||mi.rows!==this.last.rows||qr.cols!==this.first.cols||mi.cols!==this.last.cols,Mr={top:Mn,left:pr}}else{const Ir=this.horizontal?pr:Mn,oi=this.lastScrollPos<=Ir,hs=lt(Ir,this._itemSize);qr=Rn(hs,Ht(hs,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,oi),this.first,0,0,this.d_numToleratedItems,oi),mi=wn(hs,qr,0,this.numItemsInViewport,this.d_numToleratedItems),Ss=qr!==this.first||mi!==this.last,Mr=Ir}return{first:qr,last:mi,isRangeChanged:Ss,scrollPos:Mr}}onScrollChange(p){const{first:M,last:ie,isRangeChanged:ce,scrollPos:lt}=this.onScrollPositionChange(p);if(ce){const Ht={first:M,last:ie};this.setContentPosition(Ht),this.first=M,this.last=ie,this.lastScrollPos=lt,this.handleEvents("onScrollIndexChange",Ht),this._lazy&&this.handleEvents("onLazyLoad",Ht)}}onContainerScroll(p){if(this.handleEvents("onScroll",{originalEvent:p}),this._delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:M}=this.onScrollPositionChange(p);M&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(p),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.cd.detectChanges())},this._delay)}else this.onScrollChange(p)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(this.elementViewChild){const[p,M]=[Ee.getWidth(this.elementViewChild.nativeElement),Ee.getHeight(this.elementViewChild.nativeElement)],[ie,ce]=[p!==this.defaultWidth,M!==this.defaultHeight];(this.both?ie||ce:this.horizontal?ie:this.vertical&&ce)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=p,this.defaultHeight=M,this.init()})}},this._resizeDelay)}handleEvents(p,M){return this.options&&this.options[p]?this.options[p](M):this[p].emit(M)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:p=>this.getOptions(p),loading:this.d_loading,getLoaderOptions:(p,M)=>this.getLoaderOptions(p,M),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(p){const M=(this._items||[]).length,ie=this.both?this.first.rows+p:this.first+p;return{index:ie,count:M,first:0===ie,last:ie===M-1,even:ie%2==0,odd:ie%2!=0}}getLoaderOptions(p,M){const ie=this.loaderArr.length;return{index:p,count:ie,first:0===p,last:p===ie-1,even:p%2==0,odd:p%2!=0,...M}}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(a.sBO),a.Y36(a.R0b))},L.\u0275cmp=a.Xpm({type:L,selectors:[["p-scroller"]],contentQueries:function(p,M,ie){if(1&p&&a.Suo(ie,Ae.jx,4),2&p){let ce;a.iGM(ce=a.CRH())&&(M.templates=ce)}},viewQuery:function(p,M){if(1&p&&(a.Gf(Ia,5),a.Gf(Ko,5)),2&p){let ie;a.iGM(ie=a.CRH())&&(M.elementViewChild=ie.first),a.iGM(ie=a.CRH())&&(M.contentViewChild=ie.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",delay:"delay",resizeDelay:"resizeDelay",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[a.TTD],ngContentSelectors:so,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(p,M){if(1&p&&(a.F$t(),a.YNc(0,Fr,8,13,"ng-container",0),a.YNc(1,qs,2,1,"ng-template",null,1,a.W1O)),2&p){const ie=a.MAs(2);a.Q6J("ngIf",!M._disabled)("ngIfElse",ie)}},dependencies:[m.mk,m.sg,m.O5,m.tP,m.PC],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}\n"],encapsulation:2}),L})(),No=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez]}),L})(),Yr=(()=>{class L{constructor(p){this.host=p,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const p=Ee.getFocusableElements(this.host.nativeElement);0===p.length&&this.host.nativeElement.focus(),p.length>0&&p[0].focus(),this.focused=!0}}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(a.SBq))},L.\u0275dir=a.lG2({type:L,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:["pAutoFocus","autofocus"]}}),L})(),Na=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez]}),L})();function oo(L,we){if(1&L&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&L){const p=a.oxw();a.xp6(1),a.Oqu(p.label||"empty")}}function Ca(L,we){1&L&&a.GkF(0)}const Qr=function(L){return{height:L}},ao=function(L,we){return{"p-dropdown-item":!0,"p-highlight":L,"p-disabled":we}},Br=function(L){return{$implicit:L}},Io=["container"],Jr=["filter"],ls=["in"],Ai=["editableInput"],go=["items"],Rr=["scroller"];function Po(L,we){if(1&L&&(a.ynx(0),a._uU(1),a.BQk()),2&L){const p=a.oxw(2);a.xp6(1),a.Oqu(p.label||"empty")}}function lo(L,we){1&L&&a.GkF(0)}const mo=function(L){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":L}};function lr(L,we){if(1&L&&(a.TgZ(0,"span",12),a.YNc(1,Po,2,1,"ng-container",13),a.YNc(2,lo,1,0,"ng-container",14),a.qZA()),2&L){const p=a.oxw();a.Q6J("ngClass",a.VKq(9,mo,null==p.label||0===p.label.length))("pTooltip",p.tooltip)("tooltipPosition",p.tooltipPosition)("positionStyle",p.tooltipPositionStyle)("tooltipStyleClass",p.tooltipStyleClass),a.uIk("id",p.labelId),a.xp6(1),a.Q6J("ngIf",!p.selectedItemTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",p.selectedItemTemplate)("ngTemplateOutletContext",a.VKq(11,Br,p.selectedOption))}}const _o=function(L){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":L}};function us(L,we){if(1&L&&(a.TgZ(0,"span",15),a._uU(1),a.qZA()),2&L){const p=a.oxw();a.Q6J("ngClass",a.VKq(2,_o,null==p.placeholder||0===p.placeholder.length)),a.xp6(1),a.Oqu(p.placeholder||"empty")}}function Ls(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"input",16,17),a.NdJ("click",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onEditableInputClick())})("input",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onEditableInputChange(ie))})("focus",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onEditableInputFocus(ie))})("blur",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onInputBlur(ie))}),a.qZA()}if(2&L){const p=a.oxw();a.Q6J("disabled",p.disabled),a.uIk("maxlength",p.maxlength)("placeholder",p.placeholder)("aria-expanded",p.overlayVisible)}}function Zi(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"i",18),a.NdJ("click",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.clear(ie))}),a.qZA()}}function da(L,we){1&L&&a.GkF(0)}function fr(L,we){1&L&&a.GkF(0)}const Vo=function(L){return{options:L}};function Gr(L,we){if(1&L&&(a.ynx(0),a.YNc(1,fr,1,0,"ng-container",14),a.BQk()),2&L){const p=a.oxw(3);a.xp6(1),a.Q6J("ngTemplateOutlet",p.filterTemplate)("ngTemplateOutletContext",a.VKq(2,Vo,p.filterOptions))}}function ha(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"div",27)(1,"input",28,29),a.NdJ("keydown.enter",function(ie){return ie.preventDefault()})("keydown",function(ie){a.CHM(p);const ce=a.oxw(3);return a.KtG(ce.onKeydown(ie,!1))})("input",function(ie){a.CHM(p);const ce=a.oxw(3);return a.KtG(ce.onFilterInputChange(ie))}),a.qZA(),a._UZ(3,"span",30),a.qZA()}if(2&L){const p=a.oxw(3);a.xp6(1),a.Q6J("value",p.filterValue||""),a.uIk("placeholder",p.filterPlaceholder)("aria-label",p.ariaFilterLabel)("aria-activedescendant",p.overlayVisible?"p-highlighted-option":p.labelId)}}function ur(L,we){if(1&L&&(a.TgZ(0,"div",24),a.NdJ("click",function(M){return M.stopPropagation()}),a.YNc(1,Gr,2,4,"ng-container",25),a.YNc(2,ha,4,4,"ng-template",null,26,a.W1O),a.qZA()),2&L){const p=a.MAs(3),M=a.oxw(2);a.xp6(1),a.Q6J("ngIf",M.filterTemplate)("ngIfElse",p)}}function Ii(L,we){1&L&&a.GkF(0)}const Ta=function(L,we){return{$implicit:L,options:we}};function xl(L,we){if(1&L&&a.YNc(0,Ii,1,0,"ng-container",14),2&L){const p=we.$implicit,M=we.options;a.oxw(2);const ie=a.MAs(7);a.Q6J("ngTemplateOutlet",ie)("ngTemplateOutletContext",a.WLB(2,Ta,p,M))}}function Uo(L,we){1&L&&a.GkF(0)}function _l(L,we){if(1&L&&a.YNc(0,Uo,1,0,"ng-container",14),2&L){const p=we.options,M=a.oxw(4);a.Q6J("ngTemplateOutlet",M.loaderTemplate)("ngTemplateOutletContext",a.VKq(2,Vo,p))}}function Er(L,we){1&L&&(a.ynx(0),a.YNc(1,_l,1,4,"ng-template",34),a.BQk())}function Co(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"p-scroller",31,32),a.NdJ("onLazyLoad",function(ie){a.CHM(p);const ce=a.oxw(2);return a.KtG(ce.onLazyLoad.emit(ie))}),a.YNc(2,xl,1,5,"ng-template",33),a.YNc(3,Er,2,0,"ng-container",13),a.qZA()}if(2&L){const p=a.oxw(2);a.Akn(a.VKq(8,Qr,p.scrollHeight)),a.Q6J("items",p.optionsToDisplay)("itemSize",p.virtualScrollItemSize||p._itemSize)("autoSize",!0)("lazy",p.lazy)("options",p.virtualScrollOptions),a.xp6(3),a.Q6J("ngIf",p.loaderTemplate)}}function To(L,we){1&L&&a.GkF(0)}const Vs=function(){return{}};function Jt(L,we){if(1&L&&(a.ynx(0),a.YNc(1,To,1,0,"ng-container",14),a.BQk()),2&L){a.oxw();const p=a.MAs(7),M=a.oxw();a.xp6(1),a.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",a.WLB(3,Ta,M.optionsToDisplay,a.DdM(2,Vs)))}}function Xn(L,we){if(1&L&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&L){const p=a.oxw().$implicit,M=a.oxw(4);a.xp6(1),a.Oqu(M.getOptionGroupLabel(p)||"empty")}}function Zs(L,we){1&L&&a.GkF(0)}function ms(L,we){1&L&&a.GkF(0)}const Wn=function(L,we){return{$implicit:L,selectedOption:we}};function ee(L,we){if(1&L&&(a.TgZ(0,"li",40),a.YNc(1,Xn,2,1,"span",13),a.YNc(2,Zs,1,0,"ng-container",14),a.qZA(),a.YNc(3,ms,1,0,"ng-container",14)),2&L){const p=we.$implicit,M=a.oxw(2).options,ie=a.MAs(5),ce=a.oxw(2);a.Q6J("ngStyle",a.VKq(6,Qr,M.itemSize+"px")),a.xp6(1),a.Q6J("ngIf",!ce.groupTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",ce.groupTemplate)("ngTemplateOutletContext",a.VKq(8,Br,p)),a.xp6(1),a.Q6J("ngTemplateOutlet",ie)("ngTemplateOutletContext",a.WLB(10,Wn,ce.getOptionGroupChildren(p),ce.selectedOption))}}function Y(L,we){if(1&L&&(a.ynx(0),a.YNc(1,ee,4,13,"ng-template",39),a.BQk()),2&L){const p=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",p)}}function $(L,we){1&L&&a.GkF(0)}function fe(L,we){if(1&L&&(a.ynx(0),a.YNc(1,$,1,0,"ng-container",14),a.BQk()),2&L){const p=a.oxw().$implicit,M=a.MAs(5),ie=a.oxw(2);a.xp6(1),a.Q6J("ngTemplateOutlet",M)("ngTemplateOutletContext",a.WLB(2,Wn,p,ie.selectedOption))}}function Pt(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"p-dropdownItem",41),a.NdJ("onClick",function(ie){a.CHM(p);const ce=a.oxw(4);return a.KtG(ce.onItemClick(ie))}),a.qZA()}if(2&L){const p=we.$implicit,M=a.oxw().selectedOption,ie=a.oxw(3);a.Q6J("option",p)("selected",M==p)("label",ie.getOptionLabel(p))("disabled",ie.isOptionDisabled(p))("template",ie.itemTemplate)}}function Fn(L,we){1&L&&a.YNc(0,Pt,1,5,"ng-template",39),2&L&&a.Q6J("ngForOf",we.$implicit)}function Lr(L,we){if(1&L&&(a.ynx(0),a._uU(1),a.BQk()),2&L){const p=a.oxw(4);a.xp6(1),a.hij(" ",p.emptyFilterMessageLabel," ")}}function Ys(L,we){1&L&&a.GkF(0,null,43)}function cs(L,we){if(1&L&&(a.TgZ(0,"li",42),a.YNc(1,Lr,2,1,"ng-container",25),a.YNc(2,Ys,2,0,"ng-container",19),a.qZA()),2&L){const p=a.oxw().options,M=a.oxw(2);a.Q6J("ngStyle",a.VKq(4,Qr,p.itemSize+"px")),a.xp6(1),a.Q6J("ngIf",!M.emptyFilterTemplate&&!M.emptyTemplate)("ngIfElse",M.emptyFilter),a.xp6(1),a.Q6J("ngTemplateOutlet",M.emptyFilterTemplate||M.emptyTemplate)}}function zr(L,we){if(1&L&&(a.ynx(0),a._uU(1),a.BQk()),2&L){const p=a.oxw(4);a.xp6(1),a.hij(" ",p.emptyMessageLabel," ")}}function _s(L,we){1&L&&a.GkF(0,null,44)}function fa(L,we){if(1&L&&(a.TgZ(0,"li",42),a.YNc(1,zr,2,1,"ng-container",25),a.YNc(2,_s,2,0,"ng-container",19),a.qZA()),2&L){const p=a.oxw().options,M=a.oxw(2);a.Q6J("ngStyle",a.VKq(4,Qr,p.itemSize+"px")),a.xp6(1),a.Q6J("ngIf",!M.emptyTemplate)("ngIfElse",M.empty),a.xp6(1),a.Q6J("ngTemplateOutlet",M.emptyTemplate)}}function el(L,we){if(1&L&&(a.TgZ(0,"ul",35,36),a.YNc(2,Y,2,1,"ng-container",13),a.YNc(3,fe,2,5,"ng-container",13),a.YNc(4,Fn,1,1,"ng-template",null,37,a.W1O),a.YNc(6,cs,3,6,"li",38),a.YNc(7,fa,3,6,"li",38),a.qZA()),2&L){const p=we.options,M=a.oxw(2);a.Akn(p.contentStyle),a.Q6J("ngClass",p.contentStyleClass),a.uIk("id",M.listId),a.xp6(2),a.Q6J("ngIf",M.group),a.xp6(1),a.Q6J("ngIf",!M.group),a.xp6(3),a.Q6J("ngIf",M.filterValue&&M.isEmpty()),a.xp6(1),a.Q6J("ngIf",!M.filterValue&&M.isEmpty())}}function Bo(L,we){1&L&&a.GkF(0)}const Pa=function(L,we){return{showTransitionParams:L,hideTransitionParams:we}},ra=function(L){return{value:"visible",params:L}};function Da(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"div",0),a.NdJ("click",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onOverlayClick(ie))})("@overlayAnimation.start",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onOverlayAnimationStart(ie))})("@overlayAnimation.done",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onOverlayAnimationEnd(ie))}),a.YNc(1,da,1,0,"ng-container",19),a.YNc(2,ur,4,2,"div",20),a.TgZ(3,"div",21),a.YNc(4,Co,4,10,"p-scroller",22),a.YNc(5,Jt,2,6,"ng-container",13),a.YNc(6,el,8,8,"ng-template",null,23,a.W1O),a.qZA(),a.YNc(8,Bo,1,0,"ng-container",19),a.qZA()}if(2&L){const p=a.oxw();a.Tol(p.panelStyleClass),a.Q6J("ngClass","p-dropdown-panel p-component")("@overlayAnimation",a.VKq(15,ra,a.WLB(12,Pa,p.showTransitionOptions,p.hideTransitionOptions)))("ngStyle",p.panelStyle),a.xp6(1),a.Q6J("ngTemplateOutlet",p.headerTemplate),a.xp6(1),a.Q6J("ngIf",p.filter),a.xp6(1),a.Udp("max-height",p.virtualScroll?"auto":p.scrollHeight||"auto"),a.xp6(1),a.Q6J("ngIf",p.virtualScroll),a.xp6(1),a.Q6J("ngIf",!p.virtualScroll),a.xp6(3),a.Q6J("ngTemplateOutlet",p.footerTemplate)}}const Sa=function(L,we,p,M){return{"p-dropdown p-component":!0,"p-disabled":L,"p-dropdown-open":we,"p-focus":p,"p-dropdown-clearable":M}},sa={provide:Be.JU,useExisting:(0,a.Gpc)(()=>Ho),multi:!0};let pa=(()=>{class L{constructor(){this.onClick=new a.vpe}onOptionClick(p){this.onClick.emit({originalEvent:p,option:this.option})}}return L.\u0275fac=function(p){return new(p||L)},L.\u0275cmp=a.Xpm({type:L,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(p,M){1&p&&(a.TgZ(0,"li",0),a.NdJ("click",function(ce){return M.onOptionClick(ce)}),a.YNc(1,oo,2,1,"span",1),a.YNc(2,Ca,1,0,"ng-container",2),a.qZA()),2&p&&(a.Q6J("ngStyle",a.VKq(8,Qr,M.itemSize+"px"))("id",M.selected?"p-highlighted-option":"")("ngClass",a.WLB(10,ao,M.selected,M.disabled)),a.uIk("aria-label",M.label)("aria-selected",M.selected),a.xp6(1),a.Q6J("ngIf",!M.template),a.xp6(1),a.Q6J("ngTemplateOutlet",M.template)("ngTemplateOutletContext",a.VKq(13,Br,M.option)))},dependencies:[m.mk,m.O5,m.tP,m.PC,Re],encapsulation:2}),L})(),Ho=(()=>{class L{constructor(p,M,ie,ce,lt,Ht,Rn){this.el=p,this.renderer=M,this.cd=ie,this.zone=ce,this.filterService=lt,this.config=Ht,this.overlayService=Rn,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new a.vpe,this.onFilter=new a.vpe,this.onFocus=new a.vpe,this.onBlur=new a.vpe,this.onClick=new a.vpe,this.onShow=new a.vpe,this.onHide=new a.vpe,this.onClear=new a.vpe,this.onLazyLoad=new a.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=(0,qi.Th)()}get disabled(){return this._disabled}set disabled(p){p&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=p,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(p){this._itemSize=p,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngAfterContentInit(){this.templates.forEach(p=>{switch(p.getType()){case"item":default:this.itemTemplate=p.template;break;case"selectedItem":this.selectedItemTemplate=p.template;break;case"header":this.headerTemplate=p.template;break;case"filter":this.filterTemplate=p.template;break;case"footer":this.footerTemplate=p.template;break;case"emptyfilter":this.emptyFilterTemplate=p.template;break;case"empty":this.emptyTemplate=p.template;break;case"group":this.groupTemplate=p.template;break;case"loader":this.loaderTemplate=p.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:p=>this.onFilterInputChange(p),reset:()=>this.resetFilter()})}get options(){return this._options}set options(p){this._options=p,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&qi.gb.isNotEmpty(this.value)&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(p){this._filterValue=p,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Ae.ws.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Ae.ws.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}get isVisibleClearIcon(){return null!=this.value&&""!==this.value&&this.showClear&&!this.disabled}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(p){return this.optionLabel?qi.gb.resolveFieldData(p,this.optionLabel):p&&void 0!==p.label?p.label:p}getOptionValue(p){return this.optionValue?qi.gb.resolveFieldData(p,this.optionValue):!this.optionLabel&&p&&void 0!==p.value?p.value:p}isOptionDisabled(p){return this.optionDisabled?qi.gb.resolveFieldData(p,this.optionDisabled):!(!p||void 0===p.disabled)&&p.disabled}getOptionGroupLabel(p){return this.optionGroupLabel?qi.gb.resolveFieldData(p,this.optionGroupLabel):p&&void 0!==p.label?p.label:p}getOptionGroupChildren(p){return this.optionGroupChildren?qi.gb.resolveFieldData(p,this.optionGroupChildren):p.items}onItemClick(p){const M=p.option;this.isOptionDisabled(M)||(this.selectItem(p.originalEvent,M),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},150)}selectItem(p,M){this.selectedOption!=M&&(this.selectedOption=M,this.value=this.getOptionValue(M),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:p,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(Ee.findSingle(this.overlay,"li.p-highlight")&&Ee.scrollInView(this.itemsWrapper,Ee.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(p){this.filter&&this.resetFilter(),this.value=p,this.updateSelectedOption(p),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(p){this.selectedOption=this.findOption(p,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(p){this.onModelChange=p}registerOnTouched(p){this.onModelTouched=p}setDisabledState(p){this.disabled=p,this.cd.markForCheck()}onMouseclick(p){this.disabled||this.readonly||this.isInputClick(p)||(this.onClick.emit(p),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(p){this.overlayService.add({originalEvent:p,target:this.el.nativeElement})}isInputClick(p){return Ee.hasClass(p.target,"p-dropdown-clear-icon")||p.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&p.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(p){return!(this.el.nativeElement.isSameNode(p.target)||this.el.nativeElement.contains(p.target)||this.overlay&&this.overlay.contains(p.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(p){this.focused=!0,this.hide(),this.onFocus.emit(p)}onEditableInputChange(p){this.value=p.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:p,value:this.value})}show(){this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck()}onOverlayAnimationStart(p){switch(p.toState){case"visible":if(this.overlay=p.element,this.itemsWrapper=Ee.findSingle(this.overlay,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&qi.P9.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length)if(this.virtualScroll){const M=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==M&&this.scroller.scrollToIndex(M)}else{let M=Ee.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");M&&M.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(p);break;case"void":this.onOverlayHide(),this.onHide.emit(p)}}onOverlayAnimationEnd(p){"void"===p.toState&&qi.P9.clear(p.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Ee.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Ee.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?Ee.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Ee.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(p){this.focused=!0,this.onFocus.emit(p)}onInputBlur(p){this.focused=!1,this.onBlur.emit(p),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(p){let M;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let ie=p-1;0<=ie;ie--){let ce=this.optionsToDisplay[ie];if(!this.isOptionDisabled(ce)){M=ce;break}}if(!M)for(let ie=this.optionsToDisplay.length-1;ie>=p;ie--){let ce=this.optionsToDisplay[ie];if(!this.isOptionDisabled(ce)){M=ce;break}}}return M}findNextEnabledOption(p){let M;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let ie=p+1;ie<this.optionsToDisplay.length;ie++){let ce=this.optionsToDisplay[ie];if(!this.isOptionDisabled(ce)){M=ce;break}}if(!M)for(let ie=0;ie<p;ie++){let ce=this.optionsToDisplay[ie];if(!this.isOptionDisabled(ce)){M=ce;break}}}return M}onKeydown(p,M){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(p.which){case 40:if(!this.overlayVisible&&p.altKey)this.show();else if(this.group){let ie=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==ie){let ce=ie.itemIndex+1;ce<this.getOptionGroupChildren(this.optionsToDisplay[ie.groupIndex]).length?(this.selectItem(p,this.getOptionGroupChildren(this.optionsToDisplay[ie.groupIndex])[ce]),this.selectedOptionUpdated=!0):this.optionsToDisplay[ie.groupIndex+1]&&(this.selectItem(p,this.getOptionGroupChildren(this.optionsToDisplay[ie.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(p,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let ie=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,ce=this.findNextEnabledOption(ie);ce&&(this.selectItem(p,ce),this.selectedOptionUpdated=!0)}p.preventDefault();break;case 38:if(this.group){let ie=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==ie){let ce=ie.itemIndex-1;if(ce>=0)this.selectItem(p,this.getOptionGroupChildren(this.optionsToDisplay[ie.groupIndex])[ce]),this.selectedOptionUpdated=!0;else if(ce<0){let lt=this.optionsToDisplay[ie.groupIndex-1];lt&&(this.selectItem(p,this.getOptionGroupChildren(lt)[this.getOptionGroupChildren(lt).length-1]),this.selectedOptionUpdated=!0)}}}else{let ie=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,ce=this.findPrevEnabledOption(ie);ce&&(this.selectItem(p,ce),this.selectedOptionUpdated=!0)}p.preventDefault();break;case 32:M&&(this.overlayVisible?this.hide():this.show(),p.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),p.preventDefault();break;case 27:case 9:this.hide();break;default:M&&!p.metaKey&&this.search(p)}}search(p){this.searchTimeout&&clearTimeout(this.searchTimeout);const M=p.key;let ie;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=M,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+M:M,this.group){let ce=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};ie=this.searchOptionWithinGroup(ce)}else{let ce=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;ie=this.searchOption(++ce)}ie&&!this.isOptionDisabled(ie)&&(this.selectItem(p,ie),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(p){let M;return this.searchValue&&(M=this.searchOptionInRange(p,this.optionsToDisplay.length),M||(M=this.searchOptionInRange(0,p))),M}searchOptionInRange(p,M){for(let ie=p;ie<M;ie++){let ce=this.optionsToDisplay[ie];if(this.getOptionLabel(ce).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(ce))return ce}return null}searchOptionWithinGroup(p){if(this.searchValue){for(let ie=p.groupIndex;ie<this.optionsToDisplay.length;ie++)for(let ce=p.groupIndex===ie?p.itemIndex+1:0;ce<this.getOptionGroupChildren(this.optionsToDisplay[ie]).length;ce++){let lt=this.getOptionGroupChildren(this.optionsToDisplay[ie])[ce];if(this.getOptionLabel(lt).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(lt))return lt}for(let ie=0;ie<=p.groupIndex;ie++)for(let ce=0;ce<(p.groupIndex===ie?p.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[ie]).length);ce++){let lt=this.getOptionGroupChildren(this.optionsToDisplay[ie])[ce];if(this.getOptionLabel(lt).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(lt))return lt}}return null}findOptionIndex(p,M){let ie=-1;if(M)for(let ce=0;ce<M.length;ce++)if(null==p&&null==this.getOptionValue(M[ce])||qi.gb.equals(p,this.getOptionValue(M[ce]),this.dataKey)){ie=ce;break}return ie}findOptionGroupIndex(p,M){let ie,ce;if(M)for(let lt=0;lt<M.length&&(ie=lt,ce=this.findOptionIndex(p,this.getOptionGroupChildren(M[lt])),-1===ce);lt++);return-1!==ce?{groupIndex:ie,itemIndex:ce}:-1}findOption(p,M,ie){if(this.group&&!ie){let ce;if(M&&M.length)for(let lt of M)if(ce=this.findOption(p,this.getOptionGroupChildren(lt),!0),ce)break;return ce}{let ce=this.findOptionIndex(p,M);return-1!=ce?M[ce]:null}}onFilterInputChange(p){let M=p.target.value;M&&M.length?(this._filterValue=M,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:p,filter:this._filterValue})}activateFilter(){let p=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let M=[];for(let ie of this.options){let ce=this.filterService.filter(this.getOptionGroupChildren(ie),p,this.filterValue,this.filterMatchMode,this.filterLocale);ce&&ce.length&&M.push({...ie,[this.optionGroupChildren]:ce})}this.optionsToDisplay=M}else this.optionsToDisplay=this.filterService.filter(this.options,p,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?Ee.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():Ee.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",M=>{!this.preventDocumentDefault&&this.isOutsideClicked(M)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Ee.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new We(this.containerViewChild.nativeElement,p=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(p){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:p,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(p)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&qi.P9.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(a.R0b),a.Y36(Ae.iZ),a.Y36(Ae.b4),a.Y36(Ae.F0))},L.\u0275cmp=a.Xpm({type:L,selectors:[["p-dropdown"]],contentQueries:function(p,M,ie){if(1&p&&a.Suo(ie,Ae.jx,4),2&p){let ce;a.iGM(ce=a.CRH())&&(M.templates=ce)}},viewQuery:function(p,M){if(1&p&&(a.Gf(Io,5),a.Gf(Jr,5),a.Gf(ls,5),a.Gf(Ai,5),a.Gf(go,5),a.Gf(Rr,5)),2&p){let ie;a.iGM(ie=a.CRH())&&(M.containerViewChild=ie.first),a.iGM(ie=a.CRH())&&(M.filterViewChild=ie.first),a.iGM(ie=a.CRH())&&(M.accessibleViewChild=ie.first),a.iGM(ie=a.CRH())&&(M.editableInputViewChild=ie.first),a.iGM(ie=a.CRH())&&(M.itemsViewChild=ie.first),a.iGM(ie=a.CRH())&&(M.scroller=ie.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(p,M){2&p&&a.ekj("p-inputwrapper-filled",M.filled)("p-inputwrapper-focus",M.focused||M.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[a._Bn([sa])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","pAutoFocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(p,M){1&p&&(a.TgZ(0,"div",0,1),a.NdJ("click",function(ce){return M.onMouseclick(ce)}),a.TgZ(2,"div",2)(3,"input",3,4),a.NdJ("focus",function(ce){return M.onInputFocus(ce)})("blur",function(ce){return M.onInputBlur(ce)})("keydown",function(ce){return M.onKeydown(ce,!0)}),a.qZA()(),a.YNc(5,lr,3,13,"span",5),a.YNc(6,us,2,4,"span",6),a.YNc(7,Ls,2,4,"input",7),a.YNc(8,Zi,1,0,"i",8),a.TgZ(9,"div",9),a._UZ(10,"span",10),a.qZA(),a.YNc(11,Da,9,17,"div",11),a.qZA()),2&p&&(a.Tol(M.styleClass),a.Q6J("ngClass",a.l5B(20,Sa,M.disabled,M.overlayVisible,M.focused,M.showClear&&!M.disabled))("ngStyle",M.style),a.xp6(3),a.Q6J("disabled",M.disabled)("pAutoFocus",M.autofocus),a.uIk("id",M.inputId)("placeholder",M.placeholder)("aria-label",M.ariaLabel)("aria-expanded",!1)("aria-labelledby",M.ariaLabelledBy)("tabindex",M.tabindex)("aria-activedescendant",M.overlayVisible?M.labelId:null),a.xp6(2),a.Q6J("ngIf",!M.editable&&null!=M.label),a.xp6(1),a.Q6J("ngIf",!M.editable&&null==M.label),a.xp6(1),a.Q6J("ngIf",M.editable),a.xp6(1),a.Q6J("ngIf",M.isVisibleClearIcon),a.xp6(1),a.uIk("aria-expanded",M.overlayVisible),a.xp6(1),a.Q6J("ngClass",M.dropdownIcon),a.xp6(1),a.Q6J("ngIf",M.overlayVisible))},dependencies:[m.mk,m.sg,m.O5,m.tP,m.PC,Ae.jx,Ur,Ra,Yr,pa],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[(0,re.X$)("overlayAnimation",[(0,re.eR)(":enter",[(0,re.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,re.jt)("{{showTransitionParams}}")]),(0,re.eR)(":leave",[(0,re.jt)("{{hideTransitionParams}}",(0,re.oB)({opacity:0}))])])]},changeDetection:0}),L})(),is=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez,Ae.m8,Oo,xe,No,Na,Ae.m8,No]}),L})();const qo=["input"];function ul(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"i",6),a.NdJ("click",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.clear())}),a.qZA()}}const Ka=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},kl=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function qa(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"span",7)(1,"button",8),a.NdJ("mousedown",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onUpButtonMouseDown(ie))})("mouseup",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onUpButtonMouseUp())})("mouseleave",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onUpButtonMouseLeave())})("keydown",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onUpButtonKeyDown(ie))})("keyup",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onUpButtonKeyUp())}),a.qZA(),a.TgZ(2,"button",8),a.NdJ("mousedown",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onDownButtonMouseDown(ie))})("mouseup",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onDownButtonMouseUp())})("mouseleave",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onDownButtonMouseLeave())})("keydown",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onDownButtonKeyDown(ie))})("keyup",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onDownButtonKeyUp())}),a.qZA()()}if(2&L){const p=a.oxw();a.xp6(1),a.Tol(p.incrementButtonClass),a.Q6J("ngClass",a.DdM(10,Ka))("icon",p.incrementButtonIcon)("disabled",p.disabled),a.xp6(1),a.Tol(p.decrementButtonClass),a.Q6J("ngClass",a.DdM(11,kl))("icon",p.decrementButtonIcon)("disabled",p.disabled)}}function cl(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"button",8),a.NdJ("mousedown",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onUpButtonMouseDown(ie))})("mouseup",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onUpButtonMouseUp())})("mouseleave",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onUpButtonMouseLeave())})("keydown",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onUpButtonKeyDown(ie))})("keyup",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onUpButtonKeyUp())}),a.qZA()}if(2&L){const p=a.oxw();a.Tol(p.incrementButtonClass),a.Q6J("ngClass",a.DdM(5,Ka))("icon",p.incrementButtonIcon)("disabled",p.disabled)}}function B(L,we){if(1&L){const p=a.EpF();a.TgZ(0,"button",8),a.NdJ("mousedown",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onDownButtonMouseDown(ie))})("mouseup",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onDownButtonMouseUp())})("mouseleave",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onDownButtonMouseLeave())})("keydown",function(ie){a.CHM(p);const ce=a.oxw();return a.KtG(ce.onDownButtonKeyDown(ie))})("keyup",function(){a.CHM(p);const ie=a.oxw();return a.KtG(ie.onDownButtonKeyUp())}),a.qZA()}if(2&L){const p=a.oxw();a.Tol(p.decrementButtonClass),a.Q6J("ngClass",a.DdM(5,kl))("icon",p.decrementButtonIcon)("disabled",p.disabled)}}const oe=function(L,we,p){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":L,"p-inputnumber-buttons-horizontal":we,"p-inputnumber-buttons-vertical":p}},W={provide:Be.JU,useExisting:(0,a.Gpc)(()=>ge),multi:!0};let ge=(()=>{class L{constructor(p,M){this.el=p,this.cd=M,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new a.vpe,this.onFocus=new a.vpe,this.onBlur=new a.vpe,this.onKeyDown=new a.vpe,this.onClear=new a.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(p){p&&(this.focused=!1),this._disabled=p,this.timer&&this.clearTimer()}ngOnChanges(p){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(ie=>!!p[ie])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const p=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),M=new Map(p.map((ie,ce)=>[ie,ce]));this._numeral=new RegExp(`[${p.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=ie=>M.get(ie)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(p){return p.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const p=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${p.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const p=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=p.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const p=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${p.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const p=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${p.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const p=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=p.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const p=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=p.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(p){if(null!=p){if("-"===p)return p;if(this.format){let ie=new Intl.NumberFormat(this.locale,this.getOptions()).format(p);return this.prefix&&(ie=this.prefix+ie),this.suffix&&(ie+=this.suffix),ie}return p.toString()}return""}parseValue(p){let M=p.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(M){if("-"===M)return M;let ie=+M;return isNaN(ie)?null:ie}return null}repeat(p,M,ie){if(this.readonly)return;let ce=M||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(p,40,ie)},ce),this.spin(p,ie)}spin(p,M){let ie=this.step*M,ce=this.parseValue(this.input.nativeElement.value)||0,lt=this.validateValue(ce+ie);this.maxlength&&this.maxlength<this.formatValue(lt).length||(this.updateInput(lt,null,"spin",null),this.updateModel(p,lt),this.handleOnInput(p,ce,lt))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(p){this.input.nativeElement.focus(),this.repeat(p,null,1),p.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(p){(32===p.keyCode||13===p.keyCode)&&this.repeat(p,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(p){this.input.nativeElement.focus(),this.repeat(p,null,-1),p.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(p){(32===p.keyCode||13===p.keyCode)&&this.repeat(p,null,-1)}onUserInput(p){this.readonly||(this.isSpecialChar&&(p.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(p){if(this.readonly)return;if(this.lastValue=p.target.value,p.shiftKey||p.altKey)return void(this.isSpecialChar=!0);let M=p.target.selectionStart,ie=p.target.selectionEnd,ce=p.target.value,lt=null;switch(p.altKey&&p.preventDefault(),p.which){case 38:this.spin(p,1),p.preventDefault();break;case 40:this.spin(p,-1),p.preventDefault();break;case 37:this.isNumeralChar(ce.charAt(M-1))||p.preventDefault();break;case 39:this.isNumeralChar(ce.charAt(M))||p.preventDefault();break;case 13:lt=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(lt),this.input.nativeElement.setAttribute("aria-valuenow",lt),this.updateModel(p,lt);break;case 8:if(p.preventDefault(),M===ie){const Ht=ce.charAt(M-1),{decimalCharIndex:Rn,decimalCharIndexWithoutPrefix:wn}=this.getDecimalCharIndexes(ce);if(this.isNumeralChar(Ht)){const Mn=this.getDecimalLength(ce);if(this._group.test(Ht))this._group.lastIndex=0,lt=ce.slice(0,M-2)+ce.slice(M-1);else if(this._decimal.test(Ht))this._decimal.lastIndex=0,Mn?this.input.nativeElement.setSelectionRange(M-1,M-1):lt=ce.slice(0,M-1)+ce.slice(M);else if(Rn>0&&M>Rn){const pr=this.isDecimalMode()&&(this.minFractionDigits||0)<Mn?"":"0";lt=ce.slice(0,M-1)+pr+ce.slice(M)}else 1===wn?(lt=ce.slice(0,M-1)+"0"+ce.slice(M),lt=this.parseValue(lt)>0?lt:""):lt=ce.slice(0,M-1)+ce.slice(M)}this.updateValue(p,lt,null,"delete-single")}else lt=this.deleteRange(ce,M,ie),this.updateValue(p,lt,null,"delete-range");break;case 46:if(p.preventDefault(),M===ie){const Ht=ce.charAt(M),{decimalCharIndex:Rn,decimalCharIndexWithoutPrefix:wn}=this.getDecimalCharIndexes(ce);if(this.isNumeralChar(Ht)){const Mn=this.getDecimalLength(ce);if(this._group.test(Ht))this._group.lastIndex=0,lt=ce.slice(0,M)+ce.slice(M+2);else if(this._decimal.test(Ht))this._decimal.lastIndex=0,Mn?this.input.nativeElement.setSelectionRange(M+1,M+1):lt=ce.slice(0,M)+ce.slice(M+1);else if(Rn>0&&M>Rn){const pr=this.isDecimalMode()&&(this.minFractionDigits||0)<Mn?"":"0";lt=ce.slice(0,M)+pr+ce.slice(M+1)}else 1===wn?(lt=ce.slice(0,M)+"0"+ce.slice(M+1),lt=this.parseValue(lt)>0?lt:""):lt=ce.slice(0,M)+ce.slice(M+1)}this.updateValue(p,lt,null,"delete-back-single")}else lt=this.deleteRange(ce,M,ie),this.updateValue(p,lt,null,"delete-range")}this.onKeyDown.emit(p)}onInputKeyPress(p){if(this.readonly)return;p.preventDefault();let M=p.which||p.keyCode,ie=String.fromCharCode(M);const ce=this.isDecimalSign(ie),lt=this.isMinusSign(ie);(48<=M&&M<=57||lt||ce)&&this.insert(p,ie,{isDecimalSign:ce,isMinusSign:lt})}onPaste(p){if(!this.disabled&&!this.readonly){p.preventDefault();let M=(p.clipboardData||window.clipboardData).getData("Text");if(M){let ie=this.parseValue(M);null!=ie&&this.insert(p,ie.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(p){return!(!this._minusSign.test(p)&&"-"!==p||(this._minusSign.lastIndex=0,0))}isDecimalSign(p){return!!this._decimal.test(p)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(p){let M=p.search(this._decimal);this._decimal.lastIndex=0;const ce=p.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:M,decimalCharIndexWithoutPrefix:ce}}getCharIndexes(p){const M=p.search(this._decimal);this._decimal.lastIndex=0;const ie=p.search(this._minusSign);this._minusSign.lastIndex=0;const ce=p.search(this._suffix);this._suffix.lastIndex=0;const lt=p.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:M,minusCharIndex:ie,suffixCharIndex:ce,currencyCharIndex:lt}}insert(p,M,ie={isDecimalSign:!1,isMinusSign:!1}){const ce=M.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==ce)return;let lt=this.input.nativeElement.selectionStart,Ht=this.input.nativeElement.selectionEnd,Rn=this.input.nativeElement.value.trim();const{decimalCharIndex:wn,minusCharIndex:Mn,suffixCharIndex:pr,currencyCharIndex:qr}=this.getCharIndexes(Rn);let mi;if(ie.isMinusSign)0===lt&&(mi=Rn,(-1===Mn||0!==Ht)&&(mi=this.insertText(Rn,M,0,Ht)),this.updateValue(p,mi,M,"insert"));else if(ie.isDecimalSign)wn>0&&lt===wn?this.updateValue(p,Rn,M,"insert"):(wn>lt&&wn<Ht||-1===wn&&this.maxFractionDigits)&&(mi=this.insertText(Rn,M,lt,Ht),this.updateValue(p,mi,M,"insert"));else{const Ss=this.numberFormat.resolvedOptions().maximumFractionDigits,Mr=lt!==Ht?"range-insert":"insert";if(wn>0&&lt>wn){if(lt+M.length-(wn+1)<=Ss){const Ir=qr>=lt?qr-1:pr>=lt?pr:Rn.length;mi=Rn.slice(0,lt)+M+Rn.slice(lt+M.length,Ir)+Rn.slice(Ir),this.updateValue(p,mi,M,Mr)}}else mi=this.insertText(Rn,M,lt,Ht),this.updateValue(p,mi,M,Mr)}}insertText(p,M,ie,ce){if(2===("."===M?M:M.split(".")).length){const Ht=p.slice(ie,ce).search(this._decimal);return this._decimal.lastIndex=0,Ht>0?p.slice(0,ie)+this.formatValue(M)+p.slice(ce):p||this.formatValue(M)}return ce-ie===p.length?this.formatValue(M):0===ie?M+p.slice(ce):ce===p.length?p.slice(0,ie)+M:p.slice(0,ie)+M+p.slice(ce)}deleteRange(p,M,ie){let ce;return ce=ie-M===p.length?"":0===M?p.slice(ie):ie===p.length?p.slice(0,M):p.slice(0,M)+p.slice(ie),ce}initCursor(){let p=this.input.nativeElement.selectionStart,M=this.input.nativeElement.value,ie=M.length,ce=null,lt=(this.prefixChar||"").length;M=M.replace(this._prefix,""),p-=lt;let Ht=M.charAt(p);if(this.isNumeralChar(Ht))return p+lt;let Rn=p-1;for(;Rn>=0;){if(Ht=M.charAt(Rn),this.isNumeralChar(Ht)){ce=Rn+lt;break}Rn--}if(null!==ce)this.input.nativeElement.setSelectionRange(ce+1,ce+1);else{for(Rn=p;Rn<ie;){if(Ht=M.charAt(Rn),this.isNumeralChar(Ht)){ce=Rn+lt;break}Rn++}null!==ce&&this.input.nativeElement.setSelectionRange(ce,ce)}return ce||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(p){return!(1!==p.length||!(this._numeral.test(p)||this._decimal.test(p)||this._group.test(p)||this._minusSign.test(p))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(p,M,ie,ce){let lt=this.input.nativeElement.value,Ht=null;null!=M&&(Ht=this.parseValue(M),Ht=Ht||this.allowEmpty?Ht:0,this.updateInput(Ht,ie,ce,M),this.handleOnInput(p,lt,Ht))}handleOnInput(p,M,ie){this.isValueChanged(M,ie)&&this.onInput.emit({originalEvent:p,value:ie})}isValueChanged(p,M){return null===M&&null!==p||null!=M&&M!==("string"==typeof p?this.parseValue(p):p)}validateValue(p){return"-"===p||null==p?null:null!=this.min&&p<this.min?this.min:null!=this.max&&p>this.max?this.max:p}updateInput(p,M,ie,ce){M=M||"";let lt=this.input.nativeElement.value,Ht=this.formatValue(p),Rn=lt.length;if(Ht!==ce&&(Ht=this.concatValues(Ht,ce)),0===Rn){this.input.nativeElement.value=Ht,this.input.nativeElement.setSelectionRange(0,0);const Mn=this.initCursor()+M.length;this.input.nativeElement.setSelectionRange(Mn,Mn)}else{let wn=this.input.nativeElement.selectionStart,Mn=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<Ht.length)return;this.input.nativeElement.value=Ht;let pr=Ht.length;if("range-insert"===ie){const qr=this.parseValue((lt||"").slice(0,wn)),Ss=(null!==qr?qr.toString():"").split("").join(`(${this.groupChar})?`),Mr=new RegExp(Ss,"g");Mr.test(Ht);const Ir=M.split("").join(`(${this.groupChar})?`),oi=new RegExp(Ir,"g");oi.test(Ht.slice(Mr.lastIndex)),Mn=Mr.lastIndex+oi.lastIndex,this.input.nativeElement.setSelectionRange(Mn,Mn)}else if(pr===Rn)"insert"===ie||"delete-back-single"===ie?this.input.nativeElement.setSelectionRange(Mn+1,Mn+1):"delete-single"===ie?this.input.nativeElement.setSelectionRange(Mn-1,Mn-1):("delete-range"===ie||"spin"===ie)&&this.input.nativeElement.setSelectionRange(Mn,Mn);else if("delete-back-single"===ie){let qr=lt.charAt(Mn-1),mi=lt.charAt(Mn),Ss=Rn-pr,Mr=this._group.test(mi);Mr&&1===Ss?Mn+=1:!Mr&&this.isNumeralChar(qr)&&(Mn+=-1*Ss+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(Mn,Mn)}else if("-"===lt&&"insert"===ie){this.input.nativeElement.setSelectionRange(0,0);const mi=this.initCursor()+M.length+1;this.input.nativeElement.setSelectionRange(mi,mi)}else Mn+=pr-Rn,this.input.nativeElement.setSelectionRange(Mn,Mn)}this.input.nativeElement.setAttribute("aria-valuenow",p)}concatValues(p,M){if(p&&M){let ie=M.search(this._decimal);return this._decimal.lastIndex=0,-1!==ie?p.split(this._decimal)[0]+M.slice(ie):p}return p}getDecimalLength(p){if(p){const M=p.split(this._decimal);if(2===M.length)return M[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(p){this.focused=!0,this.onFocus.emit(p)}onInputBlur(p){this.focused=!1;let M=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(M),this.input.nativeElement.setAttribute("aria-valuenow",M),this.updateModel(p,M),this.onBlur.emit(p)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(p,M){this.value!==M&&(this.value=M,this.onModelChange(M)),this.onModelTouched()}writeValue(p){this.value=p,this.cd.markForCheck()}registerOnChange(p){this.onModelChange=p}registerOnTouched(p){this.onModelTouched=p}setDisabledState(p){this.disabled=p,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return L.\u0275fac=function(p){return new(p||L)(a.Y36(a.SBq),a.Y36(a.sBO))},L.\u0275cmp=a.Xpm({type:L,selectors:[["p-inputNumber"]],viewQuery:function(p,M){if(1&p&&a.Gf(qo,5),2&p){let ie;a.iGM(ie=a.CRH())&&(M.input=ie.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(p,M){2&p&&a.ekj("p-inputwrapper-filled",M.filled)("p-inputwrapper-focus",M.focused)("p-inputnumber-clearable",M.showClear&&"vertical"!=M.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[a._Bn([W]),a.TTD],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(p,M){1&p&&(a.TgZ(0,"span",0)(1,"input",1,2),a.NdJ("input",function(ce){return M.onUserInput(ce)})("keydown",function(ce){return M.onInputKeyDown(ce)})("keypress",function(ce){return M.onInputKeyPress(ce)})("paste",function(ce){return M.onPaste(ce)})("click",function(){return M.onInputClick()})("focus",function(ce){return M.onInputFocus(ce)})("blur",function(ce){return M.onInputBlur(ce)}),a.qZA(),a.YNc(3,ul,1,0,"i",3),a.YNc(4,qa,3,12,"span",4),a.YNc(5,cl,1,6,"button",5),a.YNc(6,B,1,6,"button",5),a.qZA()),2&p&&(a.Tol(M.styleClass),a.Q6J("ngClass",a.kEZ(28,oe,M.showButtons&&"stacked"===M.buttonLayout,M.showButtons&&"horizontal"===M.buttonLayout,M.showButtons&&"vertical"===M.buttonLayout))("ngStyle",M.style),a.xp6(1),a.Tol(M.inputStyleClass),a.Q6J("ngClass","p-inputnumber-input")("ngStyle",M.inputStyle)("value",M.formattedValue())("disabled",M.disabled)("readonly",M.readonly),a.uIk("placeholder",M.placeholder)("title",M.title)("id",M.inputId)("size",M.size)("name",M.name)("autocomplete",M.autocomplete)("maxlength",M.maxlength)("tabindex",M.tabindex)("aria-label",M.ariaLabel)("aria-required",M.ariaRequired)("required",M.required)("min",M.min)("max",M.max),a.xp6(2),a.Q6J("ngIf","vertical"!=M.buttonLayout&&M.showClear&&M.value),a.xp6(1),a.Q6J("ngIf",M.showButtons&&"stacked"===M.buttonLayout),a.xp6(1),a.Q6J("ngIf",M.showButtons&&"stacked"!==M.buttonLayout),a.xp6(1),a.Q6J("ngIf",M.showButtons&&"stacked"!==M.buttonLayout))},dependencies:[m.mk,m.O5,m.PC,nt.o,yt],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),L})(),$e=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez,nt.j,on]}),L})(),jo=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez,is,$e,Be.u5,Ae.m8,xe,is,$e,Be.u5,Ae.m8]}),L})();var Fl=K(3928);let La=(()=>{class L{}return L.\u0275fac=function(p){return new(p||L)},L.\u0275mod=a.oAB({type:L}),L.\u0275inj=a.cJS({imports:[m.ez,ki,nt.j,on,Gi,Be.u5,Be.UX,rt,Ws,Mo,jo,Fl.Ps,et.Rh.forRoot()]}),L})()},773:(In,Et,K)=>{K.d(Et,{e:()=>Ie});var m=K(6457),Ae=(K(2090),K(9681),K(1877),K(4859),K(4650)),Re=K(1205),xe=K(7407),tt=K(1211),Me=K(7471);let Ie=(()=>{class Ge{constructor(ct,wt,Wt,Dt,vt){this.afAuth=ct,this.afs=wt,this.router=Wt,this.ngZone=Dt,this.db=vt,this.afAuth.authState.subscribe(rt=>{rt?(this.data=rt,localStorage.setItem("user",JSON.stringify(this.data)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(ct,wt){return this.afAuth.signInWithEmailAndPassword(ct,wt).then(Wt=>{this.setUserData(Wt.user),this.afAuth.authState.subscribe(Dt=>{Dt&&this.router.navigate(["dashboard"])})}).catch(Wt=>{window.alert(Wt.message)})}signUp(ct,wt){return this.afAuth.createUserWithEmailAndPassword(ct,wt).then(Wt=>{this.SendVerificationMail(),this.setUserData(Wt.user)}).catch(Wt=>{window.alert(Wt.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(ct=>ct.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email"])})}ForgotPassword(ct){return this.afAuth.sendPasswordResetEmail(ct).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(wt=>{window.alert(wt)})}get isLoggedIn(){const ct=JSON.parse(localStorage.getItem("user"));return null!==ct&&!1!==ct.emailVerified}GoogleAuth(){return this.AuthLogin(new m.Q).then(ct=>{this.router.navigate(["dashboard"])})}AuthLogin(ct){return this.afAuth.signInWithPopup(ct).then(wt=>{this.router.navigate(["dashboard"]),this.setUserData(wt.user)}).catch(wt=>{window.alert(wt)})}getUsers(){return new Promise((ct,wt)=>{this.afs.collection("/people").snapshotChanges().subscribe(Wt=>{ct(Wt)})})}GetStudent(ct){return this.studentRef=this.db.object("students-list/"+ct),this.studentRef}GetStudentsList(){return this.studentsRef=this.db.list("students-list"),this.studentsRef}UpdateStudent(ct){this.studentRef.update({firstName:ct.firstName,lastName:ct.lastName,email:ct.email,mobileNumber:ct.mobileNumber})}AddStudent(ct){this.studentsRef.push({firstName:ct.firstName,lastName:ct.lastName,email:ct.email,mobileNumber:ct.mobileNumber})}DeleteStudent(ct){this.studentRef=this.db.object("students-list/"+ct),this.studentRef.remove()}setUserData(ct){return this.afs.doc(`users/${ct.userId}`).set({uid:ct.uid,email:ct.email,displayName:ct.displayName,photoURL:ct.photoURL,emailVerified:ct.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{confirm("Are you sure ? you want to logOut.")&&(localStorage.removeItem("user"),this.router.navigate(["sign-in"]))})}}return Ge.\u0275fac=function(ct){return new(ct||Ge)(Ae.LFG(Re.zQ),Ae.LFG(xe.ST),Ae.LFG(tt.F0),Ae.LFG(Ae.R0b),Ae.LFG(Me.KQ))},Ge.\u0275prov=Ae.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})()},6427:(In,Et,K)=>{var m=K(1481),a=K(4650),re=K(1211);const Ee=[{path:"",loadChildren:()=>Promise.resolve().then(K.bind(K,5361)).then(S=>S.ComponentsModule)}];let We=(()=>{class S{constructor(){console.log("app-component")}}return S.\u0275fac=function(E){return new(E||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[re.Bz.forRoot(Ee),re.Bz]}),S})();var Ae=K(805);let Re=(()=>{class S{constructor(E){this.primengconfig=E,this.title="PrimeNG"}ngOnInit(){this.primengconfig.ripple=!0}}return S.\u0275fac=function(E){return new(E||S)(a.Y36(Ae.b4))},S.\u0275cmp=a.Xpm({type:S,selectors:[["app-root"]],decls:1,vars:0,template:function(E,O){1&E&&a._UZ(0,"router-outlet")},dependencies:[re.lC]}),S})();var xe=K(4006),tt=K(6895);let Q=(()=>{class S{}return S.\u0275fac=function(E){return new(E||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[tt.ez,Ae.m8]}),S})();var ft=K(7340);function it(S){return new a.vHH(3e3,!1)}function Dr(){return typeof window<"u"&&typeof window.document<"u"}function An(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ui(S){switch(S.length){case 0:return new ft.ZN;case 1:return S[0];default:return new ft.ZE(S)}}function ii(S,g,E,O,q=new Map,ae=new Map){const Te=[],Fe=[];let at=-1,Ft=null;if(O.forEach(tn=>{const Xt=tn.get("offset"),pi=Xt==at,yi=pi&&Ft||new Map;tn.forEach((Un,ti)=>{let hi=ti,gr=Un;if("offset"!==ti)switch(hi=g.normalizePropertyName(hi,Te),gr){case ft.k1:gr=q.get(ti);break;case ft.l3:gr=ae.get(ti);break;default:gr=g.normalizeStyleValue(ti,hi,gr,Te)}yi.set(hi,gr)}),pi||Fe.push(yi),Ft=yi,at=Xt}),Te.length)throw function vi(S){return new a.vHH(3502,!1)}();return Fe}function or(S,g,E,O){switch(g){case"start":S.onStart(()=>O(E&&li(E,"start",S)));break;case"done":S.onDone(()=>O(E&&li(E,"done",S)));break;case"destroy":S.onDestroy(()=>O(E&&li(E,"destroy",S)))}}function li(S,g,E){const ae=gs(S.element,S.triggerName,S.fromState,S.toState,g||S.phaseName,E.totalTime??S.totalTime,!!E.disabled),Te=S._data;return null!=Te&&(ae._data=Te),ae}function gs(S,g,E,O,q="",ae=0,Te){return{element:S,triggerName:g,fromState:E,toState:O,phaseName:q,totalTime:ae,disabled:!!Te}}function qn(S,g,E){let O=S.get(g);return O||S.set(g,O=E),O}function ot(S){const g=S.indexOf(":");return[S.substring(1,g),S.slice(g+1)]}let Ke=(S,g)=>!1,je=(S,g,E)=>[],et=null;function qe(S){const g=S.parentNode||S.host;return g===et?null:g}(An()||typeof Element<"u")&&(Dr()?(et=(()=>document.documentElement)(),Ke=(S,g)=>{for(;g;){if(g===S)return!0;g=qe(g)}return!1}):Ke=(S,g)=>S.contains(g),je=(S,g,E)=>{if(E)return Array.from(S.querySelectorAll(g));const O=S.querySelector(g);return O?[O]:[]});let xn=null,Bi=!1;const ze=Ke,Xe=je;let gn=(()=>{class S{validateStyleProperty(E){return function Ji(S){xn||(xn=function mt(){return typeof document<"u"?document.body:null}()||{},Bi=!!xn.style&&"WebkitAppearance"in xn.style);let g=!0;return xn.style&&!function fn(S){return"ebkit"==S.substring(1,6)}(S)&&(g=S in xn.style,!g&&Bi&&(g="Webkit"+S.charAt(0).toUpperCase()+S.slice(1)in xn.style)),g}(E)}matchesElement(E,O){return!1}containsElement(E,O){return ze(E,O)}getParentElement(E){return qe(E)}query(E,O,q){return Xe(E,O,q)}computeStyle(E,O,q){return q||""}animate(E,O,q,ae,Te,Fe=[],at){return new ft.ZN(q,ae)}}return S.\u0275fac=function(E){return new(E||S)},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac}),S})(),Gn=(()=>{class S{}return S.NOOP=new gn,S})();const Ce="ng-enter",dt="ng-leave",Ct="ng-trigger",vn=".ng-trigger",wi="ng-animating",Di=".ng-animating";function dr(S){if("number"==typeof S)return S;const g=S.match(/^(-?[\.\d]+)(m?s)/);return!g||g.length<2?0:yr(parseFloat(g[1]),g[2])}function yr(S,g){return"s"===g?1e3*S:S}function bn(S,g,E){return S.hasOwnProperty("duration")?S:function Ns(S,g,E){let q,ae=0,Te="";if("string"==typeof S){const Fe=S.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Fe)return g.push(it()),{duration:0,delay:0,easing:""};q=yr(parseFloat(Fe[1]),Fe[2]);const at=Fe[3];null!=at&&(ae=yr(parseFloat(at),Fe[4]));const Ft=Fe[5];Ft&&(Te=Ft)}else q=S;if(!E){let Fe=!1,at=g.length;q<0&&(g.push(function bt(){return new a.vHH(3100,!1)}()),Fe=!0),ae<0&&(g.push(function yt(){return new a.vHH(3101,!1)}()),Fe=!0),Fe&&g.splice(at,0,it())}return{duration:q,delay:ae,easing:Te}}(S,g,E)}function ws(S,g={}){return Object.keys(S).forEach(E=>{g[E]=S[E]}),g}function na(S){const g=new Map;return Object.keys(S).forEach(E=>{g.set(E,S[E])}),g}function ss(S,g=new Map,E){if(E)for(let[O,q]of E)g.set(O,q);for(let[O,q]of S)g.set(O,q);return g}function no(S,g,E){return E?g+":"+E+";":""}function Ps(S){let g="";for(let E=0;E<S.style.length;E++){const O=S.style.item(E);g+=no(0,O,S.style.getPropertyValue(O))}for(const E in S.style)S.style.hasOwnProperty(E)&&!E.startsWith("_")&&(g+=no(0,Or(E),S.style[E]));S.setAttribute("style",g)}function ki(S,g,E){S.style&&(g.forEach((O,q)=>{const ae=Ds(q);E&&!E.has(q)&&E.set(q,S.style[ae]),S.style[ae]=O}),An()&&Ps(S))}function po(S,g){S.style&&(g.forEach((E,O)=>{const q=Ds(O);S.style[q]=""}),An()&&Ps(S))}function Xi(S){return Array.isArray(S)?1==S.length?S[0]:(0,ft.vP)(S):S}const ks=new RegExp("{{\\s*(.+?)\\s*}}","g");function Es(S){let g=[];if("string"==typeof S){let E;for(;E=ks.exec(S);)g.push(E[1]);ks.lastIndex=0}return g}function zs(S,g,E){const O=S.toString(),q=O.replace(ks,(ae,Te)=>{let Fe=g[Te];return null==Fe&&(E.push(function on(S){return new a.vHH(3003,!1)}()),Fe=""),Fe.toString()});return q==O?S:q}function Ts(S){const g=[];let E=S.next();for(;!E.done;)g.push(E.value),E=S.next();return g}const Ws=/-+([a-z0-9])/g;function Ds(S){return S.replace(Ws,(...g)=>g[1].toUpperCase())}function Or(S){return S.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ur(S,g,E){switch(g.type){case 7:return S.visitTrigger(g,E);case 0:return S.visitState(g,E);case 1:return S.visitTransition(g,E);case 2:return S.visitSequence(g,E);case 3:return S.visitGroup(g,E);case 4:return S.visitAnimate(g,E);case 5:return S.visitKeyframes(g,E);case 6:return S.visitStyle(g,E);case 8:return S.visitReference(g,E);case 9:return S.visitAnimateChild(g,E);case 10:return S.visitAnimateRef(g,E);case 11:return S.visitQuery(g,E);case 12:return S.visitStagger(g,E);default:throw function pn(S){return new a.vHH(3004,!1)}()}}function Oo(S,g){return window.getComputedStyle(S)[g]}function Ks(S,g){const E=[];return"string"==typeof S?S.split(/\s*,\s*/).forEach(O=>function pt(S,g,E){if(":"==S[0]){const at=function ut(S,g){switch(S){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(E,O)=>parseFloat(O)>parseFloat(E);case":decrement":return(E,O)=>parseFloat(O)<parseFloat(E);default:return g.push(function zi(S){return new a.vHH(3016,!1)}()),"* => *"}}(S,E);if("function"==typeof at)return void g.push(at);S=at}const O=S.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==O||O.length<4)return E.push(function bi(S){return new a.vHH(3015,!1)}()),g;const q=O[1],ae=O[2],Te=O[3];g.push(Zt(q,Te));"<"==ae[0]&&!("*"==q&&"*"==Te)&&g.push(Zt(Te,q))}(O,E,g)):E.push(S),E}const It=new Set(["true","1"]),Ot=new Set(["false","0"]);function Zt(S,g){const E=It.has(S)||Ot.has(S),O=It.has(g)||Ot.has(g);return(q,ae)=>{let Te="*"==S||S==q,Fe="*"==g||g==ae;return!Te&&E&&"boolean"==typeof q&&(Te=q?It.has(S):Ot.has(S)),!Fe&&O&&"boolean"==typeof ae&&(Fe=ae?It.has(g):Ot.has(g)),Te&&Fe}}const si=new RegExp("s*:selfs*,?","g");function ui(S,g,E,O){return new ro(S).build(g,E,O)}class ro{constructor(g){this._driver=g}build(g,E,O){const q=new vr(E);return this._resetContextStyleTimingState(q),Ur(this,Xi(g),q)}_resetContextStyleTimingState(g){g.currentQuerySelector="",g.collectedStyles=new Map,g.collectedStyles.set("",new Map),g.currentTime=0}visitTrigger(g,E){let O=E.queryCount=0,q=E.depCount=0;const ae=[],Te=[];return"@"==g.name.charAt(0)&&E.errors.push(function Nn(){return new a.vHH(3006,!1)}()),g.definitions.forEach(Fe=>{if(this._resetContextStyleTimingState(E),0==Fe.type){const at=Fe,Ft=at.name;Ft.toString().split(/\s*,\s*/).forEach(tn=>{at.name=tn,ae.push(this.visitState(at,E))}),at.name=Ft}else if(1==Fe.type){const at=this.visitTransition(Fe,E);O+=at.queryCount,q+=at.depCount,Te.push(at)}else E.errors.push(function $t(){return new a.vHH(3007,!1)}())}),{type:7,name:g.name,states:ae,transitions:Te,queryCount:O,depCount:q,options:null}}visitState(g,E){const O=this.visitStyle(g.styles,E),q=g.options&&g.options.params||null;if(O.containsDynamicStyles){const ae=new Set,Te=q||{};O.styles.forEach(Fe=>{Fe instanceof Map&&Fe.forEach(at=>{Es(at).forEach(Ft=>{Te.hasOwnProperty(Ft)||ae.add(Ft)})})}),ae.size&&(Ts(ae.values()),E.errors.push(function ci(S,g){return new a.vHH(3008,!1)}()))}return{type:0,name:g.name,style:O,options:q?{params:q}:null}}visitTransition(g,E){E.queryCount=0,E.depCount=0;const O=Ur(this,Xi(g.animation),E);return{type:1,matchers:Ks(g.expr,E.errors),animation:O,queryCount:E.queryCount,depCount:E.depCount,options:Eo(g.options)}}visitSequence(g,E){return{type:2,steps:g.steps.map(O=>Ur(this,O,E)),options:Eo(g.options)}}visitGroup(g,E){const O=E.currentTime;let q=0;const ae=g.steps.map(Te=>{E.currentTime=O;const Fe=Ur(this,Te,E);return q=Math.max(q,E.currentTime),Fe});return E.currentTime=q,{type:3,steps:ae,options:Eo(g.options)}}visitAnimate(g,E){const O=function Fr(S,g){if(S.hasOwnProperty("duration"))return S;if("number"==typeof S)return bo(bn(S,g).duration,0,"");const E=S;if(E.split(/\s+/).some(ae=>"{"==ae.charAt(0)&&"{"==ae.charAt(1))){const ae=bo(0,0,"");return ae.dynamic=!0,ae.strValue=E,ae}const q=bn(E,g);return bo(q.duration,q.delay,q.easing)}(g.timings,E.errors);E.currentAnimateTimings=O;let q,ae=g.styles?g.styles:(0,ft.oB)({});if(5==ae.type)q=this.visitKeyframes(ae,E);else{let Te=g.styles,Fe=!1;if(!Te){Fe=!0;const Ft={};O.easing&&(Ft.easing=O.easing),Te=(0,ft.oB)(Ft)}E.currentTime+=O.duration+O.delay;const at=this.visitStyle(Te,E);at.isEmptyStep=Fe,q=at}return E.currentAnimateTimings=null,{type:4,timings:O,style:q,options:null}}visitStyle(g,E){const O=this._makeStyleAst(g,E);return this._validateStyleAst(O,E),O}_makeStyleAst(g,E){const O=[],q=Array.isArray(g.styles)?g.styles:[g.styles];for(let Fe of q)"string"==typeof Fe?Fe===ft.l3?O.push(Fe):E.errors.push(new a.vHH(3002,!1)):O.push(na(Fe));let ae=!1,Te=null;return O.forEach(Fe=>{if(Fe instanceof Map&&(Fe.has("easing")&&(Te=Fe.get("easing"),Fe.delete("easing")),!ae))for(let at of Fe.values())if(at.toString().indexOf("{{")>=0){ae=!0;break}}),{type:6,styles:O,easing:Te,offset:g.offset,containsDynamicStyles:ae,options:null}}_validateStyleAst(g,E){const O=E.currentAnimateTimings;let q=E.currentTime,ae=E.currentTime;O&&ae>0&&(ae-=O.duration+O.delay),g.styles.forEach(Te=>{"string"!=typeof Te&&Te.forEach((Fe,at)=>{const Ft=E.collectedStyles.get(E.currentQuerySelector),tn=Ft.get(at);let Xt=!0;tn&&(ae!=q&&ae>=tn.startTime&&q<=tn.endTime&&(E.errors.push(function Vt(S,g,E,O,q){return new a.vHH(3010,!1)}()),Xt=!1),ae=tn.startTime),Xt&&Ft.set(at,{startTime:ae,endTime:q}),E.options&&function ba(S,g,E){const O=g.params||{},q=Es(S);q.length&&q.forEach(ae=>{O.hasOwnProperty(ae)||E.push(function Yt(S){return new a.vHH(3001,!1)}())})}(Fe,E.options,E.errors)})})}visitKeyframes(g,E){const O={type:5,styles:[],options:null};if(!E.currentAnimateTimings)return E.errors.push(function Ue(){return new a.vHH(3011,!1)}()),O;let ae=0;const Te=[];let Fe=!1,at=!1,Ft=0;const tn=g.steps.map(gr=>{const ts=this._makeStyleAst(gr,E);let hr=null!=ts.offset?ts.offset:function gi(S){if("string"==typeof S)return null;let g=null;if(Array.isArray(S))S.forEach(E=>{if(E instanceof Map&&E.has("offset")){const O=E;g=parseFloat(O.get("offset")),O.delete("offset")}});else if(S instanceof Map&&S.has("offset")){const E=S;g=parseFloat(E.get("offset")),E.delete("offset")}return g}(ts.styles),nr=0;return null!=hr&&(ae++,nr=ts.offset=hr),at=at||nr<0||nr>1,Fe=Fe||nr<Ft,Ft=nr,Te.push(nr),ts});at&&E.errors.push(function _t(){return new a.vHH(3012,!1)}()),Fe&&E.errors.push(function ln(){return new a.vHH(3200,!1)}());const Xt=g.steps.length;let pi=0;ae>0&&ae<Xt?E.errors.push(function Hn(){return new a.vHH(3202,!1)}()):0==ae&&(pi=1/(Xt-1));const yi=Xt-1,Un=E.currentTime,ti=E.currentAnimateTimings,hi=ti.duration;return tn.forEach((gr,ts)=>{const hr=pi>0?ts==yi?1:pi*ts:Te[ts],nr=hr*hi;E.currentTime=Un+ti.delay+nr,ti.duration=nr,this._validateStyleAst(gr,E),gr.offset=hr,O.styles.push(gr)}),O}visitReference(g,E){return{type:8,animation:Ur(this,Xi(g.animation),E),options:Eo(g.options)}}visitAnimateChild(g,E){return E.depCount++,{type:9,options:Eo(g.options)}}visitAnimateRef(g,E){return{type:10,animation:this.visitReference(g.animation,E),options:Eo(g.options)}}visitQuery(g,E){const O=E.currentQuerySelector,q=g.options||{};E.queryCount++,E.currentQuery=g;const[ae,Te]=function Fs(S){const g=!!S.split(/\s*,\s*/).find(E=>":self"==E);return g&&(S=S.replace(si,"")),S=S.replace(/@\*/g,vn).replace(/@\w+/g,E=>vn+"-"+E.slice(1)).replace(/:animating/g,Di),[S,g]}(g.selector);E.currentQuerySelector=O.length?O+" "+ae:ae,qn(E.collectedStyles,E.currentQuerySelector,new Map);const Fe=Ur(this,Xi(g.animation),E);return E.currentQuery=null,E.currentQuerySelector=O,{type:11,selector:ae,limit:q.limit||0,optional:!!q.optional,includeSelf:Te,animation:Fe,originalSelector:g.selector,options:Eo(g.options)}}visitStagger(g,E){E.currentQuery||E.errors.push(function Gi(){return new a.vHH(3013,!1)}());const O="full"===g.timings?{duration:0,delay:0,easing:"full"}:bn(g.timings,E.errors,!0);return{type:12,animation:Ur(this,Xi(g.animation),E),timings:O,options:null}}}class vr{constructor(g){this.errors=g,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Eo(S){return S?(S=ws(S)).params&&(S.params=function as(S){return S?ws(S):null}(S.params)):S={},S}function bo(S,g,E){return{duration:S,delay:g,easing:E}}function wr(S,g,E,O,q,ae,Te=null,Fe=!1){return{type:1,element:S,keyframes:g,preStyleProps:E,postStyleProps:O,duration:q,delay:ae,totalTime:q+ae,easing:Te,subTimeline:Fe}}class qs{constructor(){this._map=new Map}get(g){return this._map.get(g)||[]}append(g,E){let O=this._map.get(g);O||this._map.set(g,O=[]),O.push(...E)}has(g){return this._map.has(g)}clear(){this._map.clear()}}const No=new RegExp(":enter","g"),Na=new RegExp(":leave","g");function oo(S,g,E,O,q,ae=new Map,Te=new Map,Fe,at,Ft=[]){return(new Ca).buildKeyframes(S,g,E,O,q,ae,Te,Fe,at,Ft)}class Ca{buildKeyframes(g,E,O,q,ae,Te,Fe,at,Ft,tn=[]){Ft=Ft||new qs;const Xt=new ao(g,E,Ft,q,ae,tn,[]);Xt.options=at;const pi=at.delay?dr(at.delay):0;Xt.currentTimeline.delayNextStep(pi),Xt.currentTimeline.setStyles([Te],null,Xt.errors,at),Ur(this,O,Xt);const yi=Xt.timelines.filter(Un=>Un.containsAnimation());if(yi.length&&Fe.size){let Un;for(let ti=yi.length-1;ti>=0;ti--){const hi=yi[ti];if(hi.element===E){Un=hi;break}}Un&&!Un.allowOnlyTimelineStyles()&&Un.setStyles([Fe],null,Xt.errors,at)}return yi.length?yi.map(Un=>Un.buildKeyframes()):[wr(E,[],[],[],0,pi,"",!1)]}visitTrigger(g,E){}visitState(g,E){}visitTransition(g,E){}visitAnimateChild(g,E){const O=E.subInstructions.get(E.element);if(O){const q=E.createSubContext(g.options),ae=E.currentTimeline.currentTime,Te=this._visitSubInstructions(O,q,q.options);ae!=Te&&E.transformIntoNewTimeline(Te)}E.previousNode=g}visitAnimateRef(g,E){const O=E.createSubContext(g.options);O.transformIntoNewTimeline(),this.visitReference(g.animation,O),E.transformIntoNewTimeline(O.currentTimeline.currentTime),E.previousNode=g}_visitSubInstructions(g,E,O){let ae=E.currentTimeline.currentTime;const Te=null!=O.duration?dr(O.duration):null,Fe=null!=O.delay?dr(O.delay):null;return 0!==Te&&g.forEach(at=>{const Ft=E.appendInstructionToTimeline(at,Te,Fe);ae=Math.max(ae,Ft.duration+Ft.delay)}),ae}visitReference(g,E){E.updateOptions(g.options,!0),Ur(this,g.animation,E),E.previousNode=g}visitSequence(g,E){const O=E.subContextCount;let q=E;const ae=g.options;if(ae&&(ae.params||ae.delay)&&(q=E.createSubContext(ae),q.transformIntoNewTimeline(),null!=ae.delay)){6==q.previousNode.type&&(q.currentTimeline.snapshotCurrentStyles(),q.previousNode=Qr);const Te=dr(ae.delay);q.delayNextStep(Te)}g.steps.length&&(g.steps.forEach(Te=>Ur(this,Te,q)),q.currentTimeline.applyStylesToKeyframe(),q.subContextCount>O&&q.transformIntoNewTimeline()),E.previousNode=g}visitGroup(g,E){const O=[];let q=E.currentTimeline.currentTime;const ae=g.options&&g.options.delay?dr(g.options.delay):0;g.steps.forEach(Te=>{const Fe=E.createSubContext(g.options);ae&&Fe.delayNextStep(ae),Ur(this,Te,Fe),q=Math.max(q,Fe.currentTimeline.currentTime),O.push(Fe.currentTimeline)}),O.forEach(Te=>E.currentTimeline.mergeTimelineCollectedStyles(Te)),E.transformIntoNewTimeline(q),E.previousNode=g}_visitTiming(g,E){if(g.dynamic){const O=g.strValue;return bn(E.params?zs(O,E.params,E.errors):O,E.errors)}return{duration:g.duration,delay:g.delay,easing:g.easing}}visitAnimate(g,E){const O=E.currentAnimateTimings=this._visitTiming(g.timings,E),q=E.currentTimeline;O.delay&&(E.incrementTime(O.delay),q.snapshotCurrentStyles());const ae=g.style;5==ae.type?this.visitKeyframes(ae,E):(E.incrementTime(O.duration),this.visitStyle(ae,E),q.applyStylesToKeyframe()),E.currentAnimateTimings=null,E.previousNode=g}visitStyle(g,E){const O=E.currentTimeline,q=E.currentAnimateTimings;!q&&O.hasCurrentStyleProperties()&&O.forwardFrame();const ae=q&&q.easing||g.easing;g.isEmptyStep?O.applyEmptyStep(ae):O.setStyles(g.styles,ae,E.errors,E.options),E.previousNode=g}visitKeyframes(g,E){const O=E.currentAnimateTimings,q=E.currentTimeline.duration,ae=O.duration,Fe=E.createSubContext().currentTimeline;Fe.easing=O.easing,g.styles.forEach(at=>{Fe.forwardTime((at.offset||0)*ae),Fe.setStyles(at.styles,at.easing,E.errors,E.options),Fe.applyStylesToKeyframe()}),E.currentTimeline.mergeTimelineCollectedStyles(Fe),E.transformIntoNewTimeline(q+ae),E.previousNode=g}visitQuery(g,E){const O=E.currentTimeline.currentTime,q=g.options||{},ae=q.delay?dr(q.delay):0;ae&&(6===E.previousNode.type||0==O&&E.currentTimeline.hasCurrentStyleProperties())&&(E.currentTimeline.snapshotCurrentStyles(),E.previousNode=Qr);let Te=O;const Fe=E.invokeQuery(g.selector,g.originalSelector,g.limit,g.includeSelf,!!q.optional,E.errors);E.currentQueryTotal=Fe.length;let at=null;Fe.forEach((Ft,tn)=>{E.currentQueryIndex=tn;const Xt=E.createSubContext(g.options,Ft);ae&&Xt.delayNextStep(ae),Ft===E.element&&(at=Xt.currentTimeline),Ur(this,g.animation,Xt),Xt.currentTimeline.applyStylesToKeyframe(),Te=Math.max(Te,Xt.currentTimeline.currentTime)}),E.currentQueryIndex=0,E.currentQueryTotal=0,E.transformIntoNewTimeline(Te),at&&(E.currentTimeline.mergeTimelineCollectedStyles(at),E.currentTimeline.snapshotCurrentStyles()),E.previousNode=g}visitStagger(g,E){const O=E.parentContext,q=E.currentTimeline,ae=g.timings,Te=Math.abs(ae.duration),Fe=Te*(E.currentQueryTotal-1);let at=Te*E.currentQueryIndex;switch(ae.duration<0?"reverse":ae.easing){case"reverse":at=Fe-at;break;case"full":at=O.currentStaggerTime}const tn=E.currentTimeline;at&&tn.delayNextStep(at);const Xt=tn.currentTime;Ur(this,g.animation,E),E.previousNode=g,O.currentStaggerTime=q.currentTime-Xt+(q.startTime-O.currentTimeline.startTime)}}const Qr={};class ao{constructor(g,E,O,q,ae,Te,Fe,at){this._driver=g,this.element=E,this.subInstructions=O,this._enterClassName=q,this._leaveClassName=ae,this.errors=Te,this.timelines=Fe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Qr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=at||new Br(this._driver,E,0),Fe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(g,E){if(!g)return;const O=g;let q=this.options;null!=O.duration&&(q.duration=dr(O.duration)),null!=O.delay&&(q.delay=dr(O.delay));const ae=O.params;if(ae){let Te=q.params;Te||(Te=this.options.params={}),Object.keys(ae).forEach(Fe=>{(!E||!Te.hasOwnProperty(Fe))&&(Te[Fe]=zs(ae[Fe],Te,this.errors))})}}_copyOptions(){const g={};if(this.options){const E=this.options.params;if(E){const O=g.params={};Object.keys(E).forEach(q=>{O[q]=E[q]})}}return g}createSubContext(g=null,E,O){const q=E||this.element,ae=new ao(this._driver,q,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(q,O||0));return ae.previousNode=this.previousNode,ae.currentAnimateTimings=this.currentAnimateTimings,ae.options=this._copyOptions(),ae.updateOptions(g),ae.currentQueryIndex=this.currentQueryIndex,ae.currentQueryTotal=this.currentQueryTotal,ae.parentContext=this,this.subContextCount++,ae}transformIntoNewTimeline(g){return this.previousNode=Qr,this.currentTimeline=this.currentTimeline.fork(this.element,g),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(g,E,O){const q={duration:E??g.duration,delay:this.currentTimeline.currentTime+(O??0)+g.delay,easing:""},ae=new Io(this._driver,g.element,g.keyframes,g.preStyleProps,g.postStyleProps,q,g.stretchStartingKeyframe);return this.timelines.push(ae),q}incrementTime(g){this.currentTimeline.forwardTime(this.currentTimeline.duration+g)}delayNextStep(g){g>0&&this.currentTimeline.delayNextStep(g)}invokeQuery(g,E,O,q,ae,Te){let Fe=[];if(q&&Fe.push(this.element),g.length>0){g=(g=g.replace(No,"."+this._enterClassName)).replace(Na,"."+this._leaveClassName);let Ft=this._driver.query(this.element,g,1!=O);0!==O&&(Ft=O<0?Ft.slice(Ft.length+O,Ft.length):Ft.slice(0,O)),Fe.push(...Ft)}return!ae&&0==Fe.length&&Te.push(function Ei(S){return new a.vHH(3014,!1)}()),Fe}}class Br{constructor(g,E,O,q){this._driver=g,this.element=E,this.startTime=O,this._elementTimelineStylesLookup=q,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(E),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(E,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(g){const E=1===this._keyframes.size&&this._pendingStyles.size;this.duration||E?(this.forwardTime(this.currentTime+g),E&&this.snapshotCurrentStyles()):this.startTime+=g}fork(g,E){return this.applyStylesToKeyframe(),new Br(this._driver,g,E||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(g){this.applyStylesToKeyframe(),this.duration=g,this._loadKeyframe()}_updateStyle(g,E){this._localTimelineStyles.set(g,E),this._globalTimelineStyles.set(g,E),this._styleSummary.set(g,{time:this.currentTime,value:E})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(g){g&&this._previousKeyframe.set("easing",g);for(let[E,O]of this._globalTimelineStyles)this._backFill.set(E,O||ft.l3),this._currentKeyframe.set(E,ft.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(g,E,O,q){E&&this._previousKeyframe.set("easing",E);const ae=q&&q.params||{},Te=function ls(S,g){const E=new Map;let O;return S.forEach(q=>{if("*"===q){O=O||g.keys();for(let ae of O)E.set(ae,ft.l3)}else ss(q,E)}),E}(g,this._globalTimelineStyles);for(let[Fe,at]of Te){const Ft=zs(at,ae,O);this._pendingStyles.set(Fe,Ft),this._localTimelineStyles.has(Fe)||this._backFill.set(Fe,this._globalTimelineStyles.get(Fe)??ft.l3),this._updateStyle(Fe,Ft)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((g,E)=>{this._currentKeyframe.set(E,g)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((g,E)=>{this._currentKeyframe.has(E)||this._currentKeyframe.set(E,g)}))}snapshotCurrentStyles(){for(let[g,E]of this._localTimelineStyles)this._pendingStyles.set(g,E),this._updateStyle(g,E)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const g=[];for(let E in this._currentKeyframe)g.push(E);return g}mergeTimelineCollectedStyles(g){g._styleSummary.forEach((E,O)=>{const q=this._styleSummary.get(O);(!q||E.time>q.time)&&this._updateStyle(O,E.value)})}buildKeyframes(){this.applyStylesToKeyframe();const g=new Set,E=new Set,O=1===this._keyframes.size&&0===this.duration;let q=[];this._keyframes.forEach((Fe,at)=>{const Ft=ss(Fe,new Map,this._backFill);Ft.forEach((tn,Xt)=>{tn===ft.k1?g.add(Xt):tn===ft.l3&&E.add(Xt)}),O||Ft.set("offset",at/this.duration),q.push(Ft)});const ae=g.size?Ts(g.values()):[],Te=E.size?Ts(E.values()):[];if(O){const Fe=q[0],at=new Map(Fe);Fe.set("offset",0),at.set("offset",1),q=[Fe,at]}return wr(this.element,q,ae,Te,this.duration,this.startTime,this.easing,!1)}}class Io extends Br{constructor(g,E,O,q,ae,Te,Fe=!1){super(g,E,Te.delay),this.keyframes=O,this.preStyleProps=q,this.postStyleProps=ae,this._stretchStartingKeyframe=Fe,this.timings={duration:Te.duration,delay:Te.delay,easing:Te.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let g=this.keyframes,{delay:E,duration:O,easing:q}=this.timings;if(this._stretchStartingKeyframe&&E){const ae=[],Te=O+E,Fe=E/Te,at=ss(g[0]);at.set("offset",0),ae.push(at);const Ft=ss(g[0]);Ft.set("offset",Jr(Fe)),ae.push(Ft);const tn=g.length-1;for(let Xt=1;Xt<=tn;Xt++){let pi=ss(g[Xt]);const yi=pi.get("offset");pi.set("offset",Jr((E+yi*O)/Te)),ae.push(pi)}O=Te,E=0,q="",g=ae}return wr(this.element,g,this.preStyleProps,this.postStyleProps,O,E,q,!0)}}function Jr(S,g=3){const E=Math.pow(10,g-1);return Math.round(S*E)/E}class go{}const Po=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class lo extends go{normalizePropertyName(g,E){return Ds(g)}normalizeStyleValue(g,E,O,q){let ae="";const Te=O.toString().trim();if(Po.has(E)&&0!==O&&"0"!==O)if("number"==typeof O)ae="px";else{const Fe=O.match(/^[+-]?[\d\.]+([a-z]*)$/);Fe&&0==Fe[1].length&&q.push(function On(S,g){return new a.vHH(3005,!1)}())}return Te+ae}}function mo(S,g,E,O,q,ae,Te,Fe,at,Ft,tn,Xt,pi){return{type:0,element:S,triggerName:g,isRemovalTransition:q,fromState:E,fromStyles:ae,toState:O,toStyles:Te,timelines:Fe,queriedElements:at,preStyleProps:Ft,postStyleProps:tn,totalTime:Xt,errors:pi}}const lr={};class _o{constructor(g,E,O){this._triggerName=g,this.ast=E,this._stateStyles=O}match(g,E,O,q){return function Ls(S,g,E,O,q){return S.some(ae=>ae(g,E,O,q))}(this.ast.matchers,g,E,O,q)}buildStyles(g,E,O){let q=this._stateStyles.get("*");return void 0!==g&&(q=this._stateStyles.get(g?.toString())||q),q?q.buildStyles(E,O):new Map}build(g,E,O,q,ae,Te,Fe,at,Ft,tn){const Xt=[],pi=this.ast.options&&this.ast.options.params||lr,Un=this.buildStyles(O,Fe&&Fe.params||lr,Xt),ti=at&&at.params||lr,hi=this.buildStyles(q,ti,Xt),gr=new Set,ts=new Map,hr=new Map,nr="void"===q,Tl={params:Zi(ti,pi),delay:this.ast.options?.delay},Wo=tn?[]:oo(g,E,this.ast.animation,ae,Te,Un,hi,Tl,Ft,Xt);let Ao=0;if(Wo.forEach(xi=>{Ao=Math.max(xi.duration+xi.delay,Ao)}),Xt.length)return mo(E,this._triggerName,O,q,nr,Un,hi,[],[],ts,hr,Ao,Xt);Wo.forEach(xi=>{const vu=xi.element,wu=qn(ts,vu,new Set);xi.preStyleProps.forEach(su=>wu.add(su));const Jl=qn(hr,vu,new Set);xi.postStyleProps.forEach(su=>Jl.add(su)),vu!==E&&gr.add(vu)});const Dl=Ts(gr.values());return mo(E,this._triggerName,O,q,nr,Un,hi,Wo,Dl,ts,hr,Ao)}}function Zi(S,g){const E=ws(g);for(const O in S)S.hasOwnProperty(O)&&null!=S[O]&&(E[O]=S[O]);return E}class da{constructor(g,E,O){this.styles=g,this.defaultParams=E,this.normalizer=O}buildStyles(g,E){const O=new Map,q=ws(this.defaultParams);return Object.keys(g).forEach(ae=>{const Te=g[ae];null!==Te&&(q[ae]=Te)}),this.styles.styles.forEach(ae=>{"string"!=typeof ae&&ae.forEach((Te,Fe)=>{Te&&(Te=zs(Te,q,E));const at=this.normalizer.normalizePropertyName(Fe,E);Te=this.normalizer.normalizeStyleValue(Fe,at,Te,E),O.set(at,Te)})}),O}}class Vo{constructor(g,E,O){this.name=g,this.ast=E,this._normalizer=O,this.transitionFactories=[],this.states=new Map,E.states.forEach(q=>{this.states.set(q.name,new da(q.style,q.options&&q.options.params||{},O))}),ha(this.states,"true","1"),ha(this.states,"false","0"),E.transitions.forEach(q=>{this.transitionFactories.push(new _o(g,q,this.states))}),this.fallbackTransition=function Gr(S,g,E){return new _o(S,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Te,Fe)=>!0],options:null,queryCount:0,depCount:0},g)}(g,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(g,E,O,q){return this.transitionFactories.find(Te=>Te.match(g,E,O,q))||null}matchStyles(g,E,O){return this.fallbackTransition.buildStyles(g,E,O)}}function ha(S,g,E){S.has(g)?S.has(E)||S.set(E,S.get(g)):S.has(E)&&S.set(g,S.get(E))}const ur=new qs;class Ii{constructor(g,E,O){this.bodyNode=g,this._driver=E,this._normalizer=O,this._animations=new Map,this._playersById=new Map,this.players=[]}register(g,E){const O=[],ae=ui(this._driver,E,O,[]);if(O.length)throw function Qt(S){return new a.vHH(3503,!1)}();this._animations.set(g,ae)}_buildPlayer(g,E,O){const q=g.element,ae=ii(0,this._normalizer,0,g.keyframes,E,O);return this._driver.animate(q,ae,g.duration,g.delay,g.easing,[],!0)}create(g,E,O={}){const q=[],ae=this._animations.get(g);let Te;const Fe=new Map;if(ae?(Te=oo(this._driver,E,ae,Ce,dt,new Map,new Map,O,ur,q),Te.forEach(tn=>{const Xt=qn(Fe,tn.element,new Map);tn.postStyleProps.forEach(pi=>Xt.set(pi,null))})):(q.push(function Ni(){return new a.vHH(3300,!1)}()),Te=[]),q.length)throw function Vi(S){return new a.vHH(3504,!1)}();Fe.forEach((tn,Xt)=>{tn.forEach((pi,yi)=>{tn.set(yi,this._driver.computeStyle(Xt,yi,ft.l3))})});const Ft=Ui(Te.map(tn=>{const Xt=Fe.get(tn.element);return this._buildPlayer(tn,new Map,Xt)}));return this._playersById.set(g,Ft),Ft.onDestroy(()=>this.destroy(g)),this.players.push(Ft),Ft}destroy(g){const E=this._getPlayer(g);E.destroy(),this._playersById.delete(g);const O=this.players.indexOf(E);O>=0&&this.players.splice(O,1)}_getPlayer(g){const E=this._playersById.get(g);if(!E)throw function Yi(S){return new a.vHH(3301,!1)}();return E}listen(g,E,O,q){const ae=gs(E,"","","");return or(this._getPlayer(g),O,ae,q),()=>{}}command(g,E,O,q){if("register"==O)return void this.register(g,q[0]);if("create"==O)return void this.create(g,E,q[0]||{});const ae=this._getPlayer(g);switch(O){case"play":ae.play();break;case"pause":ae.pause();break;case"reset":ae.reset();break;case"restart":ae.restart();break;case"finish":ae.finish();break;case"init":ae.init();break;case"setPosition":ae.setPosition(parseFloat(q[0]));break;case"destroy":this.destroy(g)}}}const Ta="ng-animate-queued",Uo="ng-animate-disabled",To=[],Vs={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Jt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xn="__ng_removed";class Zs{constructor(g,E=""){this.namespaceId=E;const O=g&&g.hasOwnProperty("value");if(this.value=function Pt(S){return S??null}(O?g.value:g),O){const ae=ws(g);delete ae.value,this.options=ae}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(g){const E=g.params;if(E){const O=this.options.params;Object.keys(E).forEach(q=>{null==O[q]&&(O[q]=E[q])})}}}const ms="void",Wn=new Zs(ms);class ee{constructor(g,E,O){this.id=g,this.hostElement=E,this._engine=O,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+g,_s(E,this._hostClassName)}listen(g,E,O,q){if(!this._triggers.has(E))throw function Kr(S,g){return new a.vHH(3302,!1)}();if(null==O||0==O.length)throw function sr(S){return new a.vHH(3303,!1)}();if(!function Lr(S){return"start"==S||"done"==S}(O))throw function Tr(S,g){return new a.vHH(3400,!1)}();const ae=qn(this._elementListeners,g,[]),Te={name:E,phase:O,callback:q};ae.push(Te);const Fe=qn(this._engine.statesByElement,g,new Map);return Fe.has(E)||(_s(g,Ct),_s(g,Ct+"-"+E),Fe.set(E,Wn)),()=>{this._engine.afterFlush(()=>{const at=ae.indexOf(Te);at>=0&&ae.splice(at,1),this._triggers.has(E)||Fe.delete(E)})}}register(g,E){return!this._triggers.has(g)&&(this._triggers.set(g,E),!0)}_getTrigger(g){const E=this._triggers.get(g);if(!E)throw function _r(S){return new a.vHH(3401,!1)}();return E}trigger(g,E,O,q=!0){const ae=this._getTrigger(E),Te=new $(this.id,E,g);let Fe=this._engine.statesByElement.get(g);Fe||(_s(g,Ct),_s(g,Ct+"-"+E),this._engine.statesByElement.set(g,Fe=new Map));let at=Fe.get(E);const Ft=new Zs(O,this.id);if(!(O&&O.hasOwnProperty("value"))&&at&&Ft.absorbOptions(at.options),Fe.set(E,Ft),at||(at=Wn),Ft.value!==ms&&at.value===Ft.value){if(!function ra(S,g){const E=Object.keys(S),O=Object.keys(g);if(E.length!=O.length)return!1;for(let q=0;q<E.length;q++){const ae=E[q];if(!g.hasOwnProperty(ae)||S[ae]!==g[ae])return!1}return!0}(at.params,Ft.params)){const ti=[],hi=ae.matchStyles(at.value,at.params,ti),gr=ae.matchStyles(Ft.value,Ft.params,ti);ti.length?this._engine.reportError(ti):this._engine.afterFlush(()=>{po(g,hi),ki(g,gr)})}return}const pi=qn(this._engine.playersByElement,g,[]);pi.forEach(ti=>{ti.namespaceId==this.id&&ti.triggerName==E&&ti.queued&&ti.destroy()});let yi=ae.matchTransition(at.value,Ft.value,g,Ft.params),Un=!1;if(!yi){if(!q)return;yi=ae.fallbackTransition,Un=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:E,transition:yi,fromState:at,toState:Ft,player:Te,isFallbackTransition:Un}),Un||(_s(g,Ta),Te.onStart(()=>{fa(g,Ta)})),Te.onDone(()=>{let ti=this.players.indexOf(Te);ti>=0&&this.players.splice(ti,1);const hi=this._engine.playersByElement.get(g);if(hi){let gr=hi.indexOf(Te);gr>=0&&hi.splice(gr,1)}}),this.players.push(Te),pi.push(Te),Te}deregister(g){this._triggers.delete(g),this._engine.statesByElement.forEach(E=>E.delete(g)),this._elementListeners.forEach((E,O)=>{this._elementListeners.set(O,E.filter(q=>q.name!=g))})}clearElementCache(g){this._engine.statesByElement.delete(g),this._elementListeners.delete(g);const E=this._engine.playersByElement.get(g);E&&(E.forEach(O=>O.destroy()),this._engine.playersByElement.delete(g))}_signalRemovalForInnerTriggers(g,E){const O=this._engine.driver.query(g,vn,!0);O.forEach(q=>{if(q[Xn])return;const ae=this._engine.fetchNamespacesByElement(q);ae.size?ae.forEach(Te=>Te.triggerLeaveAnimation(q,E,!1,!0)):this.clearElementCache(q)}),this._engine.afterFlushAnimationsDone(()=>O.forEach(q=>this.clearElementCache(q)))}triggerLeaveAnimation(g,E,O,q){const ae=this._engine.statesByElement.get(g),Te=new Map;if(ae){const Fe=[];if(ae.forEach((at,Ft)=>{if(Te.set(Ft,at.value),this._triggers.has(Ft)){const tn=this.trigger(g,Ft,ms,q);tn&&Fe.push(tn)}}),Fe.length)return this._engine.markElementAsRemoved(this.id,g,!0,E,Te),O&&Ui(Fe).onDone(()=>this._engine.processLeaveNode(g)),!0}return!1}prepareLeaveAnimationListeners(g){const E=this._elementListeners.get(g),O=this._engine.statesByElement.get(g);if(E&&O){const q=new Set;E.forEach(ae=>{const Te=ae.name;if(q.has(Te))return;q.add(Te);const at=this._triggers.get(Te).fallbackTransition,Ft=O.get(Te)||Wn,tn=new Zs(ms),Xt=new $(this.id,Te,g);this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:Te,transition:at,fromState:Ft,toState:tn,player:Xt,isFallbackTransition:!0})})}}removeNode(g,E){const O=this._engine;if(g.childElementCount&&this._signalRemovalForInnerTriggers(g,E),this.triggerLeaveAnimation(g,E,!0))return;let q=!1;if(O.totalAnimations){const ae=O.players.length?O.playersByQueriedElement.get(g):[];if(ae&&ae.length)q=!0;else{let Te=g;for(;Te=Te.parentNode;)if(O.statesByElement.get(Te)){q=!0;break}}}if(this.prepareLeaveAnimationListeners(g),q)O.markElementAsRemoved(this.id,g,!1,E);else{const ae=g[Xn];(!ae||ae===Vs)&&(O.afterFlush(()=>this.clearElementCache(g)),O.destroyInnerAnimations(g),O._onRemovalComplete(g,E))}}insertNode(g,E){_s(g,this._hostClassName)}drainQueuedTransitions(g){const E=[];return this._queue.forEach(O=>{const q=O.player;if(q.destroyed)return;const ae=O.element,Te=this._elementListeners.get(ae);Te&&Te.forEach(Fe=>{if(Fe.name==O.triggerName){const at=gs(ae,O.triggerName,O.fromState.value,O.toState.value);at._data=g,or(O.player,Fe.phase,at,Fe.callback)}}),q.markedForDestroy?this._engine.afterFlush(()=>{q.destroy()}):E.push(O)}),this._queue=[],E.sort((O,q)=>{const ae=O.transition.ast.depCount,Te=q.transition.ast.depCount;return 0==ae||0==Te?ae-Te:this._engine.driver.containsElement(O.element,q.element)?1:-1})}destroy(g){this.players.forEach(E=>E.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,g)}elementContainsData(g){let E=!1;return this._elementListeners.has(g)&&(E=!0),E=!!this._queue.find(O=>O.element===g)||E,E}}class Y{constructor(g,E,O){this.bodyNode=g,this.driver=E,this._normalizer=O,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(q,ae)=>{}}_onRemovalComplete(g,E){this.onRemovalComplete(g,E)}get queuedPlayers(){const g=[];return this._namespaceList.forEach(E=>{E.players.forEach(O=>{O.queued&&g.push(O)})}),g}createNamespace(g,E){const O=new ee(g,E,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,E)?this._balanceNamespaceList(O,E):(this.newHostElements.set(E,O),this.collectEnterElement(E)),this._namespaceLookup[g]=O}_balanceNamespaceList(g,E){const O=this._namespaceList,q=this.namespacesByHostElement;if(O.length-1>=0){let Te=!1,Fe=this.driver.getParentElement(E);for(;Fe;){const at=q.get(Fe);if(at){const Ft=O.indexOf(at);O.splice(Ft+1,0,g),Te=!0;break}Fe=this.driver.getParentElement(Fe)}Te||O.unshift(g)}else O.push(g);return q.set(E,g),g}register(g,E){let O=this._namespaceLookup[g];return O||(O=this.createNamespace(g,E)),O}registerTrigger(g,E,O){let q=this._namespaceLookup[g];q&&q.register(E,O)&&this.totalAnimations++}destroy(g,E){if(!g)return;const O=this._fetchNamespace(g);this.afterFlush(()=>{this.namespacesByHostElement.delete(O.hostElement),delete this._namespaceLookup[g];const q=this._namespaceList.indexOf(O);q>=0&&this._namespaceList.splice(q,1)}),this.afterFlushAnimationsDone(()=>O.destroy(E))}_fetchNamespace(g){return this._namespaceLookup[g]}fetchNamespacesByElement(g){const E=new Set,O=this.statesByElement.get(g);if(O)for(let q of O.values())if(q.namespaceId){const ae=this._fetchNamespace(q.namespaceId);ae&&E.add(ae)}return E}trigger(g,E,O,q){if(Fn(E)){const ae=this._fetchNamespace(g);if(ae)return ae.trigger(E,O,q),!0}return!1}insertNode(g,E,O,q){if(!Fn(E))return;const ae=E[Xn];if(ae&&ae.setForRemoval){ae.setForRemoval=!1,ae.setForMove=!0;const Te=this.collectedLeaveElements.indexOf(E);Te>=0&&this.collectedLeaveElements.splice(Te,1)}if(g){const Te=this._fetchNamespace(g);Te&&Te.insertNode(E,O)}q&&this.collectEnterElement(E)}collectEnterElement(g){this.collectedEnterElements.push(g)}markElementAsDisabled(g,E){E?this.disabledNodes.has(g)||(this.disabledNodes.add(g),_s(g,Uo)):this.disabledNodes.has(g)&&(this.disabledNodes.delete(g),fa(g,Uo))}removeNode(g,E,O,q){if(Fn(E)){const ae=g?this._fetchNamespace(g):null;if(ae?ae.removeNode(E,q):this.markElementAsRemoved(g,E,!1,q),O){const Te=this.namespacesByHostElement.get(E);Te&&Te.id!==g&&Te.removeNode(E,q)}}else this._onRemovalComplete(E,q)}markElementAsRemoved(g,E,O,q,ae){this.collectedLeaveElements.push(E),E[Xn]={namespaceId:g,setForRemoval:q,hasAnimation:O,removedBeforeQueried:!1,previousTriggersValues:ae}}listen(g,E,O,q,ae){return Fn(E)?this._fetchNamespace(g).listen(E,O,q,ae):()=>{}}_buildInstruction(g,E,O,q,ae){return g.transition.build(this.driver,g.element,g.fromState.value,g.toState.value,O,q,g.fromState.options,g.toState.options,E,ae)}destroyInnerAnimations(g){let E=this.driver.query(g,vn,!0);E.forEach(O=>this.destroyActiveAnimationsForElement(O)),0!=this.playersByQueriedElement.size&&(E=this.driver.query(g,Di,!0),E.forEach(O=>this.finishActiveQueriedAnimationOnElement(O)))}destroyActiveAnimationsForElement(g){const E=this.playersByElement.get(g);E&&E.forEach(O=>{O.queued?O.markedForDestroy=!0:O.destroy()})}finishActiveQueriedAnimationOnElement(g){const E=this.playersByQueriedElement.get(g);E&&E.forEach(O=>O.finish())}whenRenderingDone(){return new Promise(g=>{if(this.players.length)return Ui(this.players).onDone(()=>g());g()})}processLeaveNode(g){const E=g[Xn];if(E&&E.setForRemoval){if(g[Xn]=Vs,E.namespaceId){this.destroyInnerAnimations(g);const O=this._fetchNamespace(E.namespaceId);O&&O.clearElementCache(g)}this._onRemovalComplete(g,E.setForRemoval)}g.classList?.contains(Uo)&&this.markElementAsDisabled(g,!1),this.driver.query(g,".ng-animate-disabled",!0).forEach(O=>{this.markElementAsDisabled(O,!1)})}flush(g=-1){let E=[];if(this.newHostElements.size&&(this.newHostElements.forEach((O,q)=>this._balanceNamespaceList(O,q)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let O=0;O<this.collectedEnterElements.length;O++)_s(this.collectedEnterElements[O],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const O=[];try{E=this._flushAnimations(O,g)}finally{for(let q=0;q<O.length;q++)O[q]()}}else for(let O=0;O<this.collectedLeaveElements.length;O++)this.processLeaveNode(this.collectedLeaveElements[O]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(O=>O()),this._flushFns=[],this._whenQuietFns.length){const O=this._whenQuietFns;this._whenQuietFns=[],E.length?Ui(E).onDone(()=>{O.forEach(q=>q())}):O.forEach(q=>q())}}reportError(g){throw function Qi(S){return new a.vHH(3402,!1)}()}_flushAnimations(g,E){const O=new qs,q=[],ae=new Map,Te=[],Fe=new Map,at=new Map,Ft=new Map,tn=new Set;this.disabledNodes.forEach(Qn=>{tn.add(Qn);const Ri=this.driver.query(Qn,".ng-animate-queued",!0);for(let Fi=0;Fi<Ri.length;Fi++)tn.add(Ri[Fi])});const Xt=this.bodyNode,pi=Array.from(this.statesByElement.keys()),yi=zr(pi,this.collectedEnterElements),Un=new Map;let ti=0;yi.forEach((Qn,Ri)=>{const Fi=Ce+ti++;Un.set(Ri,Fi),Qn.forEach(ns=>_s(ns,Fi))});const hi=[],gr=new Set,ts=new Set;for(let Qn=0;Qn<this.collectedLeaveElements.length;Qn++){const Ri=this.collectedLeaveElements[Qn],Fi=Ri[Xn];Fi&&Fi.setForRemoval&&(hi.push(Ri),gr.add(Ri),Fi.hasAnimation?this.driver.query(Ri,".ng-star-inserted",!0).forEach(ns=>gr.add(ns)):ts.add(Ri))}const hr=new Map,nr=zr(pi,Array.from(gr));nr.forEach((Qn,Ri)=>{const Fi=dt+ti++;hr.set(Ri,Fi),Qn.forEach(ns=>_s(ns,Fi))}),g.push(()=>{yi.forEach((Qn,Ri)=>{const Fi=Un.get(Ri);Qn.forEach(ns=>fa(ns,Fi))}),nr.forEach((Qn,Ri)=>{const Fi=hr.get(Ri);Qn.forEach(ns=>fa(ns,Fi))}),hi.forEach(Qn=>{this.processLeaveNode(Qn)})});const Tl=[],Wo=[];for(let Qn=this._namespaceList.length-1;Qn>=0;Qn--)this._namespaceList[Qn].drainQueuedTransitions(E).forEach(Fi=>{const ns=Fi.player,Ma=Fi.element;if(Tl.push(ns),this.collectedEnterElements.length){const rs=Ma[Xn];if(rs&&rs.setForMove){if(rs.previousTriggersValues&&rs.previousTriggersValues.has(Fi.triggerName)){const bu=rs.previousTriggersValues.get(Fi.triggerName),Rl=this.statesByElement.get(Fi.element);if(Rl&&Rl.has(Fi.triggerName)){const Iu=Rl.get(Fi.triggerName);Iu.value=bu,Rl.set(Fi.triggerName,Iu)}}return void ns.destroy()}}const Xl=!Xt||!this.driver.containsElement(Xt,Ma),Ga=hr.get(Ma),Eu=Un.get(Ma),fo=this._buildInstruction(Fi,O,Eu,Ga,Xl);if(fo.errors&&fo.errors.length)return void Wo.push(fo);if(Xl)return ns.onStart(()=>po(Ma,fo.fromStyles)),ns.onDestroy(()=>ki(Ma,fo.toStyles)),void q.push(ns);if(Fi.isFallbackTransition)return ns.onStart(()=>po(Ma,fo.fromStyles)),ns.onDestroy(()=>ki(Ma,fo.toStyles)),void q.push(ns);const Wl=[];fo.timelines.forEach(rs=>{rs.stretchStartingKeyframe=!0,this.disabledNodes.has(rs.element)||Wl.push(rs)}),fo.timelines=Wl,O.append(Ma,fo.timelines),Te.push({instruction:fo,player:ns,element:Ma}),fo.queriedElements.forEach(rs=>qn(Fe,rs,[]).push(ns)),fo.preStyleProps.forEach((rs,bu)=>{if(rs.size){let Rl=at.get(bu);Rl||at.set(bu,Rl=new Set),rs.forEach((Iu,Kl)=>Rl.add(Kl))}}),fo.postStyleProps.forEach((rs,bu)=>{let Rl=Ft.get(bu);Rl||Ft.set(bu,Rl=new Set),rs.forEach((Iu,Kl)=>Rl.add(Kl))})});if(Wo.length){const Qn=[];Wo.forEach(Ri=>{Qn.push(function $n(S,g){return new a.vHH(3505,!1)}())}),Tl.forEach(Ri=>Ri.destroy()),this.reportError(Qn)}const Ao=new Map,Dl=new Map;Te.forEach(Qn=>{const Ri=Qn.element;O.has(Ri)&&(Dl.set(Ri,Ri),this._beforeAnimationBuild(Qn.player.namespaceId,Qn.instruction,Ao))}),q.forEach(Qn=>{const Ri=Qn.element;this._getPreviousPlayers(Ri,!1,Qn.namespaceId,Qn.triggerName,null).forEach(ns=>{qn(Ao,Ri,[]).push(ns),ns.destroy()})});const xi=hi.filter(Qn=>Da(Qn,at,Ft)),vu=new Map;cs(vu,this.driver,ts,Ft,ft.l3).forEach(Qn=>{Da(Qn,at,Ft)&&xi.push(Qn)});const Jl=new Map;yi.forEach((Qn,Ri)=>{cs(Jl,this.driver,new Set(Qn),at,ft.k1)}),xi.forEach(Qn=>{const Ri=vu.get(Qn),Fi=Jl.get(Qn);vu.set(Qn,new Map([...Array.from(Ri?.entries()??[]),...Array.from(Fi?.entries()??[])]))});const su=[],Ku=[],ac={};Te.forEach(Qn=>{const{element:Ri,player:Fi,instruction:ns}=Qn;if(O.has(Ri)){if(tn.has(Ri))return Fi.onDestroy(()=>ki(Ri,ns.toStyles)),Fi.disabled=!0,Fi.overrideTotalTime(ns.totalTime),void q.push(Fi);let Ma=ac;if(Dl.size>1){let Ga=Ri;const Eu=[];for(;Ga=Ga.parentNode;){const fo=Dl.get(Ga);if(fo){Ma=fo;break}Eu.push(Ga)}Eu.forEach(fo=>Dl.set(fo,Ma))}const Xl=this._buildAnimation(Fi.namespaceId,ns,Ao,ae,Jl,vu);if(Fi.setRealPlayer(Xl),Ma===ac)su.push(Fi);else{const Ga=this.playersByElement.get(Ma);Ga&&Ga.length&&(Fi.parentPlayer=Ui(Ga)),q.push(Fi)}}else po(Ri,ns.fromStyles),Fi.onDestroy(()=>ki(Ri,ns.toStyles)),Ku.push(Fi),tn.has(Ri)&&q.push(Fi)}),Ku.forEach(Qn=>{const Ri=ae.get(Qn.element);if(Ri&&Ri.length){const Fi=Ui(Ri);Qn.setRealPlayer(Fi)}}),q.forEach(Qn=>{Qn.parentPlayer?Qn.syncPlayerEvents(Qn.parentPlayer):Qn.destroy()});for(let Qn=0;Qn<hi.length;Qn++){const Ri=hi[Qn],Fi=Ri[Xn];if(fa(Ri,dt),Fi&&Fi.hasAnimation)continue;let ns=[];if(Fe.size){let Xl=Fe.get(Ri);Xl&&Xl.length&&ns.push(...Xl);let Ga=this.driver.query(Ri,Di,!0);for(let Eu=0;Eu<Ga.length;Eu++){let fo=Fe.get(Ga[Eu]);fo&&fo.length&&ns.push(...fo)}}const Ma=ns.filter(Xl=>!Xl.destroyed);Ma.length?el(this,Ri,Ma):this.processLeaveNode(Ri)}return hi.length=0,su.forEach(Qn=>{this.players.push(Qn),Qn.onDone(()=>{Qn.destroy();const Ri=this.players.indexOf(Qn);this.players.splice(Ri,1)}),Qn.play()}),su}elementContainsData(g,E){let O=!1;const q=E[Xn];return q&&q.setForRemoval&&(O=!0),this.playersByElement.has(E)&&(O=!0),this.playersByQueriedElement.has(E)&&(O=!0),this.statesByElement.has(E)&&(O=!0),this._fetchNamespace(g).elementContainsData(E)||O}afterFlush(g){this._flushFns.push(g)}afterFlushAnimationsDone(g){this._whenQuietFns.push(g)}_getPreviousPlayers(g,E,O,q,ae){let Te=[];if(E){const Fe=this.playersByQueriedElement.get(g);Fe&&(Te=Fe)}else{const Fe=this.playersByElement.get(g);if(Fe){const at=!ae||ae==ms;Fe.forEach(Ft=>{Ft.queued||!at&&Ft.triggerName!=q||Te.push(Ft)})}}return(O||q)&&(Te=Te.filter(Fe=>!(O&&O!=Fe.namespaceId||q&&q!=Fe.triggerName))),Te}_beforeAnimationBuild(g,E,O){const ae=E.element,Te=E.isRemovalTransition?void 0:g,Fe=E.isRemovalTransition?void 0:E.triggerName;for(const at of E.timelines){const Ft=at.element,tn=Ft!==ae,Xt=qn(O,Ft,[]);this._getPreviousPlayers(Ft,tn,Te,Fe,E.toState).forEach(yi=>{const Un=yi.getRealPlayer();Un.beforeDestroy&&Un.beforeDestroy(),yi.destroy(),Xt.push(yi)})}po(ae,E.fromStyles)}_buildAnimation(g,E,O,q,ae,Te){const Fe=E.triggerName,at=E.element,Ft=[],tn=new Set,Xt=new Set,pi=E.timelines.map(Un=>{const ti=Un.element;tn.add(ti);const hi=ti[Xn];if(hi&&hi.removedBeforeQueried)return new ft.ZN(Un.duration,Un.delay);const gr=ti!==at,ts=function Bo(S){const g=[];return Pa(S,g),g}((O.get(ti)||To).map(Ao=>Ao.getRealPlayer())).filter(Ao=>!!Ao.element&&Ao.element===ti),hr=ae.get(ti),nr=Te.get(ti),Tl=ii(0,this._normalizer,0,Un.keyframes,hr,nr),Wo=this._buildPlayer(Un,Tl,ts);if(Un.subTimeline&&q&&Xt.add(ti),gr){const Ao=new $(g,Fe,ti);Ao.setRealPlayer(Wo),Ft.push(Ao)}return Wo});Ft.forEach(Un=>{qn(this.playersByQueriedElement,Un.element,[]).push(Un),Un.onDone(()=>function fe(S,g,E){let O=S.get(g);if(O){if(O.length){const q=O.indexOf(E);O.splice(q,1)}0==O.length&&S.delete(g)}return O}(this.playersByQueriedElement,Un.element,Un))}),tn.forEach(Un=>_s(Un,wi));const yi=Ui(pi);return yi.onDestroy(()=>{tn.forEach(Un=>fa(Un,wi)),ki(at,E.toStyles)}),Xt.forEach(Un=>{qn(q,Un,[]).push(yi)}),yi}_buildPlayer(g,E,O){return E.length>0?this.driver.animate(g.element,E,g.duration,g.delay,g.easing,O):new ft.ZN(g.duration,g.delay)}}class ${constructor(g,E,O){this.namespaceId=g,this.triggerName=E,this.element=O,this._player=new ft.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(g){this._containsRealPlayer||(this._player=g,this._queuedCallbacks.forEach((E,O)=>{E.forEach(q=>or(g,O,void 0,q))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(g.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(g){this.totalTime=g}syncPlayerEvents(g){const E=this._player;E.triggerCallback&&g.onStart(()=>E.triggerCallback("start")),g.onDone(()=>this.finish()),g.onDestroy(()=>this.destroy())}_queueEvent(g,E){qn(this._queuedCallbacks,g,[]).push(E)}onDone(g){this.queued&&this._queueEvent("done",g),this._player.onDone(g)}onStart(g){this.queued&&this._queueEvent("start",g),this._player.onStart(g)}onDestroy(g){this.queued&&this._queueEvent("destroy",g),this._player.onDestroy(g)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(g){this.queued||this._player.setPosition(g)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(g){const E=this._player;E.triggerCallback&&E.triggerCallback(g)}}function Fn(S){return S&&1===S.nodeType}function Ys(S,g){const E=S.style.display;return S.style.display=g??"none",E}function cs(S,g,E,O,q){const ae=[];E.forEach(at=>ae.push(Ys(at)));const Te=[];O.forEach((at,Ft)=>{const tn=new Map;at.forEach(Xt=>{const pi=g.computeStyle(Ft,Xt,q);tn.set(Xt,pi),(!pi||0==pi.length)&&(Ft[Xn]=Jt,Te.push(Ft))}),S.set(Ft,tn)});let Fe=0;return E.forEach(at=>Ys(at,ae[Fe++])),Te}function zr(S,g){const E=new Map;if(S.forEach(Fe=>E.set(Fe,[])),0==g.length)return E;const q=new Set(g),ae=new Map;function Te(Fe){if(!Fe)return 1;let at=ae.get(Fe);if(at)return at;const Ft=Fe.parentNode;return at=E.has(Ft)?Ft:q.has(Ft)?1:Te(Ft),ae.set(Fe,at),at}return g.forEach(Fe=>{const at=Te(Fe);1!==at&&E.get(at).push(Fe)}),E}function _s(S,g){S.classList?.add(g)}function fa(S,g){S.classList?.remove(g)}function el(S,g,E){Ui(E).onDone(()=>S.processLeaveNode(g))}function Pa(S,g){for(let E=0;E<S.length;E++){const O=S[E];O instanceof ft.ZE?Pa(O.players,g):g.push(O)}}function Da(S,g,E){const O=E.get(S);if(!O)return!1;let q=g.get(S);return q?O.forEach(ae=>q.add(ae)):g.set(S,O),E.delete(S),!0}class Sa{constructor(g,E,O){this.bodyNode=g,this._driver=E,this._normalizer=O,this._triggerCache={},this.onRemovalComplete=(q,ae)=>{},this._transitionEngine=new Y(g,E,O),this._timelineEngine=new Ii(g,E,O),this._transitionEngine.onRemovalComplete=(q,ae)=>this.onRemovalComplete(q,ae)}registerTrigger(g,E,O,q,ae){const Te=g+"-"+q;let Fe=this._triggerCache[Te];if(!Fe){const at=[],tn=ui(this._driver,ae,at,[]);if(at.length)throw function Li(S,g){return new a.vHH(3404,!1)}();Fe=function fr(S,g,E){return new Vo(S,g,E)}(q,tn,this._normalizer),this._triggerCache[Te]=Fe}this._transitionEngine.registerTrigger(E,q,Fe)}register(g,E){this._transitionEngine.register(g,E)}destroy(g,E){this._transitionEngine.destroy(g,E)}onInsert(g,E,O,q){this._transitionEngine.insertNode(g,E,O,q)}onRemove(g,E,O,q){this._transitionEngine.removeNode(g,E,q||!1,O)}disableAnimations(g,E){this._transitionEngine.markElementAsDisabled(g,E)}process(g,E,O,q){if("@"==O.charAt(0)){const[ae,Te]=ot(O);this._timelineEngine.command(ae,E,Te,q)}else this._transitionEngine.trigger(g,E,O,q)}listen(g,E,O,q,ae){if("@"==O.charAt(0)){const[Te,Fe]=ot(O);return this._timelineEngine.listen(Te,E,Fe,ae)}return this._transitionEngine.listen(g,E,O,q,ae)}flush(g=-1){this._transitionEngine.flush(g)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let pa=(()=>{class S{constructor(E,O,q){this._element=E,this._startStyles=O,this._endStyles=q,this._state=0;let ae=S.initialStylesByElement.get(E);ae||S.initialStylesByElement.set(E,ae=new Map),this._initialStyles=ae}start(){this._state<1&&(this._startStyles&&ki(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ki(this._element,this._initialStyles),this._endStyles&&(ki(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(S.initialStylesByElement.delete(this._element),this._startStyles&&(po(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(po(this._element,this._endStyles),this._endStyles=null),ki(this._element,this._initialStyles),this._state=3)}}return S.initialStylesByElement=new WeakMap,S})();function Ho(S){let g=null;return S.forEach((E,O)=>{(function is(S){return"display"===S||"position"===S})(O)&&(g=g||new Map,g.set(O,E))}),g}class qo{constructor(g,E,O,q){this.element=g,this.keyframes=E,this.options=O,this._specialStyles=q,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=O.duration,this._delay=O.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(g=>g()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const g=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,g,this.options),this._finalKeyframe=g.length?g[g.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(g){const E=[];return g.forEach(O=>{E.push(Object.fromEntries(O))}),E}_triggerWebAnimation(g,E,O){return g.animate(this._convertKeyframesToObject(E),O)}onStart(g){this._originalOnStartFns.push(g),this._onStartFns.push(g)}onDone(g){this._originalOnDoneFns.push(g),this._onDoneFns.push(g)}onDestroy(g){this._onDestroyFns.push(g)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(g=>g()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(g=>g()),this._onDestroyFns=[])}setPosition(g){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=g*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const g=new Map;this.hasStarted()&&this._finalKeyframe.forEach((O,q)=>{"offset"!==q&&g.set(q,this._finished?O:Oo(this.element,q))}),this.currentSnapshot=g}triggerCallback(g){const E="start"===g?this._onStartFns:this._onDoneFns;E.forEach(O=>O()),E.length=0}}class ul{validateStyleProperty(g){return!0}validateAnimatableStyleProperty(g){return!0}matchesElement(g,E){return!1}containsElement(g,E){return ze(g,E)}getParentElement(g){return qe(g)}query(g,E,O){return Xe(g,E,O)}computeStyle(g,E,O){return window.getComputedStyle(g)[E]}animate(g,E,O,q,ae,Te=[]){const at={duration:O,delay:q,fill:0==q?"both":"forwards"};ae&&(at.easing=ae);const Ft=new Map,tn=Te.filter(yi=>yi instanceof qo);(function Mo(S,g){return 0===S||0===g})(O,q)&&tn.forEach(yi=>{yi.currentSnapshot.forEach((Un,ti)=>Ft.set(ti,Un))});let Xt=function to(S){return S.length?S[0]instanceof Map?S:S.map(g=>na(g)):[]}(E).map(yi=>ss(yi));Xt=function qi(S,g,E){if(E.size&&g.length){let O=g[0],q=[];if(E.forEach((ae,Te)=>{O.has(Te)||q.push(Te),O.set(Te,ae)}),q.length)for(let ae=1;ae<g.length;ae++){let Te=g[ae];q.forEach(Fe=>Te.set(Fe,Oo(S,Fe)))}}return g}(g,Xt,Ft);const pi=function sa(S,g){let E=null,O=null;return Array.isArray(g)&&g.length?(E=Ho(g[0]),g.length>1&&(O=Ho(g[g.length-1]))):g instanceof Map&&(E=Ho(g)),E||O?new pa(S,E,O):null}(g,Xt);return new qo(g,Xt,at,pi)}}let Ka=(()=>{class S extends ft._j{constructor(E,O){super(),this._nextAnimationId=0,this._renderer=E.createRenderer(O.body,{id:"0",encapsulation:a.ifc.None,styles:[],data:{animation:[]}})}build(E){const O=this._nextAnimationId.toString();this._nextAnimationId++;const q=Array.isArray(E)?(0,ft.vP)(E):E;return cl(this._renderer,null,O,"register",[q]),new kl(O,this._renderer)}}return S.\u0275fac=function(E){return new(E||S)(a.LFG(a.FYo),a.LFG(tt.K0))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac}),S})();class kl extends ft.LC{constructor(g,E){super(),this._id=g,this._renderer=E}create(g,E){return new qa(this._id,g,E||{},this._renderer)}}class qa{constructor(g,E,O,q){this.id=g,this.element=E,this._renderer=q,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",O)}_listen(g,E){return this._renderer.listen(this.element,`@@${this.id}:${g}`,E)}_command(g,...E){return cl(this._renderer,this.element,this.id,g,E)}onDone(g){this._listen("done",g)}onStart(g){this._listen("start",g)}onDestroy(g){this._listen("destroy",g)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(g){this._command("setPosition",g)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function cl(S,g,E,O,q){return S.setProperty(g,`@@${E}:${O}`,q)}const B="@",oe="@.disabled";let W=(()=>{class S{constructor(E,O,q){this.delegate=E,this.engine=O,this._zone=q,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),O.onRemovalComplete=(ae,Te)=>{const Fe=Te?.parentNode(ae);Fe&&Te.removeChild(Fe,ae)}}createRenderer(E,O){const ae=this.delegate.createRenderer(E,O);if(!(E&&O&&O.data&&O.data.animation)){let tn=this._rendererCache.get(ae);return tn||(tn=new ge("",ae,this.engine),this._rendererCache.set(ae,tn)),tn}const Te=O.id,Fe=O.id+"-"+this._currentId;this._currentId++,this.engine.register(Fe,E);const at=tn=>{Array.isArray(tn)?tn.forEach(at):this.engine.registerTrigger(Te,Fe,E,tn.name,tn)};return O.data.animation.forEach(at),new $e(this,Fe,ae,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(E,O,q){E>=0&&E<this._microtaskId?this._zone.run(()=>O(q)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ae=>{const[Te,Fe]=ae;Te(Fe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([O,q]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return S.\u0275fac=function(E){return new(E||S)(a.LFG(a.FYo),a.LFG(Sa),a.LFG(a.R0b))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac}),S})();class ge{constructor(g,E,O){this.namespaceId=g,this.delegate=E,this.engine=O,this.destroyNode=this.delegate.destroyNode?q=>E.destroyNode(q):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(g,E){return this.delegate.createElement(g,E)}createComment(g){return this.delegate.createComment(g)}createText(g){return this.delegate.createText(g)}appendChild(g,E){this.delegate.appendChild(g,E),this.engine.onInsert(this.namespaceId,E,g,!1)}insertBefore(g,E,O,q=!0){this.delegate.insertBefore(g,E,O),this.engine.onInsert(this.namespaceId,E,g,q)}removeChild(g,E,O){this.engine.onRemove(this.namespaceId,E,this.delegate,O)}selectRootElement(g,E){return this.delegate.selectRootElement(g,E)}parentNode(g){return this.delegate.parentNode(g)}nextSibling(g){return this.delegate.nextSibling(g)}setAttribute(g,E,O,q){this.delegate.setAttribute(g,E,O,q)}removeAttribute(g,E,O){this.delegate.removeAttribute(g,E,O)}addClass(g,E){this.delegate.addClass(g,E)}removeClass(g,E){this.delegate.removeClass(g,E)}setStyle(g,E,O,q){this.delegate.setStyle(g,E,O,q)}removeStyle(g,E,O){this.delegate.removeStyle(g,E,O)}setProperty(g,E,O){E.charAt(0)==B&&E==oe?this.disableAnimations(g,!!O):this.delegate.setProperty(g,E,O)}setValue(g,E){this.delegate.setValue(g,E)}listen(g,E,O){return this.delegate.listen(g,E,O)}disableAnimations(g,E){this.engine.disableAnimations(g,E)}}class $e extends ge{constructor(g,E,O,q){super(E,O,q),this.factory=g,this.namespaceId=E}setProperty(g,E,O){E.charAt(0)==B?"."==E.charAt(1)&&E==oe?this.disableAnimations(g,O=void 0===O||!!O):this.engine.process(this.namespaceId,g,E.slice(1),O):this.delegate.setProperty(g,E,O)}listen(g,E,O){if(E.charAt(0)==B){const q=function xt(S){switch(S){case"body":return document.body;case"document":return document;case"window":return window;default:return S}}(g);let ae=E.slice(1),Te="";return ae.charAt(0)!=B&&([ae,Te]=function Bt(S){const g=S.indexOf(".");return[S.substring(0,g),S.slice(g+1)]}(ae)),this.engine.listen(this.namespaceId,q,ae,Te,Fe=>{this.factory.scheduleListenerCallback(Fe._data||-1,O,Fe)})}return this.delegate.listen(g,E,O)}}const tr=[{provide:ft._j,useClass:Ka},{provide:go,useFactory:function Wi(){return new lo}},{provide:Sa,useClass:(()=>{class S extends Sa{constructor(E,O,q,ae){super(E.body,O,q)}ngOnDestroy(){this.flush()}}return S.\u0275fac=function(E){return new(E||S)(a.LFG(tt.K0),a.LFG(Gn),a.LFG(go),a.LFG(a.z2F))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac}),S})()},{provide:a.FYo,useFactory:function cr(S,g,E){return new W(S,g,E)},deps:[m.se,Sa,a.R0b]}],Ki=[{provide:Gn,useFactory:()=>new ul},{provide:a.QbO,useValue:"BrowserAnimations"},...tr],Us=[{provide:Gn,useClass:gn},{provide:a.QbO,useValue:"NoopAnimations"},...tr];let br=(()=>{class S{static withConfig(E){return{ngModule:S,providers:E.disableAnimations?Us:Ki}}}return S.\u0275fac=function(E){return new(E||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:Ki,imports:[m.b2]}),S})();var xr=K(2011);const ma_firebaseConfig={apiKey:"AIzaSyBUgNFS13c48PtIJMzCMPT8qcbDWj12VWU",authDomain:"primeng-authantication.firebaseapp.com",databaseURL:"https://primeng-authantication-default-rtdb.firebaseio.com",projectId:"primeng-authantication",storageBucket:"primeng-authantication.appspot.com",messagingSenderId:"346274216699",appId:"1:346274216699:web:a3904bd29679b7a7b64e5e",measurementId:"G-44F25D0S16"};var yo=K(1205),Qs=K(9751),Zo=K(9646),_a=K(8996),Vr=K(8372),ka=K(4004),Fa=K(3900),jo=K(5813),Fl=K(3942),La=K(5861),L=K(9681),we=K(2090),p=K(4859);const M="firebasestorage.googleapis.com",ie="storageBucket";class Ht extends we.ZR{constructor(g,E){super(Rn(g),`Firebase Storage: ${E} (${Rn(g)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ht.prototype)}_codeEquals(g){return Rn(g)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(g){this.customData.serverResponse=g,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Rn(S){return"storage/"+S}function wn(){return new Ht("unknown","An unknown error occurred, please check the error payload for server response.")}function Ir(){return new Ht("canceled","User canceled the upload/download.")}function As(){return new Ht("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Hr(S){return new Ht("invalid-argument",S)}function oa(){return new Ht("app-deleted","The Firebase app was deleted.")}function tl(S){return new Ht("invalid-root-operation","The operation '"+S+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vn(S,g){return new Ht("invalid-format","String does not match format '"+S+"': "+g)}function Ln(S){throw new Ht("internal-error","Internal error: "+S)}class vo{constructor(g,E){this.bucket=g,this.path_=E}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const g=encodeURIComponent;return"/b/"+g(this.bucket)+"/o/"+g(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(g,E){let O;try{O=vo.makeFromUrl(g,E)}catch{return new vo(g,"")}if(""===O.path)return O;throw function hs(S){return new Ht("invalid-default-bucket","Invalid default bucket '"+S+"'.")}(g)}static makeFromUrl(g,E){let O=null;const q="([A-Za-z0-9.\\-_]+)",Fe=new RegExp("^gs://"+q+"(/(.*))?$","i");function Ft(nr){nr.path_=decodeURIComponent(nr.path)}const Xt=E.replace(/[.]/g,"\\."),hr=[{regex:Fe,indices:{bucket:1,path:3},postModify:function ae(nr){"/"===nr.path.charAt(nr.path.length-1)&&(nr.path_=nr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Xt}/v[A-Za-z0-9_]+/b/${q}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Ft},{regex:new RegExp(`^https?://${E===M?"(?:storage.googleapis.com|storage.cloud.google.com)":E}/${q}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Ft}];for(let nr=0;nr<hr.length;nr++){const Tl=hr[nr],Wo=Tl.regex.exec(g);if(Wo){let Dl=Wo[Tl.indices.path];Dl||(Dl=""),O=new vo(Wo[Tl.indices.bucket],Dl),Tl.postModify(O);break}}if(null==O)throw function oi(S){return new Ht("invalid-url","Invalid URL '"+S+"'.")}(g);return O}}class Tn{constructor(g){this.promise_=Promise.reject(g)}getPromise(){return this.promise_}cancel(g=!1){}}function uu(S){return"string"==typeof S||S instanceof String}function Ll(S){return Vl()&&S instanceof Blob}function Vl(){return typeof Blob<"u"}function nl(S,g,E,O){if(O<g)throw Hr(`Invalid value for '${S}'. Expected ${g} or greater.`);if(O>E)throw Hr(`Invalid value for '${S}'. Expected ${E} or less.`)}function ya(S,g,E){let O=g;return null==E&&(O=`https://${g}`),`${E}://${O}/v0${S}`}function Bs(S){const g=encodeURIComponent;let E="?";for(const O in S)S.hasOwnProperty(O)&&(E=E+(g(O)+"=")+g(S[O])+"&");return E=E.slice(0,-1),E}var Va=(()=>{return(S=Va||(Va={}))[S.NO_ERROR=0]="NO_ERROR",S[S.NETWORK_ERROR=1]="NETWORK_ERROR",S[S.ABORT=2]="ABORT",Va;var S})();class Ya{constructor(g,E,O,q,ae,Te,Fe,at,Ft,tn,Xt){this.url_=g,this.method_=E,this.headers_=O,this.body_=q,this.successCodes_=ae,this.additionalRetryCodes_=Te,this.callback_=Fe,this.errorCallback_=at,this.timeout_=Ft,this.progressCallback_=tn,this.connectionFactory_=Xt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((pi,yi)=>{this.resolve_=pi,this.reject_=yi,this.start_()})}start_(){const E=(O,q)=>{const ae=this.resolve_,Te=this.reject_,Fe=q.connection;if(q.wasSuccessCode)try{const at=this.callback_(Fe,Fe.getResponse());!function Js(S){return void 0!==S}(at)?ae():ae(at)}catch(at){Te(at)}else if(null!==Fe){const at=wn();at.serverResponse=Fe.getErrorText(),Te(this.errorCallback_?this.errorCallback_(Fe,at):at)}else Te(q.canceled?this.appDelete_?oa():Ir():function Mr(){return new Ht("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?E(0,new Yo(!1,null,!0)):this.backoffId_=function Ut(S,g,E){let O=1,q=null,ae=null,Te=!1,Fe=0;function at(){return 2===Fe}let Ft=!1;function tn(...hi){Ft||(Ft=!0,g.apply(null,hi))}function Xt(hi){q=setTimeout(()=>{q=null,S(yi,at())},hi)}function pi(){ae&&clearTimeout(ae)}function yi(hi,...gr){if(Ft)return void pi();if(hi)return pi(),void tn.call(null,hi,...gr);if(at()||Te)return pi(),void tn.call(null,hi,...gr);let hr;O<64&&(O*=2),1===Fe?(Fe=2,hr=0):hr=1e3*(O+Math.random()),Xt(hr)}let Un=!1;function ti(hi){Un||(Un=!0,pi(),!Ft&&(null!==q?(hi||(Fe=2),clearTimeout(q),Xt(0)):hi||(Fe=1)))}return Xt(0),ae=setTimeout(()=>{Te=!0,ti(!0)},E),ti}((O,q)=>{if(q)return void O(!1,new Yo(!1,null,!0));const ae=this.connectionFactory_();this.pendingConnection_=ae;const Te=Fe=>{null!==this.progressCallback_&&this.progressCallback_(Fe.loaded,Fe.lengthComputable?Fe.total:-1)};null!==this.progressCallback_&&ae.addUploadProgressListener(Te),ae.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&ae.removeUploadProgressListener(Te),this.pendingConnection_=null;const Fe=ae.getErrorCode()===Va.NO_ERROR,at=ae.getStatus();if(!Fe||this.isRetryStatusCode_(at)){const tn=ae.getErrorCode()===Va.ABORT;return void O(!1,new Yo(!1,null,tn))}const Ft=-1!==this.successCodes_.indexOf(at);O(!0,new Yo(Ft,ae))})},E,this.timeout_)}getPromise(){return this.promise_}cancel(g){this.canceled_=!0,this.appDelete_=g||!1,null!==this.backoffId_&&function an(S){S(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(g){const E=g>=500&&g<600,q=-1!==[408,429].indexOf(g),ae=-1!==this.additionalRetryCodes_.indexOf(g);return E||q||ae}}class Yo{constructor(g,E,O){this.wasSuccessCode=g,this.connection=E,this.canceled=!!O}}function Sr(...S){const g=function ql(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==g){const E=new g;for(let O=0;O<S.length;O++)E.append(S[O]);return E.getBlob()}if(Vl())return new Blob(S);throw new Ht("unsupported-environment","This browser doesn't seem to support creating Blobs")}const En={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dl{constructor(g,E){this.data=g,this.contentType=E||null}}function Qo(S,g){switch(S){case En.RAW:return new dl(Ua(g));case En.BASE64:case En.BASE64URL:return new dl(Zl(S,g));case En.DATA_URL:return new dl(function il(S){const g=new Xs(S);return g.base64?Zl(En.BASE64,g.rest):function Mu(S){let g;try{g=decodeURIComponent(S)}catch{throw Vn(En.DATA_URL,"Malformed data URL.")}return Ua(g)}(g.rest)}(g),function Ml(S){return new Xs(S).contentType}(g))}throw wn()}function Ua(S){const g=[];for(let E=0;E<S.length;E++){let O=S.charCodeAt(E);O<=127?g.push(O):O<=2047?g.push(192|O>>6,128|63&O):55296==(64512&O)?E<S.length-1&&56320==(64512&S.charCodeAt(E+1))?(O=65536|(1023&O)<<10|1023&S.charCodeAt(++E),g.push(240|O>>18,128|O>>12&63,128|O>>6&63,128|63&O)):g.push(239,191,189):56320==(64512&O)?g.push(239,191,189):g.push(224|O>>12,128|O>>6&63,128|63&O)}return new Uint8Array(g)}function Zl(S,g){switch(S){case En.BASE64:{const q=-1!==g.indexOf("-"),ae=-1!==g.indexOf("_");if(q||ae)throw Vn(S,"Invalid character '"+(q?"-":"_")+"' found: is it base64url encoded?");break}case En.BASE64URL:{const q=-1!==g.indexOf("+"),ae=-1!==g.indexOf("/");if(q||ae)throw Vn(S,"Invalid character '"+(q?"+":"/")+"' found: is it base64 encoded?");g=g.replace(/-/g,"+").replace(/_/g,"/");break}}let E;try{E=function Hs(S){return atob(S)}(g)}catch{throw Vn(S,"Invalid character found")}const O=new Uint8Array(E.length);for(let q=0;q<E.length;q++)O[q]=E.charCodeAt(q);return O}class Xs{constructor(g){this.base64=!1,this.contentType=null;const E=g.match(/^data:([^,]+)?,/);if(null===E)throw Vn(En.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const O=E[1]||null;null!=O&&(this.base64=function vl(S,g){return S.length>=g.length&&S.substring(S.length-g.length)===g}(O,";base64"),this.contentType=this.base64?O.substring(0,O.length-7):O),this.rest=g.substring(g.indexOf(",")+1)}}class Wr{constructor(g,E){let O=0,q="";Ll(g)?(this.data_=g,O=g.size,q=g.type):g instanceof ArrayBuffer?(E?this.data_=new Uint8Array(g):(this.data_=new Uint8Array(g.byteLength),this.data_.set(new Uint8Array(g))),O=this.data_.length):g instanceof Uint8Array&&(E?this.data_=g:(this.data_=new Uint8Array(g.length),this.data_.set(g)),O=g.length),this.size_=O,this.type_=q}size(){return this.size_}type(){return this.type_}slice(g,E){if(Ll(this.data_)){const q=function Uu(S,g,E){return S.webkitSlice?S.webkitSlice(g,E):S.mozSlice?S.mozSlice(g,E):S.slice?S.slice(g,E):null}(this.data_,g,E);return null===q?null:new Wr(q)}{const O=new Uint8Array(this.data_.buffer,g,E-g);return new Wr(O,!0)}}static getBlob(...g){if(Vl()){const E=g.map(O=>O instanceof Wr?O.data_:O);return new Wr(Sr.apply(null,E))}{const E=g.map(Te=>uu(Te)?Qo(En.RAW,Te).data:Te.data_);let O=0;E.forEach(Te=>{O+=Te.byteLength});const q=new Uint8Array(O);let ae=0;return E.forEach(Te=>{for(let Fe=0;Fe<Te.length;Fe++)q[ae++]=Te[Fe]}),new Wr(q,!0)}}uploadData(){return this.data_}}function Do(S){let g;try{g=JSON.parse(S)}catch{return null}return function lu(S){return"object"==typeof S&&!Array.isArray(S)}(g)?g:null}function Fo(S){const g=S.lastIndexOf("/",S.length-2);return-1===g?S:S.slice(g+1)}function rl(S,g){return g}class C{constructor(g,E,O,q){this.server=g,this.local=E||g,this.writable=!!O,this.xform=q||rl}}let R=null;function V(){if(R)return R;const S=[];S.push(new C("bucket")),S.push(new C("generation")),S.push(new C("metageneration")),S.push(new C("name","fullPath",!0));const E=new C("name");E.xform=function g(ae,Te){return function D(S){return!uu(S)||S.length<2?S:Fo(S)}(Te)},S.push(E);const q=new C("size");return q.xform=function O(ae,Te){return void 0!==Te?Number(Te):Te},S.push(q),S.push(new C("timeCreated")),S.push(new C("updated")),S.push(new C("md5Hash",null,!0)),S.push(new C("cacheControl",null,!0)),S.push(new C("contentDisposition",null,!0)),S.push(new C("contentEncoding",null,!0)),S.push(new C("contentLanguage",null,!0)),S.push(new C("contentType",null,!0)),S.push(new C("metadata","customMetadata",!0)),R=S,R}function Ne(S,g,E){const O=Do(g);return null===O?null:function pe(S,g,E){const O={type:"file"},q=E.length;for(let ae=0;ae<q;ae++){const Te=E[ae];O[Te.local]=Te.xform(O,g[Te.server])}return function J(S,g){Object.defineProperty(S,"ref",{get:function E(){const ae=new vo(S.bucket,S.fullPath);return g._makeStorageReference(ae)}})}(O,S),O}(S,O,E)}function Lt(S,g){const E={},O=g.length;for(let q=0;q<O;q++){const ae=g[q];ae.writable&&(E[ae.server]=S[ae.local])}return JSON.stringify(E)}const Cn="prefixes";class fs{constructor(g,E,O,q){this.url=g,this.method=E,this.handler=O,this.timeout=q,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function jr(S){if(!S)throw wn()}function Ja(S,g){return function E(O,q){const ae=Ne(S,q,g);return jr(null!==ae),ae}}function $r(S){return function g(E,O){let q;return q=401===E.getStatus()?E.getErrorText().includes("Firebase App Check token is invalid")?function mi(){return new Ht("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function qr(){return new Ht("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===E.getStatus()?function pr(S){return new Ht("quota-exceeded","Quota for bucket '"+S+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(S.bucket):403===E.getStatus()?function Ss(S){return new Ht("unauthorized","User does not have permission to access '"+S+"'.")}(S.path):O,q.serverResponse=O.serverResponse,q}}function er(S){const g=$r(S);return function E(O,q){let ae=g(O,q);return 404===O.getStatus()&&(ae=function Mn(S){return new Ht("object-not-found","Object '"+S+"' does not exist.")}(S.path)),ae.serverResponse=q.serverResponse,ae}}function Ul(S,g,E){const q=ya(g.fullServerUrl(),S.host,S._protocol),Te=S.maxOperationRetryTime,Fe=new fs(q,"GET",Ja(S,E),Te);return Fe.errorHandler=er(g),Fe}function Bl(S,g,E,O,q){const ae={};ae.prefix=g.isRoot?"":g.path+"/",E&&E.length>0&&(ae.delimiter=E),O&&(ae.pageToken=O),q&&(ae.maxResults=q);const Fe=ya(g.bucketOnlyServerUrl(),S.host,S._protocol),Ft=S.maxOperationRetryTime,tn=new fs(Fe,"GET",function Nr(S,g){return function E(O,q){const ae=function $i(S,g,E){const O=Do(E);return null===O?null:function Kn(S,g,E){const O={prefixes:[],items:[],nextPageToken:E.nextPageToken};if(E[Cn])for(const q of E[Cn]){const ae=q.replace(/\/$/,""),Te=S._makeStorageReference(new vo(g,ae));O.prefixes.push(Te)}if(E.items)for(const q of E.items){const ae=S._makeStorageReference(new vo(g,q.name));O.items.push(ae)}return O}(S,g,O)}(S,g,q);return jr(null!==ae),ae}}(S,g.bucket),Ft);return tn.urlParams=ae,tn.errorHandler=$r(g),tn}function es(S,g,E){const O=Object.assign({},E);return O.fullPath=S.path,O.size=g.size(),O.contentType||(O.contentType=function aa(S,g){return S&&S.contentType||g&&g.type()||"application/octet-stream"}(null,g)),O}class iu{constructor(g,E,O,q){this.current=g,this.total=E,this.finalized=!!O,this.metadata=q||null}}function co(S,g){let E=null;try{E=S.getResponseHeader("X-Goog-Upload-Status")}catch{jr(!1)}return jr(!!E&&-1!==(g||["active"]).indexOf(E)),E}const X=262144;const He={STATE_CHANGED:"state_changed"},gt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function At(S){switch(S){case"running":case"pausing":case"canceling":return gt.RUNNING;case"paused":return gt.PAUSED;case"success":return gt.SUCCESS;case"canceled":return gt.CANCELED;default:return gt.ERROR}}class un{constructor(g,E,O){if(function yl(S){return"function"==typeof S}(g)||null!=E||null!=O)this.next=g,this.error=E??void 0,this.complete=O??void 0;else{const ae=g;this.next=ae.next,this.error=ae.error,this.complete=ae.complete}}}function mn(S){return(...g)=>{Promise.resolve().then(()=>S(...g))}}class Pi extends class di{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Va.NO_ERROR,this.sendPromise_=new Promise(g=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Va.ABORT,g()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Va.NETWORK_ERROR,g()}),this.xhr_.addEventListener("load",()=>{g()})})}send(g,E,O,q){if(this.sent_)throw Ln("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(E,g,!0),void 0!==q)for(const ae in q)q.hasOwnProperty(ae)&&this.xhr_.setRequestHeader(ae,q[ae].toString());return void 0!==O?this.xhr_.send(O):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ln("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ln("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ln("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ln("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(g){return this.xhr_.getResponseHeader(g)}addUploadProgressListener(g){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",g)}removeUploadProgressListener(g){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",g)}}{initXhr(){this.xhr_.responseType="text"}}function Yn(){return new Pi}class sl{constructor(g,E,O=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=g,this._blob=E,this._metadata=O,this._mappings=V(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=q=>{this._request=void 0,this._chunkMultiplier=1,q._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=q,this._transition("error"))},this._metadataErrorHandler=q=>{this._request=void 0,q._codeEquals("canceled")?this.completeTransitions_():(this._error=q,this._transition("error"))},this._promise=new Promise((q,ae)=>{this._resolve=q,this._reject=ae,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const g=this._transferred;return E=>this._updateProgress(g+E)}_shouldDoResumable(g){return g.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(g){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([E,O])=>{switch(this._state){case"running":g(E,O);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((g,E)=>{const O=function El(S,g,E,O,q){const ae=g.bucketOnlyServerUrl(),Te=es(g,O,q),Fe={name:Te.fullPath},at=ya(ae,S.host,S._protocol),tn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${O.size()}`,"X-Goog-Upload-Header-Content-Type":Te.contentType,"Content-Type":"application/json; charset=utf-8"},Xt=Lt(Te,E),Un=new fs(at,"POST",function yi(ti){let hi;co(ti);try{hi=ti.getResponseHeader("X-Goog-Upload-URL")}catch{jr(!1)}return jr(uu(hi)),hi},S.maxUploadRetryTime);return Un.urlParams=Fe,Un.headers=tn,Un.body=Xt,Un.errorHandler=$r(g),Un}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),q=this._ref.storage._makeRequest(O,Yn,g,E);this._request=q,q.getPromise().then(ae=>{this._request=void 0,this._uploadUrl=ae,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const g=this._uploadUrl;this._resolveToken((E,O)=>{const q=function z(S,g,E,O){const at=new fs(E,"POST",function ae(Ft){const tn=co(Ft,["active","final"]);let Xt=null;try{Xt=Ft.getResponseHeader("X-Goog-Upload-Size-Received")}catch{jr(!1)}Xt||jr(!1);const pi=Number(Xt);return jr(!isNaN(pi)),new iu(pi,O.size(),"final"===tn)},S.maxUploadRetryTime);return at.headers={"X-Goog-Upload-Command":"query"},at.errorHandler=$r(g),at}(this._ref.storage,this._ref._location,g,this._blob),ae=this._ref.storage._makeRequest(q,Yn,E,O);this._request=ae,ae.getPromise().then(Te=>{this._request=void 0,this._updateProgress(Te.current),this._needToFetchStatus=!1,Te.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const g=X*this._chunkMultiplier,E=new iu(this._transferred,this._blob.size()),O=this._uploadUrl;this._resolveToken((q,ae)=>{let Te;try{Te=function de(S,g,E,O,q,ae,Te,Fe){const at=new iu(0,0);if(Te?(at.current=Te.current,at.total=Te.total):(at.current=0,at.total=O.size()),O.size()!==at.total)throw function ko(){return new Ht("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Ft=at.total-at.current;let tn=Ft;q>0&&(tn=Math.min(tn,q));const Xt=at.current,Un={"X-Goog-Upload-Command":tn===Ft?"upload, finalize":"upload","X-Goog-Upload-Offset":`${at.current}`},ti=O.slice(Xt,Xt+tn);if(null===ti)throw As();const hr=new fs(E,"POST",function hi(nr,Tl){const Wo=co(nr,["active","final"]),Ao=at.current+tn,Dl=O.size();let xi;return xi="final"===Wo?Ja(g,ae)(nr,Tl):null,new iu(Ao,Dl,"final"===Wo,xi)},g.maxUploadRetryTime);return hr.headers=Un,hr.body=ti.uploadData(),hr.progressCallback=Fe||null,hr.errorHandler=$r(S),hr}(this._ref._location,this._ref.storage,O,this._blob,g,this._mappings,E,this._makeProgressCallback())}catch(at){return this._error=at,void this._transition("error")}const Fe=this._ref.storage._makeRequest(Te,Yn,q,ae);this._request=Fe,Fe.getPromise().then(at=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(at.current),at.finalized?(this._metadata=at.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){X*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((g,E)=>{const O=Ul(this._ref.storage,this._ref._location,this._mappings),q=this._ref.storage._makeRequest(O,Yn,g,E);this._request=q,q.getPromise().then(ae=>{this._request=void 0,this._metadata=ae,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((g,E)=>{const O=function Aa(S,g,E,O,q){const ae=g.bucketOnlyServerUrl(),Te={"X-Goog-Upload-Protocol":"multipart"},at=function Fe(){let hr="";for(let nr=0;nr<2;nr++)hr+=Math.random().toString().slice(2);return hr}();Te["Content-Type"]="multipart/related; boundary="+at;const Ft=es(g,O,q),tn=Lt(Ft,E),yi=Wr.getBlob("--"+at+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+tn+"\r\n--"+at+"\r\nContent-Type: "+Ft.contentType+"\r\n\r\n",O,"\r\n--"+at+"--");if(null===yi)throw As();const Un={name:Ft.fullPath},ti=ya(ae,S.host,S._protocol),gr=S.maxUploadRetryTime,ts=new fs(ti,"POST",Ja(S,E),gr);return ts.urlParams=Un,ts.headers=Te,ts.body=yi.uploadData(),ts.errorHandler=$r(g),ts}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),q=this._ref.storage._makeRequest(O,Yn,g,E);this._request=q,q.getPromise().then(ae=>{this._request=void 0,this._metadata=ae,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(g){const E=this._transferred;this._transferred=g,this._transferred!==E&&this._notifyObservers()}_transition(g){if(this._state!==g)switch(g){case"canceling":case"pausing":this._state=g,void 0!==this._request&&this._request.cancel();break;case"running":const E="paused"===this._state;this._state=g,E&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=g,this._notifyObservers();break;case"canceled":this._error=Ir(),this._state=g,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const g=At(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:g,metadata:this._metadata,task:this,ref:this._ref}}on(g,E,O,q){const ae=new un(E||void 0,O||void 0,q||void 0);return this._addObserver(ae),()=>{this._removeObserver(ae)}}then(g,E){return this._promise.then(g,E)}catch(g){return this.then(null,g)}_addObserver(g){this._observers.push(g),this._notifyObserver(g)}_removeObserver(g){const E=this._observers.indexOf(g);-1!==E&&this._observers.splice(E,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(E=>{this._notifyObserver(E)})}_finishPromise(){if(void 0!==this._resolve){let g=!0;switch(At(this._state)){case gt.SUCCESS:mn(this._resolve.bind(null,this.snapshot))();break;case gt.CANCELED:case gt.ERROR:mn(this._reject.bind(null,this._error))();break;default:g=!1}g&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(g){switch(At(this._state)){case gt.RUNNING:case gt.PAUSED:g.next&&mn(g.next.bind(g,this.snapshot))();break;case gt.SUCCESS:g.complete&&mn(g.complete.bind(g))();break;default:g.error&&mn(g.error.bind(g,this._error))()}}resume(){const g="paused"===this._state||"pausing"===this._state;return g&&this._transition("running"),g}pause(){const g="running"===this._state;return g&&this._transition("pausing"),g}cancel(){const g="running"===this._state||"pausing"===this._state;return g&&this._transition("canceling"),g}}class Ba{constructor(g,E){this._service=g,this._location=E instanceof vo?E:vo.makeFromUrl(E,g.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(g,E){return new Ba(g,E)}get root(){const g=new vo(this._location.bucket,"");return this._newRef(this._service,g)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fo(this._location.path)}get storage(){return this._service}get parent(){const g=function Qa(S){if(0===S.length)return null;const g=S.lastIndexOf("/");return-1===g?"":S.slice(0,g)}(this._location.path);if(null===g)return null;const E=new vo(this._location.bucket,g);return new Ba(this._service,E)}_throwIfRoot(g){if(""===this._location.path)throw tl(g)}}function Bu(S,g,E){return mu.apply(this,arguments)}function mu(){return(mu=(0,La.Z)(function*(S,g,E){const q=yield Xo(S,{pageToken:E});g.prefixes.push(...q.prefixes),g.items.push(...q.items),null!=q.nextPageToken&&(yield Bu(S,g,q.nextPageToken))})).apply(this,arguments)}function Xo(S,g){null!=g&&"number"==typeof g.maxResults&&nl("options.maxResults",1,1e3,g.maxResults);const E=g||{},O=Bl(S.storage,S._location,"/",E.pageToken,E.maxResults);return S.storage.makeRequestWithTokens(O,Yn)}function Ou(S){S._throwIfRoot("getDownloadURL");const g=function wl(S,g,E){const q=ya(g.fullServerUrl(),S.host,S._protocol),Te=S.maxOperationRetryTime,Fe=new fs(q,"GET",function Jo(S,g){return function E(O,q){const ae=Ne(S,q,g);return jr(null!==ae),function Ze(S,g,E,O){const q=Do(g);if(null===q||!uu(q.downloadTokens))return null;const ae=q.downloadTokens;if(0===ae.length)return null;const Te=encodeURIComponent;return ae.split(",").map(Ft=>{const Xt=S.fullPath;return ya("/b/"+Te(S.bucket)+"/o/"+Te(Xt),E,O)+Bs({alt:"media",token:Ft})})[0]}(ae,q,S.host,S._protocol)}}(S,E),Te);return Fe.errorHandler=er(g),Fe}(S.storage,S._location,V());return S.storage.makeRequestWithTokens(g,Yn).then(E=>{if(null===E)throw function dn(){return new Ht("no-download-url","The given file does not have any download URLs.")}();return E})}function j(S,g){const E=function Ol(S,g){const E=g.split("/").filter(O=>O.length>0).join("/");return 0===S.length?E:S+"/"+E}(S._location.path,g),O=new vo(S._location.bucket,E);return new Ba(S.storage,O)}function Je(S,g){if(S instanceof ei){const E=S;if(null==E._bucket)throw function ys(){return new Ht("no-default-bucket","No default bucket found. Did you set the '"+ie+"' property when initializing the app?")}();const O=new Ba(E,E._bucket);return null!=g?Je(O,g):O}return void 0!==g?j(S,g):S}function Nt(S,g){if(g&&function G(S){return/^[A-Za-z]+:\/\//.test(S)}(g)){if(S instanceof ei)return function ye(S,g){return new Ba(S,g)}(S,g);throw Hr("To use ref(service, url), the first argument must be a Storage instance.")}return Je(S,g)}function _n(S,g){const E=g?.[ie];return null==E?null:vo.makeFromBucketSpec(E,S)}class ei{constructor(g,E,O,q,ae){this.app=g,this._authProvider=E,this._appCheckProvider=O,this._url=q,this._firebaseVersion=ae,this._bucket=null,this._host=M,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=q?vo.makeFromBucketSpec(q,this._host):_n(this._host,this.app.options)}get host(){return this._host}set host(g){this._host=g,this._bucket=null!=this._url?vo.makeFromBucketSpec(this._url,g):_n(g,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(g){nl("time",0,Number.POSITIVE_INFINITY,g),this._maxUploadRetryTime=g}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(g){nl("time",0,Number.POSITIVE_INFINITY,g),this._maxOperationRetryTime=g}_getAuthToken(){var g=this;return(0,La.Z)(function*(){if(g._overrideAuthToken)return g._overrideAuthToken;const E=g._authProvider.getImmediate({optional:!0});if(E){const O=yield E.getToken();if(null!==O)return O.accessToken}return null})()}_getAppCheckToken(){var g=this;return(0,La.Z)(function*(){const E=g._appCheckProvider.getImmediate({optional:!0});return E?(yield E.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(g=>g.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(g){return new Ba(this,g)}_makeRequest(g,E,O,q){if(this._deleted)return new Tn(oa());{const ae=function Sn(S,g,E,O,q,ae){const Te=Bs(S.urlParams),Fe=S.url+Te,at=Object.assign({},S.headers);return function va(S,g){g&&(S["X-Firebase-GMPID"]=g)}(at,g),function Oi(S,g){null!==g&&g.length>0&&(S.Authorization="Firebase "+g)}(at,E),function $o(S,g){S["X-Firebase-Storage-Version"]="webjs/"+(g??"AppManager")}(at,ae),function Xr(S,g){null!==g&&(S["X-Firebase-AppCheck"]=g)}(at,O),new Ya(Fe,S.method,at,S.body,S.successCodes,S.additionalRetryCodes,S.handler,S.errorHandler,S.timeout,S.progressCallback,q)}(g,this._appId,O,q,E,this._firebaseVersion);return this._requests.add(ae),ae.getPromise().then(()=>this._requests.delete(ae),()=>this._requests.delete(ae)),ae}}makeRequestWithTokens(g,E){var O=this;return(0,La.Z)(function*(){const[q,ae]=yield Promise.all([O._getAuthToken(),O._getAppCheckToken()]);return O._makeRequest(g,E,q,ae).getPromise()})()}}const xs="@firebase/storage";function hl(S,g){return Nt(S=(0,we.m9)(S),g)}function Ru(S,{instanceIdentifier:g}){const E=S.getProvider("app").getImmediate(),O=S.getProvider("auth-internal"),q=S.getProvider("app-check-internal");return new ei(E,O,q,g,L.SDK_VERSION)}!function _u(){(0,L._registerComponent)(new p.wA("storage",Ru,"PUBLIC").setMultipleInstances(!0)),(0,L.registerVersion)(xs,"0.9.9",""),(0,L.registerVersion)(xs,"0.9.9","esm2017")}();class js{constructor(g,E,O){this._delegate=g,this.task=E,this.ref=O}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class N{constructor(g,E){this._delegate=g,this._ref=E,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new js(this._delegate.snapshot,this,this._ref)}then(g,E){return this._delegate.then(O=>{if(g)return g(new js(O,this,this._ref))},E)}on(g,E,O,q){let ae;return E&&(ae="function"==typeof E?Te=>E(new js(Te,this,this._ref)):{next:E.next?Te=>E.next(new js(Te,this,this._ref)):void 0,complete:E.complete||void 0,error:E.error||void 0}),this._delegate.on(g,ae,O||void 0,q||void 0)}}class w{constructor(g,E){this._delegate=g,this._service=E}get prefixes(){return this._delegate.prefixes.map(g=>new b(g,this._service))}get items(){return this._delegate.items.map(g=>new b(g,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class b{constructor(g,E){this._delegate=g,this.storage=E}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(g){const E=function du(S,g){return j(S,g)}(this._delegate,g);return new b(E,this.storage)}get root(){return new b(this._delegate.root,this.storage)}get parent(){const g=this._delegate.parent;return null==g?null:new b(g,this.storage)}put(g,E){return this._throwIfRoot("put"),new N(function Il(S,g,E){return function Hl(S,g,E){return S._throwIfRoot("uploadBytesResumable"),new sl(S,new Wr(g),E)}(S=(0,we.m9)(S),g,E)}(this._delegate,g,E),this)}putString(g,E=En.RAW,O){this._throwIfRoot("putString");const q=Qo(E,g),ae=Object.assign({},O);return null==ae.contentType&&null!=q.contentType&&(ae.contentType=q.contentType),new N(new sl(this._delegate,new Wr(q.data,!0),ae),this)}listAll(){return function ic(S){return function rd(S){const g={prefixes:[],items:[]};return Bu(S,g).then(()=>g)}(S=(0,we.m9)(S))}(this._delegate).then(g=>new w(g,this.storage))}list(g){return function la(S,g){return Xo(S=(0,we.m9)(S),g)}(this._delegate,g||void 0).then(E=>new w(E,this.storage))}getMetadata(){return function Ql(S){return function jl(S){S._throwIfRoot("getMetadata");const g=Ul(S.storage,S._location,V());return S.storage.makeRequestWithTokens(g,Yn)}(S=(0,we.m9)(S))}(this._delegate)}updateMetadata(g){return function So(S,g){return function bs(S,g){S._throwIfRoot("updateMetadata");const E=function uo(S,g,E,O){const ae=ya(g.fullServerUrl(),S.host,S._protocol),Fe=Lt(E,O),Ft=S.maxOperationRetryTime,tn=new fs(ae,"PATCH",Ja(S,O),Ft);return tn.headers={"Content-Type":"application/json; charset=utf-8"},tn.body=Fe,tn.errorHandler=er(g),tn}(S.storage,S._location,g,V());return S.storage.makeRequestWithTokens(E,Yn)}(S=(0,we.m9)(S),g)}(this._delegate,g)}getDownloadURL(){return function rc(S){return Ou(S=(0,we.m9)(S))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Hu(S){return function he(S){S._throwIfRoot("deleteObject");const g=function Yl(S,g){const O=ya(g.fullServerUrl(),S.host,S._protocol),Fe=new fs(O,"DELETE",function Te(at,Ft){},S.maxOperationRetryTime);return Fe.successCodes=[200,204],Fe.errorHandler=er(g),Fe}(S.storage,S._location);return S.storage.makeRequestWithTokens(g,Yn)}(S=(0,we.m9)(S))}(this._delegate)}_throwIfRoot(g){if(""===this._delegate._location.path)throw tl(g)}}class F{constructor(g,E){this.app=g,this._delegate=E}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(g){if(ue(g))throw Hr("ref() expected a child path but got a URL, use refFromURL instead.");return new b(hl(this._delegate,g),this)}refFromURL(g){if(!ue(g))throw Hr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vo.makeFromUrl(g,this._delegate.host)}catch{throw Hr("refFromUrl() expected a valid full URL but got an invalid one.")}return new b(hl(this._delegate,g),this)}setMaxUploadRetryTime(g){this._delegate.maxUploadRetryTime=g}setMaxOperationRetryTime(g){this._delegate.maxOperationRetryTime=g}useEmulator(g,E,O={}){!function wa(S,g,E,O={}){!function Ci(S,g,E,O={}){S.host=`${g}:${E}`,S._protocol="http";const{mockUserToken:q}=O;q&&(S._overrideAuthToken="string"==typeof q?q:(0,we.Sg)(q,S.app.options.projectId))}(S,g,E,O)}(this._delegate,g,E,O)}}function ue(S){return/^[A-Za-z]+:\/\//.test(S)}function kn(S,{instanceIdentifier:g}){const E=S.getProvider("app-compat").getImmediate(),O=S.getProvider("storage").getImmediate({identifier:g});return new F(E,O)}!function _i(S){const g={TaskState:gt,TaskEvent:He,StringFormat:En,Storage:F,Reference:b};S.INTERNAL.registerComponent(new p.wA("storage-compat",kn,"PUBLIC").setServiceProps(g).setMultipleInstances(!0)),S.registerVersion("@firebase/storage-compat","0.1.17")}(Fl.Z);var Cr=K(440),Is=K(127);function hu(S){const g=function fl(S){return new Qs.y(g=>{const E=Te=>g.next(Te);E(S.snapshot);const ae=S.on("state_changed",E);return S.then(Te=>{E(Te),g.complete()},Te=>{E(S.snapshot),(Te=>{g.error(Te)})(Te)}),function(){ae()}}).pipe((0,Vr.b)(0))}(S);return{task:S,then:S.then.bind(S),catch:S.catch.bind(S),pause:S.pause.bind(S),cancel:S.cancel.bind(S),resume:S.resume.bind(S),snapshotChanges:()=>g,percentageChanges:()=>g.pipe((0,ka.U)(E=>E.bytesTransferred/E.totalBytes*100))}}function ru(S){return{getDownloadURL:()=>(0,Zo.of)(void 0).pipe(jo.fc,(0,Fa.w)(()=>S.getDownloadURL()),jo.iC),getMetadata:()=>(0,Zo.of)(void 0).pipe(jo.fc,(0,Fa.w)(()=>S.getMetadata()),jo.iC),delete:()=>(0,_a.D)(S.delete()),child:g=>ru(S.child(g)),updateMetadata:g=>(0,_a.D)(S.updateMetadata(g)),put:(g,E)=>hu(S.put(g,E)),putString:(g,E,O)=>hu(S.putString(g,E,O)),list:g=>(0,_a.D)(S.list(g)),listAll:()=>(0,_a.D)(S.listAll())}}const Nu=new a.OlP("angularfire2.storageBucket"),Gl=new a.OlP("angularfire2.storage.maxUploadRetryTime"),ju=new a.OlP("angularfire2.storage.maxOperationRetryTime"),zl=new a.OlP("angularfire2.storage.use-emulator");let Ec=(()=>{class S{constructor(E,O,q,ae,Te,Fe,at,Ft,tn,Xt){const pi=(0,xr.on)(E,Te,O);this.storage=(0,xr.cc)(`${pi.name}.storage.${q}`,"AngularFireStorage",pi.name,()=>{const yi=Te.runOutsideAngular(()=>pi.storage(q||void 0)),Un=tn;return Un&&yi.useEmulator(...Un),at&&yi.setMaxUploadRetryTime(at),Ft&&yi.setMaxOperationRetryTime(Ft),yi},[at,Ft])}ref(E){return ru(this.storage.ref(E))}refFromURL(E){return ru(this.storage.refFromURL(E))}upload(E,O,q){return ru(this.storage.ref(E)).put(O,q)}}return S.\u0275fac=function(E){return new(E||S)(a.LFG(xr.Dh),a.LFG(xr.xv,8),a.LFG(Nu,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(jo.HU),a.LFG(Gl,8),a.LFG(ju,8),a.LFG(zl,8),a.LFG(Cr.nm,8))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"any"}),S})(),oc=(()=>{class S{}return S.\u0275fac=function(E){return new(E||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({}),S})(),Pu=(()=>{class S{constructor(){Is.Z.registerVersion("angularfire",jo.q4.full,"gcs-compat")}}return S.\u0275fac=function(E){return new(E||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[Ec],imports:[oc]}),S})();var yu=K(7407),sd=K(7471),fu=K(7185),vs=K(1740),Gu=K(773),zu=K(3928),Wu=K(5361);let lh=(()=>{class S{}return S.\u0275fac=function(E){return new(E||S)},S.\u0275mod=a.oAB({type:S,bootstrap:[Re]}),S.\u0275inj=a.cJS({providers:[Gu.e],imports:[m.b2,We,xe.u5,Q,br,xr.hO.initializeApp(ma_firebaseConfig),yo.ww,Pu,yu.yb,sd.JS,vs.j,xe.UX,zu.Ps,fu.Rh.forRoot(),Wu.ComponentsModule]}),S})();(0,a.G48)(),m.q6().bootstrapModule(lh).catch(S=>console.error(S))},5867:(In,Et,K)=>{K.d(Et,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=K(9681);(0,m.registerVersion)("firebase","9.9.3","app")},127:(In,Et,K)=>{K.d(Et,{Z:()=>m.Z});var m=K(3942);m.Z.registerVersion("firebase","9.9.3","app-compat")},5881:(In,Et,K)=>{K.r(Et);var m=K(5861),a=K(3942),re=K(6457),Ee=K(2090),Re=(K(9681),K(1877),K(4859));function xe(){return window}function Ie(){return(Ie=(0,m.Z)(function*(mt,ze,Xe){var jt;const{BuildInfo:gn}=xe();(0,re.aq)(ze.sessionId,"AuthEvent did not contain a session ID");const Gn=yield vt(ze.sessionId),Zn={};return(0,re.ar)()?Zn.ibi=gn.packageName:(0,re.as)()?Zn.apn=gn.packageName:(0,re.at)(mt,"operation-not-supported-in-this-environment"),gn.displayName&&(Zn.appDisplayName=gn.displayName),Zn.sessionId=Gn,(0,re.au)(mt,Xe,ze.type,void 0,null!==(jt=ze.eventId)&&void 0!==jt?jt:void 0,Zn)})).apply(this,arguments)}function Mt(){return(Mt=(0,m.Z)(function*(mt){const{BuildInfo:ze}=xe(),Xe={};(0,re.ar)()?Xe.iosBundleId=ze.packageName:(0,re.as)()?Xe.androidPackageName=ze.packageName:(0,re.at)(mt,"operation-not-supported-in-this-environment"),yield(0,re.av)(mt,Xe)})).apply(this,arguments)}function Wt(){return(Wt=(0,m.Z)(function*(mt,ze,Xe){const{cordova:jt}=xe();let gn=()=>{};try{yield new Promise((Gn,Zn)=>{let Pe=null;function Le(){var Ct;Gn();const vn=null===(Ct=jt.plugins.browsertab)||void 0===Ct?void 0:Ct.close;"function"==typeof vn&&vn(),"function"==typeof Xe?.close&&Xe.close()}function Ce(){Pe||(Pe=window.setTimeout(()=>{Zn((0,re.aw)(mt,"redirect-cancelled-by-user"))},2e3))}function dt(){"visible"===document?.visibilityState&&Ce()}ze.addPassiveListener(Le),document.addEventListener("resume",Ce,!1),(0,re.as)()&&document.addEventListener("visibilitychange",dt,!1),gn=()=>{ze.removePassiveListener(Le),document.removeEventListener("resume",Ce,!1),document.removeEventListener("visibilitychange",dt,!1),Pe&&window.clearTimeout(Pe)}})}finally{gn()}})).apply(this,arguments)}function vt(mt){return rt.apply(this,arguments)}function rt(){return(rt=(0,m.Z)(function*(mt){const ze=qt(mt),Xe=yield crypto.subtle.digest("SHA-256",ze);return Array.from(new Uint8Array(Xe)).map(gn=>gn.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qt(mt){if((0,re.aq)(/[0-9a-zA-Z]+/.test(mt),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(mt);const ze=new ArrayBuffer(mt.length),Xe=new Uint8Array(ze);for(let jt=0;jt<mt.length;jt++)Xe[jt]=mt.charCodeAt(jt);return Xe}class ve extends re.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ze=>{this.resolveInialized=ze})}addPassiveListener(ze){this.passiveListeners.add(ze)}removePassiveListener(ze){this.passiveListeners.delete(ze)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ze){return this.resolveInialized(),this.passiveListeners.forEach(Xe=>Xe(ze)),super.onEvent(ze)}initialized(){var ze=this;return(0,m.Z)(function*(){yield ze.initPromise})()}}function De(mt){return Q.apply(this,arguments)}function Q(){return(Q=(0,m.Z)(function*(mt){const ze=yield it()._get(bt(mt));return ze&&(yield it()._remove(bt(mt))),ze})).apply(this,arguments)}function Ve(){const mt=[],ze="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Xe=0;Xe<20;Xe++){const jt=Math.floor(Math.random()*ze.length);mt.push(ze.charAt(jt))}return mt.join("")}function it(){return(0,re.ay)(re.b)}function bt(mt){return(0,re.az)("authEvent",mt.config.apiKey,mt.name)}function on(mt){if(!mt?.includes("?"))return{};const[ze,...Xe]=mt.split("?");return(0,Ee.zd)(Xe.join("?"))}function $t(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,re.aw)("no-auth-event")}}function Ue(){var mt;return(null===(mt=self?.location)||void 0===mt?void 0:mt.protocol)||null}function ln(mt=(0,Ee.z$)()){return!("file:"!==Ue()&&"ionic:"!==Ue()&&"capacitor:"!==Ue()||!mt.toLowerCase().match(/iphone|ipad|ipod|android/))}function zi(){try{const mt=self.localStorage,ze=re.aI();if(mt)return mt.setItem(ze,"1"),mt.removeItem(ze),!function bi(mt=(0,Ee.z$)()){return function Gi(){return(0,Ee.w1)()&&11===document?.documentMode}()||function Ei(mt=(0,Ee.z$)()){return/Edge\/\d+/.test(mt)}(mt)}()||(0,Ee.hl)()}catch{return ai()&&(0,Ee.hl)()}return!1}function ai(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hi(){return(function _t(){return"http:"===Ue()||"https:"===Ue()}()||(0,Ee.ru)()||ln())&&!function Hn(){return(0,Ee.b$)()||(0,Ee.UG)()}()&&zi()&&!ai()}function Li(){return ln()&&typeof document<"u"}function Qt(){return(Qt=(0,m.Z)(function*(){return!!Li()&&new Promise(mt=>{const ze=setTimeout(()=>{mt(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ze),mt(!0)})})})).apply(this,arguments)}const Vi={LOCAL:"local",NONE:"none",SESSION:"session"},Yi=re.ax,Kr="persistence";function Tr(mt){return _r.apply(this,arguments)}function _r(){return(_r=(0,m.Z)(function*(mt){yield mt._initializationPromise;const ze=zn(),Xe=re.az(Kr,mt.config.apiKey,mt.name);ze&&ze.setItem(Xe,mt._getPersistence())})).apply(this,arguments)}function zn(){var mt;try{return(null===(mt=function Ni(){return typeof window<"u"?window:null}())||void 0===mt?void 0:mt.sessionStorage)||null}catch{return null}}const $n=re.ax;class fi{constructor(){this.browserResolver=re.ay(re.k),this.cordovaResolver=re.ay(class On{constructor(){this._redirectPersistence=re.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=re.aB,this._overrideRedirectResult=re.aC}_initialize(ze){var Xe=this;return(0,m.Z)(function*(){const jt=ze._key();let gn=Xe.eventManagers.get(jt);return gn||(gn=new ve(ze),Xe.eventManagers.set(jt,gn),Xe.attachCallbackListeners(ze,gn)),gn})()}_openPopup(ze){(0,re.at)(ze,"operation-not-supported-in-this-environment")}_openRedirect(ze,Xe,jt,gn){var Gn=this;return(0,m.Z)(function*(){!function Dt(mt){var ze,Xe,jt,gn,Gn,Zn,Pe,Le,Ce,dt;const Ct=xe();(0,re.ax)("function"==typeof(null===(ze=Ct?.universalLinks)||void 0===ze?void 0:ze.subscribe),mt,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,re.ax)(typeof(null===(Xe=Ct?.BuildInfo)||void 0===Xe?void 0:Xe.packageName)<"u",mt,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,re.ax)("function"==typeof(null===(Gn=null===(gn=null===(jt=Ct?.cordova)||void 0===jt?void 0:jt.plugins)||void 0===gn?void 0:gn.browsertab)||void 0===Gn?void 0:Gn.openUrl),mt,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,re.ax)("function"==typeof(null===(Le=null===(Pe=null===(Zn=Ct?.cordova)||void 0===Zn?void 0:Zn.plugins)||void 0===Pe?void 0:Pe.browsertab)||void 0===Le?void 0:Le.isAvailable),mt,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,re.ax)("function"==typeof(null===(dt=null===(Ce=Ct?.cordova)||void 0===Ce?void 0:Ce.InAppBrowser)||void 0===dt?void 0:dt.open),mt,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ze);const Zn=yield Gn._initialize(ze);yield Zn.initialized(),Zn.resetRedirect(),(0,re.aD)(),yield Gn._originValidation(ze);const Pe=function nt(mt,ze,Xe=null){return{type:ze,eventId:Xe,urlResponse:null,sessionId:Ve(),postBody:null,tenantId:mt.tenantId,error:(0,re.aw)(mt,"no-auth-event")}}(ze,jt,gn);yield function Qe(mt,ze){return it()._set(bt(mt),ze)}(ze,Pe);const Le=yield function Me(mt,ze,Xe){return Ie.apply(this,arguments)}(ze,Pe,Xe),Ce=yield function ct(mt){const{cordova:ze}=xe();return new Promise(Xe=>{ze.plugins.browsertab.isAvailable(jt=>{let gn=null;jt?ze.plugins.browsertab.openUrl(mt):gn=ze.InAppBrowser.open(mt,(0,re.ap)()?"_blank":"_system","location=yes"),Xe(gn)})})}(Le);return function wt(mt,ze,Xe){return Wt.apply(this,arguments)}(ze,Zn,Ce)})()}_isIframeWebStorageSupported(ze,Xe){throw new Error("Method not implemented.")}_originValidation(ze){const Xe=ze._key();return this.originValidationPromises[Xe]||(this.originValidationPromises[Xe]=function Ge(mt){return Mt.apply(this,arguments)}(ze)),this.originValidationPromises[Xe]}attachCallbackListeners(ze,Xe){const{universalLinks:jt,handleOpenURL:gn,BuildInfo:Gn}=xe(),Zn=setTimeout((0,m.Z)(function*(){yield De(ze),Xe.onEvent($t())}),500),Pe=function(){var dt=(0,m.Z)(function*(Ct){clearTimeout(Zn);const vn=yield De(ze);let wi=null;vn&&Ct?.url&&(wi=function ft(mt,ze){var Xe,jt;const gn=function Yt(mt){const ze=on(mt),Xe=ze.link?decodeURIComponent(ze.link):void 0,jt=on(Xe).link,gn=ze.deep_link_id?decodeURIComponent(ze.deep_link_id):void 0;return on(gn).link||gn||jt||Xe||mt}(ze);if(gn.includes("/__/auth/callback")){const Gn=on(gn),Zn=Gn.firebaseError?function yt(mt){try{return JSON.parse(mt)}catch{return null}}(decodeURIComponent(Gn.firebaseError)):null,Pe=null===(jt=null===(Xe=Zn?.code)||void 0===Xe?void 0:Xe.split("auth/"))||void 0===jt?void 0:jt[1],Le=Pe?(0,re.aw)(Pe):null;return Le?{type:mt.type,eventId:mt.eventId,tenantId:mt.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:mt.type,eventId:mt.eventId,tenantId:mt.tenantId,sessionId:mt.sessionId,urlResponse:gn,postBody:null}}return null}(vn,Ct.url)),Xe.onEvent(wi||$t())});return function(vn){return dt.apply(this,arguments)}}();typeof jt<"u"&&"function"==typeof jt.subscribe&&jt.subscribe(null,Pe);const Le=gn,Ce=`${Gn.packageName.toLowerCase()}://`;xe().handleOpenURL=function(){var dt=(0,m.Z)(function*(Ct){if(Ct.toLowerCase().startsWith(Ce)&&Pe({url:Ct}),"function"==typeof Le)try{Le(Ct)}catch(vn){console.error(vn)}});return function(Ct){return dt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=re.a,this._completeRedirectFn=re.aB,this._overrideRedirectResult=re.aC}_initialize(ze){var Xe=this;return(0,m.Z)(function*(){return yield Xe.selectUnderlyingResolver(),Xe.assertedUnderlyingResolver._initialize(ze)})()}_openPopup(ze,Xe,jt,gn){var Gn=this;return(0,m.Z)(function*(){return yield Gn.selectUnderlyingResolver(),Gn.assertedUnderlyingResolver._openPopup(ze,Xe,jt,gn)})()}_openRedirect(ze,Xe,jt,gn){var Gn=this;return(0,m.Z)(function*(){return yield Gn.selectUnderlyingResolver(),Gn.assertedUnderlyingResolver._openRedirect(ze,Xe,jt,gn)})()}_isIframeWebStorageSupported(ze,Xe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ze,Xe)}_originValidation(ze){return this.assertedUnderlyingResolver._originValidation(ze)}get _shouldInitProactively(){return Li()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $n(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ze=this;return(0,m.Z)(function*(){if(ze.underlyingResolver)return;const Xe=yield function vi(){return Qt.apply(this,arguments)}();ze.underlyingResolver=Xe?ze.cordovaResolver:ze.browserResolver})()}}function Dr(mt){return mt.unwrap()}function Ui(mt){return or(mt)}function or(mt){const{_tokenResponse:ze}=mt instanceof Ee.ZR?mt.customData:mt;if(!ze)return null;if(!(mt instanceof Ee.ZR)&&"temporaryProof"in ze&&"phoneNumber"in ze)return re.P.credentialFromResult(mt);const Xe=ze.providerId;if(!Xe||Xe===re.o.PASSWORD)return null;let jt;switch(Xe){case re.o.GOOGLE:jt=re.Q;break;case re.o.FACEBOOK:jt=re.N;break;case re.o.GITHUB:jt=re.T;break;case re.o.TWITTER:jt=re.W;break;default:const{oauthIdToken:gn,oauthAccessToken:Gn,oauthTokenSecret:Zn,pendingToken:Pe,nonce:Le}=ze;return Gn||Zn||gn||Pe?Pe?Xe.startsWith("saml.")?re.aL._create(Xe,Pe):re.J._fromParams({providerId:Xe,signInMethod:Xe,pendingToken:Pe,idToken:gn,accessToken:Gn}):new re.U(Xe).credential({idToken:gn,accessToken:Gn,rawNonce:Le}):null}return mt instanceof Ee.ZR?jt.credentialFromError(mt):jt.credentialFromResult(mt)}function li(mt,ze){return ze.catch(Xe=>{throw Xe instanceof Ee.ZR&&function ii(mt,ze){var Xe,jt;const gn=null===(Xe=ze.customData)||void 0===Xe?void 0:Xe._tokenResponse;if("auth/multi-factor-auth-required"===(null===(jt=ze)||void 0===jt?void 0:jt.code))ze.resolver=new ot(mt,re.an(mt,ze));else if(gn){const Gn=or(ze),Zn=ze;Gn&&(Zn.credential=Gn,Zn.tenantId=gn.tenantId||void 0,Zn.email=gn.email||void 0,Zn.phoneNumber=gn.phoneNumber||void 0)}}(mt,Xe),Xe}).then(Xe=>{const gn=Xe.user;return{operationType:Xe.operationType,credential:Ui(Xe),additionalUserInfo:re.al(Xe),user:Ke.getOrCreate(gn)}})}function gs(mt,ze){return qn.apply(this,arguments)}function qn(){return(qn=(0,m.Z)(function*(mt,ze){const Xe=yield ze;return{verificationId:Xe.verificationId,confirm:jt=>li(mt,Xe.confirm(jt))}})).apply(this,arguments)}class ot{constructor(ze,Xe){this.resolver=Xe,this.auth=function An(mt){return mt.wrapped()}(ze)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ze){return li(Dr(this.auth),this.resolver.resolveSignIn(ze))}}class Ke{constructor(ze){this._delegate=ze,this.multiFactor=re.ao(ze)}static getOrCreate(ze){return Ke.USER_MAP.has(ze)||Ke.USER_MAP.set(ze,new Ke(ze)),Ke.USER_MAP.get(ze)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ze){return this._delegate.getIdTokenResult(ze)}getIdToken(ze){return this._delegate.getIdToken(ze)}linkAndRetrieveDataWithCredential(ze){return this.linkWithCredential(ze)}linkWithCredential(ze){var Xe=this;return(0,m.Z)(function*(){return li(Xe.auth,re.Z(Xe._delegate,ze))})()}linkWithPhoneNumber(ze,Xe){var jt=this;return(0,m.Z)(function*(){return gs(jt.auth,re.l(jt._delegate,ze,Xe))})()}linkWithPopup(ze){var Xe=this;return(0,m.Z)(function*(){return li(Xe.auth,re.d(Xe._delegate,ze,fi))})()}linkWithRedirect(ze){var Xe=this;return(0,m.Z)(function*(){return yield Tr(re.aE(Xe.auth)),re.g(Xe._delegate,ze,fi)})()}reauthenticateAndRetrieveDataWithCredential(ze){return this.reauthenticateWithCredential(ze)}reauthenticateWithCredential(ze){var Xe=this;return(0,m.Z)(function*(){return li(Xe.auth,re._(Xe._delegate,ze))})()}reauthenticateWithPhoneNumber(ze,Xe){return gs(this.auth,re.r(this._delegate,ze,Xe))}reauthenticateWithPopup(ze){return li(this.auth,re.e(this._delegate,ze,fi))}reauthenticateWithRedirect(ze){var Xe=this;return(0,m.Z)(function*(){return yield Tr(re.aE(Xe.auth)),re.h(Xe._delegate,ze,fi)})()}sendEmailVerification(ze){return re.ab(this._delegate,ze)}unlink(ze){var Xe=this;return(0,m.Z)(function*(){return yield re.ak(Xe._delegate,ze),Xe})()}updateEmail(ze){return re.ag(this._delegate,ze)}updatePassword(ze){return re.ah(this._delegate,ze)}updatePhoneNumber(ze){return re.u(this._delegate,ze)}updateProfile(ze){return re.af(this._delegate,ze)}verifyBeforeUpdateEmail(ze,Xe){return re.ac(this._delegate,ze,Xe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ke.USER_MAP=new WeakMap;const je=re.ax;let et=(()=>{class mt{constructor(Xe,jt){if(this.app=Xe,jt.isInitialized())return this._delegate=jt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:gn}=Xe.options;je(gn,"invalid-api-key",{appName:Xe.name}),je(gn,"invalid-api-key",{appName:Xe.name});const Gn=typeof window<"u"?fi:void 0;this._delegate=jt.initialize({options:{persistence:Kt(gn,Xe.name),popupRedirectResolver:Gn}}),this._delegate._updateErrorMap(re.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ke.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Xe){this._delegate.languageCode=Xe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Xe){this._delegate.tenantId=Xe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Xe,jt){re.G(this._delegate,Xe,jt)}applyActionCode(Xe){return re.a2(this._delegate,Xe)}checkActionCode(Xe){return re.a3(this._delegate,Xe)}confirmPasswordReset(Xe,jt){return re.a1(this._delegate,Xe,jt)}createUserWithEmailAndPassword(Xe,jt){var gn=this;return(0,m.Z)(function*(){return li(gn._delegate,re.a5(gn._delegate,Xe,jt))})()}fetchProvidersForEmail(Xe){return this.fetchSignInMethodsForEmail(Xe)}fetchSignInMethodsForEmail(Xe){return re.aa(this._delegate,Xe)}isSignInWithEmailLink(Xe){return re.a8(this._delegate,Xe)}getRedirectResult(){var Xe=this;return(0,m.Z)(function*(){je(Hi(),Xe._delegate,"operation-not-supported-in-this-environment");const jt=yield re.j(Xe._delegate,fi);return jt?li(Xe._delegate,Promise.resolve(jt)):{credential:null,user:null}})()}addFrameworkForLogging(Xe){!function ci(mt,ze){(0,re.aE)(mt)._logFramework(ze)}(this._delegate,Xe)}onAuthStateChanged(Xe,jt,gn){const{next:Gn,error:Zn,complete:Pe}=qe(Xe,jt,gn);return this._delegate.onAuthStateChanged(Gn,Zn,Pe)}onIdTokenChanged(Xe,jt,gn){const{next:Gn,error:Zn,complete:Pe}=qe(Xe,jt,gn);return this._delegate.onIdTokenChanged(Gn,Zn,Pe)}sendSignInLinkToEmail(Xe,jt){return re.a7(this._delegate,Xe,jt)}sendPasswordResetEmail(Xe,jt){return re.a0(this._delegate,Xe,jt||void 0)}setPersistence(Xe){var jt=this;return(0,m.Z)(function*(){let gn;switch(function sr(mt,ze){Yi(Object.values(Vi).includes(ze),mt,"invalid-persistence-type"),(0,Ee.b$)()?Yi(ze!==Vi.SESSION,mt,"unsupported-persistence-type"):(0,Ee.UG)()?Yi(ze===Vi.NONE,mt,"unsupported-persistence-type"):ai()?Yi(ze===Vi.NONE||ze===Vi.LOCAL&&(0,Ee.hl)(),mt,"unsupported-persistence-type"):Yi(ze===Vi.NONE||zi(),mt,"unsupported-persistence-type")}(jt._delegate,Xe),Xe){case Vi.SESSION:gn=re.a;break;case Vi.LOCAL:gn=(yield re.ay(re.i)._isAvailable())?re.i:re.b;break;case Vi.NONE:gn=re.L;break;default:return re.at("argument-error",{appName:jt._delegate.name})}return jt._delegate.setPersistence(gn)})()}signInAndRetrieveDataWithCredential(Xe){return this.signInWithCredential(Xe)}signInAnonymously(){return li(this._delegate,re.X(this._delegate))}signInWithCredential(Xe){return li(this._delegate,re.Y(this._delegate,Xe))}signInWithCustomToken(Xe){return li(this._delegate,re.$(this._delegate,Xe))}signInWithEmailAndPassword(Xe,jt){return li(this._delegate,re.a6(this._delegate,Xe,jt))}signInWithEmailLink(Xe,jt){return li(this._delegate,re.a9(this._delegate,Xe,jt))}signInWithPhoneNumber(Xe,jt){return gs(this._delegate,re.s(this._delegate,Xe,jt))}signInWithPopup(Xe){var jt=this;return(0,m.Z)(function*(){return je(Hi(),jt._delegate,"operation-not-supported-in-this-environment"),li(jt._delegate,re.c(jt._delegate,Xe,fi))})()}signInWithRedirect(Xe){var jt=this;return(0,m.Z)(function*(){return je(Hi(),jt._delegate,"operation-not-supported-in-this-environment"),yield Tr(jt._delegate),re.f(jt._delegate,Xe,fi)})()}updateCurrentUser(Xe){return this._delegate.updateCurrentUser(Xe)}verifyPasswordResetCode(Xe){return re.a4(this._delegate,Xe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return mt.Persistence=Vi,mt})();function qe(mt,ze,Xe){let jt=mt;"function"!=typeof mt&&({next:jt,error:ze,complete:Xe}=mt);const gn=jt;return{next:Zn=>gn(Zn&&Ke.getOrCreate(Zn)),error:ze,complete:Xe}}function Kt(mt,ze){const Xe=function Qi(mt,ze){const Xe=zn();if(!Xe)return[];const jt=re.az(Kr,mt,ze);switch(Xe.getItem(jt)){case Vi.NONE:return[re.L];case Vi.LOCAL:return[re.i,re.a];case Vi.SESSION:return[re.a];default:return[]}}(mt,ze);if(typeof self<"u"&&!Xe.includes(re.i)&&Xe.push(re.i),typeof window<"u")for(const jt of[re.b,re.a])Xe.includes(jt)||Xe.push(jt);return Xe.includes(re.L)||Xe.push(re.L),Xe}class fn{constructor(){this.providerId="phone",this._delegate=new re.P(Dr(a.Z.auth()))}static credential(ze,Xe){return re.P.credential(ze,Xe)}verifyPhoneNumber(ze,Xe){return this._delegate.verifyPhoneNumber(ze,Xe)}unwrap(){return this._delegate}}fn.PHONE_SIGN_IN_METHOD=re.P.PHONE_SIGN_IN_METHOD,fn.PROVIDER_ID=re.P.PROVIDER_ID;const xn=re.ax;class Bi{constructor(ze,Xe,jt=a.Z.app()){var gn;xn(null===(gn=jt.options)||void 0===gn?void 0:gn.apiKey,"invalid-api-key",{appName:jt.name}),this._delegate=new re.R(ze,Xe,jt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function kr(mt){mt.INTERNAL.registerComponent(new Re.wA("auth-compat",ze=>{const Xe=ze.getProvider("app-compat").getImmediate(),jt=ze.getProvider("auth");return new et(Xe,jt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:re.A.EMAIL_SIGNIN,PASSWORD_RESET:re.A.PASSWORD_RESET,RECOVER_EMAIL:re.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:re.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:re.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:re.A.VERIFY_EMAIL}},EmailAuthProvider:re.M,FacebookAuthProvider:re.N,GithubAuthProvider:re.T,GoogleAuthProvider:re.Q,OAuthProvider:re.U,SAMLAuthProvider:re.V,PhoneAuthProvider:fn,PhoneMultiFactorGenerator:re.m,RecaptchaVerifier:Bi,TwitterAuthProvider:re.W,Auth:et,AuthCredential:re.H,Error:Ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),mt.registerVersion("@firebase/auth-compat","0.2.18")}(a.Z)},9751:(In,Et,K)=>{K.d(Et,{y:()=>xe});var m=K(930),a=K(727),re=K(8822),Ee=K(9635),We=K(2416),Ae=K(576),Re=K(2806);let xe=(()=>{class Ge{constructor(ct){ct&&(this._subscribe=ct)}lift(ct){const wt=new Ge;return wt.source=this,wt.operator=ct,wt}subscribe(ct,wt,Wt){const Dt=function Ie(Ge){return Ge&&Ge instanceof m.Lv||function Me(Ge){return Ge&&(0,Ae.m)(Ge.next)&&(0,Ae.m)(Ge.error)&&(0,Ae.m)(Ge.complete)}(Ge)&&(0,a.Nn)(Ge)}(ct)?ct:new m.Hp(ct,wt,Wt);return(0,Re.x)(()=>{const{operator:vt,source:rt}=this;Dt.add(vt?vt.call(Dt,rt):rt?this._subscribe(Dt):this._trySubscribe(Dt))}),Dt}_trySubscribe(ct){try{return this._subscribe(ct)}catch(wt){ct.error(wt)}}forEach(ct,wt){return new(wt=tt(wt))((Wt,Dt)=>{const vt=new m.Hp({next:rt=>{try{ct(rt)}catch(qt){Dt(qt),vt.unsubscribe()}},error:Dt,complete:Wt});this.subscribe(vt)})}_subscribe(ct){var wt;return null===(wt=this.source)||void 0===wt?void 0:wt.subscribe(ct)}[re.L](){return this}pipe(...ct){return(0,Ee.U)(ct)(this)}toPromise(ct){return new(ct=tt(ct))((wt,Wt)=>{let Dt;this.subscribe(vt=>Dt=vt,vt=>Wt(vt),()=>wt(Dt))})}}return Ge.create=Mt=>new Ge(Mt),Ge})();function tt(Ge){var Mt;return null!==(Mt=Ge??We.v.Promise)&&void 0!==Mt?Mt:Promise}},7579:(In,Et,K)=>{K.d(Et,{x:()=>Re});var m=K(9751),a=K(727);const Ee=(0,K(3888).d)(tt=>function(){tt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var We=K(8737),Ae=K(2806);let Re=(()=>{class tt extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ie){const Ge=new xe(this,this);return Ge.operator=Ie,Ge}_throwIfClosed(){if(this.closed)throw new Ee}next(Ie){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ge of this.currentObservers)Ge.next(Ie)}})}error(Ie){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ie;const{observers:Ge}=this;for(;Ge.length;)Ge.shift().error(Ie)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ie}=this;for(;Ie.length;)Ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ie;return(null===(Ie=this.observers)||void 0===Ie?void 0:Ie.length)>0}_trySubscribe(Ie){return this._throwIfClosed(),super._trySubscribe(Ie)}_subscribe(Ie){return this._throwIfClosed(),this._checkFinalizedStatuses(Ie),this._innerSubscribe(Ie)}_innerSubscribe(Ie){const{hasError:Ge,isStopped:Mt,observers:ct}=this;return Ge||Mt?a.Lc:(this.currentObservers=null,ct.push(Ie),new a.w0(()=>{this.currentObservers=null,(0,We.P)(ct,Ie)}))}_checkFinalizedStatuses(Ie){const{hasError:Ge,thrownError:Mt,isStopped:ct}=this;Ge?Ie.error(Mt):ct&&Ie.complete()}asObservable(){const Ie=new m.y;return Ie.source=this,Ie}}return tt.create=(Me,Ie)=>new xe(Me,Ie),tt})();class xe extends Re{constructor(Me,Ie){super(),this.destination=Me,this.source=Ie}next(Me){var Ie,Ge;null===(Ge=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.next)||void 0===Ge||Ge.call(Ie,Me)}error(Me){var Ie,Ge;null===(Ge=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.error)||void 0===Ge||Ge.call(Ie,Me)}complete(){var Me,Ie;null===(Ie=null===(Me=this.destination)||void 0===Me?void 0:Me.complete)||void 0===Ie||Ie.call(Me)}_subscribe(Me){var Ie,Ge;return null!==(Ge=null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Me))&&void 0!==Ge?Ge:a.Lc}}},930:(In,Et,K)=>{K.d(Et,{Hp:()=>Wt,Lv:()=>Ge});var m=K(576),a=K(727),re=K(2416),Ee=K(7849),We=K(5032);const Ae=tt("C",void 0,void 0);function tt(Be,ve,nt){return{kind:Be,value:ve,error:nt}}var Me=K(3410),Ie=K(2806);class Ge extends a.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,a.Nn)(ve)&&ve.add(this)):this.destination=qt}static create(ve,nt,Qe){return new Wt(ve,nt,Qe)}next(ve){this.isStopped?rt(function xe(Be){return tt("N",Be,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?rt(function Re(Be){return tt("E",void 0,Be)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?rt(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Mt=Function.prototype.bind;function ct(Be,ve){return Mt.call(Be,ve)}class wt{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:nt}=this;if(nt.next)try{nt.next(ve)}catch(Qe){Dt(Qe)}}error(ve){const{partialObserver:nt}=this;if(nt.error)try{nt.error(ve)}catch(Qe){Dt(Qe)}else Dt(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(nt){Dt(nt)}}}class Wt extends Ge{constructor(ve,nt,Qe){let De;if(super(),(0,m.m)(ve)||!ve)De={next:ve??void 0,error:nt??void 0,complete:Qe??void 0};else{let Q;this&&re.v.useDeprecatedNextContext?(Q=Object.create(ve),Q.unsubscribe=()=>this.unsubscribe(),De={next:ve.next&&ct(ve.next,Q),error:ve.error&&ct(ve.error,Q),complete:ve.complete&&ct(ve.complete,Q)}):De=ve}this.destination=new wt(De)}}function Dt(Be){re.v.useDeprecatedSynchronousErrorHandling?(0,Ie.O)(Be):(0,Ee.h)(Be)}function rt(Be,ve){const{onStoppedNotification:nt}=re.v;nt&&Me.z.setTimeout(()=>nt(Be,ve))}const qt={closed:!0,next:We.Z,error:function vt(Be){throw Be},complete:We.Z}},727:(In,Et,K)=>{K.d(Et,{Lc:()=>Ae,w0:()=>We,Nn:()=>Re});var m=K(576);const re=(0,K(3888).d)(tt=>function(Ie){tt(this),this.message=Ie?`${Ie.length} errors occurred during unsubscription:\n${Ie.map((Ge,Mt)=>`${Mt+1}) ${Ge.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ie});var Ee=K(8737);class We{constructor(Me){this.initialTeardown=Me,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Me;if(!this.closed){this.closed=!0;const{_parentage:Ie}=this;if(Ie)if(this._parentage=null,Array.isArray(Ie))for(const ct of Ie)ct.remove(this);else Ie.remove(this);const{initialTeardown:Ge}=this;if((0,m.m)(Ge))try{Ge()}catch(ct){Me=ct instanceof re?ct.errors:[ct]}const{_finalizers:Mt}=this;if(Mt){this._finalizers=null;for(const ct of Mt)try{xe(ct)}catch(wt){Me=Me??[],wt instanceof re?Me=[...Me,...wt.errors]:Me.push(wt)}}if(Me)throw new re(Me)}}add(Me){var Ie;if(Me&&Me!==this)if(this.closed)xe(Me);else{if(Me instanceof We){if(Me.closed||Me._hasParent(this))return;Me._addParent(this)}(this._finalizers=null!==(Ie=this._finalizers)&&void 0!==Ie?Ie:[]).push(Me)}}_hasParent(Me){const{_parentage:Ie}=this;return Ie===Me||Array.isArray(Ie)&&Ie.includes(Me)}_addParent(Me){const{_parentage:Ie}=this;this._parentage=Array.isArray(Ie)?(Ie.push(Me),Ie):Ie?[Ie,Me]:Me}_removeParent(Me){const{_parentage:Ie}=this;Ie===Me?this._parentage=null:Array.isArray(Ie)&&(0,Ee.P)(Ie,Me)}remove(Me){const{_finalizers:Ie}=this;Ie&&(0,Ee.P)(Ie,Me),Me instanceof We&&Me._removeParent(this)}}We.EMPTY=(()=>{const tt=new We;return tt.closed=!0,tt})();const Ae=We.EMPTY;function Re(tt){return tt instanceof We||tt&&"closed"in tt&&(0,m.m)(tt.remove)&&(0,m.m)(tt.add)&&(0,m.m)(tt.unsubscribe)}function xe(tt){(0,m.m)(tt)?tt():tt.unsubscribe()}},2416:(In,Et,K)=>{K.d(Et,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(In,Et,K)=>{K.d(Et,{a:()=>Me});var m=K(9751),a=K(4742),re=K(8996),Ee=K(4671),We=K(3268),Ae=K(7669),Re=K(1810),xe=K(5403),tt=K(9672);function Me(...Mt){const ct=(0,Ae.yG)(Mt),wt=(0,Ae.jO)(Mt),{args:Wt,keys:Dt}=(0,a.D)(Mt);if(0===Wt.length)return(0,re.D)([],ct);const vt=new m.y(function Ie(Mt,ct,wt=Ee.y){return Wt=>{Ge(ct,()=>{const{length:Dt}=Mt,vt=new Array(Dt);let rt=Dt,qt=Dt;for(let Be=0;Be<Dt;Be++)Ge(ct,()=>{const ve=(0,re.D)(Mt[Be],ct);let nt=!1;ve.subscribe((0,xe.x)(Wt,Qe=>{vt[Be]=Qe,nt||(nt=!0,qt--),qt||Wt.next(wt(vt.slice()))},()=>{--rt||Wt.complete()}))},Wt)},Wt)}}(Wt,ct,Dt?rt=>(0,Re.n)(Dt,rt):Ee.y));return wt?vt.pipe((0,We.Z)(wt)):vt}function Ge(Mt,ct,wt){Mt?(0,tt.f)(wt,Mt,ct):ct()}},7272:(In,Et,K)=>{K.d(Et,{z:()=>We});var m=K(8189),re=K(7669),Ee=K(8996);function We(...Ae){return function a(){return(0,m.J)(1)}()((0,Ee.D)(Ae,(0,re.yG)(Ae)))}},515:(In,Et,K)=>{K.d(Et,{E:()=>a});const a=new(K(9751).y)(We=>We.complete())},4128:(In,Et,K)=>{K.d(Et,{D:()=>xe});var m=K(9751),a=K(4742),re=K(8421),Ee=K(7669),We=K(5403),Ae=K(3268),Re=K(1810);function xe(...tt){const Me=(0,Ee.jO)(tt),{args:Ie,keys:Ge}=(0,a.D)(tt),Mt=new m.y(ct=>{const{length:wt}=Ie;if(!wt)return void ct.complete();const Wt=new Array(wt);let Dt=wt,vt=wt;for(let rt=0;rt<wt;rt++){let qt=!1;(0,re.Xf)(Ie[rt]).subscribe((0,We.x)(ct,Be=>{qt||(qt=!0,vt--),Wt[rt]=Be},()=>Dt--,void 0,()=>{(!Dt||!qt)&&(vt||ct.next(Ge?(0,Re.n)(Ge,Wt):Wt),ct.complete())}))}});return Me?Mt.pipe((0,Ae.Z)(Me)):Mt}},8996:(In,Et,K)=>{K.d(Et,{D:()=>ve});var m=K(8421),a=K(5363),re=K(9468),Ae=K(9751),xe=K(2202),tt=K(576),Me=K(9672);function Ge(nt,Qe){if(!nt)throw new Error("Iterable cannot be null");return new Ae.y(De=>{(0,Me.f)(De,Qe,()=>{const Q=nt[Symbol.asyncIterator]();(0,Me.f)(De,Qe,()=>{Q.next().then(ft=>{ft.done?De.complete():De.next(ft.value)})},0,!0)})})}var Mt=K(3670),ct=K(8239),wt=K(1144),Wt=K(6495),Dt=K(2206),vt=K(4532),rt=K(3260);function ve(nt,Qe){return Qe?function Be(nt,Qe){if(null!=nt){if((0,Mt.c)(nt))return function Ee(nt,Qe){return(0,m.Xf)(nt).pipe((0,re.R)(Qe),(0,a.Q)(Qe))}(nt,Qe);if((0,wt.z)(nt))return function Re(nt,Qe){return new Ae.y(De=>{let Q=0;return Qe.schedule(function(){Q===nt.length?De.complete():(De.next(nt[Q++]),De.closed||this.schedule())})})}(nt,Qe);if((0,ct.t)(nt))return function We(nt,Qe){return(0,m.Xf)(nt).pipe((0,re.R)(Qe),(0,a.Q)(Qe))}(nt,Qe);if((0,Dt.D)(nt))return Ge(nt,Qe);if((0,Wt.T)(nt))return function Ie(nt,Qe){return new Ae.y(De=>{let Q;return(0,Me.f)(De,Qe,()=>{Q=nt[xe.h](),(0,Me.f)(De,Qe,()=>{let ft,Ve;try{({value:ft,done:Ve}=Q.next())}catch(it){return void De.error(it)}Ve?De.complete():De.next(ft)},0,!0)}),()=>(0,tt.m)(Q?.return)&&Q.return()})}(nt,Qe);if((0,rt.L)(nt))return function qt(nt,Qe){return Ge((0,rt.Q)(nt),Qe)}(nt,Qe)}throw(0,vt.z)(nt)}(nt,Qe):(0,m.Xf)(nt)}},8421:(In,Et,K)=>{K.d(Et,{Xf:()=>Mt});var m=K(655),a=K(1144),re=K(8239),Ee=K(9751),We=K(3670),Ae=K(2206),Re=K(4532),xe=K(6495),tt=K(3260),Me=K(576),Ie=K(7849),Ge=K(8822);function Mt(Be){if(Be instanceof Ee.y)return Be;if(null!=Be){if((0,We.c)(Be))return function ct(Be){return new Ee.y(ve=>{const nt=Be[Ge.L]();if((0,Me.m)(nt.subscribe))return nt.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Be);if((0,a.z)(Be))return function wt(Be){return new Ee.y(ve=>{for(let nt=0;nt<Be.length&&!ve.closed;nt++)ve.next(Be[nt]);ve.complete()})}(Be);if((0,re.t)(Be))return function Wt(Be){return new Ee.y(ve=>{Be.then(nt=>{ve.closed||(ve.next(nt),ve.complete())},nt=>ve.error(nt)).then(null,Ie.h)})}(Be);if((0,Ae.D)(Be))return vt(Be);if((0,xe.T)(Be))return function Dt(Be){return new Ee.y(ve=>{for(const nt of Be)if(ve.next(nt),ve.closed)return;ve.complete()})}(Be);if((0,tt.L)(Be))return function rt(Be){return vt((0,tt.Q)(Be))}(Be)}throw(0,Re.z)(Be)}function vt(Be){return new Ee.y(ve=>{(function qt(Be,ve){var nt,Qe,De,Q;return(0,m.mG)(this,void 0,void 0,function*(){try{for(nt=(0,m.KL)(Be);!(Qe=yield nt.next()).done;)if(ve.next(Qe.value),ve.closed)return}catch(ft){De={error:ft}}finally{try{Qe&&!Qe.done&&(Q=nt.return)&&(yield Q.call(nt))}finally{if(De)throw De.error}}ve.complete()})})(Be,ve).catch(nt=>ve.error(nt))})}},6451:(In,Et,K)=>{K.d(Et,{T:()=>Ae});var m=K(8189),a=K(8421),re=K(515),Ee=K(7669),We=K(8996);function Ae(...Re){const xe=(0,Ee.yG)(Re),tt=(0,Ee._6)(Re,1/0),Me=Re;return Me.length?1===Me.length?(0,a.Xf)(Me[0]):(0,m.J)(tt)((0,We.D)(Me,xe)):re.E}},9646:(In,Et,K)=>{K.d(Et,{of:()=>re});var m=K(7669),a=K(8996);function re(...Ee){const We=(0,m.yG)(Ee);return(0,a.D)(Ee,We)}},2843:(In,Et,K)=>{K.d(Et,{_:()=>re});var m=K(9751),a=K(576);function re(Ee,We){const Ae=(0,a.m)(Ee)?Ee:()=>Ee,Re=xe=>xe.error(Ae());return new m.y(We?xe=>We.schedule(Re,0,xe):Re)}},5403:(In,Et,K)=>{K.d(Et,{x:()=>a});var m=K(930);function a(Ee,We,Ae,Re,xe){return new re(Ee,We,Ae,Re,xe)}class re extends m.Lv{constructor(We,Ae,Re,xe,tt,Me){super(We),this.onFinalize=tt,this.shouldUnsubscribe=Me,this._next=Ae?function(Ie){try{Ae(Ie)}catch(Ge){We.error(Ge)}}:super._next,this._error=xe?function(Ie){try{xe(Ie)}catch(Ge){We.error(Ge)}finally{this.unsubscribe()}}:super._error,this._complete=Re?function(){try{Re()}catch(Ie){We.error(Ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var We;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(We=this.onFinalize)||void 0===We||We.call(this))}}}},262:(In,Et,K)=>{K.d(Et,{K:()=>Ee});var m=K(8421),a=K(5403),re=K(4482);function Ee(We){return(0,re.e)((Ae,Re)=>{let Me,xe=null,tt=!1;xe=Ae.subscribe((0,a.x)(Re,void 0,void 0,Ie=>{Me=(0,m.Xf)(We(Ie,Ee(We)(Ae))),xe?(xe.unsubscribe(),xe=null,Me.subscribe(Re)):tt=!0})),tt&&(xe.unsubscribe(),xe=null,Me.subscribe(Re))})}},4351:(In,Et,K)=>{K.d(Et,{b:()=>re});var m=K(5577),a=K(576);function re(Ee,We){return(0,a.m)(We)?(0,m.z)(Ee,We,1):(0,m.z)(Ee,1)}},8372:(In,Et,K)=>{K.d(Et,{b:()=>Ee});var m=K(4986),a=K(4482),re=K(5403);function Ee(We,Ae=m.z){return(0,a.e)((Re,xe)=>{let tt=null,Me=null,Ie=null;const Ge=()=>{if(tt){tt.unsubscribe(),tt=null;const ct=Me;Me=null,xe.next(ct)}};function Mt(){const ct=Ie+We,wt=Ae.now();if(wt<ct)return tt=this.schedule(void 0,ct-wt),void xe.add(tt);Ge()}Re.subscribe((0,re.x)(xe,ct=>{Me=ct,Ie=Ae.now(),tt||(tt=Ae.schedule(Mt,We),xe.add(tt))},()=>{Ge(),xe.complete()},void 0,()=>{Me=tt=null}))})}},6590:(In,Et,K)=>{K.d(Et,{d:()=>re});var m=K(4482),a=K(5403);function re(Ee){return(0,m.e)((We,Ae)=>{let Re=!1;We.subscribe((0,a.x)(Ae,xe=>{Re=!0,Ae.next(xe)},()=>{Re||Ae.next(Ee),Ae.complete()}))})}},1884:(In,Et,K)=>{K.d(Et,{x:()=>Ee});var m=K(4671),a=K(4482),re=K(5403);function Ee(Ae,Re=m.y){return Ae=Ae??We,(0,a.e)((xe,tt)=>{let Me,Ie=!0;xe.subscribe((0,re.x)(tt,Ge=>{const Mt=Re(Ge);(Ie||!Ae(Me,Mt))&&(Ie=!1,Me=Mt,tt.next(Ge))}))})}function We(Ae,Re){return Ae===Re}},9300:(In,Et,K)=>{K.d(Et,{h:()=>re});var m=K(4482),a=K(5403);function re(Ee,We){return(0,m.e)((Ae,Re)=>{let xe=0;Ae.subscribe((0,a.x)(Re,tt=>Ee.call(We,tt,xe++)&&Re.next(tt)))})}},8746:(In,Et,K)=>{K.d(Et,{x:()=>a});var m=K(4482);function a(re){return(0,m.e)((Ee,We)=>{try{Ee.subscribe(We)}finally{We.add(re)}})}},590:(In,Et,K)=>{K.d(Et,{P:()=>Re});var m=K(6805),a=K(9300),re=K(5698),Ee=K(6590),We=K(8068),Ae=K(4671);function Re(xe,tt){const Me=arguments.length>=2;return Ie=>Ie.pipe(xe?(0,a.h)((Ge,Mt)=>xe(Ge,Mt,Ie)):Ae.y,(0,re.q)(1),Me?(0,Ee.d)(tt):(0,We.T)(()=>new m.K))}},4004:(In,Et,K)=>{K.d(Et,{U:()=>re});var m=K(4482),a=K(5403);function re(Ee,We){return(0,m.e)((Ae,Re)=>{let xe=0;Ae.subscribe((0,a.x)(Re,tt=>{Re.next(Ee.call(We,tt,xe++))}))})}},8189:(In,Et,K)=>{K.d(Et,{J:()=>re});var m=K(5577),a=K(4671);function re(Ee=1/0){return(0,m.z)(a.y,Ee)}},5577:(In,Et,K)=>{K.d(Et,{z:()=>xe});var m=K(4004),a=K(8421),re=K(4482),Ee=K(9672),We=K(5403),Re=K(576);function xe(tt,Me,Ie=1/0){return(0,Re.m)(Me)?xe((Ge,Mt)=>(0,m.U)((ct,wt)=>Me(Ge,ct,Mt,wt))((0,a.Xf)(tt(Ge,Mt))),Ie):("number"==typeof Me&&(Ie=Me),(0,re.e)((Ge,Mt)=>function Ae(tt,Me,Ie,Ge,Mt,ct,wt,Wt){const Dt=[];let vt=0,rt=0,qt=!1;const Be=()=>{qt&&!Dt.length&&!vt&&Me.complete()},ve=Qe=>vt<Ge?nt(Qe):Dt.push(Qe),nt=Qe=>{ct&&Me.next(Qe),vt++;let De=!1;(0,a.Xf)(Ie(Qe,rt++)).subscribe((0,We.x)(Me,Q=>{Mt?.(Q),ct?ve(Q):Me.next(Q)},()=>{De=!0},void 0,()=>{if(De)try{for(vt--;Dt.length&&vt<Ge;){const Q=Dt.shift();wt?(0,Ee.f)(Me,wt,()=>nt(Q)):nt(Q)}Be()}catch(Q){Me.error(Q)}}))};return tt.subscribe((0,We.x)(Me,ve,()=>{qt=!0,Be()})),()=>{Wt?.()}}(Ge,Mt,tt,Ie)))}},5363:(In,Et,K)=>{K.d(Et,{Q:()=>Ee});var m=K(9672),a=K(4482),re=K(5403);function Ee(We,Ae=0){return(0,a.e)((Re,xe)=>{Re.subscribe((0,re.x)(xe,tt=>(0,m.f)(xe,We,()=>xe.next(tt),Ae),()=>(0,m.f)(xe,We,()=>xe.complete(),Ae),tt=>(0,m.f)(xe,We,()=>xe.error(tt),Ae)))})}},5026:(In,Et,K)=>{K.d(Et,{R:()=>Ee});var m=K(4482),a=K(5403);function re(We,Ae,Re,xe,tt){return(Me,Ie)=>{let Ge=Re,Mt=Ae,ct=0;Me.subscribe((0,a.x)(Ie,wt=>{const Wt=ct++;Mt=Ge?We(Mt,wt,Wt):(Ge=!0,wt),xe&&Ie.next(Mt)},tt&&(()=>{Ge&&Ie.next(Mt),Ie.complete()})))}}function Ee(We,Ae){return(0,m.e)(re(We,Ae,arguments.length>=2,!0))}},3099:(In,Et,K)=>{K.d(Et,{B:()=>We});var m=K(8421),a=K(7579),re=K(930),Ee=K(4482);function We(Re={}){const{connector:xe=(()=>new a.x),resetOnError:tt=!0,resetOnComplete:Me=!0,resetOnRefCountZero:Ie=!0}=Re;return Ge=>{let Mt,ct,wt,Wt=0,Dt=!1,vt=!1;const rt=()=>{ct?.unsubscribe(),ct=void 0},qt=()=>{rt(),Mt=wt=void 0,Dt=vt=!1},Be=()=>{const ve=Mt;qt(),ve?.unsubscribe()};return(0,Ee.e)((ve,nt)=>{Wt++,!vt&&!Dt&&rt();const Qe=wt=wt??xe();nt.add(()=>{Wt--,0===Wt&&!vt&&!Dt&&(ct=Ae(Be,Ie))}),Qe.subscribe(nt),!Mt&&Wt>0&&(Mt=new re.Hp({next:De=>Qe.next(De),error:De=>{vt=!0,rt(),ct=Ae(qt,tt,De),Qe.error(De)},complete:()=>{Dt=!0,rt(),ct=Ae(qt,Me),Qe.complete()}}),(0,m.Xf)(ve).subscribe(Mt))})(Ge)}}function Ae(Re,xe,...tt){if(!0===xe)return void Re();if(!1===xe)return;const Me=new re.Hp({next:()=>{Me.unsubscribe(),Re()}});return xe(...tt).subscribe(Me)}},8675:(In,Et,K)=>{K.d(Et,{O:()=>Ee});var m=K(7272),a=K(7669),re=K(4482);function Ee(...We){const Ae=(0,a.yG)(We);return(0,re.e)((Re,xe)=>{(Ae?(0,m.z)(We,Re,Ae):(0,m.z)(We,Re)).subscribe(xe)})}},9468:(In,Et,K)=>{K.d(Et,{R:()=>a});var m=K(4482);function a(re,Ee=0){return(0,m.e)((We,Ae)=>{Ae.add(re.schedule(()=>We.subscribe(Ae),Ee))})}},3900:(In,Et,K)=>{K.d(Et,{w:()=>Ee});var m=K(8421),a=K(4482),re=K(5403);function Ee(We,Ae){return(0,a.e)((Re,xe)=>{let tt=null,Me=0,Ie=!1;const Ge=()=>Ie&&!tt&&xe.complete();Re.subscribe((0,re.x)(xe,Mt=>{tt?.unsubscribe();let ct=0;const wt=Me++;(0,m.Xf)(We(Mt,wt)).subscribe(tt=(0,re.x)(xe,Wt=>xe.next(Ae?Ae(Mt,Wt,wt,ct++):Wt),()=>{tt=null,Ge()}))},()=>{Ie=!0,Ge()}))})}},5698:(In,Et,K)=>{K.d(Et,{q:()=>Ee});var m=K(515),a=K(4482),re=K(5403);function Ee(We){return We<=0?()=>m.E:(0,a.e)((Ae,Re)=>{let xe=0;Ae.subscribe((0,re.x)(Re,tt=>{++xe<=We&&(Re.next(tt),We<=xe&&Re.complete())}))})}},8505:(In,Et,K)=>{K.d(Et,{b:()=>We});var m=K(576),a=K(4482),re=K(5403),Ee=K(4671);function We(Ae,Re,xe){const tt=(0,m.m)(Ae)||Re||xe?{next:Ae,error:Re,complete:xe}:Ae;return tt?(0,a.e)((Me,Ie)=>{var Ge;null===(Ge=tt.subscribe)||void 0===Ge||Ge.call(tt);let Mt=!0;Me.subscribe((0,re.x)(Ie,ct=>{var wt;null===(wt=tt.next)||void 0===wt||wt.call(tt,ct),Ie.next(ct)},()=>{var ct;Mt=!1,null===(ct=tt.complete)||void 0===ct||ct.call(tt),Ie.complete()},ct=>{var wt;Mt=!1,null===(wt=tt.error)||void 0===wt||wt.call(tt,ct),Ie.error(ct)},()=>{var ct,wt;Mt&&(null===(ct=tt.unsubscribe)||void 0===ct||ct.call(tt)),null===(wt=tt.finalize)||void 0===wt||wt.call(tt)}))}):Ee.y}},8068:(In,Et,K)=>{K.d(Et,{T:()=>Ee});var m=K(6805),a=K(4482),re=K(5403);function Ee(Ae=We){return(0,a.e)((Re,xe)=>{let tt=!1;Re.subscribe((0,re.x)(xe,Me=>{tt=!0,xe.next(Me)},()=>tt?xe.complete():xe.error(Ae())))})}function We(){return new m.K}},4408:(In,Et,K)=>{K.d(Et,{o:()=>We});var m=K(727);class a extends m.w0{constructor(Re,xe){super()}schedule(Re,xe=0){return this}}const re={setInterval(Ae,Re,...xe){const{delegate:tt}=re;return tt?.setInterval?tt.setInterval(Ae,Re,...xe):setInterval(Ae,Re,...xe)},clearInterval(Ae){const{delegate:Re}=re;return(Re?.clearInterval||clearInterval)(Ae)},delegate:void 0};var Ee=K(8737);class We extends a{constructor(Re,xe){super(Re,xe),this.scheduler=Re,this.work=xe,this.pending=!1}schedule(Re,xe=0){if(this.closed)return this;this.state=Re;const tt=this.id,Me=this.scheduler;return null!=tt&&(this.id=this.recycleAsyncId(Me,tt,xe)),this.pending=!0,this.delay=xe,this.id=this.id||this.requestAsyncId(Me,this.id,xe),this}requestAsyncId(Re,xe,tt=0){return re.setInterval(Re.flush.bind(Re,this),tt)}recycleAsyncId(Re,xe,tt=0){if(null!=tt&&this.delay===tt&&!1===this.pending)return xe;re.clearInterval(xe)}execute(Re,xe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const tt=this._execute(Re,xe);if(tt)return tt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Re,xe){let Me,tt=!1;try{this.work(Re)}catch(Ie){tt=!0,Me=Ie||new Error("Scheduled action threw falsy error")}if(tt)return this.unsubscribe(),Me}unsubscribe(){if(!this.closed){const{id:Re,scheduler:xe}=this,{actions:tt}=xe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ee.P)(tt,this),null!=Re&&(this.id=this.recycleAsyncId(xe,Re,null)),this.delay=null,super.unsubscribe()}}}},7565:(In,Et,K)=>{K.d(Et,{v:()=>re});var m=K(6063);class a{constructor(We,Ae=a.now){this.schedulerActionCtor=We,this.now=Ae}schedule(We,Ae=0,Re){return new this.schedulerActionCtor(this,We).schedule(Re,Ae)}}a.now=m.l.now;class re extends a{constructor(We,Ae=a.now){super(We,Ae),this.actions=[],this._active=!1,this._scheduled=void 0}flush(We){const{actions:Ae}=this;if(this._active)return void Ae.push(We);let Re;this._active=!0;do{if(Re=We.execute(We.state,We.delay))break}while(We=Ae.shift());if(this._active=!1,Re){for(;We=Ae.shift();)We.unsubscribe();throw Re}}}},4986:(In,Et,K)=>{K.d(Et,{z:()=>re});var m=K(4408);const re=new(K(7565).v)(m.o)},6063:(In,Et,K)=>{K.d(Et,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(In,Et,K)=>{K.d(Et,{z:()=>m});const m={setTimeout(a,re,...Ee){const{delegate:We}=m;return We?.setTimeout?We.setTimeout(a,re,...Ee):setTimeout(a,re,...Ee)},clearTimeout(a){const{delegate:re}=m;return(re?.clearTimeout||clearTimeout)(a)},delegate:void 0}},2202:(In,Et,K)=>{K.d(Et,{h:()=>a});const a=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(In,Et,K)=>{K.d(Et,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(In,Et,K)=>{K.d(Et,{K:()=>a});const a=(0,K(3888).d)(re=>function(){re(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(In,Et,K)=>{K.d(Et,{_6:()=>Ae,jO:()=>Ee,yG:()=>We});var m=K(576);function re(Re){return Re[Re.length-1]}function Ee(Re){return(0,m.m)(re(Re))?Re.pop():void 0}function We(Re){return function a(Re){return Re&&(0,m.m)(Re.schedule)}(re(Re))?Re.pop():void 0}function Ae(Re,xe){return"number"==typeof re(Re)?Re.pop():xe}},4742:(In,Et,K)=>{K.d(Et,{D:()=>We});const{isArray:m}=Array,{getPrototypeOf:a,prototype:re,keys:Ee}=Object;function We(Re){if(1===Re.length){const xe=Re[0];if(m(xe))return{args:xe,keys:null};if(function Ae(Re){return Re&&"object"==typeof Re&&a(Re)===re}(xe)){const tt=Ee(xe);return{args:tt.map(Me=>xe[Me]),keys:tt}}}return{args:Re,keys:null}}},8737:(In,Et,K)=>{function m(a,re){if(a){const Ee=a.indexOf(re);0<=Ee&&a.splice(Ee,1)}}K.d(Et,{P:()=>m})},3888:(In,Et,K)=>{function m(a){const Ee=a(We=>{Error.call(We),We.stack=(new Error).stack});return Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee,Ee}K.d(Et,{d:()=>m})},1810:(In,Et,K)=>{function m(a,re){return a.reduce((Ee,We,Ae)=>(Ee[We]=re[Ae],Ee),{})}K.d(Et,{n:()=>m})},2806:(In,Et,K)=>{K.d(Et,{O:()=>Ee,x:()=>re});var m=K(2416);let a=null;function re(We){if(m.v.useDeprecatedSynchronousErrorHandling){const Ae=!a;if(Ae&&(a={errorThrown:!1,error:null}),We(),Ae){const{errorThrown:Re,error:xe}=a;if(a=null,Re)throw xe}}else We()}function Ee(We){m.v.useDeprecatedSynchronousErrorHandling&&a&&(a.errorThrown=!0,a.error=We)}},9672:(In,Et,K)=>{function m(a,re,Ee,We=0,Ae=!1){const Re=re.schedule(function(){Ee(),Ae?a.add(this.schedule(null,We)):this.unsubscribe()},We);if(a.add(Re),!Ae)return Re}K.d(Et,{f:()=>m})},4671:(In,Et,K)=>{function m(a){return a}K.d(Et,{y:()=>m})},1144:(In,Et,K)=>{K.d(Et,{z:()=>m});const m=a=>a&&"number"==typeof a.length&&"function"!=typeof a},2206:(In,Et,K)=>{K.d(Et,{D:()=>a});var m=K(576);function a(re){return Symbol.asyncIterator&&(0,m.m)(re?.[Symbol.asyncIterator])}},576:(In,Et,K)=>{function m(a){return"function"==typeof a}K.d(Et,{m:()=>m})},3670:(In,Et,K)=>{K.d(Et,{c:()=>re});var m=K(8822),a=K(576);function re(Ee){return(0,a.m)(Ee[m.L])}},6495:(In,Et,K)=>{K.d(Et,{T:()=>re});var m=K(2202),a=K(576);function re(Ee){return(0,a.m)(Ee?.[m.h])}},8239:(In,Et,K)=>{K.d(Et,{t:()=>a});var m=K(576);function a(re){return(0,m.m)(re?.then)}},3260:(In,Et,K)=>{K.d(Et,{L:()=>Ee,Q:()=>re});var m=K(655),a=K(576);function re(We){return(0,m.FC)(this,arguments,function*(){const Re=We.getReader();try{for(;;){const{value:xe,done:tt}=yield(0,m.qq)(Re.read());if(tt)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(xe)}}finally{Re.releaseLock()}})}function Ee(We){return(0,a.m)(We?.getReader)}},4482:(In,Et,K)=>{K.d(Et,{A:()=>a,e:()=>re});var m=K(576);function a(Ee){return(0,m.m)(Ee?.lift)}function re(Ee){return We=>{if(a(We))return We.lift(function(Ae){try{return Ee(Ae,this)}catch(Re){this.error(Re)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(In,Et,K)=>{K.d(Et,{Z:()=>Ee});var m=K(4004);const{isArray:a}=Array;function Ee(We){return(0,m.U)(Ae=>function re(We,Ae){return a(Ae)?We(...Ae):We(Ae)}(We,Ae))}},5032:(In,Et,K)=>{function m(){}K.d(Et,{Z:()=>m})},9635:(In,Et,K)=>{K.d(Et,{U:()=>re,z:()=>a});var m=K(4671);function a(...Ee){return re(Ee)}function re(Ee){return 0===Ee.length?m.y:1===Ee.length?Ee[0]:function(Ae){return Ee.reduce((Re,xe)=>xe(Re),Ae)}}},7849:(In,Et,K)=>{K.d(Et,{h:()=>re});var m=K(2416),a=K(3410);function re(Ee){a.z.setTimeout(()=>{const{onUnhandledError:We}=m.v;if(!We)throw Ee;We(Ee)})}},4532:(In,Et,K)=>{function m(a){return new TypeError(`You provided ${null!==a&&"object"==typeof a?"an invalid object":`'${a}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}K.d(Et,{z:()=>m})},655:(In,Et,K)=>{function Ee(Ve,it){var bt={};for(var yt in Ve)Object.prototype.hasOwnProperty.call(Ve,yt)&&it.indexOf(yt)<0&&(bt[yt]=Ve[yt]);if(null!=Ve&&"function"==typeof Object.getOwnPropertySymbols){var Yt=0;for(yt=Object.getOwnPropertySymbols(Ve);Yt<yt.length;Yt++)it.indexOf(yt[Yt])<0&&Object.prototype.propertyIsEnumerable.call(Ve,yt[Yt])&&(bt[yt[Yt]]=Ve[yt[Yt]])}return bt}function xe(Ve,it,bt,yt){return new(bt||(bt=Promise))(function(on,pn){function On(ci){try{$t(yt.next(ci))}catch(Bn){pn(Bn)}}function Nn(ci){try{$t(yt.throw(ci))}catch(Bn){pn(Bn)}}function $t(ci){ci.done?on(ci.value):function Yt(on){return on instanceof bt?on:new bt(function(pn){pn(on)})}(ci.value).then(On,Nn)}$t((yt=yt.apply(Ve,it||[])).next())})}function Dt(Ve){return this instanceof Dt?(this.v=Ve,this):new Dt(Ve)}function vt(Ve,it,bt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Yt,yt=bt.apply(Ve,it||[]),on=[];return Yt={},pn("next"),pn("throw"),pn("return"),Yt[Symbol.asyncIterator]=function(){return this},Yt;function pn(St){yt[St]&&(Yt[St]=function(Vt){return new Promise(function(Ue,_t){on.push([St,Vt,Ue,_t])>1||On(St,Vt)})})}function On(St,Vt){try{!function Nn(St){St.value instanceof Dt?Promise.resolve(St.value.v).then($t,ci):Bn(on[0][2],St)}(yt[St](Vt))}catch(Ue){Bn(on[0][3],Ue)}}function $t(St){On("next",St)}function ci(St){On("throw",St)}function Bn(St,Vt){St(Vt),on.shift(),on.length&&On(on[0][0],on[0][1])}}function qt(Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bt,it=Ve[Symbol.asyncIterator];return it?it.call(Ve):(Ve=function Ge(Ve){var it="function"==typeof Symbol&&Symbol.iterator,bt=it&&Ve[it],yt=0;if(bt)return bt.call(Ve);if(Ve&&"number"==typeof Ve.length)return{next:function(){return Ve&&yt>=Ve.length&&(Ve=void 0),{value:Ve&&Ve[yt++],done:!Ve}}};throw new TypeError(it?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ve),bt={},yt("next"),yt("throw"),yt("return"),bt[Symbol.asyncIterator]=function(){return this},bt);function yt(on){bt[on]=Ve[on]&&function(pn){return new Promise(function(On,Nn){!function Yt(on,pn,On,Nn){Promise.resolve(Nn).then(function($t){on({value:$t,done:On})},pn)}(On,Nn,(pn=Ve[on](pn)).done,pn.value)})}}}K.d(Et,{FC:()=>vt,KL:()=>qt,_T:()=>Ee,mG:()=>xe,qq:()=>Dt})},7340:(In,Et,K)=>{K.d(Et,{LC:()=>a,SB:()=>tt,X$:()=>Ee,ZE:()=>rt,ZN:()=>vt,_j:()=>m,eR:()=>Ie,jt:()=>We,k1:()=>qt,l3:()=>re,oB:()=>xe,oQ:()=>Ge,vP:()=>Re});class m{}class a{}const re="*";function Ee(Be,ve){return{type:7,name:Be,definitions:ve,options:{}}}function We(Be,ve=null){return{type:4,styles:ve,timings:Be}}function Re(Be,ve=null){return{type:2,steps:Be,options:ve}}function xe(Be){return{type:6,styles:Be,offset:null}}function tt(Be,ve,nt){return{type:0,name:Be,styles:ve,options:nt}}function Ie(Be,ve,nt=null){return{type:1,expr:Be,animation:ve,options:nt}}function Ge(Be,ve=null){return{type:8,animation:Be,options:ve}}function Dt(Be){Promise.resolve(null).then(Be)}class vt{constructor(ve=0,nt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ve+nt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ve=>ve()),this._onDoneFns=[])}onStart(ve){this._originalOnStartFns.push(ve),this._onStartFns.push(ve)}onDone(ve){this._originalOnDoneFns.push(ve),this._onDoneFns.push(ve)}onDestroy(ve){this._onDestroyFns.push(ve)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Dt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ve=>ve()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ve=>ve()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(ve){this._position=this.totalTime?ve*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ve){const nt="start"==ve?this._onStartFns:this._onDoneFns;nt.forEach(Qe=>Qe()),nt.length=0}}class rt{constructor(ve){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ve;let nt=0,Qe=0,De=0;const Q=this.players.length;0==Q?Dt(()=>this._onFinish()):this.players.forEach(ft=>{ft.onDone(()=>{++nt==Q&&this._onFinish()}),ft.onDestroy(()=>{++Qe==Q&&this._onDestroy()}),ft.onStart(()=>{++De==Q&&this._onStart()})}),this.totalTime=this.players.reduce((ft,Ve)=>Math.max(ft,Ve.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ve=>ve()),this._onDoneFns=[])}init(){this.players.forEach(ve=>ve.init())}onStart(ve){this._onStartFns.push(ve)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ve=>ve()),this._onStartFns=[])}onDone(ve){this._onDoneFns.push(ve)}onDestroy(ve){this._onDestroyFns.push(ve)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ve=>ve.play())}pause(){this.players.forEach(ve=>ve.pause())}restart(){this.players.forEach(ve=>ve.restart())}finish(){this._onFinish(),this.players.forEach(ve=>ve.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ve=>ve.destroy()),this._onDestroyFns.forEach(ve=>ve()),this._onDestroyFns=[])}reset(){this.players.forEach(ve=>ve.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ve){const nt=ve*this.totalTime;this.players.forEach(Qe=>{const De=Qe.totalTime?Math.min(1,nt/Qe.totalTime):1;Qe.setPosition(De)})}getPosition(){const ve=this.players.reduce((nt,Qe)=>null===nt||Qe.totalTime>nt.totalTime?Qe:nt,null);return null!=ve?ve.getPosition():0}beforeDestroy(){this.players.forEach(ve=>{ve.beforeDestroy&&ve.beforeDestroy()})}triggerCallback(ve){const nt="start"==ve?this._onStartFns:this._onDoneFns;nt.forEach(Qe=>Qe()),nt.length=0}}const qt="!"},6895:(In,Et,K)=>{K.d(Et,{Do:()=>qt,EM:()=>Po,HT:()=>We,JF:()=>us,K0:()=>Re,Mx:()=>po,NF:()=>Jr,O5:()=>Or,PC:()=>Ro,PM:()=>ls,S$:()=>Dt,V_:()=>Me,Ye:()=>Be,b0:()=>rt,bD:()=>Qr,ez:()=>Ca,mk:()=>Xi,q:()=>re,sg:()=>Ts,tP:()=>ia,w_:()=>Ae});var m=K(4650);let a=null;function re(){return a}function We(B){a||(a=B)}class Ae{}const Re=new m.OlP("DocumentToken");let xe=(()=>{class B{historyGo(W){throw new Error("Not implemented")}}return B.\u0275fac=function(W){return new(W||B)},B.\u0275prov=m.Yz7({token:B,factory:function(){return function tt(){return(0,m.LFG)(Ie)}()},providedIn:"platform"}),B})();const Me=new m.OlP("Location Initialized");let Ie=(()=>{class B extends xe{constructor(W){super(),this._doc=W,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return re().getBaseHref(this._doc)}onPopState(W){const ge=re().getGlobalEventTarget(this._doc,"window");return ge.addEventListener("popstate",W,!1),()=>ge.removeEventListener("popstate",W)}onHashChange(W){const ge=re().getGlobalEventTarget(this._doc,"window");return ge.addEventListener("hashchange",W,!1),()=>ge.removeEventListener("hashchange",W)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(W){this.location.pathname=W}pushState(W,ge,$e){Ge()?this._history.pushState(W,ge,$e):this.location.hash=$e}replaceState(W,ge,$e){Ge()?this._history.replaceState(W,ge,$e):this.location.hash=$e}forward(){this._history.forward()}back(){this._history.back()}historyGo(W=0){this._history.go(W)}getState(){return this._history.state}}return B.\u0275fac=function(W){return new(W||B)(m.LFG(Re))},B.\u0275prov=m.Yz7({token:B,factory:function(){return function Mt(){return new Ie((0,m.LFG)(Re))}()},providedIn:"platform"}),B})();function Ge(){return!!window.history.pushState}function ct(B,oe){if(0==B.length)return oe;if(0==oe.length)return B;let W=0;return B.endsWith("/")&&W++,oe.startsWith("/")&&W++,2==W?B+oe.substring(1):1==W?B+oe:B+"/"+oe}function wt(B){const oe=B.match(/#|\?|$/),W=oe&&oe.index||B.length;return B.slice(0,W-("/"===B[W-1]?1:0))+B.slice(W)}function Wt(B){return B&&"?"!==B[0]?"?"+B:B}let Dt=(()=>{class B{historyGo(W){throw new Error("Not implemented")}}return B.\u0275fac=function(W){return new(W||B)},B.\u0275prov=m.Yz7({token:B,factory:function(){return(0,m.f3M)(rt)},providedIn:"root"}),B})();const vt=new m.OlP("appBaseHref");let rt=(()=>{class B extends Dt{constructor(W,ge){super(),this._platformLocation=W,this._removeListenerFns=[],this._baseHref=ge??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(Re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}prepareExternalUrl(W){return ct(this._baseHref,W)}path(W=!1){const ge=this._platformLocation.pathname+Wt(this._platformLocation.search),$e=this._platformLocation.hash;return $e&&W?`${ge}${$e}`:ge}pushState(W,ge,$e,xt){const Bt=this.prepareExternalUrl($e+Wt(xt));this._platformLocation.pushState(W,ge,Bt)}replaceState(W,ge,$e,xt){const Bt=this.prepareExternalUrl($e+Wt(xt));this._platformLocation.replaceState(W,ge,Bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}}return B.\u0275fac=function(W){return new(W||B)(m.LFG(xe),m.LFG(vt,8))},B.\u0275prov=m.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})(),qt=(()=>{class B extends Dt{constructor(W,ge){super(),this._platformLocation=W,this._baseHref="",this._removeListenerFns=[],null!=ge&&(this._baseHref=ge)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}path(W=!1){let ge=this._platformLocation.hash;return null==ge&&(ge="#"),ge.length>0?ge.substring(1):ge}prepareExternalUrl(W){const ge=ct(this._baseHref,W);return ge.length>0?"#"+ge:ge}pushState(W,ge,$e,xt){let Bt=this.prepareExternalUrl($e+Wt(xt));0==Bt.length&&(Bt=this._platformLocation.pathname),this._platformLocation.pushState(W,ge,Bt)}replaceState(W,ge,$e,xt){let Bt=this.prepareExternalUrl($e+Wt(xt));0==Bt.length&&(Bt=this._platformLocation.pathname),this._platformLocation.replaceState(W,ge,Bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}}return B.\u0275fac=function(W){return new(W||B)(m.LFG(xe),m.LFG(vt,8))},B.\u0275prov=m.Yz7({token:B,factory:B.\u0275fac}),B})(),Be=(()=>{class B{constructor(W){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=W;const ge=this._locationStrategy.getBaseHref();this._baseHref=wt(Qe(ge)),this._locationStrategy.onPopState($e=>{this._subject.emit({url:this.path(!0),pop:!0,state:$e.state,type:$e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(W=!1){return this.normalize(this._locationStrategy.path(W))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(W,ge=""){return this.path()==this.normalize(W+Wt(ge))}normalize(W){return B.stripTrailingSlash(function nt(B,oe){return B&&oe.startsWith(B)?oe.substring(B.length):oe}(this._baseHref,Qe(W)))}prepareExternalUrl(W){return W&&"/"!==W[0]&&(W="/"+W),this._locationStrategy.prepareExternalUrl(W)}go(W,ge="",$e=null){this._locationStrategy.pushState($e,"",W,ge),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+Wt(ge)),$e)}replaceState(W,ge="",$e=null){this._locationStrategy.replaceState($e,"",W,ge),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+Wt(ge)),$e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(W=0){this._locationStrategy.historyGo?.(W)}onUrlChange(W){return this._urlChangeListeners.push(W),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ge=>{this._notifyUrlChangeListeners(ge.url,ge.state)})),()=>{const ge=this._urlChangeListeners.indexOf(W);this._urlChangeListeners.splice(ge,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(W="",ge){this._urlChangeListeners.forEach($e=>$e(W,ge))}subscribe(W,ge,$e){return this._subject.subscribe({next:W,error:ge,complete:$e})}}return B.normalizeQueryParams=Wt,B.joinWithSlash=ct,B.stripTrailingSlash=wt,B.\u0275fac=function(W){return new(W||B)(m.LFG(Dt))},B.\u0275prov=m.Yz7({token:B,factory:function(){return function ve(){return new Be((0,m.LFG)(Dt))}()},providedIn:"root"}),B})();function Qe(B){return B.replace(/\/index.html$/,"")}function po(B,oe){oe=encodeURIComponent(oe);for(const W of B.split(";")){const ge=W.indexOf("="),[$e,xt]=-1==ge?[W,""]:[W.slice(0,ge),W.slice(ge+1)];if($e.trim()===oe)return decodeURIComponent(xt)}return null}let Xi=(()=>{class B{constructor(W,ge,$e,xt){this._iterableDiffers=W,this._keyValueDiffers=ge,this._ngEl=$e,this._renderer=xt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(W){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof W?W.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(W){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof W?W.split(/\s+/):W,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const W=this._iterableDiffer.diff(this._rawClass);W&&this._applyIterableChanges(W)}else if(this._keyValueDiffer){const W=this._keyValueDiffer.diff(this._rawClass);W&&this._applyKeyValueChanges(W)}}_applyKeyValueChanges(W){W.forEachAddedItem(ge=>this._toggleClass(ge.key,ge.currentValue)),W.forEachChangedItem(ge=>this._toggleClass(ge.key,ge.currentValue)),W.forEachRemovedItem(ge=>{ge.previousValue&&this._toggleClass(ge.key,!1)})}_applyIterableChanges(W){W.forEachAddedItem(ge=>{if("string"!=typeof ge.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(ge.item)}`);this._toggleClass(ge.item,!0)}),W.forEachRemovedItem(ge=>this._toggleClass(ge.item,!1))}_applyClasses(W){W&&(Array.isArray(W)||W instanceof Set?W.forEach(ge=>this._toggleClass(ge,!0)):Object.keys(W).forEach(ge=>this._toggleClass(ge,!!W[ge])))}_removeClasses(W){W&&(Array.isArray(W)||W instanceof Set?W.forEach(ge=>this._toggleClass(ge,!1)):Object.keys(W).forEach(ge=>this._toggleClass(ge,!1)))}_toggleClass(W,ge){(W=W.trim())&&W.split(/\s+/g).forEach($e=>{ge?this._renderer.addClass(this._ngEl.nativeElement,$e):this._renderer.removeClass(this._ngEl.nativeElement,$e)})}}return B.\u0275fac=function(W){return new(W||B)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},B.\u0275dir=m.lG2({type:B,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),B})();class zs{constructor(oe,W,ge,$e){this.$implicit=oe,this.ngForOf=W,this.index=ge,this.count=$e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ts=(()=>{class B{constructor(W,ge,$e){this._viewContainer=W,this._template=ge,this._differs=$e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(W){this._ngForOf=W,this._ngForOfDirty=!0}set ngForTrackBy(W){this._trackByFn=W}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(W){W&&(this._template=W)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const W=this._ngForOf;!this._differ&&W&&(this._differ=this._differs.find(W).create(this.ngForTrackBy))}if(this._differ){const W=this._differ.diff(this._ngForOf);W&&this._applyChanges(W)}}_applyChanges(W){const ge=this._viewContainer;W.forEachOperation(($e,xt,Bt)=>{if(null==$e.previousIndex)ge.createEmbeddedView(this._template,new zs($e.item,this._ngForOf,-1,-1),null===Bt?void 0:Bt);else if(null==Bt)ge.remove(null===xt?void 0:xt);else if(null!==xt){const Pn=ge.get(xt);ge.move(Pn,Bt),Ws(Pn,$e)}});for(let $e=0,xt=ge.length;$e<xt;$e++){const Pn=ge.get($e).context;Pn.index=$e,Pn.count=xt,Pn.ngForOf=this._ngForOf}W.forEachIdentityChange($e=>{Ws(ge.get($e.currentIndex),$e)})}static ngTemplateContextGuard(W,ge){return!0}}return B.\u0275fac=function(W){return new(W||B)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},B.\u0275dir=m.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),B})();function Ws(B,oe){B.context.$implicit=oe.item}let Or=(()=>{class B{constructor(W,ge){this._viewContainer=W,this._context=new Mo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ge}set ngIf(W){this._context.$implicit=this._context.ngIf=W,this._updateView()}set ngIfThen(W){qi("ngIfThen",W),this._thenTemplateRef=W,this._thenViewRef=null,this._updateView()}set ngIfElse(W){qi("ngIfElse",W),this._elseTemplateRef=W,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(W,ge){return!0}}return B.\u0275fac=function(W){return new(W||B)(m.Y36(m.s_b),m.Y36(m.Rgc))},B.\u0275dir=m.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),B})();class Mo{constructor(){this.$implicit=null,this.ngIf=null}}function qi(B,oe){if(oe&&!oe.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,m.AaK)(oe)}'.`)}let Ro=(()=>{class B{constructor(W,ge,$e){this._ngEl=W,this._differs=ge,this._renderer=$e,this._ngStyle=null,this._differ=null}set ngStyle(W){this._ngStyle=W,!this._differ&&W&&(this._differ=this._differs.find(W).create())}ngDoCheck(){if(this._differ){const W=this._differ.diff(this._ngStyle);W&&this._applyChanges(W)}}_setStyle(W,ge){const[$e,xt]=W.split("."),Bt=-1===$e.indexOf("-")?void 0:m.JOm.DashCase;null!=ge?this._renderer.setStyle(this._ngEl.nativeElement,$e,xt?`${ge}${xt}`:ge,Bt):this._renderer.removeStyle(this._ngEl.nativeElement,$e,Bt)}_applyChanges(W){W.forEachRemovedItem(ge=>this._setStyle(ge.key,null)),W.forEachAddedItem(ge=>this._setStyle(ge.key,ge.currentValue)),W.forEachChangedItem(ge=>this._setStyle(ge.key,ge.currentValue))}}return B.\u0275fac=function(W){return new(W||B)(m.Y36(m.SBq),m.Y36(m.aQg),m.Y36(m.Qsj))},B.\u0275dir=m.lG2({type:B,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),B})(),ia=(()=>{class B{constructor(W){this._viewContainerRef=W,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(W){if(W.ngTemplateOutlet||W.ngTemplateOutletInjector){const ge=this._viewContainerRef;if(this._viewRef&&ge.remove(ge.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:$e,ngTemplateOutletContext:xt,ngTemplateOutletInjector:Bt}=this;this._viewRef=ge.createEmbeddedView($e,xt,Bt?{injector:Bt}:void 0)}else this._viewRef=null}else this._viewRef&&W.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return B.\u0275fac=function(W){return new(W||B)(m.Y36(m.s_b))},B.\u0275dir=m.lG2({type:B,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[m.TTD]}),B})(),Ca=(()=>{class B{}return B.\u0275fac=function(W){return new(W||B)},B.\u0275mod=m.oAB({type:B}),B.\u0275inj=m.cJS({}),B})();const Qr="browser";function Jr(B){return B===Qr}function ls(B){return"server"===B}let Po=(()=>{class B{}return B.\u0275prov=(0,m.Yz7)({token:B,providedIn:"root",factory:()=>new lo((0,m.LFG)(Re),window)}),B})();class lo{constructor(oe,W){this.document=oe,this.window=W,this.offset=()=>[0,0]}setOffset(oe){this.offset=Array.isArray(oe)?()=>oe:oe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(oe){this.supportsScrolling()&&this.window.scrollTo(oe[0],oe[1])}scrollToAnchor(oe){if(!this.supportsScrolling())return;const W=function lr(B,oe){const W=B.getElementById(oe)||B.getElementsByName(oe)[0];if(W)return W;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const ge=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let $e=ge.currentNode;for(;$e;){const xt=$e.shadowRoot;if(xt){const Bt=xt.getElementById(oe)||xt.querySelector(`[name="${oe}"]`);if(Bt)return Bt}$e=ge.nextNode()}}return null}(this.document,oe);W&&(this.scrollToElement(W),W.focus())}setHistoryScrollRestoration(oe){if(this.supportScrollRestoration()){const W=this.window.history;W&&W.scrollRestoration&&(W.scrollRestoration=oe)}}scrollToElement(oe){const W=oe.getBoundingClientRect(),ge=W.left+this.window.pageXOffset,$e=W.top+this.window.pageYOffset,xt=this.offset();this.window.scrollTo(ge-xt[0],$e-xt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const oe=mo(this.window.history)||mo(Object.getPrototypeOf(this.window.history));return!(!oe||!oe.writable&&!oe.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function mo(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class us{}},4650:(In,Et,K)=>{K.d(Et,{$8M:()=>ya,$Z:()=>kf,AFp:()=>Ow,AaK:()=>xe,Akn:()=>Lu,AsE:()=>k_,BQk:()=>pp,CHM:()=>Zs,CRH:()=>aw,CZH:()=>iy,CqO:()=>Mg,D6c:()=>VI,DdM:()=>$0,EJc:()=>Xb,EiD:()=>zu,EpF:()=>h_,F$t:()=>Rg,F4k:()=>gp,FYo:()=>Hc,FiY:()=>mn,G48:()=>wI,Gf:()=>sw,GfV:()=>ch,GkF:()=>xg,Gpc:()=>Ie,Hsn:()=>Xd,JOm:()=>Du,JVY:()=>Uc,KtG:()=>ms,L6k:()=>Ru,LAX:()=>js,LFG:()=>co,LSH:()=>E,Lbi:()=>Zb,Lck:()=>WE,MAs:()=>Ag,MGl:()=>Ad,MMx:()=>Iv,NdJ:()=>Pc,OlP:()=>Sn,Oqu:()=>Hg,PXZ:()=>pI,Q6J:()=>fp,QGY:()=>Xh,QP$:()=>gn,QbO:()=>Yb,Qsj:()=>uh,R0b:()=>wc,RDi:()=>Nt,Rgc:()=>tm,SBq:()=>Bc,Sil:()=>tI,Suo:()=>ow,TTD:()=>so,TgZ:()=>yc,Tol:()=>D_,Udp:()=>ih,VKq:()=>G0,W1O:()=>dw,WLB:()=>z0,X6Q:()=>vI,XFs:()=>Qt,Xpm:()=>et,Xts:()=>pi,Y36:()=>qc,YKP:()=>P0,YNc:()=>c_,Yjl:()=>mt,Yz7:()=>Vt,Z0I:()=>Hn,ZZ4:()=>qv,_Bn:()=>N0,_UZ:()=>Sd,_Vd:()=>qu,_c5:()=>FI,_uU:()=>P_,aQg:()=>Zv,c2e:()=>Qb,cJS:()=>_t,cg1:()=>Yg,d8E:()=>qg,dDg:()=>cI,dqk:()=>fi,eBb:()=>_u,eFA:()=>Gw,ekj:()=>Vg,eoX:()=>Hw,f3M:()=>z,g9A:()=>Nw,h0i:()=>Cp,hGG:()=>LI,hij:()=>jg,iGM:()=>rw,ifc:()=>$n,ip1:()=>Mw,jDz:()=>F0,kEZ:()=>W0,kL8:()=>Z_,l5B:()=>K0,lG2:()=>kr,lqb:()=>Qn,lri:()=>Uw,mCW:()=>Tt,n5z:()=>uu,oAB:()=>xn,oJD:()=>S,oxw:()=>ef,pB0:()=>N,q3G:()=>eo,q4F:()=>dh,qLn:()=>od,qOj:()=>ap,qZA:()=>Dd,qzn:()=>wa,rWj:()=>Bw,s9C:()=>Ng,sBO:()=>EI,sIi:()=>gl,s_b:()=>ey,soG:()=>ry,tb:()=>Pw,tp0:()=>di,uIk:()=>ua,vHH:()=>wt,vpe:()=>id,wAp:()=>ir,xp6:()=>bm,ynx:()=>Jd,z2F:()=>sy,z3N:()=>Cl,zSh:()=>wu,zs3:()=>Kc});var m=K(7579),a=K(727),re=K(9751),Ee=K(6451),We=K(3099);function Ae(n){for(let i in n)if(n[i]===Ae)return i;throw Error("Could not find renamed property on target object.")}function Re(n,i){for(const s in i)i.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=i[s])}function xe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(xe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function tt(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Me=Ae({__forward_ref__:Ae});function Ie(n){return n.__forward_ref__=Ie,n.toString=function(){return xe(this())},n}function Ge(n){return Mt(n)?n():n}function Mt(n){return"function"==typeof n&&n.hasOwnProperty(Me)&&n.__forward_ref__===Ie}class wt extends Error{constructor(i,s){super(function Wt(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}(i,s)),this.code=i}}function Dt(n){return"string"==typeof n?n:null==n?"":String(n)}function ve(n,i){throw new wt(-201,!1)}function Nn(n,i){null==n&&function $t(n,i,s,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${s} ${l} ${i} <=Actual]`))}(i,n,null,"!=")}function Vt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function _t(n){return{providers:n.providers||[],imports:n.imports||[]}}function ln(n){return Gi(n,ai)||Gi(n,Li)}function Hn(n){return null!==ln(n)}function Gi(n,i){return n.hasOwnProperty(i)?n[i]:null}function zi(n){return n&&(n.hasOwnProperty(Hi)||n.hasOwnProperty(vi))?n[Hi]:null}const ai=Ae({\u0275prov:Ae}),Hi=Ae({\u0275inj:Ae}),Li=Ae({ngInjectableDef:Ae}),vi=Ae({ngInjectorDef:Ae});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let Ni;function Yi(n){const i=Ni;return Ni=n,i}function Kr(n,i,s){const l=ln(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&Qt.Optional?null:void 0!==i?i:void ve(xe(n))}function Tr(n){return{toString:n}.toString()}var _r=(()=>((_r=_r||{})[_r.OnPush=0]="OnPush",_r[_r.Default=1]="Default",_r))(),$n=(()=>{return(n=$n||($n={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",$n;var n})();const fi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ui={},ii=[],or=Ae({\u0275cmp:Ae}),li=Ae({\u0275dir:Ae}),gs=Ae({\u0275pipe:Ae}),qn=Ae({\u0275mod:Ae}),ot=Ae({\u0275fac:Ae}),Ke=Ae({__NG_ELEMENT_ID__:Ae});let je=0;function et(n){return Tr(()=>{const s=!0===n.standalone,l={},f={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===_r.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||ii,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||$n.Emulated,id:"c"+je++,styles:n.styles||ii,_:null,setInput:null,schemas:n.schemas||null,tView:null},v=n.dependencies,T=n.features;return f.inputs=Ji(n.inputs,l),f.outputs=Ji(n.outputs),T&&T.forEach(P=>P(f)),f.directiveDefs=v?()=>("function"==typeof v?v():v).map(Kt).filter(fn):null,f.pipeDefs=v?()=>("function"==typeof v?v():v).map(jt).filter(fn):null,f})}function Kt(n){return ze(n)||Xe(n)}function fn(n){return null!==n}function xn(n){return Tr(()=>({type:n.type,bootstrap:n.bootstrap||ii,declarations:n.declarations||ii,imports:n.imports||ii,exports:n.exports||ii,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ji(n,i){if(null==n)return Ui;const s={};for(const l in n)if(n.hasOwnProperty(l)){let f=n[l],v=f;Array.isArray(f)&&(v=f[1],f=f[0]),s[f]=l,i&&(i[f]=v)}return s}const kr=et;function mt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function ze(n){return n[or]||null}function Xe(n){return n[li]||null}function jt(n){return n[gs]||null}function gn(n){const i=ze(n)||Xe(n)||jt(n);return null!==i&&i.standalone}function Gn(n,i){const s=n[qn]||null;if(!s&&!0===i)throw new Error(`Type ${xe(n)} does not have '\u0275mod' property.`);return s}function qi(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ur(n){return Array.isArray(n)&&!0===n[1]}function Oo(n){return 0!=(8&n.flags)}function Ia(n){return 2==(2&n.flags)}function Ko(n){return 1==(1&n.flags)}function os(n){return null!==n.template}function ca(n){return 0!=(256&n[2])}function wr(n,i){return n.hasOwnProperty(ot)?n[ot]:null}class qs{constructor(i,s,l){this.previousValue=i,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function so(){return Ra}function Ra(n){return n.type.prototype.ngOnChanges&&(n.setInput=Yr),No}function No(){const n=oo(this),i=n?.current;if(i){const s=n.previous;if(s===Ui)n.previous=i;else for(let l in i)s[l]=i[l];n.current=null,this.ngOnChanges(i)}}function Yr(n,i,s,l){const f=oo(n)||function Ca(n,i){return n[Na]=i}(n,{previous:Ui,current:null}),v=f.current||(f.current={}),T=f.previous,P=this.declaredInputs[s],H=T[P];v[P]=new qs(H&&H.currentValue,i,T===Ui),n[l]=i}so.ngInherit=!0;const Na="__ngSimpleChanges__";function oo(n){return n[Na]||null}function Rr(n){for(;Array.isArray(n);)n=n[0];return n}function mo(n,i){return Rr(i[n])}function lr(n,i){return Rr(i[n.index])}function us(n,i){return n.data[i]}function Zi(n,i){const s=i[n];return qi(s)?s:s[0]}function da(n){return 4==(4&n[2])}function fr(n){return 64==(64&n[2])}function Gr(n,i){return null==i?null:n[i]}function ha(n){n[18]=0}function ur(n,i){n[5]+=i;let s=n,l=n[3];for(;null!==l&&(1===i&&1===s[5]||-1===i&&0===s[5]);)l[5]+=i,s=l,l=l[3]}const Ii={lFrame:qa(null),bindingsEnabled:!0};function Co(){return Ii.bindingsEnabled}function Jt(){return Ii.lFrame.lView}function Xn(){return Ii.lFrame.tView}function Zs(n){return Ii.lFrame.contextLView=n,n[8]}function ms(n){return Ii.lFrame.contextLView=null,n}function Wn(){let n=ee();for(;null!==n&&64===n.type;)n=n.parent;return n}function ee(){return Ii.lFrame.currentTNode}function $(n,i){const s=Ii.lFrame;s.currentTNode=n,s.isParent=i}function fe(){return Ii.lFrame.isParent}function Pt(){Ii.lFrame.isParent=!1}function zr(){const n=Ii.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function el(){return Ii.lFrame.bindingIndex++}function Bo(n){const i=Ii.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,s}function Da(n,i){const s=Ii.lFrame;s.bindingIndex=s.bindingRootIndex=n,sa(i)}function sa(n){Ii.lFrame.currentDirectiveIndex=n}function pa(n){const i=Ii.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}function Ho(){return Ii.lFrame.currentQueryIndex}function is(n){Ii.lFrame.currentQueryIndex=n}function qo(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function ul(n,i,s){if(s&Qt.SkipSelf){let f=i,v=n;for(;!(f=f.parent,null!==f||s&Qt.Host||(f=qo(v),null===f||(v=v[15],10&f.type))););if(null===f)return!1;i=f,n=v}const l=Ii.lFrame=kl();return l.currentTNode=i,l.lView=n,!0}function Ka(n){const i=kl(),s=n[1];Ii.lFrame=i,i.currentTNode=s.firstChild,i.lView=n,i.tView=s,i.contextLView=n,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function kl(){const n=Ii.lFrame,i=null===n?null:n.child;return null===i?qa(n):i}function qa(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function cl(){const n=Ii.lFrame;return Ii.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const B=cl;function oe(){const n=cl();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $e(){return Ii.lFrame.selectedIndex}function xt(n){Ii.lFrame.selectedIndex=n}function Bt(){const n=Ii.lFrame;return us(n.tView,n.selectedIndex)}function br(n,i){for(let s=i.directiveStart,l=i.directiveEnd;s<l;s++){const v=n.data[s].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:P,ngAfterViewInit:H,ngAfterViewChecked:se,ngOnDestroy:_e}=v;T&&(n.contentHooks||(n.contentHooks=[])).push(-s,T),P&&((n.contentHooks||(n.contentHooks=[])).push(s,P),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,P)),H&&(n.viewHooks||(n.viewHooks=[])).push(-s,H),se&&((n.viewHooks||(n.viewHooks=[])).push(s,se),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,se)),null!=_e&&(n.destroyHooks||(n.destroyHooks=[])).push(s,_e)}}function ds(n,i,s){xr(n,i,3,s)}function Za(n,i,s,l){(3&n[2])===s&&xr(n,i,s,l)}function ga(n,i){let s=n[2];(3&s)===i&&(s&=2047,s+=1,n[2]=s)}function xr(n,i,s,l){const v=l??-1,T=i.length-1;let P=0;for(let H=void 0!==l?65535&n[18]:0;H<T;H++)if("number"==typeof i[H+1]){if(P=i[H],null!=l&&P>=l)break}else i[H]<0&&(n[18]+=65536),(P<v||-1==v)&&(ma(n,s,i,H),n[18]=(4294901760&n[18])+H+2),H++}function ma(n,i,s,l){const f=s[l]<0,v=s[l+1],P=n[f?-s[l]:s[l]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{v.call(P)}finally{}}}else try{v.call(P)}finally{}}class Qs{constructor(i,s,l){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function L(n,i,s){let l=0;for(;l<s.length;){const f=s[l];if("number"==typeof f){if(0!==f)break;l++;const v=s[l++],T=s[l++],P=s[l++];n.setAttribute(i,T,P,v)}else{const v=f,T=s[++l];p(v)?n.setProperty(i,v,T):n.setAttribute(i,v,T),l++}}return l}function we(n){return 3===n||4===n||6===n}function p(n){return 64===n.charCodeAt(0)}function M(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let s=-1;for(let l=0;l<i.length;l++){const f=i[l];"number"==typeof f?s=f:0===s||ie(n,s,f,null,-1===s||2===s?i[++l]:null)}}return n}function ie(n,i,s,l,f){let v=0,T=n.length;if(-1===i)T=-1;else for(;v<n.length;){const P=n[v++];if("number"==typeof P){if(P===i){T=-1;break}if(P>i){T=v-1;break}}}for(;v<n.length;){const P=n[v];if("number"==typeof P)break;if(P===s){if(null===l)return void(null!==f&&(n[v+1]=f));if(l===n[v+1])return void(n[v+2]=f)}v++,null!==l&&v++,null!==f&&v++}-1!==T&&(n.splice(T,0,i),v=T+1),n.splice(v++,0,s),null!==l&&n.splice(v++,0,l),null!==f&&n.splice(v++,0,f)}function ce(n){return-1!==n}function lt(n){return 32767&n}function Rn(n,i){let s=function Ht(n){return n>>16}(n),l=i;for(;s>0;)l=l[15],s--;return l}let wn=!0;function Mn(n){const i=wn;return wn=n,i}let Ss=0;const Mr={};function oi(n,i){const s=ys(n,i);if(-1!==s)return s;const l=i[1];l.firstCreatePass&&(n.injectorIndex=i.length,hs(l.data,n),hs(i,null),hs(l.blueprint,null));const f=As(n,i),v=n.injectorIndex;if(ce(f)){const T=lt(f),P=Rn(f,i),H=P[1].data;for(let se=0;se<8;se++)i[v+se]=P[T+se]|H[T+se]}return i[v+8]=f,v}function hs(n,i){n.push(0,0,0,0,0,0,0,0,i)}function ys(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function As(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,f=i;for(;null!==f;){if(l=nl(f),null===l)return-1;if(s++,f=f[15],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return-1}function ko(n,i,s){!function Ir(n,i,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(Ke)&&(l=s[Ke]),null==l&&(l=s[Ke]=Ss++);const f=255&l;i.data[n+(f>>5)]|=1<<f}(n,i,s)}function Hr(n,i,s){if(s&Qt.Optional)return n;ve()}function oa(n,i,s,l){if(s&Qt.Optional&&void 0===l&&(l=null),0==(s&(Qt.Self|Qt.Host))){const f=n[9],v=Yi(void 0);try{return f?f.get(i,l,s&Qt.Optional):Kr(i,l,s&Qt.Optional)}finally{Yi(v)}}return Hr(l,0,s)}function tl(n,i,s,l=Qt.Default,f){if(null!==n){if(1024&i[2]){const T=function Vl(n,i,s,l,f){let v=n,T=i;for(;null!==v&&null!==T&&1024&T[2]&&!(256&T[2]);){const P=Vn(v,T,s,l|Qt.Self,Mr);if(P!==Mr)return P;let H=v.parent;if(!H){const se=T[21];if(se){const _e=se.get(s,Mr,l);if(_e!==Mr)return _e}H=nl(T),T=T[15]}v=H}return f}(n,i,s,l,Mr);if(T!==Mr)return T}const v=Vn(n,i,s,l,Mr);if(v!==Mr)return v}return oa(i,s,l,f)}function Vn(n,i,s,l,f){const v=function Ut(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Ke)?n[Ke]:void 0;return"number"==typeof i?i>=0?255&i:lu:i}(s);if("function"==typeof v){if(!ul(i,n,l))return l&Qt.Host?Hr(f,0,l):oa(i,s,l,f);try{const T=v(l);if(null!=T||l&Qt.Optional)return T;ve()}finally{B()}}else if("number"==typeof v){let T=null,P=ys(n,i),H=-1,se=l&Qt.Host?i[16][6]:null;for((-1===P||l&Qt.SkipSelf)&&(H=-1===P?As(n,i):i[P+8],-1!==H&&Js(l,!1)?(T=i[1],P=lt(H),i=Rn(H,i)):P=-1);-1!==P;){const _e=i[1];if(an(v,P,_e.data)){const ke=Ln(P,i,s,T,l,se);if(ke!==Mr)return ke}H=i[P+8],-1!==H&&Js(l,i[1].data[P+8]===se)&&an(v,P,i)?(T=_e,P=lt(H),i=Rn(H,i)):P=-1}}return f}function Ln(n,i,s,l,f,v){const T=i[1],P=T.data[n+8],_e=vo(P,T,s,null==l?Ia(P)&&wn:l!=T&&0!=(3&P.type),f&Qt.Host&&v===P);return null!==_e?Tn(i,T,_e,P):Mr}function vo(n,i,s,l,f){const v=n.providerIndexes,T=i.data,P=1048575&v,H=n.directiveStart,_e=v>>20,ht=f?P+_e:n.directiveEnd;for(let Rt=l?P:P+_e;Rt<ht;Rt++){const hn=T[Rt];if(Rt<H&&s===hn||Rt>=H&&hn.type===s)return Rt}if(f){const Rt=T[H];if(Rt&&os(Rt)&&Rt.type===s)return H}return null}function Tn(n,i,s,l){let f=n[s];const v=i.data;if(function Zo(n){return n instanceof Qs}(f)){const T=f;T.resolving&&function rt(n,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new wt(-200,`Circular dependency in DI detected for ${n}${s}`)}(function vt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Dt(n)}(v[s]));const P=Mn(T.canSeeViewProviders);T.resolving=!0;const H=T.injectImpl?Yi(T.injectImpl):null;ul(n,l,Qt.Default);try{f=n[s]=T.factory(void 0,v,n,l),i.firstCreatePass&&s>=l.directiveStart&&function Us(n,i,s){const{ngOnChanges:l,ngOnInit:f,ngDoCheck:v}=i.type.prototype;if(l){const T=Ra(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,T),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,T)}f&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,f),v&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v))}(s,v[s],i)}finally{null!==H&&Yi(H),Mn(P),T.resolving=!1,B()}}return f}function an(n,i,s){return!!(s[i+(n>>5)]&1<<n)}function Js(n,i){return!(n&Qt.Self||n&Qt.Host&&i)}class yl{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,l){return tl(this._tNode,this._lView,i,l,s)}}function lu(){return new yl(Wn(),Jt())}function uu(n){return Tr(()=>{const i=n.prototype.constructor,s=i[ot]||Ll(i),l=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==l;){const v=f[ot]||Ll(f);if(v&&v!==s)return v;f=Object.getPrototypeOf(f)}return v=>new v})}function Ll(n){return Mt(n)?()=>{const i=Ll(Ge(n));return i&&i()}:wr(n)}function nl(n){const i=n[1],s=i.type;return 2===s?i.declTNode:1===s?n[6]:null}function ya(n){return function dn(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const s=n.attrs;if(s){const l=s.length;let f=0;for(;f<l;){const v=s[f];if(we(v))break;if(0===v)f+=2;else if("number"==typeof v)for(f++;f<l&&"string"==typeof s[f];)f++;else{if(v===i)return s[f+1];f+=2}}}return null}(Wn(),n)}const Va="__parameters__";function $o(n,i,s){return Tr(()=>{const l=function Oi(n){return function(...s){if(n){const l=n(...s);for(const f in l)this[f]=l[f]}}}(i);function f(...v){if(this instanceof f)return l.apply(this,v),this;const T=new f(...v);return P.annotation=T,P;function P(H,se,_e){const ke=H.hasOwnProperty(Va)?H[Va]:Object.defineProperty(H,Va,{value:[]})[Va];for(;ke.length<=_e;)ke.push(null);return(ke[_e]=ke[_e]||[]).push(T),H}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class Sn{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Vt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Do(n,i){void 0===i&&(i=n);for(let s=0;s<n.length;s++){let l=n[s];Array.isArray(l)?(i===n&&(i=n.slice(0,s)),Do(l,i)):i!==n&&i.push(l)}return i}function Qa(n,i){n.forEach(s=>Array.isArray(s)?Qa(s,i):i(s))}function Ol(n,i,s){i>=n.length?n.push(s):n.splice(i,0,s)}function Fo(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function rl(n,i){const s=[];for(let l=0;l<n;l++)s.push(i);return s}function Ne(n,i,s){let l=Lt(n,i);return l>=0?n[1|l]=s:(l=~l,function D(n,i,s,l){let f=n.length;if(f==i)n.push(s,l);else if(1===f)n.push(l,n[0]),n[0]=s;else{for(f--,n.push(n[f-1],n[f]);f>i;)n[f]=n[f-2],f--;n[i]=s,n[i+1]=l}}(n,l,i,s)),l}function Ze(n,i){const s=Lt(n,i);if(s>=0)return n[1|s]}function Lt(n,i){return function ji(n,i,s){let l=0,f=n.length>>s;for(;f!==l;){const v=l+(f-l>>1),T=n[v<<s];if(i===T)return v<<s;T>i?f=v:l=v+1}return~(f<<s)}(n,i,1)}const Ul={},Bl="__NG_DI_FLAG__",Go="ngTempTokenPath",uo=/\n/gm,aa="__source";let es;function Aa(n){const i=es;return es=n,i}function iu(n,i=Qt.Default){if(void 0===es)throw new wt(-203,!1);return null===es?Kr(n,void 0,i):es.get(n,i&Qt.Optional?null:void 0,i)}function co(n,i=Qt.Default){return(function Vi(){return Ni}()||iu)(Ge(n),i)}function z(n,i=Qt.Default){return"number"!=typeof i&&(i=0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)),co(n,i)}function X(n){const i=[];for(let s=0;s<n.length;s++){const l=Ge(n[s]);if(Array.isArray(l)){if(0===l.length)throw new wt(900,!1);let f,v=Qt.Default;for(let T=0;T<l.length;T++){const P=l[T],H=He(P);"number"==typeof H?-1===H?f=P.token:v|=H:f=P}i.push(co(f,v))}else i.push(co(l))}return i}function de(n,i){return n[Bl]=i,n.prototype[Bl]=i,n}function He(n){return n[Bl]}const mn=de($o("Optional"),8),di=de($o("SkipSelf"),4);let Je,Ci,$a;function Nt(n){Je=n}function xs(n){return function ei(){if(void 0===Ci&&(Ci=null,fi.trustedTypes))try{Ci=fi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ci}()?.createHTML(n)||n}function Il(n){return function bl(){if(void 0===$a&&($a=null,fi.trustedTypes))try{$a=fi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return $a}()?.createHTML(n)||n}class la{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ic extends la{getTypeName(){return"HTML"}}class rc extends la{getTypeName(){return"Style"}}class Hu extends la{getTypeName(){return"Script"}}class hl extends la{getTypeName(){return"URL"}}class du extends la{getTypeName(){return"ResourceURL"}}function Cl(n){return n instanceof la?n.changingThisBreaksApplicationSecurity:n}function wa(n,i){const s=function sc(n){return n instanceof la&&n.getTypeName()||null}(n);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===i}function Uc(n){return new ic(n)}function Ru(n){return new rc(n)}function _u(n){return new Hu(n)}function js(n){return new hl(n)}function N(n){return new du(n)}class b{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(xs(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch{return null}}}class F{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const l=this.inertDocument.createElement("body");s.appendChild(l)}}getInertBodyElement(i){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=xs(i),s;const l=this.inertDocument.createElement("body");return l.innerHTML=xs(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(i){const s=i.attributes;for(let f=s.length-1;0<f;f--){const T=s.item(f).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&i.removeAttribute(T)}let l=i.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Se=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Tt(n){return(n=String(n)).match(Se)?n:"unsafe:"+n}function kn(n){const i={};for(const s of n.split(","))i[s]=!0;return i}function _i(...n){const i={};for(const s of n)for(const l in s)s.hasOwnProperty(l)&&(i[l]=!0);return i}const Cr=kn("area,br,col,hr,img,wbr"),Is=kn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fl=kn("rp,rt"),Gl=_i(Cr,_i(Is,kn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_i(fl,kn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_i(fl,Is)),ju=kn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zl=kn("srcset"),oc=_i(ju,zl,kn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),kn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Pu=kn("script,style,template");class yu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,l=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?l=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,l&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let f=this.checkClobberedElement(s,s.nextSibling);if(f){s=f;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!Gl.hasOwnProperty(s))return this.sanitizedSomething=!0,!Pu.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const l=i.attributes;for(let f=0;f<l.length;f++){const v=l.item(f),T=v.name,P=T.toLowerCase();if(!oc.hasOwnProperty(P)){this.sanitizedSomething=!0;continue}let H=v.value;ju[P]&&(H=Tt(H)),zl[P]&&(n=H,H=(n=String(n)).split(",").map(i=>Tt(i.trim())).join(", ")),this.buf.push(" ",T,'="',vs(H),'"')}var n;return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();Gl.hasOwnProperty(s)&&!Cr.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(vs(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const sd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fu=/([^\#-~ |!])/g;function vs(n){return n.replace(/&/g,"&amp;").replace(sd,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(fu,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Gu;function zu(n,i){let s=null;try{Gu=Gu||function w(n){const i=new F(n);return function ue(){try{return!!(new window.DOMParser).parseFromString(xs(""),"text/html")}catch{return!1}}()?new b(i):i}(n);let l=i?String(i):"";s=Gu.getInertBodyElement(l);let f=5,v=l;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,l=v,v=s.innerHTML,s=Gu.getInertBodyElement(l)}while(l!==v);return xs((new yu).sanitizeChildren(Wu(s)||s))}finally{if(s){const l=Wu(s)||s;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Wu(n){return"content"in n&&function lh(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var eo=(()=>((eo=eo||{})[eo.NONE=0]="NONE",eo[eo.HTML=1]="HTML",eo[eo.STYLE=2]="STYLE",eo[eo.SCRIPT=3]="SCRIPT",eo[eo.URL=4]="URL",eo[eo.RESOURCE_URL=5]="RESOURCE_URL",eo))();function S(n){const i=Xt();return i?Il(i.sanitize(eo.HTML,n)||""):wa(n,"HTML")?Il(Cl(n)):zu(function _n(){return void 0!==Je?Je:typeof document<"u"?document:void 0}(),Dt(n))}function E(n){const i=Xt();return i?i.sanitize(eo.URL,n)||"":wa(n,"URL")?Cl(n):Tt(Dt(n))}function Xt(){const n=Jt();return n&&n[12]}const pi=new Sn("ENVIRONMENT_INITIALIZER"),yi=new Sn("INJECTOR",-1),Un=new Sn("INJECTOR_DEF_TYPES");class ti{get(i,s=Ul){if(s===Ul){const l=new Error(`NullInjectorError: No provider for ${xe(i)}!`);throw l.name="NullInjectorError",l}return s}}function hi(...n){return{\u0275providers:gr(0,n)}}function gr(n,...i){const s=[],l=new Set;let f;return Qa(i,v=>{const T=v;hr(T,s,[],l)&&(f||(f=[]),f.push(T))}),void 0!==f&&ts(f,s),s}function ts(n,i){for(let s=0;s<n.length;s++){const{providers:f}=n[s];Qa(f,v=>{i.push(v)})}}function hr(n,i,s,l){if(!(n=Ge(n)))return!1;let f=null,v=zi(n);const T=!v&&ze(n);if(v||T){if(T&&!T.standalone)return!1;f=n}else{const H=n.ngModule;if(v=zi(H),!v)return!1;f=H}const P=l.has(f);if(T){if(P)return!1;if(l.add(f),T.dependencies){const H="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const se of H)hr(se,i,s,l)}}else{if(!v)return!1;{if(null!=v.imports&&!P){let se;l.add(f);try{Qa(v.imports,_e=>{hr(_e,i,s,l)&&(se||(se=[]),se.push(_e))})}finally{}void 0!==se&&ts(se,i)}if(!P){const se=wr(f)||(()=>new f);i.push({provide:f,useFactory:se,deps:ii},{provide:Un,useValue:f,multi:!0},{provide:pi,useValue:()=>co(f),multi:!0})}const H=v.providers;null==H||P||Qa(H,_e=>{i.push(_e)})}}return f!==n&&void 0!==n.providers}const Tl=Ae({provide:String,useValue:Ae});function Wo(n){return null!==n&&"object"==typeof n&&Tl in n}function xi(n){return"function"==typeof n}const wu=new Sn("Set Injector scope."),Jl={},su={};let Ku;function ac(){return void 0===Ku&&(Ku=new ti),Ku}class Qn{}class Ri extends Qn{constructor(i,s,l,f){super(),this.parent=s,this.source=l,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rs(i,T=>this.processProvider(T)),this.records.set(yi,Ga(void 0,this)),f.has("environment")&&this.records.set(Qn,Ga(void 0,this));const v=this.records.get(wu);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Un.multi,ii,Qt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const s=Aa(this),l=Yi(void 0);try{return i()}finally{Aa(s),Yi(l)}}get(i,s=Ul,l=Qt.Default){this.assertNotDestroyed();const f=Aa(this),v=Yi(void 0);try{if(!(l&Qt.SkipSelf)){let P=this.records.get(i);if(void 0===P){const H=function Wl(n){return"function"==typeof n||"object"==typeof n&&n instanceof Sn}(i)&&ln(i);P=H&&this.injectableDefInScope(H)?Ga(Fi(i),Jl):null,this.records.set(i,P)}if(null!=P)return this.hydrate(i,P)}return(l&Qt.Self?ac():this.parent).get(i,s=l&Qt.Optional&&s===Ul?null:s)}catch(T){if("NullInjectorError"===T.name){if((T[Go]=T[Go]||[]).unshift(xe(i)),f)throw T;return function gt(n,i,s,l){const f=n[Go];throw i[aa]&&f.unshift(i[aa]),n.message=function At(n,i,s,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let f=xe(i);if(Array.isArray(i))f=i.map(xe).join(" -> ");else if("object"==typeof i){let v=[];for(let T in i)if(i.hasOwnProperty(T)){let P=i[T];v.push(T+":"+("string"==typeof P?JSON.stringify(P):xe(P)))}f=`{${v.join(", ")}}`}return`${s}${l?"("+l+")":""}[${f}]: ${n.replace(uo,"\n  ")}`}("\n"+n.message,f,s,l),n.ngTokenPath=f,n[Go]=null,n}(T,i,"R3InjectorError",this.source)}throw T}finally{Yi(v),Aa(f)}}resolveInjectorInitializers(){const i=Aa(this),s=Yi(void 0);try{const l=this.get(pi.multi,ii,Qt.Self);for(const f of l)f()}finally{Aa(i),Yi(s)}}toString(){const i=[],s=this.records;for(const l of s.keys())i.push(xe(l));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new wt(205,!1)}processProvider(i){let s=xi(i=Ge(i))?i:Ge(i&&i.provide);const l=function Ma(n){return Wo(n)?Ga(void 0,n.useValue):Ga(Xl(n),Jl)}(i);if(xi(i)||!0!==i.multi)this.records.get(s);else{let f=this.records.get(s);f||(f=Ga(void 0,Jl,!0),f.factory=()=>X(f.multi),this.records.set(s,f)),s=i,f.multi.push(i)}this.records.set(s,l)}hydrate(i,s){return s.value===Jl&&(s.value=su,s.value=s.factory()),"object"==typeof s.value&&s.value&&function fo(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=Ge(i.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Fi(n){const i=ln(n),s=null!==i?i.factory:wr(n);if(null!==s)return s;if(n instanceof Sn)throw new wt(204,!1);if(n instanceof Function)return function ns(n){const i=n.length;if(i>0)throw rl(i,"?"),new wt(204,!1);const s=function Ei(n){const i=n&&(n[ai]||n[Li]);if(i){const s=function bi(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new wt(204,!1)}function Xl(n,i,s){let l;if(xi(n)){const f=Ge(n);return wr(f)||Fi(f)}if(Wo(n))l=()=>Ge(n.useValue);else if(function Dl(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...X(n.deps||[]));else if(function Ao(n){return!(!n||!n.useExisting)}(n))l=()=>co(Ge(n.useExisting));else{const f=Ge(n&&(n.useClass||n.provide));if(!function Eu(n){return!!n.deps}(n))return wr(f)||Fi(f);l=()=>new f(...X(n.deps))}return l}function Ga(n,i,s=!1){return{factory:n,value:i,multi:s?[]:void 0}}function Pd(n){return!!n.\u0275providers}function rs(n,i){for(const s of n)Array.isArray(s)?rs(s,i):Pd(s)?rs(s.\u0275providers,i):i(s)}class Rl{}class df{resolveComponentFactory(i){throw function Iu(n){const i=Error(`No component factory found for ${xe(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let qu=(()=>{class n{}return n.NULL=new df,n})();function hf(){return bc(Wn(),Jt())}function bc(n,i){return new Bc(lr(n,i))}let Bc=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=hf,n})();function Sp(n){return n instanceof Bc?n.nativeElement:n}class Hc{}let uh=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ap(){const n=Jt(),s=Zi(Wn().index,n);return(qi(s)?s:n)[11]}(),n})(),ff=(()=>{class n{}return n.\u0275prov=Vt({token:n,providedIn:"root",factory:()=>null}),n})();class ch{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const dh=new ch("14.2.0"),hh={};function yh(n){return n.ngOriginalError}class od{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i);this._console.error("ERROR",i),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&yh(i);for(;s&&yh(s);)s=yh(s);return s||null}}const vh=new Map;let _f=0;const ad="__ngContext__";function pl(n,i){qi(i)?(n[ad]=i[20],function Lp(n){vh.set(n[20],n)}(i)):n[ad]=i}function pu(n){const i=n[ad];return"number"==typeof i?function wh(n){return vh.get(n)||null}(i):i||null}function Ld(n){const i=pu(n);return i?qi(i)?i:i.lView:null}function ku(n){return n instanceof Function?n():n}var Du=(()=>((Du=Du||{})[Du.Important=1]="Important",Du[Du.DashCase=2]="DashCase",Du))();function Th(n,i){return undefined(n,i)}function Wc(n){const i=n[3];return Ur(i)?i[3]:i}function h(n){return c(n[13])}function u(n){return c(n[4])}function c(n){for(;null!==n&&!Ur(n);)n=n[4];return n}function x(n,i,s,l,f){if(null!=l){let v,T=!1;Ur(l)?v=l:qi(l)&&(T=!0,l=l[0]);const P=Rr(l);0===n&&null!==s?null==f?lm(i,s,P):dd(i,s,P,f||null,!0):1===n&&null!==s?dd(i,s,P,f||null,!0):2===n?function hm(n,i,s){const l=Dh(n,i);l&&function uy(n,i,s,l){n.removeChild(i,s,l)}(n,l,i,s)}(i,P,T):3===n&&i.destroyNode(P),null!=v&&function dy(n,i,s,l,f){const v=s[7];v!==Rr(s)&&x(i,n,l,v,f);for(let P=10;P<s.length;P++){const H=s[P];hd(H[1],H,n,i,l,v)}}(i,n,v,s,f)}}function Oe(n,i,s){return n.createElement(i,s)}function Zr(n,i){const s=n[9],l=s.indexOf(i),f=i[3];512&i[2]&&(i[2]&=-513,ur(f,-1)),s.splice(l,1)}function za(n,i){if(n.length<=10)return;const s=10+i,l=n[s];if(l){const f=l[17];null!==f&&f!==n&&Zr(f,l),i>0&&(n[s-1][4]=l[4]);const v=Fo(n,10+i);!function Ye(n,i){hd(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(l[1],l);const T=v[19];null!==T&&T.detachView(v[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Sl(n,i){if(!(128&i[2])){const s=i[11];s.destroyNode&&hd(n,i,s,3,null,null),function nn(n){let i=n[13];if(!i)return Su(n[1],n);for(;i;){let s=null;if(qi(i))s=i[13];else{const l=i[10];l&&(s=l)}if(!s){for(;i&&!i[4]&&i!==n;)qi(i)&&Su(i[1],i),i=i[3];null===i&&(i=n),qi(i)&&Su(i[1],i),s=i&&i[4]}i=s}}(i)}}function Su(n,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function Cf(n,i){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const f=i[s[l]];if(!(f instanceof Qs)){const v=s[l+1];if(Array.isArray(v))for(let T=0;T<v.length;T+=2){const P=f[v[T]],H=v[T+1];try{H.call(P)}finally{}}else try{v.call(f)}finally{}}}}(n,i),function Au(n,i){const s=n.cleanup,l=i[7];let f=-1;if(null!==s)for(let v=0;v<s.length-1;v+=2)if("string"==typeof s[v]){const T=s[v+1],P="function"==typeof T?T(i):Rr(i[T]),H=l[f=s[v+2]],se=s[v+3];"boolean"==typeof se?P.removeEventListener(s[v],H,se):se>=0?l[f=se]():l[f=-se].unsubscribe(),v+=2}else{const T=l[f=s[v+1]];s[v].call(T)}if(null!==l){for(let v=f+1;v<l.length;v++)(0,l[v])();i[7]=null}}(n,i),1===i[1].type&&i[11].destroy();const s=i[17];if(null!==s&&Ur(i[3])){s!==i[3]&&Zr(s,i);const l=i[19];null!==l&&l.detachView(n)}!function vf(n){vh.delete(n[20])}(i)}}function Ac(n,i,s){return function Bp(n,i,s){let l=i;for(;null!==l&&40&l.type;)l=(i=l).parent;if(null===l)return s[0];if(2&l.flags){const f=n.data[l.directiveStart].encapsulation;if(f===$n.None||f===$n.Emulated)return null}return lr(l,s)}(n,i.parent,s)}function dd(n,i,s,l,f){n.insertBefore(i,s,l,f)}function lm(n,i,s){n.appendChild(i,s)}function um(n,i,s,l,f){null!==l?dd(n,i,s,l,f):lm(n,i,s)}function Dh(n,i){return n.parentNode(i)}function jp(n,i,s){return $p(n,i,s)}let $p=function cm(n,i,s){return 40&n.type?lr(n,s):null};function Sh(n,i,s,l){const f=Ac(n,l,i),v=i[11],P=jp(l.parent||i[6],l,i);if(null!=f)if(Array.isArray(s))for(let H=0;H<s.length;H++)um(v,f,s[H],P,!1);else um(v,f,s,P,!1)}function Ah(n,i){if(null!==i){const s=i.type;if(3&s)return lr(i,n);if(4&s)return Tf(-1,n[i.index]);if(8&s){const l=i.child;if(null!==l)return Ah(n,l);{const f=n[i.index];return Ur(f)?Tf(-1,f):Rr(f)}}if(32&s)return Th(i,n)()||Rr(n[i.index]);{const l=dm(n,i);return null!==l?Array.isArray(l)?l[0]:Ah(Wc(n[16]),l):Ah(n,i.next)}}return null}function dm(n,i){return null!==i?n[16][6].projection[i.projection]:null}function Tf(n,i){const s=10+n+1;if(s<i.length){const l=i[s],f=l[1].firstChild;if(null!==f)return Ah(l,f)}return i[7]}function Gp(n,i,s,l,f,v,T){for(;null!=s;){const P=l[s.index],H=s.type;if(T&&0===i&&(P&&pl(Rr(P),l),s.flags|=4),64!=(64&s.flags))if(8&H)Gp(n,i,s.child,l,f,v,!1),x(i,n,f,P,v);else if(32&H){const se=Th(s,l);let _e;for(;_e=se();)x(i,n,f,_e,v);x(i,n,f,P,v)}else 16&H?fm(n,i,l,s,f,v):x(i,n,f,P,v);s=T?s.projectionNext:s.next}}function hd(n,i,s,l,f,v){Gp(s,l,n.firstChild,i,f,v,!1)}function fm(n,i,s,l,f,v){const T=s[16],H=T[6].projection[l.projection];if(Array.isArray(H))for(let se=0;se<H.length;se++)x(i,n,f,H[se],v);else Gp(n,i,H,T[3],f,v,!0)}function pm(n,i,s){n.setAttribute(i,"style",s)}function Df(n,i,s){""===s?n.removeAttribute(i,"class"):n.setAttribute(i,"class",s)}function gm(n,i,s){let l=n.length;for(;;){const f=n.indexOf(i,s);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const v=i.length;if(f+v===l||n.charCodeAt(f+v)<=32)return f}s=f+1}}const mm="ng-template";function _m(n,i,s){let l=0;for(;l<n.length;){let f=n[l++];if(s&&"class"===f){if(f=n[l],-1!==gm(f.toLowerCase(),i,0))return!0}else if(1===f){for(;l<n.length&&"string"==typeof(f=n[l++]);)if(f.toLowerCase()===i)return!0;return!1}}return!1}function Sf(n){return 4===n.type&&n.value!==mm}function Wp(n,i,s){return i===(4!==n.type||s?n.value:mm)}function xh(n,i,s){let l=4;const f=n.attrs||[],v=function fy(n){for(let i=0;i<n.length;i++)if(we(n[i]))return i;return n.length}(f);let T=!1;for(let P=0;P<i.length;P++){const H=i[P];if("number"!=typeof H){if(!T)if(4&l){if(l=2|1&l,""!==H&&!Wp(n,H,s)||""===H&&1===i.length){if(gu(l))return!1;T=!0}}else{const se=8&l?H:i[++P];if(8&l&&null!==n.attrs){if(!_m(n.attrs,se,s)){if(gu(l))return!1;T=!0}continue}const ke=Kp(8&l?"class":H,f,Sf(n),s);if(-1===ke){if(gu(l))return!1;T=!0;continue}if(""!==se){let ht;ht=ke>v?"":f[ke+1].toLowerCase();const Rt=8&l?ht:null;if(Rt&&-1!==gm(Rt,se,0)||2&l&&se!==ht){if(gu(l))return!1;T=!0}}}}else{if(!T&&!gu(l)&&!gu(H))return!1;if(T&&gu(H))continue;T=!1,l=H|1&l}}return gu(l)||T}function gu(n){return 0==(1&n)}function Kp(n,i,s,l){if(null===i)return-1;let f=0;if(l||!s){let v=!1;for(;f<i.length;){const T=i[f];if(T===n)return f;if(3===T||6===T)v=!0;else{if(1===T||2===T){let P=i[++f];for(;"string"==typeof P;)P=i[++f];continue}if(4===T)break;if(0===T){f+=4;continue}}f+=v?1:2}return-1}return function vm(n,i){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===i)return s;s++}return-1}(i,n)}function Af(n,i,s=!1){for(let l=0;l<i.length;l++)if(xh(n,i[l],s))return!0;return!1}function wm(n,i){e:for(let s=0;s<i.length;s++){const l=i[s];if(n.length===l.length){for(let f=0;f<n.length;f++)if(n[f]!==l[f])continue e;return!0}}return!1}function xf(n,i){return n?":not("+i.trim()+")":i}function py(n){let i=n[0],s=1,l=2,f="",v=!1;for(;s<n.length;){let T=n[s];if("string"==typeof T)if(2&l){const P=n[++s];f+="["+T+(P.length>0?'="'+P+'"':"")+"]"}else 8&l?f+="."+T:4&l&&(f+=" "+T);else""!==f&&!gu(T)&&(i+=xf(v,f),f=""),l=T,v=v||!gu(l);s++}return""!==f&&(i+=xf(v,f)),i}const Pr={};function bm(n){fd(Xn(),Jt(),$e()+n,!1)}function fd(n,i,s,l){if(!l)if(3==(3&i[2])){const v=n.preOrderCheckHooks;null!==v&&ds(i,v,s)}else{const v=n.preOrderHooks;null!==v&&Za(i,v,0,s)}xt(s)}function Of(n,i=null,s=null,l){const f=Jp(n,i,s,l);return f.resolveInjectorInitializers(),f}function Jp(n,i=null,s=null,l,f=new Set){const v=[s||ii,hi(n)];return l=l||("object"==typeof n?void 0:xe(n)),new Ri(v,i||ac(),l||null,f)}let Kc=(()=>{class n{static create(s,l){if(Array.isArray(s))return Of({name:""},l,s,"");{const f=s.name??"";return Of({name:f},s.parent,s.providers,f)}}}return n.THROW_IF_NOT_FOUND=Ul,n.NULL=new ti,n.\u0275prov=Vt({token:n,providedIn:"any",factory:()=>co(yi)}),n.__NG_ELEMENT_ID__=-1,n})();function qc(n,i=Qt.Default){const s=Jt();return null===s?co(n,i):tl(Wn(),s,Ge(n),i)}function kf(){throw new Error("invalid")}function Nh(n,i){return n<<17|i<<2}function Zu(n){return n>>17&32767}function Ph(n){return 2|n}function Oc(n){return(131068&n)>>2}function kh(n,i){return-131069&n|i<<2}function Lh(n){return 1|n}function Gm(n,i){const s=n.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const f=s[l],v=s[l+1];if(-1!==v){const T=n.data[v];is(f),T.contentQueries(2,i[v],v)}}}function zf(n,i,s,l,f,v,T,P,H,se,_e){const ke=i.blueprint.slice();return ke[0]=f,ke[2]=76|l,(null!==_e||n&&1024&n[2])&&(ke[2]|=1024),ha(ke),ke[3]=ke[15]=n,ke[8]=s,ke[10]=T||n&&n[10],ke[11]=P||n&&n[11],ke[12]=H||n&&n[12]||null,ke[9]=se||n&&n[9]||null,ke[6]=v,ke[20]=function yf(){return _f++}(),ke[21]=_e,ke[16]=2==i.type?n[16]:ke,ke}function Zc(n,i,s,l,f){let v=n.data[i];if(null===v)v=function jh(n,i,s,l,f){const v=ee(),T=fe(),H=n.data[i]=function Ly(n,i,s,l,f,v){return{type:s,index:l,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?v:v&&v.parent,s,i,l,f);return null===n.firstChild&&(n.firstChild=H),null!==v&&(T?null==v.child&&null!==H.parent&&(v.child=H):null===v.next&&(v.next=H)),H}(n,i,s,l,f),function Pa(){return Ii.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=s,v.value=l,v.attrs=f;const T=function Y(){const n=Ii.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();v.injectorIndex=null===T?-1:T.injectorIndex}return $(v,!0),v}function Yc(n,i,s,l){if(0===s)return-1;const f=i.length;for(let v=0;v<s;v++)i.push(l),n.blueprint.push(l),n.data.push(null);return f}function Wf(n,i,s){Ka(i);try{const l=n.viewQuery;null!==l&&Eg(1,l,s);const f=n.template;null!==f&&Kf(n,i,f,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Gm(n,i),n.staticViewQueries&&Eg(2,n.viewQuery,s);const v=n.components;null!==v&&function Ny(n,i){for(let s=0;s<i.length;s++)$y(n,i[s])}(i,v)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{i[2]&=-5,oe()}}function wd(n,i,s,l){const f=i[2];if(128!=(128&f)){Ka(i);try{ha(i),function fa(n){return Ii.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Kf(n,i,s,2,l);const T=3==(3&f);if(T){const se=n.preOrderCheckHooks;null!==se&&ds(i,se,null)}else{const se=n.preOrderHooks;null!==se&&Za(i,se,0,null),ga(i,0)}if(function _g(n){for(let i=h(n);null!==i;i=u(i)){if(!i[2])continue;const s=i[9];for(let l=0;l<s.length;l++){const f=s[l],v=f[3];0==(512&f[2])&&ur(v,1),f[2]|=512}}}(i),function jy(n){for(let i=h(n);null!==i;i=u(i))for(let s=10;s<i.length;s++){const l=i[s],f=l[1];fr(l)&&wd(f,l,f.template,l[8])}}(i),null!==n.contentQueries&&Gm(n,i),T){const se=n.contentCheckHooks;null!==se&&ds(i,se)}else{const se=n.contentHooks;null!==se&&Za(i,se,1),ga(i,1)}!function $m(n,i){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const f=s[l];if(f<0)xt(~f);else{const v=f,T=s[++l],P=s[++l];Da(T,v),P(2,i[v])}}}finally{xt(-1)}}(n,i);const P=n.components;null!==P&&function Ry(n,i){for(let s=0;s<i.length;s++)yg(n,i[s])}(i,P);const H=n.viewQuery;if(null!==H&&Eg(2,H,l),T){const se=n.viewCheckHooks;null!==se&&ds(i,se)}else{const se=n.viewHooks;null!==se&&Za(i,se,2),ga(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,ur(i[3],-1))}finally{oe()}}}function Py(n,i,s,l){const f=i[10],T=da(i);try{!T&&f.begin&&f.begin(),T&&Wf(n,i,l),wd(n,i,s,l)}finally{!T&&f.end&&f.end()}}function Kf(n,i,s,l,f){const v=$e(),T=2&l;try{xt(-1),T&&i.length>22&&fd(n,i,22,!1),s(l,f)}finally{xt(v)}}function lg(n,i,s){if(Oo(i)){const f=i.directiveEnd;for(let v=i.directiveStart;v<f;v++){const T=n.data[v];T.contentQueries&&T.contentQueries(1,s[v],v)}}}function $h(n,i,s){!Co()||(function fg(n,i,s,l){const f=s.directiveStart,v=s.directiveEnd;n.firstCreatePass||oi(s,i),pl(l,i);const T=s.initialInputs;for(let P=f;P<v;P++){const H=n.data[P],se=os(H);se&&mg(i,s,H);const _e=Tn(i,n,P,s);pl(_e,i),null!==T&&Ym(0,P-f,_e,H,0,T),se&&(Zi(s.index,i)[8]=_e)}}(n,i,s,lr(s,i)),128==(128&s.flags)&&function Uy(n,i,s){const l=s.directiveStart,f=s.directiveEnd,v=s.index,T=function Sa(){return Ii.lFrame.currentDirectiveIndex}();try{xt(v);for(let P=l;P<f;P++){const H=n.data[P],se=i[P];sa(P),(null!==H.hostBindings||0!==H.hostVars||null!==H.hostAttrs)&&Km(H,se)}}finally{xt(-1),sa(T)}}(n,i,s))}function qf(n,i,s=lr){const l=i.localNames;if(null!==l){let f=i.index+1;for(let v=0;v<l.length;v+=2){const T=l[v+1],P=-1===T?s(i,n):n[T];n[f++]=P}}}function zm(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Gh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Gh(n,i,s,l,f,v,T,P,H,se){const _e=22+l,ke=_e+f,ht=function ky(n,i){const s=[];for(let l=0;l<i;l++)s.push(l<n?null:Pr);return s}(_e,ke),Rt="function"==typeof se?se():se;return ht[1]={type:n,blueprint:ht,template:s,queries:null,viewQuery:P,declTNode:i,data:ht.slice().fill(null,_e),bindingStartIndex:_e,expandoStartIndex:ke,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:H,consts:Rt,incompleteFirstPass:!1}}function Zf(n,i,s,l){const f=bg(i);null===s?f.push(l):(f.push(s),n.firstCreatePass&&np(n).push(l,f.length-1))}function Yf(n,i,s){for(let l in n)if(n.hasOwnProperty(l)){const f=n[l];(s=null===s?{}:s).hasOwnProperty(l)?s[l].push(i,f):s[l]=[i,f]}return s}function Qf(n,i){const l=i.directiveEnd,f=n.data,v=i.attrs,T=[];let P=null,H=null;for(let se=i.directiveStart;se<l;se++){const _e=f[se],ke=_e.inputs,ht=null===v||Sf(i)?null:Hy(ke,v);T.push(ht),P=Yf(ke,se,P),H=Yf(_e.outputs,se,H)}null!==P&&(P.hasOwnProperty("class")&&(i.flags|=16),P.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=T,i.inputs=P,i.outputs=H}function Pl(n,i,s,l,f,v,T,P){const H=lr(i,s);let _e,se=i.inputs;!P&&null!=se&&(_e=se[l])?(Zh(n,s,_e,l,f),Ia(i)&&cg(s,i.index)):3&i.type&&(l=function ug(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),f=null!=T?T(f,i.value||"",l):f,v.setProperty(H,l,f))}function cg(n,i){const s=Zi(i,n);16&s[2]||(s[2]|=32)}function Yu(n,i,s,l){let f=!1;if(Co()){const v=function pg(n,i,s){const l=n.directiveRegistry;let f=null;if(l)for(let v=0;v<l.length;v++){const T=l[v];Af(s,T.selectors,!1)&&(f||(f=[]),ko(oi(s,i),n,T.type),os(T)?(qm(n,s),f.unshift(T)):f.push(T))}return f}(n,i,s),T=null===l?null:{"":-1};if(null!==v){f=!0,Xf(s,n.data.length,v.length);for(let _e=0;_e<v.length;_e++){const ke=v[_e];ke.providersResolver&&ke.providersResolver(ke)}let P=!1,H=!1,se=Yc(n,i,v.length,null);for(let _e=0;_e<v.length;_e++){const ke=v[_e];s.mergedAttrs=M(s.mergedAttrs,ke.hostAttrs),Zm(n,s,i,se,ke),By(se,ke,T),null!==ke.contentQueries&&(s.flags|=8),(null!==ke.hostBindings||null!==ke.hostAttrs||0!==ke.hostVars)&&(s.flags|=128);const ht=ke.type.prototype;!P&&(ht.ngOnChanges||ht.ngOnInit||ht.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),P=!0),!H&&(ht.ngOnChanges||ht.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),H=!0),se++}Qf(n,s)}T&&function gg(n,i,s){if(i){const l=n.localNames=[];for(let f=0;f<i.length;f+=2){const v=s[i[f+1]];if(null==v)throw new wt(-301,!1);l.push(i[f],v)}}}(s,l,T)}return s.mergedAttrs=M(s.mergedAttrs,s.attrs),f}function Jf(n,i,s,l,f,v){const T=v.hostBindings;if(T){let P=n.hostBindingOpCodes;null===P&&(P=n.hostBindingOpCodes=[]);const H=~i.index;(function Vy(n){let i=n.length;for(;i>0;){const s=n[--i];if("number"==typeof s&&s<0)return s}return 0})(P)!=H&&P.push(H),P.push(l,f,T)}}function Km(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function qm(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function By(n,i,s){if(s){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)s[i.exportAs[l]]=n;os(i)&&(s[""]=n)}}function Xf(n,i,s){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+s,n.providerIndexes=i}function Zm(n,i,s,l,f){n.data[l]=f;const v=f.factory||(f.factory=wr(f.type)),T=new Qs(v,os(f),qc);n.blueprint[l]=T,s[l]=T,Jf(n,i,0,l,Yc(n,s,f.hostVars,Pr),f)}function mg(n,i,s){const l=lr(i,n),f=zm(s),v=n[10],T=Kh(n,zf(n,f,null,s.onPush?32:16,l,i,v,v.createRenderer(l,s),null,null,null));n[i.index]=T}function Qu(n,i,s,l,f,v){const T=lr(n,i);!function zh(n,i,s,l,f,v,T){if(null==v)n.removeAttribute(i,f,s);else{const P=null==T?Dt(v):T(v,l||"",f);n.setAttribute(i,f,P,s)}}(i[11],T,v,n.value,s,l,f)}function Ym(n,i,s,l,f,v){const T=v[i];if(null!==T){const P=l.setInput;for(let H=0;H<T.length;){const se=T[H++],_e=T[H++],ke=T[H++];null!==P?l.setInput(s,ke,se,_e):s[_e]=ke}}}function Hy(n,i){let s=null,l=0;for(;l<i.length;){const f=i[l];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===s&&(s=[]),s.push(f,n[f],i[l+1])),l+=2}else l+=2;else l+=4}return s}function ep(n,i,s,l){return new Array(n,!0,!1,i,null,0,l,s,null,null)}function yg(n,i){const s=Zi(i,n);if(fr(s)){const l=s[1];48&s[2]?wd(l,s,l.template,s[8]):s[5]>0&&Wh(s)}}function Wh(n){for(let l=h(n);null!==l;l=u(l))for(let f=10;f<l.length;f++){const v=l[f];if(fr(v))if(512&v[2]){const T=v[1];wd(T,v,T.template,v[8])}else v[5]>0&&Wh(v)}const s=n[1].components;if(null!==s)for(let l=0;l<s.length;l++){const f=Zi(s[l],n);fr(f)&&f[5]>0&&Wh(f)}}function $y(n,i){const s=Zi(i,n),l=s[1];(function Qm(n,i){for(let s=i.length;s<n.blueprint.length;s++)i.push(n.blueprint[s])})(l,s),Wf(l,s,s[8])}function Kh(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function vg(n){for(;n;){n[2]|=32;const i=Wc(n);if(ca(n)&&!i)return n;n=i}return null}function Eg(n,i,s){is(0),i(n,s)}function bg(n){return n[7]||(n[7]=[])}function np(n){return n.cleanup||(n.cleanup=[])}function ip(n,i){const s=n[9],l=s?s.get(od,null):null;l&&l.handleError(i)}function Zh(n,i,s,l,f){for(let v=0;v<s.length;){const T=s[v++],P=s[v++],H=i[T],se=n.data[T];null!==se.setInput?se.setInput(H,f,l,P):H[P]=f}}function Ju(n,i,s){const l=mo(i,n);!function te(n,i,s){n.setValue(i,s)}(n[11],l,s)}function Ed(n,i,s){let l=s?n.styles:null,f=s?n.classes:null,v=0;if(null!==i)for(let T=0;T<i.length;T++){const P=i[T];"number"==typeof P?v=P:1==v?f=tt(f,P):2==v&&(l=tt(l,P+": "+i[++T]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=f:n.classesWithoutHost=f}function $d(n,i,s,l,f=!1){for(;null!==s;){const v=i[s.index];if(null!==v&&l.push(Rr(v)),Ur(v))for(let P=10;P<v.length;P++){const H=v[P],se=H[1].firstChild;null!==se&&$d(H[1],H,se,l)}const T=s.type;if(8&T)$d(n,i,s.child,l);else if(32&T){const P=Th(s,i);let H;for(;H=P();)l.push(H)}else if(16&T){const P=dm(i,s);if(Array.isArray(P))l.push(...P);else{const H=Wc(i[16]);$d(H[1],H,P,l,!0)}}s=f?s.projectionNext:s.next}return l}class Gd{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return $d(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Ur(i)){const s=i[8],l=s?s.indexOf(this):-1;l>-1&&(za(i,l),Fo(s,l))}this._attachedToViewContainer=!1}Sl(this._lView[1],this._lView)}onDestroy(i){Zf(this._lView[1],this._lView,null,i)}markForCheck(){vg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function tp(n,i,s){const l=i[10];l.begin&&l.begin();try{wd(n,i,n.template,s)}catch(f){throw ip(i,f),f}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new wt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zt(n,i){hd(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new wt(902,!1);this._appRef=i}}class rp extends Gd{constructor(i){super(i),this._view=i}detectChanges(){!function qh(n){!function wg(n){for(let i=0;i<n.components.length;i++){const s=n.components[i],l=Ld(s);if(null!==l){const f=l[1];Py(f,l,f.template,s)}}}(n[8])}(this._view)}checkNoChanges(){}get context(){return null}}class sp extends qu{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=ze(i);return new Yh(s,this.ngModule)}}function op(n){const i=[];for(let s in n)n.hasOwnProperty(s)&&i.push({propName:n[s],templateName:s});return i}class Cg{constructor(i,s){this.injector=i,this.parentInjector=s}get(i,s,l){const f=this.injector.get(i,hh,l);return f!==hh||s===hh?f:this.parentInjector.get(i,s,l)}}class Yh extends Rl{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function Em(n){return n.map(py).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return op(this.componentDef.inputs)}get outputs(){return op(this.componentDef.outputs)}create(i,s,l,f){let v=(f=f||this.ngModule)instanceof Qn?f:f?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const T=v?new Cg(i,v):i,P=T.get(Hc,null);if(null===P)throw new wt(407,!1);const H=T.get(ff,null),se=P.createRenderer(null,this.componentDef),_e=this.componentDef.selectors[0][0]||"div",ke=l?function Fy(n,i,s){return n.selectRootElement(i,s===$n.ShadowDom)}(se,l,this.componentDef.encapsulation):Oe(P.createRenderer(null,this.componentDef),_e,function zd(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(_e)),ht=this.componentDef.onPush?288:272,Rt={components:[]},hn=Gh(0,null,null,1,0,null,null,null,null,null),Dn=zf(null,hn,Rt,ht,null,null,P,se,H,T,null);let ni,Si;Ka(Dn);try{const mr=function Xm(n,i,s,l,f,v){const T=s[1];s[22]=n;const H=Zc(T,22,2,"#host",null),se=H.mergedAttrs=i.hostAttrs;null!==se&&(Ed(H,se,!0),null!==n&&(L(f,n,se),null!==H.classes&&Df(f,n,H.classes),null!==H.styles&&pm(f,n,H.styles)));const _e=l.createRenderer(n,i),ke=zf(s,zm(i),null,i.onPush?32:16,s[22],H,l,_e,v||null,null,null);return T.firstCreatePass&&(ko(oi(H,s),T,i.type),qm(T,H),Xf(H,s.length,1)),Kh(s,ke),s[22]=ke}(ke,this.componentDef,Dn,P,se);if(ke)if(l)L(se,ke,["ng-version",dh.full]);else{const{attrs:yn,classes:rr}=function gy(n){const i=[],s=[];let l=1,f=2;for(;l<n.length;){let v=n[l];if("string"==typeof v)2===f?""!==v&&i.push(v,n[++l]):8===f&&s.push(v);else{if(!gu(f))break;f=v}l++}return{attrs:i,classes:s}}(this.componentDef.selectors[0]);yn&&L(se,ke,yn),rr&&rr.length>0&&Df(se,ke,rr.join(" "))}if(Si=us(hn,22),void 0!==s){const yn=Si.projection=[];for(let rr=0;rr<this.ngContentSelectors.length;rr++){const Gs=s[rr];yn.push(null!=Gs?Array.from(Gs):null)}}ni=function zy(n,i,s,l,f){const v=s[1],T=function hg(n,i,s){const l=Wn();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Zm(n,l,i,Yc(n,i,1,null),s),Qf(n,l));const f=Tn(i,n,l.directiveStart,l);pl(f,i);const v=lr(l,i);return v&&pl(v,i),f}(v,s,i);if(l.components.push(T),n[8]=T,null!==f)for(const H of f)H(T,i);if(i.contentQueries){const H=Wn();i.contentQueries(1,T,H.directiveStart)}const P=Wn();return!v.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(xt(P.index),Jf(s[1],P,0,P.directiveStart,P.directiveEnd,i),Km(i,T)),T}(mr,this.componentDef,Dn,Rt,[Ky]),Wf(hn,Dn,null)}finally{oe()}return new Jm(this.componentType,ni,bc(Si,Dn),Dn,Si)}}class Jm extends class bu{}{constructor(i,s,l,f,v){super(),this.location=l,this._rootLView=f,this._tNode=v,this.instance=s,this.hostView=this.changeDetectorRef=new rp(f),this.componentType=i}setInput(i,s){const l=this._tNode.inputs;let f;if(null!==l&&(f=l[i])){const v=this._rootLView;Zh(v[1],v,f,i,s),cg(v,this._tNode.index)}}get injector(){return new yl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Ky(){const n=Wn();br(Jt()[1],n)}function ap(n){let i=function e_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const l=[n];for(;i;){let f;if(os(n))f=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new wt(903,!1);f=i.\u0275dir}if(f){if(s){l.push(f);const T=n;T.inputs=lp(n.inputs),T.declaredInputs=lp(n.declaredInputs),T.outputs=lp(n.outputs);const P=f.hostBindings;P&&up(n,P);const H=f.viewQuery,se=f.contentQueries;if(H&&t_(n,H),se&&n_(n,se),Re(n.inputs,f.inputs),Re(n.declaredInputs,f.declaredInputs),Re(n.outputs,f.outputs),os(f)&&f.data.animation){const _e=n.data;_e.animation=(_e.animation||[]).concat(f.data.animation)}}const v=f.features;if(v)for(let T=0;T<v.length;T++){const P=v[T];P&&P.ngInherit&&P(n),P===ap&&(s=!1)}}i=Object.getPrototypeOf(i)}!function Tg(n){let i=0,s=null;for(let l=n.length-1;l>=0;l--){const f=n[l];f.hostVars=i+=f.hostVars,f.hostAttrs=M(f.hostAttrs,s=M(s,f.hostAttrs))}}(l)}function lp(n){return n===Ui?{}:n===ii?[]:n}function t_(n,i){const s=n.viewQuery;n.viewQuery=s?(l,f)=>{i(l,f),s(l,f)}:i}function n_(n,i){const s=n.contentQueries;n.contentQueries=s?(l,f,v)=>{i(l,f,v),s(l,f,v)}:i}function up(n,i){const s=n.hostBindings;n.hostBindings=s?(l,f)=>{i(l,f),s(l,f)}:i}let Qc=null;function bd(){if(!Qc){const n=fi.Symbol;if(n&&n.iterator)Qc=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const l=i[s];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Qc=l)}}}return Qc}function gl(n){return!!Dg(n)&&(Array.isArray(n)||!(n instanceof Map)&&bd()in n)}function Dg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Xu(n,i,s){return n[i]=s}function tu(n,i,s){return!Object.is(n[i],s)&&(n[i]=s,!0)}function Nc(n,i,s,l){const f=tu(n,i,s);return tu(n,i+1,l)||f}function ua(n,i,s,l){const f=Jt();return tu(f,el(),i)&&(Xn(),Qu(Bt(),f,n,i,s,l)),ua}function Jh(n,i,s,l){return tu(n,el(),s)?i+Dt(s)+l:Pr}function Ea(n,i,s,l,f,v){const P=Nc(n,function _s(){return Ii.lFrame.bindingIndex}(),s,f);return Bo(2),P?i+Dt(s)+l+Dt(f)+v:Pr}function c_(n,i,s,l,f,v,T,P){const H=Jt(),se=Xn(),_e=n+22,ke=se.firstCreatePass?function hp(n,i,s,l,f,v,T,P,H){const se=i.consts,_e=Zc(i,n,4,T||null,Gr(se,P));Yu(i,s,_e,Gr(se,H)),br(i,_e);const ke=_e.tViews=Gh(2,_e,l,f,v,i.directiveRegistry,i.pipeRegistry,null,i.schemas,se);return null!==i.queries&&(i.queries.template(i,_e),ke.queries=i.queries.embeddedTView(_e)),_e}(_e,se,H,i,s,l,f,v,T):se.data[_e];$(ke,!1);const ht=H[11].createComment("");Sh(se,H,ht,ke),pl(ht,H),Kh(H,H[_e]=ep(ht,H,ht,ke)),Ko(ke)&&$h(se,H,ke),null!=T&&qf(H,ke,P)}function Ag(n){return function Ls(n,i){return n[i]}(function Lr(){return Ii.lFrame.contextLView}(),22+n)}function fp(n,i,s){const l=Jt();return tu(l,el(),i)&&Pl(Xn(),Bt(),l,n,i,l[11],s,!1),fp}function Qd(n,i,s,l,f){const T=f?"class":"style";Zh(n,s,i.inputs[T],T,l)}function yc(n,i,s,l){const f=Jt(),v=Xn(),T=22+n,P=f[11],H=f[T]=Oe(P,i,function Ki(){return Ii.lFrame.currentNamespace}()),se=v.firstCreatePass?function Qy(n,i,s,l,f,v,T){const P=i.consts,se=Zc(i,n,2,f,Gr(P,v));return Yu(i,s,se,Gr(P,T)),null!==se.attrs&&Ed(se,se.attrs,!1),null!==se.mergedAttrs&&Ed(se,se.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,se),se}(T,v,f,0,i,s,l):v.data[T];$(se,!0);const _e=se.mergedAttrs;null!==_e&&L(P,H,_e);const ke=se.classes;null!==ke&&Df(P,H,ke);const ht=se.styles;return null!==ht&&pm(P,H,ht),64!=(64&se.flags)&&Sh(v,f,H,se),0===function Uo(){return Ii.lFrame.elementDepthCount}()&&pl(H,f),function _l(){Ii.lFrame.elementDepthCount++}(),Ko(se)&&($h(v,f,se),lg(v,se,f)),null!==l&&qf(f,se),yc}function Dd(){let n=Wn();fe()?Pt():(n=n.parent,$(n,!1));const i=n;!function Er(){Ii.lFrame.elementDepthCount--}();const s=Xn();return s.firstCreatePass&&(br(s,n),Oo(n)&&s.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Fa(n){return 0!=(16&n.flags)}(i)&&Qd(s,i,Jt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function jo(n){return 0!=(32&n.flags)}(i)&&Qd(s,i,Jt(),i.stylesWithoutHost,!1),Dd}function Sd(n,i,s,l){return yc(n,i,s,l),Dd(),Sd}function Jd(n,i,s){const l=Jt(),f=Xn(),v=n+22,T=f.firstCreatePass?function d_(n,i,s,l,f){const v=i.consts,T=Gr(v,l),P=Zc(i,n,8,"ng-container",T);return null!==T&&Ed(P,T,!0),Yu(i,s,P,Gr(v,f)),null!==i.queries&&i.queries.elementStart(i,P),P}(v,f,l,i,s):f.data[v];$(T,!0);const P=l[v]=l[11].createComment("");return Sh(f,l,P,T),pl(P,l),Ko(T)&&($h(f,l,T),lg(f,T,l)),null!=s&&qf(l,T),Jd}function pp(){let n=Wn();const i=Xn();return fe()?Pt():(n=n.parent,$(n,!1)),i.firstCreatePass&&(br(i,n),Oo(n)&&i.queries.elementEnd(n)),pp}function xg(n,i,s){return Jd(n,i,s),pp(),xg}function h_(){return Jt()}function Xh(n){return!!n&&"function"==typeof n.then}function gp(n){return!!n&&"function"==typeof n.subscribe}const Mg=gp;function Pc(n,i,s,l){const f=Jt(),v=Xn(),T=Wn();return function mp(n,i,s,l,f,v,T,P){const H=Ko(l),_e=n.firstCreatePass&&np(n),ke=i[8],ht=bg(i);let Rt=!0;if(3&l.type||P){const ni=lr(l,i),Si=P?P(ni):ni,mr=ht.length,yn=P?Gs=>P(Rr(Gs[l.index])):l.index;let rr=null;if(!P&&H&&(rr=function f_(n,i,s,l){const f=n.cleanup;if(null!=f)for(let v=0;v<f.length-1;v+=2){const T=f[v];if(T===s&&f[v+1]===l){const P=i[7],H=f[v+2];return P.length>H?P[H]:null}"string"==typeof T&&(v+=2)}return null}(n,i,f,l.index)),null!==rr)(rr.__ngLastListenerFn__||rr).__ngNextListenerFn__=v,rr.__ngLastListenerFn__=v,Rt=!1;else{v=p_(l,i,ke,v,!1);const Gs=s.listen(Si,f,v);ht.push(v,Gs),_e&&_e.push(f,yn,mr,mr+1)}}else v=p_(l,i,ke,v,!1);const hn=l.outputs;let Dn;if(Rt&&null!==hn&&(Dn=hn[f])){const ni=Dn.length;if(ni)for(let Si=0;Si<ni;Si+=2){const Wa=i[Dn[Si]][Dn[Si+1]].subscribe(v),uf=ht.length;ht.push(v,Wa),_e&&_e.push(f,l.index,uf,-(uf+1))}}}(v,f,f[11],T,n,i,0,l),Pc}function _p(n,i,s,l){try{return!1!==s(l)}catch(f){return ip(n,f),!1}}function p_(n,i,s,l,f){return function v(T){if(T===Function)return l;vg(2&n.flags?Zi(n.index,i):i);let H=_p(i,0,l,T),se=v.__ngNextListenerFn__;for(;se;)H=_p(i,0,se,T)&&H,se=se.__ngNextListenerFn__;return f&&!1===H&&(T.preventDefault(),T.returnValue=!1),H}}function ef(n=1){return function W(n){return(Ii.lFrame.contextLView=function ge(n,i){for(;n>0;)i=i[15],n--;return i}(n,Ii.lFrame.contextLView))[8]}(n)}function yp(n,i){let s=null;const l=function ym(n){const i=n.attrs;if(null!=i){const s=i.indexOf(5);if(0==(1&s))return i[s+1]}return null}(n);for(let f=0;f<i.length;f++){const v=i[f];if("*"!==v){if(null===l?Af(n,v,!0):wm(l,v))return f}else s=f}return s}function Rg(n){const i=Jt()[16][6];if(!i.projection){const l=i.projection=rl(n?n.length:1,null),f=l.slice();let v=i.child;for(;null!==v;){const T=n?yp(v,n):0;null!==T&&(f[T]?f[T].projectionNext=v:l[T]=v,f[T]=v),v=v.next}}}function Xd(n,i=0,s){const l=Jt(),f=Xn(),v=Zc(f,22+n,16,null,s||null);null===v.projection&&(v.projection=i),Pt(),64!=(64&v.flags)&&function Nl(n,i,s){fm(i[11],0,i,s,Ac(n,s,i),jp(s.parent||i[6],s,i))}(f,l,v)}function Ng(n,i,s){return Ad(n,"",i,"",s),Ng}function Ad(n,i,s,l,f){const v=Jt(),T=Jh(v,i,s,l);return T!==Pr&&Pl(Xn(),Bt(),v,n,T,v[11],f,!1),Ad}function m_(n,i,s,l,f){const v=n[s+1],T=null===i;let P=l?Zu(v):Oc(v),H=!1;for(;0!==P&&(!1===H||T);){const _e=n[P+1];ev(n[P],i)&&(H=!0,n[P+1]=l?Lh(_e):Ph(_e)),P=l?Zu(_e):Oc(_e)}H&&(n[s+1]=l?Ph(v):Lh(v))}function ev(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Lt(n,i)>=0}const ml={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function __(n){return n.substring(ml.key,ml.keyEnd)}function tv(n){return n.substring(ml.value,ml.valueEnd)}function v_(n,i){const s=ml.textEnd;return s===i?-1:(i=ml.keyEnd=function E_(n,i,s){for(;i<s&&n.charCodeAt(i)>32;)i++;return i}(n,ml.key=i,s),nh(n,i,s))}function Fg(n,i){const s=ml.textEnd;let l=ml.key=nh(n,i,s);return s===l?-1:(l=ml.keyEnd=function b_(n,i,s){let l;for(;i<s&&(45===(l=n.charCodeAt(i))||95===l||(-33&l)>=65&&(-33&l)<=90||l>=48&&l<=57);)i++;return i}(n,l,s),l=Lg(n,l,s),l=ml.value=nh(n,l,s),l=ml.valueEnd=function I_(n,i,s){let l=-1,f=-1,v=-1,T=i,P=T;for(;T<s;){const H=n.charCodeAt(T++);if(59===H)return P;34===H||39===H?P=T=C_(n,H,T,s):i===T-4&&85===v&&82===f&&76===l&&40===H?P=T=C_(n,41,T,s):H>32&&(P=T),v=f,f=l,l=-33&H}return P}(n,l,s),Lg(n,l,s))}function w_(n){ml.key=0,ml.keyEnd=0,ml.value=0,ml.valueEnd=0,ml.textEnd=n.length}function nh(n,i,s){for(;i<s&&n.charCodeAt(i)<=32;)i++;return i}function Lg(n,i,s,l){return(i=nh(n,i,s))<s&&i++,i}function C_(n,i,s,l){let f=-1,v=s;for(;v<l;){const T=n.charCodeAt(v++);if(T==i&&92!==f)return v;f=92==T&&92===f?0:T}throw new Error}function ih(n,i,s){return tc(n,i,s,!1),ih}function Vg(n,i){return tc(n,i,null,!0),Vg}function Lu(n){nc(Md,Xc,n,!1)}function Xc(n,i){for(let s=function nv(n){return w_(n),Fg(n,nh(n,0,ml.textEnd))}(i);s>=0;s=Fg(i,s))Md(n,__(i),tv(i))}function D_(n){nc(Ne,nu,n,!0)}function nu(n,i){for(let s=function y_(n){return w_(n),v_(n,nh(n,0,ml.textEnd))}(i);s>=0;s=v_(i,s))Ne(n,__(i),!0)}function tc(n,i,s,l){const f=Jt(),v=Xn(),T=Bo(2);v.firstUpdatePass&&A_(v,n,T,l),i!==Pr&&tu(f,T,i)&&O_(v,v.data[$e()],f,f[11],n,f[T+1]=function ov(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=xe(Cl(n)))),n}(i,s),l,T)}function nc(n,i,s,l){const f=Xn(),v=Bo(2);f.firstUpdatePass&&A_(f,null,v,l);const T=Jt();if(s!==Pr&&tu(T,v,s)){const P=f.data[$e()];if(N_(P,l)&&!S_(f,v)){let H=l?P.classesWithoutHost:P.stylesWithoutHost;null!==H&&(s=tt(H,s||"")),Qd(f,P,T,s,l)}else!function Bg(n,i,s,l,f,v,T,P){f===Pr&&(f=ii);let H=0,se=0,_e=0<f.length?f[0]:null,ke=0<v.length?v[0]:null;for(;null!==_e||null!==ke;){const ht=H<f.length?f[H+1]:void 0,Rt=se<v.length?v[se+1]:void 0;let Dn,hn=null;_e===ke?(H+=2,se+=2,ht!==Rt&&(hn=ke,Dn=Rt)):null===ke||null!==_e&&_e<ke?(H+=2,hn=_e):(se+=2,hn=ke,Dn=Rt),null!==hn&&O_(n,i,s,l,hn,Dn,T,P),_e=H<f.length?f[H]:null,ke=se<v.length?v[se]:null}}(f,P,T,T[11],T[v+1],T[v+1]=function sv(n,i,s){if(null==s||""===s)return ii;const l=[],f=Cl(s);if(Array.isArray(f))for(let v=0;v<f.length;v++)n(l,f[v],!0);else if("object"==typeof f)for(const v in f)f.hasOwnProperty(v)&&n(l,v,f[v]);else"string"==typeof f&&i(l,f);return l}(n,i,s),l,v)}}function S_(n,i){return i>=n.expandoStartIndex}function A_(n,i,s,l){const f=n.data;if(null===f[s+1]){const v=f[$e()],T=S_(n,s);N_(v,l)&&null===i&&!T&&(i=!1),i=function iv(n,i,s,l){const f=pa(n);let v=l?i.residualClasses:i.residualStyles;if(null===f)0===(l?i.classBindings:i.styleBindings)&&(s=rh(s=Ug(null,n,i,s,l),i.attrs,l),v=null);else{const T=i.directiveStylingLast;if(-1===T||n[T]!==f)if(s=Ug(f,n,i,s,l),null===v){let H=function x_(n,i,s){const l=s?i.classBindings:i.styleBindings;if(0!==Oc(l))return n[Zu(l)]}(n,i,l);void 0!==H&&Array.isArray(H)&&(H=Ug(null,n,i,H[1],l),H=rh(H,i.attrs,l),function M_(n,i,s,l){n[Zu(s?i.classBindings:i.styleBindings)]=l}(n,i,l,H))}else v=function rv(n,i,s){let l;const f=i.directiveEnd;for(let v=1+i.directiveStylingLast;v<f;v++)l=rh(l,n[v].hostAttrs,s);return rh(l,i.attrs,s)}(n,i,l)}return void 0!==v&&(l?i.residualClasses=v:i.residualStyles=v),s}(f,v,i,l),function Jy(n,i,s,l,f,v){let T=v?i.classBindings:i.styleBindings,P=Zu(T),H=Oc(T);n[l]=s;let _e,se=!1;if(Array.isArray(s)){const ke=s;_e=ke[1],(null===_e||Lt(ke,_e)>0)&&(se=!0)}else _e=s;if(f)if(0!==H){const ht=Zu(n[P+1]);n[l+1]=Nh(ht,P),0!==ht&&(n[ht+1]=kh(n[ht+1],l)),n[P+1]=function Ty(n,i){return 131071&n|i<<17}(n[P+1],l)}else n[l+1]=Nh(P,0),0!==P&&(n[P+1]=kh(n[P+1],l)),P=l;else n[l+1]=Nh(H,0),0===P?P=l:n[H+1]=kh(n[H+1],l),H=l;se&&(n[l+1]=Ph(n[l+1])),m_(n,_e,l,!0),m_(n,_e,l,!1),function Xy(n,i,s,l,f){const v=f?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof i&&Lt(v,i)>=0&&(s[l+1]=Lh(s[l+1]))}(i,_e,n,l,v),T=Nh(P,H),v?i.classBindings=T:i.styleBindings=T}(f,v,i,s,T,l)}}function Ug(n,i,s,l,f){let v=null;const T=s.directiveEnd;let P=s.directiveStylingLast;for(-1===P?P=s.directiveStart:P++;P<T&&(v=i[P],l=rh(l,v.hostAttrs,f),v!==n);)P++;return null!==n&&(s.directiveStylingLast=P),l}function rh(n,i,s){const l=s?1:2;let f=-1;if(null!==i)for(let v=0;v<i.length;v++){const T=i[v];"number"==typeof T?f=T:f===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ne(n,T,!!s||i[++v]))}return void 0===n?null:n}function Md(n,i,s){Ne(n,i,Cl(s))}function O_(n,i,s,l,f,v,T,P){if(!(3&i.type))return;const H=n.data,se=H[P+1];vp(function Fh(n){return 1==(1&n)}(se)?R_(H,i,s,f,Oc(se),T):void 0)||(vp(v)||function Ff(n){return 2==(2&n)}(se)&&(v=R_(H,null,s,f,P,T)),function hy(n,i,s,l,f){if(i)f?n.addClass(s,l):n.removeClass(s,l);else{let v=-1===l.indexOf("-")?void 0:Du.DashCase;null==f?n.removeStyle(s,l,v):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),v|=Du.Important),n.setStyle(s,l,f,v))}}(l,T,mo($e(),s),f,v))}function R_(n,i,s,l,f,v){const T=null===i;let P;for(;f>0;){const H=n[f],se=Array.isArray(H),_e=se?H[1]:H,ke=null===_e;let ht=s[f+1];ht===Pr&&(ht=ke?ii:void 0);let Rt=ke?Ze(ht,l):_e===l?ht:void 0;if(se&&!vp(Rt)&&(Rt=Ze(H,l)),vp(Rt)&&(P=Rt,T))return P;const hn=n[f+1];f=T?Zu(hn):Oc(hn)}if(null!==i){let H=v?i.residualClasses:i.residualStyles;null!=H&&(P=Ze(H,l))}return P}function vp(n){return void 0!==n}function N_(n,i){return 0!=(n.flags&(i?16:32))}function P_(n,i=""){const s=Jt(),l=Xn(),f=n+22,v=l.firstCreatePass?Zc(l,f,1,i,null):l.data[f],T=s[f]=function U(n,i){return n.createText(i)}(s[11],i);Sh(l,s,T,v),$(v,!1)}function Hg(n){return jg("",n,""),Hg}function jg(n,i,s){const l=Jt(),f=Jh(l,n,i,s);return f!==Pr&&Ju(l,$e(),f),jg}function k_(n,i,s,l,f){const v=Jt(),T=Ea(v,n,i,s,l,f);return T!==Pr&&Ju(v,$e(),T),k_}function qg(n,i,s){const l=Jt();if(tu(l,el(),i)){const v=Xn(),T=Bt();Pl(v,T,l,n,i,function Ig(n,i,s){return(null===n||os(n))&&(s=function Po(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(s[i.index])),s[11]}(pa(v.data),T,l),s,!0)}return qg}const nd=void 0;var Zg=["en",[["a","p"],["AM","PM"],nd],[["AM","PM"],nd,nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nd,"{1} 'at' {0}",nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dv(n){const s=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let Lc={};function Yg(n){const i=function pv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Qg(i);if(s)return s;const l=i.split("-")[0];if(s=Qg(l),s)return s;if("en"===l)return Zg;throw new wt(701,!1)}function Z_(n){return Yg(n)[ir.PluralCase]}function Qg(n){return n in Lc||(Lc[n]=fi.ng&&fi.ng.common&&fi.ng.common.locales&&fi.ng.common.locales[n]),Lc[n]}var ir=(()=>((ir=ir||{})[ir.LocaleId=0]="LocaleId",ir[ir.DayPeriodsFormat=1]="DayPeriodsFormat",ir[ir.DayPeriodsStandalone=2]="DayPeriodsStandalone",ir[ir.DaysFormat=3]="DaysFormat",ir[ir.DaysStandalone=4]="DaysStandalone",ir[ir.MonthsFormat=5]="MonthsFormat",ir[ir.MonthsStandalone=6]="MonthsStandalone",ir[ir.Eras=7]="Eras",ir[ir.FirstDayOfWeek=8]="FirstDayOfWeek",ir[ir.WeekendRange=9]="WeekendRange",ir[ir.DateFormat=10]="DateFormat",ir[ir.TimeFormat=11]="TimeFormat",ir[ir.DateTimeFormat=12]="DateTimeFormat",ir[ir.NumberSymbols=13]="NumberSymbols",ir[ir.NumberFormats=14]="NumberFormats",ir[ir.CurrencyCode=15]="CurrencyCode",ir[ir.CurrencySymbol=16]="CurrencySymbol",ir[ir.CurrencyName=17]="CurrencyName",ir[ir.Currencies=18]="Currencies",ir[ir.Directionality=19]="Directionality",ir[ir.PluralCase=20]="PluralCase",ir[ir.ExtraData=21]="ExtraData",ir))();const oh="en-US";let e=oh;function yv(n,i,s,l,f){if(n=Ge(n),Array.isArray(n))for(let v=0;v<n.length;v++)yv(n[v],i,s,l,f);else{const v=Xn(),T=Jt();let P=xi(n)?n:Ge(n.provide),H=Xl(n);const se=Wn(),_e=1048575&se.providerIndexes,ke=se.directiveStart,ht=se.providerIndexes>>20;if(xi(n)||!n.multi){const Rt=new Qs(H,f,qc),hn=wv(P,i,f?_e:_e+ht,ke);-1===hn?(ko(oi(se,T),v,P),vv(v,n,i.length),i.push(P),se.directiveStart++,se.directiveEnd++,f&&(se.providerIndexes+=1048576),s.push(Rt),T.push(Rt)):(s[hn]=Rt,T[hn]=Rt)}else{const Rt=wv(P,i,_e+ht,ke),hn=wv(P,i,_e,_e+ht),Dn=Rt>=0&&s[Rt],ni=hn>=0&&s[hn];if(f&&!ni||!f&&!Dn){ko(oi(se,T),v,P);const Si=function zE(n,i,s,l,f){const v=new Qs(n,s,qc);return v.multi=[],v.index=i,v.componentProviders=0,R0(v,f,l&&!s),v}(f?GE:$E,s.length,f,l,H);!f&&ni&&(s[hn].providerFactory=Si),vv(v,n,i.length,0),i.push(P),se.directiveStart++,se.directiveEnd++,f&&(se.providerIndexes+=1048576),s.push(Si),T.push(Si)}else vv(v,n,Rt>-1?Rt:hn,R0(s[f?hn:Rt],H,!f&&l));!f&&l&&ni&&s[hn].componentProviders++}}}function vv(n,i,s,l){const f=xi(i),v=function vu(n){return!!n.useClass}(i);if(f||v){const H=(v?Ge(i.useClass):i).prototype.ngOnDestroy;if(H){const se=n.destroyHooks||(n.destroyHooks=[]);if(!f&&i.multi){const _e=se.indexOf(s);-1===_e?se.push(s,[l,H]):se[_e+1].push(l,H)}else se.push(s,H)}}}function R0(n,i,s){return s&&n.componentProviders++,n.multi.push(i)-1}function wv(n,i,s,l){for(let f=s;f<l;f++)if(i[f]===n)return f;return-1}function $E(n,i,s,l){return Ev(this.multi,[])}function GE(n,i,s,l){const f=this.multi;let v;if(this.providerFactory){const T=this.providerFactory.componentProviders,P=Tn(s,s[1],this.providerFactory.index,l);v=P.slice(0,T),Ev(f,v);for(let H=T;H<P.length;H++)v.push(P[H])}else v=[],Ev(f,v);return v}function Ev(n,i){for(let s=0;s<n.length;s++)i.push((0,n[s])());return i}function N0(n,i=[]){return s=>{s.providersResolver=(l,f)=>function jE(n,i,s){const l=Xn();if(l.firstCreatePass){const f=os(n);yv(s,l.data,l.blueprint,f,!0),yv(i,l.data,l.blueprint,f,!1)}}(l,f?f(n):n,i)}}class Cp{}class P0{}function WE(n,i){return new k0(n,i??null)}class k0 extends Cp{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sp(this);const l=Gn(i);this._bootstrapComponents=ku(l.bootstrap),this._r3Injector=Jp(i,s,[{provide:Cp,useValue:this},{provide:qu,useValue:this.componentFactoryResolver}],xe(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class bv extends P0{constructor(i){super(),this.moduleType=i}create(i){return new k0(this.moduleType,i)}}class KE extends Cp{constructor(i,s,l){super(),this.componentFactoryResolver=new sp(this),this.instance=null;const f=new Ri([...i,{provide:Cp,useValue:this},{provide:qu,useValue:this.componentFactoryResolver}],s||ac(),l,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Iv(n,i,s=null){return new KE(n,i,s).injector}let qE=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const l=gr(0,s.type),f=l.length>0?Iv([l],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,f)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Vt({token:n,providedIn:"environment",factory:()=>new n(co(Qn))}),n})();function F0(n){n.getStandaloneInjector=i=>i.get(qE).getOrCreateStandaloneInjector(n)}function $0(n,i,s){const l=zr()+n,f=Jt();return f[l]===Pr?Xu(f,l,s?i.call(s):i()):function Wd(n,i){return n[i]}(f,l)}function G0(n,i,s,l){return function q0(n,i,s,l,f,v){const T=i+s;return tu(n,T,f)?Xu(n,T+1,v?l.call(v,f):l(f)):Xg(n,T+1)}(Jt(),zr(),n,i,s,l)}function z0(n,i,s,l,f){return function Z0(n,i,s,l,f,v,T){const P=i+s;return Nc(n,P,f,v)?Xu(n,P+2,T?l.call(T,f,v):l(f,v)):Xg(n,P+2)}(Jt(),zr(),n,i,s,l,f)}function W0(n,i,s,l,f,v){return function Y0(n,i,s,l,f,v,T,P){const H=i+s;return function dp(n,i,s,l,f){const v=Nc(n,i,s,l);return tu(n,i+2,f)||v}(n,H,f,v,T)?Xu(n,H+3,P?l.call(P,f,v,T):l(f,v,T)):Xg(n,H+3)}(Jt(),zr(),n,i,s,l,f,v)}function K0(n,i,s,l,f,v,T){return function Q0(n,i,s,l,f,v,T,P,H){const se=i+s;return function Fu(n,i,s,l,f,v){const T=Nc(n,i,s,l);return Nc(n,i+2,f,v)||T}(n,se,f,v,T,P)?Xu(n,se+4,H?l.call(H,f,v,T,P):l(f,v,T,P)):Xg(n,se+4)}(Jt(),zr(),n,i,s,l,f,v,T)}function Xg(n,i){const s=n[i];return s===Pr?void 0:s}function Tv(n){return i=>{setTimeout(n,void 0,i)}}const id=class gb extends m.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,l){let f=i,v=s||(()=>null),T=l;if(i&&"object"==typeof i){const H=i;f=H.next?.bind(H),v=H.error?.bind(H),T=H.complete?.bind(H)}this.__isAsync&&(v=Tv(v),f&&(f=Tv(f)),T&&(T=Tv(T)));const P=super.subscribe({next:f,error:v,complete:T});return i instanceof a.w0&&i.add(P),P}};function mb(){return this._results[bd()]()}class Dv{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=bd(),l=Dv.prototype;l[s]||(l[s]=mb)}get changes(){return this._changes||(this._changes=new id)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const l=this;l.dirty=!1;const f=Do(i);(this._changesDetected=!function Wr(n,i,s){if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++){let f=n[l],v=i[l];if(s&&(f=s(f),v=s(v)),v!==f)return!1}return!0}(l._results,f,s))&&(l._results=f,l.length=f.length,l.last=f[this.length-1],l.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let tm=(()=>{class n{}return n.__NG_ELEMENT_ID__=vb,n})();const _b=tm,yb=class extends _b{constructor(i,s,l){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=l}createEmbeddedView(i,s){const l=this._declarationTContainer.tViews,f=zf(this._declarationLView,l,i,16,null,l.declTNode,null,null,null,null,s||null);f[17]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[19];return null!==T&&(f[19]=T.createEmbeddedView(l)),Wf(l,f,i),new Gd(f)}};function vb(){return X_(Wn(),Jt())}function X_(n,i){return 4&n.type?new yb(i,n,bc(n,i)):null}let ey=(()=>{class n{}return n.__NG_ELEMENT_ID__=wb,n})();function wb(){return tw(Wn(),Jt())}const Eb=ey,X0=class extends Eb{constructor(i,s,l){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=l}get element(){return bc(this._hostTNode,this._hostLView)}get injector(){return new yl(this._hostTNode,this._hostLView)}get parentInjector(){const i=As(this._hostTNode,this._hostLView);if(ce(i)){const s=Rn(i,this._hostLView),l=lt(i);return new yl(s[1].data[l+8],s)}return new yl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=ew(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,l){let f,v;"number"==typeof l?f=l:null!=l&&(f=l.index,v=l.injector);const T=i.createEmbeddedView(s||{},v);return this.insert(T,f),T}createComponent(i,s,l,f,v){const T=i&&!function Ml(n){return"function"==typeof n}(i);let P;if(T)P=s;else{const ke=s||{};P=ke.index,l=ke.injector,f=ke.projectableNodes,v=ke.environmentInjector||ke.ngModuleRef}const H=T?i:new Yh(ze(i)),se=l||this.parentInjector;if(!v&&null==H.ngModule){const ht=(T?se:this.parentInjector).get(Qn,null);ht&&(v=ht)}const _e=H.create(se,f,void 0,v);return this.insert(_e.hostView,P),_e}insert(i,s){const l=i._lView,f=l[1];if(function Vo(n){return Ur(n[3])}(l)){const _e=this.indexOf(i);if(-1!==_e)this.detach(_e);else{const ke=l[3],ht=new X0(ke,ke[6],ke[3]);ht.detach(ht.indexOf(i))}}const v=this._adjustIndex(s),T=this._lContainer;!function Jn(n,i,s,l){const f=10+l,v=s.length;l>0&&(s[f-1][4]=i),l<v-10?(i[4]=s[f],Ol(s,10+l,i)):(s.push(i),i[4]=null),i[3]=s;const T=i[17];null!==T&&s!==T&&function Ti(n,i){const s=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===s?n[9]=[i]:s.push(i)}(T,i);const P=i[19];null!==P&&P.insertView(n),i[2]|=64}(f,l,T,v);const P=Tf(v,T),H=l[11],se=Dh(H,T[7]);return null!==se&&function Gt(n,i,s,l,f,v){l[0]=f,l[6]=i,hd(n,l,s,1,f,v)}(f,T[6],H,l,se,P),i.attachToViewContainerRef(),Ol(Sv(T),v,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=ew(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),l=za(this._lContainer,s);l&&(Fo(Sv(this._lContainer),s),Sl(l[1],l))}detach(i){const s=this._adjustIndex(i,-1),l=za(this._lContainer,s);return l&&null!=Fo(Sv(this._lContainer),s)?new Gd(l):null}_adjustIndex(i,s=0){return i??this.length+s}};function ew(n){return n[8]}function Sv(n){return n[8]||(n[8]=[])}function tw(n,i){let s;const l=i[n.index];if(Ur(l))s=l;else{let f;if(8&n.type)f=Rr(l);else{const v=i[11];f=v.createComment("");const T=lr(n,i);dd(v,Dh(v,T),f,function cy(n,i){return n.nextSibling(i)}(v,T),!1)}i[n.index]=s=ep(l,i,f,n),Kh(i,s)}return new X0(s,n,i)}class Av{constructor(i){this.queryList=i,this.matches=null}clone(){return new Av(this.queryList)}setDirty(){this.queryList.setDirty()}}class xv{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const l=null!==i.contentQueries?i.contentQueries[0]:s.length,f=[];for(let v=0;v<l;v++){const T=s.getByIndex(v);f.push(this.queries[T.indexInDeclarationView].clone())}return new xv(f)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==cw(i,s).matches&&this.queries[s].setDirty()}}class nw{constructor(i,s,l=null){this.predicate=i,this.flags=s,this.read=l}}class Mv{constructor(i=[]){this.queries=i}elementStart(i,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let l=0;l<this.length;l++){const f=null!==s?s.length:0,v=this.getByIndex(l).embeddedTView(i,f);v&&(v.indexInDeclarationView=l,null!==s?s.push(v):s=[v])}return null!==s?new Mv(s):null}template(i,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Ov{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new Ov(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=i.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let f=0;f<l.length;f++){const v=l[f];this.matchTNodeWithReadOption(i,s,Cb(s,v)),this.matchTNodeWithReadOption(i,s,vo(s,i,v,!1,!1))}else l===tm?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,vo(s,i,l,!1,!1))}matchTNodeWithReadOption(i,s,l){if(null!==l){const f=this.metadata.read;if(null!==f)if(f===Bc||f===ey||f===tm&&4&s.type)this.addMatch(s.index,-2);else{const v=vo(s,i,f,!1,!1);null!==v&&this.addMatch(s.index,v)}else this.addMatch(s.index,l)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function Cb(n,i){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===i)return s[l+1];return null}function Db(n,i,s,l){return-1===s?function Tb(n,i){return 11&n.type?bc(n,i):4&n.type?X_(n,i):null}(i,n):-2===s?function Sb(n,i,s){return s===Bc?bc(i,n):s===tm?X_(i,n):s===ey?tw(i,n):void 0}(n,i,l):Tn(n,n[1],s,i)}function iw(n,i,s,l){const f=i[19].queries[l];if(null===f.matches){const v=n.data,T=s.matches,P=[];for(let H=0;H<T.length;H+=2){const se=T[H];P.push(se<0?null:Db(i,v[se],T[H+1],s.metadata.read))}f.matches=P}return f.matches}function Rv(n,i,s,l){const f=n.queries.getByIndex(s),v=f.matches;if(null!==v){const T=iw(n,i,f,s);for(let P=0;P<v.length;P+=2){const H=v[P];if(H>0)l.push(T[P/2]);else{const se=v[P+1],_e=i[-H];for(let ke=10;ke<_e.length;ke++){const ht=_e[ke];ht[17]===ht[3]&&Rv(ht[1],ht,se,l)}if(null!==_e[9]){const ke=_e[9];for(let ht=0;ht<ke.length;ht++){const Rt=ke[ht];Rv(Rt[1],Rt,se,l)}}}}}return l}function rw(n){const i=Jt(),s=Xn(),l=Ho();is(l+1);const f=cw(s,l);if(n.dirty&&da(i)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const v=f.crossesNgTemplate?Rv(s,i,l,[]):iw(s,i,f,l);n.reset(v,Sp),n.notifyOnChanges()}return!0}return!1}function sw(n,i,s){const l=Xn();l.firstCreatePass&&(uw(l,new nw(n,i,s),-1),2==(2&i)&&(l.staticViewQueries=!0)),lw(l,Jt(),i)}function ow(n,i,s,l){const f=Xn();if(f.firstCreatePass){const v=Wn();uw(f,new nw(i,s,l),v.index),function xb(n,i){const s=n.contentQueries||(n.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,i)}(f,n),2==(2&s)&&(f.staticContentQueries=!0)}lw(f,Jt(),s)}function aw(){return function Ab(n,i){return n[19].queries[i].queryList}(Jt(),Ho())}function lw(n,i,s){const l=new Dv(4==(4&s));Zf(n,i,l,l.destroy),null===i[19]&&(i[19]=new xv),i[19].queries.push(new Av(l))}function uw(n,i,s){null===n.queries&&(n.queries=new Mv),n.queries.track(new Ov(i,s))}function cw(n,i){return n.queries.getByIndex(i)}function dw(n,i){return X_(n,i)}function ny(...n){}const Mw=new Sn("Application Initializer");let iy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=ny,this.reject=ny,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,f)=>{this.resolve=l,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const v=this.appInits[f]();if(Xh(v))s.push(v);else if(Mg(v)){const T=new Promise((P,H)=>{v.subscribe({complete:P,error:H})});s.push(T)}}Promise.all(s).then(()=>{l()}).catch(f=>{this.reject(f)}),0===s.length&&l(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(co(Mw,8))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ow=new Sn("AppId",{providedIn:"root",factory:function Rw(){return`${Lv()}${Lv()}${Lv()}`}});function Lv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Nw=new Sn("Platform Initializer"),Zb=new Sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Pw=new Sn("appBootstrapListener"),Yb=new Sn("AnimationModuleType");let Qb=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ry=new Sn("LocaleId",{providedIn:"root",factory:()=>z(ry,Qt.Optional|Qt.SkipSelf)||function Jb(){return typeof $localize<"u"&&$localize.locale||oh}()}),Xb=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class eI{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let tI=(()=>{class n{compileModuleSync(s){return new bv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),v=ku(Gn(s).declarations).reduce((T,P)=>{const H=ze(P);return H&&T.push(new Yh(H)),T},[]);return new eI(l,v)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rI=(()=>Promise.resolve(0))();function Vv(n){typeof Zone>"u"?rI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class wc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new id(!1),this.onMicrotaskEmpty=new id(!1),this.onStable=new id(!1),this.onError=new id(!1),typeof Zone>"u")throw new wt(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const v=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new v("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!l&&s,f.shouldCoalesceRunChangeDetection=l,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function sI(){let n=fi.requestAnimationFrame,i=fi.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function lI(n){const i=()=>{!function aI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(fi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Bv(n),n.isCheckStableRunning=!0,Uv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Bv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,f,v,T,P)=>{try{return Lw(n),s.invokeTask(f,v,T,P)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&i(),Vw(n)}},onInvoke:(s,l,f,v,T,P,H)=>{try{return Lw(n),s.invoke(f,v,T,P,H)}finally{n.shouldCoalesceRunChangeDetection&&i(),Vw(n)}},onHasTask:(s,l,f,v)=>{s.hasTask(f,v),l===f&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,Bv(n),Uv(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(s,l,f,v)=>(s.handleError(f,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wc.isInAngularZone())throw new wt(909,!1)}static assertNotInAngularZone(){if(wc.isInAngularZone())throw new wt(909,!1)}run(i,s,l){return this._inner.run(i,s,l)}runTask(i,s,l,f){const v=this._inner,T=v.scheduleEventTask("NgZoneEvent: "+f,i,oI,ny,ny);try{return v.runTask(T,s,l)}finally{v.cancelTask(T)}}runGuarded(i,s,l){return this._inner.runGuarded(i,s,l)}runOutsideAngular(i){return this._outer.run(i)}}const oI={};function Uv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Bv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Lw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Vw(n){n._nesting--,Uv(n)}class uI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new id,this.onMicrotaskEmpty=new id,this.onStable=new id,this.onError=new id}run(i,s,l){return i.apply(s,l)}runGuarded(i,s,l){return i.apply(s,l)}runOutsideAngular(i){return i()}runTask(i,s,l,f){return i.apply(s,l)}}const Uw=new Sn(""),Bw=new Sn("");let Hv,cI=(()=>{class n{constructor(s,l,f){this._ngZone=s,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Hv||(function dI(n){Hv=n}(f),f.addToWindow(l)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wc.assertNotInAngularZone(),Vv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,f){let v=-1;l&&l>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==v),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:v,updateCb:f})}whenStable(s,l,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,l,f){return[]}}return n.\u0275fac=function(s){return new(s||n)(co(wc),co(Hw),co(Bw))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac}),n})(),Hw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return Hv?.findTestabilityInTree(this,s,l)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ah=null;const jw=new Sn("AllowMultipleToken"),jv=new Sn("PlatformDestroyListeners");class pI{constructor(i,s){this.name=i,this.token=s}}function Gw(n,i,s=[]){const l=`Platform: ${i}`,f=new Sn(l);return(v=[])=>{let T=$v();if(!T||T.injector.get(jw,!1)){const P=[...s,...v,{provide:f,useValue:!0}];n?n(P):function gI(n){if(ah&&!ah.get(jw,!1))throw new wt(400,!1);ah=n;const i=n.get(Ww);(function $w(n){const i=n.get(Nw,null);i&&i.forEach(s=>s())})(n)}(function zw(n=[],i){return Kc.create({name:i,providers:[{provide:wu,useValue:"platform"},{provide:jv,useValue:new Set([()=>ah=null])},...n]})}(P,l))}return function _I(n){const i=$v();if(!i)throw new wt(401,!1);return i}()}}function $v(){return ah?.get(Ww)??null}let Ww=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const f=function qw(n,i){let s;return s="noop"===n?new uI:("zone.js"===n?void 0:n)||new wc(i),s}(l?.ngZone,function Kw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(l)),v=[{provide:wc,useValue:f}];return f.run(()=>{const T=Kc.create({providers:v,parent:this.injector,name:s.moduleType.name}),P=s.create(T),H=P.injector.get(od,null);if(!H)throw new wt(402,!1);return f.runOutsideAngular(()=>{const se=f.onError.subscribe({next:_e=>{H.handleError(_e)}});P.onDestroy(()=>{oy(this._modules,P),se.unsubscribe()})}),function Zw(n,i,s){try{const l=s();return Xh(l)?l.catch(f=>{throw i.runOutsideAngular(()=>n.handleError(f)),f}):l}catch(l){throw i.runOutsideAngular(()=>n.handleError(l)),l}}(H,f,()=>{const se=P.injector.get(iy);return se.runInitializers(),se.donePromise.then(()=>(function t(n){Nn(n,"Expected localeId to be defined"),"string"==typeof n&&(e=n.toLowerCase().replace(/_/g,"-"))}(P.injector.get(ry,oh)||oh),this._moduleDoBootstrap(P),P))})})}bootstrapModule(s,l=[]){const f=Yw({},l);return function hI(n,i,s){const l=new bv(s);return Promise.resolve(l)}(0,0,s).then(v=>this.bootstrapModuleFactory(v,f))}_moduleDoBootstrap(s){const l=s.injector.get(sy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>l.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new wt(403,!1);s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new wt(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const s=this._injector.get(jv,null);s&&(s.forEach(l=>l()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(co(Kc))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Yw(n,i){return Array.isArray(i)?i.reduce(Yw,n):{...n,...i}}let sy=(()=>{class n{constructor(s,l,f){this._zone=s,this._injector=l,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new re.y(P=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{P.next(this._stable),P.complete()})}),T=new re.y(P=>{let H;this._zone.runOutsideAngular(()=>{H=this._zone.onStable.subscribe(()=>{wc.assertNotInAngularZone(),Vv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,P.next(!0))})})});const se=this._zone.onUnstable.subscribe(()=>{wc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{P.next(!1)}))});return()=>{H.unsubscribe(),se.unsubscribe()}});this.isStable=(0,Ee.T)(v,T.pipe((0,We.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,l){const f=s instanceof Rl;if(!this._injector.get(iy).done)throw!f&&gn(s),new wt(405,false);let T;T=f?s:this._injector.get(qu).resolveComponentFactory(s),this.componentTypes.push(T.componentType);const P=function fI(n){return n.isBoundToModule}(T)?void 0:this._injector.get(Cp),se=T.create(Kc.NULL,[],l||T.selector,P),_e=se.location.nativeElement,ke=se.injector.get(Uw,null);return ke?.registerApplication(_e),se.onDestroy(()=>{this.detachView(se.hostView),oy(this.components,se),ke?.unregisterApplication(_e)}),this._loadComponent(se),se}tick(){if(this._runningTick)throw new wt(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;oy(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Pw,[]).concat(this._bootstrapListeners).forEach(f=>f(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>oy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new wt(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(co(wc),co(Qn),co(od))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oy(n,i){const s=n.indexOf(i);s>-1&&n.splice(s,1)}let Jw=!0,Xw=!1;function vI(){return Xw=!0,Jw}function wI(){if(Xw)throw new Error("Cannot enable prod mode after platform setup.");Jw=!1}let EI=(()=>{class n{}return n.__NG_ELEMENT_ID__=bI,n})();function bI(n){return function II(n,i,s){if(Ia(n)&&!s){const l=Zi(n.index,i);return new Gd(l,l)}return 47&n.type?new Gd(i[16],i):null}(Wn(),Jt(),16==(16&n))}class iE{constructor(){}supports(i){return gl(i)}create(i){return new xI(i)}}const AI=(n,i)=>i;class xI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||AI}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,l=this._removalsHead,f=0,v=null;for(;s||l;){const T=!l||s&&s.currentIndex<sE(l,f,v)?s:l,P=sE(T,f,v),H=T.currentIndex;if(T===l)f--,l=l._nextRemoved;else if(s=s._next,null==T.previousIndex)f++;else{v||(v=[]);const se=P-f,_e=H-f;if(se!=_e){for(let ht=0;ht<se;ht++){const Rt=ht<v.length?v[ht]:v[ht]=0,hn=Rt+ht;_e<=hn&&hn<se&&(v[ht]=Rt+1)}v[T.previousIndex]=_e-se}}P!==H&&i(T,P,H)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!gl(i))throw new wt(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let f,v,T,s=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let P=0;P<this.length;P++)v=i[P],T=this._trackByFn(P,v),null!==s&&Object.is(s.trackById,T)?(l&&(s=this._verifyReinsertion(s,v,T,P)),Object.is(s.item,v)||this._addIdentityChange(s,v)):(s=this._mismatch(s,v,T,P),l=!0),s=s._next}else f=0,function s_(n,i){if(Array.isArray(n))for(let s=0;s<n.length;s++)i(n[s]);else{const s=n[bd()]();let l;for(;!(l=s.next()).done;)i(l.value)}}(i,P=>{T=this._trackByFn(f,P),null!==s&&Object.is(s.trackById,T)?(l&&(s=this._verifyReinsertion(s,P,T,f)),Object.is(s.item,P)||this._addIdentityChange(s,P)):(s=this._mismatch(s,P,T,f),l=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,l,f){let v;return null===i?v=this._itTail:(v=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,v,f)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,f))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,v,f)):i=this._addAfter(new MI(s,l),v,f),i}_verifyReinsertion(i,s,l,f){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==v?i=this._reinsertAfter(v,i._prev,f):i.currentIndex!=f&&(i.currentIndex=f,this._addToMoves(i,f)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const f=i._prevRemoved,v=i._nextRemoved;return null===f?this._removalsHead=v:f._nextRemoved=v,null===v?this._removalsTail=f:v._prevRemoved=f,this._insertAfter(i,s,l),this._addToMoves(i,l),i}_moveAfter(i,s,l){return this._unlink(i),this._insertAfter(i,s,l),this._addToMoves(i,l),i}_addAfter(i,s,l){return this._insertAfter(i,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,l){const f=null===s?this._itHead:s._next;return i._next=f,i._prev=s,null===f?this._itTail=i:f._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new rE),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,l=i._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rE),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class MI{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const s=i._prevDup,l=i._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class rE{constructor(){this.map=new Map}put(i){const s=i.trackById;let l=this.map.get(s);l||(l=new OI,this.map.set(s,l)),l.add(i)}get(i,s){const f=this.map.get(i);return f?f.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sE(n,i,s){const l=n.previousIndex;if(null===l)return l;let f=0;return s&&l<s.length&&(f=s[l]),l+i+f}class oE{constructor(){}supports(i){return i instanceof Map||Dg(i)}create(){return new RI}}class RI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||Dg(i)))throw new wt(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const v=this._getOrCreateRecordForKey(f,l);s=this._insertBeforeOrAppend(s,v)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const l=i._prev;return s._next=i,s._prev=l,i._prev=s,l&&(l._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const f=this._records.get(i);this._maybeAddToChanges(f,s);const v=f._prev,T=f._next;return v&&(v._next=T),T&&(T._prev=v),f._next=null,f._prev=null,f}const l=new NI(i);return this._records.set(i,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(l=>s(i[l],l))}}class NI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aE(){return new qv([new iE])}let qv=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(null!=l){const f=l.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||aE()),deps:[[n,new di,new mn]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(null!=l)return l;throw new wt(901,!1)}}return n.\u0275prov=Vt({token:n,providedIn:"root",factory:aE}),n})();function lE(){return new Zv([new oE])}let Zv=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(l){const f=l.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||lE()),deps:[[n,new di,new mn]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(l)return l;throw new wt(901,!1)}}return n.\u0275prov=Vt({token:n,providedIn:"root",factory:lE}),n})();const FI=Gw(null,"core",[]);let LI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(co(sy))},n.\u0275mod=xn({type:n}),n.\u0275inj=_t({}),n})();function VI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(In,Et,K)=>{K.d(Et,{Fj:()=>ct,JJ:()=>Qt,JL:()=>Ni,JU:()=>xe,On:()=>Ro,UX:()=>Er,_Y:()=>ia,kI:()=>Be,qu:()=>Xn,sg:()=>as,u:()=>qs,u5:()=>_l});var m=K(4650),a=K(6895),re=K(8996),Ee=K(4128),We=K(4004);let Ae=(()=>{class ee{constructor($,fe){this._renderer=$,this._elementRef=fe,this.onChange=Pt=>{},this.onTouched=()=>{}}setProperty($,fe){this._renderer.setProperty(this._elementRef.nativeElement,$,fe)}registerOnTouched($){this.onTouched=$}registerOnChange($){this.onChange=$}setDisabledState($){this.setProperty("disabled",$)}}return ee.\u0275fac=function($){return new($||ee)(m.Y36(m.Qsj),m.Y36(m.SBq))},ee.\u0275dir=m.lG2({type:ee}),ee})(),Re=(()=>{class ee extends Ae{}return ee.\u0275fac=function(){let Y;return function(fe){return(Y||(Y=m.n5z(ee)))(fe||ee)}}(),ee.\u0275dir=m.lG2({type:ee,features:[m.qOj]}),ee})();const xe=new m.OlP("NgValueAccessor"),Ie={provide:xe,useExisting:(0,m.Gpc)(()=>ct),multi:!0},Mt=new m.OlP("CompositionEventMode");let ct=(()=>{class ee extends Ae{constructor($,fe,Pt){super($,fe),this._compositionMode=Pt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ge(){const ee=(0,a.q)()?(0,a.q)().getUserAgent():"";return/android (\d+)/.test(ee.toLowerCase())}())}writeValue($){this.setProperty("value",$??"")}_handleInput($){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange($)}_compositionStart(){this._composing=!0}_compositionEnd($){this._composing=!1,this._compositionMode&&this.onChange($)}}return ee.\u0275fac=function($){return new($||ee)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Mt,8))},ee.\u0275dir=m.lG2({type:ee,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function($,fe){1&$&&m.NdJ("input",function(Fn){return fe._handleInput(Fn.target.value)})("blur",function(){return fe.onTouched()})("compositionstart",function(){return fe._compositionStart()})("compositionend",function(Fn){return fe._compositionEnd(Fn.target.value)})},features:[m._Bn([Ie]),m.qOj]}),ee})();function Wt(ee){return null==ee||("string"==typeof ee||Array.isArray(ee))&&0===ee.length}function Dt(ee){return null!=ee&&"number"==typeof ee.length}const vt=new m.OlP("NgValidators"),rt=new m.OlP("NgAsyncValidators"),qt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Be{static min(Y){return function ve(ee){return Y=>{if(Wt(Y.value)||Wt(ee))return null;const $=parseFloat(Y.value);return!isNaN($)&&$<ee?{min:{min:ee,actual:Y.value}}:null}}(Y)}static max(Y){return function nt(ee){return Y=>{if(Wt(Y.value)||Wt(ee))return null;const $=parseFloat(Y.value);return!isNaN($)&&$>ee?{max:{max:ee,actual:Y.value}}:null}}(Y)}static required(Y){return function Qe(ee){return Wt(ee.value)?{required:!0}:null}(Y)}static requiredTrue(Y){return function De(ee){return!0===ee.value?null:{required:!0}}(Y)}static email(Y){return function Q(ee){return Wt(ee.value)||qt.test(ee.value)?null:{email:!0}}(Y)}static minLength(Y){return function ft(ee){return Y=>Wt(Y.value)||!Dt(Y.value)?null:Y.value.length<ee?{minlength:{requiredLength:ee,actualLength:Y.value.length}}:null}(Y)}static maxLength(Y){return function Ve(ee){return Y=>Dt(Y.value)&&Y.value.length>ee?{maxlength:{requiredLength:ee,actualLength:Y.value.length}}:null}(Y)}static pattern(Y){return function it(ee){if(!ee)return bt;let Y,$;return"string"==typeof ee?($="","^"!==ee.charAt(0)&&($+="^"),$+=ee,"$"!==ee.charAt(ee.length-1)&&($+="$"),Y=new RegExp($)):($=ee.toString(),Y=ee),fe=>{if(Wt(fe.value))return null;const Pt=fe.value;return Y.test(Pt)?null:{pattern:{requiredPattern:$,actualValue:Pt}}}}(Y)}static nullValidator(Y){return null}static compose(Y){return $t(Y)}static composeAsync(Y){return Bn(Y)}}function bt(ee){return null}function yt(ee){return null!=ee}function Yt(ee){return(0,m.QGY)(ee)?(0,re.D)(ee):ee}function on(ee){let Y={};return ee.forEach($=>{Y=null!=$?{...Y,...$}:Y}),0===Object.keys(Y).length?null:Y}function pn(ee,Y){return Y.map($=>$(ee))}function Nn(ee){return ee.map(Y=>function On(ee){return!ee.validate}(Y)?Y:$=>Y.validate($))}function $t(ee){if(!ee)return null;const Y=ee.filter(yt);return 0==Y.length?null:function($){return on(pn($,Y))}}function ci(ee){return null!=ee?$t(Nn(ee)):null}function Bn(ee){if(!ee)return null;const Y=ee.filter(yt);return 0==Y.length?null:function($){const fe=pn($,Y).map(Yt);return(0,Ee.D)(fe).pipe((0,We.U)(on))}}function St(ee){return null!=ee?Bn(Nn(ee)):null}function Vt(ee,Y){return null===ee?[Y]:Array.isArray(ee)?[...ee,Y]:[ee,Y]}function Ue(ee){return ee._rawValidators}function _t(ee){return ee._rawAsyncValidators}function ln(ee){return ee?Array.isArray(ee)?ee:[ee]:[]}function Hn(ee,Y){return Array.isArray(ee)?ee.includes(Y):ee===Y}function Gi(ee,Y){const $=ln(Y);return ln(ee).forEach(Pt=>{Hn($,Pt)||$.push(Pt)}),$}function Ei(ee,Y){return ln(Y).filter($=>!Hn(ee,$))}class bi{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Y){this._rawValidators=Y||[],this._composedValidatorFn=ci(this._rawValidators)}_setAsyncValidators(Y){this._rawAsyncValidators=Y||[],this._composedAsyncValidatorFn=St(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Y){this._onDestroyCallbacks.push(Y)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Y=>Y()),this._onDestroyCallbacks=[]}reset(Y){this.control&&this.control.reset(Y)}hasError(Y,$){return!!this.control&&this.control.hasError(Y,$)}getError(Y,$){return this.control?this.control.getError(Y,$):null}}class zi extends bi{get formDirective(){return null}get path(){return null}}class ai extends bi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Hi{constructor(Y){this._cd=Y}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Qt=(()=>{class ee extends Hi{constructor($){super($)}}return ee.\u0275fac=function($){return new($||ee)(m.Y36(ai,2))},ee.\u0275dir=m.lG2({type:ee,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function($,fe){2&$&&m.ekj("ng-untouched",fe.isUntouched)("ng-touched",fe.isTouched)("ng-pristine",fe.isPristine)("ng-dirty",fe.isDirty)("ng-valid",fe.isValid)("ng-invalid",fe.isInvalid)("ng-pending",fe.isPending)},features:[m.qOj]}),ee})(),Ni=(()=>{class ee extends Hi{constructor($){super($)}}return ee.\u0275fac=function($){return new($||ee)(m.Y36(zi,10))},ee.\u0275dir=m.lG2({type:ee,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function($,fe){2&$&&m.ekj("ng-untouched",fe.isUntouched)("ng-touched",fe.isTouched)("ng-pristine",fe.isPristine)("ng-dirty",fe.isDirty)("ng-valid",fe.isValid)("ng-invalid",fe.isInvalid)("ng-pending",fe.isPending)("ng-submitted",fe.isSubmitted)},features:[m.qOj]}),ee})();const ot="VALID",Ke="INVALID",je="PENDING",et="DISABLED";function qe(ee){return(Bi(ee)?ee.validators:ee)||null}function Kt(ee){return Array.isArray(ee)?ci(ee):ee||null}function fn(ee,Y){return(Bi(Y)?Y.asyncValidators:ee)||null}function xn(ee){return Array.isArray(ee)?St(ee):ee||null}function Bi(ee){return null!=ee&&!Array.isArray(ee)&&"object"==typeof ee}function Ji(ee,Y,$){const fe=ee.controls;if(!(Y?Object.keys(fe):fe).length)throw new m.vHH(1e3,"");if(!fe[$])throw new m.vHH(1001,"")}function kr(ee,Y,$){ee._forEachChild((fe,Pt)=>{if(void 0===$[Pt])throw new m.vHH(1002,"")})}class mt{constructor(Y,$){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=Y,this._rawAsyncValidators=$,this._composedValidatorFn=Kt(this._rawValidators),this._composedAsyncValidatorFn=xn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(Y){this._rawValidators=this._composedValidatorFn=Y}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Y){this._rawAsyncValidators=this._composedAsyncValidatorFn=Y}get parent(){return this._parent}get valid(){return this.status===ot}get invalid(){return this.status===Ke}get pending(){return this.status==je}get disabled(){return this.status===et}get enabled(){return this.status!==et}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Y){this._rawValidators=Y,this._composedValidatorFn=Kt(Y)}setAsyncValidators(Y){this._rawAsyncValidators=Y,this._composedAsyncValidatorFn=xn(Y)}addValidators(Y){this.setValidators(Gi(Y,this._rawValidators))}addAsyncValidators(Y){this.setAsyncValidators(Gi(Y,this._rawAsyncValidators))}removeValidators(Y){this.setValidators(Ei(Y,this._rawValidators))}removeAsyncValidators(Y){this.setAsyncValidators(Ei(Y,this._rawAsyncValidators))}hasValidator(Y){return Hn(this._rawValidators,Y)}hasAsyncValidator(Y){return Hn(this._rawAsyncValidators,Y)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Y={}){this.touched=!0,this._parent&&!Y.onlySelf&&this._parent.markAsTouched(Y)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Y=>Y.markAllAsTouched())}markAsUntouched(Y={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild($=>{$.markAsUntouched({onlySelf:!0})}),this._parent&&!Y.onlySelf&&this._parent._updateTouched(Y)}markAsDirty(Y={}){this.pristine=!1,this._parent&&!Y.onlySelf&&this._parent.markAsDirty(Y)}markAsPristine(Y={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild($=>{$.markAsPristine({onlySelf:!0})}),this._parent&&!Y.onlySelf&&this._parent._updatePristine(Y)}markAsPending(Y={}){this.status=je,!1!==Y.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Y.onlySelf&&this._parent.markAsPending(Y)}disable(Y={}){const $=this._parentMarkedDirty(Y.onlySelf);this.status=et,this.errors=null,this._forEachChild(fe=>{fe.disable({...Y,onlySelf:!0})}),this._updateValue(),!1!==Y.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Y,skipPristineCheck:$}),this._onDisabledChange.forEach(fe=>fe(!0))}enable(Y={}){const $=this._parentMarkedDirty(Y.onlySelf);this.status=ot,this._forEachChild(fe=>{fe.enable({...Y,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Y.emitEvent}),this._updateAncestors({...Y,skipPristineCheck:$}),this._onDisabledChange.forEach(fe=>fe(!1))}_updateAncestors(Y){this._parent&&!Y.onlySelf&&(this._parent.updateValueAndValidity(Y),Y.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Y){this._parent=Y}getRawValue(){return this.value}updateValueAndValidity(Y={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ot||this.status===je)&&this._runAsyncValidator(Y.emitEvent)),!1!==Y.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Y.onlySelf&&this._parent.updateValueAndValidity(Y)}_updateTreeValidity(Y={emitEvent:!0}){this._forEachChild($=>$._updateTreeValidity(Y)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Y.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?et:ot}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Y){if(this.asyncValidator){this.status=je,this._hasOwnPendingAsyncValidator=!0;const $=Yt(this.asyncValidator(this));this._asyncValidationSubscription=$.subscribe(fe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(fe,{emitEvent:Y})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Y,$={}){this.errors=Y,this._updateControlsErrors(!1!==$.emitEvent)}get(Y){let $=Y;return null==$||(Array.isArray($)||($=$.split(".")),0===$.length)?null:$.reduce((fe,Pt)=>fe&&fe._find(Pt),this)}getError(Y,$){const fe=$?this.get($):this;return fe&&fe.errors?fe.errors[Y]:null}hasError(Y,$){return!!this.getError(Y,$)}get root(){let Y=this;for(;Y._parent;)Y=Y._parent;return Y}_updateControlsErrors(Y){this.status=this._calculateStatus(),Y&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Y)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?et:this.errors?Ke:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(je)?je:this._anyControlsHaveStatus(Ke)?Ke:ot}_anyControlsHaveStatus(Y){return this._anyControls($=>$.status===Y)}_anyControlsDirty(){return this._anyControls(Y=>Y.dirty)}_anyControlsTouched(){return this._anyControls(Y=>Y.touched)}_updatePristine(Y={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Y.onlySelf&&this._parent._updatePristine(Y)}_updateTouched(Y={}){this.touched=this._anyControlsTouched(),this._parent&&!Y.onlySelf&&this._parent._updateTouched(Y)}_registerOnCollectionChange(Y){this._onCollectionChange=Y}_setUpdateStrategy(Y){Bi(Y)&&null!=Y.updateOn&&(this._updateOn=Y.updateOn)}_parentMarkedDirty(Y){return!Y&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Y){return null}}class ze extends mt{constructor(Y,$,fe){super(qe($),fn(fe,$)),this.controls=Y,this._initObservables(),this._setUpdateStrategy($),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Y,$){return this.controls[Y]?this.controls[Y]:(this.controls[Y]=$,$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange),$)}addControl(Y,$,fe={}){this.registerControl(Y,$),this.updateValueAndValidity({emitEvent:fe.emitEvent}),this._onCollectionChange()}removeControl(Y,$={}){this.controls[Y]&&this.controls[Y]._registerOnCollectionChange(()=>{}),delete this.controls[Y],this.updateValueAndValidity({emitEvent:$.emitEvent}),this._onCollectionChange()}setControl(Y,$,fe={}){this.controls[Y]&&this.controls[Y]._registerOnCollectionChange(()=>{}),delete this.controls[Y],$&&this.registerControl(Y,$),this.updateValueAndValidity({emitEvent:fe.emitEvent}),this._onCollectionChange()}contains(Y){return this.controls.hasOwnProperty(Y)&&this.controls[Y].enabled}setValue(Y,$={}){kr(this,0,Y),Object.keys(Y).forEach(fe=>{Ji(this,!0,fe),this.controls[fe].setValue(Y[fe],{onlySelf:!0,emitEvent:$.emitEvent})}),this.updateValueAndValidity($)}patchValue(Y,$={}){null!=Y&&(Object.keys(Y).forEach(fe=>{const Pt=this.controls[fe];Pt&&Pt.patchValue(Y[fe],{onlySelf:!0,emitEvent:$.emitEvent})}),this.updateValueAndValidity($))}reset(Y={},$={}){this._forEachChild((fe,Pt)=>{fe.reset(Y[Pt],{onlySelf:!0,emitEvent:$.emitEvent})}),this._updatePristine($),this._updateTouched($),this.updateValueAndValidity($)}getRawValue(){return this._reduceChildren({},(Y,$,fe)=>(Y[fe]=$.getRawValue(),Y))}_syncPendingControls(){let Y=this._reduceChildren(!1,($,fe)=>!!fe._syncPendingControls()||$);return Y&&this.updateValueAndValidity({onlySelf:!0}),Y}_forEachChild(Y){Object.keys(this.controls).forEach($=>{const fe=this.controls[$];fe&&Y(fe,$)})}_setUpControls(){this._forEachChild(Y=>{Y.setParent(this),Y._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Y){for(const[$,fe]of Object.entries(this.controls))if(this.contains($)&&Y(fe))return!0;return!1}_reduceValue(){return this._reduceChildren({},($,fe,Pt)=>((fe.enabled||this.disabled)&&($[Pt]=fe.value),$))}_reduceChildren(Y,$){let fe=Y;return this._forEachChild((Pt,Fn)=>{fe=$(fe,Pt,Fn)}),fe}_allControlsDisabled(){for(const Y of Object.keys(this.controls))if(this.controls[Y].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Y){return this.controls.hasOwnProperty(Y)?this.controls[Y]:null}}class gn extends ze{}function Zn(ee,Y){return[...Y.path,ee]}function Pe(ee,Y){Ct(ee,Y),Y.valueAccessor.writeValue(ee.value),ee.disabled&&Y.valueAccessor.setDisabledState?.(!0),function wi(ee,Y){Y.valueAccessor.registerOnChange($=>{ee._pendingValue=$,ee._pendingChange=!0,ee._pendingDirty=!0,"change"===ee.updateOn&&dr(ee,Y)})}(ee,Y),function yr(ee,Y){const $=(fe,Pt)=>{Y.valueAccessor.writeValue(fe),Pt&&Y.viewToModelUpdate(fe)};ee.registerOnChange($),Y._registerOnDestroy(()=>{ee._unregisterOnChange($)})}(ee,Y),function Di(ee,Y){Y.valueAccessor.registerOnTouched(()=>{ee._pendingTouched=!0,"blur"===ee.updateOn&&ee._pendingChange&&dr(ee,Y),"submit"!==ee.updateOn&&ee.markAsTouched()})}(ee,Y),function dt(ee,Y){if(Y.valueAccessor.setDisabledState){const $=fe=>{Y.valueAccessor.setDisabledState(fe)};ee.registerOnDisabledChange($),Y._registerOnDestroy(()=>{ee._unregisterOnDisabledChange($)})}}(ee,Y)}function Le(ee,Y,$=!0){const fe=()=>{};Y.valueAccessor&&(Y.valueAccessor.registerOnChange(fe),Y.valueAccessor.registerOnTouched(fe)),vn(ee,Y),ee&&(Y._invokeOnDestroyCallbacks(),ee._registerOnCollectionChange(()=>{}))}function Ce(ee,Y){ee.forEach($=>{$.registerOnValidatorChange&&$.registerOnValidatorChange(Y)})}function Ct(ee,Y){const $=Ue(ee);null!==Y.validator?ee.setValidators(Vt($,Y.validator)):"function"==typeof $&&ee.setValidators([$]);const fe=_t(ee);null!==Y.asyncValidator?ee.setAsyncValidators(Vt(fe,Y.asyncValidator)):"function"==typeof fe&&ee.setAsyncValidators([fe]);const Pt=()=>ee.updateValueAndValidity();Ce(Y._rawValidators,Pt),Ce(Y._rawAsyncValidators,Pt)}function vn(ee,Y){let $=!1;if(null!==ee){if(null!==Y.validator){const Pt=Ue(ee);if(Array.isArray(Pt)&&Pt.length>0){const Fn=Pt.filter(Lr=>Lr!==Y.validator);Fn.length!==Pt.length&&($=!0,ee.setValidators(Fn))}}if(null!==Y.asyncValidator){const Pt=_t(ee);if(Array.isArray(Pt)&&Pt.length>0){const Fn=Pt.filter(Lr=>Lr!==Y.asyncValidator);Fn.length!==Pt.length&&($=!0,ee.setAsyncValidators(Fn))}}}const fe=()=>{};return Ce(Y._rawValidators,fe),Ce(Y._rawAsyncValidators,fe),$}function dr(ee,Y){ee._pendingDirty&&ee.markAsDirty(),ee.setValue(ee._pendingValue,{emitModelToViewChange:!1}),Y.viewToModelUpdate(ee._pendingValue),ee._pendingChange=!1}function ss(ee,Y){if(!ee.hasOwnProperty("model"))return!1;const $=ee.model;return!!$.isFirstChange()||!Object.is(Y,$.currentValue)}function ki(ee,Y){if(!Y)return null;let $,fe,Pt;return Array.isArray(Y),Y.forEach(Fn=>{Fn.constructor===ct?$=Fn:function no(ee){return Object.getPrototypeOf(ee.constructor)===Re}(Fn)?fe=Fn:Pt=Fn}),Pt||fe||$||null}function zs(ee,Y){const $=ee.indexOf(Y);$>-1&&ee.splice($,1)}function Ts(ee){return"object"==typeof ee&&null!==ee&&2===Object.keys(ee).length&&"value"in ee&&"disabled"in ee}const Ws=class extends mt{constructor(Y=null,$,fe){super(qe($),fn(fe,$)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Y),this._setUpdateStrategy($),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bi($)&&($.nonNullable||$.initialValueIsDefault)&&(this.defaultValue=Ts(Y)?Y.value:Y)}setValue(Y,$={}){this.value=this._pendingValue=Y,this._onChange.length&&!1!==$.emitModelToViewChange&&this._onChange.forEach(fe=>fe(this.value,!1!==$.emitViewToModelChange)),this.updateValueAndValidity($)}patchValue(Y,$={}){this.setValue(Y,$)}reset(Y=this.defaultValue,$={}){this._applyFormState(Y),this.markAsPristine($),this.markAsUntouched($),this.setValue(this.value,$),this._pendingChange=!1}_updateValue(){}_anyControls(Y){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Y){this._onChange.push(Y)}_unregisterOnChange(Y){zs(this._onChange,Y)}registerOnDisabledChange(Y){this._onDisabledChange.push(Y)}_unregisterOnDisabledChange(Y){zs(this._onDisabledChange,Y)}_forEachChild(Y){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Y){Ts(Y)?(this.value=this._pendingValue=Y.value,Y.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Y}},ca={provide:ai,useExisting:(0,m.Gpc)(()=>Ro)},ll=(()=>Promise.resolve(null))();let Ro=(()=>{class ee extends ai{constructor($,fe,Pt,Fn,Lr){super(),this._changeDetectorRef=Lr,this.control=new Ws,this._registered=!1,this.update=new m.vpe,this._parent=$,this._setValidators(fe),this._setAsyncValidators(Pt),this.valueAccessor=ki(0,Fn)}ngOnChanges($){if(this._checkForErrors(),!this._registered||"name"in $){if(this._registered&&(this._checkName(),this.formDirective)){const fe=$.name.previousValue;this.formDirective.removeControl({name:fe,path:this._getPath(fe)})}this._setUpControl()}"isDisabled"in $&&this._updateDisabled($),ss($,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate($){this.viewModel=$,this.update.emit($)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Pe(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue($){ll.then(()=>{this.control.setValue($,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled($){const fe=$.isDisabled.currentValue,Pt=0!==fe&&(0,m.D6c)(fe);ll.then(()=>{Pt&&!this.control.disabled?this.control.disable():!Pt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath($){return this._parent?Zn($,this._parent):[$]}}return ee.\u0275fac=function($){return new($||ee)(m.Y36(zi,9),m.Y36(vt,10),m.Y36(rt,10),m.Y36(xe,10),m.Y36(m.sBO,8))},ee.\u0275dir=m.lG2({type:ee,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([ca]),m.qOj,m.TTD]}),ee})(),ia=(()=>{class ee{}return ee.\u0275fac=function($){return new($||ee)},ee.\u0275dir=m.lG2({type:ee,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ee})(),It=(()=>{class ee{}return ee.\u0275fac=function($){return new($||ee)},ee.\u0275mod=m.oAB({type:ee}),ee.\u0275inj=m.cJS({}),ee})();const ui=new m.OlP("NgModelWithFormControlWarning"),Fs={provide:zi,useExisting:(0,m.Gpc)(()=>as)};let as=(()=>{class ee extends zi{constructor($,fe){super(),this.validators=$,this.asyncValidators=fe,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.vpe,this._setValidators($),this._setAsyncValidators(fe)}ngOnChanges($){this._checkFormPresent(),$.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl($){const fe=this.form.get($.path);return Pe(fe,$),fe.updateValueAndValidity({emitEvent:!1}),this.directives.push($),fe}getControl($){return this.form.get($.path)}removeControl($){Le($.control||null,$,!1),function po(ee,Y){const $=ee.indexOf(Y);$>-1&&ee.splice($,1)}(this.directives,$)}addFormGroup($){this._setUpFormContainer($)}removeFormGroup($){this._cleanUpFormContainer($)}getFormGroup($){return this.form.get($.path)}addFormArray($){this._setUpFormContainer($)}removeFormArray($){this._cleanUpFormContainer($)}getFormArray($){return this.form.get($.path)}updateModel($,fe){this.form.get($.path).setValue(fe)}onSubmit($){return this.submitted=!0,function Ps(ee,Y){ee._syncPendingControls(),Y.forEach($=>{const fe=$.control;"submit"===fe.updateOn&&fe._pendingChange&&($.viewToModelUpdate(fe._pendingValue),fe._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit($),!1}onReset(){this.resetForm()}resetForm($){this.form.reset($),this.submitted=!1}_updateDomValue(){this.directives.forEach($=>{const fe=$.control,Pt=this.form.get($.path);fe!==Pt&&(Le(fe||null,$),(ee=>ee instanceof Ws)(Pt)&&(Pe(Pt,$),$.control=Pt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer($){const fe=this.form.get($.path);(function bn(ee,Y){Ct(ee,Y)})(fe,$),fe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer($){if(this.form){const fe=this.form.get($.path);fe&&function Ns(ee,Y){return vn(ee,Y)}(fe,$)&&fe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ct(this.form,this),this._oldForm&&vn(this._oldForm,this)}_checkFormPresent(){}}return ee.\u0275fac=function($){return new($||ee)(m.Y36(vt,10),m.Y36(rt,10))},ee.\u0275dir=m.lG2({type:ee,selectors:[["","formGroup",""]],hostBindings:function($,fe){1&$&&m.NdJ("submit",function(Fn){return fe.onSubmit(Fn)})("reset",function(){return fe.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([Fs]),m.qOj,m.TTD]}),ee})();const wr={provide:ai,useExisting:(0,m.Gpc)(()=>qs)};let qs=(()=>{class ee extends ai{constructor($,fe,Pt,Fn,Lr){super(),this._ngModelWarningConfig=Lr,this._added=!1,this.update=new m.vpe,this._ngModelWarningSent=!1,this._parent=$,this._setValidators(fe),this._setAsyncValidators(Pt),this.valueAccessor=ki(0,Fn)}set isDisabled($){}ngOnChanges($){this._added||this._setUpControl(),ss($,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate($){this.viewModel=$,this.update.emit($)}get path(){return Zn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return ee._ngModelWarningSentOnce=!1,ee.\u0275fac=function($){return new($||ee)(m.Y36(zi,13),m.Y36(vt,10),m.Y36(rt,10),m.Y36(xe,10),m.Y36(ui,8))},ee.\u0275dir=m.lG2({type:ee,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[m._Bn([wr]),m.qOj,m.TTD]}),ee})(),Uo=(()=>{class ee{}return ee.\u0275fac=function($){return new($||ee)},ee.\u0275mod=m.oAB({type:ee}),ee.\u0275inj=m.cJS({imports:[It]}),ee})(),_l=(()=>{class ee{}return ee.\u0275fac=function($){return new($||ee)},ee.\u0275mod=m.oAB({type:ee}),ee.\u0275inj=m.cJS({imports:[Uo]}),ee})(),Er=(()=>{class ee{static withConfig($){return{ngModule:ee,providers:[{provide:ui,useValue:$.warnOnNgModelWithFormControl}]}}}return ee.\u0275fac=function($){return new($||ee)},ee.\u0275mod=m.oAB({type:ee}),ee.\u0275inj=m.cJS({imports:[Uo]}),ee})();class Co extends mt{constructor(Y,$,fe){super(qe($),fn(fe,$)),this.controls=Y,this._initObservables(),this._setUpdateStrategy($),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Y){return this.controls[this._adjustIndex(Y)]}push(Y,$={}){this.controls.push(Y),this._registerControl(Y),this.updateValueAndValidity({emitEvent:$.emitEvent}),this._onCollectionChange()}insert(Y,$,fe={}){this.controls.splice(Y,0,$),this._registerControl($),this.updateValueAndValidity({emitEvent:fe.emitEvent})}removeAt(Y,$={}){let fe=this._adjustIndex(Y);fe<0&&(fe=0),this.controls[fe]&&this.controls[fe]._registerOnCollectionChange(()=>{}),this.controls.splice(fe,1),this.updateValueAndValidity({emitEvent:$.emitEvent})}setControl(Y,$,fe={}){let Pt=this._adjustIndex(Y);Pt<0&&(Pt=0),this.controls[Pt]&&this.controls[Pt]._registerOnCollectionChange(()=>{}),this.controls.splice(Pt,1),$&&(this.controls.splice(Pt,0,$),this._registerControl($)),this.updateValueAndValidity({emitEvent:fe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Y,$={}){kr(this,0,Y),Y.forEach((fe,Pt)=>{Ji(this,!1,Pt),this.at(Pt).setValue(fe,{onlySelf:!0,emitEvent:$.emitEvent})}),this.updateValueAndValidity($)}patchValue(Y,$={}){null!=Y&&(Y.forEach((fe,Pt)=>{this.at(Pt)&&this.at(Pt).patchValue(fe,{onlySelf:!0,emitEvent:$.emitEvent})}),this.updateValueAndValidity($))}reset(Y=[],$={}){this._forEachChild((fe,Pt)=>{fe.reset(Y[Pt],{onlySelf:!0,emitEvent:$.emitEvent})}),this._updatePristine($),this._updateTouched($),this.updateValueAndValidity($)}getRawValue(){return this.controls.map(Y=>Y.getRawValue())}clear(Y={}){this.controls.length<1||(this._forEachChild($=>$._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Y.emitEvent}))}_adjustIndex(Y){return Y<0?Y+this.length:Y}_syncPendingControls(){let Y=this.controls.reduce(($,fe)=>!!fe._syncPendingControls()||$,!1);return Y&&this.updateValueAndValidity({onlySelf:!0}),Y}_forEachChild(Y){this.controls.forEach(($,fe)=>{Y($,fe)})}_updateValue(){this.value=this.controls.filter(Y=>Y.enabled||this.disabled).map(Y=>Y.value)}_anyControls(Y){return this.controls.some($=>$.enabled&&Y($))}_setUpControls(){this._forEachChild(Y=>this._registerControl(Y))}_allControlsDisabled(){for(const Y of this.controls)if(Y.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Y){Y.setParent(this),Y._registerOnCollectionChange(this._onCollectionChange)}_find(Y){return this.at(Y)??null}}function Jt(ee){return!!ee&&(void 0!==ee.asyncValidators||void 0!==ee.validators||void 0!==ee.updateOn)}let Xn=(()=>{class ee{constructor(){this.useNonNullable=!1}get nonNullable(){const $=new ee;return $.useNonNullable=!0,$}group($,fe=null){const Pt=this._reduceControls($);let Fn={};return Jt(fe)?Fn=fe:null!==fe&&(Fn.validators=fe.validator,Fn.asyncValidators=fe.asyncValidator),new ze(Pt,Fn)}record($,fe=null){const Pt=this._reduceControls($);return new gn(Pt,fe)}control($,fe,Pt){let Fn={};return this.useNonNullable?(Jt(fe)?Fn=fe:(Fn.validators=fe,Fn.asyncValidators=Pt),new Ws($,{...Fn,nonNullable:!0})):new Ws($,fe,Pt)}array($,fe,Pt){const Fn=$.map(Lr=>this._createControl(Lr));return new Co(Fn,fe,Pt)}_reduceControls($){const fe={};return Object.keys($).forEach(Pt=>{fe[Pt]=this._createControl($[Pt])}),fe}_createControl($){return $ instanceof Ws||$ instanceof mt?$:Array.isArray($)?this.control($[0],$.length>1?$[1]:null,$.length>2?$[2]:null):this.control($)}}return ee.\u0275fac=function($){return new($||ee)},ee.\u0275prov=m.Yz7({token:ee,factory:ee.\u0275fac,providedIn:Er}),ee})()},3928:(In,Et,K)=>{K.d(Et,{Ps:()=>Ou});var m=K(4650),a=K(6895);let re;try{re=typeof Intl<"u"&&Intl.v8BreakIterator}catch{re=!1}let Ee=(()=>{class he{constructor(G){this._platformId=G,this.isBrowser=this._platformId?(0,a.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!re)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return he.\u0275fac=function(G){return new(G||he)(m.LFG(m.Lbi))},he.\u0275prov=m.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})();function Fs(he){return Array.isArray(he)?he:[he]}var Fr=K(7579),Eo=K(9841),bo=K(7272),wr=K(9751),qs=K(5698),so=K(9300),No=K(8372),Yr=K(4004),Na=K(8675),oo=K(4482),Ca=K(5403),Qr=K(8421),ao=K(5032);function Br(he){return(0,oo.e)((j,G)=>{(0,Qr.Xf)(he).subscribe((0,Ca.x)(G,()=>G.complete(),ao.Z)),!G.closed&&j.subscribe(G)})}const Jr=new Set;let ls,Ai=(()=>{class he{constructor(G){this._platform=G,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Rr}matchMedia(G){return(this._platform.WEBKIT||this._platform.BLINK)&&function go(he){if(!Jr.has(he))try{ls||(ls=document.createElement("style"),ls.setAttribute("type","text/css"),document.head.appendChild(ls)),ls.sheet&&(ls.sheet.insertRule(`@media ${he} {body{ }}`,0),Jr.add(he))}catch(j){console.error(j)}}(G),this._matchMedia(G)}}return he.\u0275fac=function(G){return new(G||he)(m.LFG(Ee))},he.\u0275prov=m.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})();function Rr(he){return{matches:"all"===he||""===he,media:he,addListener:()=>{},removeListener:()=>{}}}let Po=(()=>{class he{constructor(G,ye){this._mediaMatcher=G,this._zone=ye,this._queries=new Map,this._destroySubject=new Fr.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(G){return lo(Fs(G)).some(Je=>this._registerQuery(Je).mql.matches)}observe(G){const Je=lo(Fs(G)).map(_n=>this._registerQuery(_n).observable);let Nt=(0,Eo.a)(Je);return Nt=(0,bo.z)(Nt.pipe((0,qs.q)(1)),Nt.pipe(function Ra(he){return(0,so.h)((j,G)=>he<=G)}(1),(0,No.b)(0))),Nt.pipe((0,Yr.U)(_n=>{const Ci={matches:!1,breakpoints:{}};return _n.forEach(({matches:ei,query:xs})=>{Ci.matches=Ci.matches||ei,Ci.breakpoints[xs]=ei}),Ci}))}_registerQuery(G){if(this._queries.has(G))return this._queries.get(G);const ye=this._mediaMatcher.matchMedia(G),Nt={observable:new wr.y(_n=>{const Ci=ei=>this._zone.run(()=>_n.next(ei));return ye.addListener(Ci),()=>{ye.removeListener(Ci)}}).pipe((0,Na.O)(ye),(0,Yr.U)(({matches:_n})=>({query:G,matches:_n})),Br(this._destroySubject)),mql:ye};return this._queries.set(G,Nt),Nt}}return he.\u0275fac=function(G){return new(G||he)(m.LFG(Ai),m.LFG(m.R0b))},he.\u0275prov=m.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})();function lo(he){return he.map(j=>j.split(",")).reduce((j,G)=>j.concat(G)).map(j=>j.trim())}const cl="cdk-high-contrast-black-on-white",B="cdk-high-contrast-white-on-black",oe="cdk-high-contrast-active";let W=(()=>{class he{constructor(G,ye){this._platform=G,this._document=ye,this._breakpointSubscription=(0,m.f3M)(Po).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const G=this._document.createElement("div");G.style.backgroundColor="rgb(1,2,3)",G.style.position="absolute",this._document.body.appendChild(G);const ye=this._document.defaultView||window,Je=ye&&ye.getComputedStyle?ye.getComputedStyle(G):null,Nt=(Je&&Je.backgroundColor||"").replace(/ /g,"");switch(G.remove(),Nt){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const G=this._document.body.classList;G.remove(oe,cl,B),this._hasCheckedHighContrastMode=!0;const ye=this.getHighContrastMode();1===ye?G.add(oe,cl):2===ye&&G.add(oe,B)}}}return he.\u0275fac=function(G){return new(G||he)(m.LFG(Ee),m.LFG(a.K0))},he.\u0275prov=m.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})(),tr=(()=>{class he{}return he.\u0275fac=function(G){return new(G||he)},he.\u0275mod=m.oAB({type:he}),he.\u0275inj=m.cJS({}),he})();const Zo=new m.OlP("mat-sanity-checks",{providedIn:"root",factory:function Qs(){return!0}});let _a=(()=>{class he{constructor(G,ye,Je){this._sanityChecks=ye,this._document=Je,this._hasDoneGlobalChecks=!1,G._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(G){return!function Be(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[G])}}return he.\u0275fac=function(G){return new(G||he)(m.LFG(W),m.LFG(Zo,8),m.LFG(a.K0))},he.\u0275mod=m.oAB({type:he}),he.\u0275inj=m.cJS({imports:[tr,tr]}),he})();K(9646),K(2843),K(4128),K(8505),K(262),K(8746),K(3099),K(4351),K(1481);let Ou=(()=>{class he{}return he.\u0275fac=function(G){return new(G||he)},he.\u0275mod=m.oAB({type:he}),he.\u0275inj=m.cJS({imports:[_a,_a]}),he})()},1481:(In,Et,K)=>{K.d(Et,{Dx:()=>_r,H7:()=>jt,b2:()=>Vi,q6:()=>Li,se:()=>yt});var m=K(6895),a=K(4650);class re extends m.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ee extends re{static makeCurrent(){(0,m.HT)(new Ee)}onAndCancel(Le,Ce,dt){return Le.addEventListener(Ce,dt,!1),()=>{Le.removeEventListener(Ce,dt,!1)}}dispatchEvent(Le,Ce){Le.dispatchEvent(Ce)}remove(Le){Le.parentNode&&Le.parentNode.removeChild(Le)}createElement(Le,Ce){return(Ce=Ce||this.getDefaultDocument()).createElement(Le)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Le){return Le.nodeType===Node.ELEMENT_NODE}isShadowRoot(Le){return Le instanceof DocumentFragment}getGlobalEventTarget(Le,Ce){return"window"===Ce?window:"document"===Ce?Le:"body"===Ce?Le.body:null}getBaseHref(Le){const Ce=function Ae(){return We=We||document.querySelector("base"),We?We.getAttribute("href"):null}();return null==Ce?null:function xe(Pe){Re=Re||document.createElement("a"),Re.setAttribute("href",Pe);const Le=Re.pathname;return"/"===Le.charAt(0)?Le:`/${Le}`}(Ce)}resetBaseElement(){We=null}getUserAgent(){return window.navigator.userAgent}getCookie(Le){return(0,m.Mx)(document.cookie,Le)}}let Re,We=null;const tt=new a.OlP("TRANSITION_ID"),Ie=[{provide:a.ip1,useFactory:function Me(Pe,Le,Ce){return()=>{Ce.get(a.CZH).donePromise.then(()=>{const dt=(0,m.q)(),Ct=Le.querySelectorAll(`style[ng-transition="${Pe}"]`);for(let vn=0;vn<Ct.length;vn++)dt.remove(Ct[vn])})}},deps:[tt,m.K0,a.zs3],multi:!0}];let Mt=(()=>{class Pe{build(){return new XMLHttpRequest}}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)},Pe.\u0275prov=a.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();const ct=new a.OlP("EventManagerPlugins");let wt=(()=>{class Pe{constructor(Ce,dt){this._zone=dt,this._eventNameToPlugin=new Map,Ce.forEach(Ct=>Ct.manager=this),this._plugins=Ce.slice().reverse()}addEventListener(Ce,dt,Ct){return this._findPluginFor(dt).addEventListener(Ce,dt,Ct)}addGlobalEventListener(Ce,dt,Ct){return this._findPluginFor(dt).addGlobalEventListener(Ce,dt,Ct)}getZone(){return this._zone}_findPluginFor(Ce){const dt=this._eventNameToPlugin.get(Ce);if(dt)return dt;const Ct=this._plugins;for(let vn=0;vn<Ct.length;vn++){const wi=Ct[vn];if(wi.supports(Ce))return this._eventNameToPlugin.set(Ce,wi),wi}throw new Error(`No event manager plugin found for event ${Ce}`)}}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)(a.LFG(ct),a.LFG(a.R0b))},Pe.\u0275prov=a.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();class Wt{constructor(Le){this._doc=Le}addGlobalEventListener(Le,Ce,dt){const Ct=(0,m.q)().getGlobalEventTarget(this._doc,Le);if(!Ct)throw new Error(`Unsupported event target ${Ct} for event ${Ce}`);return this.addEventListener(Ct,Ce,dt)}}let Dt=(()=>{class Pe{constructor(){this._stylesSet=new Set}addStyles(Ce){const dt=new Set;Ce.forEach(Ct=>{this._stylesSet.has(Ct)||(this._stylesSet.add(Ct),dt.add(Ct))}),this.onStylesAdded(dt)}onStylesAdded(Ce){}getAllStyles(){return Array.from(this._stylesSet)}}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)},Pe.\u0275prov=a.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})(),vt=(()=>{class Pe extends Dt{constructor(Ce){super(),this._doc=Ce,this._hostNodes=new Map,this._hostNodes.set(Ce.head,[])}_addStylesToHost(Ce,dt,Ct){Ce.forEach(vn=>{const wi=this._doc.createElement("style");wi.textContent=vn,Ct.push(dt.appendChild(wi))})}addHost(Ce){const dt=[];this._addStylesToHost(this._stylesSet,Ce,dt),this._hostNodes.set(Ce,dt)}removeHost(Ce){const dt=this._hostNodes.get(Ce);dt&&dt.forEach(rt),this._hostNodes.delete(Ce)}onStylesAdded(Ce){this._hostNodes.forEach((dt,Ct)=>{this._addStylesToHost(Ce,Ct,dt)})}ngOnDestroy(){this._hostNodes.forEach(Ce=>Ce.forEach(rt))}}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)(a.LFG(m.K0))},Pe.\u0275prov=a.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();function rt(Pe){(0,m.q)().remove(Pe)}const qt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Be=/%COMP%/g;function Ve(Pe,Le,Ce){for(let dt=0;dt<Le.length;dt++){let Ct=Le[dt];Array.isArray(Ct)?Ve(Pe,Ct,Ce):(Ct=Ct.replace(Be,Pe),Ce.push(Ct))}return Ce}function it(Pe){return Le=>{if("__ngUnwrap__"===Le)return Pe;!1===Pe(Le)&&(Le.preventDefault(),Le.returnValue=!1)}}let yt=(()=>{class Pe{constructor(Ce,dt,Ct){this.eventManager=Ce,this.sharedStylesHost=dt,this.appId=Ct,this.rendererByCompId=new Map,this.defaultRenderer=new Yt(Ce)}createRenderer(Ce,dt){if(!Ce||!dt)return this.defaultRenderer;switch(dt.encapsulation){case a.ifc.Emulated:{let Ct=this.rendererByCompId.get(dt.id);return Ct||(Ct=new Nn(this.eventManager,this.sharedStylesHost,dt,this.appId),this.rendererByCompId.set(dt.id,Ct)),Ct.applyToHost(Ce),Ct}case 1:case a.ifc.ShadowDom:return new $t(this.eventManager,this.sharedStylesHost,Ce,dt);default:if(!this.rendererByCompId.has(dt.id)){const Ct=Ve(dt.id,dt.styles,[]);this.sharedStylesHost.addStyles(Ct),this.rendererByCompId.set(dt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)(a.LFG(wt),a.LFG(vt),a.LFG(a.AFp))},Pe.\u0275prov=a.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();class Yt{constructor(Le){this.eventManager=Le,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Le,Ce){return Ce?document.createElementNS(qt[Ce]||Ce,Le):document.createElement(Le)}createComment(Le){return document.createComment(Le)}createText(Le){return document.createTextNode(Le)}appendChild(Le,Ce){(On(Le)?Le.content:Le).appendChild(Ce)}insertBefore(Le,Ce,dt){Le&&(On(Le)?Le.content:Le).insertBefore(Ce,dt)}removeChild(Le,Ce){Le&&Le.removeChild(Ce)}selectRootElement(Le,Ce){let dt="string"==typeof Le?document.querySelector(Le):Le;if(!dt)throw new Error(`The selector "${Le}" did not match any elements`);return Ce||(dt.textContent=""),dt}parentNode(Le){return Le.parentNode}nextSibling(Le){return Le.nextSibling}setAttribute(Le,Ce,dt,Ct){if(Ct){Ce=Ct+":"+Ce;const vn=qt[Ct];vn?Le.setAttributeNS(vn,Ce,dt):Le.setAttribute(Ce,dt)}else Le.setAttribute(Ce,dt)}removeAttribute(Le,Ce,dt){if(dt){const Ct=qt[dt];Ct?Le.removeAttributeNS(Ct,Ce):Le.removeAttribute(`${dt}:${Ce}`)}else Le.removeAttribute(Ce)}addClass(Le,Ce){Le.classList.add(Ce)}removeClass(Le,Ce){Le.classList.remove(Ce)}setStyle(Le,Ce,dt,Ct){Ct&(a.JOm.DashCase|a.JOm.Important)?Le.style.setProperty(Ce,dt,Ct&a.JOm.Important?"important":""):Le.style[Ce]=dt}removeStyle(Le,Ce,dt){dt&a.JOm.DashCase?Le.style.removeProperty(Ce):Le.style[Ce]=""}setProperty(Le,Ce,dt){Le[Ce]=dt}setValue(Le,Ce){Le.nodeValue=Ce}listen(Le,Ce,dt){return"string"==typeof Le?this.eventManager.addGlobalEventListener(Le,Ce,it(dt)):this.eventManager.addEventListener(Le,Ce,it(dt))}}function On(Pe){return"TEMPLATE"===Pe.tagName&&void 0!==Pe.content}class Nn extends Yt{constructor(Le,Ce,dt,Ct){super(Le),this.component=dt;const vn=Ve(Ct+"-"+dt.id,dt.styles,[]);Ce.addStyles(vn),this.contentAttr=function Q(Pe){return"_ngcontent-%COMP%".replace(Be,Pe)}(Ct+"-"+dt.id),this.hostAttr=function ft(Pe){return"_nghost-%COMP%".replace(Be,Pe)}(Ct+"-"+dt.id)}applyToHost(Le){super.setAttribute(Le,this.hostAttr,"")}createElement(Le,Ce){const dt=super.createElement(Le,Ce);return super.setAttribute(dt,this.contentAttr,""),dt}}class $t extends Yt{constructor(Le,Ce,dt,Ct){super(Le),this.sharedStylesHost=Ce,this.hostEl=dt,this.shadowRoot=dt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const vn=Ve(Ct.id,Ct.styles,[]);for(let wi=0;wi<vn.length;wi++){const Di=document.createElement("style");Di.textContent=vn[wi],this.shadowRoot.appendChild(Di)}}nodeOrShadowRoot(Le){return Le===this.hostEl?this.shadowRoot:Le}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Le,Ce){return super.appendChild(this.nodeOrShadowRoot(Le),Ce)}insertBefore(Le,Ce,dt){return super.insertBefore(this.nodeOrShadowRoot(Le),Ce,dt)}removeChild(Le,Ce){return super.removeChild(this.nodeOrShadowRoot(Le),Ce)}parentNode(Le){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Le)))}}let ci=(()=>{class Pe extends Wt{constructor(Ce){super(Ce)}supports(Ce){return!0}addEventListener(Ce,dt,Ct){return Ce.addEventListener(dt,Ct,!1),()=>this.removeEventListener(Ce,dt,Ct)}removeEventListener(Ce,dt,Ct){return Ce.removeEventListener(dt,Ct)}}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)(a.LFG(m.K0))},Pe.\u0275prov=a.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();const Bn=["alt","control","meta","shift"],St={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vt={alt:Pe=>Pe.altKey,control:Pe=>Pe.ctrlKey,meta:Pe=>Pe.metaKey,shift:Pe=>Pe.shiftKey};let Ue=(()=>{class Pe extends Wt{constructor(Ce){super(Ce)}supports(Ce){return null!=Pe.parseEventName(Ce)}addEventListener(Ce,dt,Ct){const vn=Pe.parseEventName(dt),wi=Pe.eventCallback(vn.fullKey,Ct,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,m.q)().onAndCancel(Ce,vn.domEventName,wi))}static parseEventName(Ce){const dt=Ce.toLowerCase().split("."),Ct=dt.shift();if(0===dt.length||"keydown"!==Ct&&"keyup"!==Ct)return null;const vn=Pe._normalizeKey(dt.pop());let wi="",Di=dt.indexOf("code");if(Di>-1&&(dt.splice(Di,1),wi="code."),Bn.forEach(yr=>{const bn=dt.indexOf(yr);bn>-1&&(dt.splice(bn,1),wi+=yr+".")}),wi+=vn,0!=dt.length||0===vn.length)return null;const dr={};return dr.domEventName=Ct,dr.fullKey=wi,dr}static matchEventFullKeyCode(Ce,dt){let Ct=St[Ce.key]||Ce.key,vn="";return dt.indexOf("code.")>-1&&(Ct=Ce.code,vn="code."),!(null==Ct||!Ct)&&(Ct=Ct.toLowerCase()," "===Ct?Ct="space":"."===Ct&&(Ct="dot"),Bn.forEach(wi=>{wi!==Ct&&(0,Vt[wi])(Ce)&&(vn+=wi+".")}),vn+=Ct,vn===dt)}static eventCallback(Ce,dt,Ct){return vn=>{Pe.matchEventFullKeyCode(vn,Ce)&&Ct.runGuarded(()=>dt(vn))}}static _normalizeKey(Ce){return"esc"===Ce?"escape":Ce}}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)(a.LFG(m.K0))},Pe.\u0275prov=a.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();const Li=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:m.bD},{provide:a.g9A,useValue:function bi(){Ee.makeCurrent()},multi:!0},{provide:m.K0,useFactory:function ai(){return(0,a.RDi)(document),document},deps:[]}]),vi=new a.OlP(""),Qt=[{provide:a.rWj,useClass:class Ge{addToWindow(Le){a.dqk.getAngularTestability=(dt,Ct=!0)=>{const vn=Le.findTestabilityInTree(dt,Ct);if(null==vn)throw new Error("Could not find testability for element.");return vn},a.dqk.getAllAngularTestabilities=()=>Le.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>Le.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(dt=>{const Ct=a.dqk.getAllAngularTestabilities();let vn=Ct.length,wi=!1;const Di=function(dr){wi=wi||dr,vn--,0==vn&&dt(wi)};Ct.forEach(function(dr){dr.whenStable(Di)})})}findTestabilityInTree(Le,Ce,dt){return null==Ce?null:Le.getTestability(Ce)??(dt?(0,m.q)().isShadowRoot(Ce)?this.findTestabilityInTree(Le,Ce.host,!0):this.findTestabilityInTree(Le,Ce.parentElement,!0):null)}},deps:[]},{provide:a.lri,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]}],Ni=[{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function zi(){return new a.qLn},deps:[]},{provide:ct,useClass:ci,multi:!0,deps:[m.K0,a.R0b,a.Lbi]},{provide:ct,useClass:Ue,multi:!0,deps:[m.K0]},{provide:yt,useClass:yt,deps:[wt,vt,a.AFp]},{provide:a.FYo,useExisting:yt},{provide:Dt,useExisting:vt},{provide:vt,useClass:vt,deps:[m.K0]},{provide:wt,useClass:wt,deps:[ct,a.R0b]},{provide:m.JF,useClass:Mt,deps:[]},[]];let Vi=(()=>{class Pe{constructor(Ce){}static withServerTransition(Ce){return{ngModule:Pe,providers:[{provide:a.AFp,useValue:Ce.appId},{provide:tt,useExisting:a.AFp},Ie]}}}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)(a.LFG(vi,12))},Pe.\u0275mod=a.oAB({type:Pe}),Pe.\u0275inj=a.cJS({providers:[...Ni,...Qt],imports:[m.ez,a.hGG]}),Pe})(),_r=(()=>{class Pe{constructor(Ce){this._doc=Ce}getTitle(){return this._doc.title}setTitle(Ce){this._doc.title=Ce||""}}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)(a.LFG(m.K0))},Pe.\u0275prov=a.Yz7({token:Pe,factory:function(Ce){let dt=null;return dt=Ce?new Ce:function Tr(){return new _r((0,a.LFG)(m.K0))}(),dt},providedIn:"root"}),Pe})();typeof window<"u"&&window;let jt=(()=>{class Pe{}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)},Pe.\u0275prov=a.Yz7({token:Pe,factory:function(Ce){let dt=null;return dt=Ce?new(Ce||Pe):a.LFG(Gn),dt},providedIn:"root"}),Pe})(),Gn=(()=>{class Pe extends jt{constructor(Ce){super(),this._doc=Ce}sanitize(Ce,dt){if(null==dt)return null;switch(Ce){case a.q3G.NONE:return dt;case a.q3G.HTML:return(0,a.qzn)(dt,"HTML")?(0,a.z3N)(dt):(0,a.EiD)(this._doc,String(dt)).toString();case a.q3G.STYLE:return(0,a.qzn)(dt,"Style")?(0,a.z3N)(dt):dt;case a.q3G.SCRIPT:if((0,a.qzn)(dt,"Script"))return(0,a.z3N)(dt);throw new Error("unsafe value used in a script context");case a.q3G.URL:return(0,a.qzn)(dt,"URL")?(0,a.z3N)(dt):(0,a.mCW)(String(dt));case a.q3G.RESOURCE_URL:if((0,a.qzn)(dt,"ResourceURL"))return(0,a.z3N)(dt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Ce} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Ce){return(0,a.JVY)(Ce)}bypassSecurityTrustStyle(Ce){return(0,a.L6k)(Ce)}bypassSecurityTrustScript(Ce){return(0,a.eBb)(Ce)}bypassSecurityTrustUrl(Ce){return(0,a.LAX)(Ce)}bypassSecurityTrustResourceUrl(Ce){return(0,a.pB0)(Ce)}}return Pe.\u0275fac=function(Ce){return new(Ce||Pe)(a.LFG(m.K0))},Pe.\u0275prov=a.Yz7({token:Pe,factory:function(Ce){let dt=null;return dt=Ce?new Ce:function gn(Pe){return new Gn(Pe.get(m.K0))}(a.LFG(a.zs3)),dt},providedIn:"root"}),Pe})()},1211:(In,Et,K)=>{K.d(Et,{gz:()=>as,F0:()=>Ln,rH:()=>Ut,yS:()=>an,Bz:()=>il,lC:()=>Ai});var m=K(4650),a=K(8996),re=K(9646),Ee=K(7579);class We extends Ee.x{constructor(R){super(),this._value=R}get value(){return this.getValue()}_subscribe(R){const D=super._subscribe(R);return!D.closed&&R.next(this._value),D}getValue(){const{hasError:R,thrownError:D,_value:V}=this;if(R)throw D;return this._throwIfClosed(),V}next(R){super.next(this._value=R)}}var Ae=K(6805),Re=K(9841),xe=K(7272),tt=K(9751),Me=K(8421);function Ie(C){return new tt.y(R=>{(0,Me.Xf)(C()).subscribe(R)})}var Ge=K(9635),Mt=K(2843),ct=K(515),wt=K(727),Wt=K(4482),Dt=K(5403);function vt(){return(0,Wt.e)((C,R)=>{let D=null;C._refCount++;const V=(0,Dt.x)(R,void 0,void 0,void 0,()=>{if(!C||C._refCount<=0||0<--C._refCount)return void(D=null);const J=C._connection,pe=D;D=null,J&&(!pe||J===pe)&&J.unsubscribe(),R.unsubscribe()});C.subscribe(V),V.closed||(D=C.connect())})}class rt extends tt.y{constructor(R,D){super(),this.source=R,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,Wt.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new wt.w0;const D=this.getSubject();R.add(this.source.subscribe((0,Dt.x)(D,void 0,()=>{this._teardown(),D.complete()},V=>{this._teardown(),D.error(V)},()=>this._teardown()))),R.closed&&(this._connection=null,R=wt.w0.EMPTY)}return R}refCount(){return vt()(this)}}var qt=K(6895),Be=K(4004),ve=K(3900),nt=K(5698),Qe=K(8675),De=K(9300),Q=K(5577),ft=K(590),Ve=K(4351),it=K(8505),bt=K(262),yt=K(5026);function Yt(C){return C<=0?()=>ct.E:(0,Wt.e)((R,D)=>{let V=[];R.subscribe((0,Dt.x)(D,J=>{V.push(J),C<V.length&&V.shift()},()=>{for(const J of V)D.next(J);D.complete()},void 0,()=>{V=null}))})}var on=K(8068),pn=K(6590),On=K(4671);function Nn(C,R){const D=arguments.length>=2;return V=>V.pipe(C?(0,De.h)((J,pe)=>C(J,pe,V)):On.y,Yt(1),D?(0,pn.d)(R):(0,on.T)(()=>new Ae.K))}var Bn=K(8746),St=K(8189),Vt=K(1481);const Ue="primary",_t=Symbol("RouteTitle");class ln{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const D=this.params[R];return Array.isArray(D)?D[0]:D}return null}getAll(R){if(this.has(R)){const D=this.params[R];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function Hn(C){return new ln(C)}function Gi(C,R,D){const V=D.path.split("/");if(V.length>C.length||"full"===D.pathMatch&&(R.hasChildren()||V.length<C.length))return null;const J={};for(let pe=0;pe<V.length;pe++){const Ne=V[pe],Ze=C[pe];if(Ne.startsWith(":"))J[Ne.substring(1)]=Ze;else if(Ne!==Ze.path)return null}return{consumed:C.slice(0,V.length),posParams:J}}function bi(C,R){const D=C?Object.keys(C):void 0,V=R?Object.keys(R):void 0;if(!D||!V||D.length!=V.length)return!1;let J;for(let pe=0;pe<D.length;pe++)if(J=D[pe],!zi(C[J],R[J]))return!1;return!0}function zi(C,R){if(Array.isArray(C)&&Array.isArray(R)){if(C.length!==R.length)return!1;const D=[...C].sort(),V=[...R].sort();return D.every((J,pe)=>V[pe]===J)}return C===R}function ai(C){return Array.prototype.concat.apply([],C)}function Hi(C){return C.length>0?C[C.length-1]:null}function vi(C,R){for(const D in C)C.hasOwnProperty(D)&&R(C[D],D)}function Qt(C){return(0,m.CqO)(C)?C:(0,m.QGY)(C)?(0,a.D)(Promise.resolve(C)):(0,re.of)(C)}const Yi={exact:function _r(C,R,D){if(!or(C.segments,R.segments)||!fi(C.segments,R.segments,D)||C.numberOfChildren!==R.numberOfChildren)return!1;for(const V in R.children)if(!C.children[V]||!_r(C.children[V],R.children[V],D))return!1;return!0},subset:zn},Kr={exact:function Tr(C,R){return bi(C,R)},subset:function Qi(C,R){return Object.keys(R).length<=Object.keys(C).length&&Object.keys(R).every(D=>zi(C[D],R[D]))},ignored:()=>!0};function sr(C,R,D){return Yi[D.paths](C.root,R.root,D.matrixParams)&&Kr[D.queryParams](C.queryParams,R.queryParams)&&!("exact"===D.fragment&&C.fragment!==R.fragment)}function zn(C,R,D){return $n(C,R,R.segments,D)}function $n(C,R,D,V){if(C.segments.length>D.length){const J=C.segments.slice(0,D.length);return!(!or(J,D)||R.hasChildren()||!fi(J,D,V))}if(C.segments.length===D.length){if(!or(C.segments,D)||!fi(C.segments,D,V))return!1;for(const J in R.children)if(!C.children[J]||!zn(C.children[J],R.children[J],V))return!1;return!0}{const J=D.slice(0,C.segments.length),pe=D.slice(C.segments.length);return!!(or(C.segments,J)&&fi(C.segments,J,V)&&C.children[Ue])&&$n(C.children[Ue],R,pe,V)}}function fi(C,R,D){return R.every((V,J)=>Kr[D](C[J].parameters,V.parameters))}class Dr{constructor(R,D,V){this.root=R,this.queryParams=D,this.fragment=V}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return ot.serialize(this)}}class An{constructor(R,D){this.segments=R,this.children=D,this.parent=null,vi(D,(V,J)=>V.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ke(this)}}class Ui{constructor(R,D){this.path=R,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return Ji(this)}}function or(C,R){return C.length===R.length&&C.every((D,V)=>D.path===R[V].path)}let gs=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=m.Yz7({token:C,factory:function(){return new qn},providedIn:"root"}),C})();class qn{parse(R){const D=new Pe(R);return new Dr(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(R){const D=`/${je(R.root,!0)}`,V=function mt(C){const R=Object.keys(C).map(D=>{const V=C[D];return Array.isArray(V)?V.map(J=>`${qe(D)}=${qe(J)}`).join("&"):`${qe(D)}=${qe(V)}`}).filter(D=>!!D);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${D}${V}${"string"==typeof R.fragment?`#${function Kt(C){return encodeURI(C)}(R.fragment)}`:""}`}}const ot=new qn;function Ke(C){return C.segments.map(R=>Ji(R)).join("/")}function je(C,R){if(!C.hasChildren())return Ke(C);if(R){const D=C.children[Ue]?je(C.children[Ue],!1):"",V=[];return vi(C.children,(J,pe)=>{pe!==Ue&&V.push(`${pe}:${je(J,!1)}`)}),V.length>0?`${D}(${V.join("//")})`:D}{const D=function li(C,R){let D=[];return vi(C.children,(V,J)=>{J===Ue&&(D=D.concat(R(V,J)))}),vi(C.children,(V,J)=>{J!==Ue&&(D=D.concat(R(V,J)))}),D}(C,(V,J)=>J===Ue?[je(C.children[Ue],!1)]:[`${J}:${je(V,!1)}`]);return 1===Object.keys(C.children).length&&null!=C.children[Ue]?`${Ke(C)}/${D[0]}`:`${Ke(C)}/(${D.join("//")})`}}function et(C){return encodeURIComponent(C).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qe(C){return et(C).replace(/%3B/gi,";")}function fn(C){return et(C).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xn(C){return decodeURIComponent(C)}function Bi(C){return xn(C.replace(/\+/g,"%20"))}function Ji(C){return`${fn(C.path)}${function kr(C){return Object.keys(C).map(R=>`;${fn(R)}=${fn(C[R])}`).join("")}(C.parameters)}`}const ze=/^[^\/()?;=#]+/;function Xe(C){const R=C.match(ze);return R?R[0]:""}const jt=/^[^=?&#]+/,Gn=/^[^&#]+/;class Pe{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new An([],{}):new An([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let V={};return this.peekStartsWith("(")&&(V=this.parseParens(!1)),(R.length>0||Object.keys(D).length>0)&&(V[Ue]=new An(R,D)),V}parseSegment(){const R=Xe(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(R),new Ui(xn(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const D=Xe(this.remaining);if(!D)return;this.capture(D);let V="";if(this.consumeOptional("=")){const J=Xe(this.remaining);J&&(V=J,this.capture(V))}R[xn(D)]=xn(V)}parseQueryParam(R){const D=function gn(C){const R=C.match(jt);return R?R[0]:""}(this.remaining);if(!D)return;this.capture(D);let V="";if(this.consumeOptional("=")){const Ne=function Zn(C){const R=C.match(Gn);return R?R[0]:""}(this.remaining);Ne&&(V=Ne,this.capture(V))}const J=Bi(D),pe=Bi(V);if(R.hasOwnProperty(J)){let Ne=R[J];Array.isArray(Ne)||(Ne=[Ne],R[J]=Ne),Ne.push(pe)}else R[J]=pe}parseParens(R){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const V=Xe(this.remaining),J=this.remaining[V.length];if("/"!==J&&")"!==J&&";"!==J)throw new m.vHH(4010,!1);let pe;V.indexOf(":")>-1?(pe=V.slice(0,V.indexOf(":")),this.capture(pe),this.capture(":")):R&&(pe=Ue);const Ne=this.parseChildren();D[pe]=1===Object.keys(Ne).length?Ne[Ue]:new An([],Ne),this.consumeOptional("//")}return D}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new m.vHH(4011,!1)}}function Le(C){return C.segments.length>0?new An([],{[Ue]:C}):C}function Ce(C){const R={};for(const V of Object.keys(C.children)){const pe=Ce(C.children[V]);(pe.segments.length>0||pe.hasChildren())&&(R[V]=pe)}return function dt(C){if(1===C.numberOfChildren&&C.children[Ue]){const R=C.children[Ue];return new An(C.segments.concat(R.segments),R.children)}return C}(new An(C.segments,R))}function Ct(C){return C instanceof Dr}function yr(C,R,D,V,J){if(0===D.length)return ws(R.root,R.root,R.root,V,J);const pe=function Ar(C){if("string"==typeof C[0]&&1===C.length&&"/"===C[0])return new to(!0,0,C);let R=0,D=!1;const V=C.reduce((J,pe,Ne)=>{if("object"==typeof pe&&null!=pe){if(pe.outlets){const Ze={};return vi(pe.outlets,(Lt,Cn)=>{Ze[Cn]="string"==typeof Lt?Lt.split("/"):Lt}),[...J,{outlets:Ze}]}if(pe.segmentPath)return[...J,pe.segmentPath]}return"string"!=typeof pe?[...J,pe]:0===Ne?(pe.split("/").forEach((Ze,Lt)=>{0==Lt&&"."===Ze||(0==Lt&&""===Ze?D=!0:".."===Ze?R++:""!=Ze&&J.push(Ze))}),J):[...J,pe]},[]);return new to(D,R,V)}(D);return pe.toRoot()?ws(R.root,R.root,new An([],{}),V,J):function Ne(Lt){const Cn=function Ps(C,R,D,V){if(C.isAbsolute)return new ss(R.root,!0,0);if(-1===V)return new ss(D,D===R.root,0);return function ki(C,R,D){let V=C,J=R,pe=D;for(;pe>J;){if(pe-=J,V=V.parent,!V)throw new m.vHH(4005,!1);J=V.segments.length}return new ss(V,!1,J-pe)}(D,V+(bn(C.commands[0])?0:1),C.numberOfDoubleDots)}(pe,R,C.snapshot?._urlSegment,Lt),ji=Cn.processChildren?ba(Cn.segmentGroup,Cn.index,pe.commands):Xi(Cn.segmentGroup,Cn.index,pe.commands);return ws(R.root,Cn.segmentGroup,ji,V,J)}(C.snapshot?._lastPathIndex)}function bn(C){return"object"==typeof C&&null!=C&&!C.outlets&&!C.segmentPath}function Ns(C){return"object"==typeof C&&null!=C&&C.outlets}function ws(C,R,D,V,J){let Ne,pe={};V&&vi(V,(Lt,Cn)=>{pe[Cn]=Array.isArray(Lt)?Lt.map(ji=>`${ji}`):`${Lt}`}),Ne=C===R?D:na(C,R,D);const Ze=Le(Ce(Ne));return new Dr(Ze,pe,J)}function na(C,R,D){const V={};return vi(C.children,(J,pe)=>{V[pe]=J===R?D:na(J,R,D)}),new An(C.segments,V)}class to{constructor(R,D,V){if(this.isAbsolute=R,this.numberOfDoubleDots=D,this.commands=V,R&&V.length>0&&bn(V[0]))throw new m.vHH(4003,!1);const J=V.find(Ns);if(J&&J!==Hi(V))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ss{constructor(R,D,V){this.segmentGroup=R,this.processChildren=D,this.index=V}}function Xi(C,R,D){if(C||(C=new An([],{})),0===C.segments.length&&C.hasChildren())return ba(C,R,D);const V=function ks(C,R,D){let V=0,J=R;const pe={match:!1,pathIndex:0,commandIndex:0};for(;J<C.segments.length;){if(V>=D.length)return pe;const Ne=C.segments[J],Ze=D[V];if(Ns(Ze))break;const Lt=`${Ze}`,Cn=V<D.length-1?D[V+1]:null;if(J>0&&void 0===Lt)break;if(Lt&&Cn&&"object"==typeof Cn&&void 0===Cn.outlets){if(!Ws(Lt,Cn,Ne))return pe;V+=2}else{if(!Ws(Lt,{},Ne))return pe;V++}J++}return{match:!0,pathIndex:J,commandIndex:V}}(C,R,D),J=D.slice(V.commandIndex);if(V.match&&V.pathIndex<C.segments.length){const pe=new An(C.segments.slice(0,V.pathIndex),{});return pe.children[Ue]=new An(C.segments.slice(V.pathIndex),C.children),ba(pe,0,J)}return V.match&&0===J.length?new An(C.segments,{}):V.match&&!C.hasChildren()?Es(C,R,D):V.match?ba(C,0,J):Es(C,R,D)}function ba(C,R,D){if(0===D.length)return new An(C.segments,{});{const V=function po(C){return Ns(C[0])?C[0].outlets:{[Ue]:C}}(D),J={};return vi(V,(pe,Ne)=>{"string"==typeof pe&&(pe=[pe]),null!==pe&&(J[Ne]=Xi(C.children[Ne],R,pe))}),vi(C.children,(pe,Ne)=>{void 0===V[Ne]&&(J[Ne]=pe)}),new An(C.segments,J)}}function Es(C,R,D){const V=C.segments.slice(0,R);let J=0;for(;J<D.length;){const pe=D[J];if(Ns(pe)){const Lt=zs(pe.outlets);return new An(V,Lt)}if(0===J&&bn(D[0])){V.push(new Ui(C.segments[R].path,Ts(D[0]))),J++;continue}const Ne=Ns(pe)?pe.outlets[Ue]:`${pe}`,Ze=J<D.length-1?D[J+1]:null;Ne&&Ze&&bn(Ze)?(V.push(new Ui(Ne,Ts(Ze))),J+=2):(V.push(new Ui(Ne,{})),J++)}return new An(V,{})}function zs(C){const R={};return vi(C,(D,V)=>{"string"==typeof D&&(D=[D]),null!==D&&(R[V]=Es(new An([],{}),0,D))}),R}function Ts(C){const R={};return vi(C,(D,V)=>R[V]=`${D}`),R}function Ws(C,R,D){return C==D.path&&bi(R,D.parameters)}class Ds{constructor(R,D){this.id=R,this.url=D}}class Or extends Ds{constructor(R,D,V="imperative",J=null){super(R,D),this.type=0,this.navigationTrigger=V,this.restoredState=J}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mo extends Ds{constructor(R,D,V){super(R,D),this.urlAfterRedirects=V,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qi extends Ds{constructor(R,D,V,J){super(R,D),this.reason=V,this.code=J,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ur extends Ds{constructor(R,D,V,J){super(R,D),this.error=V,this.target=J,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Oo extends Ds{constructor(R,D,V,J){super(R,D),this.urlAfterRedirects=V,this.state=J,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ia extends Ds{constructor(R,D,V,J){super(R,D),this.urlAfterRedirects=V,this.state=J,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ko extends Ds{constructor(R,D,V,J,pe){super(R,D),this.urlAfterRedirects=V,this.state=J,this.shouldActivate=pe,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class os extends Ds{constructor(R,D,V,J){super(R,D),this.urlAfterRedirects=V,this.state=J,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ca extends Ds{constructor(R,D,V,J){super(R,D),this.urlAfterRedirects=V,this.state=J,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ll{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ro{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ia{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class io{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ks{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pt{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ut{constructor(R,D,V){this.routerEvent=R,this.position=D,this.anchor=V,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ot{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const D=this.pathFromRoot(R);return D.length>1?D[D.length-2]:null}children(R){const D=Zt(R,this._root);return D?D.children.map(V=>V.value):[]}firstChild(R){const D=Zt(R,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(R){const D=en(R,this._root);return D.length<2?[]:D[D.length-2].children.map(J=>J.value).filter(J=>J!==R)}pathFromRoot(R){return en(R,this._root).map(D=>D.value)}}function Zt(C,R){if(C===R.value)return R;for(const D of R.children){const V=Zt(C,D);if(V)return V}return null}function en(C,R){if(C===R.value)return[R];for(const D of R.children){const V=en(C,D);if(V.length)return V.unshift(R),V}return[]}class si{constructor(R,D){this.value=R,this.children=D}toString(){return`TreeNode(${this.value})`}}function ui(C){const R={};return C&&C.children.forEach(D=>R[D.value.outlet]=D),R}class ar extends Ot{constructor(R,D){super(R),this.snapshot=D,bo(this,R)}toString(){return this.snapshot.toString()}}function ro(C,R){const D=function Fs(C,R){const Ne=new Fr([],{},{},"",{},Ue,R,null,C.root,-1,{});return new Eo("",new si(Ne,[]))}(C,R),V=new We([new Ui("",{})]),J=new We({}),pe=new We({}),Ne=new We({}),Ze=new We(""),Lt=new as(V,J,Ne,Ze,pe,Ue,R,D.root);return Lt.snapshot=D.root,new ar(new si(Lt,[]),D)}class as{constructor(R,D,V,J,pe,Ne,Ze,Lt){this.url=R,this.params=D,this.queryParams=V,this.fragment=J,this.data=pe,this.outlet=Ne,this.component=Ze,this.title=this.data?.pipe((0,Be.U)(Cn=>Cn[_t]))??(0,re.of)(void 0),this._futureSnapshot=Lt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Be.U)(R=>Hn(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Be.U)(R=>Hn(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vr(C,R="emptyOnly"){const D=C.pathFromRoot;let V=0;if("always"!==R)for(V=D.length-1;V>=1;){const J=D[V],pe=D[V-1];if(J.routeConfig&&""===J.routeConfig.path)V--;else{if(pe.component)break;V--}}return function gi(C){return C.reduce((R,D)=>({params:{...R.params,...D.params},data:{...R.data,...D.data},resolve:{...D.data,...R.resolve,...D.routeConfig?.data,...D._resolvedData}}),{params:{},data:{},resolve:{}})}(D.slice(V))}class Fr{constructor(R,D,V,J,pe,Ne,Ze,Lt,Cn,ji,Kn,$i){this.url=R,this.params=D,this.queryParams=V,this.fragment=J,this.data=pe,this.outlet=Ne,this.component=Ze,this.title=this.data?.[_t],this.routeConfig=Lt,this._urlSegment=Cn,this._lastPathIndex=ji,this._correctedLastPathIndex=$i??ji,this._resolve=Kn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(V=>V.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Eo extends Ot{constructor(R,D){super(D),this.url=R,bo(this,D)}toString(){return wr(this._root)}}function bo(C,R){R.value._routerState=C,R.children.forEach(D=>bo(C,D))}function wr(C){const R=C.children.length>0?` { ${C.children.map(wr).join(", ")} } `:"";return`${C.value}${R}`}function qs(C){if(C.snapshot){const R=C.snapshot,D=C._futureSnapshot;C.snapshot=D,bi(R.queryParams,D.queryParams)||C.queryParams.next(D.queryParams),R.fragment!==D.fragment&&C.fragment.next(D.fragment),bi(R.params,D.params)||C.params.next(D.params),function Ei(C,R){if(C.length!==R.length)return!1;for(let D=0;D<C.length;++D)if(!bi(C[D],R[D]))return!1;return!0}(R.url,D.url)||C.url.next(D.url),bi(R.data,D.data)||C.data.next(D.data)}else C.snapshot=C._futureSnapshot,C.data.next(C._futureSnapshot.data)}function so(C,R){const D=bi(C.params,R.params)&&function ii(C,R){return or(C,R)&&C.every((D,V)=>bi(D.parameters,R[V].parameters))}(C.url,R.url);return D&&!(!C.parent!=!R.parent)&&(!C.parent||so(C.parent,R.parent))}function No(C,R,D){if(D&&C.shouldReuseRoute(R.value,D.value.snapshot)){const V=D.value;V._futureSnapshot=R.value;const J=function Yr(C,R,D){return R.children.map(V=>{for(const J of D.children)if(C.shouldReuseRoute(V.value,J.value.snapshot))return No(C,V,J);return No(C,V)})}(C,R,D);return new si(V,J)}{if(C.shouldAttach(R.value)){const pe=C.retrieve(R.value);if(null!==pe){const Ne=pe.route;return Ne.value._futureSnapshot=R.value,Ne.children=R.children.map(Ze=>No(C,Ze)),Ne}}const V=function Na(C){return new as(new We(C.url),new We(C.params),new We(C.queryParams),new We(C.fragment),new We(C.data),C.outlet,C.component,C)}(R.value),J=R.children.map(pe=>No(C,pe));return new si(V,J)}}const oo="ngNavigationCancelingError";function Ca(C,R){const{redirectTo:D,navigationBehaviorOptions:V}=Ct(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,J=Qr(!1,0,R);return J.url=D,J.navigationBehaviorOptions=V,J}function Qr(C,R,D){const V=new Error("NavigationCancelingError: "+(C||""));return V[oo]=!0,V.cancellationCode=R,D&&(V.url=D),V}function ao(C){return Br(C)&&Ct(C.url)}function Br(C){return C&&C[oo]}class Io{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Jr,this.attachRef=null}}let Jr=(()=>{class C{constructor(){this.contexts=new Map}onChildOutletCreated(D,V){const J=this.getOrCreateContext(D);J.outlet=V,this.contexts.set(D,J)}onChildOutletDestroyed(D){const V=this.getContext(D);V&&(V.outlet=null,V.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let V=this.getContext(D);return V||(V=new Io,this.contexts.set(D,V)),V}getContext(D){return this.contexts.get(D)||null}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const ls=!1;let Ai=(()=>{class C{constructor(D,V,J,pe,Ne){this.parentContexts=D,this.location=V,this.changeDetector=pe,this.environmentInjector=Ne,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=J||Ue,D.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const D=this.parentContexts.getContext(this.name);D&&D.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,ls);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,ls);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,ls);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,V){this.activated=D,this._activatedRoute=V,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,V){if(this.isActivated)throw new m.vHH(4013,ls);this._activatedRoute=D;const J=this.location,Ne=D._futureSnapshot.component,Ze=this.parentContexts.getOrCreateContext(this.name).children,Lt=new go(D,Ze,J.injector);if(V&&function Rr(C){return!!C.resolveComponentFactory}(V)){const Cn=V.resolveComponentFactory(Ne);this.activated=J.createComponent(Cn,J.length,Lt)}else this.activated=J.createComponent(Ne,{index:J.length,injector:Lt,environmentInjector:V??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(Jr),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},C.\u0275dir=m.lG2({type:C,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),C})();class go{constructor(R,D,V){this.route=R,this.childContexts=D,this.parent=V}get(R,D){return R===as?this.route:R===Jr?this.childContexts:this.parent.get(R,D)}}let Po=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275cmp=m.Xpm({type:C,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(D,V){1&D&&m._UZ(0,"router-outlet")},dependencies:[Ai],encapsulation:2}),C})();function lo(C,R){return C.providers&&!C._injector&&(C._injector=(0,m.MMx)(C.providers,R,`Route: ${C.path}`)),C._injector??R}function Vo(C){const R=C.children&&C.children.map(Vo),D=R?{...C,children:R}:{...C};return!D.component&&!D.loadComponent&&(R||D.loadChildren)&&D.outlet&&D.outlet!==Ue&&(D.component=Po),D}function Gr(C){return C.outlet||Ue}function ha(C,R){const D=C.filter(V=>Gr(V)===R);return D.push(...C.filter(V=>Gr(V)!==R)),D}function ur(C){if(!C)return null;if(C.routeConfig?._injector)return C.routeConfig._injector;for(let R=C.parent;R;R=R.parent){const D=R.routeConfig;if(D?._loadedInjector)return D._loadedInjector;if(D?._injector)return D._injector}return null}class Ta{constructor(R,D,V,J){this.routeReuseStrategy=R,this.futureState=D,this.currState=V,this.forwardEvent=J}activate(R){const D=this.futureState._root,V=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,V,R),qs(this.futureState.root),this.activateChildRoutes(D,V,R)}deactivateChildRoutes(R,D,V){const J=ui(D);R.children.forEach(pe=>{const Ne=pe.value.outlet;this.deactivateRoutes(pe,J[Ne],V),delete J[Ne]}),vi(J,(pe,Ne)=>{this.deactivateRouteAndItsChildren(pe,V)})}deactivateRoutes(R,D,V){const J=R.value,pe=D?D.value:null;if(J===pe)if(J.component){const Ne=V.getContext(J.outlet);Ne&&this.deactivateChildRoutes(R,D,Ne.children)}else this.deactivateChildRoutes(R,D,V);else pe&&this.deactivateRouteAndItsChildren(D,V)}deactivateRouteAndItsChildren(R,D){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,D):this.deactivateRouteAndOutlet(R,D)}detachAndStoreRouteSubtree(R,D){const V=D.getContext(R.value.outlet),J=V&&R.value.component?V.children:D,pe=ui(R);for(const Ne of Object.keys(pe))this.deactivateRouteAndItsChildren(pe[Ne],J);if(V&&V.outlet){const Ne=V.outlet.detach(),Ze=V.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:Ne,route:R,contexts:Ze})}}deactivateRouteAndOutlet(R,D){const V=D.getContext(R.value.outlet),J=V&&R.value.component?V.children:D,pe=ui(R);for(const Ne of Object.keys(pe))this.deactivateRouteAndItsChildren(pe[Ne],J);V&&V.outlet&&(V.outlet.deactivate(),V.children.onOutletDeactivated(),V.attachRef=null,V.resolver=null,V.route=null)}activateChildRoutes(R,D,V){const J=ui(D);R.children.forEach(pe=>{this.activateRoutes(pe,J[pe.value.outlet],V),this.forwardEvent(new pt(pe.value.snapshot))}),R.children.length&&this.forwardEvent(new io(R.value.snapshot))}activateRoutes(R,D,V){const J=R.value,pe=D?D.value:null;if(qs(J),J===pe)if(J.component){const Ne=V.getOrCreateContext(J.outlet);this.activateChildRoutes(R,D,Ne.children)}else this.activateChildRoutes(R,D,V);else if(J.component){const Ne=V.getOrCreateContext(J.outlet);if(this.routeReuseStrategy.shouldAttach(J.snapshot)){const Ze=this.routeReuseStrategy.retrieve(J.snapshot);this.routeReuseStrategy.store(J.snapshot,null),Ne.children.onOutletReAttached(Ze.contexts),Ne.attachRef=Ze.componentRef,Ne.route=Ze.route.value,Ne.outlet&&Ne.outlet.attach(Ze.componentRef,Ze.route.value),qs(Ze.route.value),this.activateChildRoutes(R,null,Ne.children)}else{const Ze=ur(J.snapshot),Lt=Ze?.get(m._Vd)??null;Ne.attachRef=null,Ne.route=J,Ne.resolver=Lt,Ne.injector=Ze,Ne.outlet&&Ne.outlet.activateWith(J,Ne.injector),this.activateChildRoutes(R,null,Ne.children)}}else this.activateChildRoutes(R,null,V)}}class xl{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Uo{constructor(R,D){this.component=R,this.route=D}}function _l(C,R,D){const V=C._root;return To(V,R?R._root:null,D,[V.value])}function Co(C,R){const D=Symbol(),V=R.get(C,D);return V===D?"function"!=typeof C||(0,m.Z0I)(C)?R.get(C):C:V}function To(C,R,D,V,J={canDeactivateChecks:[],canActivateChecks:[]}){const pe=ui(R);return C.children.forEach(Ne=>{(function Vs(C,R,D,V,J={canDeactivateChecks:[],canActivateChecks:[]}){const pe=C.value,Ne=R?R.value:null,Ze=D?D.getContext(C.value.outlet):null;if(Ne&&pe.routeConfig===Ne.routeConfig){const Lt=function Jt(C,R,D){if("function"==typeof D)return D(C,R);switch(D){case"pathParamsChange":return!or(C.url,R.url);case"pathParamsOrQueryParamsChange":return!or(C.url,R.url)||!bi(C.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!so(C,R)||!bi(C.queryParams,R.queryParams);default:return!so(C,R)}}(Ne,pe,pe.routeConfig.runGuardsAndResolvers);Lt?J.canActivateChecks.push(new xl(V)):(pe.data=Ne.data,pe._resolvedData=Ne._resolvedData),To(C,R,pe.component?Ze?Ze.children:null:D,V,J),Lt&&Ze&&Ze.outlet&&Ze.outlet.isActivated&&J.canDeactivateChecks.push(new Uo(Ze.outlet.component,Ne))}else Ne&&Xn(R,Ze,J),J.canActivateChecks.push(new xl(V)),To(C,null,pe.component?Ze?Ze.children:null:D,V,J)})(Ne,pe[Ne.value.outlet],D,V.concat([Ne.value]),J),delete pe[Ne.value.outlet]}),vi(pe,(Ne,Ze)=>Xn(Ne,D.getContext(Ze),J)),J}function Xn(C,R,D){const V=ui(C),J=C.value;vi(V,(pe,Ne)=>{Xn(pe,J.component?R?R.children.getContext(Ne):null:R,D)}),D.canDeactivateChecks.push(new Uo(J.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,J))}function Zs(C){return"function"==typeof C}function Lr(C){return C instanceof Ae.K||"EmptyError"===C?.name}const Ys=Symbol("INITIAL_VALUE");function cs(){return(0,ve.w)(C=>(0,Re.a)(C.map(R=>R.pipe((0,nt.q)(1),(0,Qe.O)(Ys)))).pipe((0,Be.U)(R=>{for(const D of R)if(!0!==D){if(D===Ys)return Ys;if(!1===D||D instanceof Dr)return D}return!0}),(0,De.h)(R=>R!==Ys),(0,nt.q)(1)))}function sa(C){return(0,Ge.z)((0,it.b)(R=>{if(Ct(R))throw Ca(0,R)}),(0,Be.U)(R=>!0===R))}const Ho={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function is(C,R,D,V,J){const pe=qo(C,R,D);return pe.matched?function pa(C,R,D,V){const J=R.canMatch;if(!J||0===J.length)return(0,re.of)(!0);const pe=J.map(Ne=>{const Ze=Co(Ne,C);return Qt(function fe(C){return C&&Zs(C.canMatch)}(Ze)?Ze.canMatch(R,D):C.runInContext(()=>Ze(R,D)))});return(0,re.of)(pe).pipe(cs(),sa())}(V=lo(R,V),R,D).pipe((0,Be.U)(Ne=>!0===Ne?pe:{...Ho})):(0,re.of)(pe)}function qo(C,R,D){if(""===R.path)return"full"===R.pathMatch&&(C.hasChildren()||D.length>0)?{...Ho}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const J=(R.matcher||Gi)(D,C,R);if(!J)return{...Ho};const pe={};vi(J.posParams,(Ze,Lt)=>{pe[Lt]=Ze.path});const Ne=J.consumed.length>0?{...pe,...J.consumed[J.consumed.length-1].parameters}:pe;return{matched:!0,consumedSegments:J.consumed,remainingSegments:D.slice(J.consumed.length),parameters:Ne,positionalParamSegments:J.posParams??{}}}function ul(C,R,D,V,J="corrected"){if(D.length>0&&function qa(C,R,D){return D.some(V=>B(C,R,V)&&Gr(V)!==Ue)}(C,D,V)){const Ne=new An(R,function kl(C,R,D,V){const J={};J[Ue]=V,V._sourceSegment=C,V._segmentIndexShift=R.length;for(const pe of D)if(""===pe.path&&Gr(pe)!==Ue){const Ne=new An([],{});Ne._sourceSegment=C,Ne._segmentIndexShift=R.length,J[Gr(pe)]=Ne}return J}(C,R,V,new An(D,C.children)));return Ne._sourceSegment=C,Ne._segmentIndexShift=R.length,{segmentGroup:Ne,slicedSegments:[]}}if(0===D.length&&function cl(C,R,D){return D.some(V=>B(C,R,V))}(C,D,V)){const Ne=new An(C.segments,function Ka(C,R,D,V,J,pe){const Ne={};for(const Ze of V)if(B(C,D,Ze)&&!J[Gr(Ze)]){const Lt=new An([],{});Lt._sourceSegment=C,Lt._segmentIndexShift="legacy"===pe?C.segments.length:R.length,Ne[Gr(Ze)]=Lt}return{...J,...Ne}}(C,R,D,V,C.children,J));return Ne._sourceSegment=C,Ne._segmentIndexShift=R.length,{segmentGroup:Ne,slicedSegments:D}}const pe=new An(C.segments,C.children);return pe._sourceSegment=C,pe._segmentIndexShift=R.length,{segmentGroup:pe,slicedSegments:D}}function B(C,R,D){return(!(C.hasChildren()||R.length>0)||"full"!==D.pathMatch)&&""===D.path}function oe(C,R,D,V){return!!(Gr(C)===V||V!==Ue&&B(R,D,C))&&("**"===C.path||qo(R,C,D).matched)}function W(C,R,D){return 0===R.length&&!C.children[D]}const ge=!1;class $e{constructor(R){this.segmentGroup=R||null}}class xt{constructor(R){this.urlTree=R}}function Bt(C){return(0,Mt._)(new $e(C))}function Pn(C){return(0,Mt._)(new xt(C))}class Ki{constructor(R,D,V,J,pe){this.injector=R,this.configLoader=D,this.urlSerializer=V,this.urlTree=J,this.config=pe,this.allowRedirects=!0}apply(){const R=ul(this.urlTree.root,[],[],this.config).segmentGroup,D=new An(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,D,Ue).pipe((0,Be.U)(pe=>this.createUrlTree(Ce(pe),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,bt.K)(pe=>{if(pe instanceof xt)return this.allowRedirects=!1,this.match(pe.urlTree);throw pe instanceof $e?this.noMatchError(pe):pe}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,Ue).pipe((0,Be.U)(J=>this.createUrlTree(Ce(J),R.queryParams,R.fragment))).pipe((0,bt.K)(J=>{throw J instanceof $e?this.noMatchError(J):J}))}noMatchError(R){return new m.vHH(4002,ge)}createUrlTree(R,D,V){const J=Le(R);return new Dr(J,D,V)}expandSegmentGroup(R,D,V,J){return 0===V.segments.length&&V.hasChildren()?this.expandChildren(R,D,V).pipe((0,Be.U)(pe=>new An([],pe))):this.expandSegment(R,V,D,V.segments,J,!0)}expandChildren(R,D,V){const J=[];for(const pe of Object.keys(V.children))"primary"===pe?J.unshift(pe):J.push(pe);return(0,a.D)(J).pipe((0,Ve.b)(pe=>{const Ne=V.children[pe],Ze=ha(D,pe);return this.expandSegmentGroup(R,Ze,Ne,pe).pipe((0,Be.U)(Lt=>({segment:Lt,outlet:pe})))}),(0,yt.R)((pe,Ne)=>(pe[Ne.outlet]=Ne.segment,pe),{}),Nn())}expandSegment(R,D,V,J,pe,Ne){return(0,a.D)(V).pipe((0,Ve.b)(Ze=>this.expandSegmentAgainstRoute(R,D,V,Ze,J,pe,Ne).pipe((0,bt.K)(Cn=>{if(Cn instanceof $e)return(0,re.of)(null);throw Cn}))),(0,ft.P)(Ze=>!!Ze),(0,bt.K)((Ze,Lt)=>{if(Lr(Ze))return W(D,J,pe)?(0,re.of)(new An([],{})):Bt(D);throw Ze}))}expandSegmentAgainstRoute(R,D,V,J,pe,Ne,Ze){return oe(J,D,pe,Ne)?void 0===J.redirectTo?this.matchSegmentAgainstRoute(R,D,J,pe,Ne):Ze&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,D,V,J,pe,Ne):Bt(D):Bt(D)}expandSegmentAgainstRouteUsingRedirect(R,D,V,J,pe,Ne){return"**"===J.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,V,J,Ne):this.expandRegularSegmentAgainstRouteUsingRedirect(R,D,V,J,pe,Ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,D,V,J){const pe=this.applyRedirectCommands([],V.redirectTo,{});return V.redirectTo.startsWith("/")?Pn(pe):this.lineralizeSegments(V,pe).pipe((0,Q.z)(Ne=>{const Ze=new An(Ne,{});return this.expandSegment(R,Ze,D,Ne,J,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,D,V,J,pe,Ne){const{matched:Ze,consumedSegments:Lt,remainingSegments:Cn,positionalParamSegments:ji}=qo(D,J,pe);if(!Ze)return Bt(D);const Kn=this.applyRedirectCommands(Lt,J.redirectTo,ji);return J.redirectTo.startsWith("/")?Pn(Kn):this.lineralizeSegments(J,Kn).pipe((0,Q.z)($i=>this.expandSegment(R,D,V,$i.concat(Cn),Ne,!1)))}matchSegmentAgainstRoute(R,D,V,J,pe){return"**"===V.path?(R=lo(V,R),V.loadChildren?(V._loadedRoutes?(0,re.of)({routes:V._loadedRoutes,injector:V._loadedInjector}):this.configLoader.loadChildren(R,V)).pipe((0,Be.U)(Ze=>(V._loadedRoutes=Ze.routes,V._loadedInjector=Ze.injector,new An(J,{})))):(0,re.of)(new An(J,{}))):is(D,V,J,R).pipe((0,ve.w)(({matched:Ne,consumedSegments:Ze,remainingSegments:Lt})=>Ne?this.getChildConfig(R=V._injector??R,V,J).pipe((0,Q.z)(ji=>{const Kn=ji.injector??R,$i=ji.routes,{segmentGroup:fs,slicedSegments:jr}=ul(D,Ze,Lt,$i),Ja=new An(fs.segments,fs.children);if(0===jr.length&&Ja.hasChildren())return this.expandChildren(Kn,$i,Ja).pipe((0,Be.U)(er=>new An(Ze,er)));if(0===$i.length&&0===jr.length)return(0,re.of)(new An(Ze,{}));const Nr=Gr(V)===pe;return this.expandSegment(Kn,Ja,$i,jr,Nr?Ue:pe,!0).pipe((0,Be.U)($r=>new An(Ze.concat($r.segments),$r.children)))})):Bt(D)))}getChildConfig(R,D,V){return D.children?(0,re.of)({routes:D.children,injector:R}):D.loadChildren?void 0!==D._loadedRoutes?(0,re.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):function Sa(C,R,D,V){const J=R.canLoad;if(void 0===J||0===J.length)return(0,re.of)(!0);const pe=J.map(Ne=>{const Ze=Co(Ne,C);return Qt(function Wn(C){return C&&Zs(C.canLoad)}(Ze)?Ze.canLoad(R,D):C.runInContext(()=>Ze(R,D)))});return(0,re.of)(pe).pipe(cs(),sa())}(R,D,V).pipe((0,Q.z)(J=>J?this.configLoader.loadChildren(R,D).pipe((0,it.b)(pe=>{D._loadedRoutes=pe.routes,D._loadedInjector=pe.injector})):function cr(C){return(0,Mt._)(Qr(ge,3))}())):(0,re.of)({routes:[],injector:R})}lineralizeSegments(R,D){let V=[],J=D.root;for(;;){if(V=V.concat(J.segments),0===J.numberOfChildren)return(0,re.of)(V);if(J.numberOfChildren>1||!J.children[Ue])return(0,Mt._)(new m.vHH(4e3,ge));J=J.children[Ue]}}applyRedirectCommands(R,D,V){return this.applyRedirectCreateUrlTree(D,this.urlSerializer.parse(D),R,V)}applyRedirectCreateUrlTree(R,D,V,J){const pe=this.createSegmentGroup(R,D.root,V,J);return new Dr(pe,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(R,D){const V={};return vi(R,(J,pe)=>{if("string"==typeof J&&J.startsWith(":")){const Ze=J.substring(1);V[pe]=D[Ze]}else V[pe]=J}),V}createSegmentGroup(R,D,V,J){const pe=this.createSegments(R,D.segments,V,J);let Ne={};return vi(D.children,(Ze,Lt)=>{Ne[Lt]=this.createSegmentGroup(R,Ze,V,J)}),new An(pe,Ne)}createSegments(R,D,V,J){return D.map(pe=>pe.path.startsWith(":")?this.findPosParam(R,pe,J):this.findOrReturn(pe,V))}findPosParam(R,D,V){const J=V[D.path.substring(1)];if(!J)throw new m.vHH(4001,ge);return J}findOrReturn(R,D){let V=0;for(const J of D){if(J.path===R.path)return D.splice(V),J;V++}return R}}class ds{}class xr{constructor(R,D,V,J,pe,Ne,Ze,Lt){this.injector=R,this.rootComponentType=D,this.config=V,this.urlTree=J,this.url=pe,this.paramsInheritanceStrategy=Ne,this.relativeLinkResolution=Ze,this.urlSerializer=Lt}recognize(){const R=ul(this.urlTree.root,[],[],this.config.filter(D=>void 0===D.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,Ue).pipe((0,Be.U)(D=>{if(null===D)return null;const V=new Fr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ue,this.rootComponentType,null,this.urlTree.root,-1,{}),J=new si(V,D),pe=new Eo(this.url,J);return this.inheritParamsAndData(pe._root),pe}))}inheritParamsAndData(R){const D=R.value,V=vr(D,this.paramsInheritanceStrategy);D.params=Object.freeze(V.params),D.data=Object.freeze(V.data),R.children.forEach(J=>this.inheritParamsAndData(J))}processSegmentGroup(R,D,V,J){return 0===V.segments.length&&V.hasChildren()?this.processChildren(R,D,V):this.processSegment(R,D,V,V.segments,J)}processChildren(R,D,V){return(0,a.D)(Object.keys(V.children)).pipe((0,Ve.b)(J=>{const pe=V.children[J],Ne=ha(D,J);return this.processSegmentGroup(R,Ne,pe,J)}),(0,yt.R)((J,pe)=>J&&pe?(J.push(...pe),J):null),function $t(C,R=!1){return(0,Wt.e)((D,V)=>{let J=0;D.subscribe((0,Dt.x)(V,pe=>{const Ne=C(pe,J++);(Ne||R)&&V.next(pe),!Ne&&V.complete()}))})}(J=>null!==J),(0,pn.d)(null),Nn(),(0,Be.U)(J=>{if(null===J)return null;const pe=Zo(J);return function ma(C){C.sort((R,D)=>R.value.outlet===Ue?-1:D.value.outlet===Ue?1:R.value.outlet.localeCompare(D.value.outlet))}(pe),pe}))}processSegment(R,D,V,J,pe){return(0,a.D)(D).pipe((0,Ve.b)(Ne=>this.processSegmentAgainstRoute(Ne._injector??R,Ne,V,J,pe)),(0,ft.P)(Ne=>!!Ne),(0,bt.K)(Ne=>{if(Lr(Ne))return W(V,J,pe)?(0,re.of)([]):(0,re.of)(null);throw Ne}))}processSegmentAgainstRoute(R,D,V,J,pe){if(D.redirectTo||!oe(D,V,J,pe))return(0,re.of)(null);let Ne;if("**"===D.path){const Ze=J.length>0?Hi(J).parameters:{},Lt=ka(V)+J.length,Cn=new Fr(J,Ze,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jo(D),Gr(D),D.component??D._loadedComponent??null,D,Vr(V),Lt,Fl(D),Lt);Ne=(0,re.of)({snapshot:Cn,consumedSegments:[],remainingSegments:[]})}else Ne=is(V,D,J,R).pipe((0,Be.U)(({matched:Ze,consumedSegments:Lt,remainingSegments:Cn,parameters:ji})=>{if(!Ze)return null;const Kn=ka(V)+Lt.length;return{snapshot:new Fr(Lt,ji,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jo(D),Gr(D),D.component??D._loadedComponent??null,D,Vr(V),Kn,Fl(D),Kn),consumedSegments:Lt,remainingSegments:Cn}}));return Ne.pipe((0,ve.w)(Ze=>{if(null===Ze)return(0,re.of)(null);const{snapshot:Lt,consumedSegments:Cn,remainingSegments:ji}=Ze;R=D._injector??R;const Kn=D._loadedInjector??R,$i=function yo(C){return C.children?C.children:C.loadChildren?C._loadedRoutes:[]}(D),{segmentGroup:fs,slicedSegments:jr}=ul(V,Cn,ji,$i.filter(Nr=>void 0===Nr.redirectTo),this.relativeLinkResolution);if(0===jr.length&&fs.hasChildren())return this.processChildren(Kn,$i,fs).pipe((0,Be.U)(Nr=>null===Nr?null:[new si(Lt,Nr)]));if(0===$i.length&&0===jr.length)return(0,re.of)([new si(Lt,[])]);const Ja=Gr(D)===pe;return this.processSegment(Kn,$i,fs,jr,Ja?Ue:pe).pipe((0,Be.U)(Nr=>null===Nr?null:[new si(Lt,Nr)]))}))}}function Qs(C){const R=C.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function Zo(C){const R=[],D=new Set;for(const V of C){if(!Qs(V)){R.push(V);continue}const J=R.find(pe=>V.value.routeConfig===pe.value.routeConfig);void 0!==J?(J.children.push(...V.children),D.add(J)):R.push(V)}for(const V of D){const J=Zo(V.children);R.push(new si(V.value,J))}return R.filter(V=>!D.has(V))}function Vr(C){let R=C;for(;R._sourceSegment;)R=R._sourceSegment;return R}function ka(C){let R=C,D=R._segmentIndexShift??0;for(;R._sourceSegment;)R=R._sourceSegment,D+=R._segmentIndexShift??0;return D-1}function jo(C){return C.data||{}}function Fl(C){return C.resolve||{}}function ce(C){return"string"==typeof C.title||null===C.title}function lt(C){return(0,ve.w)(R=>{const D=C(R);return D?(0,a.D)(D).pipe((0,Be.U)(()=>R)):(0,re.of)(R)})}let Ht=(()=>{class C{buildTitle(D){let V,J=D.root;for(;void 0!==J;)V=this.getResolvedTitleForRoute(J)??V,J=J.children.find(pe=>pe.outlet===Ue);return V}getResolvedTitleForRoute(D){return D.data[_t]}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=m.Yz7({token:C,factory:function(){return(0,m.f3M)(Rn)},providedIn:"root"}),C})(),Rn=(()=>{class C extends Ht{constructor(D){super(),this.title=D}updateTitle(D){const V=this.buildTitle(D);void 0!==V&&this.title.setTitle(V)}}return C.\u0275fac=function(D){return new(D||C)(m.LFG(Vt.Dx))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();class Mn{}class qr extends class pr{shouldDetach(R){return!1}store(R,D){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,D){return R.routeConfig===D.routeConfig}}{}const Ss=new m.OlP("",{providedIn:"root",factory:()=>({})}),Ir=new m.OlP("ROUTES");let oi=(()=>{class C{constructor(D,V){this.injector=D,this.compiler=V,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,re.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const V=Qt(D.loadComponent()).pipe((0,it.b)(pe=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=pe}),(0,Bn.x)(()=>{this.componentLoaders.delete(D)})),J=new rt(V,()=>new Ee.x).pipe(vt());return this.componentLoaders.set(D,J),J}loadChildren(D,V){if(this.childrenLoaders.get(V))return this.childrenLoaders.get(V);if(V._loadedRoutes)return(0,re.of)({routes:V._loadedRoutes,injector:V._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(V);const pe=this.loadModuleFactoryOrRoutes(V.loadChildren).pipe((0,Be.U)(Ze=>{this.onLoadEndListener&&this.onLoadEndListener(V);let Lt,Cn,ji=!1;Array.isArray(Ze)?Cn=Ze:(Lt=Ze.create(D).injector,Cn=ai(Lt.get(Ir,[],m.XFs.Self|m.XFs.Optional)));return{routes:Cn.map(Vo),injector:Lt}}),(0,Bn.x)(()=>{this.childrenLoaders.delete(V)})),Ne=new rt(pe,()=>new Ee.x).pipe(vt());return this.childrenLoaders.set(V,Ne),Ne}loadModuleFactoryOrRoutes(D){return Qt(D()).pipe((0,Q.z)(V=>V instanceof m.YKP||Array.isArray(V)?(0,re.of)(V):(0,a.D)(this.compiler.compileModuleAsync(V))))}}return C.\u0275fac=function(D){return new(D||C)(m.LFG(m.zs3),m.LFG(m.Sil))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();class hs{}class ys{shouldProcessUrl(R){return!0}extract(R){return R}merge(R,D){return R}}function ko(C){throw C}function dn(C,R,D){return R.parse("/")}const Hr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Vn(){const C=(0,m.f3M)(gs),R=(0,m.f3M)(Jr),D=(0,m.f3M)(qt.Ye),V=(0,m.f3M)(m.zs3),J=(0,m.f3M)(m.Sil),pe=(0,m.f3M)(Ir,{optional:!0})??[],Ne=(0,m.f3M)(Ss,{optional:!0})??{},Ze=(0,m.f3M)(Rn),Lt=(0,m.f3M)(Ht,{optional:!0}),Cn=(0,m.f3M)(hs,{optional:!0}),ji=(0,m.f3M)(Mn,{optional:!0}),Kn=new Ln(null,C,R,D,V,J,ai(pe));return Cn&&(Kn.urlHandlingStrategy=Cn),ji&&(Kn.routeReuseStrategy=ji),Kn.titleStrategy=Lt??Ze,function tl(C,R){C.errorHandler&&(R.errorHandler=C.errorHandler),C.malformedUriErrorHandler&&(R.malformedUriErrorHandler=C.malformedUriErrorHandler),C.onSameUrlNavigation&&(R.onSameUrlNavigation=C.onSameUrlNavigation),C.paramsInheritanceStrategy&&(R.paramsInheritanceStrategy=C.paramsInheritanceStrategy),C.relativeLinkResolution&&(R.relativeLinkResolution=C.relativeLinkResolution),C.urlUpdateStrategy&&(R.urlUpdateStrategy=C.urlUpdateStrategy),C.canceledNavigationResolution&&(R.canceledNavigationResolution=C.canceledNavigationResolution)}(Ne,Kn),Kn}let Ln=(()=>{class C{constructor(D,V,J,pe,Ne,Ze,Lt){this.rootComponentType=D,this.urlSerializer=V,this.rootContexts=J,this.location=pe,this.config=Lt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ee.x,this.errorHandler=ko,this.malformedUriErrorHandler=dn,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,re.of)(void 0),this.urlHandlingStrategy=new ys,this.routeReuseStrategy=new qr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Ne.get(oi),this.configLoader.onLoadEndListener=$i=>this.triggerEvent(new Ro($i)),this.configLoader.onLoadStartListener=$i=>this.triggerEvent(new ll($i)),this.ngModule=Ne.get(m.h0i),this.console=Ne.get(m.c2e);const Kn=Ne.get(m.R0b);this.isNgZoneEnabled=Kn instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(Lt),this.currentUrlTree=function Vi(){return new Dr(new An([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ro(this.currentUrlTree,this.rootComponentType),this.transitions=new We({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(D){const V=this.events;return D.pipe((0,De.h)(J=>0!==J.id),(0,Be.U)(J=>({...J,extractedUrl:this.urlHandlingStrategy.extract(J.rawUrl)})),(0,ve.w)(J=>{let pe=!1,Ne=!1;return(0,re.of)(J).pipe((0,it.b)(Ze=>{this.currentNavigation={id:Ze.id,initialUrl:Ze.rawUrl,extractedUrl:Ze.extractedUrl,trigger:Ze.source,extras:Ze.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ve.w)(Ze=>{const Lt=this.browserUrlTree.toString(),Cn=!this.navigated||Ze.extractedUrl.toString()!==Lt||Lt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Cn)&&this.urlHandlingStrategy.shouldProcessUrl(Ze.rawUrl))return Tn(Ze.source)&&(this.browserUrlTree=Ze.extractedUrl),(0,re.of)(Ze).pipe((0,ve.w)(Kn=>{const $i=this.transitions.getValue();return V.next(new Or(Kn.id,this.serializeUrl(Kn.extractedUrl),Kn.source,Kn.restoredState)),$i!==this.transitions.getValue()?ct.E:Promise.resolve(Kn)}),function Us(C,R,D,V){return(0,ve.w)(J=>function tr(C,R,D,V,J){return new Ki(C,R,D,V,J).apply()}(C,R,D,J.extractedUrl,V).pipe((0,Be.U)(pe=>({...J,urlAfterRedirects:pe}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,it.b)(Kn=>{this.currentNavigation={...this.currentNavigation,finalUrl:Kn.urlAfterRedirects},J.urlAfterRedirects=Kn.urlAfterRedirects}),function La(C,R,D,V,J,pe){return(0,Q.z)(Ne=>function ga(C,R,D,V,J,pe,Ne="emptyOnly",Ze="legacy"){return new xr(C,R,D,V,J,Ne,Ze,pe).recognize().pipe((0,ve.w)(Lt=>null===Lt?function Za(C){return new tt.y(R=>R.error(C))}(new ds):(0,re.of)(Lt)))}(C,R,D,Ne.urlAfterRedirects,V.serialize(Ne.urlAfterRedirects),V,J,pe).pipe((0,Be.U)(Ze=>({...Ne,targetSnapshot:Ze}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,it.b)(Kn=>{if(J.targetSnapshot=Kn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Kn.extras.skipLocationChange){const fs=this.urlHandlingStrategy.merge(Kn.urlAfterRedirects,Kn.rawUrl);this.setBrowserUrl(fs,Kn)}this.browserUrlTree=Kn.urlAfterRedirects}const $i=new Oo(Kn.id,this.serializeUrl(Kn.extractedUrl),this.serializeUrl(Kn.urlAfterRedirects),Kn.targetSnapshot);V.next($i)}));if(Cn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$i,extractedUrl:fs,source:jr,restoredState:Ja,extras:Nr}=Ze,Jo=new Or($i,this.serializeUrl(fs),jr,Ja);V.next(Jo);const $r=ro(fs,this.rootComponentType).snapshot;return J={...Ze,targetSnapshot:$r,urlAfterRedirects:fs,extras:{...Nr,skipLocationChange:!1,replaceUrl:!1}},(0,re.of)(J)}return this.rawUrlTree=Ze.rawUrl,Ze.resolve(null),ct.E}),(0,it.b)(Ze=>{const Lt=new Ia(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot);this.triggerEvent(Lt)}),(0,Be.U)(Ze=>J={...Ze,guards:_l(Ze.targetSnapshot,Ze.currentSnapshot,this.rootContexts)}),function zr(C,R){return(0,Q.z)(D=>{const{targetSnapshot:V,currentSnapshot:J,guards:{canActivateChecks:pe,canDeactivateChecks:Ne}}=D;return 0===Ne.length&&0===pe.length?(0,re.of)({...D,guardsResult:!0}):function _s(C,R,D,V){return(0,a.D)(C).pipe((0,Q.z)(J=>function Da(C,R,D,V,J){const pe=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!pe||0===pe.length)return(0,re.of)(!0);const Ne=pe.map(Ze=>{const Lt=ur(R)??J,Cn=Co(Ze,Lt);return Qt(function $(C){return C&&Zs(C.canDeactivate)}(Cn)?Cn.canDeactivate(C,R,D,V):Lt.runInContext(()=>Cn(C,R,D,V))).pipe((0,ft.P)())});return(0,re.of)(Ne).pipe(cs())}(J.component,J.route,D,R,V)),(0,ft.P)(J=>!0!==J,!0))}(Ne,V,J,C).pipe((0,Q.z)(Ze=>Ze&&function ms(C){return"boolean"==typeof C}(Ze)?function fa(C,R,D,V){return(0,a.D)(R).pipe((0,Ve.b)(J=>(0,xe.z)(function Bo(C,R){return null!==C&&R&&R(new ia(C)),(0,re.of)(!0)}(J.route.parent,V),function el(C,R){return null!==C&&R&&R(new Ks(C)),(0,re.of)(!0)}(J.route,V),function ra(C,R,D){const V=R[R.length-1],pe=R.slice(0,R.length-1).reverse().map(Ne=>function Er(C){const R=C.routeConfig?C.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:C,guards:R}:null}(Ne)).filter(Ne=>null!==Ne).map(Ne=>Ie(()=>{const Ze=Ne.guards.map(Lt=>{const Cn=ur(Ne.node)??D,ji=Co(Lt,Cn);return Qt(function Y(C){return C&&Zs(C.canActivateChild)}(ji)?ji.canActivateChild(V,C):Cn.runInContext(()=>ji(V,C))).pipe((0,ft.P)())});return(0,re.of)(Ze).pipe(cs())}));return(0,re.of)(pe).pipe(cs())}(C,J.path,D),function Pa(C,R,D){const V=R.routeConfig?R.routeConfig.canActivate:null;if(!V||0===V.length)return(0,re.of)(!0);const J=V.map(pe=>Ie(()=>{const Ne=ur(R)??D,Ze=Co(pe,Ne);return Qt(function ee(C){return C&&Zs(C.canActivate)}(Ze)?Ze.canActivate(R,C):Ne.runInContext(()=>Ze(R,C))).pipe((0,ft.P)())}));return(0,re.of)(J).pipe(cs())}(C,J.route,D))),(0,ft.P)(J=>!0!==J,!0))}(V,pe,C,R):(0,re.of)(Ze)),(0,Be.U)(Ze=>({...D,guardsResult:Ze})))})}(this.ngModule.injector,Ze=>this.triggerEvent(Ze)),(0,it.b)(Ze=>{if(J.guardsResult=Ze.guardsResult,Ct(Ze.guardsResult))throw Ca(0,Ze.guardsResult);const Lt=new Ko(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot,!!Ze.guardsResult);this.triggerEvent(Lt)}),(0,De.h)(Ze=>!!Ze.guardsResult||(this.restoreHistory(Ze),this.cancelNavigationTransition(Ze,"",3),!1)),lt(Ze=>{if(Ze.guards.canActivateChecks.length)return(0,re.of)(Ze).pipe((0,it.b)(Lt=>{const Cn=new os(Lt.id,this.serializeUrl(Lt.extractedUrl),this.serializeUrl(Lt.urlAfterRedirects),Lt.targetSnapshot);this.triggerEvent(Cn)}),(0,ve.w)(Lt=>{let Cn=!1;return(0,re.of)(Lt).pipe(function L(C,R){return(0,Q.z)(D=>{const{targetSnapshot:V,guards:{canActivateChecks:J}}=D;if(!J.length)return(0,re.of)(D);let pe=0;return(0,a.D)(J).pipe((0,Ve.b)(Ne=>function we(C,R,D,V){const J=C.routeConfig,pe=C._resolve;return void 0!==J?.title&&!ce(J)&&(pe[_t]=J.title),function p(C,R,D,V){const J=function M(C){return[...Object.keys(C),...Object.getOwnPropertySymbols(C)]}(C);if(0===J.length)return(0,re.of)({});const pe={};return(0,a.D)(J).pipe((0,Q.z)(Ne=>function ie(C,R,D,V){const J=ur(R)??V,pe=Co(C,J);return Qt(pe.resolve?pe.resolve(R,D):J.runInContext(()=>pe(R,D)))}(C[Ne],R,D,V).pipe((0,ft.P)(),(0,it.b)(Ze=>{pe[Ne]=Ze}))),Yt(1),function ci(C){return(0,Be.U)(()=>C)}(pe),(0,bt.K)(Ne=>Lr(Ne)?ct.E:(0,Mt._)(Ne)))}(pe,C,R,V).pipe((0,Be.U)(Ne=>(C._resolvedData=Ne,C.data=vr(C,D).resolve,J&&ce(J)&&(C.data[_t]=J.title),null)))}(Ne.route,V,C,R)),(0,it.b)(()=>pe++),Yt(1),(0,Q.z)(Ne=>pe===J.length?(0,re.of)(D):ct.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,it.b)({next:()=>Cn=!0,complete:()=>{Cn||(this.restoreHistory(Lt),this.cancelNavigationTransition(Lt,"",2))}}))}),(0,it.b)(Lt=>{const Cn=new ca(Lt.id,this.serializeUrl(Lt.extractedUrl),this.serializeUrl(Lt.urlAfterRedirects),Lt.targetSnapshot);this.triggerEvent(Cn)}))}),lt(Ze=>{const Lt=Cn=>{const ji=[];Cn.routeConfig?.loadComponent&&!Cn.routeConfig._loadedComponent&&ji.push(this.configLoader.loadComponent(Cn.routeConfig).pipe((0,it.b)(Kn=>{Cn.component=Kn}),(0,Be.U)(()=>{})));for(const Kn of Cn.children)ji.push(...Lt(Kn));return ji};return(0,Re.a)(Lt(Ze.targetSnapshot.root)).pipe((0,pn.d)(),(0,nt.q)(1))}),lt(()=>this.afterPreactivation()),(0,Be.U)(Ze=>{const Lt=function Ra(C,R,D){const V=No(C,R._root,D?D._root:void 0);return new ar(V,R)}(this.routeReuseStrategy,Ze.targetSnapshot,Ze.currentRouterState);return J={...Ze,targetRouterState:Lt}}),(0,it.b)(Ze=>{this.currentUrlTree=Ze.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ze.urlAfterRedirects,Ze.rawUrl),this.routerState=Ze.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ze.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ze),this.browserUrlTree=Ze.urlAfterRedirects)}),((C,R,D)=>(0,Be.U)(V=>(new Ta(R,V.targetRouterState,V.currentRouterState,D).activate(C),V)))(this.rootContexts,this.routeReuseStrategy,Ze=>this.triggerEvent(Ze)),(0,it.b)({next(){pe=!0},complete(){pe=!0}}),(0,Bn.x)(()=>{pe||Ne||this.cancelNavigationTransition(J,"",1),this.currentNavigation?.id===J.id&&(this.currentNavigation=null)}),(0,bt.K)(Ze=>{if(Ne=!0,Br(Ze)){ao(Ze)||(this.navigated=!0,this.restoreHistory(J,!0));const Lt=new qi(J.id,this.serializeUrl(J.extractedUrl),Ze.message,Ze.cancellationCode);if(V.next(Lt),ao(Ze)){const Cn=this.urlHandlingStrategy.merge(Ze.url,this.rawUrlTree),ji={skipLocationChange:J.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Tn(J.source)};this.scheduleNavigation(Cn,"imperative",null,ji,{resolve:J.resolve,reject:J.reject,promise:J.promise})}else J.resolve(!1)}else{this.restoreHistory(J,!0);const Lt=new Ur(J.id,this.serializeUrl(J.extractedUrl),Ze,J.targetSnapshot??void 0);V.next(Lt);try{J.resolve(this.errorHandler(Ze))}catch(Cn){J.reject(Cn)}}return ct.E}))}))}resetRootComponentType(D){this.rootComponentType=D,this.routerState.root.component=this.rootComponentType}setTransition(D){this.transitions.next({...this.transitions.value,...D})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const V="popstate"===D.type?"popstate":"hashchange";"popstate"===V&&setTimeout(()=>{const J={replaceUrl:!0},pe=D.state?.navigationId?D.state:null;if(pe){const Ze={...pe};delete Ze.navigationId,delete Ze.\u0275routerPageId,0!==Object.keys(Ze).length&&(J.state=Ze)}const Ne=this.parseUrl(D.url);this.scheduleNavigation(Ne,V,pe,J)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(D){this.events.next(D)}resetConfig(D){this.config=D.map(Vo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,V={}){const{relativeTo:J,queryParams:pe,fragment:Ne,queryParamsHandling:Ze,preserveFragment:Lt}=V,Cn=J||this.routerState.root,ji=Lt?this.currentUrlTree.fragment:Ne;let Kn=null;switch(Ze){case"merge":Kn={...this.currentUrlTree.queryParams,...pe};break;case"preserve":Kn=this.currentUrlTree.queryParams;break;default:Kn=pe||null}return null!==Kn&&(Kn=this.removeEmptyProps(Kn)),yr(Cn,this.currentUrlTree,D,Kn,ji??null)}navigateByUrl(D,V={skipLocationChange:!1}){const J=Ct(D)?D:this.parseUrl(D),pe=this.urlHandlingStrategy.merge(J,this.rawUrlTree);return this.scheduleNavigation(pe,"imperative",null,V)}navigate(D,V={skipLocationChange:!1}){return function vo(C){for(let R=0;R<C.length;R++){if(null==C[R])throw new m.vHH(4008,false)}}(D),this.navigateByUrl(this.createUrlTree(D,V),V)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let V;try{V=this.urlSerializer.parse(D)}catch(J){V=this.malformedUriErrorHandler(J,this.urlSerializer,D)}return V}isActive(D,V){let J;if(J=!0===V?{...Hr}:!1===V?{...oa}:V,Ct(D))return sr(this.currentUrlTree,D,J);const pe=this.parseUrl(D);return sr(this.currentUrlTree,pe,J)}removeEmptyProps(D){return Object.keys(D).reduce((V,J)=>{const pe=D[J];return null!=pe&&(V[J]=pe),V},{})}processNavigations(){this.navigations.subscribe(D=>{this.navigated=!0,this.lastSuccessfulId=D.id,this.currentPageId=D.targetPageId,this.events.next(new Mo(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),D.resolve(!0)},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}scheduleNavigation(D,V,J,pe,Ne){if(this.disposed)return Promise.resolve(!1);let Ze,Lt,Cn;Ne?(Ze=Ne.resolve,Lt=Ne.reject,Cn=Ne.promise):Cn=new Promise(($i,fs)=>{Ze=$i,Lt=fs});const ji=++this.navigationId;let Kn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(J=this.location.getState()),Kn=J&&J.\u0275routerPageId?J.\u0275routerPageId:pe.replaceUrl||pe.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Kn=0,this.setTransition({id:ji,targetPageId:Kn,source:V,restoredState:J,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:D,extras:pe,resolve:Ze,reject:Lt,promise:Cn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Cn.catch($i=>Promise.reject($i))}setBrowserUrl(D,V){const J=this.urlSerializer.serialize(D),pe={...V.extras.state,...this.generateNgRouterState(V.id,V.targetPageId)};this.location.isCurrentPathEqualTo(J)||V.extras.replaceUrl?this.location.replaceState(J,"",pe):this.location.go(J,"",pe)}restoreHistory(D,V=!1){if("computed"===this.canceledNavigationResolution){const J=this.currentPageId-D.targetPageId;"popstate"!==D.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===J?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===J&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(J)}else"replace"===this.canceledNavigationResolution&&(V&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(D,V,J){const pe=new qi(D.id,this.serializeUrl(D.extractedUrl),V,J);this.triggerEvent(pe),D.resolve(!1)}generateNgRouterState(D,V){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:V}:{navigationId:D}}}return C.\u0275fac=function(D){m.$Z()},C.\u0275prov=m.Yz7({token:C,factory:function(){return Vn()},providedIn:"root"}),C})();function Tn(C){return"imperative"!==C}let Ut=(()=>{class C{constructor(D,V,J,pe,Ne){this.router=D,this.route=V,this.tabIndexAttribute=J,this.renderer=pe,this.el=Ne,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Ee.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(D){this._preserveFragment=(0,m.D6c)(D)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(D){this._skipLocationChange=(0,m.D6c)(D)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(D){this._replaceUrl=(0,m.D6c)(D)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(D){if(null!=this.tabIndexAttribute)return;const V=this.renderer,J=this.el.nativeElement;null!==D?V.setAttribute(J,"tabindex",D):V.removeAttribute(J,"tabindex")}ngOnChanges(D){this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(Ln),m.Y36(as),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},C.\u0275dir=m.lG2({type:C,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(D,V){1&D&&m.NdJ("click",function(){return V.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),C})(),an=(()=>{class C{constructor(D,V,J){this.router=D,this.route=V,this.locationStrategy=J,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Ee.x,this.subscription=D.events.subscribe(pe=>{pe instanceof Mo&&this.updateTargetUrlAndHref()})}set preserveFragment(D){this._preserveFragment=(0,m.D6c)(D)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(D){this._skipLocationChange=(0,m.D6c)(D)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(D){this._replaceUrl=(0,m.D6c)(D)}get replaceUrl(){return this._replaceUrl}set routerLink(D){this.commands=null!=D?Array.isArray(D)?D:[D]:null}ngOnChanges(D){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(D,V,J,pe,Ne){return!!(0!==D||V||J||pe||Ne||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(Ln),m.Y36(as),m.Y36(qt.S$))},C.\u0275dir=m.lG2({type:C,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(D,V){1&D&&m.NdJ("click",function(pe){return V.onClick(pe.button,pe.ctrlKey,pe.shiftKey,pe.altKey,pe.metaKey)}),2&D&&m.uIk("target",V.target)("href",V.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),C})();class lu{}let Vl=(()=>{class C{constructor(D,V,J,pe,Ne){this.router=D,this.injector=J,this.preloadingStrategy=pe,this.loader=Ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,De.h)(D=>D instanceof Mo),(0,Ve.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,V){const J=[];for(const pe of V){pe.providers&&!pe._injector&&(pe._injector=(0,m.MMx)(pe.providers,D,`Route: ${pe.path}`));const Ne=pe._injector??D,Ze=pe._loadedInjector??Ne;pe.loadChildren&&!pe._loadedRoutes&&void 0===pe.canLoad||pe.loadComponent&&!pe._loadedComponent?J.push(this.preloadConfig(Ne,pe)):(pe.children||pe._loadedRoutes)&&J.push(this.processRoutes(Ze,pe.children??pe._loadedRoutes))}return(0,a.D)(J).pipe((0,St.J)())}preloadConfig(D,V){return this.preloadingStrategy.preload(V,()=>{let J;J=V.loadChildren&&void 0===V.canLoad?this.loader.loadChildren(D,V):(0,re.of)(null);const pe=J.pipe((0,Q.z)(Ne=>null===Ne?(0,re.of)(void 0):(V._loadedRoutes=Ne.routes,V._loadedInjector=Ne.injector,this.processRoutes(Ne.injector??D,Ne.routes))));if(V.loadComponent&&!V._loadedComponent){const Ne=this.loader.loadComponent(V);return(0,a.D)([pe,Ne]).pipe((0,St.J)())}return pe})}}return C.\u0275fac=function(D){return new(D||C)(m.LFG(Ln),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(lu),m.LFG(oi))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const nl=new m.OlP("");let ya=(()=>{class C{constructor(D,V,J={}){this.router=D,this.viewportScroller=V,this.options=J,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},J.scrollPositionRestoration=J.scrollPositionRestoration||"disabled",J.anchorScrolling=J.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Or?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof Mo&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.router.parseUrl(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(D=>{D instanceof ut&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,V){this.router.triggerEvent(new ut(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,V))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return C.\u0275fac=function(D){m.$Z()},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac}),C})();function Yo(C,R){return{\u0275kind:C,\u0275providers:R}}function Oi(C){return[{provide:Ir,multi:!0,useValue:C}]}function va(){const C=(0,m.f3M)(m.zs3);return R=>{const D=C.get(m.z2F);if(R!==D.components[0])return;const V=C.get(Ln),J=C.get(Xr);1===C.get(Sn)&&V.initialNavigation(),C.get(Hs,null,m.XFs.Optional)?.setUpPreloading(),C.get(nl,null,m.XFs.Optional)?.init(),V.resetRootComponentType(D.componentTypes[0]),J.next(),J.complete()}}const Xr=new m.OlP("",{factory:()=>new Ee.x}),Sn=new m.OlP("",{providedIn:"root",factory:()=>1});const Hs=new m.OlP("");function En(C){return Yo(0,[{provide:Hs,useExisting:Vl},{provide:lu,useExisting:C}])}const Mu=new m.OlP("ROUTER_FORROOT_GUARD"),Zl=[qt.Ye,{provide:gs,useClass:qn},{provide:Ln,useFactory:Vn},Jr,{provide:as,useFactory:function Ya(C){return C.routerState.root},deps:[Ln]},oi];function Xs(){return new m.PXZ("Router",Ln)}let il=(()=>{class C{constructor(D){}static forRoot(D,V){return{ngModule:C,providers:[Zl,[],Oi(D),{provide:Mu,useFactory:Do,deps:[[Ln,new m.FiY,new m.tp0]]},{provide:Ss,useValue:V||{}},V?.useHash?{provide:qt.S$,useClass:qt.Do}:{provide:qt.S$,useClass:qt.b0},{provide:nl,useFactory:()=>{const C=(0,m.f3M)(Ln),R=(0,m.f3M)(qt.EM),D=(0,m.f3M)(Ss);return D.scrollOffset&&R.setOffset(D.scrollOffset),new ya(C,R,D)}},V?.preloadingStrategy?En(V.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:Xs},V?.initialNavigation?Qa(V):[],[{provide:Ol,useFactory:va},{provide:m.tb,multi:!0,useExisting:Ol}]]}}static forChild(D){return{ngModule:C,providers:[Oi(D)]}}}return C.\u0275fac=function(D){return new(D||C)(m.LFG(Mu,8))},C.\u0275mod=m.oAB({type:C}),C.\u0275inj=m.cJS({imports:[Po]}),C})();function Do(C){return"guarded"}function Qa(C){return["disabled"===C.initialNavigation?Yo(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const R=(0,m.f3M)(Ln);return()=>{R.setUpLocationChangeListener()}}},{provide:Sn,useValue:2}]).\u0275providers:[],"enabledBlocking"===C.initialNavigation?Yo(2,[{provide:Sn,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:R=>{const D=R.get(qt.V_,Promise.resolve(null));let V=!1;return()=>D.then(()=>new Promise(pe=>{const Ne=R.get(Ln),Ze=R.get(Xr);(function J(pe){R.get(Ln).events.pipe((0,De.h)(Ze=>Ze instanceof Mo||Ze instanceof qi||Ze instanceof Ur),(0,Be.U)(Ze=>Ze instanceof Mo||Ze instanceof qi&&(0===Ze.code||1===Ze.code)&&null),(0,De.h)(Ze=>null!==Ze),(0,nt.q)(1)).subscribe(()=>{pe()})})(()=>{pe(!0),V=!0}),Ne.afterPreactivation=()=>(pe(!0),V||Ze.closed?(0,re.of)(void 0):Ze),Ne.initialNavigation()}))}}]).\u0275providers:[]]}const Ol=new m.OlP("")},3942:(In,Et,K)=>{K.d(Et,{Z:()=>wt});var m=K(2090),a=K(4859),re=K(9681),Ee=K(1877);class We{constructor(Dt,vt){this._delegate=Dt,this.firebase=vt,(0,re._addComponent)(Dt,new a.wA("app-compat",()=>this,"PUBLIC")),this.container=Dt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Dt){this._delegate.automaticDataCollectionEnabled=Dt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Dt=>{this._delegate.checkDestroyed(),Dt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,re.deleteApp)(this._delegate)))}_getService(Dt,vt=re._DEFAULT_ENTRY_NAME){var rt;this._delegate.checkDestroyed();const qt=this._delegate.container.getProvider(Dt);return!qt.isInitialized()&&"EXPLICIT"===(null===(rt=qt.getComponent())||void 0===rt?void 0:rt.instantiationMode)&&qt.initialize(),qt.getImmediate({identifier:vt})}_removeServiceInstance(Dt,vt=re._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Dt).clearInstance(vt)}_addComponent(Dt){(0,re._addComponent)(this._delegate,Dt)}_addOrOverwriteComponent(Dt){(0,re._addOrOverwriteComponent)(this._delegate,Dt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Re=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Me=function tt(){const Wt=function xe(Wt){const Dt={},vt={__esModule:!0,initializeApp:function Be(De,Q={}){const ft=re.initializeApp(De,Q);if((0,m.r3)(Dt,ft.name))return Dt[ft.name];const Ve=new Wt(ft,vt);return Dt[ft.name]=Ve,Ve},app:qt,registerVersion:re.registerVersion,setLogLevel:re.setLogLevel,onLog:re.onLog,apps:null,SDK_VERSION:re.SDK_VERSION,INTERNAL:{registerComponent:function nt(De){const Q=De.name,ft=Q.replace("-compat","");if(re._registerComponent(De)&&"PUBLIC"===De.type){const Ve=(it=qt())=>{if("function"!=typeof it[ft])throw Re.create("invalid-app-argument",{appName:Q});return it[ft]()};void 0!==De.serviceProps&&(0,m.ZB)(Ve,De.serviceProps),vt[ft]=Ve,Wt.prototype[ft]=function(...it){return this._getService.bind(this,Q).apply(this,De.multipleInstances?it:[])}}return"PUBLIC"===De.type?vt[ft]:null},removeApp:function rt(De){delete Dt[De]},useAsService:function Qe(De,Q){return"serverAuth"===Q?null:Q},modularAPIs:re}};function qt(De){if(!(0,m.r3)(Dt,De=De||re._DEFAULT_ENTRY_NAME))throw Re.create("no-app",{appName:De});return Dt[De]}return vt.default=vt,Object.defineProperty(vt,"apps",{get:function ve(){return Object.keys(Dt).map(De=>Dt[De])}}),qt.App=Wt,vt}(We);return Wt.INTERNAL=Object.assign(Object.assign({},Wt.INTERNAL),{createFirebaseNamespace:tt,extendNamespace:function Dt(vt){(0,m.ZB)(Wt,vt)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Wt}(),Ie=new Ee.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){Ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Wt=self.firebase.SDK_VERSION;Wt&&Wt.indexOf("LITE")>=0&&Ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const wt=Me;!function ct(Wt){(0,re.registerVersion)("@firebase/app-compat","0.1.32",Wt)}()},9681:(In,Et,K)=>{K.r(Et),K.d(Et,{FirebaseError:()=>Ee.ZR,SDK_VERSION:()=>zi,_DEFAULT_ENTRY_NAME:()=>Nn,_addComponent:()=>St,_addOrOverwriteComponent:()=>Vt,_apps:()=>ci,_clearComponents:()=>Hn,_components:()=>Bn,_getProvider:()=>_t,_registerComponent:()=>Ue,_removeServiceInstance:()=>ln,deleteApp:()=>vi,getApp:()=>Hi,getApps:()=>Li,initializeApp:()=>ai,onLog:()=>Vi,registerVersion:()=>Ni,setLogLevel:()=>Yi});var m=K(5861),a=K(4859),re=K(1877),Ee=K(2090),We=K(8766);class Ae{constructor(et){this.container=et}getPlatformInfoString(){return this.container.getProviders().map(qe=>{if(function Re(je){return"VERSION"===je.getComponent()?.type}(qe)){const Kt=qe.getImmediate();return`${Kt.library}/${Kt.version}`}return null}).filter(qe=>qe).join(" ")}}const xe="@firebase/app",Me=new re.Yd("@firebase/app"),Nn="[DEFAULT]",$t={[xe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ci=new Map,Bn=new Map;function St(je,et){try{je.container.addComponent(et)}catch(qe){Me.debug(`Component ${et.name} failed to register with FirebaseApp ${je.name}`,qe)}}function Vt(je,et){je.container.addOrOverwriteComponent(et)}function Ue(je){const et=je.name;if(Bn.has(et))return Me.debug(`There were multiple attempts to register component ${et}.`),!1;Bn.set(et,je);for(const qe of ci.values())St(qe,je);return!0}function _t(je,et){const qe=je.container.getProvider("heartbeat").getImmediate({optional:!0});return qe&&qe.triggerHeartbeat(),je.container.getProvider(et)}function ln(je,et,qe=Nn){_t(je,et).clearInstance(qe)}function Hn(){Bn.clear()}const Ei=new Ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class bi{constructor(et,qe,Kt){this._isDeleted=!1,this._options=Object.assign({},et),this._config=Object.assign({},qe),this._name=qe.name,this._automaticDataCollectionEnabled=qe.automaticDataCollectionEnabled,this._container=Kt,this.container.addComponent(new a.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this.checkDestroyed(),this._automaticDataCollectionEnabled=et}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(et){this._isDeleted=et}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}const zi="9.9.3";function ai(je,et={}){"object"!=typeof et&&(et={name:et});const qe=Object.assign({name:Nn,automaticDataCollectionEnabled:!1},et),Kt=qe.name;if("string"!=typeof Kt||!Kt)throw Ei.create("bad-app-name",{appName:String(Kt)});const fn=ci.get(Kt);if(fn){if((0,Ee.vZ)(je,fn.options)&&(0,Ee.vZ)(qe,fn.config))return fn;throw Ei.create("duplicate-app",{appName:Kt})}const xn=new a.H0(Kt);for(const Ji of Bn.values())xn.addComponent(Ji);const Bi=new bi(je,qe,xn);return ci.set(Kt,Bi),Bi}function Hi(je=Nn){const et=ci.get(je);if(!et)throw Ei.create("no-app",{appName:je});return et}function Li(){return Array.from(ci.values())}function vi(je){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,m.Z)(function*(je){const et=je.name;ci.has(et)&&(ci.delete(et),yield Promise.all(je.container.getProviders().map(qe=>qe.delete())),je.isDeleted=!0)})).apply(this,arguments)}function Ni(je,et,qe){var Kt;let fn=null!==(Kt=$t[je])&&void 0!==Kt?Kt:je;qe&&(fn+=`-${qe}`);const xn=fn.match(/\s|\//),Bi=et.match(/\s|\//);if(xn||Bi){const Ji=[`Unable to register library "${fn}" with version "${et}":`];return xn&&Ji.push(`library name "${fn}" contains illegal characters (whitespace or "/")`),xn&&Bi&&Ji.push("and"),Bi&&Ji.push(`version name "${et}" contains illegal characters (whitespace or "/")`),void Me.warn(Ji.join(" "))}Ue(new a.wA(`${fn}-version`,()=>({library:fn,version:et}),"VERSION"))}function Vi(je,et){if(null!==je&&"function"!=typeof je)throw Ei.create("invalid-log-argument");(0,re.Am)(je,et)}function Yi(je){(0,re.Ub)(je)}const Tr="firebase-heartbeat-store";let _r=null;function Qi(){return _r||(_r=(0,We.X3)("firebase-heartbeat-database",1,{upgrade:(je,et)=>{0===et&&je.createObjectStore(Tr)}}).catch(je=>{throw Ei.create("idb-open",{originalErrorMessage:je.message})})),_r}function $n(){return($n=(0,m.Z)(function*(je){var et;try{return(yield Qi()).transaction(Tr).objectStore(Tr).get(An(je))}catch(qe){if(qe instanceof Ee.ZR)Me.warn(qe.message);else{const Kt=Ei.create("idb-get",{originalErrorMessage:null===(et=qe)||void 0===et?void 0:et.message});Me.warn(Kt.message)}}})).apply(this,arguments)}function fi(je,et){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,m.Z)(function*(je,et){var qe;try{const fn=(yield Qi()).transaction(Tr,"readwrite");return yield fn.objectStore(Tr).put(et,An(je)),fn.done}catch(Kt){if(Kt instanceof Ee.ZR)Me.warn(Kt.message);else{const fn=Ei.create("idb-set",{originalErrorMessage:null===(qe=Kt)||void 0===qe?void 0:qe.message});Me.warn(fn.message)}}})).apply(this,arguments)}function An(je){return`${je.name}!${je.options.appId}`}class or{constructor(et){this.container=et,this._heartbeatsCache=null;const qe=this.container.getProvider("app").getImmediate();this._storage=new qn(qe),this._heartbeatsCachePromise=this._storage.read().then(Kt=>(this._heartbeatsCache=Kt,Kt))}triggerHeartbeat(){var et=this;return(0,m.Z)(function*(){const Kt=et.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=li();if(null===et._heartbeatsCache&&(et._heartbeatsCache=yield et._heartbeatsCachePromise),et._heartbeatsCache.lastSentHeartbeatDate!==fn&&!et._heartbeatsCache.heartbeats.some(xn=>xn.date===fn))return et._heartbeatsCache.heartbeats.push({date:fn,agent:Kt}),et._heartbeatsCache.heartbeats=et._heartbeatsCache.heartbeats.filter(xn=>{const Bi=new Date(xn.date).valueOf();return Date.now()-Bi<=2592e6}),et._storage.overwrite(et._heartbeatsCache)})()}getHeartbeatsHeader(){var et=this;return(0,m.Z)(function*(){if(null===et._heartbeatsCache&&(yield et._heartbeatsCachePromise),null===et._heartbeatsCache||0===et._heartbeatsCache.heartbeats.length)return"";const qe=li(),{heartbeatsToSend:Kt,unsentEntries:fn}=function gs(je,et=1024){const qe=[];let Kt=je.slice();for(const fn of je){const xn=qe.find(Bi=>Bi.agent===fn.agent);if(xn){if(xn.dates.push(fn.date),ot(qe)>et){xn.dates.pop();break}}else if(qe.push({agent:fn.agent,dates:[fn.date]}),ot(qe)>et){qe.pop();break}Kt=Kt.slice(1)}return{heartbeatsToSend:qe,unsentEntries:Kt}}(et._heartbeatsCache.heartbeats),xn=(0,Ee.L)(JSON.stringify({version:2,heartbeats:Kt}));return et._heartbeatsCache.lastSentHeartbeatDate=qe,fn.length>0?(et._heartbeatsCache.heartbeats=fn,yield et._storage.overwrite(et._heartbeatsCache)):(et._heartbeatsCache.heartbeats=[],et._storage.overwrite(et._heartbeatsCache)),xn})()}}function li(){return(new Date).toISOString().substring(0,10)}class qn{constructor(et){this.app=et,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,Ee.hl)()&&(0,Ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var et=this;return(0,m.Z)(function*(){return(yield et._canUseIndexedDBPromise)&&(yield function zn(je){return $n.apply(this,arguments)}(et.app))||{heartbeats:[]}})()}overwrite(et){var qe=this;return(0,m.Z)(function*(){var Kt;if(yield qe._canUseIndexedDBPromise){const xn=yield qe.read();return fi(qe.app,{lastSentHeartbeatDate:null!==(Kt=et.lastSentHeartbeatDate)&&void 0!==Kt?Kt:xn.lastSentHeartbeatDate,heartbeats:et.heartbeats})}})()}add(et){var qe=this;return(0,m.Z)(function*(){var Kt;if(yield qe._canUseIndexedDBPromise){const xn=yield qe.read();return fi(qe.app,{lastSentHeartbeatDate:null!==(Kt=et.lastSentHeartbeatDate)&&void 0!==Kt?Kt:xn.lastSentHeartbeatDate,heartbeats:[...xn.heartbeats,...et.heartbeats]})}})()}}function ot(je){return(0,Ee.L)(JSON.stringify({version:2,heartbeats:je})).length}!function Ke(je){Ue(new a.wA("platform-logger",et=>new Ae(et),"PRIVATE")),Ue(new a.wA("heartbeat",et=>new or(et),"PRIVATE")),Ni(xe,"0.7.31",je),Ni(xe,"0.7.31","esm2017"),Ni("fire-js","")}("")},4859:(In,Et,K)=>{K.d(Et,{H0:()=>xe,wA:()=>re,zt:()=>We});var m=K(5861),a=K(2090);class re{constructor(Me,Ie,Ge){this.name=Me,this.instanceFactory=Ie,this.type=Ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Me){return this.instantiationMode=Me,this}setMultipleInstances(Me){return this.multipleInstances=Me,this}setServiceProps(Me){return this.serviceProps=Me,this}setInstanceCreatedCallback(Me){return this.onInstanceCreated=Me,this}}const Ee="[DEFAULT]";class We{constructor(Me,Ie){this.name=Me,this.container=Ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Me){const Ie=this.normalizeInstanceIdentifier(Me);if(!this.instancesDeferred.has(Ie)){const Ge=new a.BH;if(this.instancesDeferred.set(Ie,Ge),this.isInitialized(Ie)||this.shouldAutoInitialize())try{const Mt=this.getOrInitializeService({instanceIdentifier:Ie});Mt&&Ge.resolve(Mt)}catch{}}return this.instancesDeferred.get(Ie).promise}getImmediate(Me){var Ie;const Ge=this.normalizeInstanceIdentifier(Me?.identifier),Mt=null!==(Ie=Me?.optional)&&void 0!==Ie&&Ie;if(!this.isInitialized(Ge)&&!this.shouldAutoInitialize()){if(Mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ge})}catch(ct){if(Mt)return null;throw ct}}getComponent(){return this.component}setComponent(Me){if(Me.name!==this.name)throw Error(`Mismatching Component ${Me.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Me,this.shouldAutoInitialize()){if(function Re(tt){return"EAGER"===tt.instantiationMode}(Me))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch{}for(const[Ie,Ge]of this.instancesDeferred.entries()){const Mt=this.normalizeInstanceIdentifier(Ie);try{const ct=this.getOrInitializeService({instanceIdentifier:Mt});Ge.resolve(ct)}catch{}}}}clearInstance(Me=Ee){this.instancesDeferred.delete(Me),this.instancesOptions.delete(Me),this.instances.delete(Me)}delete(){var Me=this;return(0,m.Z)(function*(){const Ie=Array.from(Me.instances.values());yield Promise.all([...Ie.filter(Ge=>"INTERNAL"in Ge).map(Ge=>Ge.INTERNAL.delete()),...Ie.filter(Ge=>"_delete"in Ge).map(Ge=>Ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Me=Ee){return this.instances.has(Me)}getOptions(Me=Ee){return this.instancesOptions.get(Me)||{}}initialize(Me={}){const{options:Ie={}}=Me,Ge=this.normalizeInstanceIdentifier(Me.instanceIdentifier);if(this.isInitialized(Ge))throw Error(`${this.name}(${Ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Mt=this.getOrInitializeService({instanceIdentifier:Ge,options:Ie});for(const[ct,wt]of this.instancesDeferred.entries())Ge===this.normalizeInstanceIdentifier(ct)&&wt.resolve(Mt);return Mt}onInit(Me,Ie){var Ge;const Mt=this.normalizeInstanceIdentifier(Ie),ct=null!==(Ge=this.onInitCallbacks.get(Mt))&&void 0!==Ge?Ge:new Set;ct.add(Me),this.onInitCallbacks.set(Mt,ct);const wt=this.instances.get(Mt);return wt&&Me(wt,Mt),()=>{ct.delete(Me)}}invokeOnInitCallbacks(Me,Ie){const Ge=this.onInitCallbacks.get(Ie);if(Ge)for(const Mt of Ge)try{Mt(Me,Ie)}catch{}}getOrInitializeService({instanceIdentifier:Me,options:Ie={}}){let Ge=this.instances.get(Me);if(!Ge&&this.component&&(Ge=this.component.instanceFactory(this.container,{instanceIdentifier:(tt=Me,tt===Ee?void 0:tt),options:Ie}),this.instances.set(Me,Ge),this.instancesOptions.set(Me,Ie),this.invokeOnInitCallbacks(Ge,Me),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Me,Ge)}catch{}var tt;return Ge||null}normalizeInstanceIdentifier(Me=Ee){return this.component?this.component.multipleInstances?Me:Ee:Me}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xe{constructor(Me){this.name=Me,this.providers=new Map}addComponent(Me){const Ie=this.getProvider(Me.name);if(Ie.isComponentSet())throw new Error(`Component ${Me.name} has already been registered with ${this.name}`);Ie.setComponent(Me)}addOrOverwriteComponent(Me){this.getProvider(Me.name).isComponentSet()&&this.providers.delete(Me.name),this.addComponent(Me)}getProvider(Me){if(this.providers.has(Me))return this.providers.get(Me);const Ie=new We(Me,this);return this.providers.set(Me,Ie),Ie}getProviders(){return Array.from(this.providers.values())}}},1877:(In,Et,K)=>{K.d(Et,{Am:()=>tt,Ub:()=>xe,Yd:()=>Re,in:()=>a});const m=[];var a=(()=>{return(Me=a||(a={}))[Me.DEBUG=0]="DEBUG",Me[Me.VERBOSE=1]="VERBOSE",Me[Me.INFO=2]="INFO",Me[Me.WARN=3]="WARN",Me[Me.ERROR=4]="ERROR",Me[Me.SILENT=5]="SILENT",a;var Me})();const re={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},Ee=a.INFO,We={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},Ae=(Me,Ie,...Ge)=>{if(Ie<Me.logLevel)return;const Mt=(new Date).toISOString(),ct=We[Ie];if(!ct)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ie})`);console[ct](`[${Mt}]  ${Me.name}:`,...Ge)};class Re{constructor(Ie){this.name=Ie,this._logLevel=Ee,this._logHandler=Ae,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(Ie){if(!(Ie in a))throw new TypeError(`Invalid value "${Ie}" assigned to \`logLevel\``);this._logLevel=Ie}setLogLevel(Ie){this._logLevel="string"==typeof Ie?re[Ie]:Ie}get logHandler(){return this._logHandler}set logHandler(Ie){if("function"!=typeof Ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ie){this._userLogHandler=Ie}debug(...Ie){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...Ie),this._logHandler(this,a.DEBUG,...Ie)}log(...Ie){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...Ie),this._logHandler(this,a.VERBOSE,...Ie)}info(...Ie){this._userLogHandler&&this._userLogHandler(this,a.INFO,...Ie),this._logHandler(this,a.INFO,...Ie)}warn(...Ie){this._userLogHandler&&this._userLogHandler(this,a.WARN,...Ie),this._logHandler(this,a.WARN,...Ie)}error(...Ie){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...Ie),this._logHandler(this,a.ERROR,...Ie)}}function xe(Me){m.forEach(Ie=>{Ie.setLogLevel(Me)})}function tt(Me,Ie){for(const Ge of m){let Mt=null;Ie&&Ie.level&&(Mt=re[Ie.level]),Ge.userLogHandler=null===Me?null:(ct,wt,...Wt)=>{const Dt=Wt.map(vt=>{if(null==vt)return null;if("string"==typeof vt)return vt;if("number"==typeof vt||"boolean"==typeof vt)return vt.toString();if(vt instanceof Error)return vt.message;try{return JSON.stringify(vt)}catch{return null}}).filter(vt=>vt).join(" ");wt>=(Mt??ct.logLevel)&&Me({level:a[wt].toLowerCase(),message:Dt,args:Wt,type:ct.name})}}}},8766:(In,Et,K)=>{K.d(Et,{Lj:()=>Be,X3:()=>qt});var m=K(5861);let re,Ee;const Re=new WeakMap,xe=new WeakMap,tt=new WeakMap,Me=new WeakMap,Ie=new WeakMap;let ct={get(Q,ft,Ve){if(Q instanceof IDBTransaction){if("done"===ft)return xe.get(Q);if("objectStoreNames"===ft)return Q.objectStoreNames||tt.get(Q);if("store"===ft)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return vt(Q[ft])},set:(Q,ft,Ve)=>(Q[ft]=Ve,!0),has:(Q,ft)=>Q instanceof IDBTransaction&&("done"===ft||"store"===ft)||ft in Q};function Dt(Q){return"function"==typeof Q?function Wt(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...ft){return Q.apply(rt(this),ft),vt(Re.get(this))}:function(...ft){return vt(Q.apply(rt(this),ft))}:function(ft,...Ve){const it=Q.call(rt(this),ft,...Ve);return tt.set(it,ft.sort?ft.sort():[ft]),vt(it)}}(Q):(Q instanceof IDBTransaction&&function Mt(Q){if(xe.has(Q))return;const ft=new Promise((Ve,it)=>{const bt=()=>{Q.removeEventListener("complete",yt),Q.removeEventListener("error",Yt),Q.removeEventListener("abort",Yt)},yt=()=>{Ve(),bt()},Yt=()=>{it(Q.error||new DOMException("AbortError","AbortError")),bt()};Q.addEventListener("complete",yt),Q.addEventListener("error",Yt),Q.addEventListener("abort",Yt)});xe.set(Q,ft)}(Q),((Q,ft)=>ft.some(Ve=>Q instanceof Ve))(Q,function We(){return re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,ct):Q)}function vt(Q){if(Q instanceof IDBRequest)return function Ge(Q){const ft=new Promise((Ve,it)=>{const bt=()=>{Q.removeEventListener("success",yt),Q.removeEventListener("error",Yt)},yt=()=>{Ve(vt(Q.result)),bt()},Yt=()=>{it(Q.error),bt()};Q.addEventListener("success",yt),Q.addEventListener("error",Yt)});return ft.then(Ve=>{Ve instanceof IDBCursor&&Re.set(Ve,Q)}).catch(()=>{}),Ie.set(ft,Q),ft}(Q);if(Me.has(Q))return Me.get(Q);const ft=Dt(Q);return ft!==Q&&(Me.set(Q,ft),Ie.set(ft,Q)),ft}const rt=Q=>Ie.get(Q);function qt(Q,ft,{blocked:Ve,upgrade:it,blocking:bt,terminated:yt}={}){const Yt=indexedDB.open(Q,ft),on=vt(Yt);return it&&Yt.addEventListener("upgradeneeded",pn=>{it(vt(Yt.result),pn.oldVersion,pn.newVersion,vt(Yt.transaction))}),Ve&&Yt.addEventListener("blocked",()=>Ve()),on.then(pn=>{yt&&pn.addEventListener("close",()=>yt()),bt&&pn.addEventListener("versionchange",()=>bt())}).catch(()=>{}),on}function Be(Q,{blocked:ft}={}){const Ve=indexedDB.deleteDatabase(Q);return ft&&Ve.addEventListener("blocked",()=>ft()),vt(Ve).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],Qe=new Map;function De(Q,ft){if(!(Q instanceof IDBDatabase)||ft in Q||"string"!=typeof ft)return;if(Qe.get(ft))return Qe.get(ft);const Ve=ft.replace(/FromIndex$/,""),it=ft!==Ve,bt=nt.includes(Ve);if(!(Ve in(it?IDBIndex:IDBObjectStore).prototype)||!bt&&!ve.includes(Ve))return;const yt=function(){var Yt=(0,m.Z)(function*(on,...pn){const On=this.transaction(on,bt?"readwrite":"readonly");let Nn=On.store;return it&&(Nn=Nn.index(pn.shift())),(yield Promise.all([Nn[Ve](...pn),bt&&On.done]))[0]});return function(pn){return Yt.apply(this,arguments)}}();return Qe.set(ft,yt),yt}!function wt(Q){ct=Q(ct)}(Q=>({...Q,get:(ft,Ve,it)=>De(ft,Ve)||Q.get(ft,Ve,it),has:(ft,Ve)=>!!De(ft,Ve)||Q.has(ft,Ve)}))},7185:(In,Et,K)=>{K.d(Et,{Rh:()=>On,_W:()=>Yt});var m=K(4650),a=K(7340),re=K(7579),Ee=K(6895),We=K(1481);const Ae=["toast-component",""];function Re(St,Vt){if(1&St){const Ue=m.EpF();m.TgZ(0,"button",5),m.NdJ("click",function(){m.CHM(Ue);const ln=m.oxw();return m.KtG(ln.remove())}),m.TgZ(1,"span",6),m._uU(2,"\xd7"),m.qZA()()}}function xe(St,Vt){if(1&St&&(m.ynx(0),m._uU(1),m.BQk()),2&St){const Ue=m.oxw(2);m.xp6(1),m.hij("[",Ue.duplicatesCount+1,"]")}}function tt(St,Vt){if(1&St&&(m.TgZ(0,"div"),m._uU(1),m.YNc(2,xe,2,1,"ng-container",4),m.qZA()),2&St){const Ue=m.oxw();m.Tol(Ue.options.titleClass),m.uIk("aria-label",Ue.title),m.xp6(1),m.hij(" ",Ue.title," "),m.xp6(1),m.Q6J("ngIf",Ue.duplicatesCount)}}function Me(St,Vt){if(1&St&&m._UZ(0,"div",7),2&St){const Ue=m.oxw();m.Tol(Ue.options.messageClass),m.Q6J("innerHTML",Ue.message,m.oJD)}}function Ie(St,Vt){if(1&St&&(m.TgZ(0,"div",8),m._uU(1),m.qZA()),2&St){const Ue=m.oxw();m.Tol(Ue.options.messageClass),m.uIk("aria-label",Ue.message),m.xp6(1),m.hij(" ",Ue.message," ")}}function Ge(St,Vt){if(1&St&&(m.TgZ(0,"div"),m._UZ(1,"div",9),m.qZA()),2&St){const Ue=m.oxw();m.xp6(1),m.Udp("width",Ue.width+"%")}}class Be{constructor(Vt,Ue){this.component=Vt,this.injector=Ue}attach(Vt,Ue){return this._attachedHost=Vt,Vt.attach(this,Ue)}detach(){const Vt=this._attachedHost;if(Vt)return this._attachedHost=void 0,Vt.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Vt){this._attachedHost=Vt}}class nt{constructor(Vt,Ue,_t,ln,Hn,Gi){this.toastId=Vt,this.config=Ue,this.message=_t,this.title=ln,this.toastType=Hn,this.toastRef=Gi,this._onTap=new re.x,this._onAction=new re.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Vt){this._onAction.next(Vt)}onAction(){return this._onAction.asObservable()}}const De=new m.OlP("ToastConfig");class Q{constructor(Vt){this._overlayRef=Vt,this.duplicatesCount=0,this._afterClosed=new re.x,this._activate=new re.x,this._manualClose=new re.x,this._resetTimeout=new re.x,this._countDuplicate=new re.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Vt,Ue){Vt&&this._resetTimeout.next(),Ue&&this._countDuplicate.next(++this.duplicatesCount)}}class ft{constructor(Vt,Ue){this._toastPackage=Vt,this._parentInjector=Ue}get(Vt,Ue,_t){return Vt===nt?this._toastPackage:this._parentInjector.get(Vt,Ue,_t)}}class Ve extends class ve{attach(Vt,Ue){return this._attachedPortal=Vt,this.attachComponentPortal(Vt,Ue)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Vt){this._disposeFn=Vt}}{constructor(Vt,Ue,_t){super(),this._hostDomElement=Vt,this._componentFactoryResolver=Ue,this._appRef=_t}attachComponentPortal(Vt,Ue){const _t=this._componentFactoryResolver.resolveComponentFactory(Vt.component);let ln;return ln=_t.create(Vt.injector),this._appRef.attachView(ln.hostView),this.setDisposeFn(()=>{this._appRef.detachView(ln.hostView),ln.destroy()}),Ue?this._hostDomElement.insertBefore(this._getComponentRootNode(ln),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(ln)),ln}_getComponentRootNode(Vt){return Vt.hostView.rootNodes[0]}}class it{constructor(Vt){this._portalHost=Vt}attach(Vt,Ue=!0){return this._portalHost.attach(Vt,Ue)}detach(){return this._portalHost.detach()}}let bt=(()=>{class St{constructor(Ue){this._document=Ue}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Ue=this._document.createElement("div");Ue.classList.add("overlay-container"),Ue.setAttribute("aria-live","polite"),this._document.body.appendChild(Ue),this._containerElement=Ue}}return St.\u0275fac=function(Ue){return new(Ue||St)(m.LFG(Ee.K0))},St.\u0275prov=m.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})(),yt=(()=>{class St{constructor(Ue,_t,ln,Hn){this._overlayContainer=Ue,this._componentFactoryResolver=_t,this._appRef=ln,this._document=Hn,this._paneElements=new Map}create(Ue,_t){return this._createOverlayRef(this.getPaneElement(Ue,_t))}getPaneElement(Ue="",_t){return this._paneElements.get(_t)||this._paneElements.set(_t,{}),this._paneElements.get(_t)[Ue]||(this._paneElements.get(_t)[Ue]=this._createPaneElement(Ue,_t)),this._paneElements.get(_t)[Ue]}_createPaneElement(Ue,_t){const ln=this._document.createElement("div");return ln.id="toast-container",ln.classList.add(Ue),ln.classList.add("toast-container"),_t?_t.getContainerElement().appendChild(ln):this._overlayContainer.getContainerElement().appendChild(ln),ln}_createPortalHost(Ue){return new Ve(Ue,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Ue){return new it(this._createPortalHost(Ue))}}return St.\u0275fac=function(Ue){return new(Ue||St)(m.LFG(bt),m.LFG(m._Vd),m.LFG(m.z2F),m.LFG(Ee.K0))},St.\u0275prov=m.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})(),Yt=(()=>{class St{constructor(Ue,_t,ln,Hn,Gi){this.overlay=_t,this._injector=ln,this.sanitizer=Hn,this.ngZone=Gi,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...Ue.default,...Ue.config},Ue.config.iconClasses&&(this.toastrConfig.iconClasses={...Ue.default.iconClasses,...Ue.config.iconClasses})}show(Ue,_t,ln={},Hn=""){return this._preBuildNotification(Hn,Ue,_t,this.applyConfig(ln))}success(Ue,_t,ln={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Ue,_t,this.applyConfig(ln))}error(Ue,_t,ln={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Ue,_t,this.applyConfig(ln))}info(Ue,_t,ln={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Ue,_t,this.applyConfig(ln))}warning(Ue,_t,ln={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Ue,_t,this.applyConfig(ln))}clear(Ue){for(const _t of this.toasts)if(void 0!==Ue){if(_t.toastId===Ue)return void _t.toastRef.manualClose()}else _t.toastRef.manualClose()}remove(Ue){const _t=this._findToast(Ue);if(!_t||(_t.activeToast.toastRef.close(),this.toasts.splice(_t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const ln=this.toasts[this.currentlyActive].toastRef;ln.isInactive()||(this.currentlyActive=this.currentlyActive+1,ln.activate())}return!0}findDuplicate(Ue="",_t="",ln,Hn){const{includeTitleDuplicates:Gi}=this.toastrConfig;for(const Ei of this.toasts){const bi=Gi&&Ei.title===Ue;if((!Gi||bi)&&Ei.message===_t)return Ei.toastRef.onDuplicate(ln,Hn),Ei}return null}applyConfig(Ue={}){return{...this.toastrConfig,...Ue}}_findToast(Ue){for(let _t=0;_t<this.toasts.length;_t++)if(this.toasts[_t].toastId===Ue)return{index:_t,activeToast:this.toasts[_t]};return null}_preBuildNotification(Ue,_t,ln,Hn){return Hn.onActivateTick?this.ngZone.run(()=>this._buildNotification(Ue,_t,ln,Hn)):this._buildNotification(Ue,_t,ln,Hn)}_buildNotification(Ue,_t,ln,Hn){if(!Hn.toastComponent)throw new Error("toastComponent required");const Gi=this.findDuplicate(ln,_t,this.toastrConfig.resetTimeoutOnDuplicate&&Hn.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&ln||_t)&&this.toastrConfig.preventDuplicates&&null!==Gi)return Gi;this.previousToastMessage=_t;let Ei=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Ei=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const bi=this.overlay.create(Hn.positionClass,this.overlayContainer);this.index=this.index+1;let zi=_t;_t&&Hn.enableHtml&&(zi=this.sanitizer.sanitize(m.q3G.HTML,_t));const ai=new Q(bi),Hi=new nt(this.index,Hn,zi,ln,Ue,ai),Li=new ft(Hi,this._injector),vi=new Be(Hn.toastComponent,Li),Qt=bi.attach(vi,this.toastrConfig.newestOnTop);ai.componentInstance=Qt.instance;const Ni={toastId:this.index,title:ln||"",message:_t||"",toastRef:ai,onShown:ai.afterActivate(),onHidden:ai.afterClosed(),onTap:Hi.onTap(),onAction:Hi.onAction(),portal:Qt};return Ei||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Ni.toastRef.activate()})),this.toasts.push(Ni),Ni}}return St.\u0275fac=function(Ue){return new(Ue||St)(m.LFG(De),m.LFG(yt),m.LFG(m.zs3),m.LFG(We.H7),m.LFG(m.R0b))},St.\u0275prov=m.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})();const pn={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class St{constructor(Ue,_t,ln){this.toastrService=Ue,this.toastPackage=_t,this.ngZone=ln,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=_t.message,this.title=_t.title,this.options=_t.config,this.originalTimeout=_t.config.timeOut,this.toastClasses=`${_t.toastType} ${_t.config.toastClass}`,this.sub=_t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=_t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=_t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=_t.toastRef.countDuplicate().subscribe(Hn=>{this.duplicatesCount=Hn})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Ue=(new Date).getTime();this.width=(this.hideTime-Ue)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Ue,_t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Ue),_t)):this.timeout=setTimeout(()=>Ue(),_t)}outsideInterval(Ue,_t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Ue),_t)):this.intervalId=setInterval(()=>Ue(),_t)}runInsideAngular(Ue){this.ngZone?this.ngZone.run(()=>Ue()):Ue()}}return St.\u0275fac=function(Ue){return new(Ue||St)(m.Y36(Yt),m.Y36(nt),m.Y36(m.R0b))},St.\u0275cmp=m.Xpm({type:St,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Ue,_t){1&Ue&&m.NdJ("click",function(){return _t.tapToast()})("mouseenter",function(){return _t.stickAround()})("mouseleave",function(){return _t.delayedHideToast()}),2&Ue&&(m.d8E("@flyInOut",_t.state),m.Tol(_t.toastClasses),m.Udp("display",_t.displayStyle))},attrs:Ae,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Ue,_t){1&Ue&&(m.YNc(0,Re,3,0,"button",0),m.YNc(1,tt,3,5,"div",1),m.YNc(2,Me,1,3,"div",2),m.YNc(3,Ie,2,4,"div",3),m.YNc(4,Ge,2,2,"div",4)),2&Ue&&(m.Q6J("ngIf",_t.options.closeButton),m.xp6(1),m.Q6J("ngIf",_t.title),m.xp6(1),m.Q6J("ngIf",_t.message&&_t.options.enableHtml),m.xp6(1),m.Q6J("ngIf",_t.message&&!_t.options.enableHtml),m.xp6(1),m.Q6J("ngIf",_t.options.progressBar))},dependencies:[Ee.O5],encapsulation:2,data:{animation:[(0,a.X$)("flyInOut",[(0,a.SB)("inactive",(0,a.oB)({opacity:0})),(0,a.SB)("active",(0,a.oB)({opacity:1})),(0,a.SB)("removed",(0,a.oB)({opacity:0})),(0,a.eR)("inactive => active",(0,a.jt)("{{ easeTime }}ms {{ easing }}")),(0,a.eR)("active => removed",(0,a.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),St})()};let On=(()=>{class St{static forRoot(Ue={}){return{ngModule:St,providers:[{provide:De,useValue:{default:pn,config:Ue}}]}}}return St.\u0275fac=function(Ue){return new(Ue||St)},St.\u0275mod=m.oAB({type:St}),St.\u0275inj=m.cJS({imports:[Ee.ez]}),St})()},805:(In,Et,K)=>{K.d(Et,{$_:()=>vt,F0:()=>ct,b4:()=>Re,h4:()=>Dt,iZ:()=>Ie,jx:()=>rt,m8:()=>qt,ws:()=>xe});var m=K(4650),a=K(7579),re=K(982),Ee=K(6895);const We=["*"];let Ae=(()=>{class ve{}return ve.STARTS_WITH="startsWith",ve.CONTAINS="contains",ve.NOT_CONTAINS="notContains",ve.ENDS_WITH="endsWith",ve.EQUALS="equals",ve.NOT_EQUALS="notEquals",ve.IN="in",ve.LESS_THAN="lt",ve.LESS_THAN_OR_EQUAL_TO="lte",ve.GREATER_THAN="gt",ve.GREATER_THAN_OR_EQUAL_TO="gte",ve.BETWEEN="between",ve.IS="is",ve.IS_NOT="isNot",ve.BEFORE="before",ve.AFTER="after",ve.DATE_IS="dateIs",ve.DATE_IS_NOT="dateIsNot",ve.DATE_BEFORE="dateBefore",ve.DATE_AFTER="dateAfter",ve})(),Re=(()=>{class ve{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[Ae.STARTS_WITH,Ae.CONTAINS,Ae.NOT_CONTAINS,Ae.ENDS_WITH,Ae.EQUALS,Ae.NOT_EQUALS],numeric:[Ae.EQUALS,Ae.NOT_EQUALS,Ae.LESS_THAN,Ae.LESS_THAN_OR_EQUAL_TO,Ae.GREATER_THAN,Ae.GREATER_THAN_OR_EQUAL_TO],date:[Ae.DATE_IS,Ae.DATE_IS_NOT,Ae.DATE_BEFORE,Ae.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new a.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(Qe){return this.translation[Qe]}setTranslation(Qe){this.translation={...this.translation,...Qe},this.translationSource.next(this.translation)}}return ve.\u0275fac=function(Qe){return new(Qe||ve)},ve.\u0275prov=m.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),xe=(()=>{class ve{}return ve.STARTS_WITH="startsWith",ve.CONTAINS="contains",ve.NOT_CONTAINS="notContains",ve.ENDS_WITH="endsWith",ve.EQUALS="equals",ve.NOT_EQUALS="notEquals",ve.NO_FILTER="noFilter",ve.LT="lt",ve.LTE="lte",ve.GT="gt",ve.GTE="gte",ve.IS="is",ve.IS_NOT="isNot",ve.BEFORE="before",ve.AFTER="after",ve.CLEAR="clear",ve.APPLY="apply",ve.MATCH_ALL="matchAll",ve.MATCH_ANY="matchAny",ve.ADD_RULE="addRule",ve.REMOVE_RULE="removeRule",ve.ACCEPT="accept",ve.REJECT="reject",ve.CHOOSE="choose",ve.UPLOAD="upload",ve.CANCEL="cancel",ve.DAY_NAMES="dayNames",ve.DAY_NAMES_SHORT="dayNamesShort",ve.DAY_NAMES_MIN="dayNamesMin",ve.MONTH_NAMES="monthNames",ve.MONTH_NAMES_SHORT="monthNamesShort",ve.FIRST_DAY_OF_WEEK="firstDayOfWeek",ve.TODAY="today",ve.WEEK_HEADER="weekHeader",ve.WEAK="weak",ve.MEDIUM="medium",ve.STRONG="strong",ve.PASSWORD_PROMPT="passwordPrompt",ve.EMPTY_MESSAGE="emptyMessage",ve.EMPTY_FILTER_MESSAGE="emptyFilterMessage",ve})(),Ie=(()=>{class ve{constructor(){this.filters={startsWith:(Qe,De,Q)=>{if(null==De||""===De.trim())return!0;if(null==Qe)return!1;let ft=re.gb.removeAccents(De.toString()).toLocaleLowerCase(Q);return re.gb.removeAccents(Qe.toString()).toLocaleLowerCase(Q).slice(0,ft.length)===ft},contains:(Qe,De,Q)=>{if(null==De||"string"==typeof De&&""===De.trim())return!0;if(null==Qe)return!1;let ft=re.gb.removeAccents(De.toString()).toLocaleLowerCase(Q);return-1!==re.gb.removeAccents(Qe.toString()).toLocaleLowerCase(Q).indexOf(ft)},notContains:(Qe,De,Q)=>{if(null==De||"string"==typeof De&&""===De.trim())return!0;if(null==Qe)return!1;let ft=re.gb.removeAccents(De.toString()).toLocaleLowerCase(Q);return-1===re.gb.removeAccents(Qe.toString()).toLocaleLowerCase(Q).indexOf(ft)},endsWith:(Qe,De,Q)=>{if(null==De||""===De.trim())return!0;if(null==Qe)return!1;let ft=re.gb.removeAccents(De.toString()).toLocaleLowerCase(Q),Ve=re.gb.removeAccents(Qe.toString()).toLocaleLowerCase(Q);return-1!==Ve.indexOf(ft,Ve.length-ft.length)},equals:(Qe,De,Q)=>null==De||"string"==typeof De&&""===De.trim()||null!=Qe&&(Qe.getTime&&De.getTime?Qe.getTime()===De.getTime():re.gb.removeAccents(Qe.toString()).toLocaleLowerCase(Q)==re.gb.removeAccents(De.toString()).toLocaleLowerCase(Q)),notEquals:(Qe,De,Q)=>!(null==De||"string"==typeof De&&""===De.trim()||null!=Qe&&(Qe.getTime&&De.getTime?Qe.getTime()===De.getTime():re.gb.removeAccents(Qe.toString()).toLocaleLowerCase(Q)==re.gb.removeAccents(De.toString()).toLocaleLowerCase(Q))),in:(Qe,De)=>{if(null==De||0===De.length)return!0;for(let Q=0;Q<De.length;Q++)if(re.gb.equals(Qe,De[Q]))return!0;return!1},between:(Qe,De)=>null==De||null==De[0]||null==De[1]||null!=Qe&&(Qe.getTime?De[0].getTime()<=Qe.getTime()&&Qe.getTime()<=De[1].getTime():De[0]<=Qe&&Qe<=De[1]),lt:(Qe,De,Q)=>null==De||null!=Qe&&(Qe.getTime&&De.getTime?Qe.getTime()<De.getTime():Qe<De),lte:(Qe,De,Q)=>null==De||null!=Qe&&(Qe.getTime&&De.getTime?Qe.getTime()<=De.getTime():Qe<=De),gt:(Qe,De,Q)=>null==De||null!=Qe&&(Qe.getTime&&De.getTime?Qe.getTime()>De.getTime():Qe>De),gte:(Qe,De,Q)=>null==De||null!=Qe&&(Qe.getTime&&De.getTime?Qe.getTime()>=De.getTime():Qe>=De),is:(Qe,De,Q)=>this.filters.equals(Qe,De,Q),isNot:(Qe,De,Q)=>this.filters.notEquals(Qe,De,Q),before:(Qe,De,Q)=>this.filters.lt(Qe,De,Q),after:(Qe,De,Q)=>this.filters.gt(Qe,De,Q),dateIs:(Qe,De)=>null==De||null!=Qe&&Qe.toDateString()===De.toDateString(),dateIsNot:(Qe,De)=>null==De||null!=Qe&&Qe.toDateString()!==De.toDateString(),dateBefore:(Qe,De)=>null==De||null!=Qe&&Qe.getTime()<De.getTime(),dateAfter:(Qe,De)=>null==De||null!=Qe&&Qe.getTime()>De.getTime()}}filter(Qe,De,Q,ft,Ve){let it=[];if(Qe)for(let bt of Qe)for(let yt of De){let Yt=re.gb.resolveFieldData(bt,yt);if(this.filters[ft](Yt,Q,Ve)){it.push(bt);break}}return it}register(Qe,De){this.filters[Qe]=De}}return ve.\u0275fac=function(Qe){return new(Qe||ve)},ve.\u0275prov=m.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),ct=(()=>{class ve{constructor(){this.clickSource=new a.x,this.clickObservable=this.clickSource.asObservable()}add(Qe){Qe&&this.clickSource.next(Qe)}}return ve.\u0275fac=function(Qe){return new(Qe||ve)},ve.\u0275prov=m.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),Dt=(()=>{class ve{}return ve.\u0275fac=function(Qe){return new(Qe||ve)},ve.\u0275cmp=m.Xpm({type:ve,selectors:[["p-header"]],ngContentSelectors:We,decls:1,vars:0,template:function(Qe,De){1&Qe&&(m.F$t(),m.Hsn(0))},encapsulation:2}),ve})(),vt=(()=>{class ve{}return ve.\u0275fac=function(Qe){return new(Qe||ve)},ve.\u0275cmp=m.Xpm({type:ve,selectors:[["p-footer"]],ngContentSelectors:We,decls:1,vars:0,template:function(Qe,De){1&Qe&&(m.F$t(),m.Hsn(0))},encapsulation:2}),ve})(),rt=(()=>{class ve{constructor(Qe){this.template=Qe}getType(){return this.name}}return ve.\u0275fac=function(Qe){return new(Qe||ve)(m.Y36(m.Rgc))},ve.\u0275dir=m.lG2({type:ve,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),ve})(),qt=(()=>{class ve{}return ve.\u0275fac=function(Qe){return new(Qe||ve)},ve.\u0275mod=m.oAB({type:ve}),ve.\u0275inj=m.cJS({imports:[Ee.ez]}),ve})()},1740:(In,Et,K)=>{K.d(Et,{j:()=>We,o:()=>Ee});var m=K(4650),a=K(6895),re=K(4006);let Ee=(()=>{class Ae{constructor(xe,tt,Me){this.el=xe,this.ngModel=tt,this.cd=Me}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(xe){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return Ae.\u0275fac=function(xe){return new(xe||Ae)(m.Y36(m.SBq),m.Y36(re.On,8),m.Y36(m.sBO))},Ae.\u0275dir=m.lG2({type:Ae,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(xe,tt){1&xe&&m.NdJ("input",function(Ie){return tt.onInput(Ie)}),2&xe&&m.ekj("p-filled",tt.filled)}}),Ae})(),We=(()=>{class Ae{}return Ae.\u0275fac=function(xe){return new(xe||Ae)},Ae.\u0275mod=m.oAB({type:Ae}),Ae.\u0275inj=m.cJS({imports:[a.ez]}),Ae})()},982:(In,Et,K)=>{K.d(Et,{P9:()=>We,Th:()=>re,gb:()=>m});class m{static equals(Re,xe,tt){return tt?this.resolveFieldData(Re,tt)===this.resolveFieldData(xe,tt):this.equalsByValue(Re,xe)}static equalsByValue(Re,xe){if(Re===xe)return!0;if(Re&&xe&&"object"==typeof Re&&"object"==typeof xe){var Ie,Ge,Mt,tt=Array.isArray(Re),Me=Array.isArray(xe);if(tt&&Me){if((Ge=Re.length)!=xe.length)return!1;for(Ie=Ge;0!=Ie--;)if(!this.equalsByValue(Re[Ie],xe[Ie]))return!1;return!0}if(tt!=Me)return!1;var ct=Re instanceof Date,wt=xe instanceof Date;if(ct!=wt)return!1;if(ct&&wt)return Re.getTime()==xe.getTime();var Wt=Re instanceof RegExp,Dt=xe instanceof RegExp;if(Wt!=Dt)return!1;if(Wt&&Dt)return Re.toString()==xe.toString();var vt=Object.keys(Re);if((Ge=vt.length)!==Object.keys(xe).length)return!1;for(Ie=Ge;0!=Ie--;)if(!Object.prototype.hasOwnProperty.call(xe,vt[Ie]))return!1;for(Ie=Ge;0!=Ie--;)if(!this.equalsByValue(Re[Mt=vt[Ie]],xe[Mt]))return!1;return!0}return Re!=Re&&xe!=xe}static resolveFieldData(Re,xe){if(Re&&xe){if(this.isFunction(xe))return xe(Re);if(-1==xe.indexOf("."))return Re[xe];{let tt=xe.split("."),Me=Re;for(let Ie=0,Ge=tt.length;Ie<Ge;++Ie){if(null==Me)return null;Me=Me[tt[Ie]]}return Me}}return null}static isFunction(Re){return!!(Re&&Re.constructor&&Re.call&&Re.apply)}static reorderArray(Re,xe,tt){Re&&xe!==tt&&(tt>=Re.length&&(tt%=Re.length,xe%=Re.length),Re.splice(tt,0,Re.splice(xe,1)[0]))}static insertIntoOrderedArray(Re,xe,tt,Me){if(tt.length>0){let Ie=!1;for(let Ge=0;Ge<tt.length;Ge++)if(this.findIndexInList(tt[Ge],Me)>xe){tt.splice(Ge,0,Re),Ie=!0;break}Ie||tt.push(Re)}else tt.push(Re)}static findIndexInList(Re,xe){let tt=-1;if(xe)for(let Me=0;Me<xe.length;Me++)if(xe[Me]==Re){tt=Me;break}return tt}static contains(Re,xe){if(null!=Re&&xe&&xe.length)for(let tt of xe)if(this.equals(Re,tt))return!0;return!1}static removeAccents(Re){return Re&&Re.search(/[\xC0-\xFF]/g)>-1&&(Re=Re.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),Re}static isEmpty(Re){return null==Re||""===Re||Array.isArray(Re)&&0===Re.length||!(Re instanceof Date)&&"object"==typeof Re&&0===Object.keys(Re).length}static isNotEmpty(Re){return!this.isEmpty(Re)}}var a=0;function re(){return"pr_id_"+ ++a}var We=function Ee(){let Ae=[];const Me=Ie=>Ie&&parseInt(Ie.style.zIndex,10)||0;return{get:Me,set:(Ie,Ge,Mt)=>{Ge&&(Ge.style.zIndex=String(((Ie,Ge)=>{let Mt=Ae.length>0?Ae[Ae.length-1]:{key:Ie,value:Ge},ct=Mt.value+(Mt.key===Ie?0:Ge)+1;return Ae.push({key:Ie,value:ct}),ct})(Ie,Mt)))},clear:Ie=>{Ie&&((Ie=>{Ae=Ae.filter(Ge=>Ge.value!==Ie)})(Me(Ie)),Ie.style.zIndex="")},getCurrent:()=>Ae.length>0?Ae[Ae.length-1].value:0}}()},5861:(In,Et,K)=>{function m(re,Ee,We,Ae,Re,xe,tt){try{var Me=re[xe](tt),Ie=Me.value}catch(Ge){return void We(Ge)}Me.done?Ee(Ie):Promise.resolve(Ie).then(Ae,Re)}function a(re){return function(){var Ee=this,We=arguments;return new Promise(function(Ae,Re){var xe=re.apply(Ee,We);function tt(Ie){m(xe,Ae,Re,tt,Me,"next",Ie)}function Me(Ie){m(xe,Ae,Re,tt,Me,"throw",Ie)}tt(void 0)})}}K.d(Et,{Z:()=>a})}},In=>{In(In.s=6427)}]);